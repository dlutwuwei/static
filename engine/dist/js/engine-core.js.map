{"version":3,"sources":["webpack://AliLowCodeEngine/webpack/universalModuleDefinition","webpack://AliLowCodeEngine/webpack/bootstrap","webpack://AliLowCodeEngine/../editor-core/src/index.ts","webpack://AliLowCodeEngine/external \"window.React\"","webpack://AliLowCodeEngine/../utils/src/is-css-url.ts","webpack://AliLowCodeEngine/../utils/src/create-defer.ts","webpack://AliLowCodeEngine/../utils/src/script.ts","webpack://AliLowCodeEngine/../utils/src/asset.ts","webpack://AliLowCodeEngine/../utils/src/is-object.ts","webpack://AliLowCodeEngine/../utils/src/is-plain-object.ts","webpack://AliLowCodeEngine/../utils/src/clone-deep.ts","webpack://AliLowCodeEngine/../utils/src/clone-enumerable-property.ts","webpack://AliLowCodeEngine/../utils/src/is-react.ts","webpack://AliLowCodeEngine/../utils/src/create-content.ts","webpack://AliLowCodeEngine/../utils/src/is-es-module.ts","webpack://AliLowCodeEngine/../utils/src/create-icon.tsx","webpack://AliLowCodeEngine/../utils/src/cursor.ts","webpack://AliLowCodeEngine/../utils/src/get-prototype-of.ts","webpack://AliLowCodeEngine/../utils/src/has-own-property.ts","webpack://AliLowCodeEngine/../utils/src/is-element.ts","webpack://AliLowCodeEngine/../utils/src/is-form-event.ts","webpack://AliLowCodeEngine/../utils/src/is-function.ts","webpack://AliLowCodeEngine/../utils/src/navtive-selection.ts","webpack://AliLowCodeEngine/../utils/src/set-prototype-of.ts","webpack://AliLowCodeEngine/../utils/src/shallow-equal.ts","webpack://AliLowCodeEngine/../utils/src/svg-icon.tsx","webpack://AliLowCodeEngine/../utils/src/unique-id.ts","webpack://AliLowCodeEngine/../utils/src/build-components.ts","webpack://AliLowCodeEngine/../utils/src/app-helper.ts","webpack://AliLowCodeEngine/../utils/src/misc.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-action-content-object.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-custom-view.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-dom-text.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-dynamic-setter.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-i18n-data.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-jsblock.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-jsexpression.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-isfunction.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-jsslot.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-procode-component-type.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-lowcode-component-type.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-node-schema.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-project-schema.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-setter-config.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-title-config.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-drag-node-data-object.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-drag-node-object.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-drag-any-object.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-location-children-detail.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-node.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-location-data.ts","webpack://AliLowCodeEngine/../utils/src/check-types/is-setting-field.ts","webpack://AliLowCodeEngine/../utils/src/schema.ts","webpack://AliLowCodeEngine/../utils/src/node-helper.ts","webpack://AliLowCodeEngine/../utils/src/logger.ts","webpack://AliLowCodeEngine/../utils/src/is-shaken.ts","webpack://AliLowCodeEngine/../utils/src/is-plugin-event-name.ts","webpack://AliLowCodeEngine/../utils/src/css-helper.ts","webpack://AliLowCodeEngine/../utils/src/transaction-manager.ts","webpack://AliLowCodeEngine/./node_modules/tslib/tslib.es6.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@alilc+lowcode-datasource-types@1.1.4/node_modules/@alilc/lowcode-datasource-types/es/data-source.js","webpack://AliLowCodeEngine/../types/src/activity.ts","webpack://AliLowCodeEngine/../types/src/assets.ts","webpack://AliLowCodeEngine/../types/src/event/prop.ts","webpack://AliLowCodeEngine/../types/src/event/node.ts","webpack://AliLowCodeEngine/../types/src/shell/type/location.ts","webpack://AliLowCodeEngine/../types/src/shell/enum/event-names.ts","webpack://AliLowCodeEngine/../types/src/shell/enum/transition-type.ts","webpack://AliLowCodeEngine/../types/src/shell/enum/transform-stage.ts","webpack://AliLowCodeEngine/../types/src/shell/enum/drag-object-type.ts","webpack://AliLowCodeEngine/../types/src/shell/enum/prop-value-changed-type.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isActionContentObject.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isReactClass.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isReactComponent.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isCustomView.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isDOMText.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isDynamicSetter.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isI18nData.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isJSBlock.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isJSExpression.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isJSFunction.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isJSSlot.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isProCodeComponentType.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isLowCodeComponentType.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isNodeSchema.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isPlainObject.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isProjectSchema.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isSetterConfig.ts","webpack://AliLowCodeEngine/../types/src/deprecated/isTitleConfig.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/classnames@2.3.2/node_modules/classnames/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx@6.8.0/node_modules/mobx/dist/mobx.esm.js","webpack://AliLowCodeEngine/external \"Next\"","webpack://AliLowCodeEngine/external \"_\"","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/events@3.3.0/node_modules/events/events.js","webpack://AliLowCodeEngine/../editor-core/src/widgets/tip/tip-handler.ts","webpack://AliLowCodeEngine/external \"window.PropTypes\"","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/class/metadata.js","webpack://AliLowCodeEngine/../editor-core/src/event-bus.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/tslib@2.5.0/node_modules/tslib/tslib.es6.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-messageformat-parser@2.1.0/node_modules/@formatjs/icu-messageformat-parser/lib/error.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-messageformat-parser@2.1.0/node_modules/@formatjs/icu-messageformat-parser/lib/types.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-messageformat-parser@2.1.0/node_modules/@formatjs/icu-messageformat-parser/lib/regex.generated.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-skeleton-parser@1.3.6/node_modules/@formatjs/icu-skeleton-parser/lib/date-time.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-skeleton-parser@1.3.6/node_modules/@formatjs/icu-skeleton-parser/lib/regex.generated.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-skeleton-parser@1.3.6/node_modules/@formatjs/icu-skeleton-parser/lib/number.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-messageformat-parser@2.1.0/node_modules/@formatjs/icu-messageformat-parser/lib/time-data.generated.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-messageformat-parser@2.1.0/node_modules/@formatjs/icu-messageformat-parser/lib/parser.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-messageformat-parser@2.1.0/node_modules/@formatjs/icu-messageformat-parser/lib/date-time-pattern-generator.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+icu-messageformat-parser@2.1.0/node_modules/@formatjs/icu-messageformat-parser/lib/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/@formatjs+fast-memoize@1.2.1/node_modules/@formatjs/fast-memoize/lib/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/intl-messageformat@9.13.0/node_modules/intl-messageformat/lib/src/error.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/intl-messageformat@9.13.0/node_modules/intl-messageformat/lib/src/formatters.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/intl-messageformat@9.13.0/node_modules/intl-messageformat/lib/src/core.js","webpack://AliLowCodeEngine/../editor-core/src/intl/global-locale.ts","webpack://AliLowCodeEngine/../editor-core/src/intl/index.ts","webpack://AliLowCodeEngine/external \"window.ReactDOM\"","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/ric-shim@1.0.1/node_modules/ric-shim/index.js","webpack://AliLowCodeEngine/../editor-core/src/utils/get-public-path.ts","webpack://AliLowCodeEngine/../editor-core/src/utils/request.ts","webpack://AliLowCodeEngine/../editor-core/src/utils/focus-tracker.ts","webpack://AliLowCodeEngine/../editor-core/src/utils/control.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/src/util.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/compare.js","webpack://AliLowCodeEngine/../editor-core/src/di/index.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/assertEnvironment.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/observerBatching.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/utils.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/printDebugValue.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/FinalizationRegistryWrapper.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/reactionCleanupTrackingCommon.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/createReactionCleanupTrackingUsingFinalizationRegister.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/createTimerBasedReactionCleanupTracking.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/utils/reactionCleanupTracking.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/staticRendering.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/useObserver.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/observer.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/ObserverComponent.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/useLocalObservable.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/useAsObservableSource.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/useLocalStore.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react-lite@3.4.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react-lite/es/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/mobx-react@7.6.0_tdbdkutx2434ga7yl2qohv4k54/node_modules/mobx-react/dist/mobxreact.esm.js","webpack://AliLowCodeEngine/../editor-core/src/utils/obx.ts","webpack://AliLowCodeEngine/(webpack)/buildin/global.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/utils/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/utils/getGlobalType.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/class/ClassLoader.js","webpack://AliLowCodeEngine/../editor-core/src/widgets/tip/tip.tsx","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/internal/debug.js","webpack://AliLowCodeEngine/../editor-core/src/utils/preference.ts","webpack://AliLowCodeEngine/../editor-core/src/config.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/index.js","webpack://AliLowCodeEngine/../editor-core/src/utils/logger.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/dist/store.legacy.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/class/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/internal/parse-options.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/internal/re.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/classes/semver.js","webpack://AliLowCodeEngine/../editor-core/src/di/setter.ts","webpack://AliLowCodeEngine/../editor-core/src/di/ioc-context.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/utils/getSuperClassInfo.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/utils/guard.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/utils/logger.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/decorator/aspect.js","webpack://AliLowCodeEngine/../editor-core/src/hotkey.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/classes/range.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/internal/constants.js","webpack://AliLowCodeEngine/../editor-core/src/widgets/tip/utils.ts","webpack://AliLowCodeEngine/../editor-core/src/widgets/tip/tip-item.tsx","webpack://AliLowCodeEngine/../editor-core/src/widgets/tip/tip-container.tsx","webpack://AliLowCodeEngine/../editor-core/src/widgets/title/index.tsx","webpack://AliLowCodeEngine/../editor-core/src/utils/assets-transform.ts","webpack://AliLowCodeEngine/../editor-core/src/editor.ts","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/satisfies.js","webpack://AliLowCodeEngine/./node_modules/mobx/dist/mobx.esm.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/common.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/ms@2.1.2/node_modules/ms/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/src/store-engine.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/storages/all.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/storages/localStorage.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/storages/oldFF-globalStorage.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/storages/oldIE-userDataStorage.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/storages/cookieStorage.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/storages/sessionStorage.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/storages/memoryStorage.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/plugins/json2.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/store@2.0.12/node_modules/store/plugins/lib/json2.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/IocContext.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/utils/getByDecorator.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/reflect-metadata@0.1.13/node_modules/reflect-metadata/Reflect.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/class/ClassInfo.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/utils/getRefMap.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/utils/types.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/decorator/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/decorator/classInfo.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/decorator/inject.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/decorator/injectable.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/decorator/imports.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/decorator/postConstruct.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/power-di@2.4.34/node_modules/power-di/lib/decorator/preDestroy.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/lru-cache@6.0.0/node_modules/lru-cache/index.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/yallist@4.0.0/node_modules/yallist/yallist.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/yallist@4.0.0/node_modules/yallist/iterator.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/classes/comparator.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/cmp.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/eq.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/internal/identifiers.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/neq.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/gt.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/gte.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/lt.js","webpack://AliLowCodeEngine//Users/wuwei/repos/lowcode-engine/node_modules/.pnpm/semver@7.3.8/node_modules/semver/functions/lte.js","webpack://AliLowCodeEngine/external \"window.AliLowCodeEngineExt\"","webpack://AliLowCodeEngine/../designer/node_modules/tslib/tslib.es6.js","webpack://AliLowCodeEngine/../designer/src/document/node/props/value-to-source.ts","webpack://AliLowCodeEngine/../designer/src/document/node/props/prop.ts","webpack://AliLowCodeEngine/../designer/src/document/node/props/props.ts","webpack://AliLowCodeEngine/../designer/src/utils/tree.ts","webpack://AliLowCodeEngine/../designer/src/document/node/node-children.ts","webpack://AliLowCodeEngine/../designer/src/locale/index.ts","webpack://AliLowCodeEngine/../designer/src/document/node/exclusive-group.ts","webpack://AliLowCodeEngine/../designer/src/utils/slot.ts","webpack://AliLowCodeEngine/../designer/src/types/index.ts","webpack://AliLowCodeEngine/../shell/src/symbols.ts","webpack://AliLowCodeEngine/../shell/src/model/component-meta.ts","webpack://AliLowCodeEngine/../shell/src/model/prop.ts","webpack://AliLowCodeEngine/../shell/src/model/props.ts","webpack://AliLowCodeEngine/../shell/src/model/selection.ts","webpack://AliLowCodeEngine/../shell/src/model/history.ts","webpack://AliLowCodeEngine/../shell/src/model/drop-location.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/area.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/top-area.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/left-area.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/left-fixed-pane.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/left-float-pane.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/toolbar.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/main-area.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/bottom-area.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/right-area.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/context.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/layouts/workbench.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/types.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/widget/widget-container.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/widget/utils.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/components/draggable-line/index.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/icons/fix.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/icons/float.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/components/widget-views/panel-operation-row.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/components/widget-views/index.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/widget/panel-dock.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/widget/panel.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/widget/widget.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/widget/dock.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/widget/stage.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/skeleton.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/components/settings/main.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/components/popup/index.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/components/field/inlinetip.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/locale/index.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/components/field/fields.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/components/field/index.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/components/settings/settings-pane.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/components/stage-box/stage-chain.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/icons/arrow.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/icons/exit.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/components/stage-box/stage.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/components/stage-box/stage-box.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/components/settings/settings-primary-pane.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/transducers/parse-func.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/transducers/parse-props.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/icons/slot.tsx","webpack://AliLowCodeEngine/../editor-skeleton/src/transducers/addon-combine.ts","webpack://AliLowCodeEngine/../editor-skeleton/src/register-defaults.ts","webpack://AliLowCodeEngine/../shell/src/api/common.tsx","webpack://AliLowCodeEngine/../shell/src/api/event.ts","webpack://AliLowCodeEngine/../shell/src/api/hotkey.ts","webpack://AliLowCodeEngine/../shell/src/api/logger.ts","webpack://AliLowCodeEngine/../shell/src/api/material.ts","webpack://AliLowCodeEngine/../shell/src/api/plugins.ts","webpack://AliLowCodeEngine/../shell/src/api/simulator-host.ts","webpack://AliLowCodeEngine/../shell/src/api/project.ts","webpack://AliLowCodeEngine/../shell/src/api/setters.ts","webpack://AliLowCodeEngine/../shell/src/api/skeleton.ts","webpack://AliLowCodeEngine/../shell/src/api/canvas.ts","webpack://AliLowCodeEngine/../shell/src/api/workspace.ts","webpack://AliLowCodeEngine/../shell/src/model/modal-nodes-manager.ts","webpack://AliLowCodeEngine/../shell/src/model/document-model.ts","webpack://AliLowCodeEngine/../shell/src/model/node-children.ts","webpack://AliLowCodeEngine/../shell/src/model/setting-prop-entry.ts","webpack://AliLowCodeEngine/../shell/src/model/setting-top-entry.ts","webpack://AliLowCodeEngine/../shell/src/model/node.ts","webpack://AliLowCodeEngine/../shell/src/model/detecting.ts","webpack://AliLowCodeEngine/../shell/src/model/drag-object.ts","webpack://AliLowCodeEngine/../shell/src/model/locate-event.ts","webpack://AliLowCodeEngine/../shell/src/model/dragon.ts","webpack://AliLowCodeEngine/../shell/src/model/resource.ts","webpack://AliLowCodeEngine/../shell/src/model/active-tracker.ts","webpack://AliLowCodeEngine/../shell/src/model/plugin-instance.ts","webpack://AliLowCodeEngine/../shell/src/model/window.ts","webpack://AliLowCodeEngine/../shell/src/model/clipboard.ts","webpack://AliLowCodeEngine/../designer/src/document/node/node.ts","webpack://AliLowCodeEngine/../designer/src/document/selection.ts","webpack://AliLowCodeEngine/../designer/src/document/history.ts","webpack://AliLowCodeEngine/../designer/src/document/node/modal-nodes-manager.ts","webpack://AliLowCodeEngine/../designer/src/document/document-model.ts","webpack://AliLowCodeEngine/../designer/src/icons/lock.tsx","webpack://AliLowCodeEngine/../designer/src/icons/hidden.tsx","webpack://AliLowCodeEngine/../designer/src/icons/remove.tsx","webpack://AliLowCodeEngine/../designer/src/icons/setting.tsx","webpack://AliLowCodeEngine/../designer/src/icons/component.tsx","webpack://AliLowCodeEngine/../designer/src/icons/clone.tsx","webpack://AliLowCodeEngine/../designer/src/icons/page.tsx","webpack://AliLowCodeEngine/../designer/src/icons/container.tsx","webpack://AliLowCodeEngine/../designer/src/icons/unlock.tsx","webpack://AliLowCodeEngine/../designer/src/component-meta.ts","webpack://AliLowCodeEngine/../designer/src/simulator.ts","webpack://AliLowCodeEngine/../designer/src/project/project.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/viewport.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/create-simulator.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/renderer.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/resource-consumer.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/utils/parse-metadata.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/utils/clickable.ts","webpack://AliLowCodeEngine/../designer/src/designer/clipboard.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/live-editing/live-editing.ts","webpack://AliLowCodeEngine/../designer/src/utils/misc.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/host.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/bem-tools/border-detecting.tsx","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/bem-tools/border-container.tsx","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/node-selector/index.tsx","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/bem-tools/border-selecting.tsx","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/bem-tools/drag-resize-engine.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/context.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/bem-tools/border-resizing.tsx","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/bem-tools/insertion.tsx","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/bem-tools/index.tsx","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/host-view.tsx","webpack://AliLowCodeEngine/../designer/src/project/project-view.tsx","webpack://AliLowCodeEngine/../designer/src/designer/scroller.ts","webpack://AliLowCodeEngine/../designer/src/designer/dragon.ts","webpack://AliLowCodeEngine/../designer/src/designer/active-tracker.ts","webpack://AliLowCodeEngine/../designer/src/designer/detecting.ts","webpack://AliLowCodeEngine/../designer/src/designer/location.ts","webpack://AliLowCodeEngine/../designer/src/designer/offset-observer.ts","webpack://AliLowCodeEngine/../designer/src/designer/setting/utils.ts","webpack://AliLowCodeEngine/../designer/src/designer/setting/setting-prop-entry.ts","webpack://AliLowCodeEngine/../designer/src/designer/setting/setting-field.ts","webpack://AliLowCodeEngine/../designer/src/designer/setting/setting-top-entry.ts","webpack://AliLowCodeEngine/../designer/src/utils/invariant.ts","webpack://AliLowCodeEngine/../designer/src/builtin-simulator/bem-tools/manager.ts","webpack://AliLowCodeEngine/../designer/src/transducers/index.ts","webpack://AliLowCodeEngine/../designer/src/component-actions.ts","webpack://AliLowCodeEngine/../designer/src/designer/designer.ts","webpack://AliLowCodeEngine/../designer/src/designer/drag-ghost/index.tsx","webpack://AliLowCodeEngine/../designer/src/designer/designer-view.tsx","webpack://AliLowCodeEngine/../designer/src/plugin/plugin-utils.ts","webpack://AliLowCodeEngine/../designer/src/plugin/plugin-context.ts","webpack://AliLowCodeEngine/../designer/src/plugin/plugin.ts","webpack://AliLowCodeEngine/../designer/src/plugin/sequencify.ts","webpack://AliLowCodeEngine/../designer/src/plugin/plugin-manager.ts","webpack://AliLowCodeEngine/../workspace/src/context/base-context.ts","webpack://AliLowCodeEngine/../workspace/src/inner-plugins/webview.tsx","webpack://AliLowCodeEngine/../workspace/src/context/view-context.ts","webpack://AliLowCodeEngine/../workspace/src/window.ts","webpack://AliLowCodeEngine/../workspace/src/resource.ts","webpack://AliLowCodeEngine/../workspace/src/resource-type.ts","webpack://AliLowCodeEngine/../workspace/src/workspace.ts","webpack://AliLowCodeEngine/../workspace/src/view/editor-view.tsx","webpack://AliLowCodeEngine/../workspace/src/layouts/top-area.tsx","webpack://AliLowCodeEngine/../workspace/src/view/resource-view.tsx","webpack://AliLowCodeEngine/../workspace/src/view/window-view.tsx","webpack://AliLowCodeEngine/../workspace/src/layouts/left-area.tsx","webpack://AliLowCodeEngine/../workspace/src/layouts/left-fixed-pane.tsx","webpack://AliLowCodeEngine/../workspace/src/layouts/left-float-pane.tsx","webpack://AliLowCodeEngine/../workspace/src/layouts/main-area.tsx","webpack://AliLowCodeEngine/../workspace/src/layouts/bottom-area.tsx","webpack://AliLowCodeEngine/../workspace/src/skeleton-context.ts","webpack://AliLowCodeEngine/../workspace/src/layouts/sub-top-area.tsx","webpack://AliLowCodeEngine/../workspace/src/layouts/workbench.tsx","webpack://AliLowCodeEngine/./src/modules/live-editing.ts","webpack://AliLowCodeEngine/./src/modules/classes.ts","webpack://AliLowCodeEngine/./src/modules/symbols.ts","webpack://AliLowCodeEngine/./src/inner-plugins/component-meta-parser.ts","webpack://AliLowCodeEngine/./src/inner-plugins/setter-registry.ts","webpack://AliLowCodeEngine/../plugin-designer/src/index.tsx","webpack://AliLowCodeEngine/./src/inner-plugins/default-panel-registry.tsx","webpack://AliLowCodeEngine/./src/modules/shell-model-factory.ts","webpack://AliLowCodeEngine/./src/inner-plugins/builtin-hotkey.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/lock.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/unlock.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/arrow-right.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/cond.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/eye-close.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/eye.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/filter.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/loop.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/radio-active.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/radio.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/setting.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/views/tree-title.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/views/tree-branches.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/views/tree-node.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/views/tree.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/views/filter-tree.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/views/filter.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/views/pane.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/icons/outline.tsx","webpack://AliLowCodeEngine/../plugin-outline-pane/src/helper/consts.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/controllers/tree-node.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/controllers/tree.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/controllers/tree-master.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/helper/indent-track.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/helper/dwell-timer.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/controllers/pane-controller.ts","webpack://AliLowCodeEngine/../plugin-outline-pane/src/index.tsx","webpack://AliLowCodeEngine/./src/engine-core.ts","webpack://AliLowCodeEngine/./src/index.ts"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","React","isCSSUrl","url","test","createDefer","promise","Promise","resolve","reject","evaluate","script","scriptEl","document","createElement","text","head","appendChild","removeChild","load","node","onload","onerror","e","type","src","async","evaluateExpression","expr","fn","Function","newFunction","args","code","console","warn","isAssetItem","obj","isAssetBundle","AssetType","Bundle","assetBundle","assets","level","assetItem","content","id","megreAssets","incrementalAssets","packages","components","megreAssetsComponentList","listName","map","item","matchFlag","title","children","concat","push","StylePoint","placeholder","lastContent","lastUrl","this","querySelector","createTextNode","meta","insertBefore","applyText","undefined","element","setAttribute","parentNode","nextSibling","applyUrl","href","rel","parseAssetList","scripts","styles","asset","parseAsset","Array","isArray","CSSUrl","JSUrl","lv","AssetLevel","App","CSSText","AssetLoader","stylePoints","Map","AssetLevels","forEach","styleQueue","Environment","Library","Theme","Runtime","scriptQueue","all","loadStyle","loadScript","isUrl","point","set","asyncLibraryMap","promiseList","libraryKeyList","pkgs","library","then","mods","length","index","exportMode","exportSourceLibrary","isObject","isI18NObject","isPlainObject","proto","getPrototypeOf","cloneDeep","data","excludePropertyNames","cloneEnumerableProperty","target","origin","compExtraPropertyNames","keys","filter","includes","hasSymbol","REACT_FORWARD_REF_TYPE","for","isReactClass","isReactComponent","Component","acceptsRef","$$typeof","isForwardRefType","wrapReactClass","view","ViewComponentClass","render","props","displayName","createContent","isValidElement","cloneElement","isESModule","URL_RE","createIcon","icon","default","Cursor","cursor","states","Set","setDragging","flag","addState","removeState","setXResizing","setYResizing","setCopy","isCopy","has","release","state","add","documentElement","classList","delete","remove","__proto__","prototypeHasOwnProperty","isElement","nodeType","Node","ELEMENT_NODE","isFormEvent","form","tagName","HTMLElement","getComputedStyle","getPropertyValue","isFunction","nativeSelectionEnabled","preventSelection","preventDefault","stopPropagation","setNativeSelection","enableFlag","setPrototypeOf","shallowEqual","objA","objB","keysA","keysB","addEventListener","SizePresets","xsmall","small","medium","large","xlarge","SVGIcon","fill","size","viewBox","style","preserveAspectRatio","width","height","color","guid","Date","now","uniqueId","prefix","toString","toLowerCase","accessLibrary","generateHtmlComp","forwardRef","ref","getSubComponent","paths","component","ex","findComponent","libraryMap","componentName","npm","exportName","libraryName","package","subName","split","destructuring","unshift","isMixinComponent","some","buildComponents","componentsMap","createComponent","getProjectUtils","librayMap","utilsMetadata","projectUtils","lib","instance","EventEmitter","defaultMaxListeners","AppHelper","config","assign","val","batchOn","events","lisenter","event","on","batchOnce","once","batchOff","off","getInstance","isVariable","isUseI18NSetter","propName","configure","options","setter","convertToI18NObject","v","locale","use","isString","_innerWaitForThing","path","timeGap","setTimeout","thing","catch","waitForThing","arrShallowEquals","arr1","arr2","every","isFromVC","getMetadata","advanced","executePendingFn","timeout","stageList","compatStage","stage","invariant","check","message","Error","deprecate","fail","alterative","isRegExp","exec","compile","isActionContentObject","isCustomView","isDOMText","isDynamicSetter","isI18nData","isJSBlock","isJSExpression","extType","isInnerJsFunction","isJSFunction","isJSSlot","isProCodeComponentType","desc","isLowCodeComponentType","isNodeSchema","isProjectSchema","componentsTree","isSetterConfig","isTitleConfig","isDragNodeDataObject","IPublicEnumDragObjectType","NodeData","isDragNodeObject","isDragAnyObject","isLocationChildrenDetail","IPublicTypeLocationDetailType","Children","isNode","isLocationData","detail","isSettingField","isJsObject","source","compiled","isActionRef","compatibleLegaoSchema","k","slotTitle","slotName","params","slotParams","variable","mock","newProps","getNodeSchemaById","schema","nodeId","found","child","getNodeSchemaFromPropsById","entries","applyActivities","pivotSchema","activities","reduce","accSchema","activity","ActivityType","MODIFIED","payload","ADDED","location","parent","splice","DELETED","getClosestNode","until","getParent","canClickNode","onClickHook","componentMeta","callbacks","canClick","levels","debug","log","info","error","bizNameColors","bodyColors","levelMarks","outputFuntion","bizNameColorConfig","shouldOutput","logLevel","targetLevel","bizName","targetBizName","isLevelFit","isBizNameFit","indexOf","output","apply","getLogArgs","getColor","bodyColor","argsArray","arg","processedArgs","parseLogConf","logConf","pair","defaultOptions","Logger","_location","targetOptions","getLogger","SHAKE_DISTANCE","isShaken","e1","e2","shaken","Math","pow","clientY","clientX","isPluginEventName","eventName","eventSegments","pseudoMap","RE_CAMEL","RE_HYPHEN","CSS_REG","PROPS_REG","groupingCss","css","stackLength","startIndex","group","char","substring","str","hyphenate","replace","w","camelize","toUpperCase","runtimeToCss","runtime","join","toNativeStyle","normalized","pseudo","normalizeStyle","toCss","extra","cssToRuntime","groups","cssItem","startsWith","res","trim","pse","prev","next","match","cssToStyle","TransactionManager","transactionManager","emitter","executeTransaction","IPublicEnumTransitionType","REPAINT","emit","runInAction","onStartTransaction","onEndTransaction","extendStatics","b","__extends","TypeError","String","__","constructor","__assign","arguments","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__esDecorate","ctor","descriptorIn","contextIn","initializers","extraInitializers","accept","f","kind","descriptor","_","done","context","access","addInitializer","result","init","__runInitializers","thisArg","useValue","__propKey","x","__setFunctionName","description","configurable","__metadata","metadataKey","metadataValue","metadata","__awaiter","_arguments","P","generator","adopt","fulfilled","step","rejected","__generator","body","label","sent","trys","ops","y","g","verb","iterator","op","pop","__createBinding","k2","writable","__exportStar","__values","__read","ar","__spread","__spreadArrays","il","a","j","jl","__spreadArray","to","from","pack","slice","__await","__asyncGenerator","asyncIterator","q","resume","settle","fulfill","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__setModuleDefault","__importStar","mod","__importDefault","__classPrivateFieldGet","receiver","__classPrivateFieldSet","__classPrivateFieldIn","RuntimeDataSourceStatus","Components","Change","InnerChange","Rerender","LocationDetailType","IPublicEnumEventNames","TransitionType","IPublicEnumTransformStage","TransformStage","DragObjectType","IPublicEnumPropValueChangedType","PROP_VALUE_CHANGED_TYPE","hasOwn","nativeCodeString","classNames","classes","argType","inner","niceErrors","annotationType","other","dataStructure","derivation","method","errors","die","_len","_key","mockGlobal","getGlobal","globalThis","global","self","getDescriptor","objectPrototype","EMPTY_ARRAY","freeze","EMPTY_OBJECT","hasProxy","Proxy","plainObjectString","assertProxies","warnAboutProxyRequirement","msg","getNextId","globalState","mobxGuid","func","invoked","noop","isStringish","protoConstructor","isGenerator","addHiddenProp","addHiddenFinalProp","createInstanceofPredicate","theClass","isES6Map","isES6Set","hasGetOwnPropertySymbols","getPlainObjectKeys","symbols","ownKeys","getOwnPropertyNames","stringifyKey","toPrimitive","hasProp","prop","getOwnPropertyDescriptors","_defineProperties","_toPropertyKey","_createClass","Constructor","protoProps","staticProps","_extends","_inheritsLoose","subClass","superClass","_setPrototypeOf","_assertThisInitialized","ReferenceError","_unsupportedIterableToArray","minLen","_arrayLikeToArray","arr","len","_createForOfIteratorHelperLoose","allowArrayLike","it","_toPrimitive","input","hint","prim","Number","storedAnnotationsSymbol","createDecoratorAnnotation","annotation","storeAnnotation","assertNotDecorated","isOverride","collectStoredAnnotations","$mobx","Atom","name_","isPendingUnobservation_","isBeingObserved_","observers_","diffValue_","lastAccessedBy_","lowestObserverState_","IDerivationState_","NOT_TRACKING_","onBOL","onBUOL","_proto","onBO","listener","onBUO","reportObserved","reportObserved$1","reportChanged","startBatch","propagateChanged","endBatch","isAtom","createAtom","onBecomeObservedHandler","onBecomeUnobservedHandler","atom","onBecomeObserved","onBecomeUnobserved","identityComparer","structuralComparer","deepEqual","shallowComparer","defaultComparer","is","comparer","identity","structural","shallow","deepEnhancer","isObservable","observable","array","isAction","isFlow","flow","autoAction","shallowEnhancer","isObservableObject","isObservableArray","isObservableMap","isObservableSet","deep","referenceEnhancer","newValue","refStructEnhancer","oldValue","OVERRIDE","override","annotationType_","make_","extend_","adm","proxyTrap","createActionAnnotation","options_","make_$1","extend_$1","_this$options_","bound","target_","actionDescriptor","createActionDescriptor","defineProperty_","assertActionDescriptor","_ref","_ref2","safeDescriptors","_annotation$options_","_annotation$options_$","_annotation$options_2","_annotation$options_$2","_annotation$options_3","_annotation$options_4","_adm$proxy_2","_adm$proxy_","proxy_","createAction","isPlainObject_","createFlowAnnotation","make_$2","extend_$2","flowDescriptor","createFlowDescriptor","_this$options_2","assertFlowDescriptor","isMobXFlow","createComputedAnnotation","make_$3","extend_$3","assertComputedDescriptor","defineComputedProperty_","createObservableAnnotation","make_$4","extend_$4","_this$options_$enhanc","assertObservableDescriptor","defineObservableProperty_","enhancer","AUTO","autoAnnotation","createAutoAnnotation","make_$5","extend_$5","_this$options_3","_this$options_4","flowAnnotation","actionAnnotation","computed","autoBind","observableAnnotation","_this$options_5","_this$options_6","OBSERVABLE","OBSERVABLE_REF","OBSERVABLE_SHALLOW","OBSERVABLE_STRUCT","defaultCreateObservableOptions","defaultDecorator","proxy","asCreateObservableOptions","observableRefAnnotation","observableShallowAnnotation","observableStructAnnotation","observableDecoratorAnnotation","getEnhancerFromOptions","getEnhancerFromAnnotation","getAnnotationFromOptions","_options$defaultDecor","createObservable","arg2","arg3","box","observableFactories","ObservableValue","equals","initialValues","useProxies","createLegacyArray","createObservableArray","ObservableMap","ObservableSet","extendObservable","asObservableObject","asDynamicObservableObject","struct","COMPUTED","COMPUTED_STRUCT","computedAnnotation","computedStructAnnotation","arg1","opts","ComputedValue","_getDescriptor$config","_getDescriptor","currentActionId","nextActionId","isFunctionNameConfigurable","tmpNameDescriptor","_Symbol$toPrimitive","actionName","executeAction","isMobxAction","canRunAsDerivation","scope","runInfo","_startAction","err","error_","_endAction","notifySpy_","startTime_","prevDerivation_","trackingDerivation","runAsAction","prevAllowStateChanges_","allowStateChanges","untrackedStart","allowStateChangesStart","prevAllowStateReads_","runAsAction_","allowStateReadsStart","actionId_","parentActionId_","suppressReactionErrors","allowStateChangesEnd","allowStateReadsEnd","untrackedEnd","CREATE","_Atom","notifySpy","_this","hasUnreportedChange_","interceptors_","changeListeners_","value_","dehancer","dehanceValue","prepareNewValue_","UNCHANGED","setNewValue_","checkIfStateModificationsAreAllowed","hasInterceptors","change","interceptChange","UPDATE","hasListeners","notifyListeners","intercept_","handler","registerInterceptor","observe_","fireImmediately","observableKind","debugObjectName","registerListener","toJSON","valueOf","isObservableValue","_Symbol$toPrimitive$1","dependenciesState_","observing_","newObserving_","runId_","UP_TO_DATE_","unboundDepsCount_","CaughtException","triggeredBy_","isComputing_","isRunningSetter_","setter_","isTracing_","TraceMode","NONE","scope_","equals_","requiresReaction_","keepAlive_","compareStructural","requiresReaction","keepAlive","onBecomeStale_","propagateMaybeChanged","inBatch","shouldCompute","prevTrackingContext","trackingContext","trackAndCompute","propagateChangeConfirmed","warnAboutUntrackedRead_","computeValue_","isCaughtException","cause","wasSuspended","changed","track","trackDerivedFunction","disableErrorBoundaries","suspend_","clearObserving","firstTime","prevValue","autorun","prevU","isComputedValue","STALE_","POSSIBLY_STALE_","prevAllowStateReads","prevUntracked","obs","changeDependenciesStateTo0","isComputingDerivation","hasObservers","checkIfStateReadsAreAllowed","runId","prevTracking","bindDependencies","warnAboutDerivationWithoutDependencies","prevObserving","observing","lowestNewObservingDerivationState","i0","dep","_dep","removeObserver","_dep2","addObserver","untracked","action","allowStateReads","persistentKeys","MobXGlobals","version","pendingUnobservations","pendingReactions","isRunningReactions","enforceActions","spyListeners","globalReactionErrorHandlers","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","verifyProxies","canMergeGlobalState","isolateCalled","__mobxInstanceCount","__mobxGlobals","isolateGlobalState","getGlobalState","resetGlobalState","defaultGlobals","getObservers","queueForUnobservation","runReactions","list","logTraceInfo","BREAK","lines","printDepTree","getDependencyTree","tree","depth","repeat","dependencies","Reaction","onInvalidate_","errorHandler_","requiresObservable_","isDisposed_","isScheduled_","isTrackPending_","isRunning_","schedule_","isScheduled","runReaction_","reportExceptionInDerivation_","notify","startTime","prevReaction","dispose","getDisposer_","trace","trace$1","enterBreakPoint","onReactionError","idx","MAX_REACTION_ITERATIONS","reactionScheduler","runReactionsHelper","allReactions","iterations","remainingReactions","isReaction","setReactionScheduler","baseScheduler","isSpyEnabled","spyReport","listeners","spyReportStart","END_EVENT","spyReportEnd","spy","ACTION","ACTION_BOUND","AUTOACTION","AUTOACTION_BOUND","DEFAULT_ACTION_NAME","actionBoundAnnotation","autoActionAnnotation","autoActionBoundAnnotation","createActionFactory","_opts$name","_opts","runSync","reaction","scheduler","delay","reactionRunner","onError","requiresObservable","createSchedulerFromOptions","run","expression","effect","_opts$name2","effectAction","wrapErrorHandler","nextValue","errorHandler","baseFn","ON_BECOME_OBSERVED","ON_BECOME_UNOBSERVED","interceptHook","hook","getAtom","cb","listenersKey","hookListeners","NEVER","ALWAYS","OBSERVED","ea","properties","annotations","descriptors","nodeToDependencyTree","unique","getObserverTree","nodeToObserverTree","observers","generatorId","FlowCancellationError","isFlowCancellationError","flowBoundAnnotation","ctx","gen","rejector","pendingPromise","stepId","onFulfilled","ret","onRejected","cancel","cancelPromise","_res","yieldedPromise","flowResult","interceptReads","propOrHandler","getAdministration","intercept","interceptProperty","interceptInterceptable","_isComputed","values_","isComputed","isComputedProp","_isObservable","isObservableProp","keys_","values","set_","parseInt","_values","delete_","has_","get_","apiDefineProperty","apiOwnKeys","ownKeys_","observe","propOrCb","cbOrFire","observeObservableProperty","observeObservable","cache","toJSHelper","__alreadySeen","_res2","_res3","toJS","getAtomFromArgs","LOG","transaction","when","predicate","whenPromise","_when","timeoutHandle","disposer","cond","clearTimeout","_opts$signal","abort","signal","aborted","_opts$signal2","_opts$signal3","removeEventListener","getAdm","objectProxyTraps","_getAdm$set_","deleteProperty","_getAdm$delete_","_getAdm$definePropert","preventExtensions","_target$$mobx","_target$$mobx$proxy_","interceptable","interceptors","listenable","makeObservable","_annotations","keysSymbol","makeAutoObservable","overrides","SPLICE","MAX_SPLICE_SIZE","arrayTraps","getArrayLength_","isNaN","arrayExtensions","setArrayLength_","ObservableArrayAdministration","owned_","legacyMode_","atom_","enhancer_","lastKnownLength_","newV","oldV","dehanceValue_","dehanceValues_","added","addedCount","removed","removedCount","newLength","currentLength","newItems","spliceWithArray_","updateArrayLength_","oldLength","delta","reserveArrayBuffer","deleteCount","max","min","lengthDelta","spliceItemsIntoValues_","notifyArraySplice_","_this$values_","oldItems","_i","notifyArrayChildUpdate_","owned","clear","spliceWithArray","_len2","items","_key2","_len3","_key3","reverse","sort","copy","addArrayExtension","funcName","funcFactory","simpleFunc","dehancedValues","mapLikeFunc","callback","_this2","reduceLikeFunc","_this3","accumulator","currentValue","isObservableArrayAdministration","_Symbol$iterator","_Symbol$toStringTag","ObservableMapMarker","ADD","DELETE","initialData","data_","hasMap_","keysAtom_","merge","entry","newEntry","hasKey","updateValue_","addValue_","_delete","_change","_this3$hasMap_$get","_this4","_this4$hasMap_$get","makeIterable","_keys$next","_keys$next2","_iterator","_step","_step$value","_this5","_this6","_iterator2","_step2","_this7","replacementMap","convertToMap","orderedData","keysReportChangedCalled","_iterator3","_step3","deleted","_iterator4","_step4","_step4$value","_value","keyExisted","_value2","iter1","iter2","next1","next2","_Symbol$iterator$1","_Symbol$toStringTag$1","ObservableSetMarker","callbackFn","_change2","nextIndex","observableValues","descriptorCache","REMOVE","ObservableObjectAdministration","defaultAnnotation_","appliedAnnotations_","pendingKeys_","getObservablePropValue_","setObservablePropValue_","assertAnnotable","_this$target_$storedA","outcome","recordAnnotationApplied","deleteOutcome","notifyPropertyAddition_","cachedDescriptor","getCachedObservablePropDescriptor","_this$pendingKeys_","_this$pendingKeys_$ge","_this$pendingKeys_2","_this$pendingKeys_2$g","_options$name","isObservableObjectAdministration","_adm$target_$storedAn","ENTRY_0","createArrayEntryDescriptor","OBSERVABLE_ARRAY_BUFFER_SIZE","StubArray","inherit","LegacyObservableArray","_StubArray","arrays","createArrayBufferItem","getDebugName","_observable","named","eq","aStack","bStack","className","unwrap","areArrays","aCtor","bCtor","getSelf","isAnnotation","__MOBX_DEVTOOLS_GLOBAL_HOOK__","injectMobx","extras","Next","R","ReflectApply","ReflectOwnKeys","ProcessEmitWarning","warning","NumberIsNaN","_events","_eventsCount","_maxListeners","checkListener","_getMaxListeners","that","_addListener","prepend","existing","newListener","warned","count","onceWrapper","fired","removeListener","wrapFn","_onceWrap","wrapped","_listeners","evlistener","unwrapListeners","arrayClone","listenerCount","spliceOne","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","wrapListener","RangeError","setMaxListeners","getMaxListeners","doError","er","addListener","prependListener","prependOnceListener","position","originalListener","removeAllListeners","rawListeners","eventNames","TipHandler","tipHandler","tip","showDelay","hideDelay","createModuleEventBus","setTarget","findTip","hideImmediately","onChange","loopupLimit","dataset","direction","dir","theme","lastElementChild","role","tipId","tipProps","tipsMap","previousElementSibling","postTip","PropTypes","getMetadataField","MetadataType","metaSymbol","classInfo","extends","implements","injects","postConstruct","preDestroy","aspects","field","superType","logger","moduleLogger","EventBus","eventEmitter","names","getMsgPrefix","moduleName","maxListeners","ErrorKind","TYPE","SKELETON_TYPE","isLiteralElement","el","literal","isArgumentElement","argument","isNumberElement","number","isDateElement","date","isTimeElement","time","isSelectElement","select","isPluralElement","plural","isPoundElement","pound","isTagElement","tag","isNumberSkeleton","isDateTimeSkeleton","dateTime","createLiteralElement","createNumberElement","SPACE_SEPARATOR_REGEX","WHITE_SPACE_REGEX","DATE_TIME_REGEX","parseDateTimeSkeleton","skeleton","era","year","month","day","weekday","hour12","hourCycle","hour","minute","second","timeZoneName","parseNumberSkeletonFromString","stringTokens","tokens","stringTokens_1","stringToken","stemAndOptions","stem","_a","options_1","option","icuUnitToEcma","unit","FRACTION_PRECISION_REGEX","SIGNIFICANT_PRECISION_REGEX","INTEGER_WIDTH_REGEX","CONCISE_INTEGER_WIDTH_REGEX","parseSignificantPrecision","roundingPriority","g1","g2","minimumSignificantDigits","maximumSignificantDigits","parseSign","signDisplay","currencySign","parseConciseScientificAndEngineeringStem","notation","minimumIntegerDigits","parseNotationOptions","opt","signOpts","parseNumberSkeleton","tokens_1","token","scale","currency","useGrouping","maximumFractionDigits","compactDisplay","currencyDisplay","unitDisplay","parseFloat","g3","g4","g5","minimumFractionDigits","trailingZeroDisplay","conciseScientificAndEngineeringOpts","timeData","getBestPattern","skeletonCopy","patternPos","patternChar","charAt","extraLength","hourLen","dayPeriodLen","dayPeriodChar","hourChar","getDefaultHourSymbolFromLocale","hourCycles","languageTag","language","regionTag","maximize","region","SPACE_SEPARATOR_START_REGEX","RegExp","SPACE_SEPARATOR_END_REGEX","createLocation","start","end","hasNativeStartsWith","hasNativeFromCodePoint","fromCodePoint","hasNativeFromEntries","fromEntries","hasNativeCodePointAt","codePointAt","hasTrimStart","trimStart","hasTrimEnd","trimEnd","hasNativeIsSafeInteger","isSafeInteger","isFinite","floor","abs","REGEX_SUPPORTS_U_AND_Y","re","RE","search","codePoints","elements","fromCharCode","entries_1","first","charCodeAt","matchIdentifierAtIndex","IDENTIFIER_PREFIX_RE_1","lastIndex","_isWhiteSpace","_isPatternSyntax","Parser","offset","line","column","ignoreTag","requiresOtherClause","shouldParseSkeletons","parse","parseMessage","nestingLevel","parentArgType","expectingCloseTag","isEOF","parseArgument","peek","UNMATCHED_CLOSING_TAG","clonePosition","_isAlpha","parseTag","parseLiteral","bump","startPosition","parseTagName","bumpSpace","bumpIf","childrenResult","endTagStartPosition","INVALID_TAG","closingTagNameStartPosition","closingTagName","UNCLOSED_TAG","startOffset","_isPotentialElementNameChar","parseQuoteResult","tryParseQuote","parseUnquotedResult","tryParseUnquoted","parseLeftAngleResult","tryParseLeftAngleBracket","_isAlphaOrSlash","ch","openingBracePosition","EXPECT_ARGUMENT_CLOSING_BRACE","EMPTY_ARGUMENT","parseIdentifierIfPossible","MALFORMED_ARGUMENT","parseArgumentOptions","startingPosition","endOffset","endPosition","bumpTo","typeStartPosition","typeEndPosition","EXPECT_ARGUMENT_TYPE","styleAndLocation","argCloseResult","styleStartPosition","styleLocation","parseSimpleArgStyleIfPossible","EXPECT_ARGUMENT_STYLE","tryParseArgumentClose","location_1","EXPECT_DATE_TIME_SKELETON","dateTimePattern","pattern","parsedOptions","typeEndPosition_1","EXPECT_SELECT_ARGUMENT_OPTIONS","identifierAndLocation","pluralOffset","EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE","tryParseDecimalInteger","INVALID_PLURAL_ARGUMENT_OFFSET_VALUE","optionsResult","tryParsePluralOrSelectOptions","location_2","pluralType","INVALID_ARGUMENT_TYPE","nestedBraces","apostrophePosition","bumpUntil","UNCLOSED_QUOTE_IN_ARGUMENT_STYLE","INVALID_NUMBER_SKELETON","expectCloseTag","parsedFirstIdentifier","hasOtherClause","parsedSelectors","selector","selectorLocation","EXPECT_PLURAL_ARGUMENT_SELECTOR","INVALID_PLURAL_ARGUMENT_SELECTOR","DUPLICATE_SELECT_ARGUMENT_SELECTOR","DUPLICATE_PLURAL_ARGUMENT_SELECTOR","EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT","EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT","fragmentResult","EXPECT_SELECT_ARGUMENT_SELECTOR","MISSING_OTHER_CLAUSE","expectNumberError","invalidNumberError","sign","hasDigits","decimal","currentOffset","targetOffset","nextCode","codepoint","pruneLocation","els","SyntaxError","originalMessage","captureLocation","memoize","cacheDefault","serializer","serializerDefault","strategy","strategyDefault","isPrimitive","monadic","cacheKey","computedValue","variadic","assemble","serialize","strategyVariadic","strategyMonadic","JSON","stringify","ObjectWithoutPrototypeCache","strategies","ErrorCode","_super","FormatError","InvalidValueError","variableId","INVALID_VALUE","InvalidValueTypeError","MissingValueError","MISSING_VALUE","PART_TYPE","mergeLiteral","parts","part","lastPart","isFormatXMLElementFn","formatToParts","locales","formatters","formats","currentPluralValue","els_1","getNumberFormat","format","varName","getDateTimeFormat","value_1","formatFn","chunks","Intl","PluralRules","MISSING_INTL_API","rule","getPluralRules","mergeConfig","c1","c2","mergeConfigs","defaultConfig","configs","createFastMemoizeCache","store","createDefaultFormatters","pluralRules","NumberFormat","DateTimeFormat","IntlMessageFormat","overrideFormats","defaultLocale","formatterCache","ast","resolvedOptions","resolvedLocale","getAst","resolveLocale","__parse","memoizedDefaultLocale","supportedLocales","supportedLocalesOf","Locale","integer","percent","short","long","full","languageMap","en","zh","zt","es","pt","fr","de","ru","ja","ko","tr","th","vi","nl","he","pl","hi","uk","ms","tl","LowcodeConfigKey","GlobalLocale","_locale","hasLocalStorage","localStorage","getItem","localeFromConfig","getConfig","navigator","lang","browserLanguage","localeFromSystem","setLocale","setItem","getLocale","onChangeLocale","win","g_config","pageConfig","obx","globalLocale","generateTryLocales","tries","injectVars","formater","intl","lan","shallowIntl","maps","intlNode","IntlElement","createIntl","toLocaleLowerCase","observer","ReactDOM","fallback","didTimeout","timeRemaining","isSupported","requestIdleCallback","cancelIdleCallback","publicPath","currentScript","getPublicPath","Debug","rst","encodeURIComponent","buildUrl","dataAPI","paramStr","headers","otherProps","fetchHeaders","Accept","request","post","fetch","credentials","response","status","json","success","__success","FocusTracker","actives","modals","mount","checkDown","checkModalDown","internalCheckInRange","internalSuspenseItem","internalTriggerBlur","addModal","checkOpen","checkModalOpen","execSave","internalTriggerSave","execEsc","internalTriggerEsc","Focusable","internalActiveItem","isModal","internalTriggerActive","tracker","modal","active","suspense","purge","range","contains","onBlur","onSave","onEsc","onActive","focusTracker","globalEventOn","setGlobalEventFlag","switchGlobalEventOn","switchGlobalEventOff","isGlobalEventOn","runWithGlobalEventOff","wrapWithEventSwitch","make_create","make_trim","Global","make_assign","shimAssign","props1","props2","etc","each","assignProps1","assignProps2","assignArgsList","F","pluck","isList","SemVer","compare","loose","defaultNoopBatch","observerBatching","isObserverBatched","deprecatedMessages","useDeprecated","printDebugValue","FinalizationRegistryLocal","FinalizationRegistry","createTrackingData","trackingData","mounted","changedBeforeMount","cleanAt","CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS","CLEANUP_TIMER_LOOP_MILLIS","createReactionCleanupTrackingUsingFinalizationRegister","cleanupTokenToReactionTrackingMap","globalCleanupTokensCounter","registry","cleanupFunction","trackedReaction","addReactionToTrack","reactionTrackingRef","objectRetainedByReact","register","current","finalizationRegistryCleanupToken","recordReactionAsCommitted","reactionRef","unregister","forceCleanupTimerToRunNowForTests","resetCleanupScheduleForTests","createTimerBasedReactionCleanupTracking","uncommittedReactionRefs","reactionCleanupHandle","cleanUncommittedReactions","e_1","uncommittedReactionRefs_1","uncommittedReactionRefs_1_1","tracking","e_1_1","return","ensureCleanupTimerRunning","scheduleCleanupOfReactionIfLeaked","globalIsUsingStaticRendering","enableStaticRendering","enable","isUsingStaticRendering","observerComponentNameFor","baseComponentName","ObjectToBeRetainedByReact","objectToBeRetainedByReactFactory","useObserver","useState","_b","setState","forceUpdate","useRef","newReaction","trackingData_1","rendering","exception","useDebugValue","useEffect","Infinity","warnObserverOptionsDeprecated","ReactForwardRefSymbol","ReactMemoSymbol","baseComponent","useForwardRef","observerComponent","contextTypes","copyStaticProperties","hoistBlackList","base","ObserverComponent","ObserverPropsCheck","propFullName","extraKey","hasExtraProp","useLocalObservable","initializer","useAsObservableSource","useLocalStore","useStaticRendering","symbolId","createSymbol","symbol","createdSymbols","newSymbol","childContextTypes","contextType","defaultProps","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","setHiddenProp","mobxMixins","mobxPatchedDefinition","getMixins","methodName","methodMixins","locks","methods","wrapper","realMethod","retVal","mx","wrapFunction","patch","mixinMethod","oldDefinition","originalMethod","newDefinition","createDefinition","wrappedFunc","mobxAdminProperty","mobxObserverProperty","mobxIsUnmounted","skipRenderKey","isForcingUpdateKey","makeClassComponentObserver","componentClass","getDisplayName","componentWillReact","shouldComponentUpdate","observerSCU","makeObservableProp","originalRender","_displayName","createReactiveRender","_displayName2","comp","initialName","boundOriginalRender","isRenderingPending","createReaction","hasError","reactiveRender","_reactiveRender$mobxA","nextProps","nextState","valueHolderKey","atomHolderKey","prevReadState","isPrototypeOf","_objectWithoutPropertiesLoose","excluded","sourceKeys","_excluded","MobXProviderContext","createContext","Provider","stores","parentValue","useContext","mutableProviderRef","createStoreInjector","grabStoresFn","injectNames","makeReactive","Injector","getInjectName","grabStoresByName","storeNames","baseStores","storeName","inject","protoStoreKey","instStoreKey","runDisposersOnWillUnmount","propKeyOrFunction","disposeOnUnmount","propertyKeyOrFunction","c3","PureComponent","isDecorator","componentWasAlreadyModified","createChainableTypeChecker","validator","checkType","isRequired","rest","actual","chainedCheckType","isSymbol","propType","propValue","getPropType","getPreciseType","createObservableTypeCheckerCreator","allowNativeType","mobxType","mobxChecker","preciseType","nativeTypeExpectationMessage","createObservableArrayOfTypeChecker","typeChecker","observableArray","observableArrayOf","observableMap","observableObject","arrayOrObservableArray","arrayOrObservableArrayOf","objectOrObservableObject","logger_1","symbolString","isExtendOf","getGlobalType","isClass","class_1","getSuperClassInfo_1","_uid","_globalTypes","keyName","nameSymbol","classType","superClassType","getSuperClassInfo","find","cls","classLoader","ClassLoader","DuplicateRegistrationError","metadata_1","utils_1","classInfoMap","implementCacheMap","hasClass","registerClass","injectable","clsInfo","superClasses","class","ext","impls","getImplCacheByType","impl","unregisterClass","findIndex","getClassInfo","filterClasses","typeWithInfo","getImplementClasses","clearAll","clone","newInst","initWith","cloneImplCacheMap","Tip","componentWillUnmount","data-role","data-tip-id","process","env","NODE_DEBUG","STORAGE_KEY_PREFIX","Preference","getStorageKey","moduleKey","storageKey","STRICT_PLUGIN_MODE_DEFAULT","VALID_ENGINE_OPTIONS","enableCondition","designMode","enum","device","deviceClassName","renderEnv","deviceMapper","enableStrictPluginMode","enableReactiveContainer","disableAutoRender","disableDetecting","customizeIgnoreSelectors","disableDefaultSettingPanel","disableDefaultSetters","enableCanvasLock","enableLockedNodeSetting","stayOnTheSameSettingTab","hideSettingsTabsWhenOnlyOneItem","loadingComponent","supportVariableGlobally","visionSettings","simulatorUrl","appHelper","requestHandlersMap","thisRequiredInJSE","enableStrictNotFoundMode","focusNodeSelector","getStrictModeValue","engineOptions","defaultValue","EngineConfig","engineConfig","waits","preference","lodashGet","notifyGot","setConfig","setEngineOptions","strictMode","isValidKey","onceGot","setWait","onGot","delWait","getPreference","engine","storages","plugins","createStore","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","Item","nextTick","browser","argv","versions","binding","cwd","chdir","umask","parseOptions","MAX_SAFE_COMPONENT_LENGTH","createToken","isGlobal","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCE","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","MAX_LENGTH","MAX_SAFE_INTEGER","compareIdentifiers","includePrerelease","LOOSE","FULL","major","minor","prerelease","num","build","compareMain","comparePre","identifier","inc","settersMap","registerSetter","typeOrMaps","initialValue","initial","getInitialFromSetter","getValue","Initial","Setters","viewName","getSetter","getSettersMap","createSetterContent","globalContext","IocContext","DefaultInstance","getGlobalType_1","tmpType","guard","OutLevel","outLevel","Warn","setOutLevel","optionalParams","Info","Log","aspect","genAspectWrapper","normalFn","generatorFn","normalFuncPrototype","generatorFuncPrototype","isGeneratorFunction","ioc","inst","functionName","__name","oriFn","newFn","error_1","before","skipRunning","after","MAP","8","9","13","16","17","18","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","224","KEYCODE_MAP","106","107","109","110","111","186","187","188","189","190","191","192","219","220","221","222","SHIFT_MAP","$","SPECIAL_ALIASES","command","escape","plus","platform","REVERSE_MAP","characterFromEvent","keyCode","which","character","shiftKey","isPressEvent","modifiersMatch","modifiers1","modifiers2","eventModifiers","modifiers","altKey","ctrlKey","metaKey","isModifier","getReverseMap","pickBestAction","keysFromString","combination","getKeyInfo","fireCallback","combo","sequence","workspace","editor","isActive","designer","currentSelection","getNodes","selected","eventBus","Hotkey","callBacks","directMap","sequenceLevels","resetTimer","ignoreNextKeyup","ignoreNextKeypress","nextExpectedAction","isActivate","activate","handleKeyEvent","combos","bindMultiple","unbind","combinations","isEqual","resetSequences","doNotReset","activeSequences","getMatches","sequenceName","matches","seq","deleteCombo","deleteSequence","handleKey","maxLevel","processedSequenceCallback","ignoreThisKeypress","resetSequenceTimer","bindSequence","increaseSequence","nextAction","callbackAndReset","isFinal","wrappedCallback","bindSingle","Range","Comparator","parseRange","isNullSet","isAny","comps","memoOpts","memoKey","cached","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","rangeList","TILDETRIM","CARETTRIM","parseComparator","replaceGTE0","COMPARATORLOOSE","rangeMap","comparators","thisComparators","isSatisfiable","rangeComparators","thisComparator","rangeComparator","intersects","testSet","LRU","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","replaceTilde","TILDELOOSE","TILDE","M","pr","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","tb","semver","ANY","allowed","SEMVER_SPEC_VERSION","resolveEdge","popup","arrow","bounds","sx","sy","top","right","bottom","left","resolveDirection","edge","prefers","forceDirection","extendWidth","extraOffset","extendHeight","SY","SX","mw","mh","mat","enough","orders","prefer","resolvePrefer","targetRect","force","forceOffset","resolvePosition","arrowTop","arrowLeft","minLeft","maxLeft","centerLeft","minTop","maxTop","centerTop","percentPresets","center","isPercent","resolveRelativeValue","total","resolveRelativePosition","align","xAlign","yAlign","tmp","TipItem","timer","shell","originClassName","componentDidMount","updateTip","componentDidUpdate","clearTimer","cssText","getBoundingClientRect","shellRect","clientWidth","clientHeight","arrowRect","transform","TipContainer","over","down","UNSAFE_componentWillMount","splitLabelByKeywords","keywords","fragments","Title","renderLabel","intlLabel","labelToRender","handleClick","onClick","docUrl","open","assetsTransform","packageMaps","acc","cur","componentDesc","devMode","reference","referenceId","keyBlacklist","Editor","workspaceMode","hooks","initHooks","registerHooks","unregisterHooks","keyOrType","setAssets","componentDescriptions","remoteComponentDescriptions","componentList","setAssetsComponent","setArrayAssets","preExportName","preSubName","extraNpmInfo","innerAssets","lifeCycles","destroy","commonEvent","useColors","__nwjs","userAgent","WebkitAppearance","firebug","table","$1","formatArgs","namespace","humanize","diff","lastC","save","namespaces","storage","removeItem","DEBUG","localstorage","colors","satisfies","setup","selectColor","hash","createDebug","prevTime","enableOverride","namespacesCache","enabledCache","enabled","curr","coerce","formatter","logFn","extend","delimiter","newDebug","skips","disable","toNamespace","regexp","stack","h","fmtShort","msAbs","round","fmtLong","isPlural","util","storeAPI","optionalDefaultValue","read","_namespacePrefix","_deserialize","write","_serialize","namespacedKey","_namespaceRegexp","hasNamespace","addPlugin","plugin","_addPlugin","_warn","_console","namespacePrefix","namespaceRegexp","legalNamespaces","_privateStoreProps","_testStorage","testStr","ok","_assignPluginFnProp","pluginFnProp","oldFn","pluginFn","super_fn","newFnArgs","strVal","defaultVal","_addStorage","seenPlugin","pluginProperties","addStorage","globalStorage","storageName","doc","_withStorageEl","_makeIEStorageElFunction","unfixedKey","fixedKey","fixKey","storageEl","getAttribute","attributes","XMLDocument","attr","removeAttribute","forbiddenCharsRegex","addBehavior","scriptTag","storageOwner","storageContainer","ActiveXObject","close","frames","storeFunction","_has","regexpStr","unescape","cookie","cookies","kvp","sessionStorage","memoryStorage","json2Plugin","rx_one","rx_two","rx_three","rx_four","rx_escapable","rx_dangerous","gap","indent","rep","this_value","quote","string","holder","mind","partial","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Boolean","\"","replacer","space","reviver","walk","eval","AlreadyRegistryError","NoRegistryError","NotfoundTypeError","MultiImplementError","DefaultRegisterOption","Config","ClassLoader_1","guard_1","aspect_1","autoRegisterSelf","constructorInject","useClassLoader","singleton","autoNew","_classLoader","defaultInstance","preDestroyInstance","ele","canAutoRegister","returnValue","forceNew","notFoundHandler","sourceType","instances","conflictHandler","one","sourceCls","parentContext","getImports","newData","registerIfNotExist","newStore","canBeKey","dataType","autoRunPostConstruct","iocSelf","typeCls","optional","allowOptional","always_1","always","hasErr","runPostConstruct","runPreDestroy","createChildContext","inited","dataIsFunction","dataIsClass","needFactory","ClsType_1","paramTypes","createInstanceHook","getGlobalTypeByDecorator","getClsTypeByDecorator","exporter","makeExporter","previous","supportsSymbol","toPrimitiveSymbol","iteratorSymbol","supportsCreate","supportsProto","downLevel","HashMap","MakeDictionary","functionPrototype","usePolyfill","_Map","CreateMapPolyfill","_Set","CreateSetPolyfill","_WeakMap","Metadata","WeakMap","CreateWeakMapPolyfill","propertyKey","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","DecorateProperty","ToPropertyKey","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","targetMetadata","decorated","O","Create","MetadataKey","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","parentKeys","ownKeys_1","parentKeys_1","keysObj","GetIterator","IteratorStep","IteratorValue","IteratorClose","Type","IsSymbol","ToPrimitive","PreferredType","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","toString_2","ToString","V","iterResult","prototypeProto","cacheSentinel","arraySentinel","MapIterator","_index","_keys","_selector","throw","_cacheKey","_cacheIndex","_find","getKey","getEntry","insert","_map","UUID_SIZE","rootKey","CreateUniqueKey","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","random","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","byte","getRefMap","clsType","initMaps","scan","refs","deps","inj","globalType","_c","lazy","_d","_e","_f","imports","Yallist","MAX","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","UPDATE_AGE_ON_GET","naiveLength","LRUCache","lc","stale","maxAge","noDisposeOnSet","updateAgeOnGet","reset","mL","allowStale","mA","lC","hit","thisp","walker","tail","forEachStep","toArray","isStale","del","Entry","expiresAt","doUse","unshiftNode","removeNode","inserted","pushNode","forEachReverse","getReverse","mapReverse","reduceReverse","toArrayReverse","sliceReverse","nodes","operator","COMPARATOR","cmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","neq","gt","gte","lt","lte","numeric","anum","bnum","rcompareIdentifiers","AliLowCodeEngineExt","propertyNameRequiresQuotes","propertyName","worksWithoutQuotes","quoteString","doubleQuote","valueToSource","circularReferenceToken","includeFunctions","includeUndefinedProperties","indentLevel","indentString","lineEnding","visitedObjects","toISOString","itemsStayOnTheSameLine","previousIndex","propertyValue","propertyValueString","quotedPropertyName","trimmedPropertyValueString","keyFor","getSource","__source","mobxSet","mobx","UNSET","Prop","spread","isProp","owner","_type","_code","_slotNode","_items","_maps","_prevMaps","purged","setValue","setupItems","export","Serilize","Save","getPropValue","setPropValue","clearPropValue","unset","Render","isUnset","getAsString","setAsSlot","propsInfo","GlobalEvent","emitPropChange","slotSchema","import","createNode","addSlot","internalSetSlotFor","isVirtual","createIfNone","nest","isValidArrayIndex","deleteKey","orig","slotFor","isMap","getProps","getNode","limit","IPublicTypeCompositeValue","IPublicTypeJSSlot","EXTRA_KEY_PREFIX","getConvertedExtraKey","getOriginalExtraKey","Props","originItems","query","allProps","transformedProps","transformToStatic","transducers","xprops","transducer","toStatic","getProp","toData","foreachReverse","IPublicTypePropsMap","NodeChildren","checkId","internalInitParent","internalSetParent","isLeafNode","originChildren","isEmpty","isEmptyNode","notEmpty","notEmptyNode","useMutator","unlinkChild","internalDelete","internalPurgeStart","isParentalNode","subNode","iterable","slots","slotNode","unlinkNode","selection","destroyNode","reportModified","propagated","isSubDeleting","isPurging","removeIndex","at","internalInsert","conditionGroup","prevSibling","setConditionGroup","mergeChildren","remover","adder","sorter","willRemove","onInsert","isRootNode","onSubtreeModified","internalToShellNode","enUS","zhCN","ExclusiveGroup","isExclusiveGroup","visibleIndex","visibleNode","zLevel","firstNode","setVisible","isVisible","includeSlot","slot","getExtraProp","removeSlot","utils","EDITOR_EVENT","projectSymbol","designerSymbol","skeletonSymbol","documentSymbol","editorSymbol","nodeSymbol","modalNodesManagerSymbol","nodeChildrenSymbol","propSymbol","settingPropEntrySymbol","settingTopEntrySymbol","propsSymbol","detectingSymbol","selectionSymbol","historySymbol","canvasSymbol","dragonSymbol","componentMetaSymbol","dropLocationSymbol","simulatorHostSymbol","dragObjectSymbol","locateEventSymbol","designerCabinSymbol","hotkeySymbol","pluginsSymbol","workspaceSymbol","windowSymbol","pluginInstanceSymbol","resourceTypeSymbol","resourceSymbol","clipboardSymbol","ComponentMeta","isComponentMeta","isContainer","isMinimalRenderUnit","availableActions","setNpm","checkNestingUp","my","curNode","checkNestingDown","refreshMetadata","ShellNode","exportSchema","ShellProp","getExtraPropValue","setExtraPropValue","Selection","selectAll","ids","innerNodes","shellNode","getTopNodes","includeRoot","onSelectionChange","History","getHistory","go","back","forward","savePoint","isSavePoint","getState","onChangeState","onChangeCursor","DropLocation","dropLocation","Area","handle","exclusive","defaultSetCurrent","_visible","container","lastCurrent","createContainer","visible","getAt","unactive","hide","show","removeAction","TopArea","area","itemClassName","Contents","index1","index2","LeftArea","LeftFixedPane","touchOffsetObserver","panel","LeftFloatPane","focusing","triggerClose","panelElem","originalEvent","closest","contentWindow","docks","getAssocDocks","dock","getDOMNode","onEffect","fixedContainer","leftFixedArea","currentFixed","Toolbar","MainArea","BottomArea","RightArea","SkeletonContext","Workbench","buildFromConfig","topAreaItemClassName","topArea","leftArea","leftFloatArea","toolbar","mainArea","bottomArea","rightArea","isWidgetConfig","isDividerConfig","isDockConfig","isDialogDockConfig","isPanelConfig","isPanelDockConfig","isActiveable","setActive","WidgetContainer","checkVisible","_current","nameOrItem","unactiveAll","isPanel","setParent","shouldHiddenWhenInit","hiddenWhenInit","composeTitle","tipAsTitle","noIcon","getIcon","DraggableLine","startDrag","canDrag","offEvent","offDragEvent","initEvent","onSelectStart","onStartMove","onDragStart","initDragEvent","getClientPosition","onEndMove","onDragEnd","onDrag","maxIncrement","maxDecrement","selectStart","parentElement","onMouseDown","IconFix","rect","IconFloat","PanelOperationRow","setDisplay","toggleFloatStatus","isRightArea","canSetFixed","hideTitleBar","areaName","DockView","HelpTip","PanelDockView","lastActived","checkActived","actived","postEvent","SkeletonEvents","PANEL_DOCK_ACTIVE","PANEL_DOCK_UNACTIVE","togglePanel","DialogDockView","DraggableLineView","defaultWidth","getDefaultWidth","configWidth","containerRef","offsetWidth","onDragChange","enableDrag","TitledPanelView","lastVisible","currentVisible","PANEL_SHOW","PANEL_HIDE","panelName","hidden","data-keep-visible-while-dragging","keepVisibleWhileDragging","PanelView","hideOperationRow","hideDragLine","TabsPanelView","titles","contents","currentTarget","elt","firstElementChild","nextElementSibling","PanelTitle","data-name","help","WidgetView","lastDisabled","checkDisabled","widget","WIDGET_SHOW","currentDisabled","disabled","WIDGET_DISABLE","WIDGET_ENABLE","PanelDock","isWidget","isPanelDock","_body","_shell","_panel","_disabled","contentProps","panelProps","_panelProps","onInit","findDOMNode","getPanel","toggle","setDisabled","getName","getContent","hidePanel","showPanel","onActiveChange","Panel","_actived","plain","createPanel","condition","getEvent","pane","getPane","isChildOfFloatArea","isChildOfFixedArea","widgets","getSupportedPositions","getCurrentPosition","setPosition","Widget","getId","Dock","Stage","isRoot","refer","setPrevious","getPrevious","hasBack","setRefer","setReferRight","setReferLeft","getRefer","Skeleton","panels","containers","subTopArea","stages","createWidget","setupPlugins","setupEvents","panelNameKey","isInFloatAreaPreferenceExists","isInFloatAreaFromPreference","isCurrentInFloatArea","isFloat","pluginKey","pluginProps","dialogProps","balloonProps","linkProps","restProps","parseConfig","Divider","getWidget","parsedConfig","getStage","createStage","parsed","restConfig","extraConfig","generateSessionId","SettingsMain","_sessionId","_settings","disposeListener","setupSelection","sessionId","settingEntry","createSettingEntry","SettingTopEntry","PopupContext","PopupPipe","currentId","sendContent","sendTitle","send","actionKey","onPopupChange","PopupService","popupPipe","safeId","popupContainer","PopupContent","popupContainerId","offsetX","pos","onClose","avoidLaterHidden","hasMask","onVisibleChange","trigger","triggerType","canCloseByOutSideClick","animation","safeNode","closeable","InlineTip","display","data-position","data-theme","Field","collapsed","defaultDisplay","toggleExpand","onExpandChange","handleClear","clickHandler","deployBlockTesting","MutationObserver","childList","subtree","attributeFilter","disconnect","onClear","getTipContent","tipContent","valueState","isAccordion","hostName","createValueState","PopupField","pipe","titleElement","EntryField","stageName","classNameList","data-stage-target","PlainField","createField","isStandardComponent","isInitialValueNotEmpty","SettingFieldView","setters","extraProps","createSettingFieldView","internalToShellPropEntry","setterProps","setterType","multiValue","supportVariable","initDefaultValue","setterInfo","fromOnChange","_initialValue","_onChange","expanded","expandState","setExpanded","clearValue","forceInline","onInitial","removeProp","SettingGroupView","isSingle","isGroup","SettingsPane","currentStage","usePopup","getTarget","nodeName","stageTarget","popStage","StageChain","stagePush","stageBack","stageBackToRoot","rootStage","getCurrentStage","onStageChange","IconArrow","IconExit","StageDefaultProps","additionClassName","doSkate","elem","newTitle","stageBacker","StageBoxDefaultProps","StageBox","stageChain","willDetach","stateName","click","contentCurrent","contentRefer","SettingsPrimaryPane","shouldIgnoreRoot","main","engineEditor","_activeKey","setShouldIgnoreRoot","renderBreadcrumb","settings","isMultiple","focusNode","_node","onMouseOver","hoverNode","onMouseOut","selectNode","isLocked","isSameComponent","Consumer","matched","tabs","activeKey","tabKey","navClassName","excessMode","contentClassName","hover","leadingFnRe","leadingFnNameRe","transformStringToFunction","fnBody","parseJSFunc","enableAllowedKeys","propConfigToFieldConfig","propConfig","propTypeToSetter","typeName","dataSource","extraSetter","itemSetter","EVENT_RE","extendsProps","isExtends","supports","supportedEvents","IconSlot","combined","multiline","eventsDefinition","supportedLifecycles","lifecycles","propsGroup","basicInfo","stylesGroup","advancedGroup","defaultCollapsed","definition","eventData","eventDataList","eventList","relatedEventName","loop","registerDefaults","material","registerMetadataTransducer","parseProps","addonCombine","pluginName","DesignerCabin","innerIsDragNodeObject","innerIsDragAnyObject","innerIsShaken","innerContains","InnerLocationDetailType","innerIsLocationChildrenDetail","ScrollTarget","InnerScrollTarget","innerIsSettingField","InnerTransitionStage","SettingField","InnerSettingField","LiveEditing","InnerLiveEditing","InnerDragObjectType","innerIsDragNodeDataObject","innerIsNode","ShellDragon","dragon","SkeletonCabin","innerSkeleton","innerCreateSettingFieldView","InnerPopupContext","InnerPopupPipe","Utils","innerIsNodeSchema","innerIsFormEvent","innerCompatibleLegaoSchema","innerGetNodeSchemaById","innerGetConvertedExtraKey","innerGetOriginalExtraKey","innerCreateIntl","EditorCabin","InnerTitle","InnerTip","innerShallowIntl","innerIntl","innerGlobalLocale","innerObx","innerObservable","innerMakeObservable","innerUntracked","innerComputed","innerObserver","Common","__designerCabin","__skeletonCabin","__editorCabin","__utils","eventBusSymbol","Event","__internalEmit__","innerHotkeySymbol","hotkey","innerHotkey","innerLoggerSymbol","innerEditorSymbol","Material","componentActions","getAssets","loadIncrementalAssets","getRegisteredMetadataTransducers","getComponentMeta","innerMeta","ShellComponentMeta","createComponentMeta","getComponentMetasMap","originalMap","addBuiltinComponentAction","removeBuiltinComponentAction","modifyBuiltinComponentAction","onChangeAssets","innerPluginsSymbol","Plugins","innerPlugins","pluginModel","registerOptions","getPluginPreference","ShellPluginInstance","getAll","toProxy","_target","pluginsMap","SimulatorHost","simulator","contentDocument","renderer","scrollToNode","rerender","host","innerProjectSymbol","Project","project","innerProject","getCurrentDocument","documents","ShellDocumentModel","simulatorHost","openDocument","documentModel","createDocument","removeDocument","getDocumentByFileName","fileName","innerDocumentModel","getDocumentById","getDocument","getSchema","importSchema","currentDocument","addPropsTransducer","addPropsReducer","onRemoveDocument","onChangeDocument","offFn","onCurrentDocumentChange","originalDoc","onSimulatorHostReady","onSimulatorReady","onSimulatorRendererReady","onRendererReady","setI18n","innerSettersSymbol","settersSymbol","innerSetters","innerSkeletonSymbol","configWithName","normalizeArea","showWidget","enableWidget","hideWidget","disableWidget","showArea","hideArea","onShowPanel","restPanel","onHidePanel","onShowWidget","onHideWidget","WIDGET_HIDE","clipboardInstanceSymbol","Canvas","ShellClipboard","activeTracker","ShellActiveTracker","liveEditing","editing","createScrollTarget","createScroller","scrollable","locationData","ShellDropLocation","Workspace","innerWorkspace","getResourceList","ShellResource","setResourceList","resourceList","onResourceListChange","ShellWindow","registerResourceType","resourceTypeModel","openEditorWindow","resourceName","openEditorWindowById","removeEditorWindow","removeEditorWindowById","windows","onChangeWindows","onChangeActiveWindow","ModalNodesManager","modalNodesManager","setNodes","getModalNodes","shellNodes","getVisibleModalNode","hideModalNodes","setInvisible","shellDocSymbol","DocumentModel","_focusNode","detecting","history","canvas","ShellSelection","ShellDetecting","ShellHistory","ShellCanvas","ShellProject","rootNode","nodesMap","getNodeById","loc","insertNode","idOrNode","getComponentsMap","extraComps","checkNesting","dropTarget","dragObject","innerDragObject","onAddNode","onNodeCreate","onMountNode","onRemoveNode","onNodeDestroy","onChangeDetecting","onDetectingChange","onChangeSelection","onChangeNodeVisible","onChangeNodeChildren","onChangeNodeProp","onImportSchema","isDetectingNode","onFocusNodeChanged","onDropLocationChanged","shellDoc","nodeChildren","originalSorter","secondNode","SettingPropEntry","ShellSettingTopEntry","setKey","extraOptions","getDefaultValue","isUseVariable","setUseVariable","getMockOrValue","ShellSettingPropEntry","shellNodeSymbol","_id","isContainerNode","isPageNode","isComponentNode","isModalNode","isSlotNode","ShellNodeChildren","ShellProps","propsData","getChildren","getRect","hasSlots","hasCondition","hasLoop","getVisible","isConditionalVisible","lock","insertAfter","replaceChild","replaceWith","isRGLContainerNode","canPerformAction","setConditionalVisible","Detecting","capture","leave","innerFn","innerNode","DragObject","LocateEvent","locateEvent","globalX","globalY","canvasX","canvasY","innerDragonSymbol","Dragon","innerDragon","dragging","onDragstart","onDragend","boost","boostEvent","fromRglNode","addSensor","sensor","removeSensor","Resource","resource","resourceType","category","viewType","activeTrackerSymbol","ActiveTracker","innerTracker","publicNode","publicActiveTarget","PluginInstance","pluginInstance","Window","editorWindow","changeViewType","onChangeViewType","Clipboard","clipboard","setData","waitPasteData","keyboardEvent","nodeSchema","_children","_addons","_parent","isInited","_settingEntry","autoruns","_isRGLContainer","_slotFor","_slots","_conditionGroup","purging","inPlaceEditing","locking","nextId","initialChildren","upgradeProps","initProps","setupAutoruns","initBuiltinProps","NODE_VISIBLE_CHANGE","onChildrenChange","transformProps","Init","Upgrade","isPage","isComponent","isSlot","isParental","isLeaf","internalSetWillPurge","addWillPurge","didDropIn","dragment","onNodeAdd","cbThis","didDropOut","onNodeRemove","unlinkSlot","removeWillPurge","grp","shellModelFactory","suppressRemoveEvent","setExtraProp","wrapWith","wrappedNode","migrate","newNode","mergeProps","setProps","baseSchema","Clone","docId","bypassChildren","_extras_","addon","exportData","getZLevelTop","comparePosition","otherNode","isValidComponent","allComponents","getComponentName","nodeInstance","ensureNode","getIndex","getRoot","getStatus","setStatus","getComponentInstances","findDOMNodes","getPage","getRGL","isRGLContainer","isRGLNode","isRGL","rglNode","getSuitablePlace","rootCanDropIn","canDropIn","dropElement","getAddonData","registerAddon","viewport","contentBounds","computeRect","getPrototype","setPrototype","onPropChange","PositionNO","isLowCodeComponent","node1","node2","TheSame","l1","l2","BeforeOrAfter","Contains","ContainedBy","insertChild","insertChildren","results","_selected","hasNode","containsNode","excludeRoot","isTop","dataFn","redoer","session","records","asleep","currentSerialization","unserialize","Session","lastState","currentState","setSerialization","serialization","sleep","wakeup","originalCursor","currentCursor","hotData","onStateChange","onCursor","isModified","_data","activeTimer","setTimer","page","willDestroy","modalNodes","nodeRemoveEvents","addNode","onModalNodesChange","addNodeEvent","removeNodeEvent","_nodesMap","seqId","rootNodeVisitorMap","_drillDownNode","_modalNode","_blank","willPurgeSpace","activeNodes","_dropLocation","_opened","_suspensed","setupListenActiveNodes","modalNode","drillDown","NODE_CHILDREN_CHANGE","isBlank","possibleId","getNodeCount","isPurged","insertNodes","internalRemoveAndPurgeNode","drillDownNodeId","currentSchema","FixedTopNodeIndex","__isTopFixed__","FixedTopNode","getNodeSchema","getComponent","generateComponentMetadata","setSuspense","checkExclusive","originState","checkDropTarget","getUtilsMap","exportAddonData","addons","acceptRootNodeVisitor","visitorName","visitorFn","visitorResult","getRootNodeVisitor","exsitingMap","refresh","onRefresh","onReady","isDocumentModel","isPageSchema","IconLock","p-id","IconHidden","IconRemove","IconSetting","IconComponent","IconClone","IconPage","IconContainer","IconUnlock","T","IPublicTypeRootSchema","ensureAList","buildFilter","testNode","_npm","_componentName","_isContainer","_isModal","_descriptor","_rootSelector","_transformedMetadata","_liveTextEditing","_isTopFixed","parentWhitelist","childWhitelist","_title","_isMinimalRenderUnit","_acceptable","parseMetadata","isRootComponent","others","_metadata","disableBehaviors","onMoveHook","transformMetadata","liveTextEditing","collectLiveTextEditing","liveConfig","propTarget","isTopFixed","rootSelector","nestingRule","metadta","registeredTransducers","prevMetadata","preprocessMetadata","experimental","includeBlock","actions","getGlobalComponentActions","setMetadata","_item","onMetadataChange","AutoFit","isSimulatorHost","isSimulator","i18n","_simulator","isRendererReady","_config","_i18n","documentsMap","curDoc","curComponentsMap","eItem","setSchema","autoOpen","unload","documentInstances","layout","tabBar","got","activeDoc","closeOthers","opened","mountSimulator","setRendererReady","IPublicTypeProjectSchema","Viewport","_bounds","viewportElement","_scale","_contentWidth","_contentHeight","_scrollX","_scrollY","_scrollTarget","_scrolling","requestAnimationFrame","DOMRect","touch","newHeight","newWidth","newScale","newContentHeight","setScrollTarget","scrollTarget","scrollTimer","toGlobalPoint","toLocalPoint","createSimulator","iframe","vendors","LCSimulatorHost","JSText","styleFrags","scriptFrags","SimulatorRenderer","loaded","isSimulatorRenderer","ResourceConsumer","provider","consumer","_providing","_consuming","_firstConsumed","resolveFirst","consume","consumerOrRenderer","rendererConsumer","waitFirstConsume","primitiveTypes","makeRequired","lowcodeType","lowcodeCheckTypeIsRequired","any","lowcodeCheckType","_inner","LowcodeTypes","oneOf","arrayOf","objectOf","oneOfType","types","itemTypes","exact","typesMap","shape","BasicTypes","propTypeItem","componentMetadata","getClosestClickableNode","currentNode","lockedNode","getDataFromPasteEvent","clipboardData","getData","copyPasters","waitFn","isCopyPasteEvent","isCopyPaster","initCopyPaster","onPaste","blur","injectCopyPaster","ownerDocument","copyPaster","execCommand","cp","EDITOR_KEY","getSetterPropElement","defaultSaveContent","saveHandlers","addLiveEditingSaveHandler","clearLiveEditingSaveHandler","specificRules","addLiveEditingSpecificRule","clearLiveEditingSpecificRule","_editing","_dispose","_save","rootElement","targetElement","setterPropElement","setterProp","queryPropElement","propElement","onSaveContent","focus","setCaret","innerText","keydown","focusout","saveAndDispose","caretRangeFromPoint","selectRange","getSelection","removeAllRanges","addRange","querySelectorAll","isElementNode","domNode","isDOMNodeVisible","domNodeRect","nodeWidth","nodeHeight","normalizeTriggers","triggers","makeEventsHandler","sensors","topDoc","sourceDoc","docs","sim","sdoc","defaultSimulatorUrl","urls","dev","defaultRaxSimulatorUrl","defaultEnvironment","defaultRaxEnvironment","BuiltinSimulatorHost","scroller","componentsConsumer","injectionConsumer","i18nConsumer","autoRender","_props","_contentWindow","_contentDocument","_renderer","_iframe","disableHovering","instancesMap","tryScrollAgain","_sensorAvailable","sensing","componentsAsset","stopAutoRepaintNode","debounce","enableAutoRepaintNode","connect","mountViewport","buildLibrary","_library","libraryAsset","libraryExportList","functionCallLibraryExportList","editUrls","refreshComponentMetasMap","loadAsyncLibrary","setupDragAndClick","setupDetecting","setupLiveEditing","setupContextMenu","downEvent","dispatchEvent","isMulti","nodeInst","getNodeInstanceFromElement","onMouseDownHook","isLeftButton","checkSelect","firstChildId","button","ignoreUpSelected","defaultIgnoreSelectors","ignoreSelectors","ignoreSelectorsString","suspended","instanceRect","computeComponentInstanceRect","isHTMLTag","setInstance","getClosestNodeInstance","getComponentContext","specId","elems","rects","last","_computed","getClientRects","getMatched","nodeIntance","scroll","componentInstance","near","scrollTop","scrollLeft","scrollTo","setDraggingState","setCopyState","clearState","fixEvent","fixed","notMyEvent","elementFromPoint","isEnter","deactiveSensor","locate","operationalNodes","canMove","parentContainerNode","onChildMoveHook","childrenCanMove","scrolling","dropContainer","getDropContainer","containerInstance","nearRect","nearIndex","nearNode","nearDistance","maxBottom","_inst","distance","isPointInRect","distanceToRect","getRectTarget","inline","isChildInline","row","isRowContainer","vertical","isNearAfter","edgeDistance","distanceToEdge","nearAfter","currentRoot","drillDownExcludes","upward","handleAccept","isAcceptable","acceptable","getNearByContainer","nearBy","bn","minX","minY","sqrt","distanceTop","distanceBottom","firstQueried","Document","BorderDetectingInstance","scrollX","scrollY","BorderDetecting","canHoverHook","onHoverHook","canHover","BorderContainerInstance","getTitle","BorderContainer","Popup","Overlay","InstanceNodeSelector","parentNodes","getParentNodes","onSelect","renderNodes","onMouseEnter","onMouseLeave","BorderSelectingInstance","observed","highlight","hasOffset","offsetHeight","offsetTop","offsetLeft","hideSelectTools","BAR_HEIGHT","MARGIN","BORDER","SPACE_HEIGHT","SPACE_MINIMUM_WIDTH","justifyContent","important","BorderSelectingForNode","createOffsetObserver","BorderSelecting","suspensed","selecting","DragResizeEngine","dragResizing","isDragResizing","startEvent","move","createResizeEvent","moveX","moveY","masterSensors","getMasterSensors","sourceDocument","srcSim","handleEvents","mousedown","onResizeStart","onResize","onResizeEnd","sensorAvailable","SimulatorContext","BoxResizing","BoxResizingForNode","BoxResizingInstance","willUnbind","outlineN","outlineE","outlineS","outlineW","outlineNE","outlineNW","outlineSE","outlineSW","dragEngine","willBind","resize","deltaX","deltaY","cbNode","resizeStart","resizeEnd","unBind","triggerVisible","getResizingHandlers","baseSideClass","baseCornerClass","processChildrenDetail","insertType","coverRect","isVertical","processDetail","InsertionView","isAbsoluteLayoutContainer","valid","BemTools","bemToolsManager","getAllBemTools","tools","ToolsCls","BuiltinSimulatorHostView","onMount","deviceStyle","elmt","Content","disabledEvents","onEnableEvents","frameStyle","contentHeight","contentWidth","pointerEvents","frame","mountContentFrame","BuiltinLoading","ProjectView","simulatorProps","projectSimulatorProps","Simulator","simulatorComponent","Loading","isWindow","scrollToXY","scrollHeight","scrollWidth","easing","sin","PI","SCROLL_ACCURCY","Scroller","pid","duration","animate","eased","maxScrollHeight","maxScrollWidth","ax","ay","cancelAnimationFrame","isLocateEvent","isInvalidPoint","isSameAs","setShaken","getSourceSensor","isDragEvent","_activeSensor","_dragging","_canDrop","newBie","forceCopyState","isBoostFromDragAPI","lastSensor","createLocateEvent","chooseSensor","checkesc","clearLocation","checkcopy","dataTransfer","dropEffect","lastArrive","drag","nodeInstPointerEvents","dragstart","didDrop","drop","tarNode","evt","lastSim","sourceSensor","effectAllowed","getSimulators","originalTarget","DETECTING_CHANGE_EVENT","_enable","xRayMode","isText","getWindow","isVerticalContainer","TEXT_NODE","isDocument","DOCUMENT_NODE","defaultView","getContainer","getInsertion","OffsetObserver","lastOffsetLeft","lastOffsetTop","lastOffsetHeight","lastOffsetWidth","_height","_width","_left","_top","_right","_bottom","compute","getHotterFromSetter","Hotter","getTransducerFromSetter","Transducer","combineTransducer","toHot","toNative","setterTransducer","isDynamic","dynamicFlag","_name","isHotValue","disableMutator","notifyValueChange","fromSetHotValue","valueChange","onValueChange","isIgnore","getVariableValue","setVariableValue","createSettingPropEntry","getSettingFieldCollectorKey","settingFieldCollector","hotValue","_setter","_expanded","initItems","shellThis","disposeItems","configName","getItems","setHotValue","getHotValue","setMiniAppDataSourceValue","__sid__","IPublicTypeSetValueOptions","_componentMeta","_isSame","_settingFieldMap","disposeFunctions","setupComponentMeta","theSame","settingFieldMap","isPurgeable","BemToolsManager","toolsContainer","addBemTools","toolsData","removeBemTools","legacyIssues","componentDefaults","ComponentActions","curLayout","metadataTransducers","builtinAction","Designer","propsReducers","_lostComponentMetasMap","oobxList","_componentMetasMap","_simulatorComponent","_simulatorProps","selectionDispose","rootNodeChildrens","historyDispose","defaultSchema","nodeData","isNotNodeSchema","setupHistory","currentHistory","oobx","clearOobxList","getSuitableInsertion","refNode","componentMetadatas","buildComponentMetasMap","setupComponents","newAssets","metas","globalComponentActions","generateMetadata","metaData","reducers","reducer","ComponentType","DragGhost","getTitles","dataList","renderGhostGroup","ghost","DesignerView","designerProps","dragGhostComponent","BuiltinDragGhostComponent","isValidPreferenceKey","preferenceDeclaration","isLowCodeRegisterOptions","filterValidOptions","filteredOpts","PluginContext","contextApiAssembler","common","pluginEvent","assembleApis","enhancePluginContextHook","setPreference","getPreferenceValue","pluginPreference","LowCodePluginRuntime","manager","_inited","legacyDepValue","forceInit","tasks","missing","recursive","missingTasks","recursiveDependencies","RESERVED_EVENT_PREFIX","LowCodePluginManager","pluginContextMap","_getLowCodePluginContext","LowCodePluginContext","isEngineVersionMatched","versionExp","engineVersion","semverSatisfies","engines","eventPrefix","isReservedPrefix","customFilterValidOptions","allowOverride","originalPlugin","engineVersionExp","lowcodeEngine","autoInit","pluginNames","pluginObj","sequencify","BasicContext","registerInnerPlugins","InnerSkeleton","InnerHotkey","InnerSetters","pluginContextApiAssembler","registryInnerPlugin","registerPlugins","getWebviewPlugin","webviewPlugin","Context","editorView","_activate","isInit","setActivate","EditorWindow","editorViews","initReady","initViewTypes","initViewType","execViewTypesInit","setDefaultViewType","defaultViewType","viewInfo","getEditorView","ignoreEmit","newSchema","saveResult","resourceData","resourceTypeInstance","editorViewMap","defaultTitle","ResourceType","CHANGE_EVENT","_isActive","resourceTypeMap","editorWindowMap","initWindow","defaultResourceType","emitChangeWindow","emitChangeActiveWindow","getResourceType","removeResourceType","filterWindows","ChangeWindow","ChangeActiveWindow","EditorView","ResourceView","WindowView","SubTopArea","getText","liveEditingRule","childNodes","equalText","liveEditingSaveHander","InnerNode","componentMetaParser","setterRegistry","builtinSetters","require","DesignerPlugin","extraEnvironment","_mounted","handleDesignerMount","setupAssets","defaultPanelRegistry","ignoreRoot","ShellModelFactory","originalChild","pluginContext","getNextForSelect","getPrevForSelect","lastChild","getSuitablePlaceForNode","targetNode","dragNodeObject","canDropInFn","builtinHotkey","isInLiveEditing","sel","topItems","cutMode","canAddComponentsTree","curSelected","silbing","isPrev","place","IconArrowRight","IconCond","IconEyeClose","IconEye","IconFilter","IconLoop","IconRadioActive","IconRadio","emitOutlineEvent","treeNode","TreeTitle","enableEdit","saveEdit","setTitleLabel","cancelEdit","handleKeyUp","lastInput","titleLabel","onTitleLabelChanged","isCNode","isNodeParent","paddingLeft","marginLeft","filterReult","filterWorking","matchSelf","Extra","extraTitle","editorCabin","shouldShowHideBtn","shouldShowLockBtn","shouldEditBtn","data-id","expandable","onKeyUp","locked","RenameBtn","LockBtn","setLocked","HideBtn","setHidden","ExpandBtn","TreeBranches","matchChild","offExpandedChanged","onFilterResultChanged","newFilterWorking","newMatchChild","expandInFilterResult","TreeNodeChildren","dropDetail","offLocationChanged","newKeywords","groupContents","currentGrp","endGroup","dropIndex","insertion","invalid","childIsModal","TreeNodeSlots","tnode","ModalTreeNodeView","hideAllNodes","rootTreeNode","getTreeNode","hasVisibleModalNode","TreeNodeView","dropping","conditionFlow","eventOffCallbacks","isFocusingNode","onExpandedChanged","onHiddenChanged","onLockedChanged","onExpandableChanged","offSelectionChange","offDetectingChange","offFun","shouldShowModalTreeNode","getTreeNodeIdByEvent","stop","TreeView","nativeEvent","getTreeNodeFromEvent","selectedNode","onDoubleClick","collapseAllDecendants","expandAllDecendants","getTreeNodeById","onMouseDownCapture","FilterType","FILTER_OPTIONS","matchTreeNode","filterOps","setFilterReult","childNode","matchFilterOps","matchKeywords","Filter","handleSearchChange","filterTree","handleOptionChange","handleCheckAll","final","indeterminate","checkAll","hasClear","v2","closable","checked","Group","Pane","controller","treeMaster","currentTree","IconOutline","BackupPaneName","MasterPaneName","TreeNode","_filterResult","hasChildren","notifyExpandableChanged","isResponseDropping","includeOriginalRoot","cv","currentLocale","currentTitle","origLabel","expand","tryExpandParents","expandParents","setNode","Tree","treeNodesMap","parentTreeNode","setNodeSelected","expandAllAncestors","ancestors","ancestor","TreeMaster","boards","treeMap","toVision","board","endTime","toFixed","addBoard","removeBoard","IndentSensitive","IndentTrack","indentStart","getIndentParent","lastLoc","DwellTimer","decide","tryFocus","PaneController","indentTrack","dwell","getPosFromEvent","irect","getInsertionRect","originLoc","focusSlots","newNodes","getNear","drillLocate","indented","checkRecursion","tryTimes","getTreeNodeRect","originalIndex","originalRect","loc1","titleRect","getTreeTitleRect","isSlotContainer","slotsRect","getTreeSlotsRect","currentIndex","topNodes","OutlinePlugin","isInFloatArea","hasPreferenceForOutline","showingPanes","masterPane","backupPane","masterPaneController","backupPaneController","treeTitleExtra","switchPanes","isDragging","hasVisibleTreeBoard","shouldShowBackupPane","selectedNodes","InnerWorkspace","isOpenSource","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","engineContainer","VERSION_PLACEHOLDER","skeletonCabin","enableWorkspaceMode","WorkSpaceWorkbench","unmountComponentAtNode"],"mappings":"CAAA,SAAUA,EAAiCC,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAA0B,iBAAID,IAE9BD,EAAuB,iBAAIC,IAR7B,CASGK,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,SAASM,IAAe,OAAOjC,EAAgB,SAC/C,SAASkC,IAAqB,OAAOlC,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASmB,EAAQC,GAAY,OAAOnB,OAAOoB,UAAUC,eAAe5B,KAAKyB,EAAQC,IAGzG/B,EAAoBkC,EAAI,IAIjBlC,EAAoBA,EAAoBmC,EAAI,I,+BClFrD,62D,cCAAxC,EAAOD,QAAUI,OAAOsC,O,06DCAlB,SAAUC,EAASC,GACvB,MAAO,gBAAgBC,KAAKD,GCKxB,SAAUE,IACd,IAAMxB,EAAS,GACTyB,EAAU,IAAIC,SAAW,SAACC,EAASC,GACvC5B,EAAE2B,QAAUA,EACZ3B,EAAE4B,OAASA,KAKb,OAFA5B,EAAEyB,QAAU,kBAAMA,GAEXzB,ECbH,SAAU6B,EAASC,GACvB,IAAMC,EAAWC,SAASC,cAAc,UACxCF,EAASG,KAAOJ,EAChBE,SAASG,KAAKC,YAAYL,GAC1BC,SAASG,KAAKE,YAAYN,GAGtB,SAAUO,EAAKhB,GACnB,IAAMiB,EAAYP,SAASC,cAAc,UAIzCM,EAAKC,OAASA,EACdD,EAAKE,QAAUD,EAEf,IAAMtD,EAAIsC,IAEV,SAASgB,EAAOE,GACdH,EAAKC,OAAS,KACdD,EAAKE,QAAU,KACA,SAAXC,EAAEC,KACJzD,EAAEyC,UAEFzC,EAAE0C,SAaN,OAPAW,EAAKK,IAAMtB,EAGXiB,EAAKM,OAAQ,EAEbb,SAASG,KAAKC,YAAYG,GAEnBrD,EAAEuC,UAGL,SAAUqB,EAAmBC,GAEjC,IAAMC,EACN,OADW,IAAIC,SAASF,EACjBC,GAGH,SAAUE,EAAYC,EAAcC,GACxC,IAEE,OAAO,IAAIH,SAASE,EAAMC,GAC1B,MAAOV,GAEP,OADAW,QAAQC,KAAK,gCACN,M,sYCnDX,omGAAApE,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,4sDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,8bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,6hBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,uGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,8uBAAAA,EAAA,oDAAAA,GAAA,oCAAAA,OAAA,wfAAAA,EAAA,EAAAA,EAAA,SAAAA,IAAA,SAAAA,GAAA,ovCAAAA,EAAA,iBAAAA,EAAA,EAAAA,IAAA,EAAAA,GAAA,EAAAA,GAAA,SAQM,SAAUqE,EAAYC,GAC1B,OAAOA,GAAOA,EAAIb,KAGd,SAAUc,EAAcD,GAC5B,OAAOA,GAAOA,EAAIb,OAASe,IAAUC,OAGjC,SAAUC,EACZC,EACAC,GAEF,OAAKD,EAGE,CACLlB,KAAMe,IAAUC,OAChBE,SACAC,SALO,KAiBL,SAAUC,EAAUpB,EAAiBqB,EAAyBF,EAAoBG,GACtF,OAAKD,EAGE,CACLrB,OACAqB,UACAF,QACAG,MANO,KAUL,SAAUC,EAAYL,EAA+BM,GAYzD,OAXIA,EAAkBC,WACpBP,EAAOO,SAAW,GAAH,SAAQP,EAAOO,UAAY,IAAK,EAAGD,EAAkBC,YAGlED,EAAkBE,aACpBR,EAAOQ,WAAa,GAAH,SAAQR,EAAOQ,YAAc,IAAK,EAAGF,EAAkBE,cAG1EC,EAAyBT,EAAQM,EAAmB,iBACpDG,EAAyBT,EAAQM,EAAmB,oBAE7CN,EAGT,SAASS,EAAyBT,EAA+BM,EAA0CI,GAEjF,MADpBJ,EAAkBI,KAChBV,EAAOU,KAEkB,QAA3B,EAAAJ,EAAkBI,UAAS,OAA3B,EAA6BC,KAAI,SAACC,GAAQ,QACpCC,GAAY,EAWhB,OAVgB,QAAhB,EAAAb,EAAOU,UAAS,OAAhB,EAAkBC,KAAI,SAACT,GAMrB,OALIA,EAAUY,QAAUF,EAAKE,QAC3BZ,EAAUa,SAAWb,EAAUa,SAASC,OAAOJ,EAAKG,UACpDF,GAAY,GAGPX,MAGRW,IAA6B,QAApB,EAAIb,EAAOU,UAAS,OAAhB,EAAkBO,KAAKL,IAC9BA,OAMR,IAAMM,EAAU,WAWrB,WAAYjB,EAAeG,GAKzB,IAAIe,EAIJ,GAToC,eAV9BC,iBAAW,OAEXC,aAAO,OAEPF,iBAAW,OAEVlB,WAAK,OAELG,QAAE,EAGTkB,KAAKrB,MAAQA,EACTG,IACFkB,KAAKlB,GAAKA,GAGRA,IACFe,EAAchD,SAASG,KAAKiD,cAAc,kBAAD,OAAmBnB,EAAE,SAE3De,EAAa,CAChBA,EAAchD,SAASqD,eAAe,IACtC,IAAMC,EAAOtD,SAASG,KAAKiD,cAAc,eAAD,OAAgBtB,EAAK,OACzDwB,EACFtD,SAASG,KAAKoD,aAAaP,EAAaM,GAExCtD,SAASG,KAAKC,YAAY4C,GAG9BG,KAAKH,YAAcA,EAkDpB,OAjDA,4BAED,SAAAQ,EAAUxB,GACR,GAAImB,KAAKF,cAAgBjB,EAAzB,CAGAmB,KAAKF,YAAcjB,EACnBmB,KAAKD,aAAUO,EACf,IAAMC,EAAU1D,SAASC,cAAc,SACvCyD,EAAQC,aAAa,OAAQ,YACzBR,KAAKlB,IACPyB,EAAQC,aAAa,UAAWR,KAAKlB,IAEvCyB,EAAQtD,YAAYJ,SAASqD,eAAerB,IAC5ChC,SAASG,KAAKoD,aAAaG,EAASP,KAAKH,YAAYY,aAAe5D,SAASG,KAAOgD,KAAKH,YAAYa,YAAc,MACnH7D,SAASG,KAAKE,YAAY8C,KAAKH,aAC/BG,KAAKH,YAAcU,KACpB,sBAED,SAAAI,EAASxE,GACP,GAAI6D,KAAKD,UAAY5D,EAArB,CAGA6D,KAAKF,iBAAcQ,EACnBN,KAAKD,QAAU5D,EACf,IAAMoE,EAAU1D,SAASC,cAAc,QACvCyD,EAAQlD,OAASA,EACjBkD,EAAQjD,QAAUD,EAElB,IAAMtD,EAAIsC,IAmBV,OARAkE,EAAQK,KAAOzE,EACfoE,EAAQM,IAAM,aACVb,KAAKlB,IACPyB,EAAQC,aAAa,UAAWR,KAAKlB,IAEvCjC,SAASG,KAAKoD,aAAaG,EAASP,KAAKH,YAAYY,aAAe5D,SAASG,KAAOgD,KAAKH,YAAYa,YAAc,MACnH7D,SAASG,KAAKE,YAAY8C,KAAKH,aAC/BG,KAAKH,YAAcU,EACZxG,EAAEuC,UAlBT,SAASe,EAAOE,GACdgD,EAAQlD,OAAS,KACjBkD,EAAQjD,QAAU,KACH,SAAXC,EAAEC,KACJzD,EAAEyC,UAEFzC,EAAE0C,cAaP,EA/EoB,GAkFvB,SAASqE,EAAeC,EAAcC,EAAatC,EAAmBC,GAAkB,QAClED,GAAM,MAA1B,IAAK,EAAL,qBAA4B,KAAjBuC,EACTC,EAAWH,EAASC,EADN,QACqBrC,IACpC,+BAGH,SAASuC,EAAWH,EAAcC,EAAaC,EAAiCtC,GAC9E,GAAKsC,EAAL,CAGA,GAAIE,MAAMC,QAAQH,GAChB,OAAOH,EAAeC,EAASC,EAAQC,EAAOtC,GAGhD,GAAIL,EAAc2C,GAChB,OAAIA,EAAMvC,YACJyC,MAAMC,QAAQH,EAAMvC,QACtBoC,EAAeC,EAASC,EAAQC,EAAMvC,OAAQuC,EAAMtC,OAASA,GAE7DuC,EAAWH,EAASC,EAAQC,EAAMvC,OAAQuC,EAAMtC,OAASA,SAI7D,EAGGP,EAAY6C,KACfA,EAAQrC,EAAU1C,EAAS+E,GAAS1C,IAAU8C,OAAS9C,IAAU+C,MAAOL,EAAOtC,IAGjF,IAAI4C,EAAKN,EAAMtC,OAASA,EAEnB4C,GAAwB,MAAlBC,IAAWD,KACpBA,EAAKC,IAAWC,KAGlBR,EAAMtC,MAAQ4C,EACVN,EAAMzD,OAASe,IAAU8C,QAAUJ,EAAMzD,MAAQe,IAAUmD,QAC7DV,EAAOO,GAAI5B,KAAKsB,GAEhBF,EAAQQ,GAAI5B,KAAKsB,IAId,IAAMU,EAAW,uCA2BdC,YAAc,IAAIC,IAoDzB,OApDkD,oDA1BnD,WAAWZ,GAAY,sFAmBpB,OAlBKD,EAAc,GACdD,EAAe,GACrBe,IAAYC,SAAQ,SAAAR,GAClBP,EAAOO,GAAM,GACbR,EAAQQ,GAAM,MAEhBL,EAAWH,EAASC,EAAQC,GACtBe,EAA0BhB,EAAOQ,IAAWS,aAAavC,OAC7DsB,EAAOQ,IAAWU,SAClBlB,EAAOQ,IAAWW,OAClBnB,EAAOQ,IAAWY,SAClBpB,EAAOQ,IAAWC,MAEdY,EAA2BtB,EAAQS,IAAWS,aAAavC,OAC/DqB,EAAQS,IAAWU,SACnBnB,EAAQS,IAAWW,OACnBpB,EAAQS,IAAWY,SACnBrB,EAAQS,IAAWC,MACpB,SACKlF,QAAQ+F,IACZN,EAAW3C,KAAI,gBAAGR,EAAO,EAAPA,QAASF,EAAK,EAALA,MAAOnB,EAAI,EAAJA,KAAMsB,EAAE,EAAFA,GAAE,OAAO,EAAKyD,UAAU1D,EAASF,EAAQnB,IAASe,IAAU8C,OAAQvC,OAC7G,wBACKvC,QAAQ+F,IAAID,EAAYhD,KAAI,gBAAGR,EAAO,EAAPA,QAASrB,EAAI,EAAJA,KAAI,OAAO,EAAKgF,WAAW3D,EAASrB,IAASe,IAAU+C,WAAQ,4CAC9G,sDAEkD,IAFlD,uBAIO,SAAAiB,EAAU1D,EAAoCF,EAAmB8D,EAAiB3D,GAIxF,IAAI4D,EAHJ,GAAK7D,EAaL,OATIC,GACF4D,EAAQ1C,KAAK4B,YAAYhH,IAAIkE,MAE3B4D,EAAQ,IAAI9C,EAAWjB,EAAOG,GAC9BkB,KAAK4B,YAAYe,IAAI7D,EAAI4D,IAG3BA,EAAQ,IAAI9C,EAAWjB,GAElB8D,EAAQC,EAAM/B,SAAS9B,GAAW6D,EAAMrC,UAAUxB,KAC1D,wBAEO,SAAA2D,EAAW3D,EAAoC4D,GACrD,GAAK5D,EAGL,OAAO4D,EAAQtF,EAAK0B,GAAWnC,EAASmC,KAG1C,2DACA,WAAuB+D,GAAoC,+EAIzD,IAAWtH,KAHLuH,EAAqB,GACrBC,EAAwB,GACxBC,EAAc,GACFH,EAEZA,EAAgBtH,GAAKoC,QACvBmF,EAAYlD,KAAKhG,OAAOiJ,EAAgBtH,GAAK0H,UAC7CF,EAAenD,KAAKiD,EAAgBtH,GAAK0H,SACzCD,EAAKpD,KAAKiD,EAAgBtH,KAE7B,gBACKiB,QAAQ+F,IAAIO,GAAaI,MAAK,SAACC,GAC/BA,EAAKC,OAAS,GAChBD,EAAK7D,KAAI,SAACC,EAAM8D,GACd,MAAqDL,EAAKK,GAAlDC,EAAU,EAAVA,WAAYC,EAAmB,EAAnBA,oBAAqBN,EAAO,EAAPA,QAMzC,OALArJ,OAAOmJ,EAAeM,IACL,iBAAfC,GACwB,MAAvBC,GAA+BA,IAAwBN,EAEpD1D,EADAA,IAECA,QAGX,2CACH,sDA1BD,MA0BC,EA/EqB,G,qOCvNlB,SAAUiE,EAASvI,GACvB,OAAiB,OAAVA,GAAmC,WAAjB,EAAOA,GAG5B,SAAUwI,EAAaxI,GAC3B,OAAOuI,EAASvI,IAAyB,SAAfA,EAAMwC,KCH5B,SAAUiG,EAAczI,GAC5B,IAAKuI,EAASvI,GACZ,OAAO,EAET,IAAM0I,EAAQjJ,OAAOkJ,eAAe3I,GACpC,OAAO0I,IAAUjJ,OAAOoB,WAAuB,OAAV6H,GAAmD,OAAjCjJ,OAAOkJ,eAAeD,G,qOCLzE,SAAUE,EAAUnG,GACxB,IAAMD,EAAO,EAAOC,GAEhBoG,EACJ,GAAIpG,QACFoG,EAAOpG,OACF,GAAI0D,MAAMC,QAAQ3D,GACvBoG,EAAOpG,EAAI4B,KAAI,SAAAC,GAAI,OAAIsE,EAAUtE,WAC5B,GAAa,WAAT9B,GAAqBiG,EAAchG,GAE5C,IAAK,IAAMnC,KADXuI,EAAO,GACWpG,EAEZA,EAAI3B,eAAeR,KACrBuI,EAAKvI,GAAOsI,EAAUnG,EAAInC,UAI9BuI,EAAOpG,EAGT,OAAOoG,E,WCtBHC,EAAuB,CAC3B,WACA,SACA,eACA,QACA,SACA,YACA,OACA,SACA,SACA,aAGI,SAAUC,EAAwBC,EAAaC,GACnD,IAAMC,EAMN,OAN+BzJ,OAAO0J,KAAKF,GAAQG,QAAO,SAAA/J,GAAC,OAAKyJ,EAAqBO,SAAShK,MAEvE0H,SAAQ,SAAC1H,GAC7B2J,EAAe3J,GAAK4J,EAAO5J,MAGvB2J,E,6pECjBT,IAAMM,GACAC,GAD8B,mBAAXzJ,QAAyBA,OAAO0J,IACd1J,OAAO0J,IAAI,qBAAuB,MAEvE,SAAUC,GAAapG,GAC3B,OAAOA,GAAOA,EAAIxC,YAAcwC,EAAIxC,UAAU6I,kBAAoBrG,EAAIxC,qBAAqB8I,aAGvF,SAAUC,GAAWvG,GAAQ,MACjC,OAAOA,SAAc,QAAX,EAAHA,EAAKxC,iBAAS,WAAX,EAAH,EAAgB6I,mBAAqBrG,EAAIwG,UAAYxG,EAAIwG,WAAaN,GAG/E,SAASO,GAAiBzG,GACxB,OAAOA,aAAG,EAAHA,EAAKwG,YAAYxG,aAAG,EAAHA,EAAKwG,YAAaN,GAGtC,SAAUG,GAAiBrG,GAC/B,OAAOA,IAAQoG,GAAapG,IAAuB,mBAARA,GAAsByG,GAAiBzG,IAG9E,SAAU0G,GAAeC,GAC7B,IAAIC,EAAkB,oFAGnB,OAHmB,yBACpB,SAAAC,IACE,OAAOpI,wBAAckI,EAAMhF,KAAKmF,WACjC,EAHmB,CAAiBR,aAOvC,OAFAM,EAAqBlB,EAAwBkB,EAAoBD,IAC9CI,YAAcJ,EAAKI,YAC/BH,EC3BH,SAAUI,GACZxG,EACAsG,GAEF,OAAIG,yBAAezG,GACVsG,EAAQI,uBAAa1G,EAASsG,GAAStG,EAE5C6F,GAAiB7F,GACZ/B,wBAAc+B,EAASsG,GAGzBtG,E,YCVH,SAAU2G,GAAWnH,GACzB,OAAOA,GAAOA,EAAIlD,W,69CCCpB,IAAMsK,GAAS,kBAET,SAAUC,GACZC,EACAR,GAEF,OAAKQ,GAGDH,GAAWG,KACbA,EAAOA,EAAKC,SAEM,iBAATD,EACLF,GAAOrJ,KAAKuJ,GACP,8BAAKlI,IAAKkI,GAAUR,IAEtB,oBAAC,QAAI,IAAC3H,KAAMmI,GAAUR,IAE3BG,yBAAeK,GACVJ,uBAAaI,EAAM,GAAF,GAAOR,IAE7BT,GAAiBiB,GACZ7I,wBAAc6I,EAAM,GAAF,GAAOR,IAG3B,oBAAC,QAAI,MAAKQ,EAAUR,KAlBlB,K,y9DCXJ,IAAMU,GA4DAC,GAAS,IA5DH,wCACTC,OAAS,IAAIC,IAwDpB,OAxDiC,+BAElC,SAAAC,EAAYC,GACNA,EACFlG,KAAKmG,SAAS,YAEdnG,KAAKoG,YAAY,cAEpB,0BAED,SAAAC,EAAaH,GACPA,EACFlG,KAAKmG,SAAS,cAEdnG,KAAKoG,YAAY,gBAEpB,0BAED,SAAAE,EAAaJ,GACPA,EACFlG,KAAKmG,SAAS,cAEdnG,KAAKoG,YAAY,gBAEpB,qBAED,SAAAG,EAAQL,GACFA,EACFlG,KAAKmG,SAAS,QAEdnG,KAAKoG,YAAY,UAEpB,oBAED,SAAAI,IACE,OAAOxG,KAAK+F,OAAOU,IAAI,UACxB,qBAED,SAAAC,IAAO,SACe1G,KAAK+F,QAAM,MAA/B,IAAK,EAAL,qBAAiC,KAAtBY,EAAK,QACd3G,KAAKoG,YAAYO,IAClB,iCACF,sBAED,SAAAR,EAASQ,GACF3G,KAAK+F,OAAOU,IAAIE,KACnB3G,KAAK+F,OAAOa,IAAID,GAChB9J,SAASgK,gBAAgBC,UAAUF,IAAI,aAAD,OAAcD,OAEvD,yBAEO,SAAAP,EAAYO,GACd3G,KAAK+F,OAAOU,IAAIE,KAClB3G,KAAK+F,OAAOgB,OAAOJ,GACnB9J,SAASgK,gBAAgBC,UAAUE,OAAO,aAAD,OAAcL,SAE1D,EAzDgB,ICFb,SAAUhD,GAAeK,GAC7B,YAAqC,IAA1BvJ,OAAOkJ,eACTlJ,OAAOkJ,eAAeK,GAIxBA,EAAOiD,UCNhB,IAAMC,GAA0BzM,OAAOoB,UAAUC,eAC3C,SAAUA,GAAeuC,EAAU/C,GACvC,OAAO+C,GAAO6I,GAAwBhN,KAAKmE,EAAK/C,GCF5C,SAAU6L,GAAU/J,GACxB,QAAKA,GACEA,EAAKgK,WAAaC,KAAKC,aCF1B,SAAUC,GAAYhK,GAC1B,IAAMtC,EAAIsC,EAAEyG,OACZ,QAAK/I,OAIDA,EAAEuM,OAAQ,4BAA4BpL,KAAKnB,EAAEwM,cAG7CxM,aAAayM,aAAe,QAAQtL,KAAKzC,OAAOgO,iBAAiB1M,GAAG2M,iBAAiB,0BCTrF,SAAUC,GAAWhK,GACzB,MAAqB,mBAAPA,ECDhB,IAAIiK,IAAyB,EACvBC,GAAmB,SAAnBA,EAAoBxK,GACxB,OAAIuK,GACK,MAETvK,EAAEyK,iBACFzK,EAAE0K,mBACK,IAKH,SAAUC,GAAmBC,GACjCL,GAAyBK,ECbrB,SAAUC,GAAepE,EAAaN,QACL,IAA1BjJ,OAAO2N,eAChB3N,OAAO2N,eAAepE,EAAQN,GAG9BM,EAAOiD,UAAYvD,E,uOCHjB,SAAU2E,GAAaC,EAAWC,GACtC,GAAID,IAASC,EACX,OAAO,EAGT,GAAoB,WAAhB,GAAOD,IAA8B,OAATA,GAAiC,WAAhB,GAAOC,IAA8B,OAATA,EAC3E,OAAO,EAGT,IAAMC,EAAQ/N,OAAO0J,KAAKmE,GACpBG,EAAQhO,OAAO0J,KAAKoE,GAE1B,GAAIC,EAAMrF,SAAWsF,EAAMtF,OACzB,OAAO,EAIT,IAAK,IAAIpJ,EAAI,EAAGA,EAAIyO,EAAMrF,OAAQpJ,IAChC,IAAK+B,GAAeyM,EAAMC,EAAMzO,KAAOuO,EAAKE,EAAMzO,MAAQwO,EAAKC,EAAMzO,IACnE,OAAO,EAIX,OAAO,E,uOFhBT8C,SAAS6L,iBAAiB,cAAeX,IAAkB,GAC3DlL,SAAS6L,iBAAiB,YAAaX,IAAkB,G,oqDGRzD,IAAMY,GAAmB,CACvBC,OAAQ,EACRC,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPC,OAAQ,IAWJ,SAAUC,GAAQ,GASvB,IARCC,EAAI,EAAJA,KAAI,IACJC,YAAI,IAAG,WAAQ,EACfC,EAAO,EAAPA,QACAC,EAAK,EAALA,MACA5J,EAAQ,EAARA,SACG0F,EAAK,SASR,OAJIwD,GAAY7M,eAAeqN,KAC7BA,EAAOR,GAAYQ,IAInB,8BACED,KAAK,eACLI,oBAAoB,gBACpBC,MAAOJ,EACPK,OAAQL,EACRC,QAASA,GACLjE,EAAK,CACTkE,MAAK,IACHI,MAAOP,GACJG,KAGJ5J,GC9CP,IAAIiK,GAAOC,KAAKC,MACV,SAAUC,KAAoB,IAAXC,EAAS,UAAH,6CAAG,GAChC,MAAO,GAAP,OAAUA,GAAM,QAAIJ,MAAQK,SAAS,IAAIC,e,wvCCSrC,SAAUC,GAAcjH,GAC5B,MAAuB,iBAAZA,EACFA,EAGDrJ,OAAeqJ,IAAYkH,GAAiBlH,GAGhD,SAAUkH,GAAiBlH,GAC/B,GAAI,CAAC,IAAK,MAAO,MAAO,OAAQ,OAAOqB,SAASrB,GAC9C,OAAOmH,sBAAW,SAAChF,EAAOiF,GACxB,OAAOtN,wBAAckG,EAAS,IAAEoH,OAAQjF,GAASA,EAAM1F,aAKvD,SAAU4K,GAAgBrH,EAAcsH,GAC5C,IAAMtQ,EAAIsQ,EAAMnH,OAChB,GAAInJ,EAAI,IAAMgJ,EACZ,OAAOA,EAIT,IAFA,IAAIjJ,EAAI,EACJwQ,EACGxQ,EAAIC,GAAG,CACZ,IAAMsB,EAAMgP,EAAMvQ,GACdyQ,OAAO,EACX,IACED,EAAYvH,EAAQ1H,IAAQiP,EAC5B,MAAOhN,GACPiN,EAAKjN,EACLgN,EAAY,KAEd,GAAU,IAANxQ,GAAwB,MAAbwQ,GAA6B,YAARjP,EAAmB,CACrD,GAAIkP,EACF,OAAa,IAANxQ,EAAUgJ,EAAU,KAE7BuH,EAAYvH,OACP,GAAiB,MAAbuH,EACT,OAAO,KAETvH,EAAUuH,EACVxQ,IAEF,OAAOwQ,EAGT,SAASE,GAAcC,EAAwBC,EAAuBC,GACpE,IAAKA,EACH,OAAOX,GAAcU,GAQvB,IAAME,EAAaD,EAAIC,YAAcD,EAAID,eAAiBA,EACpDG,EACA9H,EAAUiH,GADIS,EAAWE,EAAIG,UAAYF,GAEzCP,EAAQM,EAAIC,YAAcD,EAAII,QAAUJ,EAAII,QAAQC,MAAM,KAAO,GAMvE,OALIL,EAAIM,cACNZ,EAAMa,QAAQN,GACLrF,GAAWxC,IACpBsH,EAAMa,QAAQ,WAETd,GAAgBrH,EAASsH,GAWlC,SAASc,GAAiBlM,GACxB,QAAKqE,EAASrE,IAIPzE,OAAO0J,KAAKjF,GAAYmM,MAAK,SAAAV,GAAa,OAAIjG,GAAiBxF,EAAWyL,OAG7E,SAAUW,GAAgBZ,EAC9Ba,EACAC,GACA,IAAMtM,EAAkB,GAsBxB,OArBAzE,OAAO0J,KAAKoH,GAAexJ,SAAQ,SAAC4I,GAClC,IAAIJ,EAAYgB,EAAcZ,GAC1BJ,GAAyE,cAA3DA,EAAyCI,cACzDzL,EAAWyL,GAAiBa,EAAgBjB,GACnC7F,GAAiB6F,IACrB3F,GAAW2F,KACdA,EAAYxF,GAAewF,IAE7BrL,EAAWyL,GAAiBJ,GACnBa,GAAiBb,GAC1BrL,EAAWyL,GAAiBJ,GAE5BA,EAAYE,GAAcC,EAAYC,EAAeJ,MAE9C3F,GAAW2F,KACdA,EAAYxF,GAAewF,IAE7BrL,EAAWyL,GAAiBJ,MAI3BrL,EAsBH,SAAUuM,GAAgBC,EAAsBC,GACpD,IAAMC,EAA6B,GAgBnC,OAfID,GACFA,EAAc5J,SAAQ,SAAA5B,GAAO,MAC3B,GAAIuL,EAAUvL,SAAS,QAAL,EAAJA,EAAMyK,WAAG,WAAL,EAAJ,EAAWG,SAAU,CACjC,IAAMc,EAAM5B,GAAcyB,EAAUvL,aAAI,EAAJA,EAAMyK,IAAIG,UAC1Cc,WAAKX,cACPzQ,OAAO0J,KAAK0H,GAAK9J,SAAQ,SAAAzH,GACV,kBAATA,IACJsR,EAAatR,GAAQuR,EAAIvR,OAElB6F,EAAK7F,OACdsR,EAAazL,EAAK7F,MAAQuR,OAK3BD,E,wsEC7JT,IAAIE,GAA6B,KAEjCC,KAAaC,oBAAsB,IAE5B,IAAMC,GAAU,gCAUrB,WAAYC,GAA4B,MAGV,OAHU,WACtC,eACAJ,GAAW,MACXrR,OAAO0R,OAAO,MAAMD,GAAQ,EA8B7B,OA7BA,uBAED,SAAAtR,EAAIU,GACF,OAAO0E,KAAK1E,KACb,iBAED,SAAAqH,EAAIrH,EAAU8Q,GAAQ,WACD,iBAAR9Q,EACT0E,KAAK1E,GAAO8Q,EACY,WAAf,GAAO9Q,IAChBb,OAAO0J,KAAK7I,GAAKyG,SAAQ,SAACzC,GACxB,EAAKA,GAAQhE,EAAIgE,QAGtB,qBAED,SAAA+M,EAAQC,EAAgCC,GAAkC,WACnEpL,MAAMC,QAAQkL,IACnBA,EAAOvK,SAAQ,SAACyK,GAAK,OAAK,EAAKC,GAAGD,EAAOD,QAC1C,uBAED,SAAAG,EAAUJ,EAAgCC,GAAkC,WACrEpL,MAAMC,QAAQkL,IACnBA,EAAOvK,SAAQ,SAACyK,GAAK,OAAK,EAAKG,KAAKH,EAAOD,QAC5C,sBAED,SAAAK,EAASN,EAAgCC,GAAkC,WACpEpL,MAAMC,QAAQkL,IACnBA,EAAOvK,SAAQ,SAACyK,GAAK,OAAK,EAAKK,IAAIL,EAAOD,UAC3C,EA3CoB,CAAQR,MAAlBE,GACJa,YAAc,WAInB,OAHKhB,KACHA,GAAW,IAAIG,IAEVH,I,gsBCAL,SAAUiB,GAAW1O,GACzB,OAAOA,GAAoB,aAAbA,EAAIb,KAGd,SAAUwP,GAAgBnR,EAAgBoR,GAAgB,MACxDC,EAAYrR,SAAkB,QAAT,EAATA,EAAWsR,eAAO,WAAT,EAAT,EAAoBD,UACtC,QAAI/L,MAAMC,QAAQ8L,IACTA,EAAU7B,MAAK,SAAAjR,GAAI,QACxB,OAAOA,EAAEE,OAAS2S,GAA6C,gBAAjC7S,SAAS,QAAR,EAADA,EAAGgT,cAAM,OAAM,QAAN,EAAT,EAAW5P,YAAI,WAAd,EAAD,EAAiB4H,gBAM/C,SAAUiI,GAAoBC,GAAyC,IAAxBC,yDAAiB,QACpE,OAAI/J,EAAa8J,GAAWA,EACrB,IAAE9P,KAAM,OAAQgQ,IAAKD,GAASA,EAASD,GAG1C,SAAUG,GAASH,GACvB,MAAoB,iBAANA,EAGhB,SAASI,GAAmBrP,EAAUsP,GACpC,IAAMC,EAAU,IAChB,OAAO,IAAIrR,SAAQ,SAACC,EAASC,GAC3BoR,YAAW,WACT,IAAMC,EAAQlT,eAAIyD,EAAKsP,GACvB,GAAIG,EACF,OAAOtR,EAAQsR,GAEjBrR,MAPY,QASbsR,OAAM,WACP,OAAOL,GAAmBrP,EAAKsP,MAI7B,SAAUK,GAAa3P,EAAUsP,GACrC,IAAMG,EAAQlT,eAAIyD,EAAKsP,GACvB,OAAIG,EACKvR,QAAQC,QAAQsR,GAElBJ,GAAmBrP,EAAKsP,GAG3B,SAAUM,GAAiBC,EAAaC,GAC5C,SAAKhN,MAAMC,QAAQ8M,KAAU/M,MAAMC,QAAQ+M,MACvCD,EAAK/K,SAAWgL,EAAKhL,QAClB+K,EAAKE,OAAM,SAAA9O,GAAI,OAAI6O,EAAK9J,SAAS/E,OAOnC,SAAU+O,GAASlO,GAA+B,MACvD,QAASA,SAA6B,QAAzB,EAAJA,EAAMmO,cAAcpB,iBAAS,QAA7B,EAA+BqB,UAGpC,SAAUC,GAAiB3Q,GAAsC,IAAtB4Q,yDAAkB,IACjE,OAAOZ,WAAWhQ,EAAI4Q,GAGxB,IAAMC,GAAY,CAChB,SACA,WACA,OACA,QACA,OACA,WAOI,SAAUC,GAAYC,GAC1B,MAAqB,iBAAVA,GACT1Q,QAAQC,KAAK,sQACNuQ,GAAUE,EAAQ,IAEpBA,EAGH,SAAUC,GAAUC,EAAYC,EAAiBjB,GACrD,IAAKgB,EACH,MAAM,IAAIE,MAAM,qBAAD,OAAuBD,GAAQ,OAAGjB,EAAQ,QAAH,OAAWA,EAAK,KAAM,KAI1E,SAAUmB,GAAUC,EAAWH,EAAiBI,GAChDD,GACFhR,QAAQC,KAAK,uBAAgB4Q,IAAaI,EAAa,SAAH,OAAYA,EAAU,aAAc,KAItF,SAAUC,GAAS/Q,GACvB,OAAOA,GAAOA,EAAIjC,MAAQiC,EAAIgR,MAAQhR,EAAIiR,Q,uOC5GtC,SAAUC,GAAsBlR,GACpC,OAAOA,GAAsB,WAAf,GAAOA,GCGjB,SAAUmR,GAAanR,GAC3B,OAAOA,IAAQ,yBAAeA,IAAQqG,GAAiBrG,ICNnD,SAAUoR,GAAU5L,GACxB,MAAuB,iBAATA,ECGV,SAAU6L,GAAgBrR,GAC9B,OAAOA,GAAsB,mBAARA,IAAuBoG,GAAapG,GCFrD,SAAUsR,GAAWtR,GACzB,OAAOA,GAAoB,SAAbA,EAAIb,KCHd,SAAUoS,GAAU/L,GACxB,OAAOA,GAAsB,YAAdA,EAAKrG,KCUhB,SAAUqS,GAAehM,GAC7B,OAAOA,GAAsB,iBAAdA,EAAKrG,MAA4C,aAAjBqG,EAAKiM,Q,uOCVhD,SAAUC,GAAkBlM,GAChC,OAAOA,GAAsB,iBAAdA,EAAKrG,MAA4C,aAAjBqG,EAAKiM,QAGhD,SAAUE,GAAanM,GAC3B,MAAuB,WAAhB,GAAOA,IAAqBA,GAAsB,eAAdA,EAAKrG,MAAyBuS,GAAkBlM,GCNvF,SAAUoM,GAASpM,GACvB,OAAOA,GAAsB,WAAdA,EAAKrG,KCAhB,SAAU0S,GAAuBC,GACrC,MAAO,YAAaA,ECAhB,SAAUC,GAAuBD,GACrC,OAAQD,GAAuBC,GCH3B,SAAUE,GAAaxM,GAC3B,OAAOA,GAAQA,EAAK8G,cCHhB,SAAU2F,GAAgBzM,GAC9B,OAAOA,GAAQA,EAAK0M,e,uOCGhB,SAAUC,GAAenS,GAC7B,OAAOA,GAAsB,WAAf,GAAOA,IAAoB,kBAAmBA,IAAQmR,GAAanR,GCD7E,SAAUoS,GAAcpS,GAC5B,OAAOoF,EAAcpF,KAASsR,GAAWtR,GCHrC,SAAUqS,GAAqBrS,GACnC,OAAOA,GAAOA,EAAIb,OAASmT,IAA0BC,SCDjD,SAAUC,GAAiBxS,GAC/B,OAAOA,GAAOA,EAAIb,OAASmT,IAA0BtJ,KCDjD,SAAUyJ,GAAgBzS,GAC9B,OAAOA,GAAOA,EAAIb,OAASmT,IAA0BC,UAAYvS,EAAIb,OAASmT,IAA0BtJ,KCDpG,SAAU0J,GAAyB1S,GACvC,OAAOA,GAAOA,EAAIb,OAASwT,IAA8BC,SCHrD,SAAUC,GAAO9T,GACrB,OAAOA,GAAQA,EAAK8T,OCAhB,SAAUC,GAAe9S,GAC7B,OAAOA,GAAOA,EAAI2F,QAAU3F,EAAI+S,OCF5B,SAAUC,GAAehT,GAC7B,OAAOA,GAAOA,EAAIgT,e,o7FCIpB,SAASC,GAAWnM,GAClB,GAAqB,WAAjB,GAAOA,IAAgC,OAAVA,EAC/B,OAAOA,EAAM3H,MAAQ2H,EAAMoM,QAAUpM,EAAMqM,SAG/C,SAASC,GAAYtM,GACnB,OAAOA,EAAM3H,MAAuB,cAAf2H,EAAM3H,KAQvB,SAAUkU,GAAsBvM,GACpC,IAAKA,EACH,OAAOA,EAGT,GAAIhE,MAAMC,QAAQ+D,GAChB,OAAOA,EAAM9F,KAAI,SAAAsS,GAAC,OAAID,GAAsBC,MAG9C,IAAKlO,EAAc0B,GACjB,OAAOA,EAImC,UAD5C,GAAIyK,GAAUzK,GACZ,MAAkC,SAA9BA,EAAMnK,MAAM2P,cACP,CACLnN,KAAM,SACNgC,MAAiC,QAAzB,EAAA2F,EAAMnK,MAAMmK,aAAa,aAAzB,EAA2ByM,UACnCtX,KAAgC,QAAzB,EAAA6K,EAAMnK,MAAMmK,aAAa,aAAzB,EAA2B0M,SAClC7W,MAAO0W,GAAsBvM,EAAMnK,MAAMyE,UACzCqS,OAAkC,QAAzB,EAAA3M,EAAMnK,MAAMmK,aAAa,aAAzB,EAA2B4M,YAG/B5M,EAAMnK,MAGjB,GAAI+R,GAAW5H,GACb,MAAO,CACL3H,KAAM,eACNxC,MAAOmK,EAAM6M,SACbC,KAAM9M,EAAMnK,OAGhB,GAAIsW,GAAWnM,GACb,MAAO,CACL3H,KAAM,eACNxC,MAAOmK,EAAMqM,SACb1B,QAAS,YAGb,GAAI2B,GAAYtM,GACd,MAAO,CACL3H,KAAM,eACNxC,MAAO,GAAF,OAAKmK,EAAMrG,GAAE,gBAGtB,IAAMoT,EAAgB,GAYtB,OAXAzX,OAAO0J,KAAKgB,GAAOpD,SAAQ,SAACzG,GACtB,YAAYc,KAAKd,KAAuB,IAAf6J,EAAM7J,KAQnC4W,EAAS5W,GAAOoW,GAAsBvM,EAAM7J,QAEvC4W,EAGH,SAAUC,GAAkBC,EAA+BC,GAC/D,IAAIC,EACJ,GAAIF,EAAOtT,KAAOuT,EAChB,OAAOD,EAET,IAAQ3S,EAAoB2S,EAApB3S,SAAU0F,EAAUiN,EAAVjN,MAElB,GAAIhE,MAAMC,QAAQ3B,GAAW,UACPA,GAAQ,MAA5B,IAAK,EAAL,qBAA8B,KAAnB8S,EAET,GADAD,EAAQH,GADM,QAC4CE,GAC/C,OAAOC,GACnB,+BAEH,OAAI7O,EAAc0B,KAEhBmN,EAAQE,GAA2BrN,EAAOkN,IACxBC,OAHpB,EAOF,SAASE,GAA2BrN,EAAYkN,GAE9C,IADA,IAAIC,EACJ,MAA2B7X,OAAOgY,QAAQtN,GAAM,eAAE,CAA7C,iBAAO7J,EAAG,KAAEN,EAAK,KACpB,GAAIiV,GAASjV,GAAQ,CAEnB,GAAImG,MAAMC,QAAQpG,EAAMA,OAAQ,UACVA,EAAMA,OAAK,MAA/B,IAAK,EAAL,qBAAiC,KAAtBuX,EAET,GADAD,EAAQH,GADM,QAC4CE,GAC/C,OAAOC,GACnB,+BAIH,GADAA,EAAQH,GAAkBnX,EAAMA,MAAgCqX,GACrD,OAAOC,OACb,GAAI7O,EAAczI,KACvBsX,EAAQE,GAA2BxX,EAAOqX,IAC/B,OAAOC,GASlB,SAAUI,GAAgBC,EAAoCC,EAAiBzF,GACnF,IAAIiF,EAAS,MAAKO,GAIlB,OAHKxR,MAAMC,QAAQwR,KACjBA,EAAa,CAACA,IAETA,EAAWC,QAAO,SAACC,EAAkCC,GAC1D,GAAIA,EAASvV,OAASwV,IAAaC,SAAU,CAC3C,IAAMX,EAAQH,GAAkBW,EAAWC,EAASG,QAAQd,OAAOtT,IACnE,IAAKwT,EAAO,OAAOQ,EACnBrY,OAAO0R,OAAOmG,EAAOS,EAASG,QAAQd,aACjC,GAAIW,EAASvV,OAASwV,IAAaG,MAAO,CAC/C,IAAQD,EAAYH,EAAZG,QACAE,EAAqBF,EAArBE,SAAUhB,EAAWc,EAAXd,OACViB,EAAWD,EAAXC,OACFf,EAAQH,GAAkBW,EAAWO,EAAOhB,QAC9CC,IACEnR,MAAMC,QAAQkR,EAAM7S,UACtB6S,EAAM7S,SAAS6T,OAAOD,EAAOjQ,MAAO,EAAGgP,GAC7BE,EAAM7S,WAChB6S,EAAM7S,SAAW,CAAC2S,UAIjB,GAAIW,EAASvV,OAASwV,IAAaO,QAAS,CACjD,IAAQL,EACAE,EACAC,EAFYN,EAAZG,QACAE,SACAC,OACFf,EAAQH,GAAkBW,EAAWO,EAAOhB,QAC9CC,GAASnR,MAAMC,QAAQkR,EAAM7S,WAC/B6S,EAAM7S,SAAS6T,OAAOD,EAAOjQ,MAAO,GAGxC,OAAO0P,IACNV,GC3JE,IAAMoB,GAAiB,SAAjBA,EACXpW,EACAqW,GAEA,GAAKrW,EAGL,OAAIqW,EAAMrW,GACDA,EAGAoW,EAAepW,EAAKsW,YAAaD,IAU/BE,GAAe,SAAfA,EAAgBvW,EAAwBG,GAAuB,QACpEqW,EAAgC,QAArB,EAAGxW,EAAKyW,qBAAa,OAAoB,QAApB,EAAlB,EAAoBtF,SAASuF,iBAAS,WAApB,EAAlB,EAAwCF,YACtDG,EACN,MADwC,mBAAhBH,GAA6BA,EAAYrW,EAAiBH,I,inDChBpF,IAAM4W,GAAiC,CACrCC,OAAQ,EACRC,IAAK,EACLC,KAAM,EACNhW,KAAM,EACNiW,MAAO,GAEHC,GAAgB,CACpB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEIC,GAAqC,CACzCL,MAAO,UACPC,IAAK,UACLC,KAAM,UACNhW,KAAM,UACNiW,MAAO,WAEHG,GAAqC,CACzCN,MAAO,QACPC,IAAK,MACLC,KAAM,OACNhW,KAAM,OACNiW,MAAO,SAEHI,GAAqC,CACzCP,MAAO/V,QAAQgW,IACfA,IAAKhW,QAAQgW,IACbC,KAAMjW,QAAQgW,IACd/V,KAAMD,QAAQC,KACdiW,MAAOlW,QAAQkW,OAGXK,GAA6C,GAE7CC,GAAe,SAAfA,EACFC,GAIW,IAHXC,yDAAsB,OACtBC,EAAe,uCACfC,EAAqB,uCAEjBC,EAAcf,GAAeY,IAAiBZ,GAAeW,GAC7DK,EAAiC,MAAlBF,GAAyBD,EAAQI,QAAQH,IAAkB,EAChF,OAAOC,GAAcC,GAGjBE,GAAS,SAATA,EAAUP,EAAkBE,GAChC,OAAO,WAAmB,2BAAf7W,EAAW,yBAAXA,EAAW,gBACpB,OAAOwW,GAAcG,GAAUQ,MAAMjX,QAASkX,GAAWpX,EAAM6W,EAASF,MAItEU,GAAW,SAAXA,EAAYR,GAChB,IAAKJ,GAAmBI,GAAU,CAChC,IAAMpL,EAAQ4K,GAAc5Z,OAAO0J,KAAKsQ,IAAoBtR,OAASkR,GAAclR,QACnFsR,GAAmBI,GAAWpL,EAEhC,OAAOgL,GAAmBI,IAGtBO,GAAa,SAAbA,EAAcpX,EAAW6W,EAAiBF,GAC9C,IAAMlL,EAAQ4L,GAASR,GACjBS,EAAYhB,GAAWK,GAEvBY,EAAYvX,EAAK,GACnB8L,EAAS,MAAH,OAAS+K,EAAO,eAAON,GAAWI,GAAS,MACrDY,EAAUxT,SAAQ,SAACyT,GACbjS,EAASiS,GACX1L,GAAU,KAEVA,GAAU,QAGd,IAAI2L,EAAgB,CAAC3L,EAAQ,UAAF,OAAYL,GAAK,iBAAc6L,IAE1D,OADAG,EAAgBA,EAAc/V,OAAO6V,IAGjCG,GAAe,SAAfA,EAAgBC,EAAiBxI,GACrC,IAAKwI,EACH,MAAO,CACLhX,MAAOwO,EAAQxO,MACfkW,QAAS1H,EAAQ0H,SAGrB,GAAIc,EAAQV,QAAQ,MAAQ,EAAG,CAC7B,IAAMW,EAAOD,EAAQ1K,MAAM,KAC3B,MAAO,CACLtM,MAAOiX,EAAK,GACZf,QAASe,EAAK,IAAM,KAGxB,MAAO,CACLjX,MAAOgX,EACPd,QAAS,MAIPgB,GAA0B,CAC9BlX,MAAO,OACPkW,QAAS,KAILiB,GAAM,WAIV,WAAY3I,GAAgB,gBAH5B0H,aAAO,OACPC,mBAAa,OACbF,iBAAW,EAETzH,EAAU,SAAK0I,IAAmB1I,GAClC,IAAM4I,EAAY3C,UAAY,GAKxBuC,GAAa,qCAAqCtG,KAAK0G,EAAUnV,OAAU,IAAI,GAC/EoV,EAAgBN,GAAaC,EAASxI,GAC5CnN,KAAK6U,QAAU1H,EAAQ0H,QACvB7U,KAAK8U,cAAgBkB,EAAcnB,QACnC7U,KAAK4U,YAAcoB,EAAcrX,MA+BlC,OA9BA,yBACD,SAAAsV,IACE,GAAKS,GAAa,QAAS1U,KAAK4U,YAAa5U,KAAK6U,QAAS7U,KAAK8U,eAAhE,CAEC,2BAHM9W,EAAW,yBAAXA,EAAW,gBAIlB,OAAOkX,GAAO,QAASlV,KAAK6U,QAArBK,CAA8BlX,MACtC,iBACD,SAAAkW,IACE,GAAKQ,GAAa,MAAO1U,KAAK4U,YAAa5U,KAAK6U,QAAS7U,KAAK8U,eAA9D,CAEC,2BAHI9W,EAAW,yBAAXA,EAAW,gBAIhB,OAAOkX,GAAO,MAAOlV,KAAK6U,QAAnBK,CAA4BlX,MACpC,kBACD,SAAAmW,IACE,GAAKO,GAAa,OAAQ1U,KAAK4U,YAAa5U,KAAK6U,QAAS7U,KAAK8U,eAA/D,CAEC,2BAHK9W,EAAW,yBAAXA,EAAW,gBAIjB,OAAOkX,GAAO,OAAQlV,KAAK6U,QAApBK,CAA6BlX,MACrC,kBACD,SAAAG,IACE,GAAKuW,GAAa,OAAQ1U,KAAK4U,YAAa5U,KAAK6U,QAAS7U,KAAK8U,eAA/D,CAEC,2BAHK9W,EAAW,yBAAXA,EAAW,gBAIjB,OAAOkX,GAAO,OAAQlV,KAAK6U,QAApBK,CAA6BlX,MACrC,mBACD,SAAAoW,IACE,GAAKM,GAAa,QAAS1U,KAAK4U,YAAa5U,KAAK6U,QAAS7U,KAAK8U,eAAhE,CAEC,2BAHM9W,EAAW,yBAAXA,EAAW,gBAIlB,OAAOkX,GAAO,QAASlV,KAAK6U,QAArBK,CAA8BlX,QACtC,EA9CS,GAoDN,SAAUiY,GAAU/J,GACxB,OAAO,IAAI4J,GAAO5J,GCtMpB,IAAMgK,GAAiB,EAIjB,SAAUC,GAASC,EAA4BC,GACnD,QAAKD,EAAWE,SAGZF,EAAGpS,SAAWqS,EAAGrS,QAInBuS,KAAKC,IAAIJ,EAAGK,QAAUJ,EAAGI,QAAS,GAAKF,KAAKC,IAAIJ,EAAGM,QAAUL,EAAGK,QAAS,GAZtD,GCAjB,SAAUC,GAAkBC,GAChC,IAAKA,EACH,OAAO,EAGT,IAAMC,EAAgBD,EAAU3L,MAAM,KACtC,OAAQ4L,EAAc1T,OAAS,GAAK0T,EAAc,GAAG1T,OAAS,ECEhE,IAAM2T,GAAY,CAAC,QAAS,QAAS,SAAU,WAEzCC,GAAW,SACXC,GAAY,cACZC,GAAU,iBACVC,GAAY,mBAGlB,SAASC,GAAYC,GACnB,IAAIC,EAAc,EACdC,EAAa,EACXC,EAAQ,GAad,OAZAH,EAAInM,MAAM,IAAIlJ,SAAQ,SAACyV,EAAMpU,GACd,MAAToU,GACFH,IAEW,MAATG,IACkB,IAAhBH,IACFE,EAAM5X,KAAKyX,EAAIK,UAAUH,EAAYlU,EAAQ,IAC7CkU,EAAalU,EAAQ,GAEvBiU,QAGGE,EAIT,SAAS9J,GAASiK,GAChB,MAAiC,oBAA1B,GAAG3N,SAAS7P,KAAKwd,GAG1B,SAASC,GAAUD,GACjB,OAAOA,EAAIE,QAAQb,IAAU,SAAAc,GAAC,iBAAQA,MAAK7N,cAG7C,SAAS8N,GAASJ,GAChB,OAAOA,EAAIE,QAAQZ,IAAW,SAAC7c,EAAG0d,GAAC,OAAMA,EAAIA,EAAEE,cAAgB,MAQjE,SAASC,GAAaC,GACpB,IAAMb,EAAM,GAIZ,OAHA3c,OAAO0J,KAAK8T,GAASlW,SAAQ,SAACzG,GAC5B8b,EAAIzX,KAAK,KAAD,OAAMrE,EAAG,aAAK2c,EAAQ3c,GAAI,SAE7B8b,EAAIc,KAAK,MAGlB,SAASC,GAAcF,GACrB,IAAKA,EACH,MAAO,GAET,GAAIA,EAAQrS,QAAS,CACnB,IAAMwS,EAAa,GAQnB,OAPA3d,OAAO0J,KAAK8T,GAASlW,SAAQ,SAACsW,GAK5BD,EAAWC,GAJI,UAAXA,EAIiBF,GAAcF,EAAQI,IAHpBJ,EAAQI,MAK1BD,EAGT,IAAMA,EAAa,GAInB,OAHA3d,OAAO0J,KAAK8T,GAASlW,SAAQ,SAACzG,GAC5B8c,EAAWN,GAASxc,IAAQ2c,EAAQ3c,MAE/B8c,EAGT,SAASE,GAAejP,GACtB,IAAKA,EACH,MAAO,GAET,GAAIA,EAAMzD,QAAS,CACjB,IAAMwS,EAAa,GAQnB,OAPA3d,OAAO0J,KAAKkF,GAAOtH,SAAQ,SAACsW,GAK1BD,EAAWC,GAJI,UAAXA,EAIiBC,GAAejP,EAAMgP,IAHnBhP,EAAMgP,MAKxBD,EAGT,IAAMA,EAAa,GAInB,OAHA3d,OAAO0J,KAAKkF,GAAOtH,SAAQ,SAACzG,GAC1B8c,EAAWT,GAAUrc,IAAQ+N,EAAM/N,MAE9B8c,EAIT,SAASG,GAAMN,GACb,IAAKA,EACH,MAAO,eAMT,GAAIA,EAAQrS,QAAS,CACnB,IAAMwR,EAAM,GAcZ,OAbA3c,OAAO0J,KAAK8T,GAASlW,SAAQ,SAACsW,GAC5B,GAAe,UAAXA,EAAJ,CAKA,IAAMvO,EAASgN,GAAU7B,QAAQoD,IAAW,EAAI,IAAM,GACtDjB,EAAIzX,KAAK,QAAD,OACa,YAAX0Y,EAAuB,GAAK,GAAH,OAAMvO,GAAM,OAAGuO,GAAQ,eAC9DL,GAAaM,GAAeL,EAAQI,KAAS,eAPvClX,MAAMC,QAAQ6W,EAAQO,QAAUpB,EAAIzX,KAAKsY,EAAQO,MAAMN,KAAK,UAWzDd,EAAIc,KAAK,MAGlB,MAAO,YAAP,OAEAF,GAAaM,GAAeL,IAAS,SAMvC,SAASQ,GAAarB,GACpB,IAAKA,EACH,MAAO,GAET,IAAMa,EAAU,GACVS,EA4CN,OA5CevB,GAAYC,GACpBrV,SAAQ,SAAC4W,GACd,GAAKA,EAAQC,WAAW,SAGjB,CACL,IAAMC,EAAM,sBAAsBxJ,KAAKsJ,EAAQf,QAAQ,YAAa,IAAIkB,QACxE,GAAID,EAAK,CACP,IAAIR,EAEAQ,EAAI,IAAMA,EAAI,GAAGC,QAAUzN,gBAAKyL,IAAW,SAAAiC,GAAG,OAA4B,IAAxBF,EAAI,GAAG5D,QAAQ8D,MACnEV,EAASQ,EAAI,GAAGC,OACPD,EAAI,IAAMA,EAAI,GAAGC,SAC1BT,EAASQ,EAAI,IAGf,IAAM7c,EAAI,GACV6c,EAAI,GAAG5N,MAAM,KAAK4H,QAAO,SAACmG,EAAMC,GAM9B,OALIA,EAAKhE,QAAQ,WAAa,EAC5B+D,EAAKA,EAAK7V,OAAS,IAAM,IAAJ,OAAQ8V,GAE7BD,EAAKrZ,KAAKsZ,GAELD,IACN,IAAIjX,SAAQ,SAACzC,GACd,GAAIA,GACE4X,GAAU9a,KAAKkD,GAAO,CACxB,IAAM6F,EAAQ7F,EAAK4Z,MAAMhC,IACnB5b,EAAM6J,EAAM,GACZnK,EAAQmK,EAAM,GAChB7J,GAAON,IACTgB,EAAEV,EAAIwd,QAAU9d,EAAM8d,YAMzBT,IACHA,EAAS,WAEXJ,EAAQI,GAAUrc,QArCpBic,EAAQO,MAAQP,EAAQO,OAAS,GACjCP,EAAQO,MAAM7Y,KAAKgZ,EAAQG,WAwCxBb,EAGT,SAASkB,GAAW/B,GAClB,IACE,OAAI3J,GAAS2J,GACJe,GAAcM,GAAarB,GAAKxR,SAErCwR,EAAIxR,QACCuS,GAAcG,GAAelB,EAAIxR,UAEnCuS,GAAcG,GAAelB,IACpC,MAAO7Z,IAGT,MAAO,G,07BC5MyB,IAE5B6b,GAwBOC,GAAqB,IAxBV,4CACtBC,QAAU,IAAIvN,KAAc,KAE5BwN,mBAAqB,SAAC1b,GAA6F,IAA7EL,yDAAkCgc,IAA0BC,QAChG,EAAKH,QAAQI,KAAK,IAAD,OAAKlc,EAAI,sBAC1Bmc,uBAAY9b,GACZ,EAAKyb,QAAQI,KAAK,IAAD,OAAKlc,EAAI,qBAC3B,KAEDoc,mBAAqB,SAAC/b,GAAmG,IAAnFL,yDAAkCgc,IAA0BC,QAEhG,OADA,EAAKH,QAAQ7M,GAAG,IAAD,OAAKjP,EAAI,qBAAqBK,GACtC,WACL,EAAKyb,QAAQzM,IAAI,IAAD,OAAKrP,EAAI,qBAAqBK,KAEjD,KAEDgc,iBAAmB,SAAChc,GAAmG,IAAnFL,yDAAkCgc,IAA0BC,QAE9F,OADA,EAAKH,QAAQ7M,GAAG,IAAD,OAAKjP,EAAI,mBAAmBK,GACpC,WACL,EAAKyb,QAAQzM,IAAI,IAAD,OAAKrP,EAAI,mBAAmBK,U,6BCvBlD,oEAgBA,IAAIic,EAAgB,SAASzf,EAAG0f,GAI5B,OAHAD,EAAgBrf,OAAO2N,gBAClB,CAAEnB,UAAW,cAAgB9F,OAAS,SAAU9G,EAAG0f,GAAK1f,EAAE4M,UAAY8S,IACvE,SAAU1f,EAAG0f,GAAK,IAAK,IAAIhe,KAAKge,EAAOtf,OAAOoB,UAAUC,eAAe5B,KAAK6f,EAAGhe,KAAI1B,EAAE0B,GAAKge,EAAEhe,MAC3E1B,EAAG0f,IAGrB,SAASC,EAAU3f,EAAG0f,GACzB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIE,UAAU,uBAAyBC,OAAOH,GAAK,iCAE7D,SAASI,IAAOna,KAAKoa,YAAc/f,EADnCyf,EAAczf,EAAG0f,GAEjB1f,EAAEwB,UAAkB,OAANke,EAAatf,OAAOY,OAAO0e,IAAMI,EAAGte,UAAYke,EAAEle,UAAW,IAAIse,GAG5E,IAAIE,EAAW,WAQlB,OAPAA,EAAW5f,OAAO0R,QAAU,SAASkO,EAASpf,GAC1C,IAAK,IAAIe,EAAGjC,EAAI,EAAGyB,EAAI8e,UAAUnX,OAAQpJ,EAAIyB,EAAGzB,IAE5C,IAAK,IAAIgC,KADTC,EAAIse,UAAUvgB,GACOU,OAAOoB,UAAUC,eAAe5B,KAAK8B,EAAGD,KAAId,EAAEc,GAAKC,EAAED,IAE9E,OAAOd,IAEKka,MAAMnV,KAAMsa,YAGzB,SAASC,EAAOve,EAAGuB,GACtB,IAAItC,EAAI,GACR,IAAK,IAAIc,KAAKC,EAAOvB,OAAOoB,UAAUC,eAAe5B,KAAK8B,EAAGD,IAAMwB,EAAE0X,QAAQlZ,GAAK,IAC9Ed,EAAEc,GAAKC,EAAED,IACb,GAAS,MAALC,GAAqD,mBAAjCvB,OAAO+f,sBAC3B,IAAK,IAAIzgB,EAAI,EAAGgC,EAAItB,OAAO+f,sBAAsBxe,GAAIjC,EAAIgC,EAAEoH,OAAQpJ,IAC3DwD,EAAE0X,QAAQlZ,EAAEhC,IAAM,GAAKU,OAAOoB,UAAU4e,qBAAqBvgB,KAAK8B,EAAGD,EAAEhC,MACvEkB,EAAEc,EAAEhC,IAAMiC,EAAED,EAAEhC,KAE1B,OAAOkB,EAGJ,SAASyf,EAAWC,EAAY3W,EAAQ1I,EAAK6U,GAChD,IAAI/V,EAAIkgB,UAAUnX,OAAQtI,EAAIT,EAAI,EAAI4J,EAAkB,OAATmM,EAAgBA,EAAO1V,OAAOmgB,yBAAyB5W,EAAQ1I,GAAO6U,EAAM9V,EAC3H,GAAuB,iBAAZwgB,SAAoD,mBAArBA,QAAQC,SAAyBjgB,EAAIggB,QAAQC,SAASH,EAAY3W,EAAQ1I,EAAK6U,QACpH,IAAK,IAAIpW,EAAI4gB,EAAWxX,OAAS,EAAGpJ,GAAK,EAAGA,KAASM,EAAIsgB,EAAW5gB,MAAIc,GAAKT,EAAI,EAAIC,EAAEQ,GAAKT,EAAI,EAAIC,EAAE2J,EAAQ1I,EAAKT,GAAKR,EAAE2J,EAAQ1I,KAAST,GAChJ,OAAOT,EAAI,GAAKS,GAAKJ,OAAOC,eAAesJ,EAAQ1I,EAAKT,GAAIA,EAGzD,SAASkgB,EAAQC,EAAYC,GAChC,OAAO,SAAUjX,EAAQ1I,GAAO2f,EAAUjX,EAAQ1I,EAAK0f,IAGpD,SAASE,EAAaC,EAAMC,EAAcT,EAAYU,EAAWC,EAAcC,GAClF,SAASC,EAAOC,GAAK,QAAU,IAANA,GAA6B,mBAANA,EAAkB,MAAM,IAAIxB,UAAU,qBAAsB,OAAOwB,EAKnH,IAJA,IAAIC,EAAOL,EAAUK,KAAMpgB,EAAe,WAATogB,EAAoB,MAAiB,WAATA,EAAoB,MAAQ,QACrF1X,GAAUoX,GAAgBD,EAAOE,EAAkB,OAAIF,EAAOA,EAAKtf,UAAY,KAC/E8f,EAAaP,IAAiBpX,EAASvJ,OAAOmgB,yBAAyB5W,EAAQqX,EAAU/gB,MAAQ,IACjGshB,EAAGC,GAAO,EACL9hB,EAAI4gB,EAAWxX,OAAS,EAAGpJ,GAAK,EAAGA,IAAK,CAC7C,IAAI+hB,EAAU,GACd,IAAK,IAAI/f,KAAKsf,EAAWS,EAAQ/f,GAAW,WAANA,EAAiB,GAAKsf,EAAUtf,GACtE,IAAK,IAAIA,KAAKsf,EAAUU,OAAQD,EAAQC,OAAOhgB,GAAKsf,EAAUU,OAAOhgB,GACrE+f,EAAQE,eAAiB,SAAUP,GAAK,GAAII,EAAM,MAAM,IAAI5B,UAAU,0DAA2DsB,EAAkB5b,KAAK6b,EAAOC,GAAK,QACpK,IAAIQ,GAAS,EAAItB,EAAW5gB,IAAa,aAAT2hB,EAAsB,CAAE9gB,IAAK+gB,EAAW/gB,IAAK+H,IAAKgZ,EAAWhZ,KAAQgZ,EAAWrgB,GAAMwgB,GACtH,GAAa,aAATJ,EAAqB,CACrB,QAAe,IAAXO,EAAmB,SACvB,GAAe,OAAXA,GAAqC,iBAAXA,EAAqB,MAAM,IAAIhC,UAAU,oBACnE2B,EAAIJ,EAAOS,EAAOrhB,QAAM+gB,EAAW/gB,IAAMghB,IACzCA,EAAIJ,EAAOS,EAAOtZ,QAAMgZ,EAAWhZ,IAAMiZ,IACzCA,EAAIJ,EAAOS,EAAOC,QAAOZ,EAAa3b,KAAKic,QAE1CA,EAAIJ,EAAOS,MACH,UAATP,EAAkBJ,EAAa3b,KAAKic,GACnCD,EAAWrgB,GAAOsgB,GAG3B5X,GAAQvJ,OAAOC,eAAesJ,EAAQqX,EAAU/gB,KAAMqhB,GAC1DE,GAAO,EAGJ,SAASM,EAAkBC,EAASd,EAActgB,GAErD,IADA,IAAIqhB,EAAW/B,UAAUnX,OAAS,EACzBpJ,EAAI,EAAGA,EAAIuhB,EAAanY,OAAQpJ,IACrCiB,EAAQqhB,EAAWf,EAAavhB,GAAGG,KAAKkiB,EAASphB,GAASsgB,EAAavhB,GAAGG,KAAKkiB,GAEnF,OAAOC,EAAWrhB,OAAQ,EAGvB,SAASshB,EAAUC,GACtB,MAAoB,iBAANA,EAAiBA,EAAI,GAAG7c,OAAO6c,GAG1C,SAASC,EAAkBf,EAAGnhB,EAAMwP,GAEvC,MADoB,iBAATxP,IAAmBA,EAAOA,EAAKmiB,YAAc,IAAI/c,OAAOpF,EAAKmiB,YAAa,KAAO,IACrFhiB,OAAOC,eAAe+gB,EAAG,OAAQ,CAAEiB,cAAc,EAAM1hB,MAAO8O,EAAS,GAAGpK,OAAOoK,EAAQ,IAAKxP,GAAQA,IAG1G,SAASqiB,EAAWC,EAAaC,GACpC,GAAuB,iBAAZhC,SAAoD,mBAArBA,QAAQiC,SAAyB,OAAOjC,QAAQiC,SAASF,EAAaC,GAG7G,SAASE,EAAUX,EAASY,EAAYC,EAAGC,GAC9C,SAASC,EAAMniB,GAAS,OAAOA,aAAiBiiB,EAAIjiB,EAAQ,IAAIiiB,GAAE,SAAUzgB,GAAWA,EAAQxB,MAC/F,OAAO,IAAKiiB,IAAMA,EAAI1gB,WAAU,SAAUC,EAASC,GAC/C,SAAS2gB,EAAUpiB,GAAS,IAAMqiB,EAAKH,EAAUjE,KAAKje,IAAW,MAAOuC,GAAKd,EAAOc,IACpF,SAAS+f,EAAStiB,GAAS,IAAMqiB,EAAKH,EAAiB,MAAEliB,IAAW,MAAOuC,GAAKd,EAAOc,IACvF,SAAS8f,EAAKpB,GAAUA,EAAOJ,KAAOrf,EAAQyf,EAAOjhB,OAASmiB,EAAMlB,EAAOjhB,OAAOiI,KAAKma,EAAWE,GAClGD,GAAMH,EAAYA,EAAU/H,MAAMiH,EAASY,GAAc,KAAK/D,WAI/D,SAASsE,EAAYnB,EAASoB,GACjC,IAAI5B,EAAI,CAAE6B,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPziB,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO0iB,KAAM,GAAIC,IAAK,IAAMnC,EAAGoC,EAAG5iB,EAAG6iB,EAC/G,OAAOA,EAAI,CAAE7E,KAAM8E,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXjjB,SAA0BgjB,EAAEhjB,OAAOkjB,UAAY,WAAa,OAAOhe,OAAU8d,EACvJ,SAASC,EAAKviB,GAAK,OAAO,SAAU8R,GAAK,OAAO+P,EAAK,CAAC7hB,EAAG8R,KACzD,SAAS+P,EAAKY,GACV,GAAIxC,EAAG,MAAM,IAAIxB,UAAU,mCAC3B,KAAO6D,IAAMA,EAAI,EAAGG,EAAG,KAAOrC,EAAI,IAAKA,GAAG,IACtC,GAAIH,EAAI,EAAGoC,IAAM5iB,EAAY,EAARgjB,EAAG,GAASJ,EAAU,OAAII,EAAG,GAAKJ,EAAS,SAAO5iB,EAAI4iB,EAAU,SAAM5iB,EAAEf,KAAK2jB,GAAI,GAAKA,EAAE5E,SAAWhe,EAAIA,EAAEf,KAAK2jB,EAAGI,EAAG,KAAKpC,KAAM,OAAO5gB,EAE3J,OADI4iB,EAAI,EAAG5iB,IAAGgjB,EAAK,CAAS,EAARA,EAAG,GAAQhjB,EAAED,QACzBijB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGhjB,EAAIgjB,EAAI,MACxB,KAAK,EAAc,OAAXrC,EAAE6B,QAAgB,CAAEziB,MAAOijB,EAAG,GAAIpC,MAAM,GAChD,KAAK,EAAGD,EAAE6B,QAASI,EAAII,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKrC,EAAEgC,IAAIM,MAAOtC,EAAE+B,KAAKO,MAAO,SACxC,QACI,KAAMjjB,EAAI2gB,EAAE+B,MAAM1iB,EAAIA,EAAEkI,OAAS,GAAKlI,EAAEA,EAAEkI,OAAS,KAAkB,IAAV8a,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAErC,EAAI,EAAG,SACjG,GAAc,IAAVqC,EAAG,MAAchjB,GAAMgjB,EAAG,GAAKhjB,EAAE,IAAMgjB,EAAG,GAAKhjB,EAAE,IAAM,CAAE2gB,EAAE6B,MAAQQ,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYrC,EAAE6B,MAAQxiB,EAAE,GAAI,CAAE2gB,EAAE6B,MAAQxiB,EAAE,GAAIA,EAAIgjB,EAAI,MAC7D,GAAIhjB,GAAK2gB,EAAE6B,MAAQxiB,EAAE,GAAI,CAAE2gB,EAAE6B,MAAQxiB,EAAE,GAAI2gB,EAAEgC,IAAIje,KAAKse,GAAK,MACvDhjB,EAAE,IAAI2gB,EAAEgC,IAAIM,MAChBtC,EAAE+B,KAAKO,MAAO,SAEtBD,EAAKT,EAAKtjB,KAAKkiB,EAASR,GAC1B,MAAOre,GAAK0gB,EAAK,CAAC,EAAG1gB,GAAIsgB,EAAI,EAAK,QAAUpC,EAAIxgB,EAAI,EACtD,GAAY,EAARgjB,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEjjB,MAAOijB,EAAG,GAAKA,EAAG,QAAK,EAAQpC,MAAM,IAI3E,IAAIsC,EAAkB1jB,OAAOY,OAAS,SAAUb,EAAGL,EAAGwX,EAAGyM,QACjD9d,IAAP8d,IAAkBA,EAAKzM,GAC3B,IAAIxB,EAAO1V,OAAOmgB,yBAAyBzgB,EAAGwX,GACzCxB,KAAS,QAASA,GAAQhW,EAAEgB,WAAagV,EAAKkO,UAAYlO,EAAKuM,gBAChEvM,EAAO,CAAExV,YAAY,EAAMC,IAAK,WAAa,OAAOT,EAAEwX,MAE1DlX,OAAOC,eAAeF,EAAG4jB,EAAIjO,IAC5B,SAAU3V,EAAGL,EAAGwX,EAAGyM,QACT9d,IAAP8d,IAAkBA,EAAKzM,GAC3BnX,EAAE4jB,GAAMjkB,EAAEwX,IAGP,SAAS2M,EAAankB,EAAGK,GAC5B,IAAK,IAAIuB,KAAK5B,EAAa,YAAN4B,GAAoBtB,OAAOoB,UAAUC,eAAe5B,KAAKM,EAAGuB,IAAIoiB,EAAgB3jB,EAAGL,EAAG4B,GAGxG,SAASwiB,EAAS/jB,GACrB,IAAIwB,EAAsB,mBAAXlB,QAAyBA,OAAOkjB,SAAU7jB,EAAI6B,GAAKxB,EAAEwB,GAAIjC,EAAI,EAC5E,GAAII,EAAG,OAAOA,EAAED,KAAKM,GACrB,GAAIA,GAAyB,iBAAbA,EAAE2I,OAAqB,MAAO,CAC1C8V,KAAM,WAEF,OADIze,GAAKT,GAAKS,EAAE2I,SAAQ3I,OAAI,GACrB,CAAEQ,MAAOR,GAAKA,EAAET,KAAM8hB,MAAOrhB,KAG5C,MAAM,IAAIyf,UAAUje,EAAI,0BAA4B,mCAGjD,SAASwiB,EAAOhkB,EAAGgB,GACtB,IAAIrB,EAAsB,mBAAXW,QAAyBN,EAAEM,OAAOkjB,UACjD,IAAK7jB,EAAG,OAAOK,EACf,IAAIT,EAAII,EAAED,KAAKM,GAAIK,EAAG4jB,EAAK,GAAIlhB,EAC/B,IACI,WAAc,IAAN/B,GAAgBA,KAAM,MAAQX,EAAId,EAAEkf,QAAQ4C,MAAM4C,EAAG9e,KAAK9E,EAAEG,OAExE,MAAOoZ,GAAS7W,EAAI,CAAE6W,MAAOA,GAC7B,QACI,IACQvZ,IAAMA,EAAEghB,OAAS1hB,EAAIJ,EAAU,SAAII,EAAED,KAAKH,GAElD,QAAU,GAAIwD,EAAG,MAAMA,EAAE6W,OAE7B,OAAOqK,EAIJ,SAASC,IACZ,IAAK,IAAID,EAAK,GAAI1kB,EAAI,EAAGA,EAAIugB,UAAUnX,OAAQpJ,IAC3C0kB,EAAKA,EAAG/e,OAAO8e,EAAOlE,UAAUvgB,KACpC,OAAO0kB,EAIJ,SAASE,IACZ,IAAK,IAAI3iB,EAAI,EAAGjC,EAAI,EAAG6kB,EAAKtE,UAAUnX,OAAQpJ,EAAI6kB,EAAI7kB,IAAKiC,GAAKse,UAAUvgB,GAAGoJ,OAC7E,IAAK,IAAItI,EAAIsG,MAAMnF,GAAI2V,EAAI,EAAG5X,EAAI,EAAGA,EAAI6kB,EAAI7kB,IACzC,IAAK,IAAI8kB,EAAIvE,UAAUvgB,GAAI+kB,EAAI,EAAGC,EAAKF,EAAE1b,OAAQ2b,EAAIC,EAAID,IAAKnN,IAC1D9W,EAAE8W,GAAKkN,EAAEC,GACjB,OAAOjkB,EAGJ,SAASmkB,EAAcC,EAAIC,EAAMC,GACpC,GAAIA,GAA6B,IAArB7E,UAAUnX,OAAc,IAAK,IAAIpJ,EAAI,EAAGC,EAAIklB,EAAK/b,OAAQsb,EAAI1kB,EAAIC,EAAGD,KACxE0kB,GAAQ1kB,KAAKmlB,IACRT,IAAIA,EAAKtd,MAAMtF,UAAUujB,MAAMllB,KAAKglB,EAAM,EAAGnlB,IAClD0kB,EAAG1kB,GAAKmlB,EAAKnlB,IAGrB,OAAOklB,EAAGvf,OAAO+e,GAAMtd,MAAMtF,UAAUujB,MAAMllB,KAAKglB,IAG/C,SAASG,EAAQ/R,GACpB,OAAOtN,gBAAgBqf,GAAWrf,KAAKsN,EAAIA,EAAGtN,MAAQ,IAAIqf,EAAQ/R,GAG/D,SAASgS,EAAiBlD,EAASY,EAAYE,GAClD,IAAKpiB,OAAOykB,cAAe,MAAM,IAAItF,UAAU,wCAC/C,IAAI6D,EAAIZ,EAAU/H,MAAMiH,EAASY,GAAc,IAAKjjB,EAAGylB,EAAI,GAC3D,OAAOzlB,EAAI,GAAIgkB,EAAK,QAASA,EAAK,SAAUA,EAAK,UAAWhkB,EAAEe,OAAOykB,eAAiB,WAAc,OAAOvf,MAASjG,EACpH,SAASgkB,EAAKviB,GAASsiB,EAAEtiB,KAAIzB,EAAEyB,GAAK,SAAU8R,GAAK,OAAO,IAAI/Q,SAAQ,SAAUsiB,EAAG9E,GAAKyF,EAAE7f,KAAK,CAACnE,EAAG8R,EAAGuR,EAAG9E,IAAM,GAAK0F,EAAOjkB,EAAG8R,QAC9H,SAASmS,EAAOjkB,EAAG8R,GAAK,IAAM+P,EAAKS,EAAEtiB,GAAG8R,IAAO,MAAO/P,GAAKmiB,EAAOF,EAAE,GAAG,GAAIjiB,IAC3E,SAAS8f,EAAKxiB,GAAKA,EAAEG,iBAAiBqkB,EAAU9iB,QAAQC,QAAQ3B,EAAEG,MAAMsS,GAAGrK,KAAK0c,EAASljB,GAAUijB,EAAOF,EAAE,GAAG,GAAI3kB,GACnH,SAAS8kB,EAAQ3kB,GAASykB,EAAO,OAAQzkB,GACzC,SAASyB,EAAOzB,GAASykB,EAAO,QAASzkB,GACzC,SAAS0kB,EAAOjE,EAAGnO,GAASmO,EAAEnO,GAAIkS,EAAEI,QAASJ,EAAErc,QAAQsc,EAAOD,EAAE,GAAG,GAAIA,EAAE,GAAG,KAGzE,SAASK,EAAiBrlB,GAC7B,IAAIT,EAAGgC,EACP,OAAOhC,EAAI,GAAIgkB,EAAK,QAASA,EAAK,SAAS,SAAUxgB,GAAK,MAAMA,KAAOwgB,EAAK,UAAWhkB,EAAEe,OAAOkjB,UAAY,WAAc,OAAOhe,MAASjG,EAC1I,SAASgkB,EAAKviB,EAAGigB,GAAK1hB,EAAEyB,GAAKhB,EAAEgB,GAAK,SAAU8R,GAAK,OAAQvR,GAAKA,GAAK,CAAEf,MAAOqkB,EAAQ7kB,EAAEgB,GAAG8R,IAAKuO,MAAM,GAAUJ,EAAIA,EAAEnO,GAAKA,GAAOmO,GAG/H,SAASqE,EAActlB,GAC1B,IAAKM,OAAOykB,cAAe,MAAM,IAAItF,UAAU,wCAC/C,IAAI9f,EAAIK,EAAEM,OAAOykB,eAAgBxlB,EACjC,OAAOI,EAAIA,EAAED,KAAKM,IAAMA,EAAqC+jB,EAAS/jB,GAA2BT,EAAI,GAAIgkB,EAAK,QAASA,EAAK,SAAUA,EAAK,UAAWhkB,EAAEe,OAAOykB,eAAiB,WAAc,OAAOvf,MAASjG,GAC9M,SAASgkB,EAAKviB,GAAKzB,EAAEyB,GAAKhB,EAAEgB,IAAM,SAAU8R,GAAK,OAAO,IAAI/Q,SAAQ,SAAUC,EAASC,GAAuBijB,EAAOljB,EAASC,GAA7B6Q,EAAI9S,EAAEgB,GAAG8R,IAA8BuO,KAAMvO,EAAEtS,WAChJ,SAAS0kB,EAAOljB,EAASC,EAAQpC,EAAGiT,GAAK/Q,QAAQC,QAAQ8Q,GAAGrK,MAAK,SAASqK,GAAK9Q,EAAQ,CAAExB,MAAOsS,EAAGuO,KAAMxhB,MAASoC,IAG/G,SAASsjB,EAAqBC,EAAQC,GAEzC,OADIxlB,OAAOC,eAAkBD,OAAOC,eAAeslB,EAAQ,MAAO,CAAEhlB,MAAOilB,IAAiBD,EAAOC,IAAMA,EAClGD,EAGX,IAAIE,EAAqBzlB,OAAOY,OAAS,SAAUb,EAAG8S,GAClD7S,OAAOC,eAAeF,EAAG,UAAW,CAAEG,YAAY,EAAMK,MAAOsS,KAC9D,SAAS9S,EAAG8S,GACb9S,EAAW,QAAI8S,GAGZ,SAAS6S,EAAaC,GACzB,GAAIA,GAAOA,EAAIjlB,WAAY,OAAOilB,EAClC,IAAInE,EAAS,GACb,GAAW,MAAPmE,EAAa,IAAK,IAAIzO,KAAKyO,EAAe,YAANzO,GAAmBlX,OAAOoB,UAAUC,eAAe5B,KAAKkmB,EAAKzO,IAAIwM,EAAgBlC,EAAQmE,EAAKzO,GAEtI,OADAuO,EAAmBjE,EAAQmE,GACpBnE,EAGJ,SAASoE,EAAgBD,GAC5B,OAAQA,GAAOA,EAAIjlB,WAAcilB,EAAM,CAAExa,QAASwa,GAG/C,SAASE,EAAuBC,EAAU5Z,EAAO+U,EAAMD,GAC1D,GAAa,MAATC,IAAiBD,EAAG,MAAM,IAAIxB,UAAU,iDAC5C,GAAqB,mBAAVtT,EAAuB4Z,IAAa5Z,IAAU8U,GAAK9U,EAAMF,IAAI8Z,GAAW,MAAM,IAAItG,UAAU,4EACvG,MAAgB,MAATyB,EAAeD,EAAa,MAATC,EAAeD,EAAEvhB,KAAKqmB,GAAY9E,EAAIA,EAAEzgB,MAAQ2L,EAAM/L,IAAI2lB,GAGjF,SAASC,EAAuBD,EAAU5Z,EAAO3L,EAAO0gB,EAAMD,GACjE,GAAa,MAATC,EAAc,MAAM,IAAIzB,UAAU,kCACtC,GAAa,MAATyB,IAAiBD,EAAG,MAAM,IAAIxB,UAAU,iDAC5C,GAAqB,mBAAVtT,EAAuB4Z,IAAa5Z,IAAU8U,GAAK9U,EAAMF,IAAI8Z,GAAW,MAAM,IAAItG,UAAU,2EACvG,MAAiB,MAATyB,EAAeD,EAAEvhB,KAAKqmB,EAAUvlB,GAASygB,EAAIA,EAAEzgB,MAAQA,EAAQ2L,EAAMhE,IAAI4d,EAAUvlB,GAASA,EAGjG,SAASylB,EAAsB9Z,EAAO4Z,GACzC,GAAiB,OAAbA,GAA0C,iBAAbA,GAA6C,mBAAbA,EAA0B,MAAM,IAAItG,UAAU,0CAC/G,MAAwB,mBAAVtT,EAAuB4Z,IAAa5Z,EAAQA,EAAMF,IAAI8Z,K,yhBClS7DG,ECCC1N,ECFAxR,E,4CFEZ,SAAWkf,GAEPA,EAAiC,QAAI,OAErCA,EAAiC,QAAI,UAErCA,EAAgC,OAAI,SAEpCA,EAA+B,MAAI,QARvC,CASGA,IAA4BA,EAA0B,KCTzD,SAAY1N,GACVA,gBACAA,oBACAA,sBACAA,wBAJF,CAAYA,MAAY,KCFxB,SAAYxR,GAEVA,iCAEAA,yBAEAA,qBAEAA,yBAEAA,+BAEAA,iBAZF,CAAYA,MAAU,KAef,IAAMM,EAAc,CACzBN,EAAWS,YACXT,EAAWU,QACXV,EAAWW,MACXX,EAAWY,QACXZ,EAAWmf,WACXnf,EAAWC,KAKDlD,GAAZ,SAAYA,GACVA,gBACAA,kBACAA,oBACAA,kBACAA,kBALF,CAAYA,MAAS,KCdd,IAAMqiB,EAAS,mBAGTC,EAAc,wBCNdC,EAAW,0BCNZ9P,EAQA+P,ECJAC,ECNAxH,EAQAyH,ECTAC,EAWAC,ECVAxQ,EASAyQ,ECTAC,EAcAC,E,qOCVN,SAAU/R,EAAsBlR,GACpC,OAAOA,GAAsB,WAAf,EAAOA,INHvB,SAAY2S,GACVA,sBACAA,cAFF,CAAYA,MAA6B,KAQzC,SAAY+P,GACVA,sBACAA,cAFF,CAAYA,MAAkB,KCJlBC,MAAqB,ICNjC,SAAYxH,GAEVA,yBAFF,CAAYA,MAAyB,KAQrC,SAAYyH,GAEVA,yBAFF,CAAYA,MAAc,KCT1B,SAAYC,GACVA,kBACAA,sBACAA,cACAA,gBACAA,cACAA,oBANF,CAAYA,MAAyB,KAWrC,SAAYC,GACVA,kBACAA,sBACAA,cACAA,gBACAA,cACAA,oBANF,CAAYA,MAAc,KCV1B,SAAYxQ,GAEVA,cACAA,sBAHF,CAAYA,MAAyB,KASrC,SAAYyQ,GACVA,cACAA,sBAFF,CAAYA,MAAc,KCT1B,SAAYC,GAIVA,wBAIAA,sCARF,CAAYA,MAA+B,KAc3C,SAAYC,GAIVA,wBAIAA,sCARF,CAAYA,MAAuB,K,WEV7B,SAAU7c,EAAapG,GAC3B,OAAOA,GAAOA,EAAIxC,YAAcwC,EAAIxC,UAAU6I,kBAAoBrG,EAAIxC,qBAAqB8I,aCAvF,SAAUD,EAAiBrG,GAC/B,OAAOA,IAAQoG,EAAapG,IAAuB,mBAARA,GCAvC,SAAUmR,EAAanR,GAC3B,OAAOA,IAAQ,yBAAeA,IAAQqG,EAAiBrG,ICHnD,SAAUoR,EAAU5L,GACxB,MAAuB,iBAATA,ECAV,SAAU6L,EAAgBrR,GAC9B,OAAOA,GAAsB,mBAARA,IAAuBoG,EAAapG,GCHrD,SAAUsR,EAAWtR,GACzB,OAAOA,GAAoB,SAAbA,EAAIb,KCAd,SAAUoS,EAAU/L,GACxB,OAAOA,GAAsB,YAAdA,EAAKrG,KCDhB,SAAUqS,EAAehM,GAC7B,OAAOA,GAAsB,iBAAdA,EAAKrG,MAA4C,aAAjBqG,EAAKiM,Q,qOCDhD,SAAUE,EAAauM,GAC3B,MAAoB,WAAb,EAAOA,IAAkBA,GAAgB,eAAXA,EAAE/e,KCDnC,SAAUyS,EAASpM,GACvB,OAAOA,GAAsB,WAAdA,EAAKrG,KCDhB,SAAU0S,EAAuBC,GACrC,MAAO,YAAaA,ECAhB,SAAUC,EAAuBD,GACrC,OAAQD,EAAuBC,GCF3B,SAAUE,EAAaxM,GAC3B,OAAOA,GAAQA,EAAK8G,c,qOCHhB,SAAUlH,EAAczI,GAC5B,GAAqB,WAAjB,EAAOA,GACT,OAAO,EAET,IAAM0I,EAAQjJ,OAAOkJ,eAAe3I,GACpC,OAAO0I,IAAUjJ,OAAOoB,WAAuB,OAAV6H,GAAmD,OAAjCjJ,OAAOkJ,eAAeD,GCLzE,SAAU4M,EAAgBzM,GAC9B,OAAOA,GAAQA,EAAK0M,e,qOCEhB,SAAUC,EAAenS,GAC7B,OAAOA,GAAsB,WAAf,EAAOA,IAAoB,kBAAmBA,IAAQmR,EAAanR,GCA7E,SAAUoS,EAAcpS,GAC5B,OAAOoF,EAAcpF,KAASsR,EAAWtR,K,gBCR3C;;;;;GAOC,WACA,aAEA,IAAIkjB,EAAS,GAAGzlB,eACZ0lB,EAAmB,gBAEvB,SAASC,IAGR,IAFA,IAAIC,EAAU,GAEL3nB,EAAI,EAAGA,EAAIugB,UAAUnX,OAAQpJ,IAAK,CAC1C,IAAIyb,EAAM8E,UAAUvgB,GACpB,GAAKyb,EAAL,CAEA,IAAImM,SAAiBnM,EAErB,GAAgB,WAAZmM,GAAoC,WAAZA,EAC3BD,EAAQ/hB,KAAK6V,QACP,GAAIrU,MAAMC,QAAQoU,IACxB,GAAIA,EAAIrS,OAAQ,CACf,IAAIye,EAAQH,EAAWtM,MAAM,KAAMK,GAC/BoM,GACHF,EAAQ/hB,KAAKiiB,SAGT,GAAgB,WAAZD,EAAsB,CAChC,GAAInM,EAAIzL,WAAatP,OAAOoB,UAAUkO,WAAayL,EAAIzL,SAASA,WAAW1F,SAAS,iBAAkB,CACrGqd,EAAQ/hB,KAAK6V,EAAIzL,YACjB,SAGD,IAAK,IAAIzO,KAAOka,EACX+L,EAAOrnB,KAAKsb,EAAKla,IAAQka,EAAIla,IAChComB,EAAQ/hB,KAAKrE,KAMjB,OAAOomB,EAAQxJ,KAAK,KAGgB1e,EAAOD,SAC3CkoB,EAAW7b,QAAU6b,EACrBjoB,EAAOD,QAAUkoB,QAKhB,KAFwB,EAAF,WACtB,OAAOA,GACP,QAFD,EAAqB,OAEpB,aAhDH,I,6BCPA,wjGAAII,EACC,6FADDA,EAEC,SAASjG,EAAEkG,EAAgBxmB,GAC5B,MAAO,iBAAmBwmB,EAAiB,SAAWxmB,EAAIyO,WAAa,uBAHvE8X,EAgBC,yEAhBDA,EAiBC,2EAjBDA,EAkBC,sEAlBDA,EAmBC,kEAnBDA,EAoBC,qEApBDA,EAqBE,kEArBFA,EAsBE,kEAtBFA,EAuBE,qBAvBFA,EAwBE,2KAxBFA,EAyBE,8DAzBFA,EA0BE,kKA1BFA,EA2BE,qFA3BFA,EA4BE,SAASjG,EAAExY,EAAOD,GACpB,MAAO,qCAAuCC,EAAQ,mBAAqBD,GA7B3E0e,EA+BE,qGA/BFA,EAgCE,SAASjG,EAAEmG,GACb,MAAO,yDAA2DA,EAAM3H,YAAY9f,MAjCpFunB,EAmCE,SAASjG,EAAEmG,GACb,MAAO,8BAAgCA,GApCvCF,EAsCE,SAASjG,EAAEoG,GACb,MAAO,+BAAiCA,EAAgB,KAvCxDH,EAyCE,qGAzCFA,EA0CE,oDA1CFA,EA2CE,SAASjG,EAAE9N,GACb,MAAO,qCAAuCA,GA5C9C+T,EA8CE,SAASjG,EAAEhgB,EAAUtB,GACvB,MAAO,cAAgBsB,EAAW,2CAA6CtB,EAAO,KA/CtFunB,EAiDE,4BAjDFA,EAkDE,SAASjG,EAAEhgB,EAAUtB,GACvB,MAAO,2BAA6BsB,EAASmO,WAAa,qCAAuCzP,EAAO,KAnDxGunB,EAqDE,SAASjG,EAAE9N,GACb,MAAO,2BAA6BA,GAtDpC+T,EAwDE,wBAxDFA,EAyDE,4DAzDFA,EA0DE,mCA1DFA,EA2DE,SAASjG,EAAEthB,EAAM2nB,GACnB,MAAO,iCAAmC3nB,EAAO,KAAO2nB,GA5DxDJ,EA8DE,SAASjG,EAAEthB,GACb,MAAO,iCAAmCA,EAAO,mHA/DjDunB,EAiEE,SAASjG,EAAEthB,GACb,MAAO,mBAAqBA,EAAO,oEAlEnCunB,EAoEE,6IApEFA,EAqEE,2EArEFA,EAsEE,SAASjG,EAAEsG,GACb,MAAO,2BAA6BA,EAAS,gGAAkGA,EAAS,eAvExJL,EAyEE,qDAzEFA,EA0EE,4DAEFM,EAA8D,GAClE,SAASC,EAAIhO,GACX,IAAK,IAAIiO,EAAO/H,UAAUnX,OAAQnF,EAAO,IAAImD,MAAMkhB,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAClGtkB,EAAKskB,EAAO,GAAKhI,UAAUgI,GAEc,MAK3C,MAAM,IAAItT,MAAuB,iBAAVoF,EAAqB,6BAA+BA,GAASpW,EAAKmF,OAAS,IAAMnF,EAAKqB,IAAI6a,QAAQhC,KAAK,KAAO,IAAM,iGAAmG,UAAY9D,GAG5P,IAAImO,EAAa,GACjB,SAASC,IACP,MAA0B,oBAAfC,WACFA,WAEa,oBAAX9oB,OACFA,YAEa,IAAX+oB,EACFA,EAEW,oBAATC,KACFA,KAEFJ,EAIT,IAAIpW,EAAS1R,OAAO0R,OAChByW,EAAgBnoB,OAAOmgB,yBACvBlgB,EAAiBD,OAAOC,eACxBmoB,EAAkBpoB,OAAOoB,UACzBinB,EAAc,GAClBroB,OAAOsoB,OAAOD,GACd,IAAIE,EAAe,GACnBvoB,OAAOsoB,OAAOC,GACd,IAAIC,EAA4B,oBAAVC,MAClBC,EAAiC1oB,OAAOsP,WAC5C,SAASqZ,IACFH,GACHb,EAA0K,uBAG9K,SAASiB,EAA0BC,GAC7B,EAIN,SAASC,KACP,QAASC,GAAYC,SAKvB,SAAS9W,GAAK+W,GACZ,IAAIC,GAAU,EACd,OAAO,WACL,IAAIA,EAIJ,OADAA,GAAU,EACHD,EAAKvO,MAAMnV,KAAMsa,YAG5B,IAAIsJ,GAAO,SAASA,MACpB,SAAS/b,GAAWhK,GAClB,MAAqB,mBAAPA,EAEhB,SAASgmB,GAAY7oB,GACnB,IAAIC,EACJ,cADeD,GAEb,IAAK,SACL,IAAK,SACL,IAAK,SACH,OAAO,EAEX,OAAO,EAET,SAASuI,GAASvI,GAChB,OAAiB,OAAVA,GAAmC,iBAAVA,EAElC,SAASyI,GAAczI,GACrB,IAAKuI,GAASvI,GACZ,OAAO,EAET,IAAI0I,EAAQjJ,OAAOkJ,eAAe3I,GAClC,GAAa,MAAT0I,EACF,OAAO,EAET,IAAIogB,EAAmBrpB,OAAOqB,eAAe5B,KAAKwJ,EAAO,gBAAkBA,EAAM0W,YACjF,MAAmC,mBAArB0J,GAAmCA,EAAiB/Z,aAAeoZ,EAGnF,SAASY,GAAY1lB,GACnB,IAAI+b,EAAqB,MAAP/b,OAAc,EAASA,EAAI+b,YAC7C,QAAKA,IAGD,sBAAwBA,EAAY9f,MAAQ,sBAAwB8f,EAAYhV,aAKtF,SAAS4e,GAAcroB,EAAQsR,EAAUjS,GACvCN,EAAeiB,EAAQsR,EAAU,CAC/BtS,YAAY,EACZ0jB,UAAU,EACV3B,cAAc,EACd1hB,MAAOA,IAGX,SAASipB,GAAmBtoB,EAAQsR,EAAUjS,GAC5CN,EAAeiB,EAAQsR,EAAU,CAC/BtS,YAAY,EACZ0jB,UAAU,EACV3B,cAAc,EACd1hB,MAAOA,IAGX,SAASkpB,GAA0B5pB,EAAM6pB,GACvC,IAAIlX,EAAW,SAAW3S,EAE1B,OADA6pB,EAAStoB,UAAUoR,IAAY,EACxB,SAAUsP,GACf,OAAOhZ,GAASgZ,KAAsB,IAAhBA,EAAEtP,IAG5B,SAASmX,GAAStW,GAChB,OAAOA,aAAiBjM,IAE1B,SAASwiB,GAASvW,GAChB,OAAOA,aAAiB9H,IAE1B,IAAIse,QAAmE,IAAjC7pB,OAAO+f,sBAI7C,SAAS+J,GAAmB5oB,GAC1B,IAAIwI,EAAO1J,OAAO0J,KAAKxI,GAEvB,IAAK2oB,GACH,OAAOngB,EAET,IAAIqgB,EAAU/pB,OAAO+f,sBAAsB7e,GAC3C,OAAK6oB,EAAQrhB,OAGN,GAAGzD,OAAOyE,EAAMqgB,EAAQpgB,QAAO,SAAUpI,GAC9C,OAAO6mB,EAAgBpI,qBAAqBvgB,KAAKyB,EAAQK,OAHlDmI,EAQX,IAAIsgB,GAA6B,oBAAZ5J,SAA2BA,QAAQ4J,QAAU5J,QAAQ4J,QAAUH,GAA2B,SAAUjmB,GACvH,OAAO5D,OAAOiqB,oBAAoBrmB,GAAKqB,OAAOjF,OAAO+f,sBAAsBnc,KAC/C5D,OAAOiqB,oBACrC,SAASC,GAAarpB,GACpB,MAAmB,iBAARA,EACFA,EAEU,iBAARA,EACFA,EAAIyO,WAEN,IAAImQ,OAAO5e,GAAKyO,WAEzB,SAAS6a,GAAY5pB,GACnB,OAAiB,OAAVA,EAAiB,KAAwB,iBAAVA,EAAqB,GAAKA,EAAQA,EAE1E,SAAS6pB,GAAQ7gB,EAAQ8gB,GACvB,OAAOjC,EAAgB/mB,eAAe5B,KAAK8J,EAAQ8gB,GAGrD,IAAIC,GAA4BtqB,OAAOsqB,2BAA6B,SAASA,EAA0B/gB,GAErG,IAAI6U,EAAM,GAKV,OAHA4L,GAAQzgB,GAAQjC,SAAQ,SAAUzG,GAChCud,EAAIvd,GAAOsnB,EAAc5e,EAAQ1I,MAE5Bud,GAGT,SAASmM,GAAkBhhB,EAAQmB,GACjC,IAAK,IAAIpL,EAAI,EAAGA,EAAIoL,EAAMhC,OAAQpJ,IAAK,CACrC,IAAI4hB,EAAaxW,EAAMpL,GACvB4hB,EAAWhhB,WAAaghB,EAAWhhB,aAAc,EACjDghB,EAAWe,cAAe,EACtB,UAAWf,IAAYA,EAAW0C,UAAW,GACjD5jB,OAAOC,eAAesJ,EAAQihB,GAAetJ,EAAWrgB,KAAMqgB,IAGlE,SAASuJ,GAAaC,EAAaC,EAAYC,GAM7C,OALID,GAAYJ,GAAkBG,EAAYtpB,UAAWupB,GACrDC,GAAaL,GAAkBG,EAAaE,GAChD5qB,OAAOC,eAAeyqB,EAAa,YAAa,CAC9C9G,UAAU,IAEL8G,EAET,SAASG,KAYP,OAXAA,GAAW7qB,OAAO0R,OAAS1R,OAAO0R,OAAO5Q,OAAS,SAAUyI,GAC1D,IAAK,IAAIjK,EAAI,EAAGA,EAAIugB,UAAUnX,OAAQpJ,IAAK,CACzC,IAAIwX,EAAS+I,UAAUvgB,GACvB,IAAK,IAAIuB,KAAOiW,EACV9W,OAAOoB,UAAUC,eAAe5B,KAAKqX,EAAQjW,KAC/C0I,EAAO1I,GAAOiW,EAAOjW,IAI3B,OAAO0I,IAEOmR,MAAMnV,KAAMsa,WAE9B,SAASiL,GAAeC,EAAUC,GAChCD,EAAS3pB,UAAYpB,OAAOY,OAAOoqB,EAAW5pB,WAC9C2pB,EAAS3pB,UAAUue,YAAcoL,EACjCE,GAAgBF,EAAUC,GAE5B,SAASC,GAAgBlrB,EAAGuB,GAK1B,OAJA2pB,GAAkBjrB,OAAO2N,eAAiB3N,OAAO2N,eAAe7M,OAAS,SAASmqB,EAAgBlrB,EAAGuB,GAEnG,OADAvB,EAAEyM,UAAYlL,EACPvB,IAEcA,EAAGuB,GAE5B,SAAS4pB,GAAuBhD,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIiD,eAAe,6DAE3B,OAAOjD,EAET,SAASkD,GAA4BrrB,EAAGsrB,GACtC,GAAKtrB,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAOurB,GAAkBvrB,EAAGsrB,GACvD,IAAItqB,EAAIf,OAAOoB,UAAUkO,SAAS7P,KAAKM,GAAG4kB,MAAM,GAAI,GAEpD,MADU,WAAN5jB,GAAkBhB,EAAE4f,cAAa5e,EAAIhB,EAAE4f,YAAY9f,MAC7C,QAANkB,GAAqB,QAANA,EAAoB2F,MAAM+d,KAAK1kB,GACxC,cAANgB,GAAqB,2CAA2CY,KAAKZ,GAAWuqB,GAAkBvrB,EAAGsrB,QAAzG,GAEF,SAASC,GAAkBC,EAAKC,IACnB,MAAPA,GAAeA,EAAMD,EAAI7iB,UAAQ8iB,EAAMD,EAAI7iB,QAC/C,IAAK,IAAIpJ,EAAI,EAAGoU,EAAO,IAAIhN,MAAM8kB,GAAMlsB,EAAIksB,EAAKlsB,IAAKoU,EAAKpU,GAAKisB,EAAIjsB,GACnE,OAAOoU,EAET,SAAS+X,GAAgC1rB,EAAG2rB,GAC1C,IAAIC,EAAuB,oBAAXtrB,QAA0BN,EAAEM,OAAOkjB,WAAaxjB,EAAE,cAClE,GAAI4rB,EAAI,OAAQA,EAAKA,EAAGlsB,KAAKM,IAAIye,KAAK1d,KAAK6qB,GAC3C,GAAIjlB,MAAMC,QAAQ5G,KAAO4rB,EAAKP,GAA4BrrB,KAAO2rB,GAAkB3rB,GAAyB,iBAAbA,EAAE2I,OAAqB,CAChHijB,IAAI5rB,EAAI4rB,GACZ,IAAIrsB,EAAI,EACR,OAAO,WACL,OAAIA,GAAKS,EAAE2I,OAAe,CACxB0Y,MAAM,GAED,CACLA,MAAM,EACN7gB,MAAOR,EAAET,OAIf,MAAM,IAAIkgB,UAAU,yIAEtB,SAASoM,GAAaC,EAAOC,GAC3B,GAAqB,iBAAVD,GAAgC,OAAVA,EAAgB,OAAOA,EACxD,IAAIE,EAAOF,EAAMxrB,OAAO8pB,aACxB,QAAatkB,IAATkmB,EAAoB,CACtB,IAAI3N,EAAM2N,EAAKtsB,KAAKosB,EAAOC,GAAQ,WACnC,GAAmB,iBAAR1N,EAAkB,OAAOA,EACpC,MAAM,IAAIoB,UAAU,gDAEtB,OAAiB,WAATsM,EAAoBrM,OAASuM,QAAQH,GAE/C,SAASrB,GAAezP,GACtB,IAAIla,EAAM+qB,GAAa7Q,EAAK,UAC5B,MAAsB,iBAARla,EAAmBA,EAAM4e,OAAO5e,GAGhD,IAAIorB,GAAuC5rB,OAAO,2BAMlD,SAAS6rB,GAA0BC,GACjC,SAAS3L,EAAUjX,EAAQpI,GACzBirB,GAAgB7iB,EAAQpI,EAAUgrB,GAEpC,OAAOnsB,OAAO0R,OAAO8O,EAAW2L,GAMlC,SAASC,GAAgBhrB,EAAWP,EAAKsrB,GAKmF,MAJrH/B,GAAQhpB,EAAW6qB,KACtB1C,GAAcnoB,EAAW6qB,GAAyBpB,GAAS,GAAIzpB,EAAU6qB,MAQ3EI,GAAmBjrB,EAAW+qB,EAAYtrB,GAErCyrB,GAAWH,KACd/qB,EAAU6qB,IAAyBprB,GAAOsrB,GAG9C,SAASE,GAAmBjrB,EAAW+qB,EAAYtrB,GACyE,UAU5H,SAAS0rB,GAAyBhjB,GAQhC,OAPK6gB,GAAQ7gB,EAAQ0iB,KAKnB1C,GAAchgB,EAAQ0iB,GAAyBpB,GAAS,GAAIthB,EAAO0iB,MAE9D1iB,EAAO0iB,IAGhB,IAAIO,GAAqBnsB,OAAO,uBAC5BosB,GAAoB,WAOtB,SAASA,EAAKC,QACE,IAAVA,IACFA,EAAwE,QAE1EnnB,KAAKmnB,WAAQ,EACbnnB,KAAKonB,yBAA0B,EAC/BpnB,KAAKqnB,kBAAmB,EACxBrnB,KAAKsnB,WAAa,IAAIthB,IACtBhG,KAAKunB,WAAa,EAClBvnB,KAAKwnB,gBAAkB,EACvBxnB,KAAKynB,qBAAuBC,GAAkBC,cAC9C3nB,KAAK4nB,WAAQ,EACb5nB,KAAK6nB,YAAS,EACd7nB,KAAKmnB,MAAQA,EAGf,IAAIW,EAASZ,EAAKrrB,UAiClB,OAhCAisB,EAAOC,KAAO,SAASA,IACjB/nB,KAAK4nB,OACP5nB,KAAK4nB,MAAM7lB,SAAQ,SAAUimB,GAC3B,OAAOA,QAIbF,EAAOG,MAAQ,SAASA,IAClBjoB,KAAK6nB,QACP7nB,KAAK6nB,OAAO9lB,SAAQ,SAAUimB,GAC5B,OAAOA,QAQbF,EAAOI,eAAiB,SAASC,IAC/B,OAAOD,GAAeloB,OAKxB8nB,EAAOM,cAAgB,SAASA,IAC9BC,KACAC,GAAiBtoB,MACjBuoB,MAEFT,EAAO/d,SAAW,SAASA,IACzB,OAAO/J,KAAKmnB,OAEPD,EAxDe,GA0DpBsB,GAAsBtE,GAA0B,OAAQgD,IAC5D,SAASuB,GAAWnuB,EAAMouB,EAAyBC,QACjB,IAA5BD,IACFA,EAA0B9E,SAEM,IAA9B+E,IACFA,EAA4B/E,IAE9B,IAAIgF,EAAO,IAAI1B,GAAK5sB,GAQpB,OANIouB,IAA4B9E,IAC9BiF,GAAiBD,EAAMF,GAErBC,IAA8B/E,IAChCkF,GAAmBF,EAAMD,GAEpBC,EAGT,SAASG,GAAiBlK,EAAG9E,GAC3B,OAAO8E,IAAM9E,EAEf,SAASiP,GAAmBnK,EAAG9E,GAC7B,OAAOkP,GAAUpK,EAAG9E,GAEtB,SAASmP,GAAgBrK,EAAG9E,GAC1B,OAAOkP,GAAUpK,EAAG9E,EAAG,GAEzB,SAASoP,GAAgBtK,EAAG9E,GAC1B,OAAItf,OAAO2uB,GACF3uB,OAAO2uB,GAAGvK,EAAG9E,GAEf8E,IAAM9E,EAAU,IAAN8E,GAAW,EAAIA,GAAM,EAAI9E,EAAI8E,GAAMA,GAAK9E,GAAMA,EAEjE,IAAIsP,GAAW,CACbC,SAAUP,GACVQ,WAAYP,GACZ,QAAWG,GACXK,QAASN,IAGX,SAASO,GAAanc,EAAGsO,EAAGthB,GAE1B,OAAIovB,GAAapc,GACRA,EAGLnM,MAAMC,QAAQkM,GACTqc,GAAWC,MAAMtc,EAAG,CACzBhT,KAAMA,IAGNmJ,GAAc6J,GACTqc,GAAWhuB,OAAO2R,OAAGhN,EAAW,CACrChG,KAAMA,IAGN8pB,GAAS9W,GACJqc,GAAWtqB,IAAIiO,EAAG,CACvBhT,KAAMA,IAGN+pB,GAAS/W,GACJqc,GAAWhnB,IAAI2K,EAAG,CACvBhT,KAAMA,IAGO,mBAANgT,GAAqBuc,GAASvc,IAAOwc,GAAOxc,GAOhDA,EANDyW,GAAYzW,GACPyc,GAAKzc,GAEL0c,GAAW1vB,EAAMgT,GAK9B,SAAS2c,GAAgB3c,EAAGsO,EAAGthB,GAC7B,OAAIgT,SAGA4c,GAAmB5c,IAAM6c,GAAkB7c,IAAM8c,GAAgB9c,IAAM+c,GAAgB/c,GAFlFA,EAKLnM,MAAMC,QAAQkM,GACTqc,GAAWC,MAAMtc,EAAG,CACzBhT,KAAMA,EACNgwB,MAAM,IAGN7mB,GAAc6J,GACTqc,GAAWhuB,OAAO2R,OAAGhN,EAAW,CACrChG,KAAMA,EACNgwB,MAAM,IAGNlG,GAAS9W,GACJqc,GAAWtqB,IAAIiO,EAAG,CACvBhT,KAAMA,EACNgwB,MAAM,IAGNjG,GAAS/W,GACJqc,GAAWhnB,IAAI2K,EAAG,CACvBhT,KAAMA,EACNgwB,MAAM,SAGN,EAIN,SAASC,GAAkBC,GAEzB,OAAOA,EAET,SAASC,GAAkBnd,EAAGod,GAI5B,OAAIzB,GAAU3b,EAAGod,GACRA,EAEFpd,EAGT,IAAIqd,GAAW,WACXC,GAAwBjE,GAA0B,CACpDkE,gBAAiBF,GACjBG,MAAOA,GACPC,QAASA,KAEX,SAAShE,GAAWH,GAClB,OAAOA,EAAWiE,kBAAoBF,GAExC,SAASG,GAAME,EAAK1vB,GASlB,OAAO,EAGT,SAASyvB,GAAQC,EAAK1vB,EAAKqgB,EAAYsP,GACrC7I,EAAI,IAAMpiB,KAAK6qB,gBAAkB,4CAGnC,SAASK,GAAuB5wB,EAAM6S,GACpC,MAAO,CACL0d,gBAAiBvwB,EACjB6wB,SAAUhe,EACV2d,MAAOM,GACPL,QAASM,IAGb,SAASD,GAAQJ,EAAK1vB,EAAKqgB,EAAYpK,GACrC,IAAI+Z,EAEJ,GAAwC,OAAnCA,EAAiBtrB,KAAKmrB,WAAqBG,EAAeC,MAC7D,OAAqD,OAA9CvrB,KAAK+qB,QAAQC,EAAK1vB,EAAKqgB,GAAY,GAAkB,EAAiB,EAG/E,GAAIpK,IAAWyZ,EAAIQ,QACjB,OAAqD,OAA9CxrB,KAAK+qB,QAAQC,EAAK1vB,EAAKqgB,GAAY,GAAkB,EAAiB,EAG/E,GAAIkO,GAASlO,EAAW3gB,OAGtB,OAAO,EAGT,IAAIywB,EAAmBC,GAAuBV,EAAKhrB,KAAM1E,EAAKqgB,GAAY,GAE1E,OADAjhB,EAAe6W,EAAQjW,EAAKmwB,GACrB,EAGT,SAASJ,GAAUL,EAAK1vB,EAAKqgB,EAAYsP,GACvC,IAAIQ,EAAmBC,GAAuBV,EAAKhrB,KAAM1E,EAAKqgB,GAC9D,OAAOqP,EAAIW,gBAAgBrwB,EAAKmwB,EAAkBR,GAEpD,SAASW,GAAuBZ,EAAKa,EAAMvwB,EAAKwwB,GAC9C,IAAIjB,EAAkBgB,EAAKhB,gBACvB7vB,EAAQ8wB,EAAM9wB,MAKpB,SAAS0wB,GAAuBV,EAAKpE,EAAYtrB,EAAKqgB,EAEtDoQ,GACE,IAAIC,EAAsBC,EAAuBC,EAAuBC,EAAwBC,EAAuBC,EAAuBC,OACtH,IAApBP,IACFA,EAAkBvI,GAAYuI,iBAEhCH,GAAuBZ,EAAKpE,EAAYtrB,EAAKqgB,GAC7C,IAAI3gB,EAAQ2gB,EAAW3gB,MAEjBuxB,EAD8C,OAA/CP,EAAuBpF,EAAWuE,WAAqBa,EAAqBT,QAE/EvwB,EAAQA,EAAMO,KAAmC,OAA7BgxB,EAAcvB,EAAIwB,QAAkBD,EAAcvB,EAAIQ,UAE5E,MAAO,CACLxwB,MAAOyxB,GAAsI,OAAxHR,EAAyE,OAAhDC,EAAwBtF,EAAWuE,eAAoB,EAASe,EAAsB5xB,MAAgB2xB,EAAwB3wB,EAAIyO,WAAY/O,EAAuI,OAA/HmxB,EAA0E,OAAhDC,EAAwBxF,EAAWuE,eAAoB,EAASiB,EAAsBpC,aAAsBmC,EAEzR,OAAhDE,EAAwBzF,EAAWuE,WAAqBkB,EAAsBd,MAAuC,OAA9Be,EAAetB,EAAIwB,QAAkBF,EAAetB,EAAIQ,aAAUlrB,GAG1Joc,cAAcqP,GAAkBf,EAAI0B,eAEpC/xB,YAAY,EAGZ0jB,UAAU0N,GAId,SAASY,GAAqBryB,EAAM6S,GAClC,MAAO,CACL0d,gBAAiBvwB,EACjB6wB,SAAUhe,EACV2d,MAAO8B,GACP7B,QAAS8B,IAGb,SAASD,GAAQ5B,EAAK1vB,EAAKqgB,EAAYpK,GACrC,IAAI+Z,EAEJ,GAAI/Z,IAAWyZ,EAAIQ,QACjB,OAAqD,OAA9CxrB,KAAK+qB,QAAQC,EAAK1vB,EAAKqgB,GAAY,GAAkB,EAAiB,EAI/E,GAAwC,OAAnC2P,EAAiBtrB,KAAKmrB,WAAqBG,EAAeC,SAAW1G,GAAQmG,EAAIQ,QAASlwB,KAASwuB,GAAOkB,EAAIQ,QAAQlwB,MACvE,OAA9C0E,KAAK+qB,QAAQC,EAAK1vB,EAAKqgB,GAAY,GACrC,OAAO,EAIX,GAAImO,GAAOnO,EAAW3gB,OAGpB,OAAO,EAGT,IAAI8xB,EAAiBC,GAAqB/B,EAAKhrB,KAAM1E,EAAKqgB,GAAY,GAAO,GAE7E,OADAjhB,EAAe6W,EAAQjW,EAAKwxB,GACrB,EAGT,SAASD,GAAU7B,EAAK1vB,EAAKqgB,EAAYsP,GACvC,IAAI+B,EACAF,EAAiBC,GAAqB/B,EAAKhrB,KAAM1E,EAAKqgB,EAAiD,OAApCqR,EAAkBhtB,KAAKmrB,eAAoB,EAAS6B,EAAgBzB,OAC3I,OAAOP,EAAIW,gBAAgBrwB,EAAKwxB,EAAgB7B,GAElD,SAASgC,GAAqBjC,EAAKa,EAAMvwB,EAAKwwB,GAC5C,IAAIjB,EAAkBgB,EAAKhB,gBACvB7vB,EAAQ8wB,EAAM9wB,MAKpB,SAAS+xB,GAAqB/B,EAAKpE,EAAYtrB,EAAKqgB,EAAY4P,EAEhEQ,QAC0B,IAApBA,IACFA,EAAkBvI,GAAYuI,iBAEhCkB,GAAqBjC,EAAKpE,EAAYtrB,EAAKqgB,GAC3C,IAAI3gB,EAAQ2gB,EAAW3gB,MAMjBuxB,GAJDzC,GAAO9uB,KACVA,EAAQ+uB,GAAK/uB,IAEXuwB,MAGFvwB,EAAQA,EAAMO,KAAmC,OAA7BgxB,EAAcvB,EAAIwB,QAAkBD,EAAcvB,EAAIQ,UAEpE0B,YAAa,GAErB,MAAO,CACLlyB,MAAOA,EAGP0hB,cAAcqP,GAAkBf,EAAI0B,eAEpC/xB,YAAY,EAGZ0jB,UAAU0N,GAId,SAASoB,GAAyB7yB,EAAM6S,GACtC,MAAO,CACL0d,gBAAiBvwB,EACjB6wB,SAAUhe,EACV2d,MAAOsC,GACPrC,QAASsC,IAGb,SAASD,GAAQpC,EAAK1vB,EAAKqgB,GACzB,OAAqD,OAA9C3b,KAAK+qB,QAAQC,EAAK1vB,EAAKqgB,GAAY,GAAkB,EAAiB,EAG/E,SAAS0R,GAAUrC,EAAK1vB,EAAKqgB,EAAYsP,GAEvC,OADAqC,GAAyBtC,EAAKhrB,KAAM1E,EAAKqgB,GAClCqP,EAAIuC,wBAAwBjyB,EAAKgqB,GAAS,GAAItlB,KAAKmrB,SAAU,CAClEvwB,IAAK+gB,EAAW/gB,IAChB+H,IAAKgZ,EAAWhZ,MACdsoB,GAEN,SAASqC,GAAyBtC,EAAKa,EAAMvwB,EAAKwwB,GAChD,IAAIjB,EAAkBgB,EAAKhB,gBACvBjwB,EAAMkxB,EAAMlxB,IAMlB,SAAS4yB,GAA2BlzB,EAAM6S,GACxC,MAAO,CACL0d,gBAAiBvwB,EACjB6wB,SAAUhe,EACV2d,MAAO2C,GACP1C,QAAS2C,IAGb,SAASD,GAAQzC,EAAK1vB,EAAKqgB,GACzB,OAAqD,OAA9C3b,KAAK+qB,QAAQC,EAAK1vB,EAAKqgB,GAAY,GAAkB,EAAiB,EAG/E,SAAS+R,GAAU1C,EAAK1vB,EAAKqgB,EAAYsP,GACvC,IAAI0C,EAAuBrC,EAE3B,OADAsC,GAA2B5C,EAAKhrB,KAAM1E,EAAKqgB,GACpCqP,EAAI6C,0BAA0BvyB,EAAKqgB,EAAW3gB,MAAgH,OAAxG2yB,EAA4D,OAAnCrC,EAAiBtrB,KAAKmrB,eAAoB,EAASG,EAAewC,UAAoBH,EAAwBlE,GAAcwB,GAEpN,SAAS2C,GAA2B5C,EAAKa,EAAMvwB,EAAKqgB,GAClD,IAAIkP,EAAkBgB,EAAKhB,gBAM7B,IAAIkD,GAAO,OACPC,GAA8BC,KAClC,SAASA,GAAqB9gB,GAC5B,MAAO,CACL0d,gBAAiBkD,GACjB5C,SAAUhe,EACV2d,MAAOoD,GACPnD,QAASoD,IAGb,SAASD,GAAQlD,EAAK1vB,EAAKqgB,EAAYpK,GACrC,IAAI6c,EAAiBC,EAyBfrB,EAEE1B,EACAgD,EAGFC,EA7BN,GAAI5S,EAAW/gB,IACb,OAAO4zB,GAAS1D,MAAME,EAAK1vB,EAAKqgB,EAAYpK,GAG9C,GAAIoK,EAAWhZ,IAAK,CAElB,IAAIA,EAAM8pB,GAAanxB,EAAIyO,WAAY4R,EAAWhZ,KAElD,OAAI4O,IAAWyZ,EAAIQ,QAIV,OAHAR,EAAIW,gBAAgBrwB,EAAK,CAC9BohB,cAAc8G,GAAYuI,iBAAkBf,EAAI0B,eAChD/pB,IAAKA,IACO,EAAiB,GAGjCjI,EAAe6W,EAAQjW,EAAK,CAC1BohB,cAAc,EACd/Z,IAAKA,IAEA,GAGT,GAAI4O,IAAWyZ,EAAIQ,SAAuC,mBAArB7P,EAAW3gB,MAE9C,OAAI+oB,GAAYpI,EAAW3gB,QAEgC,OAAnCswB,EAAiBtrB,KAAKmrB,WAAqBG,EAAemD,SAAW1E,GAAKwB,MAAQxB,IAClFe,MAAME,EAAK1vB,EAAKqgB,EAAYpK,IAEQ,OAApCyb,EAAkBhtB,KAAKmrB,WAAqB6B,EAAgByB,SAAWzE,GAAWuB,MAAQvB,IAC1Fc,MAAME,EAAK1vB,EAAKqgB,EAAYpK,GAKtD,IAAImd,GAAuG,KAA1C,OAApCN,EAAkBpuB,KAAKmrB,eAAoB,EAASiD,EAAgB9D,MAAkBX,GAAWvf,IAAMuf,GAG9H4C,EAD0B,mBAArB5Q,EAAW3gB,OAA6D,OAApCqzB,EAAkBruB,KAAKmrB,WAAqBkD,EAAgBI,WAEzG9S,EAAW3gB,MAAQ2gB,EAAW3gB,MAAMO,KAAmC,OAA7BgxB,EAAcvB,EAAIwB,QAAkBD,EAAcvB,EAAIQ,UAElG,OAAOkD,EAAqB5D,MAAME,EAAK1vB,EAAKqgB,EAAYpK,GAE1D,SAAS4c,GAAUnD,EAAK1vB,EAAKqgB,EAAYsP,GACvC,IAAI0D,EAAiBC,EAgBftC,EAGFoC,EAjBJ,GAAI/S,EAAW/gB,IACb,OAAO4zB,GAASzD,QAAQC,EAAK1vB,EAAKqgB,EAAYsP,GAGhD,GAAItP,EAAWhZ,IAEb,OAAOqoB,EAAIW,gBAAgBrwB,EAAK,CAC9BohB,cAAc8G,GAAYuI,iBAAkBf,EAAI0B,eAChD/pB,IAAK8pB,GAAanxB,EAAIyO,WAAY4R,EAAWhZ,MAC5CsoB,GAI2B,mBAArBtP,EAAW3gB,OAA6D,OAApC2zB,EAAkB3uB,KAAKmrB,WAAqBwD,EAAgBF,WAEzG9S,EAAW3gB,MAAQ2gB,EAAW3gB,MAAMO,KAAoC,OAA9B+wB,EAAetB,EAAIwB,QAAkBF,EAAetB,EAAIQ,UAGpG,QAD2G,KAA1C,OAApCoD,EAAkB5uB,KAAKmrB,eAAoB,EAASyD,EAAgBtE,MAAkBX,GAAWvf,IAAMuf,IACxGoB,QAAQC,EAAK1vB,EAAKqgB,EAAYsP,GAG5D,IAAI4D,GAAa,aACbC,GAAiB,iBACjBC,GAAqB,qBACrBC,GAAoB,oBAGpBC,GAAiC,CACnC3E,MAAM,EACNhwB,UAAMgG,EACN4uB,sBAAkB5uB,EAClB6uB,OAAO,GAGT,SAASC,GAA0BthB,GACjC,OAAOA,GAASmhB,GAFlBx0B,OAAOsoB,OAAOkM,IAId,IAAIP,GAAoClB,GAA2BqB,IAC/DQ,GAAuC7B,GAA2BsB,GAAgB,CACpFhB,SAAUvD,KAER+E,GAA2C9B,GAA2BuB,GAAoB,CAC5FjB,SAAU7D,KAERsF,GAA0C/B,GAA2BwB,GAAmB,CAC1FlB,SAAUrD,KAER+E,GAA6C7I,GAA0B+H,IAC3E,SAASe,GAAuBtiB,GAC9B,OAAwB,IAAjBA,EAAQmd,KAAgBb,IAAgC,IAAjBtc,EAAQmd,KAAiBC,GAAoBmF,GAA0BviB,EAAQ+hB,kBAE/H,SAASS,GAAyBxiB,GAChC,IAAIyiB,EACJ,OAAOziB,EAAgE,OAArDyiB,EAAwBziB,EAAQ+hB,kBAA4BU,EAAwB3B,GAAqB9gB,QAAW7M,EAExI,SAASovB,GAA0B9I,GACjC,IAAIqF,EAAuBD,EAC3B,OAAQpF,GAAuJ,OAA1HqF,EAAwE,OAA/CD,EAAuBpF,EAAWuE,eAAoB,EAASa,EAAqB8B,UAAoB7B,EAAjJxC,GAMvB,SAASoG,GAAiBviB,EAAGwiB,EAAMC,GAEjC,IAAIlM,GAAYiM,GAKhB,OAAIpG,GAAapc,GACRA,EAGL7J,GAAc6J,GACTqc,GAAWhuB,OAAO2R,EAAGwiB,EAAMC,GAGhC5uB,MAAMC,QAAQkM,GACTqc,GAAWC,MAAMtc,EAAGwiB,GAGzB1L,GAAS9W,GACJqc,GAAWtqB,IAAIiO,EAAGwiB,GAGvBzL,GAAS/W,GACJqc,GAAWhnB,IAAI2K,EAAGwiB,GAGV,iBAANxiB,GAAwB,OAANA,EACpBA,EAGFqc,GAAWqG,IAAI1iB,EAAGwiB,GA5BvBjJ,GAAgBvZ,EAAGwiB,EAAMpB,IA8B7BviB,EAAO0jB,GAAkBL,IACzB,IAAIS,GA0BAtG,GAA0Bxd,EAAO0jB,GA1BX,CACxBG,IAAK,SAASA,EAAIh1B,EAAOmS,GACvB,IAAI3S,EAAI40B,GAA0BjiB,GAClC,OAAO,IAAI+iB,GAAgBl1B,EAAOy0B,GAAuBj1B,GAAIA,EAAEF,MAAM,EAAME,EAAE21B,SAE/EvG,MAAO,SAASA,EAAMwG,EAAejjB,GACnC,IAAI3S,EAAI40B,GAA0BjiB,GAClC,QAAmC,IAA3BqW,GAAY6M,aAAoC,IAAZ71B,EAAE20B,MAAkBmB,GAAoBC,IAAuBH,EAAeX,GAAuBj1B,GAAIA,EAAEF,OAEzJ+E,IAAK,SAASA,EAAI+wB,EAAejjB,GAC/B,IAAI3S,EAAI40B,GAA0BjiB,GAClC,OAAO,IAAIqjB,GAAcJ,EAAeX,GAAuBj1B,GAAIA,EAAEF,OAEvEqI,IAAK,SAASA,EAAIytB,EAAejjB,GAC/B,IAAI3S,EAAI40B,GAA0BjiB,GAClC,OAAO,IAAIsjB,GAAcL,EAAeX,GAAuBj1B,GAAIA,EAAEF,OAEvEqB,OAAQ,SAASA,EAAOwJ,EAAOwV,EAAYxN,GACzC,OAAOujB,IAA4C,IAA3BlN,GAAY6M,aAAuE,KAAnC,MAAXljB,OAAkB,EAASA,EAAQgiB,OAAmBwB,GAAmB,GAAIxjB,GAAWyjB,GAA0B,GAAIzjB,GAAUhI,EAAOwV,IAEtMvQ,IAAkBuc,GAA0B0I,IAC5C7F,QAAsB7C,GAA0B2I,IAChDhF,KAAMkF,GACNqB,OAAqBlK,GAA0B4I,MAK7CuB,GAAW,WACXC,GAAkB,kBAClBC,GAAkC7D,GAAyB2D,IAC3DG,GAAwC9D,GAAyB4D,GAAiB,CACpFZ,OAAQ9G,GAASE,aAMfiF,GAAW,SAASA,EAAS0C,EAAMpB,GACrC,GAAIjM,GAAYiM,GAEd,OAAOjJ,GAAgBqK,EAAMpB,EAAMkB,IAErC,GAAIvtB,GAAcytB,GAEhB,OAAOvK,GAA0BwG,GAAyB2D,GAAUI,IAWtE,IAAIC,EAAO1tB,GAAcqsB,GAAQA,EAAO,GAGxC,OAFAqB,EAAKv2B,IAAMs2B,EACXC,EAAK72B,OAAS62B,EAAK72B,KAAO42B,EAAK52B,MAAQ,IAChC,IAAI82B,GAAcD,IAKvBE,GAAuBC,GAH3B72B,OAAO0R,OAAOqiB,GAAUwC,IACxBxC,GAASqC,OAAsBlK,GAA0BsK,IAKzD,IAAIM,GAAkB,EAClBC,GAAe,EACfC,GAA+K,OAAjJJ,GAAiG,OAAxEC,GAA8B1O,GAAc,cAAgB,cAAmB,EAAS0O,GAAe5U,eAAwB2U,GAEtLK,GAAoB,CACtB12B,MAAO,SACP0hB,cAAc,EACd2B,UAAU,EACV1jB,YAAY,GA8GVg3B,GA5GJ,SAASlF,GAAamF,EAAY/zB,EAAImsB,EAAY5f,GAYhD,SAASyO,IACP,OAAOgZ,GAAcD,EAAY5H,EAAYnsB,EAAIuM,GAAOpK,KAAMsa,WAOhE,YAnBmB,IAAf0P,IACFA,GAAa,GAafnR,EAAIiZ,cAAe,EACfL,KACFC,GAAkB12B,MAAQ42B,EAC1Bl3B,EAAeme,EAAK,OAAQ6Y,KAEvB7Y,EAET,SAASgZ,GAAcD,EAAYG,EAAoBl0B,EAAIm0B,EAAOh0B,GAChE,IAAIi0B,EAAUC,GAAaN,EAAYG,EAAoBC,EAAOh0B,GAClE,IACE,OAAOH,EAAGsX,MAAM6c,EAAOh0B,GACvB,MAAOm0B,GAEP,MADAF,EAAQG,OAASD,EACXA,EACN,QACAE,GAAWJ,IAGf,SAASC,GAAaN,EAAYG,EAElCC,EAAOh0B,GACL,IAAIs0B,GAAa,EACbC,EAAa,EACwC,EAUrDC,EAAkBhP,GAAYiP,mBAC9BC,GAAeX,IAAuBS,EAC1CnK,KACA,IAAIsK,EAAyBnP,GAAYoP,kBACrCF,IACFG,KACAF,EAAyBG,IAAuB,IAElD,IAAIC,EACAd,EAAU,CACZe,aAAcN,EACdF,gBAAiBA,EACjBG,uBAAwBA,EACxBI,qBALyBE,IAAqB,GAM9CX,YA1Be,EA2BfC,WA1Be,EA2BfW,UAAW1B,KACX2B,gBAAiB5B,IAGnB,OADAA,GAAkBU,EAAQiB,UACnBjB,EAET,SAASI,GAAWJ,GACdV,KAAoBU,EAAQiB,WAC9B9Q,EAAI,IAENmP,GAAkBU,EAAQkB,qBACH7yB,IAAnB2xB,EAAQG,SACV5O,GAAY4P,wBAAyB,GAEvCC,GAAqBpB,EAAQU,wBAC7BW,GAAmBrB,EAAQc,sBAC3BxK,KACI0J,EAAQe,cACVO,GAAatB,EAAQO,iBAOvBhP,GAAY4P,wBAAyB,EAEvC,SAASR,GAAkBA,EAAmBlP,GAC5C,IAAI1K,EAAO8Z,GAAuBF,GAClC,IACE,OAAOlP,IACP,QACA2P,GAAqBra,IAGzB,SAAS8Z,GAAuBF,GAC9B,IAAI5Z,EAAOwK,GAAYoP,kBAEvB,OADApP,GAAYoP,kBAAoBA,EACzB5Z,EAET,SAASqa,GAAqBra,GAC5BwK,GAAYoP,kBAAoB5Z,EAIlC,IAAIwa,GAAS,SACb7B,GAAsB72B,OAAO8pB,YAC7B,IAAIsL,GAA+B,SAAUuD,GAE3C,SAASvD,EAAgBl1B,EAAO8yB,EAAU3G,EAAOuM,EAAWvD,GAC1D,IAAIwD,EAiCJ,YAhCc,IAAVxM,IACFA,EAAmF,wBAEnE,IAAduM,IACFA,GAAY,QAEC,IAAXvD,IACFA,EAAS9G,GAAkB,UAE7BsK,EAAQF,EAAMv5B,KAAK8F,KAAMmnB,IAAUnnB,MAC7B8tB,cAAW,EACjB6F,EAAMxM,WAAQ,EACdwM,EAAMxD,YAAS,EACfwD,EAAMC,sBAAuB,EAC7BD,EAAME,mBAAgB,EACtBF,EAAMG,sBAAmB,EACzBH,EAAMI,YAAS,EACfJ,EAAMK,cAAW,EACjBL,EAAM7F,SAAWA,EACjB6F,EAAMxM,MAAQA,EACdwM,EAAMxD,OAASA,EACfwD,EAAMI,OAASjG,EAAS9yB,OAAOsF,EAAW6mB,GAWnCwM,EAnCTpO,GAAe2K,EAAiBuD,GAqChC,IAAI3L,EAASoI,EAAgBr0B,UA8F7B,OA7FAisB,EAAOmM,aAAe,SAASA,EAAaj5B,GAC1C,YAAsBsF,IAAlBN,KAAKg0B,SACAh0B,KAAKg0B,SAASh5B,GAEhBA,GAET8sB,EAAOnlB,IAAM,SAASA,EAAI6nB,GACxB,IAAIE,EAAW1qB,KAAK+zB,OAEpB,IADAvJ,EAAWxqB,KAAKk0B,iBAAiB1J,MAChBhH,GAAY2Q,UAAW,CACtC,IAAIT,GA0lCD,EAzlCC,EAUJ1zB,KAAKo0B,aAAa5J,KAMtB1C,EAAOoM,iBAAmB,SAASA,EAAiB1J,GAElD,GADA6J,GAAoCr0B,MAChCs0B,GAAgBt0B,MAAO,CACzB,IAAIu0B,EAASC,GAAgBx0B,KAAM,CACjCrE,OAAQqE,KACRxC,KAAMi3B,GACNjK,SAAUA,IAEZ,IAAK+J,EACH,OAAO/Q,GAAY2Q,UAErB3J,EAAW+J,EAAO/J,SAIpB,OADAA,EAAWxqB,KAAK8tB,SAAStD,EAAUxqB,KAAK+zB,OAAQ/zB,KAAKmnB,OAC9CnnB,KAAKmwB,OAAOnwB,KAAK+zB,OAAQvJ,GAAYhH,GAAY2Q,UAAY3J,GAEtE1C,EAAOsM,aAAe,SAASA,EAAa5J,GAC1C,IAAIE,EAAW1qB,KAAK+zB,OACpB/zB,KAAK+zB,OAASvJ,EACdxqB,KAAKooB,gBACDsM,GAAa10B,OACf20B,GAAgB30B,KAAM,CACpBxC,KAAMi3B,GACN94B,OAAQqE,KACRwqB,SAAUA,EACVE,SAAUA,KAIhB5C,EAAOltB,IAAM,SAASA,IAEpB,OADAoF,KAAKkoB,iBACEloB,KAAKi0B,aAAaj0B,KAAK+zB,SAEhCjM,EAAO8M,WAAa,SAASA,EAAWC,GACtC,OAAOC,GAAoB90B,KAAM60B,IAEnC/M,EAAOiN,SAAW,SAASA,EAAS/M,EAAUgN,GAW5C,OAVIA,GACFhN,EAAS,CACPiN,eAAgB,QAChBC,gBAAiBl1B,KAAKmnB,MACtBxrB,OAAQqE,KACRxC,KAAMi3B,GACNjK,SAAUxqB,KAAK+zB,OACfrJ,cAAUpqB,IAGP60B,GAAiBn1B,KAAMgoB,IAEhCF,EAAO7H,IAAM,SAASA,IAEpB,OAAOjgB,KAAK+zB,QAEdjM,EAAOsN,OAAS,SAASA,IACvB,OAAOp1B,KAAKpF,OAEdktB,EAAO/d,SAAW,SAASA,IACzB,OAAO/J,KAAKmnB,MAAQ,IAAMnnB,KAAK+zB,OAAS,KAE1CjM,EAAOuN,QAAU,SAASA,IACxB,OAAOzQ,GAAY5kB,KAAKpF,QAE1BktB,EAAO6J,IAAuB,WAC5B,OAAO3xB,KAAKq1B,WAEPnF,EApI0B,CAqIjChJ,IACEoO,GAAiCpR,GAA0B,kBAAmBgM,IAE9EqF,GAoBJA,GAAwBz6B,OAAO8pB,YAC/B,IAAIwM,GAA6B,WAoB/B,SAASA,EAAcjkB,GACrBnN,KAAKw1B,mBAAqB9N,GAAkBC,cAC5C3nB,KAAKy1B,WAAa,GAClBz1B,KAAK01B,cAAgB,KACrB11B,KAAKqnB,kBAAmB,EACxBrnB,KAAKonB,yBAA0B,EAC/BpnB,KAAKsnB,WAAa,IAAIthB,IACtBhG,KAAKunB,WAAa,EAClBvnB,KAAK21B,OAAS,EACd31B,KAAKwnB,gBAAkB,EACvBxnB,KAAKynB,qBAAuBC,GAAkBkO,YAC9C51B,KAAK61B,kBAAoB,EACzB71B,KAAK+zB,OAAS,IAAI+B,GAAgB,MAClC91B,KAAKmnB,WAAQ,EACbnnB,KAAK+1B,kBAAe,EACpB/1B,KAAKg2B,cAAe,EACpBh2B,KAAKi2B,kBAAmB,EACxBj2B,KAAKiiB,gBAAa,EAClBjiB,KAAKk2B,aAAU,EACfl2B,KAAKm2B,WAAaC,GAAUC,KAC5Br2B,KAAKs2B,YAAS,EACdt2B,KAAKu2B,aAAU,EACfv2B,KAAKw2B,uBAAoB,EACzBx2B,KAAKy2B,gBAAa,EAClBz2B,KAAK4nB,WAAQ,EACb5nB,KAAK6nB,YAAS,EACT1a,EAAQvS,KACXwnB,EAAI,IAENpiB,KAAKiiB,WAAa9U,EAAQvS,IAC1BoF,KAAKmnB,MAAQha,EAAQ7S,MAAkF,gBACnG6S,EAAQxK,MACV3C,KAAKk2B,QAAUzJ,GAA8E,uBAAwBtf,EAAQxK,MAE/H3C,KAAKu2B,QAAUppB,EAAQgjB,SAAWhjB,EAAQupB,mBAAqBvpB,EAAQ0jB,OAASxH,GAASE,WAAaF,GAAkB,SACxHrpB,KAAKs2B,OAASnpB,EAAQ2O,QACtB9b,KAAKw2B,kBAAoBrpB,EAAQwpB,iBACjC32B,KAAKy2B,aAAetpB,EAAQypB,UAE9B,IAAI9O,EAASsJ,EAAcv1B,UAoK3B,OAnKAisB,EAAO+O,eAAiB,SAASA,IAC/BC,GAAsB92B,OAExB8nB,EAAOC,KAAO,SAASA,IACjB/nB,KAAK4nB,OACP5nB,KAAK4nB,MAAM7lB,SAAQ,SAAUimB,GAC3B,OAAOA,QAIbF,EAAOG,MAAQ,SAASA,IAClBjoB,KAAK6nB,QACP7nB,KAAK6nB,OAAO9lB,SAAQ,SAAUimB,GAC5B,OAAOA,QAQbF,EAAOltB,IAAM,SAASA,IAIpB,GAHIoF,KAAKg2B,cACP5T,EAAI,GAAIpiB,KAAKmnB,MAAOnnB,KAAKiiB,YAEC,IAAxBuB,GAAYuT,SAES,IAAzB/2B,KAAKsnB,WAAWne,MAAenJ,KAAKy2B,YASlC,GADAvO,GAAeloB,MACXg3B,GAAch3B,MAAO,CACvB,IAAIi3B,EAAsBzT,GAAY0T,gBAClCl3B,KAAKy2B,aAAeQ,IACtBzT,GAAY0T,gBAAkBl3B,MAE5BA,KAAKm3B,mBACPC,GAAyBp3B,MAE3BwjB,GAAY0T,gBAAkBD,QAhB5BD,GAAch3B,QAChBA,KAAKq3B,0BACLhP,KACAroB,KAAK+zB,OAAS/zB,KAAKs3B,eAAc,GACjC/O,MAeJ,IAAItM,EAASjc,KAAK+zB,OAClB,GAAIwD,GAAkBtb,GACpB,MAAMA,EAAOub,MAEf,OAAOvb,GAET6L,EAAOnlB,IAAM,SAASA,EAAI3H,GACxB,GAAIgF,KAAKk2B,QAAS,CACZl2B,KAAKi2B,kBACP7T,EAAI,GAAIpiB,KAAKmnB,OAEfnnB,KAAKi2B,kBAAmB,EACxB,IACEj2B,KAAKk2B,QAAQh8B,KAAK8F,KAAKs2B,OAAQt7B,GAC/B,QACAgF,KAAKi2B,kBAAmB,QAG1B7T,EAAI,GAAIpiB,KAAKmnB,QAGjBW,EAAOqP,gBAAkB,SAASA,IAEhC,IAAIzM,EAAW1qB,KAAK+zB,OAChB0D,EAA8Bz3B,KAAKw1B,qBAAuB9N,GAAkBC,cAC5E6C,EAAWxqB,KAAKs3B,eAAc,GAC9BI,EAAUD,GAAgBF,GAAkB7M,IAAa6M,GAAkB/M,KAAcxqB,KAAKu2B,QAAQ7L,EAAUF,GAcpH,OAbIkN,IACF13B,KAAK+zB,OAASvJ,GAYTkN,GAET5P,EAAOwP,cAAgB,SAASA,EAAcK,GAC5C33B,KAAKg2B,cAAe,EAEpB,IAAIhd,EAAO8Z,IAAuB,GAC9Bja,EACJ,GAAI8e,EACF9e,EAAM+e,GAAqB53B,KAAMA,KAAKiiB,WAAYjiB,KAAKs2B,aAEvD,IAA2C,IAAvC9S,GAAYqU,uBACdhf,EAAM7Y,KAAKiiB,WAAW/nB,KAAK8F,KAAKs2B,aAEhC,IACEzd,EAAM7Y,KAAKiiB,WAAW/nB,KAAK8F,KAAKs2B,QAChC,MAAO/4B,GACPsb,EAAM,IAAIid,GAAgBv4B,GAMhC,OAFA81B,GAAqBra,GACrBhZ,KAAKg2B,cAAe,EACbnd,GAETiP,EAAOgQ,SAAW,SAASA,IACpB93B,KAAKy2B,aACRsB,GAAe/3B,MACfA,KAAK+zB,YAASzzB,IAMlBwnB,EAAOiN,SAAW,SAASA,EAAS/M,EAAUgN,GAC5C,IAAIrB,EAAQ3zB,KACRg4B,GAAY,EACZC,OAAY33B,EAChB,OAAO43B,IAAQ,WAEb,IAAI1N,EAAWmJ,EAAM/4B,MACrB,IAAKo9B,GAAahD,EAAiB,CACjC,IAAImD,EAAQtF,KACZ7K,EAAS,CACPiN,eAAgB,WAChBC,gBAAiBvB,EAAMxM,MACvB3pB,KAAMi3B,GACN94B,OAAQg4B,EACRnJ,SAAUA,EACVE,SAAUuN,IAEZ1E,GAAa4E,GAEfH,GAAY,EACZC,EAAYzN,MAGhB1C,EAAOuP,wBAA0B,SAASA,MAW1CvP,EAAO/d,SAAW,SAASA,IACzB,OAAO/J,KAAKmnB,MAAQ,IAAMnnB,KAAKiiB,WAAWlY,WAAa,KAEzD+d,EAAOuN,QAAU,SAASA,IACxB,OAAOzQ,GAAY5kB,KAAKpF,QAE1BktB,EAAOyN,IAAyB,WAC9B,OAAOv1B,KAAKq1B,WAEPjE,EA/NwB,GAiO7BgH,GAA+BlU,GAA0B,gBAAiBkN,IAE1E1J,GAoBA0O,IAnBJ,SAAW1O,GAGTA,EAAkBA,EAAiC,eAAK,GAAK,gBAI7DA,EAAkBA,EAA+B,YAAI,GAAK,cAO1DA,EAAkBA,EAAmC,gBAAI,GAAK,kBAG9DA,EAAkBA,EAA0B,OAAI,GAAK,SAjBvD,CAkBGA,KAAsBA,GAAoB,KAE7C,SAAW0O,GACTA,EAAUA,EAAgB,KAAI,GAAK,OACnCA,EAAUA,EAAe,IAAI,GAAK,MAClCA,EAAUA,EAAiB,MAAI,GAAK,QAHtC,CAIGA,KAAcA,GAAY,KAC7B,IAAIN,GAAkB,SAASA,EAAgB0B,GAC7Cx3B,KAAKw3B,WAAQ,EACbx3B,KAAKw3B,MAAQA,GAIf,SAASD,GAAkBh6B,GACzB,OAAOA,aAAau4B,GAatB,SAASkB,GAAc/U,GACrB,OAAQA,EAAWuT,oBACjB,KAAK9N,GAAkBkO,YACrB,OAAO,EACT,KAAKlO,GAAkBC,cACvB,KAAKD,GAAkB2Q,OACrB,OAAO,EACT,KAAK3Q,GAAkB4Q,gBAOnB,IAJA,IAAIC,EAAsBtF,IAAqB,GAC3CuF,EAAgB3F,KAChB4F,EAAMxW,EAAWwT,WACnBz7B,EAAIy+B,EAAIt1B,OACDpJ,EAAI,EAAGA,EAAIC,EAAGD,IAAK,CAC1B,IAAIsE,EAAMo6B,EAAI1+B,GACd,GAAIq+B,GAAgB/5B,GAAM,CACxB,GAAImlB,GAAYqU,uBACdx5B,EAAIzD,WAEJ,IACEyD,EAAIzD,MACJ,MAAO2C,GAIP,OAFAg2B,GAAaiF,GACblF,GAAmBiF,IACZ,EAMX,GAAItW,EAAWuT,qBAAuB9N,GAAkB2Q,OAGtD,OAFA9E,GAAaiF,GACblF,GAAmBiF,IACZ,GAOb,OAHAG,GAA2BzW,GAC3BsR,GAAaiF,GACblF,GAAmBiF,IACZ,GAIf,SAASI,KACP,OAA0C,OAAnCnV,GAAYiP,mBAGrB,SAAS4B,GAAoCzL,GAI3C,IAAIgQ,EAMN,SAASC,GAA4BlP,GAC/B,EASN,SAASiO,GAAqB3V,EAAYxG,EAAGK,GAC3C,IAAIyc,EAAsBtF,IAAqB,GAG/CyF,GAA2BzW,GAC3BA,EAAWyT,cAAgB,IAAIv0B,MAAM8gB,EAAWwT,WAAWtyB,OAAS,KACpE8e,EAAW4T,kBAAoB,EAC/B5T,EAAW0T,SAAWnS,GAAYsV,MAClC,IAAIC,EAAevV,GAAYiP,mBAG3BxW,EACJ,GAHAuH,GAAYiP,mBAAqBxQ,EACjCuB,GAAYuT,WAE+B,IAAvCvT,GAAYqU,uBACd5b,EAASR,EAAEvhB,KAAK4hB,QAEhB,IACEG,EAASR,EAAEvhB,KAAK4hB,GAChB,MAAOve,GACP0e,EAAS,IAAI6Z,GAAgBv4B,GAQjC,OALAimB,GAAYuT,UACZvT,GAAYiP,mBAAqBsG,EACjCC,GAAiB/W,GACjBgX,GAAuChX,GACvCqR,GAAmBiF,GACZtc,EAET,SAASgd,GAAuChX,IAgBhD,SAAS+W,GAAiB/W,GAUxB,IARA,IAAIiX,EAAgBjX,EAAWwT,WAC3B0D,EAAYlX,EAAWwT,WAAaxT,EAAWyT,cAC/C0D,EAAoC1R,GAAkBkO,YAItDyD,EAAK,EACPr/B,EAAIioB,EAAW4T,kBACR97B,EAAI,EAAGA,EAAIC,EAAGD,IAAK,CAC1B,IAAIu/B,EAAMH,EAAUp/B,GACG,IAAnBu/B,EAAI/R,aACN+R,EAAI/R,WAAa,EACb8R,IAAOt/B,IACTo/B,EAAUE,GAAMC,GAElBD,KAIEC,EAAI9D,mBAAqB4D,IAC3BA,EAAoCE,EAAI9D,oBAS5C,IANA2D,EAAUh2B,OAASk2B,EACnBpX,EAAWyT,cAAgB,KAI3B17B,EAAIk/B,EAAc/1B,OACXnJ,KAAK,CACV,IAAIu/B,EAAOL,EAAcl/B,GACD,IAApBu/B,EAAKhS,YACPiS,GAAeD,EAAMtX,GAEvBsX,EAAKhS,WAAa,EAKpB,KAAO8R,KAAM,CACX,IAAII,EAAQN,EAAUE,GACG,IAArBI,EAAMlS,aACRkS,EAAMlS,WAAa,EACnBmS,GAAYD,EAAOxX,IAKnBmX,IAAsC1R,GAAkBkO,cAC1D3T,EAAWuT,mBAAqB4D,EAChCnX,EAAW4U,kBAGf,SAASkB,GAAe9V,GAEtB,IAAIwW,EAAMxW,EAAWwT,WACrBxT,EAAWwT,WAAa,GAExB,IADA,IAAI17B,EAAI0+B,EAAIt1B,OACLpJ,KACLy/B,GAAef,EAAI1+B,GAAIkoB,GAEzBA,EAAWuT,mBAAqB9N,GAAkBC,cAEpD,SAASgS,GAAUC,GACjB,IAAI5gB,EAAO6Z,KACX,IACE,OAAO+G,IACP,QACArG,GAAava,IAGjB,SAAS6Z,KACP,IAAI7Z,EAAOwK,GAAYiP,mBAEvB,OADAjP,GAAYiP,mBAAqB,KAC1BzZ,EAET,SAASua,GAAava,GACpBwK,GAAYiP,mBAAqBzZ,EAEnC,SAASia,GAAqB4G,GAC5B,IAAI7gB,EAAOwK,GAAYqW,gBAEvB,OADArW,GAAYqW,gBAAkBA,EACvB7gB,EAET,SAASsa,GAAmBta,GAC1BwK,GAAYqW,gBAAkB7gB,EAMhC,SAAS0f,GAA2BzW,GAClC,GAAIA,EAAWuT,qBAAuB9N,GAAkBkO,YAAxD,CAGA3T,EAAWuT,mBAAqB9N,GAAkBkO,YAGlD,IAFA,IAAI6C,EAAMxW,EAAWwT,WACjB17B,EAAI0+B,EAAIt1B,OACLpJ,KACL0+B,EAAI1+B,GAAG0tB,qBAAuBC,GAAkBkO,aAOpD,IAAIkE,GAAiB,CAAC,WAAY,eAAgB,iBAAkB,2BAA4B,6BAA8B,6BAA8B,kBAAmB,yBAA0B,QAAS,YAAa,cAC3NC,GAAc,SAASA,IACzB/5B,KAAKg6B,QAAU,EACfh6B,KAAKm0B,UAAY,GACjBn0B,KAAKyyB,mBAAqB,KAC1BzyB,KAAKk3B,gBAAkB,KACvBl3B,KAAK84B,MAAQ,EACb94B,KAAKyjB,SAAW,EAChBzjB,KAAK+2B,QAAU,EACf/2B,KAAKi6B,sBAAwB,GAC7Bj6B,KAAKk6B,iBAAmB,GACxBl6B,KAAKm6B,oBAAqB,EAC1Bn6B,KAAK4yB,mBAAoB,EACzB5yB,KAAK65B,iBAAkB,EACvB75B,KAAKo6B,gBAAiB,EACtBp6B,KAAKq6B,aAAe,GACpBr6B,KAAKs6B,4BAA8B,GACnCt6B,KAAKu6B,0BAA2B,EAChCv6B,KAAKw6B,4BAA6B,EAClCx6B,KAAKy6B,4BAA6B,EAClCz6B,KAAK63B,wBAAyB,EAC9B73B,KAAKozB,wBAAyB,EAC9BpzB,KAAKqwB,YAAa,EAClBrwB,KAAK06B,eAAgB,EACrB16B,KAAK+rB,iBAAkB,GAErB4O,IAAsB,EACtBC,IAAgB,EAChBpX,GAA2B,WAC7B,IAAId,EAAsBF,IAO1B,OANIE,EAAOmY,oBAAsB,IAAMnY,EAAOoY,gBAC5CH,IAAsB,GAEpBjY,EAAOoY,eAAiBpY,EAAOoY,cAAcd,WAAY,IAAID,IAAcC,UAC7EW,IAAsB,GAEnBA,GASMjY,EAAOoY,eAChBpY,EAAOmY,qBAAuB,EACzBnY,EAAOoY,cAAc3G,YACxBzR,EAAOoY,cAAc3G,UAAY,IAE5BzR,EAAOoY,gBAEdpY,EAAOmY,oBAAsB,EACtBnY,EAAOoY,cAA6B,IAAIf,KAd/ClsB,YAAW,WACJ+sB,IACHxY,EAAI,MAEL,GACI,IAAI2X,IAhBgB,GA4B/B,SAASgB,KAKP,IAJIvX,GAAY0W,iBAAiB/2B,QAAUqgB,GAAYuT,SAAWvT,GAAY2W,qBAC5E/X,EAAI,IAENwY,IAAgB,EACZD,GAAqB,CACvB,IAAIjY,EAASF,IACwB,KAA/BE,EAAOmY,sBACXnY,EAAOoY,mBAAgBx6B,GAEzBkjB,GAAc,IAAIuW,IAGtB,SAASiB,KACP,OAAOxX,GAMT,SAASyX,KACP,IAAIC,EAAiB,IAAInB,GACzB,IAAK,IAAIz+B,KAAO4/B,GACuB,IAAjCpB,GAAe7kB,QAAQ3Z,KACzBkoB,GAAYloB,GAAO4/B,EAAe5/B,IAGtCkoB,GAAYoP,mBAAqBpP,GAAY4W,eAG/C,SAASxB,GAAajP,GACpB,OAAOA,EAAWrC,YAAcqC,EAAWrC,WAAWne,KAAO,EAE/D,SAASgyB,GAAaxR,GACpB,OAAOA,EAAWrC,WAmBpB,SAASoS,GAAY/P,EAAYvsB,GAI/BusB,EAAWrC,WAAW1gB,IAAIxJ,GACtBusB,EAAWlC,qBAAuBrqB,EAAKo4B,qBACzC7L,EAAWlC,qBAAuBrqB,EAAKo4B,oBAM3C,SAASgE,GAAe7P,EAAYvsB,GAIlCusB,EAAWrC,WAAmB,OAAElqB,GACG,IAA/BusB,EAAWrC,WAAWne,MAExBiyB,GAAsBzR,GAM1B,SAASyR,GAAsBzR,IACc,IAAvCA,EAAWvC,0BAEbuC,EAAWvC,yBAA0B,EACrC5D,GAAYyW,sBAAsBt6B,KAAKgqB,IAQ3C,SAAStB,KACP7E,GAAYuT,UAEd,SAASxO,KACP,GAA8B,KAAxB/E,GAAYuT,QAAe,CAC/BsE,KAGA,IADA,IAAIC,EAAO9X,GAAYyW,sBACdlgC,EAAI,EAAGA,EAAIuhC,EAAKn4B,OAAQpJ,IAAK,CACpC,IAAI4vB,EAAa2R,EAAKvhC,GACtB4vB,EAAWvC,yBAA0B,EACF,IAA/BuC,EAAWrC,WAAWne,OACpBwgB,EAAWtC,mBAEbsC,EAAWtC,kBAAmB,EAC9BsC,EAAW1B,SAET0B,aAAsByH,IAGxBzH,EAAWmO,YAIjBtU,GAAYyW,sBAAwB,IAGxC,SAAS/R,GAAeyB,GACtBkP,GAA4BlP,GAC5B,IAAI1H,EAAauB,GAAYiP,mBAC7B,OAAmB,OAAfxQ,GAMEA,EAAW0T,SAAWhM,EAAWnC,kBACnCmC,EAAWnC,gBAAkBvF,EAAW0T,OAExC1T,EAAWyT,cAAczT,EAAW4T,qBAAuBlM,GACtDA,EAAWtC,kBAAoB7D,GAAY0T,kBAC9CvN,EAAWtC,kBAAmB,EAC9BsC,EAAW5B,SAGR4B,EAAWtC,mBACsB,IAA/BsC,EAAWrC,WAAWne,MAAcqa,GAAYuT,QAAU,GACnEqE,GAAsBzR,IAEjB,GAuBT,SAASrB,GAAiBqB,GAEpBA,EAAWlC,uBAAyBC,GAAkB2Q,SAG1D1O,EAAWlC,qBAAuBC,GAAkB2Q,OAEpD1O,EAAWrC,WAAWvlB,SAAQ,SAAU1H,GAClCA,EAAEm7B,qBAAuB9N,GAAkBkO,aAI7Cv7B,EAAEw8B,iBAEJx8B,EAAEm7B,mBAAqB9N,GAAkB2Q,WAK7C,SAASjB,GAAyBzN,GAE5BA,EAAWlC,uBAAyBC,GAAkB2Q,SAG1D1O,EAAWlC,qBAAuBC,GAAkB2Q,OACpD1O,EAAWrC,WAAWvlB,SAAQ,SAAU1H,GAClCA,EAAEm7B,qBAAuB9N,GAAkB4Q,gBAC7Cj+B,EAAEm7B,mBAAqB9N,GAAkB2Q,OAIhCh+B,EAAEm7B,qBAAuB9N,GAAkBkO,cAEpDjM,EAAWlC,qBAAuBC,GAAkBkO,iBAM1D,SAASkB,GAAsBnN,GAEzBA,EAAWlC,uBAAyBC,GAAkBkO,cAG1DjM,EAAWlC,qBAAuBC,GAAkB4Q,gBACpD3O,EAAWrC,WAAWvlB,SAAQ,SAAU1H,GAClCA,EAAEm7B,qBAAuB9N,GAAkBkO,cAC7Cv7B,EAAEm7B,mBAAqB9N,GAAkB4Q,gBACzCj+B,EAAEw8B,sBAMR,SAAS0E,GAAatZ,EAAY0H,GAEhC,GADAzrB,QAAQgW,IAAI,iBAAmB+N,EAAWkF,MAAQ,yCAA2CwC,EAAWxC,MAAQ,KAC5GlF,EAAWkU,aAAeC,GAAUoF,MAAO,CAC7C,IAAIC,EAAQ,GACZC,GAAaC,GAAkB1Z,GAAawZ,EAAO,GAEnD,IAAI39B,SAAS,2BAA6BmkB,EAAWkF,MAAQ,8DAAgElF,EAAWkF,MAAQ,0BAA4BwC,EAAWxC,MAAQ,2OAA6OlF,aAAsBmP,GAAgBnP,EAAWA,WAAWlY,WAAW6N,QAAQ,SAAU,KAAO,IAAM,oDAAsD6jB,EAAMvjB,KAAK,MAAQ,aAA3lB,IAGJ,SAASwjB,GAAaE,EAAMH,EAAOI,GAC7BJ,EAAMt4B,QAAU,IAClBs4B,EAAM97B,KAAK,oBAGb87B,EAAM97B,KAAK,GAAK,KAAKm8B,OAAOD,EAAQ,GAAKD,EAAKthC,MAC1CshC,EAAKG,cACPH,EAAKG,aAAah6B,SAAQ,SAAUwQ,GAClC,OAAOmpB,GAAanpB,EAAOkpB,EAAOI,EAAQ,OAKhD,IAAIG,GAAwB,WAG1B,SAASA,EAAS7U,EAAO8U,EAAeC,EAAeC,QACvC,IAAVhV,IACFA,EAA4E,YAE9EnnB,KAAKmnB,WAAQ,EACbnnB,KAAKi8B,mBAAgB,EACrBj8B,KAAKk8B,mBAAgB,EACrBl8B,KAAKm8B,yBAAsB,EAC3Bn8B,KAAKy1B,WAAa,GAClBz1B,KAAK01B,cAAgB,GACrB11B,KAAKw1B,mBAAqB9N,GAAkBC,cAC5C3nB,KAAKunB,WAAa,EAClBvnB,KAAK21B,OAAS,EACd31B,KAAK61B,kBAAoB,EACzB71B,KAAKo8B,aAAc,EACnBp8B,KAAKq8B,cAAe,EACpBr8B,KAAKs8B,iBAAkB,EACvBt8B,KAAKu8B,YAAa,EAClBv8B,KAAKm2B,WAAaC,GAAUC,KAC5Br2B,KAAKmnB,MAAQA,EACbnnB,KAAKi8B,cAAgBA,EACrBj8B,KAAKk8B,cAAgBA,EACrBl8B,KAAKm8B,oBAAsBA,EAE7B,IAAIrU,EAASkU,EAASngC,UAoItB,OAnIAisB,EAAO+O,eAAiB,SAASA,IAC/B72B,KAAKw8B,aAEP1U,EAAO0U,UAAY,SAASA,IACrBx8B,KAAKq8B,eACRr8B,KAAKq8B,cAAe,EACpB7Y,GAAY0W,iBAAiBv6B,KAAKK,MAClCq7B,OAGJvT,EAAO2U,YAAc,SAASA,IAC5B,OAAOz8B,KAAKq8B,cAKdvU,EAAO4U,aAAe,SAASA,IAC7B,IAAK18B,KAAKo8B,YAAa,CACrB/T,KACAroB,KAAKq8B,cAAe,EACpB,IAAIrjB,EAAOwK,GAAY0T,gBAEvB,GADA1T,GAAY0T,gBAAkBl3B,KAC1Bg3B,GAAch3B,MAAO,CACvBA,KAAKs8B,iBAAkB,EACvB,IACEt8B,KAAKi8B,gBAQL,MAAO1+B,GACPyC,KAAK28B,6BAA6Bp/B,IAGtCimB,GAAY0T,gBAAkBle,EAC9BuP,OAGJT,EAAO6P,MAAQ,SAASA,EAAM95B,GAC5B,IAAImC,KAAKo8B,YAAT,CAKA/T,KACA,IAAIuU,GA6IC,EA5IDC,EACA,EAOJ78B,KAAKu8B,YAAa,EAClB,IAAIO,EAAetZ,GAAY0T,gBAC/B1T,GAAY0T,gBAAkBl3B,KAC9B,IAAIic,EAAS2b,GAAqB53B,KAAMnC,OAAIyC,GAC5CkjB,GAAY0T,gBAAkB4F,EAC9B98B,KAAKu8B,YAAa,EAClBv8B,KAAKs8B,iBAAkB,EACnBt8B,KAAKo8B,aAEPrE,GAAe/3B,MAEbu3B,GAAkBtb,IACpBjc,KAAK28B,6BAA6B1gB,EAAOub,OAO3CjP,OAEFT,EAAO6U,6BAA+B,SAASA,EAA6BvoB,GAC1E,IAAIuf,EAAQ3zB,KACZ,GAAIA,KAAKk8B,cACPl8B,KAAKk8B,cAAc9nB,EAAOpU,UAD5B,CAIA,GAAIwjB,GAAYqU,uBACd,MAAMzjB,EAER,IAAIrF,EAAuK,6BAA+B/O,KAAO,IAC5MwjB,GAAY4P,wBACfl1B,QAAQkW,MAAMrF,EAASqF,GAazBoP,GAAY8W,4BAA4Bv4B,SAAQ,SAAU0Z,GACxD,OAAOA,EAAErH,EAAOuf,QAGpB7L,EAAOiV,QAAU,SAASA,IACnB/8B,KAAKo8B,cACRp8B,KAAKo8B,aAAc,EACdp8B,KAAKu8B,aAERlU,KACA0P,GAAe/3B,MACfuoB,QAINT,EAAOkV,aAAe,SAASA,IAC7B,IAAIniC,EAAImF,KAAK+8B,QAAQxhC,KAAKyE,MAE1B,OADAnF,EAAEosB,IAASjnB,KACJnF,GAETitB,EAAO/d,SAAW,SAASA,IACzB,MAAO,YAAc/J,KAAKmnB,MAAQ,KAEpCW,EAAOmV,MAAQ,SAASC,EAAQC,QACN,IAApBA,IACFA,GAAkB,GAEpBF,GAAMj9B,KAAMm9B,IAEPnB,EA/JmB,GAiK5B,SAASoB,GAAgBvI,GAEvB,OADArR,GAAY8W,4BAA4B36B,KAAKk1B,GACtC,WACL,IAAIwI,EAAM7Z,GAAY8W,4BAA4BrlB,QAAQ4f,GACtDwI,GAAO,GACT7Z,GAAY8W,4BAA4BhnB,OAAO+pB,EAAK,IAS1D,IAAIC,GAA0B,IAC1BC,GAAoB,SAASA,EAAkB9hB,GACjD,OAAOA,KAET,SAAS4f,KAEH7X,GAAYuT,QAAU,GAAKvT,GAAY2W,oBAG3CoD,GAAkBC,IAEpB,SAASA,KACPha,GAAY2W,oBAAqB,EAMjC,IALA,IAAIsD,EAAeja,GAAY0W,iBAC3BwD,EAAa,EAIVD,EAAat6B,OAAS,GAAG,CAlBJ,OAmBpBu6B,IACJx/B,QAAQkW,MAA8N,6BAA+BqpB,EAAa,IAClRA,EAAanqB,OAAO,IAItB,IADA,IAAIqqB,EAAqBF,EAAanqB,OAAO,GACpCvZ,EAAI,EAAGC,EAAI2jC,EAAmBx6B,OAAQpJ,EAAIC,EAAGD,IACpD4jC,EAAmB5jC,GAAG2iC,eAG1BlZ,GAAY2W,oBAAqB,EAEnC,IAAIyD,GAA0B1Z,GAA0B,WAAY8X,IACpE,SAAS6B,GAAqBhgC,GAC5B,IAAIigC,EAAgBP,GACpBA,GAAoB,SAASA,EAAkB9hB,GAC7C,OAAO5d,GAAG,WACR,OAAOigC,EAAcriB,OAK3B,SAASsiB,KACP,OAAO,EAET,SAASC,GAAUxxB,GAOjB,IAAIyxB,EACKlkC,EAAOC,EAIlB,SAASkkC,GAAe1xB,GAItB,IAAI+nB,EAKN,IAAI4J,GAAY,CACd3gC,KAAM,aACN4gC,cAAc,GAEhB,SAASA,GAAa7J,IAatB,SAAS8J,GAAIrW,GAGT,OADA9pB,QAAQC,KAAK,8CACN,aAWX,IAAImgC,GAAS,SACTC,GAAe,eACfC,GAAa,aACbC,GAAmB,mBACnBC,GAAsB,mBACtBnQ,GAAgCrD,GAAuBoT,IACvDK,GAAqCzT,GAAuBqT,GAAc,CAC5EhT,OAAO,IAELqT,GAAoC1T,GAAuBsT,GAAY,CACzExU,YAAY,IAEV6U,GAAyC3T,GAAuBuT,GAAkB,CACpFzU,YAAY,EACZuB,OAAO,IAET,SAASuT,GAAoB9U,GAC3B,IAAInR,EAwBJ,OAxBU,SAAS+gB,EAAO1I,EAAMpB,GAE9B,OAAIjoB,GAAWqpB,GACNzE,GAAayE,EAAK52B,MAhBL,mBAgBkC42B,EAAMlH,GAG1DniB,GAAWioB,GACNrD,GAAayE,EAAMpB,EAAM9F,GAG9BnG,GAAYiM,GACPjJ,GAAgBqK,EAAMpB,EAAM9F,EAAa4U,GAAuBrQ,IAGrE1K,GAAYqN,GACPvK,GAA0BuE,GAAuBlB,EAAawU,GAAaF,GAAQ,CACxFhkC,KAAM42B,EACNlH,WAAYA,UAGZ,GAMR,IAAI4P,GAAsBkF,IAAoB,GAC9CrkC,OAAO0R,OAAOytB,GAAQrL,IACtB,IAAIvE,GAA0B8U,IAAoB,GAIlD,SAASnlB,GAAY9b,GACnB,OAAOg0B,GAAch0B,EAAGvD,MA9CA,oBA8C6B,EAAOuD,EAAImC,UAAMM,GAExE,SAASupB,GAAS/b,GAChB,OAAOjG,GAAWiG,KAAiC,IAAvBA,EAAMgkB,aASpC,SAASoG,GAAQlzB,EAAMmsB,GACrB,IAAI4N,EAAYC,OACH,IAAT7N,IACFA,EAAOnO,GAUT,IAAI1oB,EAAsE,OAA9DykC,EAA+B,OAAjBC,EAAQ7N,QAAgB,EAAS6N,EAAM1kC,MAAgBykC,EAA6F,UAC1KE,EACAC,EACJ,IAFe/N,EAAKgO,YAAchO,EAAKiO,MAIrCF,EAAW,IAAIlD,GAAS1hC,GAAM,WAC5B0F,KAAK23B,MAAM0H,KACVlO,EAAKmO,QAASnO,EAAKoO,wBACjB,CACL,IAAIJ,EAAYK,GAA2BrO,GAEvCsL,GAAc,EAClByC,EAAW,IAAIlD,GAAS1hC,GAAM,WACvBmiC,IACHA,GAAc,EACd0C,GAAU,WACR1C,GAAc,EACTyC,EAAS9C,aACZ8C,EAASvH,MAAM0H,SAIpBlO,EAAKmO,QAASnO,EAAKoO,oBAExB,SAASF,IACPr6B,EAAKk6B,GAGP,OADAA,EAAS1C,YACF0C,EAASlC,eAzDlBviC,OAAO0R,OAAO6d,GAAY4U,IAC1BhF,GAAOrO,MAAqB5E,GAA0BgY,IACtD3U,GAAWuB,MAAqB5E,GAA0BkY,IAyD1D,IAAIY,GAAM,SAASA,EAAIhkB,GACrB,OAAOA,KAET,SAAS+jB,GAA2BrO,GAClC,OAAOA,EAAKgO,UAAYhO,EAAKgO,UAAYhO,EAAKiO,MAAQ,SAAU3jB,GAC9D,OAAO5N,WAAW4N,EAAG0V,EAAKiO,QACxBK,GAEN,SAASP,GAASQ,EAAYC,EAAQxO,GACpC,IAAIyO,OACS,IAATzO,IACFA,EAAOnO,GAUT,IAAI1oB,EAAoC,OAA5BslC,EAAczO,EAAK72B,MAAgBslC,EAAkF,WAC7HC,EAAejG,GAAOt/B,EAAM62B,EAAKmO,QAAUQ,GAAiB3O,EAAKmO,QAASK,GAAUA,GACpFV,GAAW9N,EAAKgO,YAAchO,EAAKiO,MACnCD,EAAYK,GAA2BrO,GACvC6G,GAAY,EACZyE,GAAc,EACdzhC,EACA0vB,EACAyF,EAASgB,EAAKuF,kBAAoBrN,GAASE,WAAa4H,EAAKhB,QAAU9G,GAAkB,QACzFxuB,EAAI,IAAImhC,GAAS1hC,GAAM,WACrB09B,GAAaiH,EACfI,IACU5C,IACVA,GAAc,EACd0C,EAAUE,MAEXlO,EAAKmO,QAASnO,EAAKoO,oBACtB,SAASF,IAEP,GADA5C,GAAc,GACV5hC,EAAEuhC,YAAN,CAGA,IAAI1E,GAAU,EACd78B,EAAE88B,OAAM,WACN,IAAIoI,EAAYnN,IAAkB,GAAO,WACvC,OAAO8M,EAAW7kC,MAEpB68B,EAAUM,IAAc7H,EAAOn1B,EAAO+kC,GACtCrV,EAAW1vB,EACXA,EAAQ+kC,MAEN/H,GAAa7G,EAAK6D,kBAEVgD,GAAaN,IADvBmI,EAAa7kC,EAAO0vB,EAAU7vB,GAIhCm9B,GAAY,GAGd,OADAn9B,EAAE2hC,YACK3hC,EAAEmiC,eAEX,SAAS8C,GAAiBE,EAAcC,GACtC,OAAO,WACL,IACE,OAAOA,EAAO9qB,MAAMnV,KAAMsa,WAC1B,MAAO/c,GACPyiC,EAAa9lC,KAAK8F,KAAMzC,KAK9B,IAAI2iC,GAAqB,OACrBC,GAAuB,QAC3B,SAAStX,GAAiB/a,EAAOgiB,EAAMC,GACrC,OAAOqQ,GAHgB,OAGkBtyB,EAAOgiB,EAAMC,GAExD,SAASjH,GAAmBhb,EAAOgiB,EAAMC,GACvC,OAAOqQ,GALkB,QAKkBtyB,EAAOgiB,EAAMC,GAE1D,SAASqQ,GAAcC,EAAMvyB,EAAOgiB,EAAMC,GACxC,IAAInH,EAAuB,mBAATmH,EAAsBuQ,GAAQxyB,EAAOgiB,GAAQwQ,GAAQxyB,GACnEyyB,EAAK14B,GAAWkoB,GAAQA,EAAOD,EAC/B0Q,EAAeH,EAAO,IAM1B,OALIzX,EAAK4X,GACP5X,EAAK4X,GAAc55B,IAAI25B,GAEvB3X,EAAK4X,GAAgB,IAAIx6B,IAAI,CAACu6B,IAEzB,WACL,IAAIE,EAAgB7X,EAAK4X,GACrBC,IACFA,EAAsB,OAAEF,GACG,IAAvBE,EAAct3B,aACTyf,EAAK4X,KAMpB,IAAIE,GAAQ,QACRC,GAAS,SACTC,GAAW,WAEf,SAAS1zB,GAAUC,IACkB,IAA/BA,EAAQ4tB,oBACVA,KAEF,IAAI1K,EAAaljB,EAAQkjB,WACvB+J,EAAiBjtB,EAAQitB,eAO3B,QANmB95B,IAAf+vB,IACF7M,GAAY6M,WAAaA,IAAesQ,IAAgBtQ,IAAeqQ,IAAiC,oBAAVxd,OAE7E,gBAAfmN,IACF7M,GAAYkX,eAAgB,QAEPp6B,IAAnB85B,EAA8B,CAChC,IAAIyG,EAAKzG,IAAmBuG,GAASA,GAASvG,IAAmBwG,GACjEpd,GAAY4W,eAAiByG,EAC7Brd,GAAYoP,mBAA2B,IAAPiO,GAAeA,IAAOF,GAExD,CAAC,2BAA4B,6BAA8B,6BAA8B,yBAA0B,mBAAmB5+B,SAAQ,SAAUzG,GAClJA,KAAO6R,IACTqW,GAAYloB,KAAS6R,EAAQ7R,OAGjCkoB,GAAYqW,iBAAmBrW,GAAYiX,2BAIvCttB,EAAQowB,mBACVM,GAAqB1wB,EAAQowB,mBAIjC,SAAS7M,GAAiB1sB,EAAQ88B,EAAYC,EAAa5zB,GAmBzD,IAAI6zB,EAAcjc,GAA0B+b,GACxC9V,EAAM2F,GAAmB3sB,EAAQmJ,GAAS8Z,IAC9CoB,KACA,IACE5D,GAAQuc,GAAaj/B,SAAQ,SAAUzG,GACrC0vB,EAAID,QAAQzvB,EAAK0lC,EAAY1lC,IAE5BylC,MAAqBzlC,KAAOylC,IAAcA,EAAYzlC,QAEzD,QACAitB,KAEF,OAAOvkB,EAGT,SAAS23B,GAAkB7tB,EAAOlS,GAChC,OAAOqlC,GAAqBX,GAAQxyB,EAAOlS,IAE7C,SAASqlC,GAAqB7jC,GAC5B,IAAI6e,EAAS,CACX3hB,KAAM8C,EAAK+pB,OAKb,OAHI/pB,EAAKq4B,YAAcr4B,EAAKq4B,WAAWtyB,OAAS,IAC9C8Y,EAAO8f,aAAemF,GAAO9jC,EAAKq4B,YAAYp2B,IAAI4hC,KAE7ChlB,EAET,SAASklB,GAAgBrzB,EAAOlS,GAC9B,OAAOwlC,GAAmBd,GAAQxyB,EAAOlS,IAE3C,SAASwlC,GAAmBhkC,GAC1B,IAAI6e,EAAS,CACX3hB,KAAM8C,EAAK+pB,OAKb,OAHIyR,GAAax7B,KACf6e,EAAOolB,UAAYlgC,MAAM+d,KAAKic,GAAa/9B,IAAOiC,IAAI+hC,KAEjDnlB,EAET,SAASilB,GAAO5F,GACd,OAAOn6B,MAAM+d,KAAK,IAAIlZ,IAAIs1B,IAG5B,IAAIgG,GAAc,EAClB,SAASC,KACPvhC,KAAK+O,QAAU,iBAGjB,SAASyyB,GAAwBptB,GAC/B,OAAOA,aAAiBmtB,GAF1BA,GAAsB1lC,UAAyBpB,OAAOY,OAAO2T,MAAMnT,WAInE,IAAIyyB,GAA8B3B,GAAqB,QACnD8U,GAAmC9U,GAAqB,aAAc,CACxEpB,OAAO,IAELxB,GAAoBtvB,OAAO0R,QAAO,SAAS4d,EAAKmH,EAAMpB,GAExD,GAAIjM,GAAYiM,GACd,OAAOjJ,GAAgBqK,EAAMpB,EAAMxB,IAMrC,IAAIpR,EAAYgU,EACZ52B,EAAO4iB,EAAU5iB,MAAQ,iBAEzBue,EAAM,SAASA,IACjB,IAAI6oB,EAAM1hC,KACNhC,EAAOsc,UACPwe,IAAUwI,GACVK,EAAM/H,GAAOt/B,EAAO,aAAew+B,EAAQ,UAAW5b,GAAW/H,MAAMusB,EAAK1jC,GAC5E4jC,EACAC,OAAiBvhC,EACjBhE,EAAU,IAAIC,SAAQ,SAAUC,EAASC,GAC3C,IAAIqlC,EAAS,EAEb,SAASC,EAAYlpB,GAEnB,IAAImpB,EADJH,OAAiBvhC,EAEjB,IACE0hC,EAAMpI,GAAOt/B,EAAO,aAAew+B,EAAQ,YAAcgJ,IAAUH,EAAI1oB,MAAM/e,KAAKynC,EAAK9oB,GACvF,MAAOtb,GACP,OAAOd,EAAOc,GAEhB0b,EAAK+oB,GAEP,SAASC,EAAW9P,GAElB,IAAI6P,EADJH,OAAiBvhC,EAEjB,IACE0hC,EAAMpI,GAAOt/B,EAAO,aAAew+B,EAAQ,YAAcgJ,IAAUH,EAAW,OAAGznC,KAAKynC,EAAKxP,GAC3F,MAAO50B,GACP,OAAOd,EAAOc,GAEhB0b,EAAK+oB,GAEP,SAAS/oB,EAAK+oB,GACZ,IAAIn6B,GAAkB,MAAPm6B,OAAc,EAASA,EAAI/+B,MAK1C,OAAI++B,EAAInmB,KACCrf,EAAQwlC,EAAIhnC,QAErB6mC,EAAiBtlC,QAAQC,QAAQwlC,EAAIhnC,QACfiI,KAAK8+B,EAAaE,GAPtCD,EAAI/+B,KAAKgW,EAAMxc,GAxBnBmlC,EAAWnlC,EAiCXslC,OAAYzhC,MAqBd,OAlBAhE,EAAQ4lC,OAAStI,GAAOt/B,EAAO,aAAew+B,EAAQ,aAAa,WACjE,IACM+I,GACFM,GAAcN,GAGhB,IAAIO,EAAOT,EAAY,YAAErhC,GAErB+hC,EAAiB9lC,QAAQC,QAAQ4lC,EAAKpnC,OAC1CqnC,EAAep/B,KAAK2gB,GAAMA,IAC1Bue,GAAcE,GAEdT,EAAS,IAAIL,IACb,MAAOhkC,GACPqkC,EAASrkC,OAINjB,GAGT,OADAuc,EAAIqU,YAAa,EACVrU,IACNyV,IAEH,SAAS6T,GAAc7lC,GACjBuL,GAAWvL,EAAQ4lC,SACrB5lC,EAAQ4lC,SAGZ,SAASI,GAAWrmB,GAClB,OAAOA,EAGT,SAAS6N,GAAOjsB,GACd,OAAiD,KAAnC,MAANA,OAAa,EAASA,EAAGqvB,YAGnC,SAASqV,GAAez0B,EAAO00B,EAAe3N,GAC5C,IAAI7wB,EAeJ,OAdIomB,GAAgBtc,IAAUqc,GAAkBrc,IAAUwnB,GAAkBxnB,GAC1E9J,EAASy+B,GAAkB30B,GAClBoc,GAAmBpc,KAI5B9J,EAASy+B,GAAkB30B,EAAO00B,IAOpCx+B,EAAOgwB,SAAoC,mBAAlBwO,EAA+BA,EAAgB3N,EACjE,WACL7wB,EAAOgwB,cAAW1zB,GAItB,SAASoiC,GAAU50B,EAAO00B,EAAe3N,GACvC,OAAIhtB,GAAWgtB,GACN8N,GAAkB70B,EAAO00B,EAAe3N,GAExC+N,GAAuB90B,EAAO00B,GAGzC,SAASI,GAAuB90B,EAAO+mB,GACrC,OAAO4N,GAAkB30B,GAAO8mB,WAAWC,GAE7C,SAAS8N,GAAkB70B,EAAOlS,EAAUi5B,GAC1C,OAAO4N,GAAkB30B,EAAOlS,GAAUg5B,WAAWC,GAGvD,SAASgO,GAAY7nC,EAAOY,GAC1B,QAAiB0E,IAAb1E,EACF,OAAOw8B,GAAgBp9B,GAEzB,IAAkC,IAA9BkvB,GAAmBlvB,GACrB,OAAO,EAET,IAAKA,EAAMisB,IAAO6b,QAAQr8B,IAAI7K,GAC5B,OAAO,EAET,IAAIgtB,EAAO0X,GAAQtlC,EAAOY,GAC1B,OAAOw8B,GAAgBxP,GAEzB,SAASma,GAAW/nC,GAIlB,OAAO6nC,GAAY7nC,GAErB,SAASgoC,GAAehoC,EAAOiS,GAI7B,OAAO41B,GAAY7nC,EAAOiS,GAG5B,SAASg2B,GAAcjoC,EAAOY,GAC5B,QAAKZ,SAGYsF,IAAb1E,IAIEsuB,GAAmBlvB,IACdA,EAAMisB,IAAO6b,QAAQr8B,IAAI7K,GAK7BsuB,GAAmBlvB,MAAYA,EAAMisB,KAAUuB,GAAOxtB,IAAU4iC,GAAW5iC,IAAUo9B,GAAgBp9B,IAE9G,SAAS0uB,GAAa1uB,GAIpB,OAAOioC,GAAcjoC,GAEvB,SAASkoC,GAAiBloC,EAAOiS,GAI/B,OAAOg2B,GAAcjoC,EAAOiS,GAG9B,SAAS9I,GAAK9F,GACZ,OAAI6rB,GAAmB7rB,GACdA,EAAI4oB,IAAOkc,QAEhB/Y,GAAgB/rB,IAAQgsB,GAAgBhsB,GACnC8C,MAAM+d,KAAK7gB,EAAI8F,QAEpBgmB,GAAkB9rB,GACbA,EAAIgB,KAAI,SAAUuc,EAAGxY,GAC1B,OAAOA,UAGXgf,EAAI,GAEN,SAASghB,GAAO/kC,GACd,OAAI6rB,GAAmB7rB,GACd8F,GAAK9F,GAAKgB,KAAI,SAAU/D,GAC7B,OAAO+C,EAAI/C,MAGX8uB,GAAgB/rB,GACX8F,GAAK9F,GAAKgB,KAAI,SAAU/D,GAC7B,OAAO+C,EAAIzD,IAAIU,MAGf+uB,GAAgBhsB,GACX8C,MAAM+d,KAAK7gB,EAAI+kC,UAEpBjZ,GAAkB9rB,GACbA,EAAI+gB,aAEbgD,EAAI,GAEN,SAAS3P,GAAQpU,GACf,OAAI6rB,GAAmB7rB,GACd8F,GAAK9F,GAAKgB,KAAI,SAAU/D,GAC7B,MAAO,CAACA,EAAK+C,EAAI/C,OAGjB8uB,GAAgB/rB,GACX8F,GAAK9F,GAAKgB,KAAI,SAAU/D,GAC7B,MAAO,CAACA,EAAK+C,EAAIzD,IAAIU,OAGrB+uB,GAAgBhsB,GACX8C,MAAM+d,KAAK7gB,EAAIoU,WAEpB0X,GAAkB9rB,GACbA,EAAIgB,KAAI,SAAU/D,EAAK8H,GAC5B,MAAO,CAACA,EAAO9H,WAGnB8mB,EAAI,GAEN,SAASzf,GAAItE,EAAK/C,EAAKN,GACrB,GAAyB,IAArBsf,UAAUnX,QAAiBknB,GAAgBhsB,GAY3C6rB,GAAmB7rB,GACrBA,EAAI4oB,IAAOoc,KAAK/nC,EAAKN,GACZovB,GAAgB/rB,GACzBA,EAAIsE,IAAIrH,EAAKN,GACJqvB,GAAgBhsB,GACzBA,EAAIuI,IAAItL,GACC6uB,GAAkB9rB,IACR,iBAAR/C,IACTA,EAAMgoC,SAAShoC,EAAK,KAElBA,EAAM,GACR8mB,EAAI,mBAAqB9mB,EAAM,KAEjC+sB,KACI/sB,GAAO+C,EAAI8E,SACb9E,EAAI8E,OAAS7H,EAAM,GAErB+C,EAAI/C,GAAON,EACXutB,MAEAnG,EAAI,OAhCN,CACEiG,KACA,IAAIkb,EAAUjoC,EACd,IACE,IAAK,IAAIgnB,KAAQihB,EACf5gC,GAAItE,EAAKikB,EAAMihB,EAAQjhB,IAEzB,QACAiG,OA2BN,SAASvhB,GAAO3I,EAAK/C,GACf4uB,GAAmB7rB,GACrBA,EAAI4oB,IAAOuc,QAAQloC,GACV8uB,GAAgB/rB,IAEhBgsB,GAAgBhsB,GADzBA,EAAY,OAAE/C,GAGL6uB,GAAkB9rB,IACR,iBAAR/C,IACTA,EAAMgoC,SAAShoC,EAAK,KAEtB+C,EAAIiV,OAAOhY,EAAK,IAEhB8mB,EAAI,GAGR,SAAS3b,GAAIpI,EAAK/C,GAChB,OAAI4uB,GAAmB7rB,GACdA,EAAI4oB,IAAOwc,KAAKnoC,GACd8uB,GAAgB/rB,IAEhBgsB,GAAgBhsB,GADlBA,EAAIoI,IAAInL,GAGN6uB,GAAkB9rB,GACpB/C,GAAO,GAAKA,EAAM+C,EAAI8E,YAE/Bif,EAAI,IAEN,SAASxnB,GAAIyD,EAAK/C,GAChB,GAAKmL,GAAIpI,EAAK/C,GAGd,OAAI4uB,GAAmB7rB,GACdA,EAAI4oB,IAAOyc,KAAKpoC,GACd8uB,GAAgB/rB,GAClBA,EAAIzD,IAAIU,GACN6uB,GAAkB9rB,GACpBA,EAAI/C,QAEb8mB,EAAI,IAEN,SAASuhB,GAAkBtlC,EAAK/C,EAAKqgB,GACnC,GAAIuO,GAAmB7rB,GACrB,OAAOA,EAAI4oB,IAAO0E,gBAAgBrwB,EAAKqgB,GAEzCyG,EAAI,IAEN,SAASwhB,GAAWvlC,GAClB,GAAI6rB,GAAmB7rB,GACrB,OAAOA,EAAI4oB,IAAO4c,WAEpBzhB,EAAI,IAGN,SAAS0hB,GAAQh2B,EAAOi2B,EAAUC,EAAUhP,GAC1C,OAAIntB,GAAWm8B,GACNC,GAA0Bn2B,EAAOi2B,EAAUC,EAAUhP,GAErDkP,GAAkBp2B,EAAOi2B,EAAUC,GAG9C,SAASE,GAAkBp2B,EAAOka,EAAUgN,GAC1C,OAAOyN,GAAkB30B,GAAOinB,SAAS/M,EAAUgN,GAErD,SAASiP,GAA0Bn2B,EAAOlS,EAAUosB,EAAUgN,GAC5D,OAAOyN,GAAkB30B,EAAOlS,GAAUm5B,SAAS/M,EAAUgN,GAG/D,SAASmP,GAAM9kC,EAAK/D,EAAKN,GAEvB,OADAqE,EAAIsD,IAAIrH,EAAKN,GACNA,EAET,SAASopC,GAAW7yB,EAAQ8yB,GAC1B,GAAc,MAAV9yB,GAAoC,iBAAXA,GAAuBA,aAAkB5H,OAAS+f,GAAanY,GAC1F,OAAOA,EAET,GAAI+jB,GAAkB/jB,IAAW6mB,GAAgB7mB,GAC/C,OAAO6yB,GAAW7yB,EAAO3W,MAAOypC,GAElC,GAAIA,EAAc59B,IAAI8K,GACpB,OAAO8yB,EAAczpC,IAAI2W,GAE3B,GAAI4Y,GAAkB5Y,GAAS,CAC7B,IAAIsH,EAAMsrB,GAAME,EAAe9yB,EAAQ,IAAIpQ,MAAMoQ,EAAOpO,SAIxD,OAHAoO,EAAOxP,SAAQ,SAAU/G,EAAOqiC,GAC9BxkB,EAAIwkB,GAAO+G,GAAWppC,EAAOqpC,MAExBxrB,EAET,GAAIwR,GAAgB9Y,GAAS,CAC3B,IAAI6wB,EAAO+B,GAAME,EAAe9yB,EAAQ,IAAIvL,KAI5C,OAHAuL,EAAOxP,SAAQ,SAAU/G,GACvBonC,EAAKx7B,IAAIw9B,GAAWppC,EAAOqpC,OAEtBjC,EAET,GAAIhY,GAAgB7Y,GAAS,CAC3B,IAAI+yB,EAAQH,GAAME,EAAe9yB,EAAQ,IAAI1P,KAI7C,OAHA0P,EAAOxP,SAAQ,SAAU/G,EAAOM,GAC9BgpC,EAAM3hC,IAAIrH,EAAK8oC,GAAWppC,EAAOqpC,OAE5BC,EAGP,IAAIC,EAAQJ,GAAME,EAAe9yB,EAAQ,IAMzC,OALAqyB,GAAWryB,GAAQxP,SAAQ,SAAUzG,GAC/BunB,EAAgBpI,qBAAqBvgB,KAAKqX,EAAQjW,KACpDipC,EAAMjpC,GAAO8oC,GAAW7yB,EAAOjW,GAAM+oC,OAGlCE,EASX,SAASC,GAAKjzB,EAAQpE,GAIpB,OAAOi3B,GAAW7yB,EAAQ,IAAI1P,KAGhC,SAASo7B,KAEL7a,EAAI,iDAGN,IADA,IAAI+a,GAAkB,EACb9a,EAAO/H,UAAUnX,OAAQnF,EAAO,IAAImD,MAAMkhB,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/EtkB,EAAKskB,GAAQhI,UAAUgI,GAEY,kBAA1BtkB,EAAKA,EAAKmF,OAAS,KAC5Bg6B,EAAkBn/B,EAAKkgB,OAEzB,IAAI+D,EAAawiB,GAAgBzmC,GACjC,IAAKikB,EACH,OAAOG,EAAI,iJAETH,EAAWkU,aAAeC,GAAUC,MACtCn4B,QAAQgW,IAAI,iBAAmB+N,EAAWkF,MAAQ,qBAEpDlF,EAAWkU,WAAagH,EAAkB/G,GAAUoF,MAAQpF,GAAUsO,IAExE,SAASD,GAAgBzmC,GACvB,OAAQA,EAAKmF,QACX,KAAK,EACH,OAAOqgB,GAAYiP,mBACrB,KAAK,EACH,OAAO6N,GAAQtiC,EAAK,IACtB,KAAK,EACH,OAAOsiC,GAAQtiC,EAAK,GAAIA,EAAK,KAWnC,SAAS2mC,GAAY/K,EAAQxd,QACX,IAAZA,IACFA,OAAU9b,GAEZ+nB,KACA,IACE,OAAOuR,EAAOzkB,MAAMiH,GACpB,QACAmM,MAIJ,SAASqc,GAAKC,EAAW3T,EAAMpB,GAC7B,OAAyB,IAArBxV,UAAUnX,QAAgB+tB,GAAwB,iBAATA,EACpC4T,GAAYD,EAAW3T,GAEzB6T,GAAMF,EAAW3T,EAAMpB,GAAQ,IAExC,SAASiV,GAAMF,EAAWlF,EAAQxO,GAChC,IAAI6T,EACJ,GAA4B,iBAAjB7T,EAAK1iB,QAAsB,CACpC,IAAI2F,EAAQ,IAAIpF,MAAM,gBACtBg2B,EAAgBn3B,YAAW,WACzB,IAAKo3B,EAAShe,IAAOmV,YAAa,CAEhC,GADA6I,KACI9T,EAAKmO,QAGP,MAAMlrB,EAFN+c,EAAKmO,QAAQlrB,MAKhB+c,EAAK1iB,SAEV0iB,EAAK72B,KAAoF,OACzF,IAAIulC,EAAepT,GAA6E,cAAekT,GAE3GsF,EAAW/M,IAAQ,SAAUr9B,GAE/B,IAAIqqC,EAAOtS,IAAkB,EAAOiS,KAElChqC,EAAEkiC,UACEiI,GACFG,aAAaH,GAEfnF,OAED1O,GACH,OAAO8T,EAET,SAASH,GAAYD,EAAW1T,GAC9B,IAAIiU,EAWAlD,EACAmD,EARJ,GAAY,MAARlU,GAAgD,OAA/BiU,EAAejU,EAAKmU,SAAmBF,EAAaG,QACvE,OAAO9qC,OAAO0R,OAAO5P,QAAQE,OAAO,IAAIuS,MAAM,iBAAkB,CAC9DkzB,OAAQ,SAASA,IACf,OAAO,QAMb,IAAIrpB,EAAM,IAAItc,SAAQ,SAAUC,EAASC,GACvC,IAAI+oC,EACAP,EAAWF,GAAMF,EAAWroC,EAAS8oB,GAAS,GAAI6L,EAAM,CAC1DmO,QAAS7iC,KAEXylC,EAAS,SAASA,IAChB+C,IACAxoC,EAAO,IAAIuS,MAAM,oBAEnBq2B,EAAQ,SAASA,IACfJ,IACAxoC,EAAO,IAAIuS,MAAM,kBAEX,MAARmiB,GAAyD,OAAhCqU,EAAgBrU,EAAKmU,SAA6D,MAAlCE,EAAc98B,kBAAoC88B,EAAc98B,iBAAiB,QAAS28B,MACzJ,SAAE,WACZ,IAAII,EACJ,OAAe,MAARtU,GAAyD,OAAhCsU,EAAgBtU,EAAKmU,SAAgE,MAArCG,EAAcC,yBAAxE,EAA+GD,EAAcC,oBAAoB,QAASL,MAGlL,OADAxsB,EAAIqpB,OAASA,EACNrpB,EAGT,SAAS8sB,GAAO3hC,GACd,OAAOA,EAAOijB,IA5bhB8C,GAAKwB,MAAqB5E,GAA0B8a,IAgcpD,IAAImE,GAAmB,CACrBn/B,IAAK,SAASA,EAAIzC,EAAQ1J,GAIxB,OAAOqrC,GAAO3hC,GAAQy/B,KAAKnpC,IAE7BM,IAAK,SAASA,EAAIoJ,EAAQ1J,GACxB,OAAOqrC,GAAO3hC,GAAQ0/B,KAAKppC,IAE7BqI,IAAK,SAASA,EAAIqB,EAAQ1J,EAAMU,GAC9B,IAAI6qC,EACJ,QAAKhiB,GAAYvpB,KAOiD,OAA1DurC,EAAeF,GAAO3hC,GAAQq/B,KAAK/oC,EAAMU,GAAO,KAAiB6qC,IAE3EC,eAAgB,SAASA,EAAe9hC,EAAQ1J,GAC9C,IAAIyrC,EAIJ,QAAKliB,GAAYvpB,KAIgD,OAAzDyrC,EAAkBJ,GAAO3hC,GAAQw/B,QAAQlpC,GAAM,KAAiByrC,IAE1ErrC,eAAgB,SAASA,EAAesJ,EAAQ1J,EAAMqhB,GACpD,IAAIqqB,EAKJ,OAAqF,OAA7EA,EAAwBL,GAAO3hC,GAAQ2nB,gBAAgBrxB,EAAMqhB,KAAuBqqB,GAE9FvhB,QAAS,SAASA,EAAQzgB,GAIxB,OAAO2hC,GAAO3hC,GAAQ6/B,YAExBoC,kBAAmB,SAASA,EAAkBjiC,GAC5Coe,EAAI,MAGR,SAASwO,GAA0B5sB,EAAQmJ,GACzC,IAAI+4B,EAAeC,EAGnB,OAFA/iB,IAE0E,OAAlE+iB,GAAwBD,GADhCliC,EAAS2sB,GAAmB3sB,EAAQmJ,IACmB8Z,KAAQuF,QAAkB2Z,EAAuBD,EAAc1Z,OAAS,IAAItJ,MAAMlf,EAAQ4hC,IAGnJ,SAAStR,GAAgB8R,GACvB,YAAuC9lC,IAAhC8lC,EAAcvS,eAA+BuS,EAAcvS,cAAc1wB,OAAS,EAE3F,SAAS2xB,GAAoBsR,EAAevR,GAC1C,IAAIwR,EAAeD,EAAcvS,gBAAkBuS,EAAcvS,cAAgB,IAEjF,OADAwS,EAAa1mC,KAAKk1B,GACXloB,IAAK,WACV,IAAI0wB,EAAMgJ,EAAapxB,QAAQ4f,IAClB,IAATwI,GACFgJ,EAAa/yB,OAAO+pB,EAAK,MAI/B,SAAS7I,GAAgB4R,EAAe7R,GACtC,IAAI4D,EAAQtF,KACZ,IAGE,IADA,IAAIwT,EAAe,GAAG3mC,OAAO0mC,EAAcvS,eAAiB,IACnD95B,EAAI,EAAGC,EAAIqsC,EAAaljC,OAAQpJ,EAAIC,KAC3Cu6B,EAAS8R,EAAatsC,GAAGw6B,MACVA,EAAO/2B,MACpB4kB,EAAI,IAEDmS,GALyCx6B,KAShD,OAAOw6B,EACP,QACAhB,GAAa4E,IAIjB,SAASzD,GAAa4R,GACpB,YAAuChmC,IAAhCgmC,EAAWxS,kBAAkCwS,EAAWxS,iBAAiB3wB,OAAS,EAE3F,SAASgyB,GAAiBmR,EAAYzR,GACpC,IAAIoJ,EAAYqI,EAAWxS,mBAAqBwS,EAAWxS,iBAAmB,IAE9E,OADAmK,EAAUt+B,KAAKk1B,GACRloB,IAAK,WACV,IAAI0wB,EAAMY,EAAUhpB,QAAQ4f,IACf,IAATwI,GACFY,EAAU3qB,OAAO+pB,EAAK,MAI5B,SAAS1I,GAAgB2R,EAAY/R,GACnC,IAAI4D,EAAQtF,KACRoL,EAAYqI,EAAWxS,iBAC3B,GAAKmK,EAAL,CAIA,IAAK,IAAIlkC,EAAI,EAAGC,GADhBikC,EAAYA,EAAU7e,SACQjc,OAAQpJ,EAAIC,EAAGD,IAC3CkkC,EAAUlkC,GAAGw6B,GAEfhB,GAAa4E,IAGf,SAASoO,GAAeviC,EAAQ+8B,EAAa5zB,GAC3C,IAAI6d,EAAM2F,GAAmB3sB,EAAQmJ,GAAS8Z,IAC9CoB,KACA,IACE,IAAIme,EACA,EAI4B,OAA/BA,EAAezF,KAAsCA,EAAc/Z,GAAyBhjB,IAE7FygB,GAAQsc,GAAah/B,SAAQ,SAAUzG,GACrC,OAAO0vB,EAAIF,MAAMxvB,EAAKylC,EAAYzlC,OAEpC,QACAitB,KAEF,OAAOvkB,EAGT,IAAIyiC,GAA0B3rC,OAAO,aACrC,SAAS4rC,GAAmB1iC,EAAQ2iC,EAAWx5B,GAW7C,GAAI1J,GAAcO,GAChB,OAAO0sB,GAAiB1sB,EAAQA,EAAQ2iC,EAAWx5B,GAErD,IAAI6d,EAAM2F,GAAmB3sB,EAAQmJ,GAAS8Z,IAG9C,IAAKjjB,EAAOyiC,IAAa,CACvB,IAAI/iC,EAAQjJ,OAAOkJ,eAAeK,GAC9BG,EAAO,IAAI6B,IAAI,GAAGtG,OAAO+kB,GAAQzgB,GAASygB,GAAQ/gB,KACtDS,EAAa,OAAE,eACfA,EAAa,OAAE8iB,IACfjD,GAActgB,EAAO+iC,GAAYtiC,GAEnCkkB,KACA,IACErkB,EAAOyiC,IAAY1kC,SAAQ,SAAUzG,GACnC,OAAO0vB,EAAIF,MAAMxvB,GAEhBqrC,MAAmBrrC,KAAOqrC,IAAYA,EAAUrrC,QAEnD,QACAitB,KAEF,OAAOvkB,EAGT,IAAI4iC,GAAS,SACTnS,GAAS,SACToS,GAAkB,IAClBC,GAAa,CACflsC,IAAK,SAASA,EAAIoJ,EAAQ1J,GACxB,IAAI0wB,EAAMhnB,EAAOijB,IACjB,OAAI3sB,IAAS2sB,GACJ+D,EAEI,WAAT1wB,EACK0wB,EAAI+b,kBAEO,iBAATzsC,GAAsB0sC,MAAM1sC,GAGnCuqB,GAAQoiB,GAAiB3sC,GACpB2sC,GAAgB3sC,GAElB0J,EAAO1J,GALL0wB,EAAI0Y,KAAKJ,SAAShpC,KAO7BqI,IAAK,SAASA,EAAIqB,EAAQ1J,EAAMU,GAC9B,IAAIgwB,EAAMhnB,EAAOijB,IAUjB,MATa,WAAT3sB,GACF0wB,EAAIkc,gBAAgBlsC,GAEF,iBAATV,GAAqB0sC,MAAM1sC,GACpC0J,EAAO1J,GAAQU,EAGfgwB,EAAIqY,KAAKC,SAAShpC,GAAOU,IAEpB,GAETirC,kBAAmB,SAASA,IAC1B7jB,EAAI,MAGJ+kB,GAA6C,WAG/C,SAASA,EAA8B7sC,EAAMwzB,EAAUsZ,EAAQC,QAChD,IAAT/sC,IACFA,EAAkF,mBAEpF0F,KAAKonC,YAAS,EACdpnC,KAAKqnC,iBAAc,EACnBrnC,KAAKsnC,WAAQ,EACbtnC,KAAK8iC,QAAU,GACf9iC,KAAK6zB,mBAAgB,EACrB7zB,KAAK8zB,sBAAmB,EACxB9zB,KAAKunC,eAAY,EACjBvnC,KAAKg0B,cAAW,EAChBh0B,KAAKwsB,YAAS,EACdxsB,KAAKwnC,iBAAmB,EACxBxnC,KAAKonC,OAASA,EACdpnC,KAAKqnC,YAAcA,EACnBrnC,KAAKsnC,MAAQ,IAAIpgB,GAAK5sB,GACtB0F,KAAKunC,UAAY,SAAUE,EAAMC,GAC/B,OAAO5Z,EAAS2Z,EAAMC,EAA8D,wBAGxF,IAAI5f,EAASqf,EAA8BtrC,UAyO3C,OAxOAisB,EAAO6f,cAAgB,SAASA,EAAc3sC,GAC5C,YAAsBsF,IAAlBN,KAAKg0B,SACAh0B,KAAKg0B,SAASh5B,GAEhBA,GAET8sB,EAAO8f,eAAiB,SAASA,EAAexE,GAC9C,YAAsB9iC,IAAlBN,KAAKg0B,UAA0BoP,EAAOjgC,OAAS,EAC1CigC,EAAO/jC,IAAIW,KAAKg0B,UAElBoP,GAETtb,EAAO8M,WAAa,SAASA,EAAWC,GACtC,OAAOC,GAAoB90B,KAAM60B,IAEnC/M,EAAOiN,SAAW,SAASA,EAAS/M,EAAUgN,GAiB5C,YAhBwB,IAApBA,IACFA,GAAkB,GAEhBA,GACFhN,EAAS,CACPiN,eAAgB,QAChBt5B,OAAQqE,KAAKwsB,OACb0I,gBAAiBl1B,KAAKsnC,MAAMngB,MAC5B3pB,KAAM,SACN4F,MAAO,EACPykC,MAAO7nC,KAAK8iC,QAAQ1jB,QACpB0oB,WAAY9nC,KAAK8iC,QAAQ3/B,OACzB4kC,QAAS,GACTC,aAAc,IAGX7S,GAAiBn1B,KAAMgoB,IAEhCF,EAAOif,gBAAkB,SAASA,IAEhC,OADA/mC,KAAKsnC,MAAMpf,iBACJloB,KAAK8iC,QAAQ3/B,QAEtB2kB,EAAOof,gBAAkB,SAASA,EAAgBe,IACvB,iBAAdA,GAA0BjB,MAAMiB,IAAcA,EAAY,IACnE7lB,EAAI,iBAAmB6lB,GAEzB,IAAIC,EAAgBloC,KAAK8iC,QAAQ3/B,OACjC,GAAI8kC,IAAcC,EAEX,GAAID,EAAYC,EAAe,CAEpC,IADA,IAAIC,EAAW,IAAIhnC,MAAM8mC,EAAYC,GAC5BnuC,EAAI,EAAGA,EAAIkuC,EAAYC,EAAenuC,IAC7CouC,EAASpuC,QAAKuG,EAEhBN,KAAKooC,iBAAiBF,EAAe,EAAGC,QAExCnoC,KAAKooC,iBAAiBH,EAAWC,EAAgBD,IAGrDngB,EAAOugB,mBAAqB,SAASA,EAAmBC,EAAWC,GAC7DD,IAActoC,KAAKwnC,kBACrBplB,EAAI,IAENpiB,KAAKwnC,kBAAoBe,EACrBvoC,KAAKqnC,aAAekB,EAAQ,GAC9BC,GAAmBF,EAAYC,EAAQ,IAG3CzgB,EAAOsgB,iBAAmB,SAASA,EAAiBhlC,EAAOqlC,EAAaN,GACtE,IAAIxU,EAAQ3zB,KACZq0B,GAAoCr0B,KAAKsnC,OACzC,IAAInkC,EAASnD,KAAK8iC,QAAQ3/B,OAkB1B,QAjBc7C,IAAV8C,EACFA,EAAQ,EACCA,EAAQD,EACjBC,EAAQD,EACCC,EAAQ,IACjBA,EAAQmT,KAAKmyB,IAAI,EAAGvlC,EAASC,IAG7BqlC,EADuB,IAArBnuB,UAAUnX,OACEA,EAASC,EACdqlC,QACK,EAEAlyB,KAAKmyB,IAAI,EAAGnyB,KAAKoyB,IAAIF,EAAatlC,EAASC,SAE1C9C,IAAb6nC,IACFA,EAAWrlB,GAETwR,GAAgBt0B,MAAO,CACzB,IAAIu0B,EAASC,GAAgBx0B,KAAM,CACjCrE,OAAQqE,KAAKwsB,OACbhvB,KAAMopC,GACNxjC,MAAOA,EACP4kC,aAAcS,EACdZ,MAAOM,IAET,IAAK5T,EACH,OAAOzR,EAET2lB,EAAclU,EAAOyT,aACrBG,EAAW5T,EAAOsT,MAKpB,GAHAM,EAA+B,IAApBA,EAAShlC,OAAeglC,EAAWA,EAAS9oC,KAAI,SAAUiO,GACnE,OAAOqmB,EAAM4T,UAAUj6B,OAAGhN,MAExBN,KAAKqnC,YAAsD,CAC7D,IAAIuB,EAAcT,EAAShlC,OAASslC,EACpCzoC,KAAKqoC,mBAAmBllC,EAAQylC,GAGlC,IAAI/vB,EAAM7Y,KAAK6oC,uBAAuBzlC,EAAOqlC,EAAaN,GAI1D,OAHoB,IAAhBM,GAAyC,IAApBN,EAAShlC,QAChCnD,KAAK8oC,mBAAmB1lC,EAAO+kC,EAAUtvB,GAEpC7Y,KAAK4nC,eAAe/uB,IAE7BiP,EAAO+gB,uBAAyB,SAASA,EAAuBzlC,EAAOqlC,EAAaN,GAEhF,IAAIY,EADN,GAAIZ,EAAShlC,OA9KK,IAgLhB,OAAQ4lC,EAAgB/oC,KAAK8iC,SAASxvB,OAAO6B,MAAM4zB,EAAe,CAAC3lC,EAAOqlC,GAAa/oC,OAAOyoC,IAG9F,IAAItvB,EAAM7Y,KAAK8iC,QAAQ1jB,MAAMhc,EAAOA,EAAQqlC,GAExCO,EAAWhpC,KAAK8iC,QAAQ1jB,MAAMhc,EAAQqlC,GAE1CzoC,KAAK8iC,QAAQ3/B,QAAUglC,EAAShlC,OAASslC,EACzC,IAAK,IAAI1uC,EAAI,EAAGA,EAAIouC,EAAShlC,OAAQpJ,IACnCiG,KAAK8iC,QAAQ1/B,EAAQrJ,GAAKouC,EAASpuC,GAErC,IAAK,IAAIkvC,EAAK,EAAGA,EAAKD,EAAS7lC,OAAQ8lC,IACrCjpC,KAAK8iC,QAAQ1/B,EAAQ+kC,EAAShlC,OAAS8lC,GAAMD,EAASC,GAExD,OAAOpwB,GAGXiP,EAAOohB,wBAA0B,SAASA,EAAwB9lC,EAAOonB,EAAUE,GACjF,IAAIgJ,GAAa1zB,KAAKonC,SAlvCjB,EAmvCDxK,EAASlI,GAAa10B,MACtBu0B,EAASqI,GAAUlJ,EAAY,CACjCuB,eAAgB,QAChBt5B,OAAQqE,KAAKwsB,OACbhvB,KAAMi3B,GACNS,gBAAiBl1B,KAAKsnC,MAAMngB,MAC5B/jB,MAAOA,EACPonB,SAAUA,EACVE,SAAUA,GACR,KAMJ1qB,KAAKsnC,MAAMlf,gBACPwU,GACFjI,GAAgB30B,KAAMu0B,IAM1BzM,EAAOghB,mBAAqB,SAASA,EAAmB1lC,EAAOykC,EAAOE,GACpE,IAAIrU,GAAa1zB,KAAKonC,SA3wCjB,EA4wCDxK,EAASlI,GAAa10B,MACtBu0B,EAASqI,GAAUlJ,EAAY,CACjCuB,eAAgB,QAChBt5B,OAAQqE,KAAKwsB,OACb0I,gBAAiBl1B,KAAKsnC,MAAMngB,MAC5B3pB,KAAMopC,GACNxjC,MAAOA,EACP2kC,QAASA,EACTF,MAAOA,EACPG,aAAcD,EAAQ5kC,OACtB2kC,WAAYD,EAAM1kC,QAChB,KAIJnD,KAAKsnC,MAAMlf,gBAEPwU,GACFjI,GAAgB30B,KAAMu0B,IAM1BzM,EAAO4b,KAAO,SAASA,EAAKtgC,GAC1B,KAAIpD,KAAKqnC,aAAejkC,GAASpD,KAAK8iC,QAAQ3/B,QAK9C,OADAnD,KAAKsnC,MAAMpf,iBACJloB,KAAK2nC,cAAc3nC,KAAK8iC,QAAQ1/B,IAJrClF,QAAQC,KAA8O,8BAAgCiF,IAM1R0kB,EAAOub,KAAO,SAASA,EAAKjgC,EAAOonB,GACjC,IAAI4Y,EAASpjC,KAAK8iC,QAKlB,GAJI9iC,KAAKqnC,aAAejkC,EAAQggC,EAAOjgC,QAErCif,EAAI,GAAIhf,EAAOggC,EAAOjgC,QAEpBC,EAAQggC,EAAOjgC,OAAQ,CAEzBkxB,GAAoCr0B,KAAKsnC,OACzC,IAAI5c,EAAW0Y,EAAOhgC,GAclBs0B,EAbJ,GAAIpD,GAAgBt0B,MAAO,CACzB,IAAIu0B,EAASC,GAAgBx0B,KAAM,CACjCxC,KAAMi3B,GACN94B,OAAQqE,KAAKwsB,OACbppB,MAAOA,EACPonB,SAAUA,IAEZ,IAAK+J,EACH,OAEF/J,EAAW+J,EAAO/J,UAEpBA,EAAWxqB,KAAKunC,UAAU/c,EAAUE,MACTA,IAEzB0Y,EAAOhgC,GAASonB,EAChBxqB,KAAKkpC,wBAAwB9lC,EAAOonB,EAAUE,QAE3C,CAKL,IADA,IAAIyd,EAAW,IAAIhnC,MAAMiC,EAAQ,EAAIggC,EAAOjgC,QACnCpJ,EAAI,EAAGA,EAAIouC,EAAShlC,OAAS,EAAGpJ,IACvCouC,EAASpuC,QAAKuG,EAEhB6nC,EAASA,EAAShlC,OAAS,GAAKqnB,EAChCxqB,KAAKooC,iBAAiBhF,EAAOjgC,OAAQ,EAAGglC,KAGrChB,EAjQwC,GAmQjD,SAAS5W,GAAsBH,EAAetC,EAAUxzB,EAAM6uC,QAC/C,IAAT7uC,IACFA,EAAkF,wBAEtE,IAAV6uC,IACFA,GAAQ,GAEV/lB,IACA,IAAI4H,EAAM,IAAImc,GAA8B7sC,EAAMwzB,EAAUqb,GAAO,GACnEllB,GAAmB+G,EAAI8X,QAAS7b,GAAO+D,GACvC,IAAImE,EAAQ,IAAIjM,MAAM8H,EAAI8X,QAASgE,IAEnC,GADA9b,EAAIwB,OAAS2C,EACTiB,GAAiBA,EAAcjtB,OAAQ,CACzC,IAAI6V,EAAO8Z,IAAuB,GAClC9H,EAAIod,iBAAiB,EAAG,EAAGhY,GAC3BiD,GAAqBra,GAEvB,OAAOmW,EAGT,IAAI8X,GAAkB,CACpBmC,MAAO,SAASA,IACd,OAAOppC,KAAKsT,OAAO,IAErBsE,QAAS,SAASA,EAAQuwB,GACxB,IAAInd,EAAMhrB,KAAKinB,IACf,OAAO+D,EAAIod,iBAAiB,EAAGpd,EAAI8X,QAAQ3/B,OAAQglC,IAGrD/S,OAAQ,SAASA,IACf,OAAOp1B,KAAKof,SAQd9L,OAAQ,SAASA,EAAOlQ,EAAOqlC,GAC7B,IAAK,IAAIpmB,EAAO/H,UAAUnX,OAAQglC,EAAW,IAAIhnC,MAAMkhB,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IACtG6lB,EAAS7lB,EAAO,GAAKhI,UAAUgI,GAEjC,IAAI0I,EAAMhrB,KAAKinB,IACf,OAAQ3M,UAAUnX,QAChB,KAAK,EACH,MAAO,GACT,KAAK,EACH,OAAO6nB,EAAIod,iBAAiBhlC,GAC9B,KAAK,EACH,OAAO4nB,EAAIod,iBAAiBhlC,EAAOqlC,GAEvC,OAAOzd,EAAIod,iBAAiBhlC,EAAOqlC,EAAaN,IAElDkB,gBAAiB,SAASA,EAAgBjmC,EAAOqlC,EAAaN,GAC5D,OAAOnoC,KAAKinB,IAAOmhB,iBAAiBhlC,EAAOqlC,EAAaN,IAE1DxoC,KAAM,SAASA,IAEb,IADA,IAAIqrB,EAAMhrB,KAAKinB,IACNqiB,EAAQhvB,UAAUnX,OAAQomC,EAAQ,IAAIpoC,MAAMmoC,GAAQE,EAAQ,EAAGA,EAAQF,EAAOE,IACrFD,EAAMC,GAASlvB,UAAUkvB,GAG3B,OADAxe,EAAIod,iBAAiBpd,EAAI8X,QAAQ3/B,OAAQ,EAAGomC,GACrCve,EAAI8X,QAAQ3/B,QAErB+a,IAAK,SAASA,IACZ,OAAOle,KAAKsT,OAAOiD,KAAKmyB,IAAI1oC,KAAKinB,IAAO6b,QAAQ3/B,OAAS,EAAG,GAAI,GAAG,IAErEyc,MAAO,SAASA,IACd,OAAO5f,KAAKsT,OAAO,EAAG,GAAG,IAE3BnI,QAAS,SAASA,IAEhB,IADA,IAAI6f,EAAMhrB,KAAKinB,IACNwiB,EAAQnvB,UAAUnX,OAAQomC,EAAQ,IAAIpoC,MAAMsoC,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACrFH,EAAMG,GAASpvB,UAAUovB,GAG3B,OADA1e,EAAIod,iBAAiB,EAAG,EAAGmB,GACpBve,EAAI8X,QAAQ3/B,QAErBwmC,QAAS,SAASA,IAOhB,OAJInmB,GAAYiP,oBACdrQ,EAAI,GAAI,WAEVpiB,KAAK4X,QAAQ5X,KAAKof,QAAQuqB,WACnB3pC,MAET4pC,KAAM,SAASA,IAGTpmB,GAAYiP,oBACdrQ,EAAI,GAAI,QAEV,IAAIynB,EAAO7pC,KAAKof,QAGhB,OAFAyqB,EAAKD,KAAKz0B,MAAM00B,EAAMvvB,WACtBta,KAAK4X,QAAQiyB,GACN7pC,MAETgH,OAAQ,SAASA,EAAOhM,GACtB,IAAIgwB,EAAMhrB,KAAKinB,IACXoW,EAAMrS,EAAI4c,eAAe5c,EAAI8X,SAAS7tB,QAAQja,GAClD,OAAIqiC,GAAO,IACTr9B,KAAKsT,OAAO+pB,EAAK,IACV,KA+Bb,SAASyM,GAAkBC,EAAUC,GACM,mBAA9B7oC,MAAMtF,UAAUkuC,KACzB9C,GAAgB8C,GAAYC,EAAYD,IAI5C,SAASE,GAAWF,GAClB,OAAO,WACL,IAAI/e,EAAMhrB,KAAKinB,IACf+D,EAAIsc,MAAMpf,iBACV,IAAIgiB,EAAiBlf,EAAI4c,eAAe5c,EAAI8X,SAC5C,OAAOoH,EAAeH,GAAU50B,MAAM+0B,EAAgB5vB,YAI1D,SAAS6vB,GAAYJ,GACnB,OAAO,SAAUK,EAAUhuB,GACzB,IAAIiuB,EAASrqC,KACTgrB,EAAMhrB,KAAKinB,IAEXijB,EACJ,OAFAlf,EAAIsc,MAAMpf,iBACW8C,EAAI4c,eAAe5c,EAAI8X,SACtBiH,IAAU,SAAUxpC,EAAS6C,GACjD,OAAOgnC,EAASlwC,KAAKkiB,EAAS7b,EAAS6C,EAAOinC,OAKpD,SAASC,GAAeP,GACtB,OAAO,WACL,IAAIQ,EAASvqC,KACTgrB,EAAMhrB,KAAKinB,IACf+D,EAAIsc,MAAMpf,iBACV,IAAIgiB,EAAiBlf,EAAI4c,eAAe5c,EAAI8X,SAExCsH,EAAW9vB,UAAU,GAIzB,OAHAA,UAAU,GAAK,SAAUkwB,EAAaC,EAAcrnC,GAClD,OAAOgnC,EAASI,EAAaC,EAAcrnC,EAAOmnC,IAE7CL,EAAeH,GAAU50B,MAAM+0B,EAAgB5vB,YA3D1DwvB,GAAkB,SAAUG,IAC5BH,GAAkB,OAAQG,IAC1BH,GAAkB,WAAYG,IAC9BH,GAAkB,UAAWG,IAC7BH,GAAkB,OAAQG,IAC1BH,GAAkB,cAAeG,IACjCH,GAAkB,QAASG,IAC3BH,GAAkB,WAAYG,IAC9BH,GAAkB,iBAAkBG,IAEpCH,GAAkB,QAASK,IAC3BL,GAAkB,SAAUK,IAC5BL,GAAkB,OAAQK,IAC1BL,GAAkB,YAAaK,IAC/BL,GAAkB,UAAWK,IAC7BL,GAAkB,UAAWK,IAC7BL,GAAkB,MAAOK,IACzBL,GAAkB,OAAQK,IAE1BL,GAAkB,SAAUQ,IAC5BR,GAAkB,cAAeQ,IA0CjC,IAAII,GAA+CxmB,GAA0B,gCAAiCijB,IAK1GwD,GAAkBC,GAJtB,SAASzgB,GAAkBrc,GACzB,OAAOvK,GAASuK,IAAU48B,GAAgC58B,EAAMmZ,KAIlE,IAAI4jB,GAAsB,GACtBC,GAAM,MACNC,GAAS,SAGbJ,GAAmB7vC,OAAOkjB,SAC1B4sB,GAAsB9vC,OAAOC,YAC7B,IAAIy1B,GAA6B,WAG/B,SAASA,EAAcwa,EAAazD,EAAWpgB,GAC7C,IAAIwM,EAAQ3zB,UACM,IAAdunC,IACFA,EAAY9d,SAEA,IAAVtC,IACFA,EAAiF,iBAEnFnnB,KAAKunC,eAAY,EACjBvnC,KAAKmnB,WAAQ,EACbnnB,KAAKinB,IAAS4jB,GACd7qC,KAAKirC,WAAQ,EACbjrC,KAAKkrC,aAAU,EACflrC,KAAKmrC,eAAY,EACjBnrC,KAAK6zB,mBAAgB,EACrB7zB,KAAK8zB,sBAAmB,EACxB9zB,KAAKg0B,cAAW,EAChBh0B,KAAKunC,UAAYA,EACjBvnC,KAAKmnB,MAAQA,EACRtf,GAAWhG,MACdugB,EAAI,IAENpiB,KAAKmrC,UAAY1iB,GAA4E,wBAC7FzoB,KAAKirC,MAAQ,IAAIppC,IACjB7B,KAAKkrC,QAAU,IAAIrpC,IACnB+wB,IAAkB,GAAM,WACtBe,EAAMyX,MAAMJ,MAGhB,IAAIljB,EAAS0I,EAAc30B,UAmW3B,OAlWAisB,EAAO2b,KAAO,SAASA,EAAKnoC,GAC1B,OAAO0E,KAAKirC,MAAMxkC,IAAInL,IAExBwsB,EAAOrhB,IAAM,SAASA,EAAInL,GACxB,IAAI+uC,EAASrqC,KACb,IAAKwjB,GAAYiP,mBACf,OAAOzyB,KAAKyjC,KAAKnoC,GAEnB,IAAI+vC,EAAQrrC,KAAKkrC,QAAQtwC,IAAIU,GAC7B,IAAK+vC,EAAO,CACV,IAAIC,EAAWD,EAAQ,IAAInb,GAAgBlwB,KAAKyjC,KAAKnoC,GAAMivB,GAAwG,sBAAsB,GACzLvqB,KAAKkrC,QAAQvoC,IAAIrH,EAAKgwC,GACtBxiB,GAAmBwiB,GAAU,WAC3B,OAAOjB,EAAOa,QAAgB,OAAE5vC,MAGpC,OAAO+vC,EAAMzwC,OAEfktB,EAAOnlB,IAAM,SAASA,EAAIrH,EAAKN,GAC7B,IAAIuwC,EAASvrC,KAAKyjC,KAAKnoC,GACvB,GAAIg5B,GAAgBt0B,MAAO,CACzB,IAAIu0B,EAASC,GAAgBx0B,KAAM,CACjCxC,KAAM+tC,EAAS9W,GAASqW,GACxBnvC,OAAQqE,KACRwqB,SAAUxvB,EACVV,KAAMgB,IAER,IAAKi5B,EACH,OAAOv0B,KAEThF,EAAQu5B,EAAO/J,SAOjB,OALI+gB,EACFvrC,KAAKwrC,aAAalwC,EAAKN,GAEvBgF,KAAKyrC,UAAUnwC,EAAKN,GAEfgF,MAET8nB,EAAe,OAAI,SAAS4jB,EAAQpwC,GAClC,IAAIivC,EAASvqC,KAGPu0B,EADN,IADAF,GAAoCr0B,KAAKmrC,WACrC7W,GAAgBt0B,SACLw0B,GAAgBx0B,KAAM,CACjCxC,KAAMutC,GACNpvC,OAAQqE,KACR1F,KAAMgB,IAGN,OAAO,EAGX,GAAI0E,KAAKyjC,KAAKnoC,GAAM,CAClB,IAAIo4B,GAxmDD,EAymDCkJ,EAASlI,GAAa10B,MACtB2rC,EAAU/O,EAAsB,CAClC3H,eAAgB,MAChBC,gBAAiBl1B,KAAKmnB,MACtB3pB,KAAMutC,GACNpvC,OAAQqE,KACR0qB,SAAU1qB,KAAKirC,MAAMrwC,IAAIU,GAAKy4B,OAC9Bz5B,KAAMgB,GACJ,KAkBJ,OAdAqpC,IAAY,WACV,IAAIiH,EAGAjiB,EAFJ4gB,EAAOY,UAAU/iB,gBACiC,OAAjDwjB,EAAqBrB,EAAOW,QAAQtwC,IAAIU,KAAyBswC,EAAmBxX,cAAa,GACjFmW,EAAOU,MAAMrwC,IAAIU,GACvB84B,kBAAa9zB,GACxBiqC,EAAOU,MAAc,OAAE3vC,MAErBshC,GACFjI,GAAgB30B,KAAM2rC,IAKjB,EAET,OAAO,GAET7jB,EAAO0jB,aAAe,SAASA,EAAalwC,EAAKkvB,GAC/C,IAAIb,EAAa3pB,KAAKirC,MAAMrwC,IAAIU,GAEhC,IADAkvB,EAAWb,EAAWuK,iBAAiB1J,MACtBhH,GAAY2Q,UAAW,CACtC,IAAIT,GA3oDD,EA4oDCkJ,EAASlI,GAAa10B,MACtBu0B,EAASqI,EAAsB,CACjC3H,eAAgB,MAChBC,gBAAiBl1B,KAAKmnB,MACtB3pB,KAAMi3B,GACN94B,OAAQqE,KACR0qB,SAAUf,EAAWoK,OACrBz5B,KAAMgB,EACNkvB,SAAUA,GACR,KACA,EAGJb,EAAWyK,aAAa5J,GACpBoS,GACFjI,GAAgB30B,KAAMu0B,KAO5BzM,EAAO2jB,UAAY,SAASA,EAAUnwC,EAAKkvB,GACzC,IAAIqhB,EAAS7rC,KACbq0B,GAAoCr0B,KAAKmrC,WACzCxG,IAAY,WACV,IAAImH,EACAniB,EAAa,IAAIuG,GAAgB1F,EAAUqhB,EAAOtE,UAA4F,qBAAqB,GACvKsE,EAAOZ,MAAMtoC,IAAIrH,EAAKquB,GACtBa,EAAWb,EAAWoK,OAC4B,OAAjD+X,EAAqBD,EAAOX,QAAQtwC,IAAIU,KAAyBwwC,EAAmB1X,cAAa,GAClGyX,EAAOV,UAAU/iB,mBAEnB,IAAIsL,GA7qDC,EA8qDDkJ,EAASlI,GAAa10B,MACtBu0B,EAASqI,EAAsB,CACjC3H,eAAgB,MAChBC,gBAAiBl1B,KAAKmnB,MACtB3pB,KAAMstC,GACNnvC,OAAQqE,KACR1F,KAAMgB,EACNkvB,SAAUA,GACR,KAIAoS,GACFjI,GAAgB30B,KAAMu0B,IAM1BzM,EAAOltB,IAAM,SAASA,EAAIU,GACxB,OAAI0E,KAAKyG,IAAInL,GACJ0E,KAAK2nC,cAAc3nC,KAAKirC,MAAMrwC,IAAIU,GAAKV,OAEzCoF,KAAK2nC,mBAAcrnC,IAE5BwnB,EAAO6f,cAAgB,SAASA,EAAc3sC,GAC5C,YAAsBsF,IAAlBN,KAAKg0B,SACAh0B,KAAKg0B,SAASh5B,GAEhBA,GAET8sB,EAAO3jB,KAAO,SAASA,IAErB,OADAnE,KAAKmrC,UAAUjjB,iBACRloB,KAAKirC,MAAM9mC,QAEpB2jB,EAAOsb,OAAS,SAASA,IACvB,IAAIzgB,EAAO3iB,KACPmE,EAAOnE,KAAKmE,OAChB,OAAO4nC,GAAa,CAClB9yB,KAAM,SAASA,IACb,IAAI+yB,EAAa7nC,EAAK8U,OACpB4C,EAAOmwB,EAAWnwB,KAClB7gB,EAAQgxC,EAAWhxC,MACrB,MAAO,CACL6gB,KAAMA,EACN7gB,MAAO6gB,OAAOvb,EAAYqiB,EAAK/nB,IAAII,QAK3C8sB,EAAOrV,QAAU,SAASA,IACxB,IAAIkQ,EAAO3iB,KACPmE,EAAOnE,KAAKmE,OAChB,OAAO4nC,GAAa,CAClB9yB,KAAM,SAASA,IACb,IAAIgzB,EAAc9nC,EAAK8U,OACrB4C,EAAOowB,EAAYpwB,KACnB7gB,EAAQixC,EAAYjxC,MACtB,MAAO,CACL6gB,KAAMA,EACN7gB,MAAO6gB,OAAOvb,EAAY,CAACtF,EAAO2nB,EAAK/nB,IAAII,SAKnD8sB,EAAO6iB,IAAoB,WACzB,OAAO3qC,KAAKyS,WAEdqV,EAAO/lB,QAAU,SAASA,EAAQqoC,EAAUhuB,GAC1C,IAAK,IAAI8vB,EAAYhmB,GAAgClmB,MAAOmsC,IAASA,EAAQD,KAAarwB,MAAO,CAC/F,IAAIuwB,EAAcD,EAAMnxC,MACtBM,EAAM8wC,EAAY,GAClBpxC,EAAQoxC,EAAY,GACtBhC,EAASlwC,KAAKkiB,EAASphB,EAAOM,EAAK0E,QAIvC8nB,EAAOsjB,MAAQ,SAASA,EAAMrpB,GAC5B,IAAIsqB,EAASrsC,KA0Bb,OAzBIoqB,GAAgBrI,KAClBA,EAAQ,IAAIlgB,IAAIkgB,IAElB4iB,IAAY,WACNlhC,GAAcse,GAChBwC,GAAmBxC,GAAOhgB,SAAQ,SAAUzG,GAC1C,OAAO+wC,EAAO1pC,IAAIrH,EAAKymB,EAAMzmB,OAEtB6F,MAAMC,QAAQ2gB,GACvBA,EAAMhgB,SAAQ,SAAU8pB,GACtB,IAAIvwB,EAAMuwB,EAAK,GACb7wB,EAAQ6wB,EAAK,GACf,OAAOwgB,EAAO1pC,IAAIrH,EAAKN,MAEhBopB,GAASrC,IACdA,EAAM3H,cAAgBvY,KACxBugB,EAAI,GAAIL,GAEVA,EAAMhgB,SAAQ,SAAU/G,EAAOM,GAC7B,OAAO+wC,EAAO1pC,IAAIrH,EAAKN,OAEhB+mB,SACTK,EAAI,GAAIL,MAGL/hB,MAET8nB,EAAOshB,MAAQ,SAASA,IACtB,IAAIkD,EAAStsC,KACb2kC,IAAY,WACVhL,IAAU,WACR,IAAK,IAAI4S,EAAarmB,GAAgComB,EAAOnoC,QAASqoC,IAAUA,EAASD,KAAc1wB,MAAO,CAC5G,IAAIvgB,EAAMkxC,EAAOxxC,MACjBsxC,EAAe,OAAEhxC,WAKzBwsB,EAAOlQ,QAAU,SAASA,EAAQwrB,GAChC,IAAIqJ,EAASzsC,KA+Eb,OAxEA2kC,IAAY,WASV,IAPA,IAAI+H,EAAiBC,GAAavJ,GAC9BwJ,EAAc,IAAI/qC,IAElBgrC,GAA0B,EAIrBC,EAAa5mB,GAAgCumB,EAAOxB,MAAM9mC,QAAS4oC,IAAUA,EAASD,KAAcjxB,MAAO,CAClH,IAAIvgB,EAAMyxC,EAAO/xC,MAIXgyC,EADN,IAAKN,EAAejmC,IAAInL,GAGtB,GAFcmxC,EAAe,OAAEnxC,GAI7BuxC,GAA0B,MACrB,CAEL,IAAI7xC,EAAQyxC,EAAOxB,MAAMrwC,IAAIU,GAC7BsxC,EAAYjqC,IAAIrH,EAAKN,IAK3B,IAAK,IAAIiyC,EAAa/mB,GAAgCwmB,EAAej6B,WAAYy6B,IAAUA,EAASD,KAAcpxB,MAAO,CACvH,IAAIsxB,EAAeD,EAAOlyC,MACxBsnB,EAAO6qB,EAAa,GACpBC,EAASD,EAAa,GAEpBE,EAAaZ,EAAOxB,MAAMxkC,IAAI6b,GAIlC,GAFAmqB,EAAO9pC,IAAI2f,EAAM8qB,GAEbX,EAAOxB,MAAMxkC,IAAI6b,GAAO,CAI1B,IAAIgrB,EAAUb,EAAOxB,MAAMrwC,IAAI0nB,GAC/BsqB,EAAYjqC,IAAI2f,EAAMgrB,GAEjBD,IAEHR,GAA0B,IAKhC,IAAKA,EACH,GAAIJ,EAAOxB,MAAM9hC,OAASyjC,EAAYzjC,KAEpCsjC,EAAOtB,UAAU/iB,qBAMjB,IAJA,IAAImlB,EAAQd,EAAOxB,MAAM9mC,OACrBqpC,EAAQZ,EAAYzoC,OACpBspC,EAAQF,EAAMt0B,OACdy0B,EAAQF,EAAMv0B,QACVw0B,EAAM5xB,MAAM,CAClB,GAAI4xB,EAAMzyC,QAAU0yC,EAAM1yC,MAAO,CAC/ByxC,EAAOtB,UAAU/iB,gBACjB,MAEFqlB,EAAQF,EAAMt0B,OACdy0B,EAAQF,EAAMv0B,OAKpBwzB,EAAOxB,MAAQ2B,KAEV5sC,MAET8nB,EAAO/d,SAAW,SAASA,IACzB,MAAO,0BAET+d,EAAOsN,OAAS,SAASA,IACvB,OAAOj0B,MAAM+d,KAAKlf,OAOpB8nB,EAAOiN,SAAW,SAASA,EAAS/M,EAAUgN,GAI5C,OAAOG,GAAiBn1B,KAAMgoB,IAEhCF,EAAO8M,WAAa,SAASA,EAAWC,GACtC,OAAOC,GAAoB90B,KAAM60B,IAEnC3P,GAAasL,EAAe,CAAC,CAC3Bl1B,IAAK,OACLV,IAAK,SAASA,IAEZ,OADAoF,KAAKmrC,UAAUjjB,iBACRloB,KAAKirC,MAAM9hC,OAEnB,CACD7N,IAAKsvC,GACLhwC,IAAK,SAASA,IACZ,MAAO,UAGJ41B,EAnYwB,GAsY7BpG,GAA+BlG,GAA0B,gBAAiBsM,IAiB1Emd,GAAoBC,GAhBxB,SAASjB,GAAa3qB,GACpB,GAAIoC,GAASpC,IAAkBoI,GAAgBpI,GAC7C,OAAOA,EACF,GAAI7gB,MAAMC,QAAQ4gB,GACvB,OAAO,IAAIngB,IAAImgB,GACV,GAAIve,GAAcue,GAAgB,CACvC,IAAI3iB,EAAM,IAAIwC,IACd,IAAK,IAAIvG,KAAO0mB,EACd3iB,EAAIsD,IAAIrH,EAAK0mB,EAAc1mB,IAE7B,OAAO+D,EAEP,OAAO+iB,EAAI,GAAIJ,GAKnB,IAAI6rB,GAAsB,GAC1BF,GAAqB7yC,OAAOkjB,SAC5B4vB,GAAwB9yC,OAAOC,YAC/B,IAAI01B,GAA6B,WAC/B,SAASA,EAAcua,EAAald,EAAU3G,QAC3B,IAAb2G,IACFA,EAAWrE,SAEC,IAAVtC,IACFA,EAAiF,iBAEnFnnB,KAAKmnB,WAAQ,EACbnnB,KAAKinB,IAAS4mB,GACd7tC,KAAKirC,MAAQ,IAAIjlC,IACjBhG,KAAKsnC,WAAQ,EACbtnC,KAAK8zB,sBAAmB,EACxB9zB,KAAK6zB,mBAAgB,EACrB7zB,KAAKg0B,cAAW,EAChBh0B,KAAKunC,eAAY,EACjBvnC,KAAKmnB,MAAQA,EACRtf,GAAW7B,MACdoc,EAAI,IAENpiB,KAAKsnC,MAAQ7e,GAAWzoB,KAAKmnB,OAC7BnnB,KAAKunC,UAAY,SAAUE,EAAMC,GAC/B,OAAO5Z,EAAS2Z,EAAMC,EAAMvgB,IAE1B6jB,GACFhrC,KAAK4X,QAAQozB,GAGjB,IAAIljB,EAAS2I,EAAc50B,UAsM3B,OArMAisB,EAAO6f,cAAgB,SAASA,EAAc3sC,GAC5C,YAAsBsF,IAAlBN,KAAKg0B,SACAh0B,KAAKg0B,SAASh5B,GAEhBA,GAET8sB,EAAOshB,MAAQ,SAASA,IACtB,IAAIzV,EAAQ3zB,KACZ2kC,IAAY,WACVhL,IAAU,WACR,IAAK,IAAIuS,EAAYhmB,GAAgCyN,EAAMsX,MAAM7H,UAAW+I,IAASA,EAAQD,KAAarwB,MAAO,CAC/G,IAAI7gB,EAAQmxC,EAAMnxC,MAClB24B,EAAc,OAAE34B,WAKxB8sB,EAAO/lB,QAAU,SAASA,EAAQ+rC,EAAY1xB,GAC5C,IAAK,IAAImwB,EAAarmB,GAAgClmB,MAAOwsC,IAAUA,EAASD,KAAc1wB,MAAO,CACnG,IAAI7gB,EAAQwxC,EAAOxxC,MACnB8yC,EAAW5zC,KAAKkiB,EAASphB,EAAOA,EAAOgF,QAG3C8nB,EAAOlhB,IAAM,SAASA,EAAI5L,GACxB,IAAIqvC,EAASrqC,KAGPu0B,EADN,IADAF,GAAoCr0B,KAAKsnC,OACrChT,GAAgBt0B,SACLw0B,GAAgBx0B,KAAM,CACjCxC,KAAMstC,GACNnvC,OAAQqE,KACRwqB,SAAUxvB,IAGV,OAAOgF,KAMX,IAAKA,KAAKyG,IAAIzL,GAAQ,CACpB2pC,IAAY,WACV0F,EAAOY,MAAMrkC,IAAIyjC,EAAO9C,UAAUvsC,OAAOsF,IACzC+pC,EAAO/C,MAAMlf,mBAEf,IAAIsL,GAAY,EACZkJ,EAASlI,GAAa10B,MACtB2rC,EAAU/O,EAAsB,CAClC3H,eAAgB,MAChBC,gBAAiBl1B,KAAKmnB,MACtB3pB,KAAMstC,GACNnvC,OAAQqE,KACRwqB,SAAUxvB,GACR,KARY,EAYZ4hC,GACFjI,GAAgB30B,KAAM2rC,GAM1B,OAAO3rC,MAET8nB,EAAe,OAAI,SAAS4jB,EAAQ1wC,GAClC,IAAIuvC,EAASvqC,KAEPu0B,EADN,GAAID,GAAgBt0B,QACLw0B,GAAgBx0B,KAAM,CACjCxC,KAAMutC,GACNpvC,OAAQqE,KACR0qB,SAAU1vB,IAGV,OAAO,EAGX,GAAIgF,KAAKyG,IAAIzL,GAAQ,CACnB,IAAI04B,GAAY,EACZkJ,EAASlI,GAAa10B,MACtB+tC,EAAWnR,EAAsB,CACnC3H,eAAgB,MAChBC,gBAAiBl1B,KAAKmnB,MACtB3pB,KAAMutC,GACNpvC,OAAQqE,KACR0qB,SAAU1vB,GACR,KAcJ,OAVA2pC,IAAY,WACV4F,EAAOjD,MAAMlf,gBACbmiB,EAAOU,MAAc,OAAEjwC,MAErB4hC,GACFjI,GAAgB30B,KAAM+tC,IAKjB,EAET,OAAO,GAETjmB,EAAOrhB,IAAM,SAASA,EAAIzL,GAExB,OADAgF,KAAKsnC,MAAMpf,iBACJloB,KAAKirC,MAAMxkC,IAAIzG,KAAK2nC,cAAc3sC,KAE3C8sB,EAAOrV,QAAU,SAASA,IACxB,IAAIu7B,EAAY,EACZ7pC,EAAOhD,MAAM+d,KAAKlf,KAAKmE,QACvBi/B,EAASjiC,MAAM+d,KAAKlf,KAAKojC,UAC7B,OAAO2I,GAAa,CAClB9yB,KAAM,SAASA,IACb,IAAI7V,EAAQ4qC,EAEZ,OADAA,GAAa,EACN5qC,EAAQggC,EAAOjgC,OAAS,CAC7BnI,MAAO,CAACmJ,EAAKf,GAAQggC,EAAOhgC,IAC5ByY,MAAM,GACJ,CACFA,MAAM,OAKdiM,EAAO3jB,KAAO,SAASA,IACrB,OAAOnE,KAAKojC,UAEdtb,EAAOsb,OAAS,SAASA,IACvBpjC,KAAKsnC,MAAMpf,iBACX,IAAIvF,EAAO3iB,KACPguC,EAAY,EACZC,EAAmB9sC,MAAM+d,KAAKlf,KAAKirC,MAAM7H,UAC7C,OAAO2I,GAAa,CAClB9yB,KAAM,SAASA,IACb,OAAO+0B,EAAYC,EAAiB9qC,OAAS,CAC3CnI,MAAO2nB,EAAKglB,cAAcsG,EAAiBD,MAC3CnyB,MAAM,GACJ,CACFA,MAAM,OAKdiM,EAAOlQ,QAAU,SAASA,EAAQmK,GAChC,IAAI8pB,EAAS7rC,KAmBb,OAlBIqqB,GAAgBtI,KAClBA,EAAQ,IAAI/b,IAAI+b,IAElB4iB,IAAY,WACNxjC,MAAMC,QAAQ2gB,IAKPsC,GAAStC,IAJlB8pB,EAAOzC,QACPrnB,EAAMhgB,SAAQ,SAAU/G,GACtB,OAAO6wC,EAAOjlC,IAAI5L,OAOX+mB,SACTK,EAAI,8BAAgCL,MAGjC/hB,MAET8nB,EAAOiN,SAAW,SAASA,EAAS/M,EAAUgN,GAK5C,OAAOG,GAAiBn1B,KAAMgoB,IAEhCF,EAAO8M,WAAa,SAASA,EAAWC,GACtC,OAAOC,GAAoB90B,KAAM60B,IAEnC/M,EAAOsN,OAAS,SAASA,IACvB,OAAOj0B,MAAM+d,KAAKlf,OAEpB8nB,EAAO/d,SAAW,SAASA,IACzB,MAAO,0BAET+d,EAAO6lB,IAAsB,WAC3B,OAAO3tC,KAAKojC,UAEdle,GAAauL,EAAe,CAAC,CAC3Bn1B,IAAK,OACLV,IAAK,SAASA,IAEZ,OADAoF,KAAKsnC,MAAMpf,iBACJloB,KAAKirC,MAAM9hC,OAEnB,CACD7N,IAAKsyC,GACLhzC,IAAK,SAASA,IACZ,MAAO,UAGJ61B,EAlOwB,GAqO7BpG,GAA+BnG,GAA0B,gBAAiBuM,IAE1Eyd,GAA+BzzC,OAAOY,OAAO,MAC7C8yC,GAAS,SACTC,GAA8C,WAChD,SAASA,EAA+B5iB,EAASsX,EAAS3b,EAE1DknB,QACkB,IAAZvL,IACFA,EAAU,IAAIjhC,UAEW,IAAvBwsC,IACFA,EAAqBrgB,IAEvBhuB,KAAKwrB,aAAU,EACfxrB,KAAK8iC,aAAU,EACf9iC,KAAKmnB,WAAQ,EACbnnB,KAAKquC,wBAAqB,EAC1BruC,KAAKmrC,eAAY,EACjBnrC,KAAK8zB,sBAAmB,EACxB9zB,KAAK6zB,mBAAgB,EACrB7zB,KAAKwsB,YAAS,EACdxsB,KAAK0sB,oBAAiB,EACtB1sB,KAAKsuC,yBAAsB,EAC3BtuC,KAAKuuC,kBAAe,EACpBvuC,KAAKwrB,QAAUA,EACfxrB,KAAK8iC,QAAUA,EACf9iC,KAAKmnB,MAAQA,EACbnnB,KAAKquC,mBAAqBA,EAC1BruC,KAAKmrC,UAAY,IAAIjkB,GAAoE,yBAEzFlnB,KAAK0sB,eAAiBjpB,GAAczD,KAAKwrB,SAS3C,IAAI1D,EAASsmB,EAA+BvyC,UAwd5C,OAvdAisB,EAAO0mB,wBAA0B,SAASA,EAAwBlzC,GAChE,OAAO0E,KAAK8iC,QAAQloC,IAAIU,GAAKV,OAE/BktB,EAAO2mB,wBAA0B,SAASA,EAAwBnzC,EAAKkvB,GACrE,IAAIb,EAAa3pB,KAAK8iC,QAAQloC,IAAIU,GAClC,GAAIquB,aAAsByH,GAExB,OADAzH,EAAWhnB,IAAI6nB,IACR,EAGT,GAAI8J,GAAgBt0B,MAAO,CACzB,IAAIu0B,EAASC,GAAgBx0B,KAAM,CACjCxC,KAAMi3B,GACN94B,OAAQqE,KAAKwsB,QAAUxsB,KAAKwrB,QAC5BlxB,KAAMgB,EACNkvB,SAAUA,IAEZ,IAAK+J,EACH,OAAO,KAET/J,EAAW+J,EAAO/J,SAIpB,IAFAA,EAAWb,EAAWuK,iBAAiB1J,MAEtBhH,GAAY2Q,UAAW,CACtC,IAAIyI,EAASlI,GAAa10B,MACtB0zB,GAAY,EACZiY,EAAU/O,EAAsB,CAClCp/B,KAAMi3B,GACNQ,eAAgB,SAChBC,gBAAiBl1B,KAAKmnB,MACtBxrB,OAAQqE,KAAKwsB,QAAUxsB,KAAKwrB,QAC5Bd,SAAUf,EAAWoK,OACrBz5B,KAAMgB,EACNkvB,SAAUA,GACR,KACA,EAGJb,EAAWyK,aAAa5J,GACpBoS,GACFjI,GAAgB30B,KAAM2rC,GAM1B,OAAO,GAET7jB,EAAO4b,KAAO,SAASA,EAAKpoC,GAK1B,OAJIkoB,GAAYiP,qBAAuB5N,GAAQ7kB,KAAKwrB,QAASlwB,IAE3D0E,KAAKyjC,KAAKnoC,GAEL0E,KAAKwrB,QAAQlwB,IAStBwsB,EAAOub,KAAO,SAASA,EAAK/nC,EAAKN,EAAOiwB,GAKtC,YAJkB,IAAdA,IACFA,GAAY,GAGVpG,GAAQ7kB,KAAKwrB,QAASlwB,GAEpB0E,KAAK8iC,QAAQr8B,IAAInL,GAEZ0E,KAAKyuC,wBAAwBnzC,EAAKN,GAChCiwB,EAEFpQ,QAAQlY,IAAI3C,KAAKwrB,QAASlwB,EAAKN,IAGtCgF,KAAKwrB,QAAQlwB,GAAON,GACb,GAIFgF,KAAK+qB,QAAQzvB,EAAK,CACvBN,MAAOA,EACPL,YAAY,EACZ0jB,UAAU,EACV3B,cAAc,GACb1c,KAAKquC,mBAAoBpjB,IAKhCnD,EAAO2b,KAAO,SAASA,EAAKnoC,GAC1B,IAAKkoB,GAAYiP,mBAEf,OAAOn3B,KAAO0E,KAAKwrB,QAErBxrB,KAAKuuC,eAAiBvuC,KAAKuuC,aAAe,IAAI1sC,KAC9C,IAAIwpC,EAAQrrC,KAAKuuC,aAAa3zC,IAAIU,GAKlC,OAJK+vC,IACHA,EAAQ,IAAInb,GAAgB50B,KAAO0E,KAAKwrB,QAASjB,GAAwG,yBAAyB,GAClLvqB,KAAKuuC,aAAa5rC,IAAIrH,EAAK+vC,IAEtBA,EAAMzwC,OAMfktB,EAAOgD,MAAQ,SAASA,EAAMxvB,EAAKsrB,GAIjC,IAHmB,IAAfA,IACFA,EAAa5mB,KAAKquC,qBAED,IAAfznB,EAAJ,CAIA,GADA8nB,GAAgB1uC,KAAM4mB,EAAYtrB,KAC5BA,KAAO0E,KAAKwrB,SAAU,CAC1B,IAAImjB,EAMJ,GAAuE,OAAlEA,EAAwB3uC,KAAKwrB,QAAQ9E,MAAqCioB,EAAsBrzC,GACnG,OAEA8mB,EAAI,EAAGwE,EAAWiE,gBAAiB7qB,KAAKmnB,MAAQ,IAAM7rB,EAAIyO,YAI9D,IADA,IAAIwH,EAASvR,KAAKwrB,QACXja,GAAUA,IAAWsR,GAAiB,CAC3C,IAAIlH,EAAaiH,EAAcrR,EAAQjW,GACvC,GAAIqgB,EAAY,CACd,IAAIizB,EAAUhoB,EAAWkE,MAAM9qB,KAAM1E,EAAKqgB,EAAYpK,GACtD,GAAgB,IAAZq9B,EACF,OAEF,GAAgB,IAAZA,EACF,MAGJr9B,EAAS9W,OAAOkJ,eAAe4N,GAEjCs9B,GAAwB7uC,KAAM4mB,EAAYtrB,KAS5CwsB,EAAOiD,QAAU,SAASA,EAAQzvB,EAAKqgB,EAAYiL,EAAYqE,GAO7D,QANkB,IAAdA,IACFA,GAAY,IAEK,IAAfrE,IACFA,EAAa5mB,KAAKquC,qBAED,IAAfznB,EACF,OAAO5mB,KAAK2rB,gBAAgBrwB,EAAKqgB,EAAYsP,GAE/CyjB,GAAgB1uC,KAAM4mB,EAAYtrB,GAClC,IAAIszC,EAAUhoB,EAAWmE,QAAQ/qB,KAAM1E,EAAKqgB,EAAYsP,GAIxD,OAHI2jB,GACFC,GAAwB7uC,KAAM4mB,EAAYtrB,GAErCszC,GAQT9mB,EAAO6D,gBAAkB,SAASA,EAAgBrwB,EAAKqgB,EAAYsP,QAC/C,IAAdA,IACFA,GAAY,GAEd,IACE5C,KAEA,IAAIymB,EAAgB9uC,KAAKwjC,QAAQloC,GACjC,IAAKwzC,EAEH,OAAOA,EAGT,GAAIxa,GAAgBt0B,MAAO,CACzB,IAAIu0B,EAASC,GAAgBx0B,KAAM,CACjCrE,OAAQqE,KAAKwsB,QAAUxsB,KAAKwrB,QAC5BlxB,KAAMgB,EACNkC,KAAMstC,GACNtgB,SAAU7O,EAAW3gB,QAEvB,IAAKu5B,EACH,OAAO,KAET,IAAI/J,EAAW+J,EAAO/J,SAClB7O,EAAW3gB,QAAUwvB,IACvB7O,EAAa2J,GAAS,GAAI3J,EAAY,CACpC3gB,MAAOwvB,KAKb,GAAIS,GACF,IAAKpQ,QAAQngB,eAAesF,KAAKwrB,QAASlwB,EAAKqgB,GAC7C,OAAO,OAGTjhB,EAAesF,KAAKwrB,QAASlwB,EAAKqgB,GAGpC3b,KAAK+uC,wBAAwBzzC,EAAKqgB,EAAW3gB,OAC7C,QACAutB,KAEF,OAAO,GAITT,EAAO+F,0BAA4B,SAASA,EAA0BvyB,EAAKN,EAAO8yB,EAAU7C,QACxE,IAAdA,IACFA,GAAY,GAEd,IACE5C,KAEA,IAAIymB,EAAgB9uC,KAAKwjC,QAAQloC,GACjC,IAAKwzC,EAEH,OAAOA,EAGT,GAAIxa,GAAgBt0B,MAAO,CACzB,IAAIu0B,EAASC,GAAgBx0B,KAAM,CACjCrE,OAAQqE,KAAKwsB,QAAUxsB,KAAKwrB,QAC5BlxB,KAAMgB,EACNkC,KAAMstC,GACNtgB,SAAUxvB,IAEZ,IAAKu5B,EACH,OAAO,KAETv5B,EAAQu5B,EAAO/J,SAEjB,IAAIwkB,EAAmBC,GAAkC3zC,GACrDqgB,EAAa,CACfe,cAAc8G,GAAYuI,iBAAkB/rB,KAAK0sB,eACjD/xB,YAAY,EACZC,IAAKo0C,EAAiBp0C,IACtB+H,IAAKqsC,EAAiBrsC,KAGxB,GAAIsoB,GACF,IAAKpQ,QAAQngB,eAAesF,KAAKwrB,QAASlwB,EAAKqgB,GAC7C,OAAO,OAGTjhB,EAAesF,KAAKwrB,QAASlwB,EAAKqgB,GAEpC,IAAIgO,EAAa,IAAIuG,GAAgBl1B,EAAO8yB,EAAsF,wBAAwB,GAC1J9tB,KAAK8iC,QAAQngC,IAAIrH,EAAKquB,GAEtB3pB,KAAK+uC,wBAAwBzzC,EAAKquB,EAAWoK,QAC7C,QACAxL,KAEF,OAAO,GAITT,EAAOyF,wBAA0B,SAASA,EAAwBjyB,EAAK6R,EAAS8d,QAC5D,IAAdA,IACFA,GAAY,GAEd,IACE5C,KAEA,IAAIymB,EAAgB9uC,KAAKwjC,QAAQloC,GAO3Bi5B,EANN,IAAKua,EAEH,OAAOA,EAGT,GAAIxa,GAAgBt0B,MAOlB,IANaw0B,GAAgBx0B,KAAM,CACjCrE,OAAQqE,KAAKwsB,QAAUxsB,KAAKwrB,QAC5BlxB,KAAMgB,EACNkC,KAAMstC,GACNtgB,cAAUlqB,IAGV,OAAO,KAGX6M,EAAQ7S,OAAS6S,EAAQ7S,KAAmF,wBAC5G6S,EAAQ2O,QAAU9b,KAAKwsB,QAAUxsB,KAAKwrB,QACtC,IAAIwjB,EAAmBC,GAAkC3zC,GACrDqgB,EAAa,CACfe,cAAc8G,GAAYuI,iBAAkB/rB,KAAK0sB,eACjD/xB,YAAY,EACZC,IAAKo0C,EAAiBp0C,IACtB+H,IAAKqsC,EAAiBrsC,KAGxB,GAAIsoB,GACF,IAAKpQ,QAAQngB,eAAesF,KAAKwrB,QAASlwB,EAAKqgB,GAC7C,OAAO,OAGTjhB,EAAesF,KAAKwrB,QAASlwB,EAAKqgB,GAEpC3b,KAAK8iC,QAAQngC,IAAIrH,EAAK,IAAI81B,GAAcjkB,IAExCnN,KAAK+uC,wBAAwBzzC,OAAKgF,GAClC,QACAioB,KAEF,OAAO,GAQTT,EAAO0b,QAAU,SAASA,EAAQloC,EAAK2vB,GAKrC,QAJkB,IAAdA,IACFA,GAAY,IAGTpG,GAAQ7kB,KAAKwrB,QAASlwB,GACzB,OAAO,EAIP,IAAIi5B,EADN,GAAID,GAAgBt0B,QACLw0B,GAAgBx0B,KAAM,CACjCrE,OAAQqE,KAAKwsB,QAAUxsB,KAAKwrB,QAC5BlxB,KAAMgB,EACNkC,KAAM2wC,KAIN,OAAO,KAIX,IACE,IAAIe,EAAoBC,EACxB9mB,KACA,IAAIuU,EAASlI,GAAa10B,MACtB0zB,GAAY,EACZ/J,EAAa3pB,KAAK8iC,QAAQloC,IAAIU,GAE9BN,OAAQsF,EAGNgxB,EADN,IAAK3H,GAAeiT,EAElB5hC,EAA+D,OAAtDs2B,EAAiB1O,EAAc5iB,KAAKwrB,QAASlwB,SAAgB,EAASg2B,EAAet2B,MAGhG,GAAIiwB,GACF,IAAKpQ,QAAQirB,eAAe9lC,KAAKwrB,QAASlwB,GACxC,OAAO,cAGF0E,KAAKwrB,QAAQlwB,GAsBtB,GAfIquB,IACF3pB,KAAK8iC,QAAgB,OAAExnC,GAEnBquB,aAAsBuG,KACxBl1B,EAAQ2uB,EAAWoK,QAGrBzL,GAAiBqB,IAGnB3pB,KAAKmrC,UAAU/iB,gBAG6B,OAA3C8mB,EAAqBlvC,KAAKuuC,eAA0F,OAAxDY,EAAwBD,EAAmBt0C,IAAIU,KAAyB6zC,EAAsBxsC,IAAIrH,KAAO0E,KAAKwrB,SAEvKoR,EAAqB,CACvB,IAAImR,EAAW,CACbvwC,KAAM2wC,GACNlZ,eAAgB,SAChBt5B,OAAQqE,KAAKwsB,QAAUxsB,KAAKwrB,QAC5B0J,gBAAiBl1B,KAAKmnB,MACtBuD,SAAU1vB,EACVV,KAAMgB,GAEJ,EAGAshC,GACFjI,GAAgB30B,KAAM+tC,IAM1B,QACAxlB,KAEF,OAAO,GAOTT,EAAOiN,SAAW,SAASA,EAASqV,EAAUpV,GAI5C,OAAOG,GAAiBn1B,KAAMoqC,IAEhCtiB,EAAO8M,WAAa,SAASA,EAAWC,GACtC,OAAOC,GAAoB90B,KAAM60B,IAEnC/M,EAAOinB,wBAA0B,SAASA,EAAwBzzC,EAAKN,GACrE,IAAIo0C,EAAqBC,EACrBzS,EAASlI,GAAa10B,MACtB0zB,GAAY,EAChB,GAAIkJ,EAAqB,CACvB,IAAIrI,EAASqI,EAAsB,CACjCp/B,KAAMstC,GACN7V,eAAgB,SAChBC,gBAAiBl1B,KAAKmnB,MACtBxrB,OAAQqE,KAAKwsB,QAAUxsB,KAAKwrB,QAC5BlxB,KAAMgB,EACNkvB,SAAUxvB,GACR,KACA,EAGA4hC,GACFjI,GAAgB30B,KAAMu0B,GAMmB,OAA5C6a,EAAsBpvC,KAAKuuC,eAA2F,OAAzDc,EAAwBD,EAAoBx0C,IAAIU,KAAyB+zC,EAAsB1sC,KAAI,GAEjK3C,KAAKmrC,UAAU/iB,iBAEjBN,EAAO+b,SAAW,SAASA,IAEzB,OADA7jC,KAAKmrC,UAAUjjB,iBACRzD,GAAQzkB,KAAKwrB,UAEtB1D,EAAOqb,MAAQ,SAASA,IAQtB,OADAnjC,KAAKmrC,UAAUjjB,iBACRztB,OAAO0J,KAAKnE,KAAKwrB,UAEnB4iB,EA5fyC,GA8flD,SAASzd,GAAmB3sB,EAAQmJ,GAClC,IAAImiC,EAIJ,GAAIzqB,GAAQ7gB,EAAQijB,IAIlB,OAAOjjB,EAKT,IAAI1J,EAAoE,OAA5Dg1C,EAA2B,MAAXniC,OAAkB,EAASA,EAAQ7S,MAAgBg1C,EAAqJ,mBAChOtkB,EAAM,IAAIojB,GAA+BpqC,EAAQ,IAAInC,IAAOqY,OAAO5f,GAAOq1B,GAAyBxiB,IAEvG,OADA6W,GAAchgB,EAAQijB,GAAO+D,GACtBhnB,EAET,IAAIurC,GAAgDrrB,GAA0B,iCAAkCkqB,IAChH,SAASa,GAAkC3zC,GACzC,OAAO4yC,GAAgB5yC,KAAS4yC,GAAgB5yC,GAAO,CACrDV,IAAK,SAASA,IACZ,OAAOoF,KAAKinB,IAAOunB,wBAAwBlzC,IAE7CqH,IAAK,SAASA,EAAI3H,GAChB,OAAOgF,KAAKinB,IAAOwnB,wBAAwBnzC,EAAKN,MAItD,SAASkvB,GAAmBpc,GAC1B,QAAIvK,GAASuK,IACJyhC,GAAiCzhC,EAAMmZ,KAIlD,SAAS4nB,GAAwB7jB,EAAKpE,EAAYtrB,GAChD,IAAIk0C,EAK8D,OAAjEA,EAAwBxkB,EAAIQ,QAAQ9E,aAAkD8oB,EAAsBl0C,GAE/G,SAASozC,GAAgB1jB,EAAKpE,EAAYtrB,GAoCuE,UASjH,IAAIm0C,GAAuBC,GAA2B,GAMlDC,GAA+B,EAE/BC,GAAY,SAASA,MACzB,SAASC,GAAQ10B,EAAMzX,GACjBjJ,OAAO2N,eACT3N,OAAO2N,eAAe+S,EAAKtf,UAAW6H,QACApD,IAA7B6a,EAAKtf,UAAUoL,UACxBkU,EAAKtf,UAAUoL,UAAYvD,EAE3ByX,EAAKtf,UAAY6H,EAGrBmsC,GAAQD,GAAWzuC,MAAMtF,WAIzB,IAAIi0C,GAAqC,SAAUC,EAAYnF,EAAqBD,GAElF,SAASmF,EAAsB1f,EAAetC,EAAUxzB,EAAM6uC,GAC5D,IAAIxV,OACS,IAATr5B,IACFA,EAAkF,wBAEtE,IAAV6uC,IACFA,GAAQ,GAEVxV,EAAQoc,EAAW71C,KAAK8F,OAASA,KACjC,IAAIgrB,EAAM,IAAImc,GAA8B7sC,EAAMwzB,EAAUqb,GAAO,GAGnE,GAFAne,EAAIwB,OAAS7G,GAAuBgO,GACpC1P,GAAmB0B,GAAuBgO,GAAQ1M,GAAO+D,GACrDoF,GAAiBA,EAAcjtB,OAAQ,CACzC,IAAI6V,EAAO8Z,IAAuB,GAElCa,EAAM0V,gBAAgB,EAAG,EAAGjZ,GAC5BiD,GAAqBra,GAOvB,OAFEve,OAAOC,eAAeirB,GAAuBgO,GAAQ,IAAK8b,IAErD9b,EAxBTpO,GAAeuqB,EAAuBC,GA0BtC,IAAIjoB,EAASgoB,EAAsBj0C,UAyCnC,OAxCAisB,EAAOpoB,OAAS,SAASA,IACvBM,KAAKinB,IAAOqgB,MAAMpf,iBAClB,IAAK,IAAI7F,EAAO/H,UAAUnX,OAAQ6sC,EAAS,IAAI7uC,MAAMkhB,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IACjF0tB,EAAO1tB,GAAQhI,UAAUgI,GAE3B,OAAOnhB,MAAMtF,UAAU6D,OAAOyV,MAAMnV,KAAKof,QAEzC4wB,EAAO3wC,KAAI,SAAUwf,GACnB,OAAOsL,GAAkBtL,GAAKA,EAAEO,QAAUP,OAG9CiJ,EAAO6iB,GAAoB,WACzB,IAAIhoB,EAAO3iB,KACPguC,EAAY,EAChB,OAAOjC,GAAa,CAClB9yB,KAAM,SAASA,IACb,OAAO+0B,EAAYrrB,EAAKxf,OAAS,CAC/BnI,MAAO2nB,EAAKqrB,KACZnyB,MAAM,GACJ,CACFA,MAAM,EACN7gB,WAAOsF,OAKf4kB,GAAa4qB,EAAuB,CAAC,CACnCx0C,IAAK,SACLV,IAAK,SAASA,IACZ,OAAOoF,KAAKinB,IAAO8f,mBAErBpkC,IAAK,SAASA,EAAIslC,GAChBjoC,KAAKinB,IAAOigB,gBAAgBe,KAE7B,CACD3sC,IAAKsvC,EACLhwC,IAAK,SAASA,IACZ,MAAO,YAGJk1C,EApEgC,CAqEvCF,GAAW90C,OAAOC,YAAaD,OAAOkjB,UAQxC,SAAS0xB,GAA2BtsC,GAClC,MAAO,CACLzI,YAAY,EACZ+hB,cAAc,EACd9hB,IAAK,SAASA,IACZ,OAAOoF,KAAKinB,IAAOyc,KAAKtgC,IAE1BT,IAAK,SAASA,EAAI3H,GAChBgF,KAAKinB,IAAOoc,KAAKjgC,EAAOpI,KAI9B,SAASi1C,GAAsB7sC,GAC7B1I,EAAeo1C,GAAsBj0C,UAAW,GAAKuH,EAAOssC,GAA2BtsC,IAEzF,SAASolC,GAAmBE,GAC1B,GAAIA,EAAMiH,GAA8B,CACtC,IAAK,IAAIvsC,EAAQusC,GAA8BvsC,EAAQslC,EAAM,IAAKtlC,IAChE6sC,GAAsB7sC,GAExBusC,GAA+BjH,GAInC,SAASpY,GAAkBF,EAAetC,EAAUxzB,GAClD,OAAO,IAAIw1C,GAAsB1f,EAAetC,EAAUxzB,GAG5D,SAASgmC,GAAQxyB,EAAOlS,GACtB,GAAqB,iBAAVkS,GAAgC,OAAVA,EAAgB,CAC/C,GAAIqc,GAAkBrc,GAIpB,YAHiBxN,IAAb1E,GACFwmB,EAAI,IAECtU,EAAMmZ,IAAOqgB,MAEtB,GAAIjd,GAAgBvc,GAClB,OAAOA,EAAMw5B,MAEf,GAAIld,GAAgBtc,GAAQ,CAC1B,QAAiBxN,IAAb1E,EACF,OAAOkS,EAAMq9B,UAEf,IAAIxhB,EAAa7b,EAAMm9B,MAAMrwC,IAAIgB,IAAakS,EAAMo9B,QAAQtwC,IAAIgB,GAIhE,OAHK+tB,GACHvH,EAAI,GAAIxmB,EAAUs0C,GAAapiC,IAE1B6b,EAET,GAAIO,GAAmBpc,GAAQ,CAC7B,IAAKlS,EACH,OAAOwmB,EAAI,IAEb,IAAI+tB,EAAcriC,EAAMmZ,IAAO6b,QAAQloC,IAAIgB,GAI3C,OAHKu0C,GACH/tB,EAAI,GAAIxmB,EAAUs0C,GAAapiC,IAE1BqiC,EAET,GAAI3nB,GAAO1a,IAAUsqB,GAAgBtqB,IAAU8vB,GAAW9vB,GACxD,OAAOA,OAEJ,GAAIjG,GAAWiG,IAChB8vB,GAAW9vB,EAAMmZ,KAEnB,OAAOnZ,EAAMmZ,IAGjB7E,EAAI,IAEN,SAASqgB,GAAkB30B,EAAOlS,GAIhC,OAHKkS,GACHsU,EAAI,SAEW9hB,IAAb1E,EACK6mC,GAAkBnC,GAAQxyB,EAAOlS,IAEtC4sB,GAAO1a,IAAUsqB,GAAgBtqB,IAAU8vB,GAAW9vB,IAGtDsc,GAAgBtc,IAAUuc,GAAgBvc,GAFrCA,EAKLA,EAAMmZ,IACDnZ,EAAMmZ,SAEf7E,EAAI,GAAItU,GAEV,SAASoiC,GAAapiC,EAAOlS,GAC3B,IAAIw0C,EACJ,QAAiB9vC,IAAb1E,EACFw0C,EAAQ9P,GAAQxyB,EAAOlS,OAClB,IAAIiuB,GAAS/b,GAClB,OAAOA,EAAMxT,KAEb81C,EADSlmB,GAAmBpc,IAAUsc,GAAgBtc,IAAUuc,GAAgBvc,GACxE20B,GAAkB30B,GAGlBwyB,GAAQxyB,GAElB,OAAOsiC,EAAMjpB,MA3Gf1sB,OAAOgY,QAAQw0B,IAAiBllC,SAAQ,SAAU8pB,GAChD,IAAI/G,EAAO+G,EAAK,GACdhuB,EAAKguB,EAAK,GACC,WAAT/G,GACFd,GAAc8rB,GAAsBj0C,UAAWipB,EAAMjnB,MA0BzD2qC,GAAmB,KAgFnB,IAAIz+B,GAAW8Y,EAAgB9Y,SAC/B,SAASkf,GAAUpK,EAAG9E,EAAG8hB,GAIvB,YAHc,IAAVA,IACFA,GAAS,GAEJwU,GAAGxxB,EAAG9E,EAAG8hB,GAIlB,SAASwU,GAAGxxB,EAAG9E,EAAG8hB,EAAOyU,EAAQC,GAG/B,GAAI1xB,IAAM9E,EACR,OAAa,IAAN8E,GAAW,EAAIA,GAAM,EAAI9E,EAGlC,GAAS,MAAL8E,GAAkB,MAAL9E,EACf,OAAO,EAGT,GAAI8E,GAAMA,EACR,OAAO9E,GAAMA,EAGf,IAAIvc,SAAcqhB,EAClB,GAAa,aAATrhB,GAAgC,WAATA,GAAiC,iBAALuc,EACrD,OAAO,EAGT,IAAIy2B,EAAYzmC,GAAS7P,KAAK2kB,GAC9B,GAAI2xB,IAAczmC,GAAS7P,KAAK6f,GAC9B,OAAO,EAET,OAAQy2B,GAEN,IAAK,kBAEL,IAAK,kBAGH,MAAO,GAAK3xB,GAAM,GAAK9E,EACzB,IAAK,kBAGH,OAAK8E,IAAOA,GACF9E,IAAOA,EAGH,IAAN8E,EAAU,GAAKA,GAAM,EAAI9E,GAAK8E,IAAO9E,EAC/C,IAAK,gBACL,IAAK,mBAIH,OAAQ8E,IAAO9E,EACjB,IAAK,kBACH,MAAyB,oBAAXjf,QAA0BA,OAAOu6B,QAAQn7B,KAAK2kB,KAAO/jB,OAAOu6B,QAAQn7B,KAAK6f,GACzF,IAAK,eACL,IAAK,eAGC8hB,GAAS,GACXA,IAKNhd,EAAI4xB,GAAO5xB,GACX9E,EAAI02B,GAAO12B,GACX,IAAI22B,EAA0B,mBAAdF,EAChB,IAAKE,EAAW,CACd,GAAgB,iBAAL7xB,GAA6B,iBAAL9E,EACjC,OAAO,EAIT,IAAI42B,EAAQ9xB,EAAEzE,YACZw2B,EAAQ72B,EAAEK,YACZ,GAAIu2B,IAAUC,KAAW/oC,GAAW8oC,IAAUA,aAAiBA,GAAS9oC,GAAW+oC,IAAUA,aAAiBA,IAAU,gBAAiB/xB,GAAK,gBAAiB9E,EAC7J,OAAO,EAGX,GAAc,IAAV8hB,EACF,OAAO,EACEA,EAAQ,IACjBA,GAAS,GAOX0U,EAASA,GAAU,GAEnB,IADA,IAAIptC,GAFJmtC,EAASA,GAAU,IAECntC,OACbA,KAGL,GAAImtC,EAAOntC,KAAY0b,EACrB,OAAO0xB,EAAOptC,KAAY4W,EAO9B,GAHAu2B,EAAO3wC,KAAKkf,GACZ0xB,EAAO5wC,KAAKoa,GAER22B,EAAW,CAGb,IADAvtC,EAAS0b,EAAE1b,UACI4W,EAAE5W,OACf,OAAO,EAGT,KAAOA,KACL,IAAKktC,GAAGxxB,EAAE1b,GAAS4W,EAAE5W,GAAS04B,EAAQ,EAAGyU,EAAQC,GAC/C,OAAO,MAGN,CAEL,IAAIpsC,EAAO1J,OAAO0J,KAAK0a,GACnBvjB,EAGJ,GAFA6H,EAASgB,EAAKhB,OAEV1I,OAAO0J,KAAK4V,GAAG5W,SAAWA,EAC5B,OAAO,EAET,KAAOA,KAGL,IAAM0hB,GAAQ9K,EADdze,EAAM6I,EAAKhB,MACcktC,GAAGxxB,EAAEvjB,GAAMye,EAAEze,GAAMugC,EAAQ,EAAGyU,EAAQC,GAC7D,OAAO,EAOb,OAFAD,EAAOpyB,MACPqyB,EAAOryB,OACA,EAET,SAASuyB,GAAO5xB,GACd,OAAIsL,GAAkBtL,GACbA,EAAEO,QAEPgF,GAASvF,IAAMuL,GAAgBvL,IAG/BwF,GAASxF,IAAMwL,GAAgBxL,GAF1B1d,MAAM+d,KAAKL,EAAEpM,WAKfoM,EAGT,SAASktB,GAAa/tB,GAEpB,OADAA,EAASljB,OAAOkjB,UAAY6yB,GACrB7yB,EAET,SAAS6yB,KACP,OAAO7wC,KAGT,SAAS8wC,GAAahjC,GACpB,OAEEA,aAAiBrT,QAA2C,iBAA1BqT,EAAM+c,iBAAgChjB,GAAWiG,EAAMgd,QAAUjjB,GAAWiG,EAAMid,SAqBxH,CAAC,SAAU,MAAO,OAAOhpB,SAAQ,SAAU5H,GACzC,IAAI2jB,OACgB,IADZ0E,IACKroB,IACXioB,EAAI,yBAA2BjoB,EAAI,sCAGM,iBAAlC42C,+BAETA,8BAA8BC,WAAW,CACvC3S,IAAKA,GACL4S,OAAQ,CACNf,aAAcA,IAEhBjpB,MAAOA,M,gCC94KXztB,EAAOD,QAAU23C,M,cCAjB13C,EAAOD,QAAUqiB,G,6BCuBjB,IAAIu1B,EAAuB,iBAAZt2B,QAAuBA,QAAU,KAC5Cu2B,EAAeD,GAAwB,mBAAZA,EAAEh8B,MAC7Bg8B,EAAEh8B,MACF,SAASi8B,EAAaptC,EAAQuc,EAAUviB,GACxC,OAAOF,SAASjC,UAAUsZ,MAAMjb,KAAK8J,EAAQuc,EAAUviB,IAGvDqzC,EAcJ,SAASC,EAAmBC,GACtBrzC,SAAWA,QAAQC,MAAMD,QAAQC,KAAKozC,GAb1CF,EADEF,GAA0B,mBAAdA,EAAE1sB,QACC0sB,EAAE1sB,QACVhqB,OAAO+f,sBACC,SAAS62B,EAAertC,GACvC,OAAOvJ,OAAOiqB,oBAAoB1gB,GAC/BtE,OAAOjF,OAAO+f,sBAAsBxW,KAGxB,SAASqtC,EAAertC,GACvC,OAAOvJ,OAAOiqB,oBAAoB1gB,IAQtC,IAAIwtC,EAAc/qB,OAAOugB,OAAS,SAASwK,EAAYx2C,GACrD,OAAOA,GAAUA,GAGnB,SAAS+Q,IACPA,EAAamQ,KAAKhiB,KAAK8F,MAEzBxG,EAAOD,QAAUwS,EACjBvS,EAAOD,QAAQoT,KAAOA,EAGtBZ,EAAaA,aAAeA,EAE5BA,EAAalQ,UAAU41C,aAAUnxC,EACjCyL,EAAalQ,UAAU61C,aAAe,EACtC3lC,EAAalQ,UAAU81C,mBAAgBrxC,EAIvC,IAAI0L,EAAsB,GAE1B,SAAS4lC,EAAc5pB,GACrB,GAAwB,mBAAbA,EACT,MAAM,IAAI/N,UAAU,0EAA4E+N,GAsCpG,SAAS6pB,EAAiBC,GACxB,YAA2BxxC,IAAvBwxC,EAAKH,cACA5lC,EAAaC,oBACf8lC,EAAKH,cAmDd,SAASI,EAAa/tC,EAAQxG,EAAMwqB,EAAUgqB,GAC5C,IAAI73C,EACAmS,EACA2lC,EAsBJ,GApBAL,EAAc5pB,QAGC1nB,KADfgM,EAAStI,EAAOytC,UAEdnlC,EAAStI,EAAOytC,QAAUh3C,OAAOY,OAAO,MACxC2I,EAAO0tC,aAAe,SAIKpxC,IAAvBgM,EAAO4lC,cACTluC,EAAO0V,KAAK,cAAelc,EACfwqB,EAASA,SAAWA,EAASA,SAAWA,GAIpD1b,EAAStI,EAAOytC,SAElBQ,EAAW3lC,EAAO9O,SAGH8C,IAAb2xC,EAEFA,EAAW3lC,EAAO9O,GAAQwqB,IACxBhkB,EAAO0tC,kBAeT,GAbwB,mBAAbO,EAETA,EAAW3lC,EAAO9O,GAChBw0C,EAAU,CAAChqB,EAAUiqB,GAAY,CAACA,EAAUjqB,GAErCgqB,EACTC,EAAS9mC,QAAQ6c,GAEjBiqB,EAAStyC,KAAKqoB,IAIhB7tB,EAAI03C,EAAiB7tC,IACb,GAAKiuC,EAAS9uC,OAAShJ,IAAM83C,EAASE,OAAQ,CACpDF,EAASE,QAAS,EAGlB,IAAIt6B,EAAI,IAAI7I,MAAM,+CACEijC,EAAS9uC,OAAS,IAAM+W,OAAO1c,GADjC,qEAIlBqa,EAAEvd,KAAO,8BACTud,EAAEyB,QAAUtV,EACZ6T,EAAEra,KAAOA,EACTqa,EAAEu6B,MAAQH,EAAS9uC,OACnBmuC,EAAmBz5B,GAIvB,OAAO7T,EAcT,SAASquC,IACP,IAAKryC,KAAKsyC,MAGR,OAFAtyC,KAAKgE,OAAOuuC,eAAevyC,KAAKxC,KAAMwC,KAAKwyC,QAC3CxyC,KAAKsyC,OAAQ,EACY,IAArBh4B,UAAUnX,OACLnD,KAAKgoB,SAAS9tB,KAAK8F,KAAKgE,QAC1BhE,KAAKgoB,SAAS7S,MAAMnV,KAAKgE,OAAQsW,WAI5C,SAASm4B,EAAUzuC,EAAQxG,EAAMwqB,GAC/B,IAAIrhB,EAAQ,CAAE2rC,OAAO,EAAOE,YAAQlyC,EAAW0D,OAAQA,EAAQxG,KAAMA,EAAMwqB,SAAUA,GACjF0qB,EAAUL,EAAY92C,KAAKoL,GAG/B,OAFA+rC,EAAQ1qB,SAAWA,EACnBrhB,EAAM6rC,OAASE,EACRA,EA0HT,SAASC,EAAW3uC,EAAQxG,EAAMizC,GAChC,IAAInkC,EAAStI,EAAOytC,QAEpB,QAAenxC,IAAXgM,EACF,MAAO,GAET,IAAIsmC,EAAatmC,EAAO9O,GACxB,YAAmB8C,IAAfsyC,EACK,GAEiB,mBAAfA,EACFnC,EAAS,CAACmC,EAAW5qB,UAAY4qB,GAAc,CAACA,GAElDnC,EACLoC,EAAgBD,GAAcE,EAAWF,EAAYA,EAAWzvC,QAoBpE,SAAS4vC,EAAcv1C,GACrB,IAAI8O,EAAStM,KAAKyxC,QAElB,QAAenxC,IAAXgM,EAAsB,CACxB,IAAIsmC,EAAatmC,EAAO9O,GAExB,GAA0B,mBAAfo1C,EACT,OAAO,EACF,QAAmBtyC,IAAfsyC,EACT,OAAOA,EAAWzvC,OAItB,OAAO,EAOT,SAAS2vC,EAAW9sB,EAAKxqB,GAEvB,IADA,IAAIquC,EAAO,IAAI1oC,MAAM3F,GACZzB,EAAI,EAAGA,EAAIyB,IAAKzB,EACvB8vC,EAAK9vC,GAAKisB,EAAIjsB,GAChB,OAAO8vC,EAGT,SAASmJ,EAAU1X,EAAMl4B,GACvB,KAAOA,EAAQ,EAAIk4B,EAAKn4B,OAAQC,IAC9Bk4B,EAAKl4B,GAASk4B,EAAKl4B,EAAQ,GAC7Bk4B,EAAKpd,MAGP,SAAS20B,EAAgB7sB,GAEvB,IADA,IAAIgc,EAAM,IAAI7gC,MAAM6kB,EAAI7iB,QACfpJ,EAAI,EAAGA,EAAIioC,EAAI7+B,SAAUpJ,EAChCioC,EAAIjoC,GAAKisB,EAAIjsB,GAAGiuB,UAAYhC,EAAIjsB,GAElC,OAAOioC,EAGT,SAASr1B,EAAK2M,EAAShf,GACrB,OAAO,IAAIiC,SAAQ,SAAUC,EAASC,GACpC,SAASw2C,EAAc9gB,GACrB7Y,EAAQi5B,eAAej4C,EAAM44C,GAC7Bz2C,EAAO01B,GAGT,SAAS+gB,IAC+B,mBAA3B55B,EAAQi5B,gBACjBj5B,EAAQi5B,eAAe,QAASU,GAElCz2C,EAAQ,GAAG4iB,MAAMllB,KAAKogB,YAGxB64B,EAA+B75B,EAAShf,EAAM44C,EAAU,CAAEvmC,MAAM,IACnD,UAATrS,GACF84C,EAA8B95B,EAAS25B,EAAe,CAAEtmC,MAAM,OAKpE,SAASymC,EAA8B95B,EAASub,EAASwe,GAC7B,mBAAf/5B,EAAQ7M,IACjB0mC,EAA+B75B,EAAS,QAASub,EAASwe,GAI9D,SAASF,EAA+B75B,EAAShf,EAAM0tB,EAAUqrB,GAC/D,GAA0B,mBAAf/5B,EAAQ7M,GACb4mC,EAAM1mC,KACR2M,EAAQ3M,KAAKrS,EAAM0tB,GAEnB1O,EAAQ7M,GAAGnS,EAAM0tB,OAEd,IAAwC,mBAA7B1O,EAAQ5Q,iBAYxB,MAAM,IAAIuR,UAAU,6EAA+EX,GATnGA,EAAQ5Q,iBAAiBpO,GAAM,SAASg5C,EAAa99B,GAG/C69B,EAAM1mC,MACR2M,EAAQosB,oBAAoBprC,EAAMg5C,GAEpCtrB,EAASxS,OAhaf/a,OAAOC,eAAeqR,EAAc,sBAAuB,CACzDpR,YAAY,EACZC,IAAK,WACH,OAAOoR,GAETrJ,IAAK,SAAS6S,GACZ,GAAmB,iBAARA,GAAoBA,EAAM,GAAKg8B,EAAYh8B,GACpD,MAAM,IAAI+9B,WAAW,kGAAoG/9B,EAAM,KAEjIxJ,EAAsBwJ,KAI1BzJ,EAAamQ,KAAO,gBAEG5b,IAAjBN,KAAKyxC,SACLzxC,KAAKyxC,UAAYh3C,OAAOkJ,eAAe3D,MAAMyxC,UAC/CzxC,KAAKyxC,QAAUh3C,OAAOY,OAAO,MAC7B2E,KAAK0xC,aAAe,GAGtB1xC,KAAK2xC,cAAgB3xC,KAAK2xC,oBAAiBrxC,GAK7CyL,EAAalQ,UAAU23C,gBAAkB,SAASA,EAAgBh4C,GAChE,GAAiB,iBAANA,GAAkBA,EAAI,GAAKg2C,EAAYh2C,GAChD,MAAM,IAAI+3C,WAAW,gFAAkF/3C,EAAI,KAG7G,OADAwE,KAAK2xC,cAAgBn2C,EACdwE,MAST+L,EAAalQ,UAAU43C,gBAAkB,SAASA,IAChD,OAAO5B,EAAiB7xC,OAG1B+L,EAAalQ,UAAU6d,KAAO,SAASA,EAAKlc,GAE1C,IADA,IAAIQ,EAAO,GACFjE,EAAI,EAAGA,EAAIugB,UAAUnX,OAAQpJ,IAAKiE,EAAK2B,KAAK2a,UAAUvgB,IAC/D,IAAI25C,EAAoB,UAATl2C,EAEX8O,EAAStM,KAAKyxC,QAClB,QAAenxC,IAAXgM,EACFonC,EAAWA,QAA4BpzC,IAAjBgM,EAAO8H,WAC1B,IAAKs/B,EACR,OAAO,EAGT,GAAIA,EAAS,CACX,IAAIC,EAGJ,GAFI31C,EAAKmF,OAAS,IAChBwwC,EAAK31C,EAAK,IACR21C,aAAc3kC,MAGhB,MAAM2kC,EAGR,IAAIxhB,EAAM,IAAInjB,MAAM,oBAAsB2kC,EAAK,KAAOA,EAAG5kC,QAAU,IAAM,KAEzE,MADAojB,EAAIrW,QAAU63B,EACRxhB,EAGR,IAAI0C,EAAUvoB,EAAO9O,GAErB,QAAgB8C,IAAZu0B,EACF,OAAO,EAET,GAAuB,mBAAZA,EACTuc,EAAavc,EAAS70B,KAAMhC,QAI5B,IAFA,IAAIioB,EAAM4O,EAAQ1xB,OACd86B,EAAY6U,EAAWje,EAAS5O,GAC3BlsB,EAAI,EAAGA,EAAIksB,IAAOlsB,EACzBq3C,EAAanT,EAAUlkC,GAAIiG,KAAMhC,GAGrC,OAAO,GAiET+N,EAAalQ,UAAU+3C,YAAc,SAASA,EAAYp2C,EAAMwqB,GAC9D,OAAO+pB,EAAa/xC,KAAMxC,EAAMwqB,GAAU,IAG5Cjc,EAAalQ,UAAU4Q,GAAKV,EAAalQ,UAAU+3C,YAEnD7nC,EAAalQ,UAAUg4C,gBACnB,SAASA,EAAgBr2C,EAAMwqB,GAC7B,OAAO+pB,EAAa/xC,KAAMxC,EAAMwqB,GAAU,IAqBhDjc,EAAalQ,UAAU8Q,KAAO,SAASA,EAAKnP,EAAMwqB,GAGhD,OAFA4pB,EAAc5pB,GACdhoB,KAAKyM,GAAGjP,EAAMi1C,EAAUzyC,KAAMxC,EAAMwqB,IAC7BhoB,MAGT+L,EAAalQ,UAAUi4C,oBACnB,SAASA,EAAoBt2C,EAAMwqB,GAGjC,OAFA4pB,EAAc5pB,GACdhoB,KAAK6zC,gBAAgBr2C,EAAMi1C,EAAUzyC,KAAMxC,EAAMwqB,IAC1ChoB,MAIb+L,EAAalQ,UAAU02C,eACnB,SAASA,EAAe/0C,EAAMwqB,GAC5B,IAAIsT,EAAMhvB,EAAQynC,EAAUh6C,EAAGi6C,EAK/B,GAHApC,EAAc5pB,QAGC1nB,KADfgM,EAAStM,KAAKyxC,SAEZ,OAAOzxC,KAGT,QAAaM,KADbg7B,EAAOhvB,EAAO9O,IAEZ,OAAOwC,KAET,GAAIs7B,IAAStT,GAAYsT,EAAKtT,WAAaA,EACb,KAAtBhoB,KAAK0xC,aACT1xC,KAAKyxC,QAAUh3C,OAAOY,OAAO,cAEtBiR,EAAO9O,GACV8O,EAAOimC,gBACTvyC,KAAK0Z,KAAK,iBAAkBlc,EAAM89B,EAAKtT,UAAYA,SAElD,GAAoB,mBAATsT,EAAqB,CAGrC,IAFAyY,GAAY,EAEPh6C,EAAIuhC,EAAKn4B,OAAS,EAAGpJ,GAAK,EAAGA,IAChC,GAAIuhC,EAAKvhC,KAAOiuB,GAAYsT,EAAKvhC,GAAGiuB,WAAaA,EAAU,CACzDgsB,EAAmB1Y,EAAKvhC,GAAGiuB,SAC3B+rB,EAAWh6C,EACX,MAIJ,GAAIg6C,EAAW,EACb,OAAO/zC,KAEQ,IAAb+zC,EACFzY,EAAK1b,QAELozB,EAAU1X,EAAMyY,GAGE,IAAhBzY,EAAKn4B,SACPmJ,EAAO9O,GAAQ89B,EAAK,SAEQh7B,IAA1BgM,EAAOimC,gBACTvyC,KAAK0Z,KAAK,iBAAkBlc,EAAMw2C,GAAoBhsB,GAG1D,OAAOhoB,MAGb+L,EAAalQ,UAAUgR,IAAMd,EAAalQ,UAAU02C,eAEpDxmC,EAAalQ,UAAUo4C,mBACnB,SAASA,EAAmBz2C,GAC1B,IAAIygC,EAAW3xB,EAAQvS,EAGvB,QAAeuG,KADfgM,EAAStM,KAAKyxC,SAEZ,OAAOzxC,KAGT,QAA8BM,IAA1BgM,EAAOimC,eAUT,OATyB,IAArBj4B,UAAUnX,QACZnD,KAAKyxC,QAAUh3C,OAAOY,OAAO,MAC7B2E,KAAK0xC,aAAe,QACMpxC,IAAjBgM,EAAO9O,KACY,KAAtBwC,KAAK0xC,aACT1xC,KAAKyxC,QAAUh3C,OAAOY,OAAO,aAEtBiR,EAAO9O,IAEXwC,KAIT,GAAyB,IAArBsa,UAAUnX,OAAc,CAC1B,IAAIgB,EAAO1J,OAAO0J,KAAKmI,GACnBhR,EACJ,IAAKvB,EAAI,EAAGA,EAAIoK,EAAKhB,SAAUpJ,EAEjB,oBADZuB,EAAM6I,EAAKpK,KAEXiG,KAAKi0C,mBAAmB34C,GAK1B,OAHA0E,KAAKi0C,mBAAmB,kBACxBj0C,KAAKyxC,QAAUh3C,OAAOY,OAAO,MAC7B2E,KAAK0xC,aAAe,EACb1xC,KAKT,GAAyB,mBAFzBi+B,EAAY3xB,EAAO9O,IAGjBwC,KAAKuyC,eAAe/0C,EAAMygC,QACrB,QAAkB39B,IAAd29B,EAET,IAAKlkC,EAAIkkC,EAAU96B,OAAS,EAAGpJ,GAAK,EAAGA,IACrCiG,KAAKuyC,eAAe/0C,EAAMygC,EAAUlkC,IAIxC,OAAOiG,MAoBb+L,EAAalQ,UAAUoiC,UAAY,SAASA,EAAUzgC,GACpD,OAAOm1C,EAAW3yC,KAAMxC,GAAM,IAGhCuO,EAAalQ,UAAUq4C,aAAe,SAASA,EAAa12C,GAC1D,OAAOm1C,EAAW3yC,KAAMxC,GAAM,IAGhCuO,EAAagnC,cAAgB,SAASz5B,EAAS9b,GAC7C,MAAqC,mBAA1B8b,EAAQy5B,cACVz5B,EAAQy5B,cAAcv1C,GAEtBu1C,EAAc74C,KAAKof,EAAS9b,IAIvCuO,EAAalQ,UAAUk3C,cAAgBA,EAiBvChnC,EAAalQ,UAAUs4C,WAAa,SAASA,IAC3C,OAAOn0C,KAAK0xC,aAAe,EAAIL,EAAerxC,KAAKyxC,SAAW,K,ysDCvaE,IAM5D2C,EAiFOC,EAAa,IAjFV,uCACdC,IAAyB,KAAI,KAErBC,UAA2B,KAAI,KAE/BC,UAA2B,KAAI,KAE/Bl7B,QAAqBm7B,YAAqB,cAuEjD,OAvE8D,4BAE/D,SAAAC,EAAU1wC,GAAmB,WACrBswC,EAAMK,EAAQ3wC,GACpB,GAAIswC,EAAK,CACP,GAAIt0C,KAAKs0C,IAAK,CAEZ,GAAKt0C,KAAKs0C,IAAYtwC,SAAYswC,EAAYtwC,OAE5C,YADAhE,KAAKs0C,IAAMA,GAIb,IAAIt0C,KAAKu0C,UAWP,OANIv0C,KAAKw0C,YACPrP,aAAanlC,KAAKw0C,WAClBx0C,KAAKw0C,UAAY,MAEnBx0C,KAAKs0C,IAAMA,OACXt0C,KAAKsZ,QAAQI,KAAK,aATlByrB,aAAanlC,KAAKu0C,WAClBv0C,KAAKu0C,UAAY,KACjBv0C,KAAKs0C,IAAM,KAYft0C,KAAKs0C,IAAMA,EACPt0C,KAAKw0C,WACPrP,aAAanlC,KAAKw0C,WAClBx0C,KAAKw0C,UAAY,KACjBx0C,KAAKsZ,QAAQI,KAAK,cAElB1Z,KAAKu0C,UAAY1mC,YAAW,WAC1B,EAAK0mC,UAAY,KACjB,EAAKj7B,QAAQI,KAAK,eACjB,UAGD1Z,KAAKu0C,WACPpP,aAAanlC,KAAKu0C,WAClBv0C,KAAKu0C,UAAY,MAEjBv0C,KAAKw0C,UAAY3mC,YAAW,WAC1B,EAAK2mC,UAAY,OAChB,KAELx0C,KAAKs0C,IAAM,KAEXt0C,KAAKsZ,QAAQI,KAAK,eAErB,6BAED,SAAAk7B,IACM50C,KAAKw0C,YACPrP,aAAanlC,KAAKw0C,WAClBx0C,KAAKw0C,UAAY,MAEfx0C,KAAKu0C,YACPpP,aAAanlC,KAAKu0C,WAClBv0C,KAAKu0C,UAAY,MAEnBv0C,KAAKs0C,IAAM,KACXt0C,KAAKsZ,QAAQI,KAAK,eACnB,sBAED,SAAAm7B,EAASnxB,GAAgB,WAEvB,OADA1jB,KAAKsZ,QAAQ7M,GAAG,YAAaiX,GACtB,WACL,EAAKpK,QAAQi5B,eAAe,YAAa7uB,QAE5C,EA9Ea,IAmFhB,SAASixB,EAAQ3wC,GACf,IAAKA,EACH,OAAO,KAIT,IADA,IAAI8wC,EAAc,GACX9wC,GAAU8wC,KAAgB,GAAG,CAElC,GAAI9wC,EAAO+wC,SAAW/wC,EAAO+wC,QAAQT,IACnC,MAAO,CACL70C,SAAUuE,EAAO+wC,QAAQT,IACzBU,UAAYhxC,EAAO+wC,QAAQC,WAAahxC,EAAO+wC,QAAQE,IACvDC,MAAOlxC,EAAO+wC,QAAQG,MACtBlxC,UAOJ,IAFA,IAAIuO,EAA4BvO,EAAOmxC,iBAEhC5iC,GAAO,CACZ,GAAIA,EAAMwiC,SAAkC,QAAvBxiC,EAAMwiC,QAAQK,KAAgB,CACjD,IAAQC,EAAU9iC,EAAMwiC,QAAhBM,MACR,IAAKA,EACH,OAAO,KAET,IAAMC,EAAWC,EAAQ36C,IAAIy6C,GAC7B,OAAKC,EAGE,EAAP,KACKA,GAAQ,IACXtxC,WAJO,KAOXuO,EAAQA,EAAMijC,uBAGhBxxC,EAASA,EAAOvD,WAGlB,OAAO,KAGT,IAAM80C,EAAU,IAAI1zC,IACd,SAAU4zC,EAAQ32C,EAAYqG,GAC9BA,EACFowC,EAAQ5yC,IAAI7D,EAAIqG,GAEhBowC,EAAQxuC,OAAOjI,K,cC3InBtF,EAAOD,QAAUI,OAAO+7C,W,6BCCxBj7C,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQo8C,iBAAmBp8C,EAAQ+U,YAAc/U,EAAQq8C,aAAer8C,EAAQs8C,gBAAa,EAC7Ft8C,EAAQs8C,WAAa/6C,OAAO,qBAC5B,IAAI86C,EAA8B,WAC9B,SAASA,IACL51C,KAAK81C,UAAY,CACbC,QAAS,GACTC,WAAY,IAEhBh2C,KAAKi2C,QAAU,GACfj2C,KAAKk2C,cAAgB,GACrBl2C,KAAKm2C,WAAa,GAClBn2C,KAAKo2C,QAAU,GAEnB,OAAOR,EAXsB,GAkBjC,SAAStnC,EAAY9Q,GACjB,IAAIsf,EAAWriB,OAAOmgB,yBAAyBpd,EAAMjE,EAAQs8C,YAC7D,OAAK/4B,GAAaA,EAAS9hB,MAQpB8hB,EAAS9hB,OAPZP,OAAOC,eAAe8C,EAAMjE,EAAQs8C,WAAY,CAC5Cl7C,YAAY,EACZ+hB,cAAc,EACd1hB,MAAO,IAAI46C,IAERtnC,EAAY9Q,IAU3B,SAASm4C,EAAiBn4C,EAAMlC,GAC5B,IAAI+6C,EAAQ/nC,EAAY9Q,GAAMlC,GAC9B,GAAI6F,MAAMC,QAAQi1C,GAAQ,CACtB,IAAIC,EAAY77C,OAAOkJ,eAAenG,GACtC,GAAI84C,EACA,OAAOX,EAAiBW,EAAWh7C,GAAKoE,OAAO22C,GAGvD,OAAOA,EA/BX98C,EAAQq8C,aAAeA,EAiBvBr8C,EAAQ+U,YAAcA,EAgBtB/U,EAAQo8C,iBAAmBA,G,4hCC9C3B,IAAMY,EAAS,IAAIzgC,IAAO,CAAEnX,MAAO,OAAQkW,QAAS,cAC9C2hC,EAAe,IAAI1gC,IAAO,CAAEnX,MAAO,OAAQkW,QAAS,qBAS7C4hC,EAAQ,WASnB,WAAYn9B,EAAuBhf,GAAa,eAR/Bo8C,kBAAY,OACZp8C,UAAI,OAKZq8C,MAAQ,GAGf32C,KAAK02C,aAAep9B,EACpBtZ,KAAK1F,KAAOA,EAkEb,OAjEA,+BAEO,SAAAs8C,EAAap5C,GACnB,OAAIwC,KAAK1F,MAAQ0F,KAAK1F,KAAK6I,OAAS,EAC3B,IAAP,OAAWnD,KAAK1F,KAAI,mBAAWkD,EAAI,KAE5B,aAAP,OAAoBA,EAAI,OAE3B,uBAEO,SAAAyY,IACN,OAAIjW,KAAK1F,MAAQ0F,KAAK1F,KAAK6I,OAAS,EAC3BqzC,EAEAD,IAIX,gBAKA,SAAA9pC,EAAGD,EAAewb,GAAkC,WAGlD,OAFAhoB,KAAK02C,aAAajqC,GAAGD,EAAOwb,GAC5BhoB,KAAKiW,YAAYhC,MAAM,GAAD,OAAIjU,KAAK42C,aAAa,MAAK,YAAIpqC,IAC9C,WACL,EAAKK,IAAIL,EAAOwb,MAIpB,iBAKA,SAAAnb,EAAIL,EAAewb,GACjBhoB,KAAK02C,aAAa7pC,IAAIL,EAAOwb,GAC7BhoB,KAAKiW,YAAYhC,MAAM,GAAD,OAAIjU,KAAK42C,aAAa,OAAM,YAAIpqC,MAGxD,kBAMA,SAAAkN,EAAKlN,GAA6B,+BAAXxO,EAAW,iCAAXA,EAAW,mBAChC,EAAAgC,KAAK02C,cAAah9B,KAAI,SAAClN,GAAK,OAAKxO,KACjC,EAAAgC,KAAKiW,aAAYhC,MAAK,mBAAIjU,KAAK42C,aAAa,QAAO,kBAAUpqC,EAAK,oBAAexO,MAClF,4BAED,SAAAu0C,EAAe/lC,EAAwBwb,GACrC,OAAOhoB,KAAK02C,aAAanE,eAAe/lC,EAAOwb,KAChD,yBAED,SAAA4rB,EAAYpnC,EAAwBwb,GAClC,OAAOhoB,KAAK02C,aAAa9C,YAAYpnC,EAAOwb,KAC7C,6BAED,SAAAwrB,EAAgBh4C,GACd,OAAOwE,KAAK02C,aAAalD,gBAAgBh4C,KAC1C,gCACD,SAAAy4C,EAAmBznC,GACjB,OAAOxM,KAAK02C,aAAazC,mBAAmBznC,OAC7C,EA7EkB,GAgFRioC,EAAuB,SAAvBA,EAAwBoC,EAAoBC,GACvD,IAAMx9B,EAAU,IAAIvN,IAIpB,OAHI+qC,GACFx9B,EAAQk6B,gBAAgBsD,GAEnB,IAAIL,EAASn9B,EAASu9B,K,2LCnF3B/8B,EAAgB,SAASzf,EAAG0f,GAI5B,OAHAD,EAAgBrf,OAAO2N,gBAClB,CAAEnB,UAAW,cAAgB9F,OAAS,SAAU9G,EAAG0f,GAAK1f,EAAE4M,UAAY8S,IACvE,SAAU1f,EAAG0f,GAAK,IAAK,IAAIhe,KAAKge,EAAOtf,OAAOoB,UAAUC,eAAe5B,KAAK6f,EAAGhe,KAAI1B,EAAE0B,GAAKge,EAAEhe,MAC3E1B,EAAG0f,IAGrB,SAASC,EAAU3f,EAAG0f,GACzB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIE,UAAU,uBAAyBC,OAAOH,GAAK,iCAE7D,SAASI,IAAOna,KAAKoa,YAAc/f,EADnCyf,EAAczf,EAAG0f,GAEjB1f,EAAEwB,UAAkB,OAANke,EAAatf,OAAOY,OAAO0e,IAAMI,EAAGte,UAAYke,EAAEle,UAAW,IAAIse,GAG5E,IAAIE,EAAW,WAQlB,OAPAA,EAAW5f,OAAO0R,QAAU,SAASkO,EAASpf,GAC1C,IAAK,IAAIe,EAAGjC,EAAI,EAAGyB,EAAI8e,UAAUnX,OAAQpJ,EAAIyB,EAAGzB,IAE5C,IAAK,IAAIgC,KADTC,EAAIse,UAAUvgB,GACOU,OAAOoB,UAAUC,eAAe5B,KAAK8B,EAAGD,KAAId,EAAEc,GAAKC,EAAED,IAE9E,OAAOd,IAEKka,MAAMnV,KAAMsa,YAGzB,SAASC,EAAOve,EAAGuB,GACtB,IAAItC,EAAI,GACR,IAAK,IAAIc,KAAKC,EAAOvB,OAAOoB,UAAUC,eAAe5B,KAAK8B,EAAGD,IAAMwB,EAAE0X,QAAQlZ,GAAK,IAC9Ed,EAAEc,GAAKC,EAAED,IACb,GAAS,MAALC,GAAqD,mBAAjCvB,OAAO+f,sBAC3B,IAAK,IAAIzgB,EAAI,EAAGgC,EAAItB,OAAO+f,sBAAsBxe,GAAIjC,EAAIgC,EAAEoH,OAAQpJ,IAC3DwD,EAAE0X,QAAQlZ,EAAEhC,IAAM,GAAKU,OAAOoB,UAAU4e,qBAAqBvgB,KAAK8B,EAAGD,EAAEhC,MACvEkB,EAAEc,EAAEhC,IAAMiC,EAAED,EAAEhC,KAE1B,OAAOkB,EAGJ,SAASyf,EAAWC,EAAY3W,EAAQ1I,EAAK6U,GAChD,IAAI/V,EAAIkgB,UAAUnX,OAAQtI,EAAIT,EAAI,EAAI4J,EAAkB,OAATmM,EAAgBA,EAAO1V,OAAOmgB,yBAAyB5W,EAAQ1I,GAAO6U,EAAM9V,EAC3H,GAAuB,iBAAZwgB,SAAoD,mBAArBA,QAAQC,SAAyBjgB,EAAIggB,QAAQC,SAASH,EAAY3W,EAAQ1I,EAAK6U,QACpH,IAAK,IAAIpW,EAAI4gB,EAAWxX,OAAS,EAAGpJ,GAAK,EAAGA,KAASM,EAAIsgB,EAAW5gB,MAAIc,GAAKT,EAAI,EAAIC,EAAEQ,GAAKT,EAAI,EAAIC,EAAE2J,EAAQ1I,EAAKT,GAAKR,EAAE2J,EAAQ1I,KAAST,GAChJ,OAAOT,EAAI,GAAKS,GAAKJ,OAAOC,eAAesJ,EAAQ1I,EAAKT,GAAIA,EAGzD,SAASkgB,EAAQC,EAAYC,GAChC,OAAO,SAAUjX,EAAQ1I,GAAO2f,EAAUjX,EAAQ1I,EAAK0f,IAGpD,SAASE,EAAaC,EAAMC,EAAcT,EAAYU,EAAWC,EAAcC,GAClF,SAASC,EAAOC,GAAK,QAAU,IAANA,GAA6B,mBAANA,EAAkB,MAAM,IAAIxB,UAAU,qBAAsB,OAAOwB,EAKnH,IAJA,IAAIC,EAAOL,EAAUK,KAAMpgB,EAAe,WAATogB,EAAoB,MAAiB,WAATA,EAAoB,MAAQ,QACrF1X,GAAUoX,GAAgBD,EAAOE,EAAkB,OAAIF,EAAOA,EAAKtf,UAAY,KAC/E8f,EAAaP,IAAiBpX,EAASvJ,OAAOmgB,yBAAyB5W,EAAQqX,EAAU/gB,MAAQ,IACjGshB,EAAGC,GAAO,EACL9hB,EAAI4gB,EAAWxX,OAAS,EAAGpJ,GAAK,EAAGA,IAAK,CAC7C,IAAI+hB,EAAU,GACd,IAAK,IAAI/f,KAAKsf,EAAWS,EAAQ/f,GAAW,WAANA,EAAiB,GAAKsf,EAAUtf,GACtE,IAAK,IAAIA,KAAKsf,EAAUU,OAAQD,EAAQC,OAAOhgB,GAAKsf,EAAUU,OAAOhgB,GACrE+f,EAAQE,eAAiB,SAAUP,GAAK,GAAII,EAAM,MAAM,IAAI5B,UAAU,0DAA2DsB,EAAkB5b,KAAK6b,EAAOC,GAAK,QACpK,IAAIQ,GAAS,EAAItB,EAAW5gB,IAAa,aAAT2hB,EAAsB,CAAE9gB,IAAK+gB,EAAW/gB,IAAK+H,IAAKgZ,EAAWhZ,KAAQgZ,EAAWrgB,GAAMwgB,GACtH,GAAa,aAATJ,EAAqB,CACrB,QAAe,IAAXO,EAAmB,SACvB,GAAe,OAAXA,GAAqC,iBAAXA,EAAqB,MAAM,IAAIhC,UAAU,oBACnE2B,EAAIJ,EAAOS,EAAOrhB,QAAM+gB,EAAW/gB,IAAMghB,IACzCA,EAAIJ,EAAOS,EAAOtZ,QAAMgZ,EAAWhZ,IAAMiZ,IACzCA,EAAIJ,EAAOS,EAAOC,QAAOZ,EAAa3b,KAAKic,QAE1CA,EAAIJ,EAAOS,MACH,UAATP,EAAkBJ,EAAa3b,KAAKic,GACnCD,EAAWrgB,GAAOsgB,GAG3B5X,GAAQvJ,OAAOC,eAAesJ,EAAQqX,EAAU/gB,KAAMqhB,GAC1DE,GAAO,EAGJ,SAASM,EAAkBC,EAASd,EAActgB,GAErD,IADA,IAAIqhB,EAAW/B,UAAUnX,OAAS,EACzBpJ,EAAI,EAAGA,EAAIuhB,EAAanY,OAAQpJ,IACrCiB,EAAQqhB,EAAWf,EAAavhB,GAAGG,KAAKkiB,EAASphB,GAASsgB,EAAavhB,GAAGG,KAAKkiB,GAEnF,OAAOC,EAAWrhB,OAAQ,EAGvB,SAASshB,EAAUC,GACtB,MAAoB,iBAANA,EAAiBA,EAAI,GAAG7c,OAAO6c,GAG1C,SAASC,EAAkBf,EAAGnhB,EAAMwP,GAEvC,MADoB,iBAATxP,IAAmBA,EAAOA,EAAKmiB,YAAc,IAAI/c,OAAOpF,EAAKmiB,YAAa,KAAO,IACrFhiB,OAAOC,eAAe+gB,EAAG,OAAQ,CAAEiB,cAAc,EAAM1hB,MAAO8O,EAAS,GAAGpK,OAAOoK,EAAQ,IAAKxP,GAAQA,IAG1G,SAASqiB,EAAWC,EAAaC,GACpC,GAAuB,iBAAZhC,SAAoD,mBAArBA,QAAQiC,SAAyB,OAAOjC,QAAQiC,SAASF,EAAaC,GAG7G,SAASE,EAAUX,EAASY,EAAYC,EAAGC,GAC9C,SAASC,EAAMniB,GAAS,OAAOA,aAAiBiiB,EAAIjiB,EAAQ,IAAIiiB,GAAE,SAAUzgB,GAAWA,EAAQxB,MAC/F,OAAO,IAAKiiB,IAAMA,EAAI1gB,WAAU,SAAUC,EAASC,GAC/C,SAAS2gB,EAAUpiB,GAAS,IAAMqiB,EAAKH,EAAUjE,KAAKje,IAAW,MAAOuC,GAAKd,EAAOc,IACpF,SAAS+f,EAAStiB,GAAS,IAAMqiB,EAAKH,EAAiB,MAAEliB,IAAW,MAAOuC,GAAKd,EAAOc,IACvF,SAAS8f,EAAKpB,GAAUA,EAAOJ,KAAOrf,EAAQyf,EAAOjhB,OAASmiB,EAAMlB,EAAOjhB,OAAOiI,KAAKma,EAAWE,GAClGD,GAAMH,EAAYA,EAAU/H,MAAMiH,EAASY,GAAc,KAAK/D,WAI/D,SAASsE,EAAYnB,EAASoB,GACjC,IAAI5B,EAAI,CAAE6B,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPziB,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO0iB,KAAM,GAAIC,IAAK,IAAMnC,EAAGoC,EAAG5iB,EAAG6iB,EAC/G,OAAOA,EAAI,CAAE7E,KAAM8E,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXjjB,SAA0BgjB,EAAEhjB,OAAOkjB,UAAY,WAAa,OAAOhe,OAAU8d,EACvJ,SAASC,EAAKviB,GAAK,OAAO,SAAU8R,GAAK,OAAO+P,EAAK,CAAC7hB,EAAG8R,KACzD,SAAS+P,EAAKY,GACV,GAAIxC,EAAG,MAAM,IAAIxB,UAAU,mCAC3B,KAAO6D,IAAMA,EAAI,EAAGG,EAAG,KAAOrC,EAAI,IAAKA,GAAG,IACtC,GAAIH,EAAI,EAAGoC,IAAM5iB,EAAY,EAARgjB,EAAG,GAASJ,EAAU,OAAII,EAAG,GAAKJ,EAAS,SAAO5iB,EAAI4iB,EAAU,SAAM5iB,EAAEf,KAAK2jB,GAAI,GAAKA,EAAE5E,SAAWhe,EAAIA,EAAEf,KAAK2jB,EAAGI,EAAG,KAAKpC,KAAM,OAAO5gB,EAE3J,OADI4iB,EAAI,EAAG5iB,IAAGgjB,EAAK,CAAS,EAARA,EAAG,GAAQhjB,EAAED,QACzBijB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGhjB,EAAIgjB,EAAI,MACxB,KAAK,EAAc,OAAXrC,EAAE6B,QAAgB,CAAEziB,MAAOijB,EAAG,GAAIpC,MAAM,GAChD,KAAK,EAAGD,EAAE6B,QAASI,EAAII,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKrC,EAAEgC,IAAIM,MAAOtC,EAAE+B,KAAKO,MAAO,SACxC,QACI,KAAMjjB,EAAI2gB,EAAE+B,MAAM1iB,EAAIA,EAAEkI,OAAS,GAAKlI,EAAEA,EAAEkI,OAAS,KAAkB,IAAV8a,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAErC,EAAI,EAAG,SACjG,GAAc,IAAVqC,EAAG,MAAchjB,GAAMgjB,EAAG,GAAKhjB,EAAE,IAAMgjB,EAAG,GAAKhjB,EAAE,IAAM,CAAE2gB,EAAE6B,MAAQQ,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYrC,EAAE6B,MAAQxiB,EAAE,GAAI,CAAE2gB,EAAE6B,MAAQxiB,EAAE,GAAIA,EAAIgjB,EAAI,MAC7D,GAAIhjB,GAAK2gB,EAAE6B,MAAQxiB,EAAE,GAAI,CAAE2gB,EAAE6B,MAAQxiB,EAAE,GAAI2gB,EAAEgC,IAAIje,KAAKse,GAAK,MACvDhjB,EAAE,IAAI2gB,EAAEgC,IAAIM,MAChBtC,EAAE+B,KAAKO,MAAO,SAEtBD,EAAKT,EAAKtjB,KAAKkiB,EAASR,GAC1B,MAAOre,GAAK0gB,EAAK,CAAC,EAAG1gB,GAAIsgB,EAAI,EAAK,QAAUpC,EAAIxgB,EAAI,EACtD,GAAY,EAARgjB,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEjjB,MAAOijB,EAAG,GAAKA,EAAG,QAAK,EAAQpC,MAAM,IAI3E,IAAIsC,EAAkB1jB,OAAOY,OAAS,SAAUb,EAAGL,EAAGwX,EAAGyM,QACjD9d,IAAP8d,IAAkBA,EAAKzM,GAC3B,IAAIxB,EAAO1V,OAAOmgB,yBAAyBzgB,EAAGwX,GACzCxB,KAAS,QAASA,GAAQhW,EAAEgB,WAAagV,EAAKkO,UAAYlO,EAAKuM,gBAChEvM,EAAO,CAAExV,YAAY,EAAMC,IAAK,WAAa,OAAOT,EAAEwX,MAE1DlX,OAAOC,eAAeF,EAAG4jB,EAAIjO,IAC5B,SAAU3V,EAAGL,EAAGwX,EAAGyM,QACT9d,IAAP8d,IAAkBA,EAAKzM,GAC3BnX,EAAE4jB,GAAMjkB,EAAEwX,IAGP,SAAS2M,EAAankB,EAAGK,GAC5B,IAAK,IAAIuB,KAAK5B,EAAa,YAAN4B,GAAoBtB,OAAOoB,UAAUC,eAAe5B,KAAKM,EAAGuB,IAAIoiB,EAAgB3jB,EAAGL,EAAG4B,GAGxG,SAASwiB,EAAS/jB,GACrB,IAAIwB,EAAsB,mBAAXlB,QAAyBA,OAAOkjB,SAAU7jB,EAAI6B,GAAKxB,EAAEwB,GAAIjC,EAAI,EAC5E,GAAII,EAAG,OAAOA,EAAED,KAAKM,GACrB,GAAIA,GAAyB,iBAAbA,EAAE2I,OAAqB,MAAO,CAC1C8V,KAAM,WAEF,OADIze,GAAKT,GAAKS,EAAE2I,SAAQ3I,OAAI,GACrB,CAAEQ,MAAOR,GAAKA,EAAET,KAAM8hB,MAAOrhB,KAG5C,MAAM,IAAIyf,UAAUje,EAAI,0BAA4B,mCAGjD,SAASwiB,EAAOhkB,EAAGgB,GACtB,IAAIrB,EAAsB,mBAAXW,QAAyBN,EAAEM,OAAOkjB,UACjD,IAAK7jB,EAAG,OAAOK,EACf,IAAIT,EAAII,EAAED,KAAKM,GAAIK,EAAG4jB,EAAK,GAAIlhB,EAC/B,IACI,WAAc,IAAN/B,GAAgBA,KAAM,MAAQX,EAAId,EAAEkf,QAAQ4C,MAAM4C,EAAG9e,KAAK9E,EAAEG,OAExE,MAAOoZ,GAAS7W,EAAI,CAAE6W,MAAOA,GAC7B,QACI,IACQvZ,IAAMA,EAAEghB,OAAS1hB,EAAIJ,EAAU,SAAII,EAAED,KAAKH,GAElD,QAAU,GAAIwD,EAAG,MAAMA,EAAE6W,OAE7B,OAAOqK,EAIJ,SAASC,IACZ,IAAK,IAAID,EAAK,GAAI1kB,EAAI,EAAGA,EAAIugB,UAAUnX,OAAQpJ,IAC3C0kB,EAAKA,EAAG/e,OAAO8e,EAAOlE,UAAUvgB,KACpC,OAAO0kB,EAIJ,SAASE,IACZ,IAAK,IAAI3iB,EAAI,EAAGjC,EAAI,EAAG6kB,EAAKtE,UAAUnX,OAAQpJ,EAAI6kB,EAAI7kB,IAAKiC,GAAKse,UAAUvgB,GAAGoJ,OAC7E,IAAK,IAAItI,EAAIsG,MAAMnF,GAAI2V,EAAI,EAAG5X,EAAI,EAAGA,EAAI6kB,EAAI7kB,IACzC,IAAK,IAAI8kB,EAAIvE,UAAUvgB,GAAI+kB,EAAI,EAAGC,EAAKF,EAAE1b,OAAQ2b,EAAIC,EAAID,IAAKnN,IAC1D9W,EAAE8W,GAAKkN,EAAEC,GACjB,OAAOjkB,EAGJ,SAASmkB,EAAcC,EAAIC,EAAMC,GACpC,GAAIA,GAA6B,IAArB7E,UAAUnX,OAAc,IAAK,IAAIpJ,EAAI,EAAGC,EAAIklB,EAAK/b,OAAQsb,EAAI1kB,EAAIC,EAAGD,KACxE0kB,GAAQ1kB,KAAKmlB,IACRT,IAAIA,EAAKtd,MAAMtF,UAAUujB,MAAMllB,KAAKglB,EAAM,EAAGnlB,IAClD0kB,EAAG1kB,GAAKmlB,EAAKnlB,IAGrB,OAAOklB,EAAGvf,OAAO+e,GAAMtd,MAAMtF,UAAUujB,MAAMllB,KAAKglB,IAG/C,SAASG,EAAQ/R,GACpB,OAAOtN,gBAAgBqf,GAAWrf,KAAKsN,EAAIA,EAAGtN,MAAQ,IAAIqf,EAAQ/R,GAG/D,SAASgS,EAAiBlD,EAASY,EAAYE,GAClD,IAAKpiB,OAAOykB,cAAe,MAAM,IAAItF,UAAU,wCAC/C,IAAI6D,EAAIZ,EAAU/H,MAAMiH,EAASY,GAAc,IAAKjjB,EAAGylB,EAAI,GAC3D,OAAOzlB,EAAI,GAAIgkB,EAAK,QAASA,EAAK,SAAUA,EAAK,UAAWhkB,EAAEe,OAAOykB,eAAiB,WAAc,OAAOvf,MAASjG,EACpH,SAASgkB,EAAKviB,GAASsiB,EAAEtiB,KAAIzB,EAAEyB,GAAK,SAAU8R,GAAK,OAAO,IAAI/Q,SAAQ,SAAUsiB,EAAG9E,GAAKyF,EAAE7f,KAAK,CAACnE,EAAG8R,EAAGuR,EAAG9E,IAAM,GAAK0F,EAAOjkB,EAAG8R,QAC9H,SAASmS,EAAOjkB,EAAG8R,GAAK,IAAM+P,EAAKS,EAAEtiB,GAAG8R,IAAO,MAAO/P,GAAKmiB,EAAOF,EAAE,GAAG,GAAIjiB,IAC3E,SAAS8f,EAAKxiB,GAAKA,EAAEG,iBAAiBqkB,EAAU9iB,QAAQC,QAAQ3B,EAAEG,MAAMsS,GAAGrK,KAAK0c,EAASljB,GAAUijB,EAAOF,EAAE,GAAG,GAAI3kB,GACnH,SAAS8kB,EAAQ3kB,GAASykB,EAAO,OAAQzkB,GACzC,SAASyB,EAAOzB,GAASykB,EAAO,QAASzkB,GACzC,SAAS0kB,EAAOjE,EAAGnO,GAASmO,EAAEnO,GAAIkS,EAAEI,QAASJ,EAAErc,QAAQsc,EAAOD,EAAE,GAAG,GAAIA,EAAE,GAAG,KAGzE,SAASK,EAAiBrlB,GAC7B,IAAIT,EAAGgC,EACP,OAAOhC,EAAI,GAAIgkB,EAAK,QAASA,EAAK,SAAS,SAAUxgB,GAAK,MAAMA,KAAOwgB,EAAK,UAAWhkB,EAAEe,OAAOkjB,UAAY,WAAc,OAAOhe,MAASjG,EAC1I,SAASgkB,EAAKviB,EAAGigB,GAAK1hB,EAAEyB,GAAKhB,EAAEgB,GAAK,SAAU8R,GAAK,OAAQvR,GAAKA,GAAK,CAAEf,MAAOqkB,EAAQ7kB,EAAEgB,GAAG8R,IAAKuO,MAAM,GAAUJ,EAAIA,EAAEnO,GAAKA,GAAOmO,GAG/H,SAASqE,EAActlB,GAC1B,IAAKM,OAAOykB,cAAe,MAAM,IAAItF,UAAU,wCAC/C,IAAI9f,EAAIK,EAAEM,OAAOykB,eAAgBxlB,EACjC,OAAOI,EAAIA,EAAED,KAAKM,IAAMA,EAAqC+jB,EAAS/jB,GAA2BT,EAAI,GAAIgkB,EAAK,QAASA,EAAK,SAAUA,EAAK,UAAWhkB,EAAEe,OAAOykB,eAAiB,WAAc,OAAOvf,MAASjG,GAC9M,SAASgkB,EAAKviB,GAAKzB,EAAEyB,GAAKhB,EAAEgB,IAAM,SAAU8R,GAAK,OAAO,IAAI/Q,SAAQ,SAAUC,EAASC,GAAuBijB,EAAOljB,EAASC,GAA7B6Q,EAAI9S,EAAEgB,GAAG8R,IAA8BuO,KAAMvO,EAAEtS,WAChJ,SAAS0kB,EAAOljB,EAASC,EAAQpC,EAAGiT,GAAK/Q,QAAQC,QAAQ8Q,GAAGrK,MAAK,SAASqK,GAAK9Q,EAAQ,CAAExB,MAAOsS,EAAGuO,KAAMxhB,MAASoC,IAG/G,SAASsjB,EAAqBC,EAAQC,GAEzC,OADIxlB,OAAOC,eAAkBD,OAAOC,eAAeslB,EAAQ,MAAO,CAAEhlB,MAAOilB,IAAiBD,EAAOC,IAAMA,EAClGD,EAGX,IAAIE,EAAqBzlB,OAAOY,OAAS,SAAUb,EAAG8S,GAClD7S,OAAOC,eAAeF,EAAG,UAAW,CAAEG,YAAY,EAAMK,MAAOsS,KAC9D,SAAS9S,EAAG8S,GACb9S,EAAW,QAAI8S,GCrQRypC,ECAAC,EAwCAC,EFgOJ,SAAS92B,EAAaC,GACzB,GAAIA,GAAOA,EAAIjlB,WAAY,OAAOilB,EAClC,IAAInE,EAAS,GACb,GAAW,MAAPmE,EAAa,IAAK,IAAIzO,KAAKyO,EAAe,YAANzO,GAAmBlX,OAAOoB,UAAUC,eAAe5B,KAAKkmB,EAAKzO,IAAIwM,EAAgBlC,EAAQmE,EAAKzO,GAEtI,OADAuO,EAAmBjE,EAAQmE,GACpBnE,EAGJ,SAASoE,EAAgBD,GAC5B,OAAQA,GAAOA,EAAIjlB,WAAcilB,EAAM,CAAExa,QAASwa,GAG/C,SAASE,EAAuBC,EAAU5Z,EAAO+U,EAAMD,GAC1D,GAAa,MAATC,IAAiBD,EAAG,MAAM,IAAIxB,UAAU,iDAC5C,GAAqB,mBAAVtT,EAAuB4Z,IAAa5Z,IAAU8U,GAAK9U,EAAMF,IAAI8Z,GAAW,MAAM,IAAItG,UAAU,4EACvG,MAAgB,MAATyB,EAAeD,EAAa,MAATC,EAAeD,EAAEvhB,KAAKqmB,GAAY9E,EAAIA,EAAEzgB,MAAQ2L,EAAM/L,IAAI2lB,GAGjF,SAASC,EAAuBD,EAAU5Z,EAAO3L,EAAO0gB,EAAMD,GACjE,GAAa,MAATC,EAAc,MAAM,IAAIzB,UAAU,kCACtC,GAAa,MAATyB,IAAiBD,EAAG,MAAM,IAAIxB,UAAU,iDAC5C,GAAqB,mBAAVtT,EAAuB4Z,IAAa5Z,IAAU8U,GAAK9U,EAAMF,IAAI8Z,GAAW,MAAM,IAAItG,UAAU,2EACvG,MAAiB,MAATyB,EAAeD,EAAEvhB,KAAKqmB,EAAUvlB,GAASygB,EAAIA,EAAEzgB,MAAQA,EAAQ2L,EAAMhE,IAAI4d,EAAUvlB,GAASA,EAGjG,SAASylB,EAAsB9Z,EAAO4Z,GACzC,GAAiB,OAAbA,GAA0C,iBAAbA,GAA6C,mBAAbA,EAA0B,MAAM,IAAItG,UAAU,0CAC/G,MAAwB,mBAAVtT,EAAuB4Z,IAAa5Z,EAAQA,EAAMF,IAAI8Z,GEnPjE,SAAS22B,EAAiBC,GAC7B,OAAOA,EAAG35C,OAASw5C,EAAKI,QAErB,SAASC,EAAkBF,GAC9B,OAAOA,EAAG35C,OAASw5C,EAAKM,SAErB,SAASC,EAAgBJ,GAC5B,OAAOA,EAAG35C,OAASw5C,EAAKQ,OAErB,SAASC,EAAcN,GAC1B,OAAOA,EAAG35C,OAASw5C,EAAKU,KAErB,SAASC,EAAcR,GAC1B,OAAOA,EAAG35C,OAASw5C,EAAKY,KAErB,SAASC,EAAgBV,GAC5B,OAAOA,EAAG35C,OAASw5C,EAAKc,OAErB,SAASC,EAAgBZ,GAC5B,OAAOA,EAAG35C,OAASw5C,EAAKgB,OAErB,SAASC,EAAed,GAC3B,OAAOA,EAAG35C,OAASw5C,EAAKkB,MAErB,SAASC,EAAahB,GACzB,OAAOA,EAAG35C,OAASw5C,EAAKoB,IAErB,SAASC,EAAiBlB,GAC7B,SAAUA,GAAoB,iBAAPA,GAAmBA,EAAG35C,OAASy5C,EAAcO,QAEjE,SAASc,EAAmBnB,GAC/B,SAAUA,GAAoB,iBAAPA,GAAmBA,EAAG35C,OAASy5C,EAAcsB,UAEjE,SAASC,EAAqBx9C,GACjC,MAAO,CACHwC,KAAMw5C,EAAKI,QACXp8C,MAAOA,GAGR,SAASy9C,EAAoBz9C,EAAOqO,GACvC,MAAO,CACH7L,KAAMw5C,EAAKQ,OACXx8C,MAAOA,EACPqO,MAAOA,ID1Ff,SAAW0tC,GAEPA,EAAUA,EAAyC,8BAAI,GAAK,gCAE5DA,EAAUA,EAA0B,eAAI,GAAK,iBAE7CA,EAAUA,EAA8B,mBAAI,GAAK,qBAEjDA,EAAUA,EAAgC,qBAAI,GAAK,uBAEnDA,EAAUA,EAAiC,sBAAI,GAAK,wBAEpDA,EAAUA,EAAiC,sBAAI,GAAK,wBAEpDA,EAAUA,EAAmC,wBAAI,GAAK,0BAEtDA,EAAUA,EAAsC,2BAAI,GAAK,6BAEzDA,EAAUA,EAAkC,uBAAI,GAAK,yBAErDA,EAAUA,EAAqC,0BAAI,IAAM,4BAEzDA,EAAUA,EAA4C,iCAAI,IAAM,mCAEhEA,EAAUA,EAA0C,+BAAI,IAAM,iCAE9DA,EAAUA,EAA+C,oCAAI,IAAM,sCAEnEA,EAAUA,EAAgD,qCAAI,IAAM,uCAEpEA,EAAUA,EAA2C,gCAAI,IAAM,kCAE/DA,EAAUA,EAA2C,gCAAI,IAAM,kCAE/DA,EAAUA,EAAoD,yCAAI,IAAM,2CAKxEA,EAAUA,EAAoD,yCAAI,IAAM,2CAExEA,EAAUA,EAA4C,iCAAI,IAAM,mCAKhEA,EAAUA,EAA8C,mCAAI,IAAM,qCAIlEA,EAAUA,EAA8C,mCAAI,IAAM,qCAElEA,EAAUA,EAAgC,qBAAI,IAAM,uBAEpDA,EAAUA,EAAuB,YAAI,IAAM,cAE3CA,EAAUA,EAA4B,iBAAI,IAAM,mBAEhDA,EAAUA,EAAiC,sBAAI,IAAM,wBAErDA,EAAUA,EAAwB,aAAI,IAAM,eA5DhD,CA6DGA,IAAcA,EAAY,KC7D7B,SAAWC,GAIPA,EAAKA,EAAc,QAAI,GAAK,UAI5BA,EAAKA,EAAe,SAAI,GAAK,WAI7BA,EAAKA,EAAa,OAAI,GAAK,SAI3BA,EAAKA,EAAW,KAAI,GAAK,OAIzBA,EAAKA,EAAW,KAAI,GAAK,OAIzBA,EAAKA,EAAa,OAAI,GAAK,SAI3BA,EAAKA,EAAa,OAAI,GAAK,SAK3BA,EAAKA,EAAY,MAAI,GAAK,QAI1BA,EAAKA,EAAU,IAAI,GAAK,MArC5B,CAsCGA,IAASA,EAAO,KAEnB,SAAWC,GACPA,EAAcA,EAAsB,OAAI,GAAK,SAC7CA,EAAcA,EAAwB,SAAI,GAAK,WAFnD,CAGGA,IAAkBA,EAAgB,KC3C9B,IAAIyB,EAAwB,+CACxBC,EAAoB,uCCG3BC,GAAkB,4KAOf,SAASC,GAAsBC,GAClC,IAAI78B,EAAS,GA0Gb,OAzGA68B,EAASlhC,QAAQghC,IAAiB,SAAU1/B,GACxC,IAAI+M,EAAM/M,EAAM/V,OAChB,OAAQ+V,EAAM,IAEV,IAAK,IACD+C,EAAO88B,IAAc,IAAR9yB,EAAY,OAAiB,IAARA,EAAY,SAAW,QACzD,MAEJ,IAAK,IACDhK,EAAO+8B,KAAe,IAAR/yB,EAAY,UAAY,UACtC,MACJ,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACD,MAAM,IAAIstB,WAAW,gEAEzB,IAAK,IACL,IAAK,IACD,MAAM,IAAIA,WAAW,8CAEzB,IAAK,IACL,IAAK,IACDt3B,EAAOg9B,MAAQ,CAAC,UAAW,UAAW,QAAS,OAAQ,UAAUhzB,EAAM,GACvE,MAEJ,IAAK,IACL,IAAK,IACD,MAAM,IAAIstB,WAAW,2CACzB,IAAK,IACDt3B,EAAOi9B,IAAM,CAAC,UAAW,WAAWjzB,EAAM,GAC1C,MACJ,IAAK,IACL,IAAK,IACL,IAAK,IACD,MAAM,IAAIstB,WAAW,6DAEzB,IAAK,IACDt3B,EAAOk9B,QAAkB,IAARlzB,EAAY,QAAkB,IAARA,EAAY,SAAW,QAC9D,MACJ,IAAK,IACD,GAAIA,EAAM,EACN,MAAM,IAAIstB,WAAW,iDAEzBt3B,EAAOk9B,QAAU,CAAC,QAAS,OAAQ,SAAU,SAASlzB,EAAM,GAC5D,MACJ,IAAK,IACD,GAAIA,EAAM,EACN,MAAM,IAAIstB,WAAW,iDAEzBt3B,EAAOk9B,QAAU,CAAC,QAAS,OAAQ,SAAU,SAASlzB,EAAM,GAC5D,MAEJ,IAAK,IACDhK,EAAOm9B,QAAS,EAChB,MACJ,IAAK,IACL,IAAK,IACD,MAAM,IAAI7F,WAAW,8DAEzB,IAAK,IACDt3B,EAAOo9B,UAAY,MACnBp9B,EAAOq9B,KAAO,CAAC,UAAW,WAAWrzB,EAAM,GAC3C,MACJ,IAAK,IACDhK,EAAOo9B,UAAY,MACnBp9B,EAAOq9B,KAAO,CAAC,UAAW,WAAWrzB,EAAM,GAC3C,MACJ,IAAK,IACDhK,EAAOo9B,UAAY,MACnBp9B,EAAOq9B,KAAO,CAAC,UAAW,WAAWrzB,EAAM,GAC3C,MACJ,IAAK,IACDhK,EAAOo9B,UAAY,MACnBp9B,EAAOq9B,KAAO,CAAC,UAAW,WAAWrzB,EAAM,GAC3C,MACJ,IAAK,IACL,IAAK,IACL,IAAK,IACD,MAAM,IAAIstB,WAAW,oEAEzB,IAAK,IACDt3B,EAAOs9B,OAAS,CAAC,UAAW,WAAWtzB,EAAM,GAC7C,MAEJ,IAAK,IACDhK,EAAOu9B,OAAS,CAAC,UAAW,WAAWvzB,EAAM,GAC7C,MACJ,IAAK,IACL,IAAK,IACD,MAAM,IAAIstB,WAAW,8DAEzB,IAAK,IACDt3B,EAAOw9B,aAAexzB,EAAM,EAAI,QAAU,OAC1C,MACJ,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACD,MAAM,IAAIstB,WAAW,wEAE7B,MAAO,MAEJt3B,ECtHJ,IAAI,GAAoB,wCCCxB,SAASy9B,GAA8BZ,GAC1C,GAAwB,IAApBA,EAAS31C,OACT,MAAM,IAAI6L,MAAM,mCAOpB,IAJA,IAAI2qC,EAGAC,EAAS,GACJ3Q,EAAK,EAAG4Q,EAJEf,EACd7tC,MAAM,IACN7G,QAAO,SAAUmY,GAAK,OAAOA,EAAEpZ,OAAS,KAEG8lC,EAAK4Q,EAAe12C,OAAQ8lC,IAAM,CAC9E,IAAI6Q,EACAC,EADcF,EAAe5Q,GACAh+B,MAAM,KACvC,GAA8B,IAA1B8uC,EAAe52C,OACf,MAAM,IAAI6L,MAAM,2BAGpB,IADA,IAAIgrC,EAAOD,EAAe,GAAI5sC,EAAU4sC,EAAe36B,MAAM,GACpD66B,EAAK,EAAGC,EAAY/sC,EAAS8sC,EAAKC,EAAU/2C,OAAQ82C,IAAM,CAC/D,IAAIE,EACJ,GAAsB,IADTD,EAAUD,GACZ92C,OACP,MAAM,IAAI6L,MAAM,2BAGxB4qC,EAAOj6C,KAAK,CAAEq6C,KAAMA,EAAM7sC,QAASA,IAEvC,OAAOysC,EAEX,SAASQ,GAAcC,GACnB,OAAOA,EAAKziC,QAAQ,UAAW,IAEnC,IAAI0iC,GAA2B,mCAC3BC,GAA8B,wBAC9BC,GAAsB,0BACtBC,GAA8B,SAClC,SAASC,GAA0BhjC,GAC/B,IAAIuE,EAAS,GA6Bb,MA5B4B,MAAxBvE,EAAIA,EAAIvU,OAAS,GACjB8Y,EAAO0+B,iBAAmB,gBAEG,MAAxBjjC,EAAIA,EAAIvU,OAAS,KACtB8Y,EAAO0+B,iBAAmB,iBAE9BjjC,EAAIE,QAAQ2iC,IAA6B,SAAU3+B,EAAGg/B,EAAIC,GAoBtD,MAlBkB,iBAAPA,GACP5+B,EAAO6+B,yBAA2BF,EAAGz3C,OACrC8Y,EAAO8+B,yBAA2BH,EAAGz3C,QAGzB,MAAP03C,EACL5+B,EAAO6+B,yBAA2BF,EAAGz3C,OAGtB,MAAVy3C,EAAG,GACR3+B,EAAO8+B,yBAA2BH,EAAGz3C,QAIrC8Y,EAAO6+B,yBAA2BF,EAAGz3C,OACrC8Y,EAAO8+B,yBACHH,EAAGz3C,QAAwB,iBAAP03C,EAAkBA,EAAG13C,OAAS,IAEnD,MAEJ8Y,EAEX,SAAS++B,GAAUtjC,GACf,OAAQA,GACJ,IAAK,YACD,MAAO,CACHujC,YAAa,QAErB,IAAK,kBACL,IAAK,KACD,MAAO,CACHC,aAAc,cAEtB,IAAK,cACL,IAAK,KACD,MAAO,CACHD,YAAa,UAErB,IAAK,yBACL,IAAK,MACD,MAAO,CACHA,YAAa,SACbC,aAAc,cAEtB,IAAK,mBACL,IAAK,KACD,MAAO,CACHD,YAAa,cAErB,IAAK,8BACL,IAAK,MACD,MAAO,CACHA,YAAa,aACbC,aAAc,cAEtB,IAAK,aACL,IAAK,KACD,MAAO,CACHD,YAAa,UAI7B,SAASE,GAAyCnB,GAE9C,IAAI/9B,EAaJ,GAZgB,MAAZ+9B,EAAK,IAA0B,MAAZA,EAAK,IACxB/9B,EAAS,CACLm/B,SAAU,eAEdpB,EAAOA,EAAK56B,MAAM,IAED,MAAZ46B,EAAK,KACV/9B,EAAS,CACLm/B,SAAU,cAEdpB,EAAOA,EAAK56B,MAAM,IAElBnD,EAAQ,CACR,IAAIg/B,EAAcjB,EAAK56B,MAAM,EAAG,GAShC,GARoB,OAAhB67B,GACAh/B,EAAOg/B,YAAc,SACrBjB,EAAOA,EAAK56B,MAAM,IAEG,OAAhB67B,IACLh/B,EAAOg/B,YAAc,aACrBjB,EAAOA,EAAK56B,MAAM,KAEjBq7B,GAA4Br+C,KAAK49C,GAClC,MAAM,IAAIhrC,MAAM,6CAEpBiN,EAAOo/B,qBAAuBrB,EAAK72C,OAEvC,OAAO8Y,EAEX,SAASq/B,GAAqBC,GAC1B,IAAIt/B,EAAS,GACTu/B,EAAWR,GAAUO,GACzB,OAAIC,GAGGv/B,EAKJ,SAASw/B,GAAoB7B,GAEhC,IADA,IAAI39B,EAAS,GACJgtB,EAAK,EAAGyS,EAAW9B,EAAQ3Q,EAAKyS,EAASv4C,OAAQ8lC,IAAM,CAC5D,IAAI0S,EAAQD,EAASzS,GACrB,OAAQ0S,EAAM3B,MACV,IAAK,UACL,IAAK,IACD/9B,EAAO5S,MAAQ,UACf,SACJ,IAAK,QACD4S,EAAO5S,MAAQ,UACf4S,EAAO2/B,MAAQ,IACf,SACJ,IAAK,WACD3/B,EAAO5S,MAAQ,WACf4S,EAAO4/B,SAAWF,EAAMxuC,QAAQ,GAChC,SACJ,IAAK,YACL,IAAK,KACD8O,EAAO6/B,aAAc,EACrB,SACJ,IAAK,oBACL,IAAK,IACD7/B,EAAO8/B,sBAAwB,EAC/B,SACJ,IAAK,eACL,IAAK,OACD9/B,EAAO5S,MAAQ,OACf4S,EAAOo+B,KAAOD,GAAcuB,EAAMxuC,QAAQ,IAC1C,SACJ,IAAK,gBACL,IAAK,IACD8O,EAAOm/B,SAAW,UAClBn/B,EAAO+/B,eAAiB,QACxB,SACJ,IAAK,eACL,IAAK,KACD//B,EAAOm/B,SAAW,UAClBn/B,EAAO+/B,eAAiB,OACxB,SACJ,IAAK,aACD//B,EAAS5B,EAASA,EAASA,EAAS,GAAI4B,GAAS,CAAEm/B,SAAU,eAAiBO,EAAMxuC,QAAQ0F,QAAO,SAAUvQ,EAAKi5C,GAAO,OAAQlhC,EAASA,EAAS,GAAI/X,GAAMg5C,GAAqBC,MAAW,KAC7L,SACJ,IAAK,cACDt/B,EAAS5B,EAASA,EAASA,EAAS,GAAI4B,GAAS,CAAEm/B,SAAU,gBAAkBO,EAAMxuC,QAAQ0F,QAAO,SAAUvQ,EAAKi5C,GAAO,OAAQlhC,EAASA,EAAS,GAAI/X,GAAMg5C,GAAqBC,MAAW,KAC9L,SACJ,IAAK,kBACDt/B,EAAOm/B,SAAW,WAClB,SAEJ,IAAK,oBACDn/B,EAAOggC,gBAAkB,eACzBhgC,EAAOigC,YAAc,SACrB,SACJ,IAAK,mBACDjgC,EAAOggC,gBAAkB,OACzBhgC,EAAOigC,YAAc,QACrB,SACJ,IAAK,uBACDjgC,EAAOggC,gBAAkB,OACzBhgC,EAAOigC,YAAc,OACrB,SACJ,IAAK,sBACDjgC,EAAOggC,gBAAkB,SACzB,SACJ,IAAK,QACDhgC,EAAO2/B,MAAQO,WAAWR,EAAMxuC,QAAQ,IACxC,SAEJ,IAAK,gBACD,GAAIwuC,EAAMxuC,QAAQhK,OAAS,EACvB,MAAM,IAAIowC,WAAW,4DAEzBoI,EAAMxuC,QAAQ,GAAGyK,QAAQ4iC,IAAqB,SAAU5+B,EAAGg/B,EAAIC,EAAIuB,EAAIC,EAAIC,GACvE,GAAI1B,EACA3+B,EAAOo/B,qBAAuBR,EAAG13C,WAEhC,IAAIi5C,GAAMC,EACX,MAAM,IAAIrtC,MAAM,sDAEf,GAAIstC,EACL,MAAM,IAAIttC,MAAM,oDAEpB,MAAO,MAEX,SAGR,GAAIyrC,GAA4Br+C,KAAKu/C,EAAM3B,MACvC/9B,EAAOo/B,qBAAuBM,EAAM3B,KAAK72C,YAG7C,GAAIm3C,GAAyBl+C,KAAKu/C,EAAM3B,MAAxC,CAII,GAAI2B,EAAMxuC,QAAQhK,OAAS,EACvB,MAAM,IAAIowC,WAAW,iEAEzBoI,EAAM3B,KAAKpiC,QAAQ0iC,IAA0B,SAAU1+B,EAAGg/B,EAAIC,EAAIuB,EAAIC,EAAIC,GAkBtE,MAhBW,MAAPzB,EACA5+B,EAAOsgC,sBAAwB3B,EAAGz3C,OAG7Bi5C,GAAgB,MAAVA,EAAG,GACdngC,EAAO8/B,sBAAwBK,EAAGj5C,OAG7Bk5C,GAAMC,GACXrgC,EAAOsgC,sBAAwBF,EAAGl5C,OAClC8Y,EAAO8/B,sBAAwBM,EAAGl5C,OAASm5C,EAAGn5C,SAG9C8Y,EAAOsgC,sBAAwB3B,EAAGz3C,OAClC8Y,EAAO8/B,sBAAwBnB,EAAGz3C,QAE/B,MAEX,IAAIo4C,EAAMI,EAAMxuC,QAAQ,GAEZ,MAARouC,EACAt/B,EAAS5B,EAASA,EAAS,GAAI4B,GAAS,CAAEugC,oBAAqB,mBAE1DjB,IACLt/B,EAAS5B,EAASA,EAAS,GAAI4B,GAASy+B,GAA0Ba,UAK1E,GAAIhB,GAA4Bn+C,KAAKu/C,EAAM3B,MACvC/9B,EAAS5B,EAASA,EAAS,GAAI4B,GAASy+B,GAA0BiB,EAAM3B,WAD5E,CAIA,IAAIwB,EAAWR,GAAUW,EAAM3B,MAC3BwB,IACAv/B,EAAS5B,EAASA,EAAS,GAAI4B,GAASu/B,IAE5C,IAAIiB,EAAsCtB,GAAyCQ,EAAM3B,MACrFyC,IACAxgC,EAAS5B,EAASA,EAAS,GAAI4B,GAASwgC,KAGhD,OAAOxgC,ECnSJ,IAAIygC,GAAW,CAClB,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,GAAM,CACF,IACA,KAEJ,MAAO,CACH,IACA,KAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,QAAS,CACL,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,QAAS,CACL,IACA,IACA,MAEJ,QAAS,CACL,IACA,IACA,MAEJ,QAAS,CACL,IACA,IACA,MAEJ,QAAS,CACL,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,QAAS,CACL,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,QAAS,CACL,IACA,IACA,KACA,MAEJ,QAAS,CACL,IACA,IACA,KACA,MAEJ,QAAS,CACL,IACA,IACA,KACA,MAEJ,QAAS,CACL,IACA,IACA,KACA,MAEJ,QAAS,CACL,IACA,IACA,KACA,MAEJ,QAAS,CACL,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KACA,MAEJ,GAAM,CACF,IACA,IACA,KAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,MAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,SAAU,CACN,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,IACA,MAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,SAAU,CACN,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KACA,KAEJ,GAAM,CACF,IACA,KACA,KAC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,GACM,MAANA,GACCA,GAAK,KAAUA,GAAK,KACf,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACM,MAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACf,OAANA,GACM,OAANA,GACM,OAANA,GACCA,GAAK,MAAUA,GAAK,MACf,OAANA,GACM,OAANA,GACM,OAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACf,OAANA,GACM,OAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACf,OAANA,GACM,OAANA,GACM,OAANA,GACCA,GAAK,MAAUA,GAAK,MACf,OAANA,GACM,OAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACf,OAANA,GACCA,GAAK,MAAUA,GAAK,MACf,OAANA,GACCA,GAAK,MAAUA,GAAK,MACf,OAANA,GACCA,GAAK,MAAUA,GAAK,MACf,OAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACf,OAANA,GACM,OAANA,GACM,OAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACf,OAANA,GACM,OAANA,GACM,OAANA,GACM,OAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,KACf,OAANA,GACM,OAANA,GACCA,GAAK,MAAUA,GAAK,MACf,OAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACf,OAANA,GACCA,GAAK,MAAUA,GAAK,MACf,OAANA,GACCA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACf,OAANA,GACCA,GAAK,MAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACf,QAANA,GACCA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACCA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACf,QAANA,GACCA,GAAK,OAAUA,GAAK,OACpBA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,OACf,QAANA,GACM,QAANA,GACM,QAANA,GACM,QAANA,GACCA,GAAK,OAAUA,GAAK,MEtvC7B,SAASwsD,GAAcC,GACnBA,EAAI9kD,SAAQ,SAAUo1C,GAElB,UADOA,EAAG/jC,SACNykC,EAAgBV,IAAOY,EAAgBZ,GACvC,IAAK,IAAIxlC,KAAKwlC,EAAGhqC,eACNgqC,EAAGhqC,QAAQwE,GAAGyB,SACrBwzC,GAAczP,EAAGhqC,QAAQwE,GAAG3W,YAG3Bu8C,EAAgBJ,IAAOkB,EAAiBlB,EAAG9tC,SAG1CouC,EAAcN,IAAOQ,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","file":"js/engine-core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AliLowCodeEngine\"] = factory();\n\telse\n\t\troot[\"AliLowCodeEngine\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 60);\n","export * from './intl';\nexport * from './editor';\nexport * from './utils';\nexport * from './di';\nexport * from './hotkey';\nexport * from './widgets';\nexport * from './config';\nexport * from './event-bus';\n","module.exports = window.React;","export function isCSSUrl(url: string): boolean {\n  return /\\.css(\\?.*)?$/.test(url);\n}\n","export interface Defer<T = any> {\n  resolve(value?: T | PromiseLike<T>): void;\n  reject(reason?: any): void;\n  promise(): Promise<T>;\n}\n\nexport function createDefer<T = any>(): Defer<T> {\n  const r: any = {};\n  const promise = new Promise<T>((resolve, reject) => {\n    r.resolve = resolve;\n    r.reject = reject;\n  });\n\n  r.promise = () => promise;\n\n  return r;\n}\n","import { createDefer } from './create-defer';\n\nexport function evaluate(script: string) {\n  const scriptEl = document.createElement('script');\n  scriptEl.text = script;\n  document.head.appendChild(scriptEl);\n  document.head.removeChild(scriptEl);\n}\n\nexport function load(url: string) {\n  const node: any = document.createElement('script');\n\n  // node.setAttribute('crossorigin', 'anonymous');\n\n  node.onload = onload;\n  node.onerror = onload;\n\n  const i = createDefer();\n\n  function onload(e: any) {\n    node.onload = null;\n    node.onerror = null;\n    if (e.type === 'load') {\n      i.resolve();\n    } else {\n      i.reject();\n    }\n    // document.head.removeChild(node);\n    // node = null;\n  }\n\n  node.src = url;\n\n  // `async=false` is required to make sure all js resources execute sequentially.\n  node.async = false;\n\n  document.head.appendChild(node);\n\n  return i.promise();\n}\n\nexport function evaluateExpression(expr: string) {\n  // eslint-disable-next-line no-new-func\n  const fn = new Function(expr);\n  return fn();\n}\n\nexport function newFunction(args: string, code: string) {\n  try {\n    // eslint-disable-next-line no-new-func\n    return new Function(args, code);\n  } catch (e) {\n    console.warn('Caught error, Cant init func');\n    return null;\n  }\n}\n","import { AssetType, AssetLevels, AssetLevel } from '@alilc/lowcode-types';\nimport type { AssetItem, Asset, AssetList, AssetBundle, IPublicTypeAssetsJson } from '@alilc/lowcode-types';\nimport { isCSSUrl } from './is-css-url';\nimport { createDefer } from './create-defer';\nimport { load, evaluate } from './script';\n\n// API 向下兼容\nexport { AssetType, AssetLevels, AssetLevel } from '@alilc/lowcode-types';\nexport type { AssetItem, Asset, AssetList, AssetBundle, IPublicTypeAssetsJson } from '@alilc/lowcode-types';\n\nexport function isAssetItem(obj: any): obj is AssetItem {\n  return obj && obj.type;\n}\n\nexport function isAssetBundle(obj: any): obj is AssetBundle {\n  return obj && obj.type === AssetType.Bundle;\n}\n\nexport function assetBundle(\n    assets?: Asset | AssetList | null,\n    level?: AssetLevel,\n  ): AssetBundle | null {\n  if (!assets) {\n    return null;\n  }\n  return {\n    type: AssetType.Bundle,\n    assets,\n    level,\n  };\n}\n\n/*\nurls: \"view.js,view2 <device selector>, view3 <device selector>\",\nurls: [\n  \"view.js\",\n  \"view.js *\",\n  \"view1.js mobile|pc\",\n  \"view2.js <device selector>\"\n] */\nexport function assetItem(type: AssetType, content?: string | null, level?: AssetLevel, id?: string): AssetItem | null {\n  if (!content) {\n    return null;\n  }\n  return {\n    type,\n    content,\n    level,\n    id,\n  };\n}\n\nexport function megreAssets(assets: IPublicTypeAssetsJson, incrementalAssets: IPublicTypeAssetsJson): IPublicTypeAssetsJson {\n  if (incrementalAssets.packages) {\n    assets.packages = [...(assets.packages || []), ...incrementalAssets.packages];\n  }\n\n  if (incrementalAssets.components) {\n    assets.components = [...(assets.components || []), ...incrementalAssets.components];\n  }\n\n  megreAssetsComponentList(assets, incrementalAssets, 'componentList');\n  megreAssetsComponentList(assets, incrementalAssets, 'bizComponentList');\n\n  return assets;\n}\n\nfunction megreAssetsComponentList(assets: IPublicTypeAssetsJson, incrementalAssets: IPublicTypeAssetsJson, listName: keyof IPublicTypeAssetsJson): void {\n  if (incrementalAssets[listName]) {\n    if (assets[listName]) {\n      // 根据title进行合并\n      incrementalAssets[listName]?.map((item) => {\n        let matchFlag = false;\n        assets[listName]?.map((assetItem) => {\n          if (assetItem.title === item.title) {\n            assetItem.children = assetItem.children.concat(item.children);\n            matchFlag = true;\n          }\n\n          return assetItem;\n        });\n\n        !matchFlag && assets[listName]?.push(item);\n        return item;\n      });\n    }\n  }\n}\n\nexport class StylePoint {\n  private lastContent: string | undefined;\n\n  private lastUrl: string | undefined;\n\n  private placeholder: Element | Text;\n\n  readonly level: number;\n\n  readonly id: string;\n\n  constructor(level: number, id?: string) {\n    this.level = level;\n    if (id) {\n      this.id = id;\n    }\n    let placeholder: any;\n    if (id) {\n      placeholder = document.head.querySelector(`style[data-id=\"${id}\"]`);\n    }\n    if (!placeholder) {\n      placeholder = document.createTextNode('');\n      const meta = document.head.querySelector(`meta[level=\"${level}\"]`);\n      if (meta) {\n        document.head.insertBefore(placeholder, meta);\n      } else {\n        document.head.appendChild(placeholder);\n      }\n    }\n    this.placeholder = placeholder;\n  }\n\n  applyText(content: string) {\n    if (this.lastContent === content) {\n      return;\n    }\n    this.lastContent = content;\n    this.lastUrl = undefined;\n    const element = document.createElement('style');\n    element.setAttribute('type', 'text/css');\n    if (this.id) {\n      element.setAttribute('data-id', this.id);\n    }\n    element.appendChild(document.createTextNode(content));\n    document.head.insertBefore(element, this.placeholder.parentNode === document.head ? this.placeholder.nextSibling : null);\n    document.head.removeChild(this.placeholder);\n    this.placeholder = element;\n  }\n\n  applyUrl(url: string) {\n    if (this.lastUrl === url) {\n      return;\n    }\n    this.lastContent = undefined;\n    this.lastUrl = url;\n    const element = document.createElement('link');\n    element.onload = onload;\n    element.onerror = onload;\n\n    const i = createDefer();\n    function onload(e: any) {\n      element.onload = null;\n      element.onerror = null;\n      if (e.type === 'load') {\n        i.resolve();\n      } else {\n        i.reject();\n      }\n    }\n\n    element.href = url;\n    element.rel = 'stylesheet';\n    if (this.id) {\n      element.setAttribute('data-id', this.id);\n    }\n    document.head.insertBefore(element, this.placeholder.parentNode === document.head ? this.placeholder.nextSibling : null);\n    document.head.removeChild(this.placeholder);\n    this.placeholder = element;\n    return i.promise();\n  }\n}\n\nfunction parseAssetList(scripts: any, styles: any, assets: AssetList, level?: AssetLevel) {\n  for (const asset of assets) {\n    parseAsset(scripts, styles, asset, level);\n  }\n}\n\nfunction parseAsset(scripts: any, styles: any, asset: Asset | undefined | null, level?: AssetLevel) {\n  if (!asset) {\n    return;\n  }\n  if (Array.isArray(asset)) {\n    return parseAssetList(scripts, styles, asset, level);\n  }\n\n  if (isAssetBundle(asset)) {\n    if (asset.assets) {\n      if (Array.isArray(asset.assets)) {\n        parseAssetList(scripts, styles, asset.assets, asset.level || level);\n      } else {\n        parseAsset(scripts, styles, asset.assets, asset.level || level);\n      }\n      return;\n    }\n    return;\n  }\n\n  if (!isAssetItem(asset)) {\n    asset = assetItem(isCSSUrl(asset) ? AssetType.CSSUrl : AssetType.JSUrl, asset, level)!;\n  }\n\n  let lv = asset.level || level;\n\n  if (!lv || AssetLevel[lv] == null) {\n    lv = AssetLevel.App;\n  }\n\n  asset.level = lv;\n  if (asset.type === AssetType.CSSUrl || asset.type == AssetType.CSSText) {\n    styles[lv].push(asset);\n  } else {\n    scripts[lv].push(asset);\n  }\n}\n\nexport class AssetLoader {\n  async load(asset: Asset) {\n    const styles: any = {};\n    const scripts: any = {};\n    AssetLevels.forEach(lv => {\n      styles[lv] = [];\n      scripts[lv] = [];\n    });\n    parseAsset(scripts, styles, asset);\n    const styleQueue: AssetItem[] = styles[AssetLevel.Environment].concat(\n      styles[AssetLevel.Library],\n      styles[AssetLevel.Theme],\n      styles[AssetLevel.Runtime],\n      styles[AssetLevel.App],\n    );\n    const scriptQueue: AssetItem[] = scripts[AssetLevel.Environment].concat(\n      scripts[AssetLevel.Library],\n      scripts[AssetLevel.Theme],\n      scripts[AssetLevel.Runtime],\n      scripts[AssetLevel.App],\n    );\n    await Promise.all(\n      styleQueue.map(({ content, level, type, id }) => this.loadStyle(content, level!, type === AssetType.CSSUrl, id)),\n    );\n    await Promise.all(scriptQueue.map(({ content, type }) => this.loadScript(content, type === AssetType.JSUrl)));\n  }\n\n  private stylePoints = new Map<string, StylePoint>();\n\n  private loadStyle(content: string | undefined | null, level: AssetLevel, isUrl?: boolean, id?: string) {\n    if (!content) {\n      return;\n    }\n    let point: StylePoint | undefined;\n    if (id) {\n      point = this.stylePoints.get(id);\n      if (!point) {\n        point = new StylePoint(level, id);\n        this.stylePoints.set(id, point);\n      }\n    } else {\n      point = new StylePoint(level);\n    }\n    return isUrl ? point.applyUrl(content) : point.applyText(content);\n  }\n\n  private loadScript(content: string | undefined | null, isUrl?: boolean) {\n    if (!content) {\n      return;\n    }\n    return isUrl ? load(content) : evaluate(content);\n  }\n\n  // todo 补充类型\n  async loadAsyncLibrary(asyncLibraryMap: Record<string, any>) {\n    const promiseList: any[] = [];\n    const libraryKeyList: any[] = [];\n    const pkgs: any[] = [];\n    for (const key in asyncLibraryMap) {\n      // 需要异步加载\n      if (asyncLibraryMap[key].async) {\n        promiseList.push(window[asyncLibraryMap[key].library]);\n        libraryKeyList.push(asyncLibraryMap[key].library);\n        pkgs.push(asyncLibraryMap[key]);\n      }\n    }\n    await Promise.all(promiseList).then((mods) => {\n      if (mods.length > 0) {\n        mods.map((item, index) => {\n          const { exportMode, exportSourceLibrary, library } = pkgs[index];\n          window[libraryKeyList[index]] =\n            exportMode === 'functionCall' &&\n            (exportSourceLibrary == null || exportSourceLibrary === library)\n              ? item()\n              : item;\n          return item;\n        });\n      }\n    });\n  }\n}\n","export function isObject(value: any): value is Record<string, unknown> {\n  return value !== null && typeof value === 'object';\n}\n\nexport function isI18NObject(value: any): boolean {\n  return isObject(value) && value.type === 'i18n';\n}\n","import { isObject } from './is-object';\n\nexport function isPlainObject(value: any): value is any {\n  if (!isObject(value)) {\n    return false;\n  }\n  const proto = Object.getPrototypeOf(value);\n  return proto === Object.prototype || proto === null || Object.getPrototypeOf(proto) === null;\n}\n","import { isPlainObject } from './is-plain-object';\n\nexport function cloneDeep(src: any): any {\n  const type = typeof src;\n\n  let data: any;\n  if (src === null || src === undefined) {\n    data = src;\n  } else if (Array.isArray(src)) {\n    data = src.map(item => cloneDeep(item));\n  } else if (type === 'object' && isPlainObject(src)) {\n    data = {};\n    for (const key in src) {\n      // eslint-disable-next-line no-prototype-builtins\n      if (src.hasOwnProperty(key)) {\n        data[key] = cloneDeep(src[key]);\n      }\n    }\n  } else {\n    data = src;\n  }\n\n  return data;\n}\n","const excludePropertyNames = [\n  '$$typeof',\n  'render',\n  'defaultProps',\n  'props',\n  'length',\n  'prototype',\n  'name',\n  'caller',\n  'callee',\n  'arguments',\n];\n\nexport function cloneEnumerableProperty(target: any, origin: any) {\n  const compExtraPropertyNames = Object.keys(origin).filter(d => !excludePropertyNames.includes(d));\n\n  compExtraPropertyNames.forEach((d: string) => {\n    (target as any)[d] = origin[d];\n  });\n\n  return target;\n}\n","import { ComponentClass, Component, FunctionComponent, ComponentType, createElement } from 'react';\nimport { cloneEnumerableProperty } from './clone-enumerable-property';\n\nconst hasSymbol = typeof Symbol === 'function' && Symbol.for;\nconst REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\n\nexport function isReactClass(obj: any): obj is ComponentClass<any> {\n  return obj && obj.prototype && (obj.prototype.isReactComponent || obj.prototype instanceof Component);\n}\n\nexport function acceptsRef(obj: any): boolean {\n  return obj?.prototype?.isReactComponent || (obj.$$typeof && obj.$$typeof === REACT_FORWARD_REF_TYPE);\n}\n\nfunction isForwardRefType(obj: any): boolean {\n  return obj?.$$typeof && obj?.$$typeof === REACT_FORWARD_REF_TYPE;\n}\n\nexport function isReactComponent(obj: any): obj is ComponentType<any> {\n  return obj && (isReactClass(obj) || typeof obj === 'function' || isForwardRefType(obj));\n}\n\nexport function wrapReactClass(view: FunctionComponent) {\n  let ViewComponentClass = class extends Component {\n    render() {\n      return createElement(view, this.props);\n    }\n  } as any;\n  ViewComponentClass = cloneEnumerableProperty(ViewComponentClass, view);\n  ViewComponentClass.displayName = view.displayName;\n  return ViewComponentClass;\n}\n","import { ReactNode, ComponentType, isValidElement, cloneElement, createElement } from 'react';\nimport { isReactComponent } from './is-react';\n\nexport function createContent(\n    content: ReactNode | ComponentType<any>,\n    props?: Record<string, unknown>,\n  ): ReactNode {\n  if (isValidElement(content)) {\n    return props ? cloneElement(content, props) : content;\n  }\n  if (isReactComponent(content)) {\n    return createElement(content, props);\n  }\n\n  return content;\n}\n","export type ESModule = {\n  __esModule: true;\n  default: any;\n};\nexport function isESModule(obj: any): obj is ESModule {\n  return obj && obj.__esModule;\n}\n","import { isValidElement, ReactNode, createElement, cloneElement } from 'react';\nimport { Icon } from '@alifd/next';\nimport { IPublicTypeIconType } from '@alilc/lowcode-types';\nimport { isReactComponent } from './is-react';\nimport { isESModule } from './is-es-module';\n\nconst URL_RE = /^(https?:)\\/\\//i;\n\nexport function createIcon(\n    icon?: IPublicTypeIconType | null,\n    props?: Record<string, unknown>,\n  ): ReactNode {\n  if (!icon) {\n    return null;\n  }\n  if (isESModule(icon)) {\n    icon = icon.default;\n  }\n  if (typeof icon === 'string') {\n    if (URL_RE.test(icon)) {\n      return <img src={icon} {...props} />;\n    }\n    return <Icon type={icon} {...props} />;\n  }\n  if (isValidElement(icon)) {\n    return cloneElement(icon, { ...props });\n  }\n  if (isReactComponent(icon)) {\n    return createElement(icon, { ...props });\n  }\n\n  return <Icon {...icon} {...props} />;\n}\n","import './cursor.less';\n\nexport class Cursor {\n  private states = new Set<string>();\n\n  setDragging(flag: boolean) {\n    if (flag) {\n      this.addState('dragging');\n    } else {\n      this.removeState('dragging');\n    }\n  }\n\n  setXResizing(flag: boolean) {\n    if (flag) {\n      this.addState('x-resizing');\n    } else {\n      this.removeState('x-resizing');\n    }\n  }\n\n  setYResizing(flag: boolean) {\n    if (flag) {\n      this.addState('y-resizing');\n    } else {\n      this.removeState('y-resizing');\n    }\n  }\n\n  setCopy(flag: boolean) {\n    if (flag) {\n      this.addState('copy');\n    } else {\n      this.removeState('copy');\n    }\n  }\n\n  isCopy() {\n    return this.states.has('copy');\n  }\n\n  release() {\n    for (const state of this.states) {\n      this.removeState(state);\n    }\n  }\n\n  addState(state: string) {\n    if (!this.states.has(state)) {\n      this.states.add(state);\n      document.documentElement.classList.add(`lc-cursor-${state}`);\n    }\n  }\n\n  private removeState(state: string) {\n    if (this.states.has(state)) {\n      this.states.delete(state);\n      document.documentElement.classList.remove(`lc-cursor-${state}`);\n    }\n  }\n}\n\nexport const cursor = new Cursor();\n","export function getPrototypeOf(target: any) {\n  if (typeof Object.getPrototypeOf !== 'undefined') {\n    return Object.getPrototypeOf(target);\n  }\n\n  // eslint-disable-next-line no-proto\n  return target.__proto__;\n}\n","const prototypeHasOwnProperty = Object.prototype.hasOwnProperty;\nexport function hasOwnProperty(obj: any, key: string | number | symbol): boolean {\n  return obj && prototypeHasOwnProperty.call(obj, key);\n}\n","export function isElement(node: any): node is Element {\n  if (!node) return false;\n  return node.nodeType === Node.ELEMENT_NODE;\n}\n","export function isFormEvent(e: KeyboardEvent | MouseEvent) {\n  const t = e.target as HTMLFormElement;\n  if (!t) {\n    return false;\n  }\n\n  if (t.form || /^(INPUT|SELECT|TEXTAREA)$/.test(t.tagName)) {\n    return true;\n  }\n  if (t instanceof HTMLElement && /write/.test(window.getComputedStyle(t).getPropertyValue('-webkit-user-modify'))) {\n    return true;\n  }\n  return false;\n}\n","export function isFunction(fn: any): boolean {\n  return typeof fn === 'function';\n}\n","let nativeSelectionEnabled = true;\nconst preventSelection = (e: Event) => {\n  if (nativeSelectionEnabled) {\n    return null;\n  }\n  e.preventDefault();\n  e.stopPropagation();\n  return false;\n};\ndocument.addEventListener('selectstart', preventSelection, true);\ndocument.addEventListener('dragstart', preventSelection, true);\n\nexport function setNativeSelection(enableFlag: boolean) {\n  nativeSelectionEnabled = enableFlag;\n}\n","export function setPrototypeOf(target: any, proto: any) {\n  if (typeof Object.setPrototypeOf !== 'undefined') {\n    Object.setPrototypeOf(target, proto);\n  } else {\n    // eslint-disable-next-line no-proto\n    target.__proto__ = proto;\n  }\n}\n","import { hasOwnProperty } from './has-own-property';\n\nexport function shallowEqual(objA: any, objB: any): boolean {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (let i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty(objB, keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { ReactNode } from 'react';\n\nconst SizePresets: any = {\n  xsmall: 8,\n  small: 12,\n  medium: 16,\n  large: 20,\n  xlarge: 30,\n};\n\nexport interface IconProps {\n  className?: string;\n  fill?: string;\n  size?: 'xsmall' | 'small' | 'medium' | 'large' | 'xlarge' | number;\n  children?: ReactNode;\n  style?: Record<string, unknown>;\n}\n\nexport function SVGIcon({\n  fill,\n  size = 'medium',\n  viewBox,\n  style,\n  children,\n  ...props\n}: IconProps & {\n  viewBox: string;\n}) {\n  // eslint-disable-next-line no-prototype-builtins\n  if (SizePresets.hasOwnProperty(size)) {\n    size = SizePresets[size];\n  }\n\n  return (\n    <svg\n      fill=\"currentColor\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      width={size}\n      height={size}\n      viewBox={viewBox}\n      {...props}\n      style={{\n        color: fill,\n        ...style,\n      }}\n    >\n      {children}\n    </svg>\n  );\n}\n","let guid = Date.now();\nexport function uniqueId(prefix = '') {\n  return `${prefix}${(guid++).toString(36).toLowerCase()}`;\n}\n","import { ComponentType, forwardRef, createElement, FunctionComponent } from 'react';\nimport { IPublicTypeNpmInfo, IPublicTypeComponentSchema } from '@alilc/lowcode-types';\nimport { isESModule } from './is-es-module';\nimport { isReactComponent, acceptsRef, wrapReactClass } from './is-react';\nimport { isObject } from './is-object';\n\ntype Component = ComponentType<any> | object;\ninterface LibraryMap {\n  [key: string]: string;\n}\n\nexport function accessLibrary(library: string | Record<string, unknown>) {\n  if (typeof library !== 'string') {\n    return library;\n  }\n\n  return (window as any)[library] || generateHtmlComp(library);\n}\n\nexport function generateHtmlComp(library: string) {\n  if (['a', 'img', 'div', 'span', 'svg'].includes(library)) {\n    return forwardRef((props, ref) => {\n      return createElement(library, { ref, ...props }, props.children);\n    });\n  }\n}\n\nexport function getSubComponent(library: any, paths: string[]) {\n  const l = paths.length;\n  if (l < 1 || !library) {\n    return library;\n  }\n  let i = 0;\n  let component: any;\n  while (i < l) {\n    const key = paths[i]!;\n    let ex: any;\n    try {\n      component = library[key] || component;\n    } catch (e) {\n      ex = e;\n      component = null;\n    }\n    if (i === 0 && component == null && key === 'default') {\n      if (ex) {\n        return l === 1 ? library : null;\n      }\n      component = library;\n    } else if (component == null) {\n      return null;\n    }\n    library = component;\n    i++;\n  }\n  return component;\n}\n\nfunction findComponent(libraryMap: LibraryMap, componentName: string, npm?: IPublicTypeNpmInfo) {\n  if (!npm) {\n    return accessLibrary(componentName);\n  }\n  // libraryName the key access to global\n  // export { exportName } from xxx exportName === global.libraryName.exportName\n  // export exportName from xxx   exportName === global.libraryName.default || global.libraryName\n  // export { exportName as componentName } from package\n  // if exportName == null exportName === componentName;\n  // const componentName = exportName.subName, if exportName empty subName donot use\n  const exportName = npm.exportName || npm.componentName || componentName;\n  const libraryName = libraryMap[npm.package] || exportName;\n  const library = accessLibrary(libraryName);\n  const paths = npm.exportName && npm.subName ? npm.subName.split('.') : [];\n  if (npm.destructuring) {\n    paths.unshift(exportName);\n  } else if (isESModule(library)) {\n    paths.unshift('default');\n  }\n  return getSubComponent(library, paths);\n}\n\n/**\n * 判断是否是一个混合组件，即 components 是一个对象，对象值是 React 组件\n * 示例：\n * {\n *    Button: ReactNode,\n *    Text: ReactNode,\n * }\n */\nfunction isMixinComponent(components: any) {\n  if (!isObject(components)) {\n    return false;\n  }\n\n  return Object.keys(components).some(componentName => isReactComponent(components[componentName]));\n}\n\nexport function buildComponents(libraryMap: LibraryMap,\n  componentsMap: { [componentName: string]: IPublicTypeNpmInfo | ComponentType<any> | IPublicTypeComponentSchema },\n  createComponent: (schema: IPublicTypeComponentSchema) => Component | null) {\n  const components: any = {};\n  Object.keys(componentsMap).forEach((componentName) => {\n    let component = componentsMap[componentName];\n    if (component && (component as IPublicTypeComponentSchema).componentName === 'Component') {\n      components[componentName] = createComponent(component as IPublicTypeComponentSchema);\n    } else if (isReactComponent(component)) {\n      if (!acceptsRef(component)) {\n        component = wrapReactClass(component as FunctionComponent);\n      }\n      components[componentName] = component;\n    } else if (isMixinComponent(component)) {\n      components[componentName] = component;\n    } else {\n      component = findComponent(libraryMap, componentName, component);\n      if (component) {\n        if (!acceptsRef(component)) {\n          component = wrapReactClass(component as FunctionComponent);\n        }\n        components[componentName] = component;\n      }\n    }\n  });\n  return components;\n}\n\nexport interface UtilsMetadata {\n  name: string;\n  npm: {\n    package: string;\n    version?: string;\n    exportName: string;\n    subName?: string;\n    destructuring?: boolean;\n    main?: string;\n  };\n}\n\ninterface LibrayMap {\n  [key: string]: string;\n}\n\ninterface ProjectUtils {\n  [packageName: string]: any;\n}\nexport function getProjectUtils(librayMap: LibrayMap, utilsMetadata: UtilsMetadata[]): ProjectUtils {\n  const projectUtils: ProjectUtils = {};\n  if (utilsMetadata) {\n    utilsMetadata.forEach(meta => {\n      if (librayMap[meta?.npm?.package]) {\n        const lib = accessLibrary(librayMap[meta?.npm.package]);\n        if (lib?.destructuring) {\n          Object.keys(lib).forEach(name => {\n            if (name === 'destructuring') return;\n            projectUtils[name] = lib[name];\n          });\n        } else if (meta.name) {\n          projectUtils[meta.name] = lib;\n        }\n      }\n    });\n  }\n  return projectUtils;\n}","import EventEmitter from 'events';\n\nlet instance: AppHelper | null = null;\n\nEventEmitter.defaultMaxListeners = 100;\n\nexport class AppHelper extends EventEmitter {\n  static getInstance = () => {\n    if (!instance) {\n      instance = new AppHelper();\n    }\n    return instance;\n  };\n\n  [key: string]: any;\n\n  constructor(config?: Record<string, any>) {\n    super();\n    instance = this;\n    Object.assign(this, config);\n  }\n\n  get(key: string) {\n    return this[key];\n  }\n\n  set(key: any, val: any) {\n    if (typeof key === 'string') {\n      this[key] = val;\n    } else if (typeof key === 'object') {\n      Object.keys(key).forEach((item) => {\n        this[item] = key[item];\n      });\n    }\n  }\n\n  batchOn(events: Array<string | symbol>, lisenter: (...args: any[]) => void) {\n    if (!Array.isArray(events)) return;\n    events.forEach((event) => this.on(event, lisenter));\n  }\n\n  batchOnce(events: Array<string | symbol>, lisenter: (...args: any[]) => void) {\n    if (!Array.isArray(events)) return;\n    events.forEach((event) => this.once(event, lisenter));\n  }\n\n  batchOff(events: Array<string | symbol>, lisenter: (...args: any[]) => void) {\n    if (!Array.isArray(events)) return;\n    events.forEach((event) => this.off(event, lisenter));\n  }\n}\n","\nimport { isI18NObject } from './is-object';\nimport { get } from 'lodash';\nimport { IPublicEnumTransformStage, IPublicModelComponentMeta } from '@alilc/lowcode-types';\n\ninterface Variable {\n  type: 'variable';\n  variable: string;\n  value: any;\n}\n\nexport function isVariable(obj: any): obj is Variable {\n  return obj && obj.type === 'variable';\n}\n\nexport function isUseI18NSetter(prototype: any, propName: string) {\n  const configure = prototype?.options?.configure;\n  if (Array.isArray(configure)) {\n    return configure.some(c => {\n      return c.name === propName && c?.setter?.type?.displayName === 'I18nSetter';\n    });\n  }\n  return false;\n}\n\nexport function convertToI18NObject(v: string | any, locale: string = 'zh-CN') {\n  if (isI18NObject(v)) return v;\n  return { type: 'i18n', use: locale, [locale]: v };\n}\n\nexport function isString(v: any): v is string {\n  return typeof v === 'string';\n}\n\nfunction _innerWaitForThing(obj: any, path: string): Promise<any> {\n  const timeGap = 200;\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const thing = get(obj, path);\n      if (thing) {\n        return resolve(thing);\n      }\n      reject();\n    }, timeGap);\n  }).catch(() => {\n    return _innerWaitForThing(obj, path);\n  });\n}\n\nexport function waitForThing(obj: any, path: string): Promise<any> {\n  const thing = get(obj, path);\n  if (thing) {\n    return Promise.resolve(thing);\n  }\n  return _innerWaitForThing(obj, path);\n}\n\nexport function arrShallowEquals(arr1: any[], arr2: any[]): boolean {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) return false;\n  if (arr1.length !== arr2.length) return false;\n  return arr1.every(item => arr2.includes(item));\n}\n\n/**\n * 判断当前 meta 是否从 vc prototype 转换而来\n * @param meta\n */\n export function isFromVC(meta: IPublicModelComponentMeta) {\n  return !!meta?.getMetadata().configure?.advanced;\n}\n\nexport function executePendingFn(fn: () => void, timeout: number = 2000) {\n  return setTimeout(fn, timeout);\n}\n\nconst stageList = [\n  'render',\n  'serilize',\n  'save',\n  'clone',\n  'init',\n  'upgrade',\n];\n/**\n * 兼容原来的数字版本的枚举对象\n * @param stage\n * @returns\n */\nexport function compatStage(stage: IPublicEnumTransformStage | number): IPublicEnumTransformStage {\n  if (typeof stage === 'number') {\n    console.warn('stage 直接指定为数字的使用方式已经过时，将在下一版本移除，请直接使用 IPublicEnumTransformStage.Render|Serilize|Save|Clone|Init|Upgrade');\n    return stageList[stage - 1] as IPublicEnumTransformStage;\n  }\n  return stage as IPublicEnumTransformStage;\n}\n\nexport function invariant(check: any, message: string, thing?: any) {\n  if (!check) {\n    throw new Error(`Invariant failed: ${ message }${thing ? ` in '${thing}'` : ''}`);\n  }\n}\n\nexport function deprecate(fail: any, message: string, alterative?: string) {\n  if (fail) {\n    console.warn(`Deprecation: ${message}` + (alterative ? `, use ${alterative} instead.` : ''));\n  }\n}\n\nexport function isRegExp(obj: any): obj is RegExp {\n  return obj && obj.test && obj.exec && obj.compile;\n}","\nexport function isActionContentObject(obj: any): boolean {\n  return obj && typeof obj === 'object';\n}\n","import { isValidElement } from 'react';\nimport { isReactComponent } from '../is-react';\nimport { IPublicTypeCustomView } from '@alilc/lowcode-types';\n\n\nexport function isCustomView(obj: any): obj is IPublicTypeCustomView {\n  return obj && (isValidElement(obj) || isReactComponent(obj));\n}\n","export function isDOMText(data: any): boolean {\n  return typeof data === 'string';\n}\n","import { isReactClass } from '../is-react';\nimport { IPublicTypeDynamicSetter } from '@alilc/lowcode-types';\n\n\nexport function isDynamicSetter(obj: any): obj is IPublicTypeDynamicSetter {\n  return obj && typeof obj === 'function' && !isReactClass(obj);\n}\n","\n// type checks\n\nexport function isI18nData(obj: any): boolean {\n  return obj && obj.type === 'i18n';\n}\n","\nexport function isJSBlock(data: any): boolean {\n  return data && data.type === 'JSBlock';\n}\n","import { IPublicTypeJSExpression } from '@alilc/lowcode-types';\n\n/**\n * 为了避免把 { type: 'JSExpression', extType: 'function' } 误判为表达式，故增加如下逻辑。\n *\n * 引擎中关于函数的表达：\n *  开源版本：{ type: 'JSFunction', source: '', value: '' }\n *  内部版本：{ type: 'JSExpression', source: '', value: '', extType: 'function' }\n *  能力是对标的，不过开源的 react-renderer 只认识第一种，而内部只识别第二种（包括 Java 代码、RE）。\n * @param data\n * @returns\n */\nexport function isJSExpression(data: any): data is IPublicTypeJSExpression {\n  return data && data.type === 'JSExpression' && data.extType !== 'function';\n}\n","/**\n *  内部版本 的 { type: 'JSExpression', source: '', value: '', extType: 'function' } 能力上等同于 JSFunction\n */\nexport function isInnerJsFunction(data: any) {\n  return data && data.type === 'JSExpression' && data.extType === 'function';\n}\n\nexport function isJSFunction(data: any): boolean {\n  return typeof data === 'object' && data && data.type === 'JSFunction' || isInnerJsFunction(data);\n}\n","import { IPublicTypeJSSlot } from '@alilc/lowcode-types';\n\nexport function isJSSlot(data: any): data is IPublicTypeJSSlot {\n  return data && data.type === 'JSSlot';\n}\n","import { IPublicTypeComponentMap } from '@alilc/lowcode-types';\n\n\nexport function isProCodeComponentType(desc: IPublicTypeComponentMap): boolean {\n  return 'package' in desc;\n}\n","import { isProCodeComponentType } from './is-procode-component-type';\nimport { IPublicTypeComponentMap } from '@alilc/lowcode-types';\n\n\nexport function isLowCodeComponentType(desc: IPublicTypeComponentMap): boolean {\n  return !isProCodeComponentType(desc);\n}\n","import { IPublicTypeNodeSchema } from '@alilc/lowcode-types';\n\nexport function isNodeSchema(data: any): data is IPublicTypeNodeSchema {\n  return data && data.componentName;\n}\n","export function isProjectSchema(data: any): boolean {\n  return data && data.componentsTree;\n}\n","import { IPublicTypeSetterConfig } from '@alilc/lowcode-types';\nimport { isCustomView } from './is-custom-view';\n\n\nexport function isSetterConfig(obj: any): obj is IPublicTypeSetterConfig {\n  return obj && typeof obj === 'object' && 'componentName' in obj && !isCustomView(obj);\n}\n","import { isI18nData } from './is-i18n-data';\nimport { isPlainObject } from '../is-plain-object';\n\n\nexport function isTitleConfig(obj: any): boolean {\n  return isPlainObject(obj) && !isI18nData(obj);\n}\n","import { IPublicEnumDragObjectType } from '@alilc/lowcode-types';\n\nexport function isDragNodeDataObject(obj: any): boolean {\n  return obj && obj.type === IPublicEnumDragObjectType.NodeData;\n}","import { IPublicEnumDragObjectType } from '@alilc/lowcode-types';\n\nexport function isDragNodeObject(obj: any): boolean {\n  return obj && obj.type === IPublicEnumDragObjectType.Node;\n}","import { IPublicEnumDragObjectType } from '@alilc/lowcode-types';\n\nexport function isDragAnyObject(obj: any): boolean {\n  return obj && obj.type !== IPublicEnumDragObjectType.NodeData && obj.type !== IPublicEnumDragObjectType.Node;\n}","import { IPublicTypeLocationDetailType } from '@alilc/lowcode-types';\n\nexport function isLocationChildrenDetail(obj: any): boolean {\n  return obj && obj.type === IPublicTypeLocationDetailType.Children;\n}","export function isNode(node: any): boolean {\n  return node && node.isNode;\n}","\nexport function isLocationData(obj: any): boolean {\n  return obj && obj.target && obj.detail;\n}","export function isSettingField(obj: any): boolean {\n  return obj && obj.isSettingField;\n}\n","import { ActivityType, IPublicTypeNodeSchema, IPublicTypeRootSchema } from '@alilc/lowcode-types';\nimport { isJSBlock, isJSSlot } from './check-types';\nimport { isVariable } from './misc';\nimport { isPlainObject } from './is-plain-object';\n\nfunction isJsObject(props: any) {\n  if (typeof props === 'object' && props !== null) {\n    return props.type && props.source && props.compiled;\n  }\n}\nfunction isActionRef(props: any): boolean {\n  return props.type && props.type === 'actionRef';\n}\n\n/**\n * 将「乐高版本」协议升级成 JSExpression / JSSlot 等标准协议的结构\n * @param props\n * @returns\n */\nexport function compatibleLegaoSchema(props: any): any {\n  if (!props) {\n    return props;\n  }\n\n  if (Array.isArray(props)) {\n    return props.map(k => compatibleLegaoSchema(k));\n  }\n\n  if (!isPlainObject(props)) {\n    return props;\n  }\n\n  if (isJSBlock(props)) {\n    if (props.value.componentName === 'Slot') {\n      return {\n        type: 'JSSlot',\n        title: (props.value.props as any)?.slotTitle,\n        name: (props.value.props as any)?.slotName,\n        value: compatibleLegaoSchema(props.value.children),\n        params: (props.value.props as any)?.slotParams,\n      };\n    } else {\n      return props.value;\n    }\n  }\n  if (isVariable(props)) {\n    return {\n      type: 'JSExpression',\n      value: props.variable,\n      mock: props.value,\n    };\n  }\n  if (isJsObject(props)) {\n    return {\n      type: 'JSExpression',\n      value: props.compiled,\n      extType: 'function',\n    };\n  }\n  if (isActionRef(props)) {\n    return {\n      type: 'JSExpression',\n      value: `${props.id}.bind(this)`,\n    };\n  }\n  const newProps: any = {};\n  Object.keys(props).forEach((key) => {\n    if (/^__slot__/.test(key) && props[key] === true) {\n      return;\n    }\n    // TODO: 先移除，目前没有业务使用\n    // if (key === 'dataSource') {\n    //   newProps[key] = props[key];\n    //   return;\n    // }\n    newProps[key] = compatibleLegaoSchema(props[key]);\n  });\n  return newProps;\n}\n\nexport function getNodeSchemaById(schema: IPublicTypeNodeSchema, nodeId: string): IPublicTypeNodeSchema | undefined {\n  let found: NodeSIPublicTypeNodeSchemachema | undefined;\n  if (schema.id === nodeId) {\n    return schema;\n  }\n  const { children, props } = schema;\n  // 查找 children\n  if (Array.isArray(children)) {\n    for (const child of children) {\n      found = getNodeSchemaById(child as IPublicTypeNodeSchema, nodeId);\n      if (found) return found;\n    }\n  }\n  if (isPlainObject(props)) {\n    // 查找 props，主要是 slot 类型\n    found = getNodeSchemaFromPropsById(props, nodeId);\n    if (found) return found;\n  }\n}\n\nfunction getNodeSchemaFromPropsById(props: any, nodeId: string): IPublicTypeNodeSchema | undefined {\n  let found: IPublicTypeNodeSchema | undefined;\n  for (const [key, value] of Object.entries(props)) {\n    if (isJSSlot(value)) {\n      // value 是数组类型 { type: 'JSSlot', value: IPublicTypeNodeSchema[] }\n      if (Array.isArray(value.value)) {\n        for (const child of value.value) {\n          found = getNodeSchemaById(child as IPublicTypeNodeSchema, nodeId);\n          if (found) return found;\n        }\n      }\n      // value 是对象类型 { type: 'JSSlot', value: IPublicTypeNodeSchema }\n      found = getNodeSchemaById(value.value as IPublicTypeNodeSchema, nodeId);\n      if (found) return found;\n    } else if (isPlainObject(value)) {\n      found = getNodeSchemaFromPropsById(value, nodeId);\n      if (found) return found;\n    }\n  }\n}\n\n/**\n * TODO: not sure if this is used anywhere\n * @deprecated\n */\nexport function applyActivities(pivotSchema: IPublicTypeRootSchema, activities: any, options?: any): IPublicTypeRootSchema {\n  let schema = { ...pivotSchema };\n  if (!Array.isArray(activities)) {\n    activities = [activities];\n  }\n  return activities.reduce((accSchema: IPublicTypeRootSchema, activity: any) => {\n    if (activity.type === ActivityType.MODIFIED) {\n      const found = getNodeSchemaById(accSchema, activity.payload.schema.id);\n      if (!found) return accSchema;\n      Object.assign(found, activity.payload.schema);\n    } else if (activity.type === ActivityType.ADDED) {\n      const { payload } = activity;\n      const { location, schema } = payload;\n      const { parent } = location;\n      const found = getNodeSchemaById(accSchema, parent.nodeId);\n      if (found) {\n        if (Array.isArray(found.children)) {\n          found.children.splice(parent.index, 0, schema);\n        } else if (!found.children) {\n          found.children = [schema];\n        }\n        // TODO: 是 JSExpression / DOMText\n      }\n    } else if (activity.type === ActivityType.DELETED) {\n      const { payload } = activity;\n      const { location } = payload;\n      const { parent } = location;\n      const found = getNodeSchemaById(accSchema, parent.nodeId);\n      if (found && Array.isArray(found.children)) {\n        found.children.splice(parent.index, 1);\n      }\n    }\n    return accSchema;\n  }, schema);\n}\n","// 仅使用类型\nimport { IPublicModelNode } from '@alilc/lowcode-types';\n\nexport const getClosestNode = (\n  node: IPublicModelNode,\n  until: (n: IPublicModelNode) => boolean,\n  ): IPublicModelNode | undefined => {\n  if (!node) {\n    return undefined;\n  }\n  if (until(node)) {\n    return node;\n  } else {\n    // @ts-ignore\n    return getClosestNode(node.getParent(), until);\n  }\n};\n\n/**\n * 判断节点是否可被点击\n * @param {Node} node 节点\n * @param {unknown} e 点击事件\n * @returns {boolean} 是否可点击，true表示可点击\n */\nexport const canClickNode = (node: IPublicModelNode, e: unknown): boolean => {\n  const onClickHook = node.componentMeta?.advanced.callbacks?.onClickHook;\n  const canClick = typeof onClickHook === 'function' ? onClickHook(e as MouseEvent, node) : true;\n  return canClick;\n};\n","/* eslint-disable no-console */\n/* eslint-disable no-param-reassign */\nimport { isObject } from './is-object';\n\nexport type Level = 'debug' | 'log' | 'info' | 'warn' | 'error';\ninterface Options {\n  level: Level;\n  bizName: string;\n}\n\nconst levels: Record<string, number> = {\n  debug: -1,\n  log: 0,\n  info: 0,\n  warn: 1,\n  error: 2,\n};\nconst bizNameColors = [\n  '#daa569',\n  '#00ffff',\n  '#385e0f',\n  '#7fffd4',\n  '#00c957',\n  '#b0e0e6',\n  '#4169e1',\n  '#6a5acd',\n  '#87ceeb',\n  '#ffff00',\n  '#e3cf57',\n  '#ff9912',\n  '#eb8e55',\n  '#ffe384',\n  '#40e0d0',\n  '#a39480',\n  '#d2691e',\n  '#ff7d40',\n  '#f0e68c',\n  '#bc8f8f',\n  '#c76114',\n  '#734a12',\n  '#5e2612',\n  '#0000ff',\n  '#3d59ab',\n  '#1e90ff',\n  '#03a89e',\n  '#33a1c9',\n  '#a020f0',\n  '#a066d3',\n  '#da70d6',\n  '#dda0dd',\n  '#688e23',\n  '#2e8b57',\n];\nconst bodyColors: Record<string, string> = {\n  debug: '#666666',\n  log: '#bbbbbb',\n  info: '#ffffff',\n  warn: '#bbbbbb',\n  error: '#bbbbbb',\n};\nconst levelMarks: Record<string, string> = {\n  debug: 'debug',\n  log: 'log',\n  info: 'info',\n  warn: 'warn',\n  error: 'error',\n};\nconst outputFuntion: Record<string, any> = {\n  debug: console.log,\n  log: console.log,\n  info: console.log,\n  warn: console.warn,\n  error: console.error,\n};\n\nconst bizNameColorConfig: Record<string, string> = {};\n\nconst shouldOutput = (\n    logLevel: string,\n    targetLevel: string = 'warn',\n    bizName: string,\n    targetBizName: string,\n  ): boolean => {\n  const isLevelFit = (levels as any)[targetLevel] <= (levels as any)[logLevel];\n  const isBizNameFit = targetBizName === '*' || bizName.indexOf(targetBizName) > -1;\n  return isLevelFit && isBizNameFit;\n};\n\nconst output = (logLevel: string, bizName: string) => {\n  return (...args: any[]) => {\n    return outputFuntion[logLevel].apply(console, getLogArgs(args, bizName, logLevel));\n  };\n};\n\nconst getColor = (bizName: string) => {\n  if (!bizNameColorConfig[bizName]) {\n    const color = bizNameColors[Object.keys(bizNameColorConfig).length % bizNameColors.length];\n    bizNameColorConfig[bizName] = color;\n  }\n  return bizNameColorConfig[bizName];\n};\n\nconst getLogArgs = (args: any, bizName: string, logLevel: string) => {\n  const color = getColor(bizName);\n  const bodyColor = bodyColors[logLevel];\n\n  const argsArray = args[0];\n  let prefix = `%c[${bizName}]%c[${levelMarks[logLevel]}]:`;\n  argsArray.forEach((arg: any) => {\n    if (isObject(arg)) {\n      prefix += '%o';\n    } else {\n      prefix += '%s';\n    }\n  });\n  let processedArgs = [prefix, `color: ${color}`, `color: ${bodyColor}`];\n  processedArgs = processedArgs.concat(argsArray);\n  return processedArgs;\n};\nconst parseLogConf = (logConf: string, options: Options): { level: string; bizName: string} => {\n  if (!logConf) {\n    return {\n      level: options.level,\n      bizName: options.bizName,\n    };\n  }\n  if (logConf.indexOf(':') > -1) {\n    const pair = logConf.split(':');\n    return {\n      level: pair[0],\n      bizName: pair[1] || '*',\n    };\n  }\n  return {\n    level: logConf,\n    bizName: '*',\n  };\n};\n\nconst defaultOptions: Options = {\n  level: 'warn',\n  bizName: '*',\n};\n\n\nclass Logger {\n  bizName: string;\n  targetBizName: string;\n  targetLevel: string;\n  constructor(options: Options) {\n    options = { ...defaultOptions, ...options };\n    const _location = location || {} as any;\n    // __logConf__ 格式为 logLevel[:bizName], bizName is used as: targetBizName like '%bizName%'\n    //   1. __logConf__=log  or __logConf__=warn,  etc.\n    //   2. __logConf__=log:*  or __logConf__=warn:*,  etc.\n    //   2. __logConf__=log:bizName  or __logConf__=warn:partOfBizName,  etc.\n    const logConf = (((/__(?:logConf|logLevel)__=([^#/&]*)/.exec(_location.href)) || [])[1]);\n    const targetOptions = parseLogConf(logConf, options);\n    this.bizName = options.bizName;\n    this.targetBizName = targetOptions.bizName;\n    this.targetLevel = targetOptions.level;\n  }\n  debug(...args: any[]): void {\n    if (!shouldOutput('debug', this.targetLevel, this.bizName, this.targetBizName)) {\n      return;\n    }\n    return output('debug', this.bizName)(args);\n  }\n  log(...args: any[]): void {\n    if (!shouldOutput('log', this.targetLevel, this.bizName, this.targetBizName)) {\n      return;\n    }\n    return output('log', this.bizName)(args);\n  }\n  info(...args: any[]): void {\n    if (!shouldOutput('info', this.targetLevel, this.bizName, this.targetBizName)) {\n      return;\n    }\n    return output('info', this.bizName)(args);\n  }\n  warn(...args: any[]): void {\n    if (!shouldOutput('warn', this.targetLevel, this.bizName, this.targetBizName)) {\n      return;\n    }\n    return output('warn', this.bizName)(args);\n  }\n  error(...args: any[]): void {\n    if (!shouldOutput('error', this.targetLevel, this.bizName, this.targetBizName)) {\n      return;\n    }\n    return output('error', this.bizName)(args);\n  }\n}\n\n\nexport { Logger };\n\nexport function getLogger(config: { level: Level; bizName: string }): Logger {\n  return new Logger(config);\n}\n","const SHAKE_DISTANCE = 4;\n/**\n * mouse shake check\n */\nexport function isShaken(e1: MouseEvent | DragEvent, e2: MouseEvent | DragEvent): boolean {\n  if ((e1 as any).shaken) {\n    return true;\n  }\n  if (e1.target !== e2.target) {\n    return true;\n  }\n  return (\n    Math.pow(e1.clientY - e2.clientY, 2) + Math.pow(e1.clientX - e2.clientX, 2) > SHAKE_DISTANCE\n  );\n}","export function isPluginEventName(eventName: string): boolean {\n  if (!eventName) {\n    return false;\n  }\n\n  const eventSegments = eventName.split(':');\n  return (eventSegments.length > 1 && eventSegments[0].length > 0);\n}\n","/**\n * just for legao\n * @author: jiushen\n */\n// 需要通过 Env 来判断是否需要\n\nimport { some } from 'lodash';\n\nconst pseudoMap = ['hover', 'focus', 'active', 'visited'];\n\nconst RE_CAMEL = /[A-Z]/g;\nconst RE_HYPHEN = /[-\\s]+(.)?/g;\nconst CSS_REG = /:root(.*)\\{.*/i;\nconst PROPS_REG = /([^:]*):\\s?(.*)/i;\n\n// 给 css 分组\nfunction groupingCss(css) {\n  let stackLength = 0;\n  let startIndex = 0;\n  const group = [];\n  css.split('').forEach((char, index) => {\n    if (char === '{') {\n      stackLength++;\n    }\n    if (char === '}') {\n      if (stackLength === 1) {\n        group.push(css.substring(startIndex, index + 1));\n        startIndex = index + 1;\n      }\n      stackLength--;\n    }\n  });\n  return group;\n}\n\n\nfunction isString(str) {\n  return {}.toString.call(str) === '[object String]';\n}\n\nfunction hyphenate(str) {\n  return str.replace(RE_CAMEL, w => `-${w}`).toLowerCase();\n}\n\nfunction camelize(str) {\n  return str.replace(RE_HYPHEN, (m, w) => (w ? w.toUpperCase() : ''));\n}\n/**\n * convert\n * {background-color: \"red\"}\n * to\n * background-color: red;\n */\nfunction runtimeToCss(runtime) {\n  const css = [];\n  Object.keys(runtime).forEach((key) => {\n    css.push(`  ${key}: ${runtime[key]};`);\n  });\n  return css.join('\\n');\n}\n\nfunction toNativeStyle(runtime) {\n  if (!runtime) {\n    return {};\n  }\n  if (runtime.default) {\n    const normalized = {};\n    Object.keys(runtime).forEach((pseudo) => {\n      if (pseudo === 'extra') {\n        normalized[pseudo] = runtime[pseudo];\n        return;\n      }\n      normalized[pseudo] = toNativeStyle(runtime[pseudo]);\n    });\n    return normalized;\n  }\n\n  const normalized = {};\n  Object.keys(runtime).forEach((key) => {\n    normalized[camelize(key)] = runtime[key];\n  });\n  return normalized;\n}\n\nfunction normalizeStyle(style) {\n  if (!style) {\n    return {};\n  }\n  if (style.default) {\n    const normalized = {};\n    Object.keys(style).forEach((pseudo) => {\n      if (pseudo === 'extra') {\n        normalized[pseudo] = style[pseudo];\n        return;\n      }\n      normalized[pseudo] = normalizeStyle(style[pseudo]);\n    });\n    return normalized;\n  }\n\n  const normalized = {};\n  Object.keys(style).forEach((key) => {\n    normalized[hyphenate(key)] = style[key];\n  });\n  return normalized;\n}\n\n\nfunction toCss(runtime) {\n  if (!runtime) {\n    return (\n      `:root {\n\n}`);\n  }\n\n  if (runtime.default) {\n    const css = [];\n    Object.keys(runtime).forEach((pseudo) => {\n      if (pseudo === 'extra') {\n        Array.isArray(runtime.extra) && css.push(runtime.extra.join('\\n'));\n        return;\n      }\n      // 只需要对这四种做兼容\n      const prefix = pseudoMap.indexOf(pseudo) > -1 ? ':' : '';\n      css.push(\n        `:root${pseudo === 'default' ? '' : `${prefix}${pseudo}`} {\n${runtimeToCss(normalizeStyle(runtime[pseudo]))}\n}\\n`,\n);\n    });\n    return css.join('\\n');\n  }\n\n  return (\n    `:root {\n${runtimeToCss(normalizeStyle(runtime))}\n}\n`\n  );\n}\n\nfunction cssToRuntime(css) {\n  if (!css) {\n    return {};\n  }\n  const runtime = {};\n  const groups = groupingCss(css);\n  groups.forEach((cssItem) => {\n    if (!cssItem.startsWith(':root')) {\n      runtime.extra = runtime.extra || [];\n      runtime.extra.push(cssItem.trim());\n    } else {\n      const res = /:root:?(.*)?{(.*)/ig.exec(cssItem.replace(/[\\r\\n]+/ig, '').trim());\n      if (res) {\n        let pseudo;\n\n        if (res[1] && res[1].trim() && some(pseudoMap, pse => res[1].indexOf(pse) === 0)) {\n          pseudo = res[1].trim();\n        } else if (res[1] && res[1].trim()) {\n          pseudo = res[1];\n        }\n\n        const s = {};\n        res[2].split(';').reduce((prev, next) => {\n          if (next.indexOf('base64') > -1) {\n            prev[prev.length - 1] += `;${next}`;\n          } else {\n            prev.push(next);\n          }\n          return prev;\n        }, []).forEach((item) => {\n          if (item) {\n            if (PROPS_REG.test(item)) {\n              const props = item.match(PROPS_REG);\n              const key = props[1];\n              const value = props[2];\n              if (key && value) {\n                s[key.trim()] = value.trim();\n              }\n            }\n          }\n        });\n\n        if (!pseudo) {\n          pseudo = 'default';\n        }\n        runtime[pseudo] = s;\n      }\n    }\n  });\n  return runtime;\n}\n\nfunction cssToStyle(css) {\n  try {\n    if (isString(css)) {\n      return toNativeStyle(cssToRuntime(css).default);\n    }\n    if (css.default) {\n      return toNativeStyle(normalizeStyle(css.default));\n    }\n    return toNativeStyle(normalizeStyle(css));\n  } catch (e) {\n    // do nothing\n  }\n  return {};\n}\n\nexport {\n  hyphenate,\n  camelize,\n  toNativeStyle,\n  normalizeStyle,\n  toCss,\n  cssToRuntime,\n  cssToStyle,\n};\n","import { IPublicEnumTransitionType } from '@alilc/lowcode-types';\nimport { runInAction } from 'mobx';\nimport EventEmitter from 'events';\n\nclass TransactionManager {\n  emitter = new EventEmitter();\n\n  executeTransaction = (fn: () => void, type: IPublicEnumTransitionType = IPublicEnumTransitionType.REPAINT): void => {\n    this.emitter.emit(`[${type}]startTransaction`);\n    runInAction(fn);\n    this.emitter.emit(`[${type}]endTransaction`);\n  };\n\n  onStartTransaction = (fn: () => void, type: IPublicEnumTransitionType = IPublicEnumTransitionType.REPAINT): () => void => {\n    this.emitter.on(`[${type}]startTransaction`, fn);\n    return () => {\n      this.emitter.off(`[${type}]startTransaction`, fn);\n    };\n  };\n\n  onEndTransaction = (fn: () => void, type: IPublicEnumTransitionType = IPublicEnumTransitionType.REPAINT): () => void => {\n    this.emitter.on(`[${type}]endTransaction`, fn);\n    return () => {\n      this.emitter.off(`[${type}]endTransaction`, fn);\n    };\n  };\n}\n\nexport const transactionManager = new TransactionManager();\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","/** 数据源的状态 */\nexport var RuntimeDataSourceStatus;\n(function (RuntimeDataSourceStatus) {\n    /** 初始状态，尚未加载 */\n    RuntimeDataSourceStatus[\"Initial\"] = \"init\";\n    /** 正在加载 */\n    RuntimeDataSourceStatus[\"Loading\"] = \"loading\";\n    /** 已加载(无错误) */\n    RuntimeDataSourceStatus[\"Loaded\"] = \"loaded\";\n    /** 加载出错了 */\n    RuntimeDataSourceStatus[\"Error\"] = \"error\";\n})(RuntimeDataSourceStatus || (RuntimeDataSourceStatus = {}));\n//# sourceMappingURL=data-source.js.map","import { IPublicTypeNodeSchema } from './shell';\n\nexport enum ActivityType {\n  'ADDED' = 'added',\n  'DELETED' = 'deleted',\n  'MODIFIED' = 'modified',\n  'COMPOSITE' = 'composite',\n}\n\ninterface IActivityPayload {\n  schema: IPublicTypeNodeSchema;\n  location?: {\n    parent: {\n      nodeId: string;\n      index: number;\n    };\n  };\n  prop: any;\n  oldValue: any;\n  newValue: any;\n}\n\n/**\n * TODO: not sure if this is used anywhere\n * @deprecated\n */\nexport type ActivityData = {\n  type: ActivityType;\n  payload: IActivityPayload;\n};\n","export enum AssetLevel {\n  // 环境依赖库 比如 react, react-dom\n  Environment = 1,\n  // 基础类库，比如 lodash deep fusion antd\n  Library = 2,\n  // 主题\n  Theme = 3,\n  // 运行时\n  Runtime = 4,\n  // 业务组件\n  Components = 5,\n  // 应用 & 页面\n  App = 6,\n}\n\nexport const AssetLevels = [\n  AssetLevel.Environment,\n  AssetLevel.Library,\n  AssetLevel.Theme,\n  AssetLevel.Runtime,\n  AssetLevel.Components,\n  AssetLevel.App,\n];\n\nexport type URL = string;\n\nexport enum AssetType {\n  JSUrl = 'jsUrl',\n  CSSUrl = 'cssUrl',\n  CSSText = 'cssText',\n  JSText = 'jsText',\n  Bundle = 'bundle',\n}\n\nexport interface AssetItem {\n  type: AssetType;\n  content?: string | null;\n  device?: string;\n  level?: AssetLevel;\n  id?: string;\n}\n\nexport type AssetList = Array<Asset | undefined | null>;\n\nexport type Asset = AssetList | AssetBundle | AssetItem | URL;\n\nexport interface AssetBundle {\n  type: AssetType.Bundle;\n  level?: AssetLevel;\n  assets?: Asset | AssetList | null;\n}\n","export interface ChangeOptions {\n  key?: string | number;\n  prop?: any;\n  node: Node;\n  newValue: any;\n  oldValue: any;\n}\n\n/**\n * Node Prop 变化事件\n * @Deprecated Please Replace With InnerPropChange\n */\nexport const Change = 'node.prop.change';\n\n/** Node Prop 变化事件 */\nexport const InnerChange = 'node.innerProp.change';","export * as Prop from './prop';\n\nexport interface RerenderOptions {\n  time: number;\n  componentName?: string;\n  type?: string;\n  nodeCount?: number;\n}\n\nexport const Rerender = 'node.edit.rerender.time';\n","import { IPublicModelNode, IPublicModelLocateEvent } from '../model';\n\n// eslint-disable-next-line no-shadow\nexport enum IPublicTypeLocationDetailType {\n  Children = 'Children',\n  Prop = 'Prop',\n}\n\n/**\n * @deprecated please use IPublicTypeLocationDetailType\n */\nexport enum LocationDetailType {\n  Children = 'Children',\n  Prop = 'Prop',\n}\n\nexport type IPublicTypeRect = DOMRect & {\n  elements: Array<Element | Text>;\n  computed?: boolean;\n};\n\nexport interface IPublicTypeLocationChildrenDetail {\n  type: IPublicTypeLocationDetailType.Children;\n  index?: number | null;\n  /**\n   * 是否有效位置\n   */\n  valid?: boolean;\n  edge?: DOMRect;\n  near?: {\n    node: IPublicModelNode;\n    pos: 'before' | 'after' | 'replace';\n    rect?: IPublicTypeRect;\n    align?: 'V' | 'H';\n  };\n  focus?: { type: 'slots' } | { type: 'node'; node: IPublicModelNode };\n}\n\nexport interface IPublicTypeLocationPropDetail {\n  // cover 形态，高亮 domNode，如果 domNode 为空，取 container 的值\n  type: IPublicTypeLocationDetailType.Prop;\n  name: string;\n  domNode?: HTMLElement;\n}\n\n// eslint-disable-next-line max-len\nexport type IPublicTypeLocationDetail = IPublicTypeLocationChildrenDetail | IPublicTypeLocationPropDetail | { type: string; [key: string]: any };\n\nexport interface IPublicTypeLocationData {\n  target: IPublicModelNode; // shadowNode | ConditionFlow | ElementNode | RootNode\n  detail: IPublicTypeLocationDetail;\n  source: string;\n  event: IPublicModelLocateEvent;\n}","/**\n * 所有公开可用的事件名定义\n * All public event names\n * names should be like 'namespace.modelName.whatHappened'\n *\n */\n// eslint-disable-next-line no-shadow\nexport enum IPublicEnumEventNames {\n}","// eslint-disable-next-line no-shadow\nexport enum IPublicEnumTransitionType {\n  /** 节点更新后重绘处理 */\n  REPAINT\n}\n\n/**\n * @deprecated use IPublicEnumTransitionType instead\n */\nexport enum TransitionType {\n  /** 节点更新后重绘处理 */\n  REPAINT\n}","export enum IPublicEnumTransformStage {\n  Render = 'render',\n  Serilize = 'serilize',\n  Save = 'save',\n  Clone = 'clone',\n  Init = 'init',\n  Upgrade = 'upgrade',\n}\n/**\n * @deprecated use IPublicEnumTransformStage instead\n */\nexport enum TransformStage {\n  Render = 'render',\n  Serilize = 'serilize',\n  Save = 'save',\n  Clone = 'clone',\n  Init = 'init',\n  Upgrade = 'upgrade',\n}\n","// eslint-disable-next-line no-shadow\nexport enum IPublicEnumDragObjectType {\n  // eslint-disable-next-line no-shadow\n  Node = 'node',\n  NodeData = 'nodedata',\n}\n\n/**\n * @deprecated use IPublicEnumDragObjectType instead\n */\nexport enum DragObjectType {\n  Node = IPublicEnumDragObjectType.Node,\n  NodeData = IPublicEnumDragObjectType.NodeData,\n}\n","// eslint-disable-next-line no-shadow\nexport enum IPublicEnumPropValueChangedType {\n  /**\n   * normal set value\n   */\n  SET_VALUE = 'SET_VALUE',\n  /**\n   * value changed caused by sub-prop value change\n   */\n  SUB_VALUE_CHANGE = 'SUB_VALUE_CHANGE'\n}\n\n/**\n * @deprecated please use IPublicEnumPropValueChangedType\n */\nexport enum PROP_VALUE_CHANGED_TYPE {\n  /**\n   * normal set value\n   */\n  SET_VALUE = 'SET_VALUE',\n  /**\n   * value changed caused by sub-prop value change\n   */\n  SUB_VALUE_CHANGE = 'SUB_VALUE_CHANGE'\n}\n","import { IPublicTypeActionContentObject } from '../shell';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isActionContentObject(obj: any): obj is IPublicTypeActionContentObject {\n  return obj && typeof obj === 'object';\n}\n","import { ComponentClass, Component } from 'react';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isReactClass(obj: any): obj is ComponentClass<any> {\n  return obj && obj.prototype && (obj.prototype.isReactComponent || obj.prototype instanceof Component);\n}\n","import { ComponentType } from 'react';\nimport { isReactClass } from './isReactClass';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isReactComponent(obj: any): obj is ComponentType<any> {\n  return obj && (isReactClass(obj) || typeof obj === 'function');\n}\n","import { isValidElement } from 'react';\nimport { isReactComponent } from './isReactComponent';\nimport { IPublicTypeCustomView } from '../shell/type/custom-view';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isCustomView(obj: any): obj is IPublicTypeCustomView {\n  return obj && (isValidElement(obj) || isReactComponent(obj));\n}\n","import { IPublicTypeDOMText } from '../shell/type/dom-text';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isDOMText(data: any): data is IPublicTypeDOMText {\n  return typeof data === 'string';\n}\n","import { isReactClass } from './isReactClass';\nimport { IPublicTypeDynamicSetter } from '../shell/type/dynamic-setter';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isDynamicSetter(obj: any): obj is IPublicTypeDynamicSetter {\n  return obj && typeof obj === 'function' && !isReactClass(obj);\n}\n","\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isI18nData(obj: any): boolean {\n  return obj && obj.type === 'i18n';\n}\n","import { IPublicTypeJSBlock } from '../shell/type/value-type';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isJSBlock(data: any): data is IPublicTypeJSBlock {\n  return data && data.type === 'JSBlock';\n}\n","import { IPublicTypeJSExpression } from '../shell/type/value-type';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isJSExpression(data: any): data is IPublicTypeJSExpression {\n  return data && data.type === 'JSExpression' && data.extType !== 'function';\n}\n","import { IPublicTypeJSFunction } from '../shell/type/value-type';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isJSFunction(x: any): x is IPublicTypeJSFunction {\n  return typeof x === 'object' && x && x.type === 'JSFunction';\n}\n","import { IPublicTypeJSSlot } from '../shell/type/value-type';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isJSSlot(data: any): data is IPublicTypeJSSlot {\n  return data && data.type === 'JSSlot';\n}\n","import { IPublicTypeComponentMap, IPublicTypeProCodeComponent } from '../shell/type/npm';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isProCodeComponentType(desc: IPublicTypeComponentMap): desc is IPublicTypeProCodeComponent {\n  return 'package' in desc;\n}\n","import { isProCodeComponentType } from './isProCodeComponentType';\nimport { IPublicTypeComponentMap, IPublicTypeLowCodeComponent } from '../shell/type/npm';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isLowCodeComponentType(desc: IPublicTypeComponentMap): desc is IPublicTypeLowCodeComponent {\n  return !isProCodeComponentType(desc);\n}\n","import { IPublicTypeNodeSchema } from '../shell';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isNodeSchema(data: any): data is IPublicTypeNodeSchema {\n  return data && data.componentName;\n}\n","/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isPlainObject(value: any): value is Record<string, unknown> {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  const proto = Object.getPrototypeOf(value);\n  return proto === Object.prototype || proto === null || Object.getPrototypeOf(proto) === null;\n}\n","/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isProjectSchema(data: any): boolean {\n  return data && data.componentsTree;\n}\n","import { IPublicTypeSetterConfig } from '../shell/type/setter-config';\nimport { isCustomView } from './isCustomView';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isSetterConfig(obj: any): obj is IPublicTypeSetterConfig {\n  return obj && typeof obj === 'object' && 'componentName' in obj && !isCustomView(obj);\n}\n","import { isI18nData } from './isI18nData';\nimport { isPlainObject } from './isPlainObject';\nimport { IPublicTypeTitleConfig } from '../shell/type/title-config';\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isTitleConfig(obj: any): obj is IPublicTypeTitleConfig {\n  return isPlainObject(obj) && !isI18nData(obj);\n}\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","var niceErrors = {\n  0: \"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'\",\n  1: function _(annotationType, key) {\n    return \"Cannot apply '\" + annotationType + \"' to '\" + key.toString() + \"': Field not found.\";\n  },\n  /*\r\n  2(prop) {\r\n      return `invalid decorator for '${prop.toString()}'`\r\n  },\r\n  3(prop) {\r\n      return `Cannot decorate '${prop.toString()}': action can only be used on properties with a function value.`\r\n  },\r\n  4(prop) {\r\n      return `Cannot decorate '${prop.toString()}': computed can only be used on getter properties.`\r\n  },\r\n  */\n  5: \"'keys()' can only be used on observable objects, arrays, sets and maps\",\n  6: \"'values()' can only be used on observable objects, arrays, sets and maps\",\n  7: \"'entries()' can only be used on observable objects, arrays and maps\",\n  8: \"'set()' can only be used on observable objects, arrays and maps\",\n  9: \"'remove()' can only be used on observable objects, arrays and maps\",\n  10: \"'has()' can only be used on observable objects, arrays and maps\",\n  11: \"'get()' can only be used on observable objects, arrays and maps\",\n  12: \"Invalid annotation\",\n  13: \"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)\",\n  14: \"Intercept handlers should return nothing or a change object\",\n  15: \"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)\",\n  16: \"Modification exception: the internal structure of an observable array was changed.\",\n  17: function _(index, length) {\n    return \"[mobx.array] Index out of bounds, \" + index + \" is larger than \" + length;\n  },\n  18: \"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js\",\n  19: function _(other) {\n    return \"Cannot initialize from classes that inherit from Map: \" + other.constructor.name;\n  },\n  20: function _(other) {\n    return \"Cannot initialize map from \" + other;\n  },\n  21: function _(dataStructure) {\n    return \"Cannot convert to map from '\" + dataStructure + \"'\";\n  },\n  22: \"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js\",\n  23: \"It is not possible to get index atoms from arrays\",\n  24: function _(thing) {\n    return \"Cannot obtain administration from \" + thing;\n  },\n  25: function _(property, name) {\n    return \"the entry '\" + property + \"' does not exist in the observable map '\" + name + \"'\";\n  },\n  26: \"please specify a property\",\n  27: function _(property, name) {\n    return \"no observable property '\" + property.toString() + \"' found on the observable object '\" + name + \"'\";\n  },\n  28: function _(thing) {\n    return \"Cannot obtain atom from \" + thing;\n  },\n  29: \"Expecting some object\",\n  30: \"invalid action stack. did you forget to finish an action?\",\n  31: \"missing option for computed: get\",\n  32: function _(name, derivation) {\n    return \"Cycle detected in computation \" + name + \": \" + derivation;\n  },\n  33: function _(name) {\n    return \"The setter of computed value '\" + name + \"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\";\n  },\n  34: function _(name) {\n    return \"[ComputedValue '\" + name + \"'] It is not possible to assign a new value to a computed value.\";\n  },\n  35: \"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`\",\n  36: \"isolateGlobalState should be called before MobX is running any reactions\",\n  37: function _(method) {\n    return \"[mobx] `observableArray.\" + method + \"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice().\" + method + \"()` instead\";\n  },\n  38: \"'ownKeys()' can only be used on observable objects\",\n  39: \"'defineProperty()' can only be used on observable objects\"\n};\nvar errors = process.env.NODE_ENV !== \"production\" ? niceErrors : {};\nfunction die(error) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    var e = typeof error === \"string\" ? error : errors[error];\n    if (typeof e === \"function\") e = e.apply(null, args);\n    throw new Error(\"[MobX] \" + e);\n  }\n  throw new Error(typeof error === \"number\" ? \"[MobX] minified error nr: \" + error + (args.length ? \" \" + args.map(String).join(\",\") : \"\") + \". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts\" : \"[MobX] \" + error);\n}\n\nvar mockGlobal = {};\nfunction getGlobal() {\n  if (typeof globalThis !== \"undefined\") {\n    return globalThis;\n  }\n  if (typeof window !== \"undefined\") {\n    return window;\n  }\n  if (typeof global !== \"undefined\") {\n    return global;\n  }\n  if (typeof self !== \"undefined\") {\n    return self;\n  }\n  return mockGlobal;\n}\n\n// We shorten anything used > 5 times\nvar assign = Object.assign;\nvar getDescriptor = Object.getOwnPropertyDescriptor;\nvar defineProperty = Object.defineProperty;\nvar objectPrototype = Object.prototype;\nvar EMPTY_ARRAY = [];\nObject.freeze(EMPTY_ARRAY);\nvar EMPTY_OBJECT = {};\nObject.freeze(EMPTY_OBJECT);\nvar hasProxy = typeof Proxy !== \"undefined\";\nvar plainObjectString = /*#__PURE__*/Object.toString();\nfunction assertProxies() {\n  if (!hasProxy) {\n    die(process.env.NODE_ENV !== \"production\" ? \"`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`\" : \"Proxy not available\");\n  }\n}\nfunction warnAboutProxyRequirement(msg) {\n  if (process.env.NODE_ENV !== \"production\" && globalState.verifyProxies) {\n    die(\"MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to \" + msg);\n  }\n}\nfunction getNextId() {\n  return ++globalState.mobxGuid;\n}\n/**\r\n * Makes sure that the provided function is invoked at most once.\r\n */\nfunction once(func) {\n  var invoked = false;\n  return function () {\n    if (invoked) {\n      return;\n    }\n    invoked = true;\n    return func.apply(this, arguments);\n  };\n}\nvar noop = function noop() {};\nfunction isFunction(fn) {\n  return typeof fn === \"function\";\n}\nfunction isStringish(value) {\n  var t = typeof value;\n  switch (t) {\n    case \"string\":\n    case \"symbol\":\n    case \"number\":\n      return true;\n  }\n  return false;\n}\nfunction isObject(value) {\n  return value !== null && typeof value === \"object\";\n}\nfunction isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  var proto = Object.getPrototypeOf(value);\n  if (proto == null) {\n    return true;\n  }\n  var protoConstructor = Object.hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n  return typeof protoConstructor === \"function\" && protoConstructor.toString() === plainObjectString;\n}\n// https://stackoverflow.com/a/37865170\nfunction isGenerator(obj) {\n  var constructor = obj == null ? void 0 : obj.constructor;\n  if (!constructor) {\n    return false;\n  }\n  if (\"GeneratorFunction\" === constructor.name || \"GeneratorFunction\" === constructor.displayName) {\n    return true;\n  }\n  return false;\n}\nfunction addHiddenProp(object, propName, value) {\n  defineProperty(object, propName, {\n    enumerable: false,\n    writable: true,\n    configurable: true,\n    value: value\n  });\n}\nfunction addHiddenFinalProp(object, propName, value) {\n  defineProperty(object, propName, {\n    enumerable: false,\n    writable: false,\n    configurable: true,\n    value: value\n  });\n}\nfunction createInstanceofPredicate(name, theClass) {\n  var propName = \"isMobX\" + name;\n  theClass.prototype[propName] = true;\n  return function (x) {\n    return isObject(x) && x[propName] === true;\n  };\n}\nfunction isES6Map(thing) {\n  return thing instanceof Map;\n}\nfunction isES6Set(thing) {\n  return thing instanceof Set;\n}\nvar hasGetOwnPropertySymbols = typeof Object.getOwnPropertySymbols !== \"undefined\";\n/**\r\n * Returns the following: own enumerable keys and symbols.\r\n */\nfunction getPlainObjectKeys(object) {\n  var keys = Object.keys(object);\n  // Not supported in IE, so there are not going to be symbol props anyway...\n  if (!hasGetOwnPropertySymbols) {\n    return keys;\n  }\n  var symbols = Object.getOwnPropertySymbols(object);\n  if (!symbols.length) {\n    return keys;\n  }\n  return [].concat(keys, symbols.filter(function (s) {\n    return objectPrototype.propertyIsEnumerable.call(object, s);\n  }));\n}\n// From Immer utils\n// Returns all own keys, including non-enumerable and symbolic\nvar ownKeys = typeof Reflect !== \"undefined\" && Reflect.ownKeys ? Reflect.ownKeys : hasGetOwnPropertySymbols ? function (obj) {\n  return Object.getOwnPropertyNames(obj).concat(Object.getOwnPropertySymbols(obj));\n} : /* istanbul ignore next */Object.getOwnPropertyNames;\nfunction stringifyKey(key) {\n  if (typeof key === \"string\") {\n    return key;\n  }\n  if (typeof key === \"symbol\") {\n    return key.toString();\n  }\n  return new String(key).toString();\n}\nfunction toPrimitive(value) {\n  return value === null ? null : typeof value === \"object\" ? \"\" + value : value;\n}\nfunction hasProp(target, prop) {\n  return objectPrototype.hasOwnProperty.call(target, prop);\n}\n// From Immer utils\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors || function getOwnPropertyDescriptors(target) {\n  // Polyfill needed for Hermes and IE, see https://github.com/facebook/hermes/issues/274\n  var res = {};\n  // Note: without polyfill for ownKeys, symbols won't be picked up\n  ownKeys(target).forEach(function (key) {\n    res[key] = getDescriptor(target, key);\n  });\n  return res;\n};\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar storedAnnotationsSymbol = /*#__PURE__*/Symbol(\"mobx-stored-annotations\");\n/**\r\n * Creates a function that acts as\r\n * - decorator\r\n * - annotation object\r\n */\nfunction createDecoratorAnnotation(annotation) {\n  function decorator(target, property) {\n    storeAnnotation(target, property, annotation);\n  }\n  return Object.assign(decorator, annotation);\n}\n/**\r\n * Stores annotation to prototype,\r\n * so it can be inspected later by `makeObservable` called from constructor\r\n */\nfunction storeAnnotation(prototype, key, annotation) {\n  if (!hasProp(prototype, storedAnnotationsSymbol)) {\n    addHiddenProp(prototype, storedAnnotationsSymbol, _extends({}, prototype[storedAnnotationsSymbol]));\n  }\n  // @override must override something\n  if (process.env.NODE_ENV !== \"production\" && isOverride(annotation) && !hasProp(prototype[storedAnnotationsSymbol], key)) {\n    var fieldName = prototype.constructor.name + \".prototype.\" + key.toString();\n    die(\"'\" + fieldName + \"' is decorated with 'override', \" + \"but no such decorated member was found on prototype.\");\n  }\n  // Cannot re-decorate\n  assertNotDecorated(prototype, annotation, key);\n  // Ignore override\n  if (!isOverride(annotation)) {\n    prototype[storedAnnotationsSymbol][key] = annotation;\n  }\n}\nfunction assertNotDecorated(prototype, annotation, key) {\n  if (process.env.NODE_ENV !== \"production\" && !isOverride(annotation) && hasProp(prototype[storedAnnotationsSymbol], key)) {\n    var fieldName = prototype.constructor.name + \".prototype.\" + key.toString();\n    var currentAnnotationType = prototype[storedAnnotationsSymbol][key].annotationType_;\n    var requestedAnnotationType = annotation.annotationType_;\n    die(\"Cannot apply '@\" + requestedAnnotationType + \"' to '\" + fieldName + \"':\" + (\"\\nThe field is already decorated with '@\" + currentAnnotationType + \"'.\") + \"\\nRe-decorating fields is not allowed.\" + \"\\nUse '@override' decorator for methods overridden by subclass.\");\n  }\n}\n/**\r\n * Collects annotations from prototypes and stores them on target (instance)\r\n */\nfunction collectStoredAnnotations(target) {\n  if (!hasProp(target, storedAnnotationsSymbol)) {\n    if (process.env.NODE_ENV !== \"production\" && !target[storedAnnotationsSymbol]) {\n      die(\"No annotations were passed to makeObservable, but no decorated members have been found either\");\n    }\n    // We need a copy as we will remove annotation from the list once it's applied.\n    addHiddenProp(target, storedAnnotationsSymbol, _extends({}, target[storedAnnotationsSymbol]));\n  }\n  return target[storedAnnotationsSymbol];\n}\n\nvar $mobx = /*#__PURE__*/Symbol(\"mobx administration\");\nvar Atom = /*#__PURE__*/function () {\n  // for effective unobserving. BaseAtom has true, for extra optimization, so its onBecomeUnobserved never gets called, because it's not needed\n\n  /**\r\n   * Create a new atom. For debugging purposes it is recommended to give it a name.\r\n   * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\r\n   */\n  function Atom(name_) {\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"Atom@\" + getNextId() : \"Atom\";\n    }\n    this.name_ = void 0;\n    this.isPendingUnobservation_ = false;\n    this.isBeingObserved_ = false;\n    this.observers_ = new Set();\n    this.diffValue_ = 0;\n    this.lastAccessedBy_ = 0;\n    this.lowestObserverState_ = IDerivationState_.NOT_TRACKING_;\n    this.onBOL = void 0;\n    this.onBUOL = void 0;\n    this.name_ = name_;\n  }\n  // onBecomeObservedListeners\n  var _proto = Atom.prototype;\n  _proto.onBO = function onBO() {\n    if (this.onBOL) {\n      this.onBOL.forEach(function (listener) {\n        return listener();\n      });\n    }\n  };\n  _proto.onBUO = function onBUO() {\n    if (this.onBUOL) {\n      this.onBUOL.forEach(function (listener) {\n        return listener();\n      });\n    }\n  }\n  /**\r\n   * Invoke this method to notify mobx that your atom has been used somehow.\r\n   * Returns true if there is currently a reactive context.\r\n   */;\n  _proto.reportObserved = function reportObserved$1() {\n    return reportObserved(this);\n  }\n  /**\r\n   * Invoke this method _after_ this method has changed to signal mobx that all its observers should invalidate.\r\n   */;\n  _proto.reportChanged = function reportChanged() {\n    startBatch();\n    propagateChanged(this);\n    endBatch();\n  };\n  _proto.toString = function toString() {\n    return this.name_;\n  };\n  return Atom;\n}();\nvar isAtom = /*#__PURE__*/createInstanceofPredicate(\"Atom\", Atom);\nfunction createAtom(name, onBecomeObservedHandler, onBecomeUnobservedHandler) {\n  if (onBecomeObservedHandler === void 0) {\n    onBecomeObservedHandler = noop;\n  }\n  if (onBecomeUnobservedHandler === void 0) {\n    onBecomeUnobservedHandler = noop;\n  }\n  var atom = new Atom(name);\n  // default `noop` listener will not initialize the hook Set\n  if (onBecomeObservedHandler !== noop) {\n    onBecomeObserved(atom, onBecomeObservedHandler);\n  }\n  if (onBecomeUnobservedHandler !== noop) {\n    onBecomeUnobserved(atom, onBecomeUnobservedHandler);\n  }\n  return atom;\n}\n\nfunction identityComparer(a, b) {\n  return a === b;\n}\nfunction structuralComparer(a, b) {\n  return deepEqual(a, b);\n}\nfunction shallowComparer(a, b) {\n  return deepEqual(a, b, 1);\n}\nfunction defaultComparer(a, b) {\n  if (Object.is) {\n    return Object.is(a, b);\n  }\n  return a === b ? a !== 0 || 1 / a === 1 / b : a !== a && b !== b;\n}\nvar comparer = {\n  identity: identityComparer,\n  structural: structuralComparer,\n  \"default\": defaultComparer,\n  shallow: shallowComparer\n};\n\nfunction deepEnhancer(v, _, name) {\n  // it is an observable already, done\n  if (isObservable(v)) {\n    return v;\n  }\n  // something that can be converted and mutated?\n  if (Array.isArray(v)) {\n    return observable.array(v, {\n      name: name\n    });\n  }\n  if (isPlainObject(v)) {\n    return observable.object(v, undefined, {\n      name: name\n    });\n  }\n  if (isES6Map(v)) {\n    return observable.map(v, {\n      name: name\n    });\n  }\n  if (isES6Set(v)) {\n    return observable.set(v, {\n      name: name\n    });\n  }\n  if (typeof v === \"function\" && !isAction(v) && !isFlow(v)) {\n    if (isGenerator(v)) {\n      return flow(v);\n    } else {\n      return autoAction(name, v);\n    }\n  }\n  return v;\n}\nfunction shallowEnhancer(v, _, name) {\n  if (v === undefined || v === null) {\n    return v;\n  }\n  if (isObservableObject(v) || isObservableArray(v) || isObservableMap(v) || isObservableSet(v)) {\n    return v;\n  }\n  if (Array.isArray(v)) {\n    return observable.array(v, {\n      name: name,\n      deep: false\n    });\n  }\n  if (isPlainObject(v)) {\n    return observable.object(v, undefined, {\n      name: name,\n      deep: false\n    });\n  }\n  if (isES6Map(v)) {\n    return observable.map(v, {\n      name: name,\n      deep: false\n    });\n  }\n  if (isES6Set(v)) {\n    return observable.set(v, {\n      name: name,\n      deep: false\n    });\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    die(\"The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets\");\n  }\n}\nfunction referenceEnhancer(newValue) {\n  // never turn into an observable\n  return newValue;\n}\nfunction refStructEnhancer(v, oldValue) {\n  if (process.env.NODE_ENV !== \"production\" && isObservable(v)) {\n    die(\"observable.struct should not be used with observable values\");\n  }\n  if (deepEqual(v, oldValue)) {\n    return oldValue;\n  }\n  return v;\n}\n\nvar OVERRIDE = \"override\";\nvar override = /*#__PURE__*/createDecoratorAnnotation({\n  annotationType_: OVERRIDE,\n  make_: make_,\n  extend_: extend_\n});\nfunction isOverride(annotation) {\n  return annotation.annotationType_ === OVERRIDE;\n}\nfunction make_(adm, key) {\n  // Must not be plain object\n  if (process.env.NODE_ENV !== \"production\" && adm.isPlainObject_) {\n    die(\"Cannot apply '\" + this.annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + this.annotationType_ + \"' cannot be used on plain objects.\"));\n  }\n  // Must override something\n  if (process.env.NODE_ENV !== \"production\" && !hasProp(adm.appliedAnnotations_, key)) {\n    die(\"'\" + adm.name_ + \".\" + key.toString() + \"' is annotated with '\" + this.annotationType_ + \"', \" + \"but no such annotated member was found on prototype.\");\n  }\n  return 0 /* Cancel */;\n}\n\nfunction extend_(adm, key, descriptor, proxyTrap) {\n  die(\"'\" + this.annotationType_ + \"' can only be used with 'makeObservable'\");\n}\n\nfunction createActionAnnotation(name, options) {\n  return {\n    annotationType_: name,\n    options_: options,\n    make_: make_$1,\n    extend_: extend_$1\n  };\n}\nfunction make_$1(adm, key, descriptor, source) {\n  var _this$options_;\n  // bound\n  if ((_this$options_ = this.options_) != null && _this$options_.bound) {\n    return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 1 /* Break */;\n  }\n  // own\n  if (source === adm.target_) {\n    return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 2 /* Continue */;\n  }\n  // prototype\n  if (isAction(descriptor.value)) {\n    // A prototype could have been annotated already by other constructor,\n    // rest of the proto chain must be annotated already\n    return 1 /* Break */;\n  }\n\n  var actionDescriptor = createActionDescriptor(adm, this, key, descriptor, false);\n  defineProperty(source, key, actionDescriptor);\n  return 2 /* Continue */;\n}\n\nfunction extend_$1(adm, key, descriptor, proxyTrap) {\n  var actionDescriptor = createActionDescriptor(adm, this, key, descriptor);\n  return adm.defineProperty_(key, actionDescriptor, proxyTrap);\n}\nfunction assertActionDescriptor(adm, _ref, key, _ref2) {\n  var annotationType_ = _ref.annotationType_;\n  var value = _ref2.value;\n  if (process.env.NODE_ENV !== \"production\" && !isFunction(value)) {\n    die(\"Cannot apply '\" + annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + annotationType_ + \"' can only be used on properties with a function value.\"));\n  }\n}\nfunction createActionDescriptor(adm, annotation, key, descriptor,\n// provides ability to disable safeDescriptors for prototypes\nsafeDescriptors) {\n  var _annotation$options_, _annotation$options_$, _annotation$options_2, _annotation$options_$2, _annotation$options_3, _annotation$options_4, _adm$proxy_2;\n  if (safeDescriptors === void 0) {\n    safeDescriptors = globalState.safeDescriptors;\n  }\n  assertActionDescriptor(adm, annotation, key, descriptor);\n  var value = descriptor.value;\n  if ((_annotation$options_ = annotation.options_) != null && _annotation$options_.bound) {\n    var _adm$proxy_;\n    value = value.bind((_adm$proxy_ = adm.proxy_) != null ? _adm$proxy_ : adm.target_);\n  }\n  return {\n    value: createAction((_annotation$options_$ = (_annotation$options_2 = annotation.options_) == null ? void 0 : _annotation$options_2.name) != null ? _annotation$options_$ : key.toString(), value, (_annotation$options_$2 = (_annotation$options_3 = annotation.options_) == null ? void 0 : _annotation$options_3.autoAction) != null ? _annotation$options_$2 : false,\n    // https://github.com/mobxjs/mobx/discussions/3140\n    (_annotation$options_4 = annotation.options_) != null && _annotation$options_4.bound ? (_adm$proxy_2 = adm.proxy_) != null ? _adm$proxy_2 : adm.target_ : undefined),\n    // Non-configurable for classes\n    // prevents accidental field redefinition in subclass\n    configurable: safeDescriptors ? adm.isPlainObject_ : true,\n    // https://github.com/mobxjs/mobx/pull/2641#issuecomment-737292058\n    enumerable: false,\n    // Non-obsevable, therefore non-writable\n    // Also prevents rewriting in subclass constructor\n    writable: safeDescriptors ? false : true\n  };\n}\n\nfunction createFlowAnnotation(name, options) {\n  return {\n    annotationType_: name,\n    options_: options,\n    make_: make_$2,\n    extend_: extend_$2\n  };\n}\nfunction make_$2(adm, key, descriptor, source) {\n  var _this$options_;\n  // own\n  if (source === adm.target_) {\n    return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 2 /* Continue */;\n  }\n  // prototype\n  // bound - must annotate protos to support super.flow()\n  if ((_this$options_ = this.options_) != null && _this$options_.bound && (!hasProp(adm.target_, key) || !isFlow(adm.target_[key]))) {\n    if (this.extend_(adm, key, descriptor, false) === null) {\n      return 0 /* Cancel */;\n    }\n  }\n\n  if (isFlow(descriptor.value)) {\n    // A prototype could have been annotated already by other constructor,\n    // rest of the proto chain must be annotated already\n    return 1 /* Break */;\n  }\n\n  var flowDescriptor = createFlowDescriptor(adm, this, key, descriptor, false, false);\n  defineProperty(source, key, flowDescriptor);\n  return 2 /* Continue */;\n}\n\nfunction extend_$2(adm, key, descriptor, proxyTrap) {\n  var _this$options_2;\n  var flowDescriptor = createFlowDescriptor(adm, this, key, descriptor, (_this$options_2 = this.options_) == null ? void 0 : _this$options_2.bound);\n  return adm.defineProperty_(key, flowDescriptor, proxyTrap);\n}\nfunction assertFlowDescriptor(adm, _ref, key, _ref2) {\n  var annotationType_ = _ref.annotationType_;\n  var value = _ref2.value;\n  if (process.env.NODE_ENV !== \"production\" && !isFunction(value)) {\n    die(\"Cannot apply '\" + annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + annotationType_ + \"' can only be used on properties with a generator function value.\"));\n  }\n}\nfunction createFlowDescriptor(adm, annotation, key, descriptor, bound,\n// provides ability to disable safeDescriptors for prototypes\nsafeDescriptors) {\n  if (safeDescriptors === void 0) {\n    safeDescriptors = globalState.safeDescriptors;\n  }\n  assertFlowDescriptor(adm, annotation, key, descriptor);\n  var value = descriptor.value;\n  // In case of flow.bound, the descriptor can be from already annotated prototype\n  if (!isFlow(value)) {\n    value = flow(value);\n  }\n  if (bound) {\n    var _adm$proxy_;\n    // We do not keep original function around, so we bind the existing flow\n    value = value.bind((_adm$proxy_ = adm.proxy_) != null ? _adm$proxy_ : adm.target_);\n    // This is normally set by `flow`, but `bind` returns new function...\n    value.isMobXFlow = true;\n  }\n  return {\n    value: value,\n    // Non-configurable for classes\n    // prevents accidental field redefinition in subclass\n    configurable: safeDescriptors ? adm.isPlainObject_ : true,\n    // https://github.com/mobxjs/mobx/pull/2641#issuecomment-737292058\n    enumerable: false,\n    // Non-obsevable, therefore non-writable\n    // Also prevents rewriting in subclass constructor\n    writable: safeDescriptors ? false : true\n  };\n}\n\nfunction createComputedAnnotation(name, options) {\n  return {\n    annotationType_: name,\n    options_: options,\n    make_: make_$3,\n    extend_: extend_$3\n  };\n}\nfunction make_$3(adm, key, descriptor) {\n  return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 1 /* Break */;\n}\n\nfunction extend_$3(adm, key, descriptor, proxyTrap) {\n  assertComputedDescriptor(adm, this, key, descriptor);\n  return adm.defineComputedProperty_(key, _extends({}, this.options_, {\n    get: descriptor.get,\n    set: descriptor.set\n  }), proxyTrap);\n}\nfunction assertComputedDescriptor(adm, _ref, key, _ref2) {\n  var annotationType_ = _ref.annotationType_;\n  var get = _ref2.get;\n  if (process.env.NODE_ENV !== \"production\" && !get) {\n    die(\"Cannot apply '\" + annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + annotationType_ + \"' can only be used on getter(+setter) properties.\"));\n  }\n}\n\nfunction createObservableAnnotation(name, options) {\n  return {\n    annotationType_: name,\n    options_: options,\n    make_: make_$4,\n    extend_: extend_$4\n  };\n}\nfunction make_$4(adm, key, descriptor) {\n  return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 1 /* Break */;\n}\n\nfunction extend_$4(adm, key, descriptor, proxyTrap) {\n  var _this$options_$enhanc, _this$options_;\n  assertObservableDescriptor(adm, this, key, descriptor);\n  return adm.defineObservableProperty_(key, descriptor.value, (_this$options_$enhanc = (_this$options_ = this.options_) == null ? void 0 : _this$options_.enhancer) != null ? _this$options_$enhanc : deepEnhancer, proxyTrap);\n}\nfunction assertObservableDescriptor(adm, _ref, key, descriptor) {\n  var annotationType_ = _ref.annotationType_;\n  if (process.env.NODE_ENV !== \"production\" && !(\"value\" in descriptor)) {\n    die(\"Cannot apply '\" + annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + annotationType_ + \"' cannot be used on getter/setter properties\"));\n  }\n}\n\nvar AUTO = \"true\";\nvar autoAnnotation = /*#__PURE__*/createAutoAnnotation();\nfunction createAutoAnnotation(options) {\n  return {\n    annotationType_: AUTO,\n    options_: options,\n    make_: make_$5,\n    extend_: extend_$5\n  };\n}\nfunction make_$5(adm, key, descriptor, source) {\n  var _this$options_3, _this$options_4;\n  // getter -> computed\n  if (descriptor.get) {\n    return computed.make_(adm, key, descriptor, source);\n  }\n  // lone setter -> action setter\n  if (descriptor.set) {\n    // TODO make action applicable to setter and delegate to action.make_\n    var set = createAction(key.toString(), descriptor.set);\n    // own\n    if (source === adm.target_) {\n      return adm.defineProperty_(key, {\n        configurable: globalState.safeDescriptors ? adm.isPlainObject_ : true,\n        set: set\n      }) === null ? 0 /* Cancel */ : 2 /* Continue */;\n    }\n    // proto\n    defineProperty(source, key, {\n      configurable: true,\n      set: set\n    });\n    return 2 /* Continue */;\n  }\n  // function on proto -> autoAction/flow\n  if (source !== adm.target_ && typeof descriptor.value === \"function\") {\n    var _this$options_2;\n    if (isGenerator(descriptor.value)) {\n      var _this$options_;\n      var flowAnnotation = (_this$options_ = this.options_) != null && _this$options_.autoBind ? flow.bound : flow;\n      return flowAnnotation.make_(adm, key, descriptor, source);\n    }\n    var actionAnnotation = (_this$options_2 = this.options_) != null && _this$options_2.autoBind ? autoAction.bound : autoAction;\n    return actionAnnotation.make_(adm, key, descriptor, source);\n  }\n  // other -> observable\n  // Copy props from proto as well, see test:\n  // \"decorate should work with Object.create\"\n  var observableAnnotation = ((_this$options_3 = this.options_) == null ? void 0 : _this$options_3.deep) === false ? observable.ref : observable;\n  // if function respect autoBind option\n  if (typeof descriptor.value === \"function\" && (_this$options_4 = this.options_) != null && _this$options_4.autoBind) {\n    var _adm$proxy_;\n    descriptor.value = descriptor.value.bind((_adm$proxy_ = adm.proxy_) != null ? _adm$proxy_ : adm.target_);\n  }\n  return observableAnnotation.make_(adm, key, descriptor, source);\n}\nfunction extend_$5(adm, key, descriptor, proxyTrap) {\n  var _this$options_5, _this$options_6;\n  // getter -> computed\n  if (descriptor.get) {\n    return computed.extend_(adm, key, descriptor, proxyTrap);\n  }\n  // lone setter -> action setter\n  if (descriptor.set) {\n    // TODO make action applicable to setter and delegate to action.extend_\n    return adm.defineProperty_(key, {\n      configurable: globalState.safeDescriptors ? adm.isPlainObject_ : true,\n      set: createAction(key.toString(), descriptor.set)\n    }, proxyTrap);\n  }\n  // other -> observable\n  // if function respect autoBind option\n  if (typeof descriptor.value === \"function\" && (_this$options_5 = this.options_) != null && _this$options_5.autoBind) {\n    var _adm$proxy_2;\n    descriptor.value = descriptor.value.bind((_adm$proxy_2 = adm.proxy_) != null ? _adm$proxy_2 : adm.target_);\n  }\n  var observableAnnotation = ((_this$options_6 = this.options_) == null ? void 0 : _this$options_6.deep) === false ? observable.ref : observable;\n  return observableAnnotation.extend_(adm, key, descriptor, proxyTrap);\n}\n\nvar OBSERVABLE = \"observable\";\nvar OBSERVABLE_REF = \"observable.ref\";\nvar OBSERVABLE_SHALLOW = \"observable.shallow\";\nvar OBSERVABLE_STRUCT = \"observable.struct\";\n// Predefined bags of create observable options, to avoid allocating temporarily option objects\n// in the majority of cases\nvar defaultCreateObservableOptions = {\n  deep: true,\n  name: undefined,\n  defaultDecorator: undefined,\n  proxy: true\n};\nObject.freeze(defaultCreateObservableOptions);\nfunction asCreateObservableOptions(thing) {\n  return thing || defaultCreateObservableOptions;\n}\nvar observableAnnotation = /*#__PURE__*/createObservableAnnotation(OBSERVABLE);\nvar observableRefAnnotation = /*#__PURE__*/createObservableAnnotation(OBSERVABLE_REF, {\n  enhancer: referenceEnhancer\n});\nvar observableShallowAnnotation = /*#__PURE__*/createObservableAnnotation(OBSERVABLE_SHALLOW, {\n  enhancer: shallowEnhancer\n});\nvar observableStructAnnotation = /*#__PURE__*/createObservableAnnotation(OBSERVABLE_STRUCT, {\n  enhancer: refStructEnhancer\n});\nvar observableDecoratorAnnotation = /*#__PURE__*/createDecoratorAnnotation(observableAnnotation);\nfunction getEnhancerFromOptions(options) {\n  return options.deep === true ? deepEnhancer : options.deep === false ? referenceEnhancer : getEnhancerFromAnnotation(options.defaultDecorator);\n}\nfunction getAnnotationFromOptions(options) {\n  var _options$defaultDecor;\n  return options ? (_options$defaultDecor = options.defaultDecorator) != null ? _options$defaultDecor : createAutoAnnotation(options) : undefined;\n}\nfunction getEnhancerFromAnnotation(annotation) {\n  var _annotation$options_$, _annotation$options_;\n  return !annotation ? deepEnhancer : (_annotation$options_$ = (_annotation$options_ = annotation.options_) == null ? void 0 : _annotation$options_.enhancer) != null ? _annotation$options_$ : deepEnhancer;\n}\n/**\r\n * Turns an object, array or function into a reactive structure.\r\n * @param v the value which should become observable.\r\n */\nfunction createObservable(v, arg2, arg3) {\n  // @observable someProp;\n  if (isStringish(arg2)) {\n    storeAnnotation(v, arg2, observableAnnotation);\n    return;\n  }\n  // already observable - ignore\n  if (isObservable(v)) {\n    return v;\n  }\n  // plain object\n  if (isPlainObject(v)) {\n    return observable.object(v, arg2, arg3);\n  }\n  // Array\n  if (Array.isArray(v)) {\n    return observable.array(v, arg2);\n  }\n  // Map\n  if (isES6Map(v)) {\n    return observable.map(v, arg2);\n  }\n  // Set\n  if (isES6Set(v)) {\n    return observable.set(v, arg2);\n  }\n  // other object - ignore\n  if (typeof v === \"object\" && v !== null) {\n    return v;\n  }\n  // anything else\n  return observable.box(v, arg2);\n}\nassign(createObservable, observableDecoratorAnnotation);\nvar observableFactories = {\n  box: function box(value, options) {\n    var o = asCreateObservableOptions(options);\n    return new ObservableValue(value, getEnhancerFromOptions(o), o.name, true, o.equals);\n  },\n  array: function array(initialValues, options) {\n    var o = asCreateObservableOptions(options);\n    return (globalState.useProxies === false || o.proxy === false ? createLegacyArray : createObservableArray)(initialValues, getEnhancerFromOptions(o), o.name);\n  },\n  map: function map(initialValues, options) {\n    var o = asCreateObservableOptions(options);\n    return new ObservableMap(initialValues, getEnhancerFromOptions(o), o.name);\n  },\n  set: function set(initialValues, options) {\n    var o = asCreateObservableOptions(options);\n    return new ObservableSet(initialValues, getEnhancerFromOptions(o), o.name);\n  },\n  object: function object(props, decorators, options) {\n    return extendObservable(globalState.useProxies === false || (options == null ? void 0 : options.proxy) === false ? asObservableObject({}, options) : asDynamicObservableObject({}, options), props, decorators);\n  },\n  ref: /*#__PURE__*/createDecoratorAnnotation(observableRefAnnotation),\n  shallow: /*#__PURE__*/createDecoratorAnnotation(observableShallowAnnotation),\n  deep: observableDecoratorAnnotation,\n  struct: /*#__PURE__*/createDecoratorAnnotation(observableStructAnnotation)\n};\n// eslint-disable-next-line\nvar observable = /*#__PURE__*/assign(createObservable, observableFactories);\n\nvar COMPUTED = \"computed\";\nvar COMPUTED_STRUCT = \"computed.struct\";\nvar computedAnnotation = /*#__PURE__*/createComputedAnnotation(COMPUTED);\nvar computedStructAnnotation = /*#__PURE__*/createComputedAnnotation(COMPUTED_STRUCT, {\n  equals: comparer.structural\n});\n/**\r\n * Decorator for class properties: @computed get value() { return expr; }.\r\n * For legacy purposes also invokable as ES5 observable created: `computed(() => expr)`;\r\n */\nvar computed = function computed(arg1, arg2) {\n  if (isStringish(arg2)) {\n    // @computed\n    return storeAnnotation(arg1, arg2, computedAnnotation);\n  }\n  if (isPlainObject(arg1)) {\n    // @computed({ options })\n    return createDecoratorAnnotation(createComputedAnnotation(COMPUTED, arg1));\n  }\n  // computed(expr, options?)\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isFunction(arg1)) {\n      die(\"First argument to `computed` should be an expression.\");\n    }\n    if (isFunction(arg2)) {\n      die(\"A setter as second argument is no longer supported, use `{ set: fn }` option instead\");\n    }\n  }\n  var opts = isPlainObject(arg2) ? arg2 : {};\n  opts.get = arg1;\n  opts.name || (opts.name = arg1.name || \"\"); /* for generated name */\n  return new ComputedValue(opts);\n};\nObject.assign(computed, computedAnnotation);\ncomputed.struct = /*#__PURE__*/createDecoratorAnnotation(computedStructAnnotation);\n\nvar _getDescriptor$config, _getDescriptor;\n// we don't use globalState for these in order to avoid possible issues with multiple\n// mobx versions\nvar currentActionId = 0;\nvar nextActionId = 1;\nvar isFunctionNameConfigurable = (_getDescriptor$config = (_getDescriptor = /*#__PURE__*/getDescriptor(function () {}, \"name\")) == null ? void 0 : _getDescriptor.configurable) != null ? _getDescriptor$config : false;\n// we can safely recycle this object\nvar tmpNameDescriptor = {\n  value: \"action\",\n  configurable: true,\n  writable: false,\n  enumerable: false\n};\nfunction createAction(actionName, fn, autoAction, ref) {\n  if (autoAction === void 0) {\n    autoAction = false;\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isFunction(fn)) {\n      die(\"`action` can only be invoked on functions\");\n    }\n    if (typeof actionName !== \"string\" || !actionName) {\n      die(\"actions should have valid names, got: '\" + actionName + \"'\");\n    }\n  }\n  function res() {\n    return executeAction(actionName, autoAction, fn, ref || this, arguments);\n  }\n  res.isMobxAction = true;\n  if (isFunctionNameConfigurable) {\n    tmpNameDescriptor.value = actionName;\n    defineProperty(res, \"name\", tmpNameDescriptor);\n  }\n  return res;\n}\nfunction executeAction(actionName, canRunAsDerivation, fn, scope, args) {\n  var runInfo = _startAction(actionName, canRunAsDerivation, scope, args);\n  try {\n    return fn.apply(scope, args);\n  } catch (err) {\n    runInfo.error_ = err;\n    throw err;\n  } finally {\n    _endAction(runInfo);\n  }\n}\nfunction _startAction(actionName, canRunAsDerivation,\n// true for autoAction\nscope, args) {\n  var notifySpy_ = process.env.NODE_ENV !== \"production\" && isSpyEnabled() && !!actionName;\n  var startTime_ = 0;\n  if (process.env.NODE_ENV !== \"production\" && notifySpy_) {\n    startTime_ = Date.now();\n    var flattenedArgs = args ? Array.from(args) : EMPTY_ARRAY;\n    spyReportStart({\n      type: ACTION,\n      name: actionName,\n      object: scope,\n      arguments: flattenedArgs\n    });\n  }\n  var prevDerivation_ = globalState.trackingDerivation;\n  var runAsAction = !canRunAsDerivation || !prevDerivation_;\n  startBatch();\n  var prevAllowStateChanges_ = globalState.allowStateChanges; // by default preserve previous allow\n  if (runAsAction) {\n    untrackedStart();\n    prevAllowStateChanges_ = allowStateChangesStart(true);\n  }\n  var prevAllowStateReads_ = allowStateReadsStart(true);\n  var runInfo = {\n    runAsAction_: runAsAction,\n    prevDerivation_: prevDerivation_,\n    prevAllowStateChanges_: prevAllowStateChanges_,\n    prevAllowStateReads_: prevAllowStateReads_,\n    notifySpy_: notifySpy_,\n    startTime_: startTime_,\n    actionId_: nextActionId++,\n    parentActionId_: currentActionId\n  };\n  currentActionId = runInfo.actionId_;\n  return runInfo;\n}\nfunction _endAction(runInfo) {\n  if (currentActionId !== runInfo.actionId_) {\n    die(30);\n  }\n  currentActionId = runInfo.parentActionId_;\n  if (runInfo.error_ !== undefined) {\n    globalState.suppressReactionErrors = true;\n  }\n  allowStateChangesEnd(runInfo.prevAllowStateChanges_);\n  allowStateReadsEnd(runInfo.prevAllowStateReads_);\n  endBatch();\n  if (runInfo.runAsAction_) {\n    untrackedEnd(runInfo.prevDerivation_);\n  }\n  if (process.env.NODE_ENV !== \"production\" && runInfo.notifySpy_) {\n    spyReportEnd({\n      time: Date.now() - runInfo.startTime_\n    });\n  }\n  globalState.suppressReactionErrors = false;\n}\nfunction allowStateChanges(allowStateChanges, func) {\n  var prev = allowStateChangesStart(allowStateChanges);\n  try {\n    return func();\n  } finally {\n    allowStateChangesEnd(prev);\n  }\n}\nfunction allowStateChangesStart(allowStateChanges) {\n  var prev = globalState.allowStateChanges;\n  globalState.allowStateChanges = allowStateChanges;\n  return prev;\n}\nfunction allowStateChangesEnd(prev) {\n  globalState.allowStateChanges = prev;\n}\n\nvar _Symbol$toPrimitive;\nvar CREATE = \"create\";\n_Symbol$toPrimitive = Symbol.toPrimitive;\nvar ObservableValue = /*#__PURE__*/function (_Atom) {\n  _inheritsLoose(ObservableValue, _Atom);\n  function ObservableValue(value, enhancer, name_, notifySpy, equals) {\n    var _this;\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"ObservableValue@\" + getNextId() : \"ObservableValue\";\n    }\n    if (notifySpy === void 0) {\n      notifySpy = true;\n    }\n    if (equals === void 0) {\n      equals = comparer[\"default\"];\n    }\n    _this = _Atom.call(this, name_) || this;\n    _this.enhancer = void 0;\n    _this.name_ = void 0;\n    _this.equals = void 0;\n    _this.hasUnreportedChange_ = false;\n    _this.interceptors_ = void 0;\n    _this.changeListeners_ = void 0;\n    _this.value_ = void 0;\n    _this.dehancer = void 0;\n    _this.enhancer = enhancer;\n    _this.name_ = name_;\n    _this.equals = equals;\n    _this.value_ = enhancer(value, undefined, name_);\n    if (process.env.NODE_ENV !== \"production\" && notifySpy && isSpyEnabled()) {\n      // only notify spy if this is a stand-alone observable\n      spyReport({\n        type: CREATE,\n        object: _assertThisInitialized(_this),\n        observableKind: \"value\",\n        debugObjectName: _this.name_,\n        newValue: \"\" + _this.value_\n      });\n    }\n    return _this;\n  }\n  var _proto = ObservableValue.prototype;\n  _proto.dehanceValue = function dehanceValue(value) {\n    if (this.dehancer !== undefined) {\n      return this.dehancer(value);\n    }\n    return value;\n  };\n  _proto.set = function set(newValue) {\n    var oldValue = this.value_;\n    newValue = this.prepareNewValue_(newValue);\n    if (newValue !== globalState.UNCHANGED) {\n      var notifySpy = isSpyEnabled();\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart({\n          type: UPDATE,\n          object: this,\n          observableKind: \"value\",\n          debugObjectName: this.name_,\n          newValue: newValue,\n          oldValue: oldValue\n        });\n      }\n      this.setNewValue_(newValue);\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n    }\n  };\n  _proto.prepareNewValue_ = function prepareNewValue_(newValue) {\n    checkIfStateModificationsAreAllowed(this);\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        object: this,\n        type: UPDATE,\n        newValue: newValue\n      });\n      if (!change) {\n        return globalState.UNCHANGED;\n      }\n      newValue = change.newValue;\n    }\n    // apply modifier\n    newValue = this.enhancer(newValue, this.value_, this.name_);\n    return this.equals(this.value_, newValue) ? globalState.UNCHANGED : newValue;\n  };\n  _proto.setNewValue_ = function setNewValue_(newValue) {\n    var oldValue = this.value_;\n    this.value_ = newValue;\n    this.reportChanged();\n    if (hasListeners(this)) {\n      notifyListeners(this, {\n        type: UPDATE,\n        object: this,\n        newValue: newValue,\n        oldValue: oldValue\n      });\n    }\n  };\n  _proto.get = function get() {\n    this.reportObserved();\n    return this.dehanceValue(this.value_);\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    if (fireImmediately) {\n      listener({\n        observableKind: \"value\",\n        debugObjectName: this.name_,\n        object: this,\n        type: UPDATE,\n        newValue: this.value_,\n        oldValue: undefined\n      });\n    }\n    return registerListener(this, listener);\n  };\n  _proto.raw = function raw() {\n    // used by MST ot get undehanced value\n    return this.value_;\n  };\n  _proto.toJSON = function toJSON() {\n    return this.get();\n  };\n  _proto.toString = function toString() {\n    return this.name_ + \"[\" + this.value_ + \"]\";\n  };\n  _proto.valueOf = function valueOf() {\n    return toPrimitive(this.get());\n  };\n  _proto[_Symbol$toPrimitive] = function () {\n    return this.valueOf();\n  };\n  return ObservableValue;\n}(Atom);\nvar isObservableValue = /*#__PURE__*/createInstanceofPredicate(\"ObservableValue\", ObservableValue);\n\nvar _Symbol$toPrimitive$1;\n/**\r\n * A node in the state dependency root that observes other nodes, and can be observed itself.\r\n *\r\n * ComputedValue will remember the result of the computation for the duration of the batch, or\r\n * while being observed.\r\n *\r\n * During this time it will recompute only when one of its direct dependencies changed,\r\n * but only when it is being accessed with `ComputedValue.get()`.\r\n *\r\n * Implementation description:\r\n * 1. First time it's being accessed it will compute and remember result\r\n *    give back remembered result until 2. happens\r\n * 2. First time any deep dependency change, propagate POSSIBLY_STALE to all observers, wait for 3.\r\n * 3. When it's being accessed, recompute if any shallow dependency changed.\r\n *    if result changed: propagate STALE to all observers, that were POSSIBLY_STALE from the last step.\r\n *    go to step 2. either way\r\n *\r\n * If at any point it's outside batch and it isn't observed: reset everything and go to 1.\r\n */\n_Symbol$toPrimitive$1 = Symbol.toPrimitive;\nvar ComputedValue = /*#__PURE__*/function () {\n  // nodes we are looking at. Our value depends on these nodes\n  // during tracking it's an array with new observed observers\n\n  // to check for cycles\n\n  // N.B: unminified as it is used by MST\n\n  /**\r\n   * Create a new computed value based on a function expression.\r\n   *\r\n   * The `name` property is for debug purposes only.\r\n   *\r\n   * The `equals` property specifies the comparer function to use to determine if a newly produced\r\n   * value differs from the previous value. Two comparers are provided in the library; `defaultComparer`\r\n   * compares based on identity comparison (===), and `structuralComparer` deeply compares the structure.\r\n   * Structural comparison can be convenient if you always produce a new aggregated object and\r\n   * don't want to notify observers if it is structurally the same.\r\n   * This is useful for working with vectors, mouse coordinates etc.\r\n   */\n  function ComputedValue(options) {\n    this.dependenciesState_ = IDerivationState_.NOT_TRACKING_;\n    this.observing_ = [];\n    this.newObserving_ = null;\n    this.isBeingObserved_ = false;\n    this.isPendingUnobservation_ = false;\n    this.observers_ = new Set();\n    this.diffValue_ = 0;\n    this.runId_ = 0;\n    this.lastAccessedBy_ = 0;\n    this.lowestObserverState_ = IDerivationState_.UP_TO_DATE_;\n    this.unboundDepsCount_ = 0;\n    this.value_ = new CaughtException(null);\n    this.name_ = void 0;\n    this.triggeredBy_ = void 0;\n    this.isComputing_ = false;\n    this.isRunningSetter_ = false;\n    this.derivation = void 0;\n    this.setter_ = void 0;\n    this.isTracing_ = TraceMode.NONE;\n    this.scope_ = void 0;\n    this.equals_ = void 0;\n    this.requiresReaction_ = void 0;\n    this.keepAlive_ = void 0;\n    this.onBOL = void 0;\n    this.onBUOL = void 0;\n    if (!options.get) {\n      die(31);\n    }\n    this.derivation = options.get;\n    this.name_ = options.name || (process.env.NODE_ENV !== \"production\" ? \"ComputedValue@\" + getNextId() : \"ComputedValue\");\n    if (options.set) {\n      this.setter_ = createAction(process.env.NODE_ENV !== \"production\" ? this.name_ + \"-setter\" : \"ComputedValue-setter\", options.set);\n    }\n    this.equals_ = options.equals || (options.compareStructural || options.struct ? comparer.structural : comparer[\"default\"]);\n    this.scope_ = options.context;\n    this.requiresReaction_ = options.requiresReaction;\n    this.keepAlive_ = !!options.keepAlive;\n  }\n  var _proto = ComputedValue.prototype;\n  _proto.onBecomeStale_ = function onBecomeStale_() {\n    propagateMaybeChanged(this);\n  };\n  _proto.onBO = function onBO() {\n    if (this.onBOL) {\n      this.onBOL.forEach(function (listener) {\n        return listener();\n      });\n    }\n  };\n  _proto.onBUO = function onBUO() {\n    if (this.onBUOL) {\n      this.onBUOL.forEach(function (listener) {\n        return listener();\n      });\n    }\n  }\n  /**\r\n   * Returns the current value of this computed value.\r\n   * Will evaluate its computation first if needed.\r\n   */;\n  _proto.get = function get() {\n    if (this.isComputing_) {\n      die(32, this.name_, this.derivation);\n    }\n    if (globalState.inBatch === 0 &&\n    // !globalState.trackingDerivatpion &&\n    this.observers_.size === 0 && !this.keepAlive_) {\n      if (shouldCompute(this)) {\n        this.warnAboutUntrackedRead_();\n        startBatch(); // See perf test 'computed memoization'\n        this.value_ = this.computeValue_(false);\n        endBatch();\n      }\n    } else {\n      reportObserved(this);\n      if (shouldCompute(this)) {\n        var prevTrackingContext = globalState.trackingContext;\n        if (this.keepAlive_ && !prevTrackingContext) {\n          globalState.trackingContext = this;\n        }\n        if (this.trackAndCompute()) {\n          propagateChangeConfirmed(this);\n        }\n        globalState.trackingContext = prevTrackingContext;\n      }\n    }\n    var result = this.value_;\n    if (isCaughtException(result)) {\n      throw result.cause;\n    }\n    return result;\n  };\n  _proto.set = function set(value) {\n    if (this.setter_) {\n      if (this.isRunningSetter_) {\n        die(33, this.name_);\n      }\n      this.isRunningSetter_ = true;\n      try {\n        this.setter_.call(this.scope_, value);\n      } finally {\n        this.isRunningSetter_ = false;\n      }\n    } else {\n      die(34, this.name_);\n    }\n  };\n  _proto.trackAndCompute = function trackAndCompute() {\n    // N.B: unminified as it is used by MST\n    var oldValue = this.value_;\n    var wasSuspended = /* see #1208 */this.dependenciesState_ === IDerivationState_.NOT_TRACKING_;\n    var newValue = this.computeValue_(true);\n    var changed = wasSuspended || isCaughtException(oldValue) || isCaughtException(newValue) || !this.equals_(oldValue, newValue);\n    if (changed) {\n      this.value_ = newValue;\n      if (process.env.NODE_ENV !== \"production\" && isSpyEnabled()) {\n        spyReport({\n          observableKind: \"computed\",\n          debugObjectName: this.name_,\n          object: this.scope_,\n          type: \"update\",\n          oldValue: oldValue,\n          newValue: newValue\n        });\n      }\n    }\n    return changed;\n  };\n  _proto.computeValue_ = function computeValue_(track) {\n    this.isComputing_ = true;\n    // don't allow state changes during computation\n    var prev = allowStateChangesStart(false);\n    var res;\n    if (track) {\n      res = trackDerivedFunction(this, this.derivation, this.scope_);\n    } else {\n      if (globalState.disableErrorBoundaries === true) {\n        res = this.derivation.call(this.scope_);\n      } else {\n        try {\n          res = this.derivation.call(this.scope_);\n        } catch (e) {\n          res = new CaughtException(e);\n        }\n      }\n    }\n    allowStateChangesEnd(prev);\n    this.isComputing_ = false;\n    return res;\n  };\n  _proto.suspend_ = function suspend_() {\n    if (!this.keepAlive_) {\n      clearObserving(this);\n      this.value_ = undefined; // don't hold on to computed value!\n      if (process.env.NODE_ENV !== \"production\" && this.isTracing_ !== TraceMode.NONE) {\n        console.log(\"[mobx.trace] Computed value '\" + this.name_ + \"' was suspended and it will recompute on the next access.\");\n      }\n    }\n  };\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    var _this = this;\n    var firstTime = true;\n    var prevValue = undefined;\n    return autorun(function () {\n      // TODO: why is this in a different place than the spyReport() function? in all other observables it's called in the same place\n      var newValue = _this.get();\n      if (!firstTime || fireImmediately) {\n        var prevU = untrackedStart();\n        listener({\n          observableKind: \"computed\",\n          debugObjectName: _this.name_,\n          type: UPDATE,\n          object: _this,\n          newValue: newValue,\n          oldValue: prevValue\n        });\n        untrackedEnd(prevU);\n      }\n      firstTime = false;\n      prevValue = newValue;\n    });\n  };\n  _proto.warnAboutUntrackedRead_ = function warnAboutUntrackedRead_() {\n    if (!(process.env.NODE_ENV !== \"production\")) {\n      return;\n    }\n    if (this.isTracing_ !== TraceMode.NONE) {\n      console.log(\"[mobx.trace] Computed value '\" + this.name_ + \"' is being read outside a reactive context. Doing a full recompute.\");\n    }\n    if (typeof this.requiresReaction_ === \"boolean\" ? this.requiresReaction_ : globalState.computedRequiresReaction) {\n      console.warn(\"[mobx] Computed value '\" + this.name_ + \"' is being read outside a reactive context. Doing a full recompute.\");\n    }\n  };\n  _proto.toString = function toString() {\n    return this.name_ + \"[\" + this.derivation.toString() + \"]\";\n  };\n  _proto.valueOf = function valueOf() {\n    return toPrimitive(this.get());\n  };\n  _proto[_Symbol$toPrimitive$1] = function () {\n    return this.valueOf();\n  };\n  return ComputedValue;\n}();\nvar isComputedValue = /*#__PURE__*/createInstanceofPredicate(\"ComputedValue\", ComputedValue);\n\nvar IDerivationState_;\n(function (IDerivationState_) {\n  // before being run or (outside batch and not being observed)\n  // at this point derivation is not holding any data about dependency tree\n  IDerivationState_[IDerivationState_[\"NOT_TRACKING_\"] = -1] = \"NOT_TRACKING_\";\n  // no shallow dependency changed since last computation\n  // won't recalculate derivation\n  // this is what makes mobx fast\n  IDerivationState_[IDerivationState_[\"UP_TO_DATE_\"] = 0] = \"UP_TO_DATE_\";\n  // some deep dependency changed, but don't know if shallow dependency changed\n  // will require to check first if UP_TO_DATE or POSSIBLY_STALE\n  // currently only ComputedValue will propagate POSSIBLY_STALE\n  //\n  // having this state is second big optimization:\n  // don't have to recompute on every dependency change, but only when it's needed\n  IDerivationState_[IDerivationState_[\"POSSIBLY_STALE_\"] = 1] = \"POSSIBLY_STALE_\";\n  // A shallow dependency has changed since last computation and the derivation\n  // will need to recompute when it's needed next.\n  IDerivationState_[IDerivationState_[\"STALE_\"] = 2] = \"STALE_\";\n})(IDerivationState_ || (IDerivationState_ = {}));\nvar TraceMode;\n(function (TraceMode) {\n  TraceMode[TraceMode[\"NONE\"] = 0] = \"NONE\";\n  TraceMode[TraceMode[\"LOG\"] = 1] = \"LOG\";\n  TraceMode[TraceMode[\"BREAK\"] = 2] = \"BREAK\";\n})(TraceMode || (TraceMode = {}));\nvar CaughtException = function CaughtException(cause) {\n  this.cause = void 0;\n  this.cause = cause;\n  // Empty\n};\n\nfunction isCaughtException(e) {\n  return e instanceof CaughtException;\n}\n/**\r\n * Finds out whether any dependency of the derivation has actually changed.\r\n * If dependenciesState is 1 then it will recalculate dependencies,\r\n * if any dependency changed it will propagate it by changing dependenciesState to 2.\r\n *\r\n * By iterating over the dependencies in the same order that they were reported and\r\n * stopping on the first change, all the recalculations are only called for ComputedValues\r\n * that will be tracked by derivation. That is because we assume that if the first x\r\n * dependencies of the derivation doesn't change then the derivation should run the same way\r\n * up until accessing x-th dependency.\r\n */\nfunction shouldCompute(derivation) {\n  switch (derivation.dependenciesState_) {\n    case IDerivationState_.UP_TO_DATE_:\n      return false;\n    case IDerivationState_.NOT_TRACKING_:\n    case IDerivationState_.STALE_:\n      return true;\n    case IDerivationState_.POSSIBLY_STALE_:\n      {\n        // state propagation can occur outside of action/reactive context #2195\n        var prevAllowStateReads = allowStateReadsStart(true);\n        var prevUntracked = untrackedStart(); // no need for those computeds to be reported, they will be picked up in trackDerivedFunction.\n        var obs = derivation.observing_,\n          l = obs.length;\n        for (var i = 0; i < l; i++) {\n          var obj = obs[i];\n          if (isComputedValue(obj)) {\n            if (globalState.disableErrorBoundaries) {\n              obj.get();\n            } else {\n              try {\n                obj.get();\n              } catch (e) {\n                // we are not interested in the value *or* exception at this moment, but if there is one, notify all\n                untrackedEnd(prevUntracked);\n                allowStateReadsEnd(prevAllowStateReads);\n                return true;\n              }\n            }\n            // if ComputedValue `obj` actually changed it will be computed and propagated to its observers.\n            // and `derivation` is an observer of `obj`\n            // invariantShouldCompute(derivation)\n            if (derivation.dependenciesState_ === IDerivationState_.STALE_) {\n              untrackedEnd(prevUntracked);\n              allowStateReadsEnd(prevAllowStateReads);\n              return true;\n            }\n          }\n        }\n        changeDependenciesStateTo0(derivation);\n        untrackedEnd(prevUntracked);\n        allowStateReadsEnd(prevAllowStateReads);\n        return false;\n      }\n  }\n}\nfunction isComputingDerivation() {\n  return globalState.trackingDerivation !== null; // filter out actions inside computations\n}\n\nfunction checkIfStateModificationsAreAllowed(atom) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  }\n  var hasObservers = atom.observers_.size > 0;\n  // Should not be possible to change observed state outside strict mode, except during initialization, see #563\n  if (!globalState.allowStateChanges && (hasObservers || globalState.enforceActions === \"always\")) {\n    console.warn(\"[MobX] \" + (globalState.enforceActions ? \"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: \" : \"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: \") + atom.name_);\n  }\n}\nfunction checkIfStateReadsAreAllowed(observable) {\n  if (process.env.NODE_ENV !== \"production\" && !globalState.allowStateReads && globalState.observableRequiresReaction) {\n    console.warn(\"[mobx] Observable '\" + observable.name_ + \"' being read outside a reactive context.\");\n  }\n}\n/**\r\n * Executes the provided function `f` and tracks which observables are being accessed.\r\n * The tracking information is stored on the `derivation` object and the derivation is registered\r\n * as observer of any of the accessed observables.\r\n */\nfunction trackDerivedFunction(derivation, f, context) {\n  var prevAllowStateReads = allowStateReadsStart(true);\n  // pre allocate array allocation + room for variation in deps\n  // array will be trimmed by bindDependencies\n  changeDependenciesStateTo0(derivation);\n  derivation.newObserving_ = new Array(derivation.observing_.length + 100);\n  derivation.unboundDepsCount_ = 0;\n  derivation.runId_ = ++globalState.runId;\n  var prevTracking = globalState.trackingDerivation;\n  globalState.trackingDerivation = derivation;\n  globalState.inBatch++;\n  var result;\n  if (globalState.disableErrorBoundaries === true) {\n    result = f.call(context);\n  } else {\n    try {\n      result = f.call(context);\n    } catch (e) {\n      result = new CaughtException(e);\n    }\n  }\n  globalState.inBatch--;\n  globalState.trackingDerivation = prevTracking;\n  bindDependencies(derivation);\n  warnAboutDerivationWithoutDependencies(derivation);\n  allowStateReadsEnd(prevAllowStateReads);\n  return result;\n}\nfunction warnAboutDerivationWithoutDependencies(derivation) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  }\n  if (derivation.observing_.length !== 0) {\n    return;\n  }\n  if (typeof derivation.requiresObservable_ === \"boolean\" ? derivation.requiresObservable_ : globalState.reactionRequiresObservable) {\n    console.warn(\"[mobx] Derivation '\" + derivation.name_ + \"' is created/updated without reading any observable value.\");\n  }\n}\n/**\r\n * diffs newObserving with observing.\r\n * update observing to be newObserving with unique observables\r\n * notify observers that become observed/unobserved\r\n */\nfunction bindDependencies(derivation) {\n  // invariant(derivation.dependenciesState !== IDerivationState.NOT_TRACKING, \"INTERNAL ERROR bindDependencies expects derivation.dependenciesState !== -1\");\n  var prevObserving = derivation.observing_;\n  var observing = derivation.observing_ = derivation.newObserving_;\n  var lowestNewObservingDerivationState = IDerivationState_.UP_TO_DATE_;\n  // Go through all new observables and check diffValue: (this list can contain duplicates):\n  //   0: first occurrence, change to 1 and keep it\n  //   1: extra occurrence, drop it\n  var i0 = 0,\n    l = derivation.unboundDepsCount_;\n  for (var i = 0; i < l; i++) {\n    var dep = observing[i];\n    if (dep.diffValue_ === 0) {\n      dep.diffValue_ = 1;\n      if (i0 !== i) {\n        observing[i0] = dep;\n      }\n      i0++;\n    }\n    // Upcast is 'safe' here, because if dep is IObservable, `dependenciesState` will be undefined,\n    // not hitting the condition\n    if (dep.dependenciesState_ > lowestNewObservingDerivationState) {\n      lowestNewObservingDerivationState = dep.dependenciesState_;\n    }\n  }\n  observing.length = i0;\n  derivation.newObserving_ = null; // newObserving shouldn't be needed outside tracking (statement moved down to work around FF bug, see #614)\n  // Go through all old observables and check diffValue: (it is unique after last bindDependencies)\n  //   0: it's not in new observables, unobserve it\n  //   1: it keeps being observed, don't want to notify it. change to 0\n  l = prevObserving.length;\n  while (l--) {\n    var _dep = prevObserving[l];\n    if (_dep.diffValue_ === 0) {\n      removeObserver(_dep, derivation);\n    }\n    _dep.diffValue_ = 0;\n  }\n  // Go through all new observables and check diffValue: (now it should be unique)\n  //   0: it was set to 0 in last loop. don't need to do anything.\n  //   1: it wasn't observed, let's observe it. set back to 0\n  while (i0--) {\n    var _dep2 = observing[i0];\n    if (_dep2.diffValue_ === 1) {\n      _dep2.diffValue_ = 0;\n      addObserver(_dep2, derivation);\n    }\n  }\n  // Some new observed derivations may become stale during this derivation computation\n  // so they have had no chance to propagate staleness (#916)\n  if (lowestNewObservingDerivationState !== IDerivationState_.UP_TO_DATE_) {\n    derivation.dependenciesState_ = lowestNewObservingDerivationState;\n    derivation.onBecomeStale_();\n  }\n}\nfunction clearObserving(derivation) {\n  // invariant(globalState.inBatch > 0, \"INTERNAL ERROR clearObserving should be called only inside batch\");\n  var obs = derivation.observing_;\n  derivation.observing_ = [];\n  var i = obs.length;\n  while (i--) {\n    removeObserver(obs[i], derivation);\n  }\n  derivation.dependenciesState_ = IDerivationState_.NOT_TRACKING_;\n}\nfunction untracked(action) {\n  var prev = untrackedStart();\n  try {\n    return action();\n  } finally {\n    untrackedEnd(prev);\n  }\n}\nfunction untrackedStart() {\n  var prev = globalState.trackingDerivation;\n  globalState.trackingDerivation = null;\n  return prev;\n}\nfunction untrackedEnd(prev) {\n  globalState.trackingDerivation = prev;\n}\nfunction allowStateReadsStart(allowStateReads) {\n  var prev = globalState.allowStateReads;\n  globalState.allowStateReads = allowStateReads;\n  return prev;\n}\nfunction allowStateReadsEnd(prev) {\n  globalState.allowStateReads = prev;\n}\n/**\r\n * needed to keep `lowestObserverState` correct. when changing from (2 or 1) to 0\r\n *\r\n */\nfunction changeDependenciesStateTo0(derivation) {\n  if (derivation.dependenciesState_ === IDerivationState_.UP_TO_DATE_) {\n    return;\n  }\n  derivation.dependenciesState_ = IDerivationState_.UP_TO_DATE_;\n  var obs = derivation.observing_;\n  var i = obs.length;\n  while (i--) {\n    obs[i].lowestObserverState_ = IDerivationState_.UP_TO_DATE_;\n  }\n}\n\n/**\r\n * These values will persist if global state is reset\r\n */\nvar persistentKeys = [\"mobxGuid\", \"spyListeners\", \"enforceActions\", \"computedRequiresReaction\", \"reactionRequiresObservable\", \"observableRequiresReaction\", \"allowStateReads\", \"disableErrorBoundaries\", \"runId\", \"UNCHANGED\", \"useProxies\"];\nvar MobXGlobals = function MobXGlobals() {\n  this.version = 6;\n  this.UNCHANGED = {};\n  this.trackingDerivation = null;\n  this.trackingContext = null;\n  this.runId = 0;\n  this.mobxGuid = 0;\n  this.inBatch = 0;\n  this.pendingUnobservations = [];\n  this.pendingReactions = [];\n  this.isRunningReactions = false;\n  this.allowStateChanges = false;\n  this.allowStateReads = true;\n  this.enforceActions = true;\n  this.spyListeners = [];\n  this.globalReactionErrorHandlers = [];\n  this.computedRequiresReaction = false;\n  this.reactionRequiresObservable = false;\n  this.observableRequiresReaction = false;\n  this.disableErrorBoundaries = false;\n  this.suppressReactionErrors = false;\n  this.useProxies = true;\n  this.verifyProxies = false;\n  this.safeDescriptors = true;\n};\nvar canMergeGlobalState = true;\nvar isolateCalled = false;\nvar globalState = /*#__PURE__*/function () {\n  var global = /*#__PURE__*/getGlobal();\n  if (global.__mobxInstanceCount > 0 && !global.__mobxGlobals) {\n    canMergeGlobalState = false;\n  }\n  if (global.__mobxGlobals && global.__mobxGlobals.version !== new MobXGlobals().version) {\n    canMergeGlobalState = false;\n  }\n  if (!canMergeGlobalState) {\n    // Because this is a IIFE we need to let isolateCalled a chance to change\n    // so we run it after the event loop completed at least 1 iteration\n    setTimeout(function () {\n      if (!isolateCalled) {\n        die(35);\n      }\n    }, 1);\n    return new MobXGlobals();\n  } else if (global.__mobxGlobals) {\n    global.__mobxInstanceCount += 1;\n    if (!global.__mobxGlobals.UNCHANGED) {\n      global.__mobxGlobals.UNCHANGED = {};\n    } // make merge backward compatible\n    return global.__mobxGlobals;\n  } else {\n    global.__mobxInstanceCount = 1;\n    return global.__mobxGlobals = /*#__PURE__*/new MobXGlobals();\n  }\n}();\nfunction isolateGlobalState() {\n  if (globalState.pendingReactions.length || globalState.inBatch || globalState.isRunningReactions) {\n    die(36);\n  }\n  isolateCalled = true;\n  if (canMergeGlobalState) {\n    var global = getGlobal();\n    if (--global.__mobxInstanceCount === 0) {\n      global.__mobxGlobals = undefined;\n    }\n    globalState = new MobXGlobals();\n  }\n}\nfunction getGlobalState() {\n  return globalState;\n}\n/**\r\n * For testing purposes only; this will break the internal state of existing observables,\r\n * but can be used to get back at a stable state after throwing errors\r\n */\nfunction resetGlobalState() {\n  var defaultGlobals = new MobXGlobals();\n  for (var key in defaultGlobals) {\n    if (persistentKeys.indexOf(key) === -1) {\n      globalState[key] = defaultGlobals[key];\n    }\n  }\n  globalState.allowStateChanges = !globalState.enforceActions;\n}\n\nfunction hasObservers(observable) {\n  return observable.observers_ && observable.observers_.size > 0;\n}\nfunction getObservers(observable) {\n  return observable.observers_;\n}\n// function invariantObservers(observable: IObservable) {\n//     const list = observable.observers\n//     const map = observable.observersIndexes\n//     const l = list.length\n//     for (let i = 0; i < l; i++) {\n//         const id = list[i].__mapid\n//         if (i) {\n//             invariant(map[id] === i, \"INTERNAL ERROR maps derivation.__mapid to index in list\") // for performance\n//         } else {\n//             invariant(!(id in map), \"INTERNAL ERROR observer on index 0 shouldn't be held in map.\") // for performance\n//         }\n//     }\n//     invariant(\n//         list.length === 0 || Object.keys(map).length === list.length - 1,\n//         \"INTERNAL ERROR there is no junk in map\"\n//     )\n// }\nfunction addObserver(observable, node) {\n  // invariant(node.dependenciesState !== -1, \"INTERNAL ERROR, can add only dependenciesState !== -1\");\n  // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR add already added node\");\n  // invariantObservers(observable);\n  observable.observers_.add(node);\n  if (observable.lowestObserverState_ > node.dependenciesState_) {\n    observable.lowestObserverState_ = node.dependenciesState_;\n  }\n  // invariantObservers(observable);\n  // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR didn't add node\");\n}\n\nfunction removeObserver(observable, node) {\n  // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n  // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR remove already removed node\");\n  // invariantObservers(observable);\n  observable.observers_[\"delete\"](node);\n  if (observable.observers_.size === 0) {\n    // deleting last observer\n    queueForUnobservation(observable);\n  }\n  // invariantObservers(observable);\n  // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR remove already removed node2\");\n}\n\nfunction queueForUnobservation(observable) {\n  if (observable.isPendingUnobservation_ === false) {\n    // invariant(observable._observers.length === 0, \"INTERNAL ERROR, should only queue for unobservation unobserved observables\");\n    observable.isPendingUnobservation_ = true;\n    globalState.pendingUnobservations.push(observable);\n  }\n}\n/**\r\n * Batch starts a transaction, at least for purposes of memoizing ComputedValues when nothing else does.\r\n * During a batch `onBecomeUnobserved` will be called at most once per observable.\r\n * Avoids unnecessary recalculations.\r\n */\nfunction startBatch() {\n  globalState.inBatch++;\n}\nfunction endBatch() {\n  if (--globalState.inBatch === 0) {\n    runReactions();\n    // the batch is actually about to finish, all unobserving should happen here.\n    var list = globalState.pendingUnobservations;\n    for (var i = 0; i < list.length; i++) {\n      var observable = list[i];\n      observable.isPendingUnobservation_ = false;\n      if (observable.observers_.size === 0) {\n        if (observable.isBeingObserved_) {\n          // if this observable had reactive observers, trigger the hooks\n          observable.isBeingObserved_ = false;\n          observable.onBUO();\n        }\n        if (observable instanceof ComputedValue) {\n          // computed values are automatically teared down when the last observer leaves\n          // this process happens recursively, this computed might be the last observabe of another, etc..\n          observable.suspend_();\n        }\n      }\n    }\n    globalState.pendingUnobservations = [];\n  }\n}\nfunction reportObserved(observable) {\n  checkIfStateReadsAreAllowed(observable);\n  var derivation = globalState.trackingDerivation;\n  if (derivation !== null) {\n    /**\r\n     * Simple optimization, give each derivation run an unique id (runId)\r\n     * Check if last time this observable was accessed the same runId is used\r\n     * if this is the case, the relation is already known\r\n     */\n    if (derivation.runId_ !== observable.lastAccessedBy_) {\n      observable.lastAccessedBy_ = derivation.runId_;\n      // Tried storing newObserving, or observing, or both as Set, but performance didn't come close...\n      derivation.newObserving_[derivation.unboundDepsCount_++] = observable;\n      if (!observable.isBeingObserved_ && globalState.trackingContext) {\n        observable.isBeingObserved_ = true;\n        observable.onBO();\n      }\n    }\n    return observable.isBeingObserved_;\n  } else if (observable.observers_.size === 0 && globalState.inBatch > 0) {\n    queueForUnobservation(observable);\n  }\n  return false;\n}\n// function invariantLOS(observable: IObservable, msg: string) {\n//     // it's expensive so better not run it in produciton. but temporarily helpful for testing\n//     const min = getObservers(observable).reduce((a, b) => Math.min(a, b.dependenciesState), 2)\n//     if (min >= observable.lowestObserverState) return // <- the only assumption about `lowestObserverState`\n//     throw new Error(\n//         \"lowestObserverState is wrong for \" +\n//             msg +\n//             \" because \" +\n//             min +\n//             \" < \" +\n//             observable.lowestObserverState\n//     )\n// }\n/**\r\n * NOTE: current propagation mechanism will in case of self reruning autoruns behave unexpectedly\r\n * It will propagate changes to observers from previous run\r\n * It's hard or maybe impossible (with reasonable perf) to get it right with current approach\r\n * Hopefully self reruning autoruns aren't a feature people should depend on\r\n * Also most basic use cases should be ok\r\n */\n// Called by Atom when its value changes\nfunction propagateChanged(observable) {\n  // invariantLOS(observable, \"changed start\");\n  if (observable.lowestObserverState_ === IDerivationState_.STALE_) {\n    return;\n  }\n  observable.lowestObserverState_ = IDerivationState_.STALE_;\n  // Ideally we use for..of here, but the downcompiled version is really slow...\n  observable.observers_.forEach(function (d) {\n    if (d.dependenciesState_ === IDerivationState_.UP_TO_DATE_) {\n      if (process.env.NODE_ENV !== \"production\" && d.isTracing_ !== TraceMode.NONE) {\n        logTraceInfo(d, observable);\n      }\n      d.onBecomeStale_();\n    }\n    d.dependenciesState_ = IDerivationState_.STALE_;\n  });\n  // invariantLOS(observable, \"changed end\");\n}\n// Called by ComputedValue when it recalculate and its value changed\nfunction propagateChangeConfirmed(observable) {\n  // invariantLOS(observable, \"confirmed start\");\n  if (observable.lowestObserverState_ === IDerivationState_.STALE_) {\n    return;\n  }\n  observable.lowestObserverState_ = IDerivationState_.STALE_;\n  observable.observers_.forEach(function (d) {\n    if (d.dependenciesState_ === IDerivationState_.POSSIBLY_STALE_) {\n      d.dependenciesState_ = IDerivationState_.STALE_;\n      if (process.env.NODE_ENV !== \"production\" && d.isTracing_ !== TraceMode.NONE) {\n        logTraceInfo(d, observable);\n      }\n    } else if (d.dependenciesState_ === IDerivationState_.UP_TO_DATE_ // this happens during computing of `d`, just keep lowestObserverState up to date.\n    ) {\n      observable.lowestObserverState_ = IDerivationState_.UP_TO_DATE_;\n    }\n  });\n  // invariantLOS(observable, \"confirmed end\");\n}\n// Used by computed when its dependency changed, but we don't wan't to immediately recompute.\nfunction propagateMaybeChanged(observable) {\n  // invariantLOS(observable, \"maybe start\");\n  if (observable.lowestObserverState_ !== IDerivationState_.UP_TO_DATE_) {\n    return;\n  }\n  observable.lowestObserverState_ = IDerivationState_.POSSIBLY_STALE_;\n  observable.observers_.forEach(function (d) {\n    if (d.dependenciesState_ === IDerivationState_.UP_TO_DATE_) {\n      d.dependenciesState_ = IDerivationState_.POSSIBLY_STALE_;\n      d.onBecomeStale_();\n    }\n  });\n  // invariantLOS(observable, \"maybe end\");\n}\n\nfunction logTraceInfo(derivation, observable) {\n  console.log(\"[mobx.trace] '\" + derivation.name_ + \"' is invalidated due to a change in: '\" + observable.name_ + \"'\");\n  if (derivation.isTracing_ === TraceMode.BREAK) {\n    var lines = [];\n    printDepTree(getDependencyTree(derivation), lines, 1);\n    // prettier-ignore\n    new Function(\"debugger;\\n/*\\nTracing '\" + derivation.name_ + \"'\\n\\nYou are entering this break point because derivation '\" + derivation.name_ + \"' is being traced and '\" + observable.name_ + \"' is now forcing it to update.\\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\\n\\n\" + (derivation instanceof ComputedValue ? derivation.derivation.toString().replace(/[*]\\//g, \"/\") : \"\") + \"\\n\\nThe dependencies for this derivation are:\\n\\n\" + lines.join(\"\\n\") + \"\\n*/\\n    \")();\n  }\n}\nfunction printDepTree(tree, lines, depth) {\n  if (lines.length >= 1000) {\n    lines.push(\"(and many more)\");\n    return;\n  }\n  lines.push(\"\" + \"\\t\".repeat(depth - 1) + tree.name);\n  if (tree.dependencies) {\n    tree.dependencies.forEach(function (child) {\n      return printDepTree(child, lines, depth + 1);\n    });\n  }\n}\n\nvar Reaction = /*#__PURE__*/function () {\n  // nodes we are looking at. Our value depends on these nodes\n\n  function Reaction(name_, onInvalidate_, errorHandler_, requiresObservable_) {\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"Reaction@\" + getNextId() : \"Reaction\";\n    }\n    this.name_ = void 0;\n    this.onInvalidate_ = void 0;\n    this.errorHandler_ = void 0;\n    this.requiresObservable_ = void 0;\n    this.observing_ = [];\n    this.newObserving_ = [];\n    this.dependenciesState_ = IDerivationState_.NOT_TRACKING_;\n    this.diffValue_ = 0;\n    this.runId_ = 0;\n    this.unboundDepsCount_ = 0;\n    this.isDisposed_ = false;\n    this.isScheduled_ = false;\n    this.isTrackPending_ = false;\n    this.isRunning_ = false;\n    this.isTracing_ = TraceMode.NONE;\n    this.name_ = name_;\n    this.onInvalidate_ = onInvalidate_;\n    this.errorHandler_ = errorHandler_;\n    this.requiresObservable_ = requiresObservable_;\n  }\n  var _proto = Reaction.prototype;\n  _proto.onBecomeStale_ = function onBecomeStale_() {\n    this.schedule_();\n  };\n  _proto.schedule_ = function schedule_() {\n    if (!this.isScheduled_) {\n      this.isScheduled_ = true;\n      globalState.pendingReactions.push(this);\n      runReactions();\n    }\n  };\n  _proto.isScheduled = function isScheduled() {\n    return this.isScheduled_;\n  }\n  /**\r\n   * internal, use schedule() if you intend to kick off a reaction\r\n   */;\n  _proto.runReaction_ = function runReaction_() {\n    if (!this.isDisposed_) {\n      startBatch();\n      this.isScheduled_ = false;\n      var prev = globalState.trackingContext;\n      globalState.trackingContext = this;\n      if (shouldCompute(this)) {\n        this.isTrackPending_ = true;\n        try {\n          this.onInvalidate_();\n          if (process.env.NODE_ENV !== \"production\" && this.isTrackPending_ && isSpyEnabled()) {\n            // onInvalidate didn't trigger track right away..\n            spyReport({\n              name: this.name_,\n              type: \"scheduled-reaction\"\n            });\n          }\n        } catch (e) {\n          this.reportExceptionInDerivation_(e);\n        }\n      }\n      globalState.trackingContext = prev;\n      endBatch();\n    }\n  };\n  _proto.track = function track(fn) {\n    if (this.isDisposed_) {\n      return;\n      // console.warn(\"Reaction already disposed\") // Note: Not a warning / error in mobx 4 either\n    }\n\n    startBatch();\n    var notify = isSpyEnabled();\n    var startTime;\n    if (process.env.NODE_ENV !== \"production\" && notify) {\n      startTime = Date.now();\n      spyReportStart({\n        name: this.name_,\n        type: \"reaction\"\n      });\n    }\n    this.isRunning_ = true;\n    var prevReaction = globalState.trackingContext; // reactions could create reactions...\n    globalState.trackingContext = this;\n    var result = trackDerivedFunction(this, fn, undefined);\n    globalState.trackingContext = prevReaction;\n    this.isRunning_ = false;\n    this.isTrackPending_ = false;\n    if (this.isDisposed_) {\n      // disposed during last run. Clean up everything that was bound after the dispose call.\n      clearObserving(this);\n    }\n    if (isCaughtException(result)) {\n      this.reportExceptionInDerivation_(result.cause);\n    }\n    if (process.env.NODE_ENV !== \"production\" && notify) {\n      spyReportEnd({\n        time: Date.now() - startTime\n      });\n    }\n    endBatch();\n  };\n  _proto.reportExceptionInDerivation_ = function reportExceptionInDerivation_(error) {\n    var _this = this;\n    if (this.errorHandler_) {\n      this.errorHandler_(error, this);\n      return;\n    }\n    if (globalState.disableErrorBoundaries) {\n      throw error;\n    }\n    var message = process.env.NODE_ENV !== \"production\" ? \"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\" + this + \"'\" : \"[mobx] uncaught error in '\" + this + \"'\";\n    if (!globalState.suppressReactionErrors) {\n      console.error(message, error);\n      /** If debugging brought you here, please, read the above message :-). Tnx! */\n    } else if (process.env.NODE_ENV !== \"production\") {\n      console.warn(\"[mobx] (error in reaction '\" + this.name_ + \"' suppressed, fix error of causing action below)\");\n    } // prettier-ignore\n    if (process.env.NODE_ENV !== \"production\" && isSpyEnabled()) {\n      spyReport({\n        type: \"error\",\n        name: this.name_,\n        message: message,\n        error: \"\" + error\n      });\n    }\n    globalState.globalReactionErrorHandlers.forEach(function (f) {\n      return f(error, _this);\n    });\n  };\n  _proto.dispose = function dispose() {\n    if (!this.isDisposed_) {\n      this.isDisposed_ = true;\n      if (!this.isRunning_) {\n        // if disposed while running, clean up later. Maybe not optimal, but rare case\n        startBatch();\n        clearObserving(this);\n        endBatch();\n      }\n    }\n  };\n  _proto.getDisposer_ = function getDisposer_() {\n    var r = this.dispose.bind(this);\n    r[$mobx] = this;\n    return r;\n  };\n  _proto.toString = function toString() {\n    return \"Reaction[\" + this.name_ + \"]\";\n  };\n  _proto.trace = function trace$1(enterBreakPoint) {\n    if (enterBreakPoint === void 0) {\n      enterBreakPoint = false;\n    }\n    trace(this, enterBreakPoint);\n  };\n  return Reaction;\n}();\nfunction onReactionError(handler) {\n  globalState.globalReactionErrorHandlers.push(handler);\n  return function () {\n    var idx = globalState.globalReactionErrorHandlers.indexOf(handler);\n    if (idx >= 0) {\n      globalState.globalReactionErrorHandlers.splice(idx, 1);\n    }\n  };\n}\n/**\r\n * Magic number alert!\r\n * Defines within how many times a reaction is allowed to re-trigger itself\r\n * until it is assumed that this is gonna be a never ending loop...\r\n */\nvar MAX_REACTION_ITERATIONS = 100;\nvar reactionScheduler = function reactionScheduler(f) {\n  return f();\n};\nfunction runReactions() {\n  // Trampolining, if runReactions are already running, new reactions will be picked up\n  if (globalState.inBatch > 0 || globalState.isRunningReactions) {\n    return;\n  }\n  reactionScheduler(runReactionsHelper);\n}\nfunction runReactionsHelper() {\n  globalState.isRunningReactions = true;\n  var allReactions = globalState.pendingReactions;\n  var iterations = 0;\n  // While running reactions, new reactions might be triggered.\n  // Hence we work with two variables and check whether\n  // we converge to no remaining reactions after a while.\n  while (allReactions.length > 0) {\n    if (++iterations === MAX_REACTION_ITERATIONS) {\n      console.error(process.env.NODE_ENV !== \"production\" ? \"Reaction doesn't converge to a stable state after \" + MAX_REACTION_ITERATIONS + \" iterations.\" + (\" Probably there is a cycle in the reactive function: \" + allReactions[0]) : \"[mobx] cycle in reaction: \" + allReactions[0]);\n      allReactions.splice(0); // clear reactions\n    }\n\n    var remainingReactions = allReactions.splice(0);\n    for (var i = 0, l = remainingReactions.length; i < l; i++) {\n      remainingReactions[i].runReaction_();\n    }\n  }\n  globalState.isRunningReactions = false;\n}\nvar isReaction = /*#__PURE__*/createInstanceofPredicate(\"Reaction\", Reaction);\nfunction setReactionScheduler(fn) {\n  var baseScheduler = reactionScheduler;\n  reactionScheduler = function reactionScheduler(f) {\n    return fn(function () {\n      return baseScheduler(f);\n    });\n  };\n}\n\nfunction isSpyEnabled() {\n  return process.env.NODE_ENV !== \"production\" && !!globalState.spyListeners.length;\n}\nfunction spyReport(event) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  } // dead code elimination can do the rest\n  if (!globalState.spyListeners.length) {\n    return;\n  }\n  var listeners = globalState.spyListeners;\n  for (var i = 0, l = listeners.length; i < l; i++) {\n    listeners[i](event);\n  }\n}\nfunction spyReportStart(event) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  }\n  var change = _extends({}, event, {\n    spyReportStart: true\n  });\n  spyReport(change);\n}\nvar END_EVENT = {\n  type: \"report-end\",\n  spyReportEnd: true\n};\nfunction spyReportEnd(change) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  }\n  if (change) {\n    spyReport(_extends({}, change, {\n      type: \"report-end\",\n      spyReportEnd: true\n    }));\n  } else {\n    spyReport(END_EVENT);\n  }\n}\nfunction spy(listener) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    console.warn(\"[mobx.spy] Is a no-op in production builds\");\n    return function () {};\n  } else {\n    globalState.spyListeners.push(listener);\n    return once(function () {\n      globalState.spyListeners = globalState.spyListeners.filter(function (l) {\n        return l !== listener;\n      });\n    });\n  }\n}\n\nvar ACTION = \"action\";\nvar ACTION_BOUND = \"action.bound\";\nvar AUTOACTION = \"autoAction\";\nvar AUTOACTION_BOUND = \"autoAction.bound\";\nvar DEFAULT_ACTION_NAME = \"<unnamed action>\";\nvar actionAnnotation = /*#__PURE__*/createActionAnnotation(ACTION);\nvar actionBoundAnnotation = /*#__PURE__*/createActionAnnotation(ACTION_BOUND, {\n  bound: true\n});\nvar autoActionAnnotation = /*#__PURE__*/createActionAnnotation(AUTOACTION, {\n  autoAction: true\n});\nvar autoActionBoundAnnotation = /*#__PURE__*/createActionAnnotation(AUTOACTION_BOUND, {\n  autoAction: true,\n  bound: true\n});\nfunction createActionFactory(autoAction) {\n  var res = function action(arg1, arg2) {\n    // action(fn() {})\n    if (isFunction(arg1)) {\n      return createAction(arg1.name || DEFAULT_ACTION_NAME, arg1, autoAction);\n    }\n    // action(\"name\", fn() {})\n    if (isFunction(arg2)) {\n      return createAction(arg1, arg2, autoAction);\n    }\n    // @action\n    if (isStringish(arg2)) {\n      return storeAnnotation(arg1, arg2, autoAction ? autoActionAnnotation : actionAnnotation);\n    }\n    // action(\"name\") & @action(\"name\")\n    if (isStringish(arg1)) {\n      return createDecoratorAnnotation(createActionAnnotation(autoAction ? AUTOACTION : ACTION, {\n        name: arg1,\n        autoAction: autoAction\n      }));\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      die(\"Invalid arguments for `action`\");\n    }\n  };\n  return res;\n}\nvar action = /*#__PURE__*/createActionFactory(false);\nObject.assign(action, actionAnnotation);\nvar autoAction = /*#__PURE__*/createActionFactory(true);\nObject.assign(autoAction, autoActionAnnotation);\naction.bound = /*#__PURE__*/createDecoratorAnnotation(actionBoundAnnotation);\nautoAction.bound = /*#__PURE__*/createDecoratorAnnotation(autoActionBoundAnnotation);\nfunction runInAction(fn) {\n  return executeAction(fn.name || DEFAULT_ACTION_NAME, false, fn, this, undefined);\n}\nfunction isAction(thing) {\n  return isFunction(thing) && thing.isMobxAction === true;\n}\n\n/**\r\n * Creates a named reactive view and keeps it alive, so that the view is always\r\n * updated if one of the dependencies changes, even when the view is not further used by something else.\r\n * @param view The reactive view\r\n * @returns disposer function, which can be used to stop the view from being updated in the future.\r\n */\nfunction autorun(view, opts) {\n  var _opts$name, _opts;\n  if (opts === void 0) {\n    opts = EMPTY_OBJECT;\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isFunction(view)) {\n      die(\"Autorun expects a function as first argument\");\n    }\n    if (isAction(view)) {\n      die(\"Autorun does not accept actions since actions are untrackable\");\n    }\n  }\n  var name = (_opts$name = (_opts = opts) == null ? void 0 : _opts.name) != null ? _opts$name : process.env.NODE_ENV !== \"production\" ? view.name || \"Autorun@\" + getNextId() : \"Autorun\";\n  var runSync = !opts.scheduler && !opts.delay;\n  var reaction;\n  if (runSync) {\n    // normal autorun\n    reaction = new Reaction(name, function () {\n      this.track(reactionRunner);\n    }, opts.onError, opts.requiresObservable);\n  } else {\n    var scheduler = createSchedulerFromOptions(opts);\n    // debounced autorun\n    var isScheduled = false;\n    reaction = new Reaction(name, function () {\n      if (!isScheduled) {\n        isScheduled = true;\n        scheduler(function () {\n          isScheduled = false;\n          if (!reaction.isDisposed_) {\n            reaction.track(reactionRunner);\n          }\n        });\n      }\n    }, opts.onError, opts.requiresObservable);\n  }\n  function reactionRunner() {\n    view(reaction);\n  }\n  reaction.schedule_();\n  return reaction.getDisposer_();\n}\nvar run = function run(f) {\n  return f();\n};\nfunction createSchedulerFromOptions(opts) {\n  return opts.scheduler ? opts.scheduler : opts.delay ? function (f) {\n    return setTimeout(f, opts.delay);\n  } : run;\n}\nfunction reaction(expression, effect, opts) {\n  var _opts$name2;\n  if (opts === void 0) {\n    opts = EMPTY_OBJECT;\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isFunction(expression) || !isFunction(effect)) {\n      die(\"First and second argument to reaction should be functions\");\n    }\n    if (!isPlainObject(opts)) {\n      die(\"Third argument of reactions should be an object\");\n    }\n  }\n  var name = (_opts$name2 = opts.name) != null ? _opts$name2 : process.env.NODE_ENV !== \"production\" ? \"Reaction@\" + getNextId() : \"Reaction\";\n  var effectAction = action(name, opts.onError ? wrapErrorHandler(opts.onError, effect) : effect);\n  var runSync = !opts.scheduler && !opts.delay;\n  var scheduler = createSchedulerFromOptions(opts);\n  var firstTime = true;\n  var isScheduled = false;\n  var value;\n  var oldValue;\n  var equals = opts.compareStructural ? comparer.structural : opts.equals || comparer[\"default\"];\n  var r = new Reaction(name, function () {\n    if (firstTime || runSync) {\n      reactionRunner();\n    } else if (!isScheduled) {\n      isScheduled = true;\n      scheduler(reactionRunner);\n    }\n  }, opts.onError, opts.requiresObservable);\n  function reactionRunner() {\n    isScheduled = false;\n    if (r.isDisposed_) {\n      return;\n    }\n    var changed = false;\n    r.track(function () {\n      var nextValue = allowStateChanges(false, function () {\n        return expression(r);\n      });\n      changed = firstTime || !equals(value, nextValue);\n      oldValue = value;\n      value = nextValue;\n    });\n    if (firstTime && opts.fireImmediately) {\n      effectAction(value, oldValue, r);\n    } else if (!firstTime && changed) {\n      effectAction(value, oldValue, r);\n    }\n    firstTime = false;\n  }\n  r.schedule_();\n  return r.getDisposer_();\n}\nfunction wrapErrorHandler(errorHandler, baseFn) {\n  return function () {\n    try {\n      return baseFn.apply(this, arguments);\n    } catch (e) {\n      errorHandler.call(this, e);\n    }\n  };\n}\n\nvar ON_BECOME_OBSERVED = \"onBO\";\nvar ON_BECOME_UNOBSERVED = \"onBUO\";\nfunction onBecomeObserved(thing, arg2, arg3) {\n  return interceptHook(ON_BECOME_OBSERVED, thing, arg2, arg3);\n}\nfunction onBecomeUnobserved(thing, arg2, arg3) {\n  return interceptHook(ON_BECOME_UNOBSERVED, thing, arg2, arg3);\n}\nfunction interceptHook(hook, thing, arg2, arg3) {\n  var atom = typeof arg3 === \"function\" ? getAtom(thing, arg2) : getAtom(thing);\n  var cb = isFunction(arg3) ? arg3 : arg2;\n  var listenersKey = hook + \"L\";\n  if (atom[listenersKey]) {\n    atom[listenersKey].add(cb);\n  } else {\n    atom[listenersKey] = new Set([cb]);\n  }\n  return function () {\n    var hookListeners = atom[listenersKey];\n    if (hookListeners) {\n      hookListeners[\"delete\"](cb);\n      if (hookListeners.size === 0) {\n        delete atom[listenersKey];\n      }\n    }\n  };\n}\n\nvar NEVER = \"never\";\nvar ALWAYS = \"always\";\nvar OBSERVED = \"observed\";\n// const IF_AVAILABLE = \"ifavailable\"\nfunction configure(options) {\n  if (options.isolateGlobalState === true) {\n    isolateGlobalState();\n  }\n  var useProxies = options.useProxies,\n    enforceActions = options.enforceActions;\n  if (useProxies !== undefined) {\n    globalState.useProxies = useProxies === ALWAYS ? true : useProxies === NEVER ? false : typeof Proxy !== \"undefined\";\n  }\n  if (useProxies === \"ifavailable\") {\n    globalState.verifyProxies = true;\n  }\n  if (enforceActions !== undefined) {\n    var ea = enforceActions === ALWAYS ? ALWAYS : enforceActions === OBSERVED;\n    globalState.enforceActions = ea;\n    globalState.allowStateChanges = ea === true || ea === ALWAYS ? false : true;\n  }\n  [\"computedRequiresReaction\", \"reactionRequiresObservable\", \"observableRequiresReaction\", \"disableErrorBoundaries\", \"safeDescriptors\"].forEach(function (key) {\n    if (key in options) {\n      globalState[key] = !!options[key];\n    }\n  });\n  globalState.allowStateReads = !globalState.observableRequiresReaction;\n  if (process.env.NODE_ENV !== \"production\" && globalState.disableErrorBoundaries === true) {\n    console.warn(\"WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled.\");\n  }\n  if (options.reactionScheduler) {\n    setReactionScheduler(options.reactionScheduler);\n  }\n}\n\nfunction extendObservable(target, properties, annotations, options) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (arguments.length > 4) {\n      die(\"'extendObservable' expected 2-4 arguments\");\n    }\n    if (typeof target !== \"object\") {\n      die(\"'extendObservable' expects an object as first argument\");\n    }\n    if (isObservableMap(target)) {\n      die(\"'extendObservable' should not be used on maps, use map.merge instead\");\n    }\n    if (!isPlainObject(properties)) {\n      die(\"'extendObservable' only accepts plain objects as second argument\");\n    }\n    if (isObservable(properties) || isObservable(annotations)) {\n      die(\"Extending an object with another observable (object) is not supported\");\n    }\n  }\n  // Pull descriptors first, so we don't have to deal with props added by administration ($mobx)\n  var descriptors = getOwnPropertyDescriptors(properties);\n  var adm = asObservableObject(target, options)[$mobx];\n  startBatch();\n  try {\n    ownKeys(descriptors).forEach(function (key) {\n      adm.extend_(key, descriptors[key],\n      // must pass \"undefined\" for { key: undefined }\n      !annotations ? true : key in annotations ? annotations[key] : true);\n    });\n  } finally {\n    endBatch();\n  }\n  return target;\n}\n\nfunction getDependencyTree(thing, property) {\n  return nodeToDependencyTree(getAtom(thing, property));\n}\nfunction nodeToDependencyTree(node) {\n  var result = {\n    name: node.name_\n  };\n  if (node.observing_ && node.observing_.length > 0) {\n    result.dependencies = unique(node.observing_).map(nodeToDependencyTree);\n  }\n  return result;\n}\nfunction getObserverTree(thing, property) {\n  return nodeToObserverTree(getAtom(thing, property));\n}\nfunction nodeToObserverTree(node) {\n  var result = {\n    name: node.name_\n  };\n  if (hasObservers(node)) {\n    result.observers = Array.from(getObservers(node)).map(nodeToObserverTree);\n  }\n  return result;\n}\nfunction unique(list) {\n  return Array.from(new Set(list));\n}\n\nvar generatorId = 0;\nfunction FlowCancellationError() {\n  this.message = \"FLOW_CANCELLED\";\n}\nFlowCancellationError.prototype = /*#__PURE__*/Object.create(Error.prototype);\nfunction isFlowCancellationError(error) {\n  return error instanceof FlowCancellationError;\n}\nvar flowAnnotation = /*#__PURE__*/createFlowAnnotation(\"flow\");\nvar flowBoundAnnotation = /*#__PURE__*/createFlowAnnotation(\"flow.bound\", {\n  bound: true\n});\nvar flow = /*#__PURE__*/Object.assign(function flow(arg1, arg2) {\n  // @flow\n  if (isStringish(arg2)) {\n    return storeAnnotation(arg1, arg2, flowAnnotation);\n  }\n  // flow(fn)\n  if (process.env.NODE_ENV !== \"production\" && arguments.length !== 1) {\n    die(\"Flow expects single argument with generator function\");\n  }\n  var generator = arg1;\n  var name = generator.name || \"<unnamed flow>\";\n  // Implementation based on https://github.com/tj/co/blob/master/index.js\n  var res = function res() {\n    var ctx = this;\n    var args = arguments;\n    var runId = ++generatorId;\n    var gen = action(name + \" - runid: \" + runId + \" - init\", generator).apply(ctx, args);\n    var rejector;\n    var pendingPromise = undefined;\n    var promise = new Promise(function (resolve, reject) {\n      var stepId = 0;\n      rejector = reject;\n      function onFulfilled(res) {\n        pendingPromise = undefined;\n        var ret;\n        try {\n          ret = action(name + \" - runid: \" + runId + \" - yield \" + stepId++, gen.next).call(gen, res);\n        } catch (e) {\n          return reject(e);\n        }\n        next(ret);\n      }\n      function onRejected(err) {\n        pendingPromise = undefined;\n        var ret;\n        try {\n          ret = action(name + \" - runid: \" + runId + \" - yield \" + stepId++, gen[\"throw\"]).call(gen, err);\n        } catch (e) {\n          return reject(e);\n        }\n        next(ret);\n      }\n      function next(ret) {\n        if (isFunction(ret == null ? void 0 : ret.then)) {\n          // an async iterator\n          ret.then(next, reject);\n          return;\n        }\n        if (ret.done) {\n          return resolve(ret.value);\n        }\n        pendingPromise = Promise.resolve(ret.value);\n        return pendingPromise.then(onFulfilled, onRejected);\n      }\n      onFulfilled(undefined); // kick off the process\n    });\n\n    promise.cancel = action(name + \" - runid: \" + runId + \" - cancel\", function () {\n      try {\n        if (pendingPromise) {\n          cancelPromise(pendingPromise);\n        }\n        // Finally block can return (or yield) stuff..\n        var _res = gen[\"return\"](undefined);\n        // eat anything that promise would do, it's cancelled!\n        var yieldedPromise = Promise.resolve(_res.value);\n        yieldedPromise.then(noop, noop);\n        cancelPromise(yieldedPromise); // maybe it can be cancelled :)\n        // reject our original promise\n        rejector(new FlowCancellationError());\n      } catch (e) {\n        rejector(e); // there could be a throwing finally block\n      }\n    });\n\n    return promise;\n  };\n  res.isMobXFlow = true;\n  return res;\n}, flowAnnotation);\nflow.bound = /*#__PURE__*/createDecoratorAnnotation(flowBoundAnnotation);\nfunction cancelPromise(promise) {\n  if (isFunction(promise.cancel)) {\n    promise.cancel();\n  }\n}\nfunction flowResult(result) {\n  return result; // just tricking TypeScript :)\n}\n\nfunction isFlow(fn) {\n  return (fn == null ? void 0 : fn.isMobXFlow) === true;\n}\n\nfunction interceptReads(thing, propOrHandler, handler) {\n  var target;\n  if (isObservableMap(thing) || isObservableArray(thing) || isObservableValue(thing)) {\n    target = getAdministration(thing);\n  } else if (isObservableObject(thing)) {\n    if (process.env.NODE_ENV !== \"production\" && !isStringish(propOrHandler)) {\n      return die(\"InterceptReads can only be used with a specific property, not with an object in general\");\n    }\n    target = getAdministration(thing, propOrHandler);\n  } else if (process.env.NODE_ENV !== \"production\") {\n    return die(\"Expected observable map, object or array as first array\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && target.dehancer !== undefined) {\n    return die(\"An intercept reader was already established\");\n  }\n  target.dehancer = typeof propOrHandler === \"function\" ? propOrHandler : handler;\n  return function () {\n    target.dehancer = undefined;\n  };\n}\n\nfunction intercept(thing, propOrHandler, handler) {\n  if (isFunction(handler)) {\n    return interceptProperty(thing, propOrHandler, handler);\n  } else {\n    return interceptInterceptable(thing, propOrHandler);\n  }\n}\nfunction interceptInterceptable(thing, handler) {\n  return getAdministration(thing).intercept_(handler);\n}\nfunction interceptProperty(thing, property, handler) {\n  return getAdministration(thing, property).intercept_(handler);\n}\n\nfunction _isComputed(value, property) {\n  if (property === undefined) {\n    return isComputedValue(value);\n  }\n  if (isObservableObject(value) === false) {\n    return false;\n  }\n  if (!value[$mobx].values_.has(property)) {\n    return false;\n  }\n  var atom = getAtom(value, property);\n  return isComputedValue(atom);\n}\nfunction isComputed(value) {\n  if (process.env.NODE_ENV !== \"production\" && arguments.length > 1) {\n    return die(\"isComputed expects only 1 argument. Use isComputedProp to inspect the observability of a property\");\n  }\n  return _isComputed(value);\n}\nfunction isComputedProp(value, propName) {\n  if (process.env.NODE_ENV !== \"production\" && !isStringish(propName)) {\n    return die(\"isComputed expected a property name as second argument\");\n  }\n  return _isComputed(value, propName);\n}\n\nfunction _isObservable(value, property) {\n  if (!value) {\n    return false;\n  }\n  if (property !== undefined) {\n    if (process.env.NODE_ENV !== \"production\" && (isObservableMap(value) || isObservableArray(value))) {\n      return die(\"isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.\");\n    }\n    if (isObservableObject(value)) {\n      return value[$mobx].values_.has(property);\n    }\n    return false;\n  }\n  // For first check, see #701\n  return isObservableObject(value) || !!value[$mobx] || isAtom(value) || isReaction(value) || isComputedValue(value);\n}\nfunction isObservable(value) {\n  if (process.env.NODE_ENV !== \"production\" && arguments.length !== 1) {\n    die(\"isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property\");\n  }\n  return _isObservable(value);\n}\nfunction isObservableProp(value, propName) {\n  if (process.env.NODE_ENV !== \"production\" && !isStringish(propName)) {\n    return die(\"expected a property name as second argument\");\n  }\n  return _isObservable(value, propName);\n}\n\nfunction keys(obj) {\n  if (isObservableObject(obj)) {\n    return obj[$mobx].keys_();\n  }\n  if (isObservableMap(obj) || isObservableSet(obj)) {\n    return Array.from(obj.keys());\n  }\n  if (isObservableArray(obj)) {\n    return obj.map(function (_, index) {\n      return index;\n    });\n  }\n  die(5);\n}\nfunction values(obj) {\n  if (isObservableObject(obj)) {\n    return keys(obj).map(function (key) {\n      return obj[key];\n    });\n  }\n  if (isObservableMap(obj)) {\n    return keys(obj).map(function (key) {\n      return obj.get(key);\n    });\n  }\n  if (isObservableSet(obj)) {\n    return Array.from(obj.values());\n  }\n  if (isObservableArray(obj)) {\n    return obj.slice();\n  }\n  die(6);\n}\nfunction entries(obj) {\n  if (isObservableObject(obj)) {\n    return keys(obj).map(function (key) {\n      return [key, obj[key]];\n    });\n  }\n  if (isObservableMap(obj)) {\n    return keys(obj).map(function (key) {\n      return [key, obj.get(key)];\n    });\n  }\n  if (isObservableSet(obj)) {\n    return Array.from(obj.entries());\n  }\n  if (isObservableArray(obj)) {\n    return obj.map(function (key, index) {\n      return [index, key];\n    });\n  }\n  die(7);\n}\nfunction set(obj, key, value) {\n  if (arguments.length === 2 && !isObservableSet(obj)) {\n    startBatch();\n    var _values = key;\n    try {\n      for (var _key in _values) {\n        set(obj, _key, _values[_key]);\n      }\n    } finally {\n      endBatch();\n    }\n    return;\n  }\n  if (isObservableObject(obj)) {\n    obj[$mobx].set_(key, value);\n  } else if (isObservableMap(obj)) {\n    obj.set(key, value);\n  } else if (isObservableSet(obj)) {\n    obj.add(key);\n  } else if (isObservableArray(obj)) {\n    if (typeof key !== \"number\") {\n      key = parseInt(key, 10);\n    }\n    if (key < 0) {\n      die(\"Invalid index: '\" + key + \"'\");\n    }\n    startBatch();\n    if (key >= obj.length) {\n      obj.length = key + 1;\n    }\n    obj[key] = value;\n    endBatch();\n  } else {\n    die(8);\n  }\n}\nfunction remove(obj, key) {\n  if (isObservableObject(obj)) {\n    obj[$mobx].delete_(key);\n  } else if (isObservableMap(obj)) {\n    obj[\"delete\"](key);\n  } else if (isObservableSet(obj)) {\n    obj[\"delete\"](key);\n  } else if (isObservableArray(obj)) {\n    if (typeof key !== \"number\") {\n      key = parseInt(key, 10);\n    }\n    obj.splice(key, 1);\n  } else {\n    die(9);\n  }\n}\nfunction has(obj, key) {\n  if (isObservableObject(obj)) {\n    return obj[$mobx].has_(key);\n  } else if (isObservableMap(obj)) {\n    return obj.has(key);\n  } else if (isObservableSet(obj)) {\n    return obj.has(key);\n  } else if (isObservableArray(obj)) {\n    return key >= 0 && key < obj.length;\n  }\n  die(10);\n}\nfunction get(obj, key) {\n  if (!has(obj, key)) {\n    return undefined;\n  }\n  if (isObservableObject(obj)) {\n    return obj[$mobx].get_(key);\n  } else if (isObservableMap(obj)) {\n    return obj.get(key);\n  } else if (isObservableArray(obj)) {\n    return obj[key];\n  }\n  die(11);\n}\nfunction apiDefineProperty(obj, key, descriptor) {\n  if (isObservableObject(obj)) {\n    return obj[$mobx].defineProperty_(key, descriptor);\n  }\n  die(39);\n}\nfunction apiOwnKeys(obj) {\n  if (isObservableObject(obj)) {\n    return obj[$mobx].ownKeys_();\n  }\n  die(38);\n}\n\nfunction observe(thing, propOrCb, cbOrFire, fireImmediately) {\n  if (isFunction(cbOrFire)) {\n    return observeObservableProperty(thing, propOrCb, cbOrFire, fireImmediately);\n  } else {\n    return observeObservable(thing, propOrCb, cbOrFire);\n  }\n}\nfunction observeObservable(thing, listener, fireImmediately) {\n  return getAdministration(thing).observe_(listener, fireImmediately);\n}\nfunction observeObservableProperty(thing, property, listener, fireImmediately) {\n  return getAdministration(thing, property).observe_(listener, fireImmediately);\n}\n\nfunction cache(map, key, value) {\n  map.set(key, value);\n  return value;\n}\nfunction toJSHelper(source, __alreadySeen) {\n  if (source == null || typeof source !== \"object\" || source instanceof Date || !isObservable(source)) {\n    return source;\n  }\n  if (isObservableValue(source) || isComputedValue(source)) {\n    return toJSHelper(source.get(), __alreadySeen);\n  }\n  if (__alreadySeen.has(source)) {\n    return __alreadySeen.get(source);\n  }\n  if (isObservableArray(source)) {\n    var res = cache(__alreadySeen, source, new Array(source.length));\n    source.forEach(function (value, idx) {\n      res[idx] = toJSHelper(value, __alreadySeen);\n    });\n    return res;\n  }\n  if (isObservableSet(source)) {\n    var _res = cache(__alreadySeen, source, new Set());\n    source.forEach(function (value) {\n      _res.add(toJSHelper(value, __alreadySeen));\n    });\n    return _res;\n  }\n  if (isObservableMap(source)) {\n    var _res2 = cache(__alreadySeen, source, new Map());\n    source.forEach(function (value, key) {\n      _res2.set(key, toJSHelper(value, __alreadySeen));\n    });\n    return _res2;\n  } else {\n    // must be observable object\n    var _res3 = cache(__alreadySeen, source, {});\n    apiOwnKeys(source).forEach(function (key) {\n      if (objectPrototype.propertyIsEnumerable.call(source, key)) {\n        _res3[key] = toJSHelper(source[key], __alreadySeen);\n      }\n    });\n    return _res3;\n  }\n}\n/**\r\n * Recursively converts an observable to it's non-observable native counterpart.\r\n * It does NOT recurse into non-observables, these are left as they are, even if they contain observables.\r\n * Computed and other non-enumerable properties are completely ignored.\r\n * Complex scenarios require custom solution, eg implementing `toJSON` or using `serializr` lib.\r\n */\nfunction toJS(source, options) {\n  if (process.env.NODE_ENV !== \"production\" && options) {\n    die(\"toJS no longer supports options\");\n  }\n  return toJSHelper(source, new Map());\n}\n\nfunction trace() {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    die(\"trace() is not available in production builds\");\n  }\n  var enterBreakPoint = false;\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (typeof args[args.length - 1] === \"boolean\") {\n    enterBreakPoint = args.pop();\n  }\n  var derivation = getAtomFromArgs(args);\n  if (!derivation) {\n    return die(\"'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly\");\n  }\n  if (derivation.isTracing_ === TraceMode.NONE) {\n    console.log(\"[mobx.trace] '\" + derivation.name_ + \"' tracing enabled\");\n  }\n  derivation.isTracing_ = enterBreakPoint ? TraceMode.BREAK : TraceMode.LOG;\n}\nfunction getAtomFromArgs(args) {\n  switch (args.length) {\n    case 0:\n      return globalState.trackingDerivation;\n    case 1:\n      return getAtom(args[0]);\n    case 2:\n      return getAtom(args[0], args[1]);\n  }\n}\n\n/**\r\n * During a transaction no views are updated until the end of the transaction.\r\n * The transaction will be run synchronously nonetheless.\r\n *\r\n * @param action a function that updates some reactive state\r\n * @returns any value that was returned by the 'action' parameter.\r\n */\nfunction transaction(action, thisArg) {\n  if (thisArg === void 0) {\n    thisArg = undefined;\n  }\n  startBatch();\n  try {\n    return action.apply(thisArg);\n  } finally {\n    endBatch();\n  }\n}\n\nfunction when(predicate, arg1, arg2) {\n  if (arguments.length === 1 || arg1 && typeof arg1 === \"object\") {\n    return whenPromise(predicate, arg1);\n  }\n  return _when(predicate, arg1, arg2 || {});\n}\nfunction _when(predicate, effect, opts) {\n  var timeoutHandle;\n  if (typeof opts.timeout === \"number\") {\n    var error = new Error(\"WHEN_TIMEOUT\");\n    timeoutHandle = setTimeout(function () {\n      if (!disposer[$mobx].isDisposed_) {\n        disposer();\n        if (opts.onError) {\n          opts.onError(error);\n        } else {\n          throw error;\n        }\n      }\n    }, opts.timeout);\n  }\n  opts.name = process.env.NODE_ENV !== \"production\" ? opts.name || \"When@\" + getNextId() : \"When\";\n  var effectAction = createAction(process.env.NODE_ENV !== \"production\" ? opts.name + \"-effect\" : \"When-effect\", effect);\n  // eslint-disable-next-line\n  var disposer = autorun(function (r) {\n    // predicate should not change state\n    var cond = allowStateChanges(false, predicate);\n    if (cond) {\n      r.dispose();\n      if (timeoutHandle) {\n        clearTimeout(timeoutHandle);\n      }\n      effectAction();\n    }\n  }, opts);\n  return disposer;\n}\nfunction whenPromise(predicate, opts) {\n  var _opts$signal;\n  if (process.env.NODE_ENV !== \"production\" && opts && opts.onError) {\n    return die(\"the options 'onError' and 'promise' cannot be combined\");\n  }\n  if (opts != null && (_opts$signal = opts.signal) != null && _opts$signal.aborted) {\n    return Object.assign(Promise.reject(new Error(\"WHEN_ABORTED\")), {\n      cancel: function cancel() {\n        return null;\n      }\n    });\n  }\n  var cancel;\n  var abort;\n  var res = new Promise(function (resolve, reject) {\n    var _opts$signal2;\n    var disposer = _when(predicate, resolve, _extends({}, opts, {\n      onError: reject\n    }));\n    cancel = function cancel() {\n      disposer();\n      reject(new Error(\"WHEN_CANCELLED\"));\n    };\n    abort = function abort() {\n      disposer();\n      reject(new Error(\"WHEN_ABORTED\"));\n    };\n    opts == null ? void 0 : (_opts$signal2 = opts.signal) == null ? void 0 : _opts$signal2.addEventListener == null ? void 0 : _opts$signal2.addEventListener(\"abort\", abort);\n  })[\"finally\"](function () {\n    var _opts$signal3;\n    return opts == null ? void 0 : (_opts$signal3 = opts.signal) == null ? void 0 : _opts$signal3.removeEventListener == null ? void 0 : _opts$signal3.removeEventListener(\"abort\", abort);\n  });\n  res.cancel = cancel;\n  return res;\n}\n\nfunction getAdm(target) {\n  return target[$mobx];\n}\n// Optimization: we don't need the intermediate objects and could have a completely custom administration for DynamicObjects,\n// and skip either the internal values map, or the base object with its property descriptors!\nvar objectProxyTraps = {\n  has: function has(target, name) {\n    if (process.env.NODE_ENV !== \"production\" && globalState.trackingDerivation) {\n      warnAboutProxyRequirement(\"detect new properties using the 'in' operator. Use 'has' from 'mobx' instead.\");\n    }\n    return getAdm(target).has_(name);\n  },\n  get: function get(target, name) {\n    return getAdm(target).get_(name);\n  },\n  set: function set(target, name, value) {\n    var _getAdm$set_;\n    if (!isStringish(name)) {\n      return false;\n    }\n    if (process.env.NODE_ENV !== \"production\" && !getAdm(target).values_.has(name)) {\n      warnAboutProxyRequirement(\"add a new observable property through direct assignment. Use 'set' from 'mobx' instead.\");\n    }\n    // null (intercepted) -> true (success)\n    return (_getAdm$set_ = getAdm(target).set_(name, value, true)) != null ? _getAdm$set_ : true;\n  },\n  deleteProperty: function deleteProperty(target, name) {\n    var _getAdm$delete_;\n    if (process.env.NODE_ENV !== \"production\") {\n      warnAboutProxyRequirement(\"delete properties from an observable object. Use 'remove' from 'mobx' instead.\");\n    }\n    if (!isStringish(name)) {\n      return false;\n    }\n    // null (intercepted) -> true (success)\n    return (_getAdm$delete_ = getAdm(target).delete_(name, true)) != null ? _getAdm$delete_ : true;\n  },\n  defineProperty: function defineProperty(target, name, descriptor) {\n    var _getAdm$definePropert;\n    if (process.env.NODE_ENV !== \"production\") {\n      warnAboutProxyRequirement(\"define property on an observable object. Use 'defineProperty' from 'mobx' instead.\");\n    }\n    // null (intercepted) -> true (success)\n    return (_getAdm$definePropert = getAdm(target).defineProperty_(name, descriptor)) != null ? _getAdm$definePropert : true;\n  },\n  ownKeys: function ownKeys(target) {\n    if (process.env.NODE_ENV !== \"production\" && globalState.trackingDerivation) {\n      warnAboutProxyRequirement(\"iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead.\");\n    }\n    return getAdm(target).ownKeys_();\n  },\n  preventExtensions: function preventExtensions(target) {\n    die(13);\n  }\n};\nfunction asDynamicObservableObject(target, options) {\n  var _target$$mobx, _target$$mobx$proxy_;\n  assertProxies();\n  target = asObservableObject(target, options);\n  return (_target$$mobx$proxy_ = (_target$$mobx = target[$mobx]).proxy_) != null ? _target$$mobx$proxy_ : _target$$mobx.proxy_ = new Proxy(target, objectProxyTraps);\n}\n\nfunction hasInterceptors(interceptable) {\n  return interceptable.interceptors_ !== undefined && interceptable.interceptors_.length > 0;\n}\nfunction registerInterceptor(interceptable, handler) {\n  var interceptors = interceptable.interceptors_ || (interceptable.interceptors_ = []);\n  interceptors.push(handler);\n  return once(function () {\n    var idx = interceptors.indexOf(handler);\n    if (idx !== -1) {\n      interceptors.splice(idx, 1);\n    }\n  });\n}\nfunction interceptChange(interceptable, change) {\n  var prevU = untrackedStart();\n  try {\n    // Interceptor can modify the array, copy it to avoid concurrent modification, see #1950\n    var interceptors = [].concat(interceptable.interceptors_ || []);\n    for (var i = 0, l = interceptors.length; i < l; i++) {\n      change = interceptors[i](change);\n      if (change && !change.type) {\n        die(14);\n      }\n      if (!change) {\n        break;\n      }\n    }\n    return change;\n  } finally {\n    untrackedEnd(prevU);\n  }\n}\n\nfunction hasListeners(listenable) {\n  return listenable.changeListeners_ !== undefined && listenable.changeListeners_.length > 0;\n}\nfunction registerListener(listenable, handler) {\n  var listeners = listenable.changeListeners_ || (listenable.changeListeners_ = []);\n  listeners.push(handler);\n  return once(function () {\n    var idx = listeners.indexOf(handler);\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    }\n  });\n}\nfunction notifyListeners(listenable, change) {\n  var prevU = untrackedStart();\n  var listeners = listenable.changeListeners_;\n  if (!listeners) {\n    return;\n  }\n  listeners = listeners.slice();\n  for (var i = 0, l = listeners.length; i < l; i++) {\n    listeners[i](change);\n  }\n  untrackedEnd(prevU);\n}\n\nfunction makeObservable(target, annotations, options) {\n  var adm = asObservableObject(target, options)[$mobx];\n  startBatch();\n  try {\n    var _annotations;\n    if (process.env.NODE_ENV !== \"production\" && annotations && target[storedAnnotationsSymbol]) {\n      die(\"makeObservable second arg must be nullish when using decorators. Mixing @decorator syntax with annotations is not supported.\");\n    }\n    // Default to decorators\n    (_annotations = annotations) != null ? _annotations : annotations = collectStoredAnnotations(target);\n    // Annotate\n    ownKeys(annotations).forEach(function (key) {\n      return adm.make_(key, annotations[key]);\n    });\n  } finally {\n    endBatch();\n  }\n  return target;\n}\n// proto[keysSymbol] = new Set<PropertyKey>()\nvar keysSymbol = /*#__PURE__*/Symbol(\"mobx-keys\");\nfunction makeAutoObservable(target, overrides, options) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isPlainObject(target) && !isPlainObject(Object.getPrototypeOf(target))) {\n      die(\"'makeAutoObservable' can only be used for classes that don't have a superclass\");\n    }\n    if (isObservableObject(target)) {\n      die(\"makeAutoObservable can only be used on objects not already made observable\");\n    }\n  }\n  // Optimization: avoid visiting protos\n  // Assumes that annotation.make_/.extend_ works the same for plain objects\n  if (isPlainObject(target)) {\n    return extendObservable(target, target, overrides, options);\n  }\n  var adm = asObservableObject(target, options)[$mobx];\n  // Optimization: cache keys on proto\n  // Assumes makeAutoObservable can be called only once per object and can't be used in subclass\n  if (!target[keysSymbol]) {\n    var proto = Object.getPrototypeOf(target);\n    var keys = new Set([].concat(ownKeys(target), ownKeys(proto)));\n    keys[\"delete\"](\"constructor\");\n    keys[\"delete\"]($mobx);\n    addHiddenProp(proto, keysSymbol, keys);\n  }\n  startBatch();\n  try {\n    target[keysSymbol].forEach(function (key) {\n      return adm.make_(key,\n      // must pass \"undefined\" for { key: undefined }\n      !overrides ? true : key in overrides ? overrides[key] : true);\n    });\n  } finally {\n    endBatch();\n  }\n  return target;\n}\n\nvar SPLICE = \"splice\";\nvar UPDATE = \"update\";\nvar MAX_SPLICE_SIZE = 10000; // See e.g. https://github.com/mobxjs/mobx/issues/859\nvar arrayTraps = {\n  get: function get(target, name) {\n    var adm = target[$mobx];\n    if (name === $mobx) {\n      return adm;\n    }\n    if (name === \"length\") {\n      return adm.getArrayLength_();\n    }\n    if (typeof name === \"string\" && !isNaN(name)) {\n      return adm.get_(parseInt(name));\n    }\n    if (hasProp(arrayExtensions, name)) {\n      return arrayExtensions[name];\n    }\n    return target[name];\n  },\n  set: function set(target, name, value) {\n    var adm = target[$mobx];\n    if (name === \"length\") {\n      adm.setArrayLength_(value);\n    }\n    if (typeof name === \"symbol\" || isNaN(name)) {\n      target[name] = value;\n    } else {\n      // numeric string\n      adm.set_(parseInt(name), value);\n    }\n    return true;\n  },\n  preventExtensions: function preventExtensions() {\n    die(15);\n  }\n};\nvar ObservableArrayAdministration = /*#__PURE__*/function () {\n  // this is the prop that gets proxied, so can't replace it!\n\n  function ObservableArrayAdministration(name, enhancer, owned_, legacyMode_) {\n    if (name === void 0) {\n      name = process.env.NODE_ENV !== \"production\" ? \"ObservableArray@\" + getNextId() : \"ObservableArray\";\n    }\n    this.owned_ = void 0;\n    this.legacyMode_ = void 0;\n    this.atom_ = void 0;\n    this.values_ = [];\n    this.interceptors_ = void 0;\n    this.changeListeners_ = void 0;\n    this.enhancer_ = void 0;\n    this.dehancer = void 0;\n    this.proxy_ = void 0;\n    this.lastKnownLength_ = 0;\n    this.owned_ = owned_;\n    this.legacyMode_ = legacyMode_;\n    this.atom_ = new Atom(name);\n    this.enhancer_ = function (newV, oldV) {\n      return enhancer(newV, oldV, process.env.NODE_ENV !== \"production\" ? name + \"[..]\" : \"ObservableArray[..]\");\n    };\n  }\n  var _proto = ObservableArrayAdministration.prototype;\n  _proto.dehanceValue_ = function dehanceValue_(value) {\n    if (this.dehancer !== undefined) {\n      return this.dehancer(value);\n    }\n    return value;\n  };\n  _proto.dehanceValues_ = function dehanceValues_(values) {\n    if (this.dehancer !== undefined && values.length > 0) {\n      return values.map(this.dehancer);\n    }\n    return values;\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    if (fireImmediately === void 0) {\n      fireImmediately = false;\n    }\n    if (fireImmediately) {\n      listener({\n        observableKind: \"array\",\n        object: this.proxy_,\n        debugObjectName: this.atom_.name_,\n        type: \"splice\",\n        index: 0,\n        added: this.values_.slice(),\n        addedCount: this.values_.length,\n        removed: [],\n        removedCount: 0\n      });\n    }\n    return registerListener(this, listener);\n  };\n  _proto.getArrayLength_ = function getArrayLength_() {\n    this.atom_.reportObserved();\n    return this.values_.length;\n  };\n  _proto.setArrayLength_ = function setArrayLength_(newLength) {\n    if (typeof newLength !== \"number\" || isNaN(newLength) || newLength < 0) {\n      die(\"Out of range: \" + newLength);\n    }\n    var currentLength = this.values_.length;\n    if (newLength === currentLength) {\n      return;\n    } else if (newLength > currentLength) {\n      var newItems = new Array(newLength - currentLength);\n      for (var i = 0; i < newLength - currentLength; i++) {\n        newItems[i] = undefined;\n      } // No Array.fill everywhere...\n      this.spliceWithArray_(currentLength, 0, newItems);\n    } else {\n      this.spliceWithArray_(newLength, currentLength - newLength);\n    }\n  };\n  _proto.updateArrayLength_ = function updateArrayLength_(oldLength, delta) {\n    if (oldLength !== this.lastKnownLength_) {\n      die(16);\n    }\n    this.lastKnownLength_ += delta;\n    if (this.legacyMode_ && delta > 0) {\n      reserveArrayBuffer(oldLength + delta + 1);\n    }\n  };\n  _proto.spliceWithArray_ = function spliceWithArray_(index, deleteCount, newItems) {\n    var _this = this;\n    checkIfStateModificationsAreAllowed(this.atom_);\n    var length = this.values_.length;\n    if (index === undefined) {\n      index = 0;\n    } else if (index > length) {\n      index = length;\n    } else if (index < 0) {\n      index = Math.max(0, length + index);\n    }\n    if (arguments.length === 1) {\n      deleteCount = length - index;\n    } else if (deleteCount === undefined || deleteCount === null) {\n      deleteCount = 0;\n    } else {\n      deleteCount = Math.max(0, Math.min(deleteCount, length - index));\n    }\n    if (newItems === undefined) {\n      newItems = EMPTY_ARRAY;\n    }\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        object: this.proxy_,\n        type: SPLICE,\n        index: index,\n        removedCount: deleteCount,\n        added: newItems\n      });\n      if (!change) {\n        return EMPTY_ARRAY;\n      }\n      deleteCount = change.removedCount;\n      newItems = change.added;\n    }\n    newItems = newItems.length === 0 ? newItems : newItems.map(function (v) {\n      return _this.enhancer_(v, undefined);\n    });\n    if (this.legacyMode_ || process.env.NODE_ENV !== \"production\") {\n      var lengthDelta = newItems.length - deleteCount;\n      this.updateArrayLength_(length, lengthDelta); // checks if internal array wasn't modified\n    }\n\n    var res = this.spliceItemsIntoValues_(index, deleteCount, newItems);\n    if (deleteCount !== 0 || newItems.length !== 0) {\n      this.notifyArraySplice_(index, newItems, res);\n    }\n    return this.dehanceValues_(res);\n  };\n  _proto.spliceItemsIntoValues_ = function spliceItemsIntoValues_(index, deleteCount, newItems) {\n    if (newItems.length < MAX_SPLICE_SIZE) {\n      var _this$values_;\n      return (_this$values_ = this.values_).splice.apply(_this$values_, [index, deleteCount].concat(newItems));\n    } else {\n      // The items removed by the splice\n      var res = this.values_.slice(index, index + deleteCount);\n      // The items that that should remain at the end of the array\n      var oldItems = this.values_.slice(index + deleteCount);\n      // New length is the previous length + addition count - deletion count\n      this.values_.length += newItems.length - deleteCount;\n      for (var i = 0; i < newItems.length; i++) {\n        this.values_[index + i] = newItems[i];\n      }\n      for (var _i = 0; _i < oldItems.length; _i++) {\n        this.values_[index + newItems.length + _i] = oldItems[_i];\n      }\n      return res;\n    }\n  };\n  _proto.notifyArrayChildUpdate_ = function notifyArrayChildUpdate_(index, newValue, oldValue) {\n    var notifySpy = !this.owned_ && isSpyEnabled();\n    var notify = hasListeners(this);\n    var change = notify || notifySpy ? {\n      observableKind: \"array\",\n      object: this.proxy_,\n      type: UPDATE,\n      debugObjectName: this.atom_.name_,\n      index: index,\n      newValue: newValue,\n      oldValue: oldValue\n    } : null;\n    // The reason why this is on right hand side here (and not above), is this way the uglifier will drop it, but it won't\n    // cause any runtime overhead in development mode without NODE_ENV set, unless spying is enabled\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportStart(change);\n    }\n    this.atom_.reportChanged();\n    if (notify) {\n      notifyListeners(this, change);\n    }\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportEnd();\n    }\n  };\n  _proto.notifyArraySplice_ = function notifyArraySplice_(index, added, removed) {\n    var notifySpy = !this.owned_ && isSpyEnabled();\n    var notify = hasListeners(this);\n    var change = notify || notifySpy ? {\n      observableKind: \"array\",\n      object: this.proxy_,\n      debugObjectName: this.atom_.name_,\n      type: SPLICE,\n      index: index,\n      removed: removed,\n      added: added,\n      removedCount: removed.length,\n      addedCount: added.length\n    } : null;\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportStart(change);\n    }\n    this.atom_.reportChanged();\n    // conform: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/observe\n    if (notify) {\n      notifyListeners(this, change);\n    }\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportEnd();\n    }\n  };\n  _proto.get_ = function get_(index) {\n    if (this.legacyMode_ && index >= this.values_.length) {\n      console.warn(process.env.NODE_ENV !== \"production\" ? \"[mobx.array] Attempt to read an array index (\" + index + \") that is out of bounds (\" + this.values_.length + \"). Please check length first. Out of bound indices will not be tracked by MobX\" : \"[mobx] Out of bounds read: \" + index);\n      return undefined;\n    }\n    this.atom_.reportObserved();\n    return this.dehanceValue_(this.values_[index]);\n  };\n  _proto.set_ = function set_(index, newValue) {\n    var values = this.values_;\n    if (this.legacyMode_ && index > values.length) {\n      // out of bounds\n      die(17, index, values.length);\n    }\n    if (index < values.length) {\n      // update at index in range\n      checkIfStateModificationsAreAllowed(this.atom_);\n      var oldValue = values[index];\n      if (hasInterceptors(this)) {\n        var change = interceptChange(this, {\n          type: UPDATE,\n          object: this.proxy_,\n          index: index,\n          newValue: newValue\n        });\n        if (!change) {\n          return;\n        }\n        newValue = change.newValue;\n      }\n      newValue = this.enhancer_(newValue, oldValue);\n      var changed = newValue !== oldValue;\n      if (changed) {\n        values[index] = newValue;\n        this.notifyArrayChildUpdate_(index, newValue, oldValue);\n      }\n    } else {\n      // For out of bound index, we don't create an actual sparse array,\n      // but rather fill the holes with undefined (same as setArrayLength_).\n      // This could be considered a bug.\n      var newItems = new Array(index + 1 - values.length);\n      for (var i = 0; i < newItems.length - 1; i++) {\n        newItems[i] = undefined;\n      } // No Array.fill everywhere...\n      newItems[newItems.length - 1] = newValue;\n      this.spliceWithArray_(values.length, 0, newItems);\n    }\n  };\n  return ObservableArrayAdministration;\n}();\nfunction createObservableArray(initialValues, enhancer, name, owned) {\n  if (name === void 0) {\n    name = process.env.NODE_ENV !== \"production\" ? \"ObservableArray@\" + getNextId() : \"ObservableArray\";\n  }\n  if (owned === void 0) {\n    owned = false;\n  }\n  assertProxies();\n  var adm = new ObservableArrayAdministration(name, enhancer, owned, false);\n  addHiddenFinalProp(adm.values_, $mobx, adm);\n  var proxy = new Proxy(adm.values_, arrayTraps);\n  adm.proxy_ = proxy;\n  if (initialValues && initialValues.length) {\n    var prev = allowStateChangesStart(true);\n    adm.spliceWithArray_(0, 0, initialValues);\n    allowStateChangesEnd(prev);\n  }\n  return proxy;\n}\n// eslint-disable-next-line\nvar arrayExtensions = {\n  clear: function clear() {\n    return this.splice(0);\n  },\n  replace: function replace(newItems) {\n    var adm = this[$mobx];\n    return adm.spliceWithArray_(0, adm.values_.length, newItems);\n  },\n  // Used by JSON.stringify\n  toJSON: function toJSON() {\n    return this.slice();\n  },\n  /*\r\n   * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)\r\n   * since these functions alter the inner structure of the array, the have side effects.\r\n   * Because the have side effects, they should not be used in computed function,\r\n   * and for that reason the do not call dependencyState.notifyObserved\r\n   */\n  splice: function splice(index, deleteCount) {\n    for (var _len = arguments.length, newItems = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      newItems[_key - 2] = arguments[_key];\n    }\n    var adm = this[$mobx];\n    switch (arguments.length) {\n      case 0:\n        return [];\n      case 1:\n        return adm.spliceWithArray_(index);\n      case 2:\n        return adm.spliceWithArray_(index, deleteCount);\n    }\n    return adm.spliceWithArray_(index, deleteCount, newItems);\n  },\n  spliceWithArray: function spliceWithArray(index, deleteCount, newItems) {\n    return this[$mobx].spliceWithArray_(index, deleteCount, newItems);\n  },\n  push: function push() {\n    var adm = this[$mobx];\n    for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      items[_key2] = arguments[_key2];\n    }\n    adm.spliceWithArray_(adm.values_.length, 0, items);\n    return adm.values_.length;\n  },\n  pop: function pop() {\n    return this.splice(Math.max(this[$mobx].values_.length - 1, 0), 1)[0];\n  },\n  shift: function shift() {\n    return this.splice(0, 1)[0];\n  },\n  unshift: function unshift() {\n    var adm = this[$mobx];\n    for (var _len3 = arguments.length, items = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      items[_key3] = arguments[_key3];\n    }\n    adm.spliceWithArray_(0, 0, items);\n    return adm.values_.length;\n  },\n  reverse: function reverse() {\n    // reverse by default mutates in place before returning the result\n    // which makes it both a 'derivation' and a 'mutation'.\n    if (globalState.trackingDerivation) {\n      die(37, \"reverse\");\n    }\n    this.replace(this.slice().reverse());\n    return this;\n  },\n  sort: function sort() {\n    // sort by default mutates in place before returning the result\n    // which goes against all good practices. Let's not change the array in place!\n    if (globalState.trackingDerivation) {\n      die(37, \"sort\");\n    }\n    var copy = this.slice();\n    copy.sort.apply(copy, arguments);\n    this.replace(copy);\n    return this;\n  },\n  remove: function remove(value) {\n    var adm = this[$mobx];\n    var idx = adm.dehanceValues_(adm.values_).indexOf(value);\n    if (idx > -1) {\n      this.splice(idx, 1);\n      return true;\n    }\n    return false;\n  }\n};\n/**\r\n * Wrap function from prototype\r\n * Without this, everything works as well, but this works\r\n * faster as everything works on unproxied values\r\n */\naddArrayExtension(\"concat\", simpleFunc);\naddArrayExtension(\"flat\", simpleFunc);\naddArrayExtension(\"includes\", simpleFunc);\naddArrayExtension(\"indexOf\", simpleFunc);\naddArrayExtension(\"join\", simpleFunc);\naddArrayExtension(\"lastIndexOf\", simpleFunc);\naddArrayExtension(\"slice\", simpleFunc);\naddArrayExtension(\"toString\", simpleFunc);\naddArrayExtension(\"toLocaleString\", simpleFunc);\n// map\naddArrayExtension(\"every\", mapLikeFunc);\naddArrayExtension(\"filter\", mapLikeFunc);\naddArrayExtension(\"find\", mapLikeFunc);\naddArrayExtension(\"findIndex\", mapLikeFunc);\naddArrayExtension(\"flatMap\", mapLikeFunc);\naddArrayExtension(\"forEach\", mapLikeFunc);\naddArrayExtension(\"map\", mapLikeFunc);\naddArrayExtension(\"some\", mapLikeFunc);\n// reduce\naddArrayExtension(\"reduce\", reduceLikeFunc);\naddArrayExtension(\"reduceRight\", reduceLikeFunc);\nfunction addArrayExtension(funcName, funcFactory) {\n  if (typeof Array.prototype[funcName] === \"function\") {\n    arrayExtensions[funcName] = funcFactory(funcName);\n  }\n}\n// Report and delegate to dehanced array\nfunction simpleFunc(funcName) {\n  return function () {\n    var adm = this[$mobx];\n    adm.atom_.reportObserved();\n    var dehancedValues = adm.dehanceValues_(adm.values_);\n    return dehancedValues[funcName].apply(dehancedValues, arguments);\n  };\n}\n// Make sure callbacks recieve correct array arg #2326\nfunction mapLikeFunc(funcName) {\n  return function (callback, thisArg) {\n    var _this2 = this;\n    var adm = this[$mobx];\n    adm.atom_.reportObserved();\n    var dehancedValues = adm.dehanceValues_(adm.values_);\n    return dehancedValues[funcName](function (element, index) {\n      return callback.call(thisArg, element, index, _this2);\n    });\n  };\n}\n// Make sure callbacks recieve correct array arg #2326\nfunction reduceLikeFunc(funcName) {\n  return function () {\n    var _this3 = this;\n    var adm = this[$mobx];\n    adm.atom_.reportObserved();\n    var dehancedValues = adm.dehanceValues_(adm.values_);\n    // #2432 - reduce behavior depends on arguments.length\n    var callback = arguments[0];\n    arguments[0] = function (accumulator, currentValue, index) {\n      return callback(accumulator, currentValue, index, _this3);\n    };\n    return dehancedValues[funcName].apply(dehancedValues, arguments);\n  };\n}\nvar isObservableArrayAdministration = /*#__PURE__*/createInstanceofPredicate(\"ObservableArrayAdministration\", ObservableArrayAdministration);\nfunction isObservableArray(thing) {\n  return isObject(thing) && isObservableArrayAdministration(thing[$mobx]);\n}\n\nvar _Symbol$iterator, _Symbol$toStringTag;\nvar ObservableMapMarker = {};\nvar ADD = \"add\";\nvar DELETE = \"delete\";\n// just extend Map? See also https://gist.github.com/nestharus/13b4d74f2ef4a2f4357dbd3fc23c1e54\n// But: https://github.com/mobxjs/mobx/issues/1556\n_Symbol$iterator = Symbol.iterator;\n_Symbol$toStringTag = Symbol.toStringTag;\nvar ObservableMap = /*#__PURE__*/function () {\n  // hasMap, not hashMap >-).\n\n  function ObservableMap(initialData, enhancer_, name_) {\n    var _this = this;\n    if (enhancer_ === void 0) {\n      enhancer_ = deepEnhancer;\n    }\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"ObservableMap@\" + getNextId() : \"ObservableMap\";\n    }\n    this.enhancer_ = void 0;\n    this.name_ = void 0;\n    this[$mobx] = ObservableMapMarker;\n    this.data_ = void 0;\n    this.hasMap_ = void 0;\n    this.keysAtom_ = void 0;\n    this.interceptors_ = void 0;\n    this.changeListeners_ = void 0;\n    this.dehancer = void 0;\n    this.enhancer_ = enhancer_;\n    this.name_ = name_;\n    if (!isFunction(Map)) {\n      die(18);\n    }\n    this.keysAtom_ = createAtom(process.env.NODE_ENV !== \"production\" ? this.name_ + \".keys()\" : \"ObservableMap.keys()\");\n    this.data_ = new Map();\n    this.hasMap_ = new Map();\n    allowStateChanges(true, function () {\n      _this.merge(initialData);\n    });\n  }\n  var _proto = ObservableMap.prototype;\n  _proto.has_ = function has_(key) {\n    return this.data_.has(key);\n  };\n  _proto.has = function has(key) {\n    var _this2 = this;\n    if (!globalState.trackingDerivation) {\n      return this.has_(key);\n    }\n    var entry = this.hasMap_.get(key);\n    if (!entry) {\n      var newEntry = entry = new ObservableValue(this.has_(key), referenceEnhancer, process.env.NODE_ENV !== \"production\" ? this.name_ + \".\" + stringifyKey(key) + \"?\" : \"ObservableMap.key?\", false);\n      this.hasMap_.set(key, newEntry);\n      onBecomeUnobserved(newEntry, function () {\n        return _this2.hasMap_[\"delete\"](key);\n      });\n    }\n    return entry.get();\n  };\n  _proto.set = function set(key, value) {\n    var hasKey = this.has_(key);\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: hasKey ? UPDATE : ADD,\n        object: this,\n        newValue: value,\n        name: key\n      });\n      if (!change) {\n        return this;\n      }\n      value = change.newValue;\n    }\n    if (hasKey) {\n      this.updateValue_(key, value);\n    } else {\n      this.addValue_(key, value);\n    }\n    return this;\n  };\n  _proto[\"delete\"] = function _delete(key) {\n    var _this3 = this;\n    checkIfStateModificationsAreAllowed(this.keysAtom_);\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: DELETE,\n        object: this,\n        name: key\n      });\n      if (!change) {\n        return false;\n      }\n    }\n    if (this.has_(key)) {\n      var notifySpy = isSpyEnabled();\n      var notify = hasListeners(this);\n      var _change = notify || notifySpy ? {\n        observableKind: \"map\",\n        debugObjectName: this.name_,\n        type: DELETE,\n        object: this,\n        oldValue: this.data_.get(key).value_,\n        name: key\n      } : null;\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart(_change);\n      } // TODO fix type\n      transaction(function () {\n        var _this3$hasMap_$get;\n        _this3.keysAtom_.reportChanged();\n        (_this3$hasMap_$get = _this3.hasMap_.get(key)) == null ? void 0 : _this3$hasMap_$get.setNewValue_(false);\n        var observable = _this3.data_.get(key);\n        observable.setNewValue_(undefined);\n        _this3.data_[\"delete\"](key);\n      });\n      if (notify) {\n        notifyListeners(this, _change);\n      }\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n      return true;\n    }\n    return false;\n  };\n  _proto.updateValue_ = function updateValue_(key, newValue) {\n    var observable = this.data_.get(key);\n    newValue = observable.prepareNewValue_(newValue);\n    if (newValue !== globalState.UNCHANGED) {\n      var notifySpy = isSpyEnabled();\n      var notify = hasListeners(this);\n      var change = notify || notifySpy ? {\n        observableKind: \"map\",\n        debugObjectName: this.name_,\n        type: UPDATE,\n        object: this,\n        oldValue: observable.value_,\n        name: key,\n        newValue: newValue\n      } : null;\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart(change);\n      } // TODO fix type\n      observable.setNewValue_(newValue);\n      if (notify) {\n        notifyListeners(this, change);\n      }\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n    }\n  };\n  _proto.addValue_ = function addValue_(key, newValue) {\n    var _this4 = this;\n    checkIfStateModificationsAreAllowed(this.keysAtom_);\n    transaction(function () {\n      var _this4$hasMap_$get;\n      var observable = new ObservableValue(newValue, _this4.enhancer_, process.env.NODE_ENV !== \"production\" ? _this4.name_ + \".\" + stringifyKey(key) : \"ObservableMap.key\", false);\n      _this4.data_.set(key, observable);\n      newValue = observable.value_; // value might have been changed\n      (_this4$hasMap_$get = _this4.hasMap_.get(key)) == null ? void 0 : _this4$hasMap_$get.setNewValue_(true);\n      _this4.keysAtom_.reportChanged();\n    });\n    var notifySpy = isSpyEnabled();\n    var notify = hasListeners(this);\n    var change = notify || notifySpy ? {\n      observableKind: \"map\",\n      debugObjectName: this.name_,\n      type: ADD,\n      object: this,\n      name: key,\n      newValue: newValue\n    } : null;\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportStart(change);\n    } // TODO fix type\n    if (notify) {\n      notifyListeners(this, change);\n    }\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportEnd();\n    }\n  };\n  _proto.get = function get(key) {\n    if (this.has(key)) {\n      return this.dehanceValue_(this.data_.get(key).get());\n    }\n    return this.dehanceValue_(undefined);\n  };\n  _proto.dehanceValue_ = function dehanceValue_(value) {\n    if (this.dehancer !== undefined) {\n      return this.dehancer(value);\n    }\n    return value;\n  };\n  _proto.keys = function keys() {\n    this.keysAtom_.reportObserved();\n    return this.data_.keys();\n  };\n  _proto.values = function values() {\n    var self = this;\n    var keys = this.keys();\n    return makeIterable({\n      next: function next() {\n        var _keys$next = keys.next(),\n          done = _keys$next.done,\n          value = _keys$next.value;\n        return {\n          done: done,\n          value: done ? undefined : self.get(value)\n        };\n      }\n    });\n  };\n  _proto.entries = function entries() {\n    var self = this;\n    var keys = this.keys();\n    return makeIterable({\n      next: function next() {\n        var _keys$next2 = keys.next(),\n          done = _keys$next2.done,\n          value = _keys$next2.value;\n        return {\n          done: done,\n          value: done ? undefined : [value, self.get(value)]\n        };\n      }\n    });\n  };\n  _proto[_Symbol$iterator] = function () {\n    return this.entries();\n  };\n  _proto.forEach = function forEach(callback, thisArg) {\n    for (var _iterator = _createForOfIteratorHelperLoose(this), _step; !(_step = _iterator()).done;) {\n      var _step$value = _step.value,\n        key = _step$value[0],\n        value = _step$value[1];\n      callback.call(thisArg, value, key, this);\n    }\n  }\n  /** Merge another object into this object, returns this. */;\n  _proto.merge = function merge(other) {\n    var _this5 = this;\n    if (isObservableMap(other)) {\n      other = new Map(other);\n    }\n    transaction(function () {\n      if (isPlainObject(other)) {\n        getPlainObjectKeys(other).forEach(function (key) {\n          return _this5.set(key, other[key]);\n        });\n      } else if (Array.isArray(other)) {\n        other.forEach(function (_ref) {\n          var key = _ref[0],\n            value = _ref[1];\n          return _this5.set(key, value);\n        });\n      } else if (isES6Map(other)) {\n        if (other.constructor !== Map) {\n          die(19, other);\n        }\n        other.forEach(function (value, key) {\n          return _this5.set(key, value);\n        });\n      } else if (other !== null && other !== undefined) {\n        die(20, other);\n      }\n    });\n    return this;\n  };\n  _proto.clear = function clear() {\n    var _this6 = this;\n    transaction(function () {\n      untracked(function () {\n        for (var _iterator2 = _createForOfIteratorHelperLoose(_this6.keys()), _step2; !(_step2 = _iterator2()).done;) {\n          var key = _step2.value;\n          _this6[\"delete\"](key);\n        }\n      });\n    });\n  };\n  _proto.replace = function replace(values) {\n    var _this7 = this;\n    // Implementation requirements:\n    // - respect ordering of replacement map\n    // - allow interceptors to run and potentially prevent individual operations\n    // - don't recreate observables that already exist in original map (so we don't destroy existing subscriptions)\n    // - don't _keysAtom.reportChanged if the keys of resulting map are indentical (order matters!)\n    // - note that result map may differ from replacement map due to the interceptors\n    transaction(function () {\n      // Convert to map so we can do quick key lookups\n      var replacementMap = convertToMap(values);\n      var orderedData = new Map();\n      // Used for optimization\n      var keysReportChangedCalled = false;\n      // Delete keys that don't exist in replacement map\n      // if the key deletion is prevented by interceptor\n      // add entry at the beginning of the result map\n      for (var _iterator3 = _createForOfIteratorHelperLoose(_this7.data_.keys()), _step3; !(_step3 = _iterator3()).done;) {\n        var key = _step3.value;\n        // Concurrently iterating/deleting keys\n        // iterator should handle this correctly\n        if (!replacementMap.has(key)) {\n          var deleted = _this7[\"delete\"](key);\n          // Was the key removed?\n          if (deleted) {\n            // _keysAtom.reportChanged() was already called\n            keysReportChangedCalled = true;\n          } else {\n            // Delete prevented by interceptor\n            var value = _this7.data_.get(key);\n            orderedData.set(key, value);\n          }\n        }\n      }\n      // Merge entries\n      for (var _iterator4 = _createForOfIteratorHelperLoose(replacementMap.entries()), _step4; !(_step4 = _iterator4()).done;) {\n        var _step4$value = _step4.value,\n          _key = _step4$value[0],\n          _value = _step4$value[1];\n        // We will want to know whether a new key is added\n        var keyExisted = _this7.data_.has(_key);\n        // Add or update value\n        _this7.set(_key, _value);\n        // The addition could have been prevent by interceptor\n        if (_this7.data_.has(_key)) {\n          // The update could have been prevented by interceptor\n          // and also we want to preserve existing values\n          // so use value from _data map (instead of replacement map)\n          var _value2 = _this7.data_.get(_key);\n          orderedData.set(_key, _value2);\n          // Was a new key added?\n          if (!keyExisted) {\n            // _keysAtom.reportChanged() was already called\n            keysReportChangedCalled = true;\n          }\n        }\n      }\n      // Check for possible key order change\n      if (!keysReportChangedCalled) {\n        if (_this7.data_.size !== orderedData.size) {\n          // If size differs, keys are definitely modified\n          _this7.keysAtom_.reportChanged();\n        } else {\n          var iter1 = _this7.data_.keys();\n          var iter2 = orderedData.keys();\n          var next1 = iter1.next();\n          var next2 = iter2.next();\n          while (!next1.done) {\n            if (next1.value !== next2.value) {\n              _this7.keysAtom_.reportChanged();\n              break;\n            }\n            next1 = iter1.next();\n            next2 = iter2.next();\n          }\n        }\n      }\n      // Use correctly ordered map\n      _this7.data_ = orderedData;\n    });\n    return this;\n  };\n  _proto.toString = function toString() {\n    return \"[object ObservableMap]\";\n  };\n  _proto.toJSON = function toJSON() {\n    return Array.from(this);\n  };\n  /**\r\n   * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\r\n   * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\r\n   * for callback details\r\n   */\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    if (process.env.NODE_ENV !== \"production\" && fireImmediately === true) {\n      die(\"`observe` doesn't support fireImmediately=true in combination with maps.\");\n    }\n    return registerListener(this, listener);\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _createClass(ObservableMap, [{\n    key: \"size\",\n    get: function get() {\n      this.keysAtom_.reportObserved();\n      return this.data_.size;\n    }\n  }, {\n    key: _Symbol$toStringTag,\n    get: function get() {\n      return \"Map\";\n    }\n  }]);\n  return ObservableMap;\n}();\n// eslint-disable-next-line\nvar isObservableMap = /*#__PURE__*/createInstanceofPredicate(\"ObservableMap\", ObservableMap);\nfunction convertToMap(dataStructure) {\n  if (isES6Map(dataStructure) || isObservableMap(dataStructure)) {\n    return dataStructure;\n  } else if (Array.isArray(dataStructure)) {\n    return new Map(dataStructure);\n  } else if (isPlainObject(dataStructure)) {\n    var map = new Map();\n    for (var key in dataStructure) {\n      map.set(key, dataStructure[key]);\n    }\n    return map;\n  } else {\n    return die(21, dataStructure);\n  }\n}\n\nvar _Symbol$iterator$1, _Symbol$toStringTag$1;\nvar ObservableSetMarker = {};\n_Symbol$iterator$1 = Symbol.iterator;\n_Symbol$toStringTag$1 = Symbol.toStringTag;\nvar ObservableSet = /*#__PURE__*/function () {\n  function ObservableSet(initialData, enhancer, name_) {\n    if (enhancer === void 0) {\n      enhancer = deepEnhancer;\n    }\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"ObservableSet@\" + getNextId() : \"ObservableSet\";\n    }\n    this.name_ = void 0;\n    this[$mobx] = ObservableSetMarker;\n    this.data_ = new Set();\n    this.atom_ = void 0;\n    this.changeListeners_ = void 0;\n    this.interceptors_ = void 0;\n    this.dehancer = void 0;\n    this.enhancer_ = void 0;\n    this.name_ = name_;\n    if (!isFunction(Set)) {\n      die(22);\n    }\n    this.atom_ = createAtom(this.name_);\n    this.enhancer_ = function (newV, oldV) {\n      return enhancer(newV, oldV, name_);\n    };\n    if (initialData) {\n      this.replace(initialData);\n    }\n  }\n  var _proto = ObservableSet.prototype;\n  _proto.dehanceValue_ = function dehanceValue_(value) {\n    if (this.dehancer !== undefined) {\n      return this.dehancer(value);\n    }\n    return value;\n  };\n  _proto.clear = function clear() {\n    var _this = this;\n    transaction(function () {\n      untracked(function () {\n        for (var _iterator = _createForOfIteratorHelperLoose(_this.data_.values()), _step; !(_step = _iterator()).done;) {\n          var value = _step.value;\n          _this[\"delete\"](value);\n        }\n      });\n    });\n  };\n  _proto.forEach = function forEach(callbackFn, thisArg) {\n    for (var _iterator2 = _createForOfIteratorHelperLoose(this), _step2; !(_step2 = _iterator2()).done;) {\n      var value = _step2.value;\n      callbackFn.call(thisArg, value, value, this);\n    }\n  };\n  _proto.add = function add(value) {\n    var _this2 = this;\n    checkIfStateModificationsAreAllowed(this.atom_);\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: ADD,\n        object: this,\n        newValue: value\n      });\n      if (!change) {\n        return this;\n      }\n      // ideally, value = change.value would be done here, so that values can be\n      // changed by interceptor. Same applies for other Set and Map api's.\n    }\n\n    if (!this.has(value)) {\n      transaction(function () {\n        _this2.data_.add(_this2.enhancer_(value, undefined));\n        _this2.atom_.reportChanged();\n      });\n      var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n      var notify = hasListeners(this);\n      var _change = notify || notifySpy ? {\n        observableKind: \"set\",\n        debugObjectName: this.name_,\n        type: ADD,\n        object: this,\n        newValue: value\n      } : null;\n      if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportStart(_change);\n      }\n      if (notify) {\n        notifyListeners(this, _change);\n      }\n      if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportEnd();\n      }\n    }\n    return this;\n  };\n  _proto[\"delete\"] = function _delete(value) {\n    var _this3 = this;\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: DELETE,\n        object: this,\n        oldValue: value\n      });\n      if (!change) {\n        return false;\n      }\n    }\n    if (this.has(value)) {\n      var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n      var notify = hasListeners(this);\n      var _change2 = notify || notifySpy ? {\n        observableKind: \"set\",\n        debugObjectName: this.name_,\n        type: DELETE,\n        object: this,\n        oldValue: value\n      } : null;\n      if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportStart(_change2);\n      }\n      transaction(function () {\n        _this3.atom_.reportChanged();\n        _this3.data_[\"delete\"](value);\n      });\n      if (notify) {\n        notifyListeners(this, _change2);\n      }\n      if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportEnd();\n      }\n      return true;\n    }\n    return false;\n  };\n  _proto.has = function has(value) {\n    this.atom_.reportObserved();\n    return this.data_.has(this.dehanceValue_(value));\n  };\n  _proto.entries = function entries() {\n    var nextIndex = 0;\n    var keys = Array.from(this.keys());\n    var values = Array.from(this.values());\n    return makeIterable({\n      next: function next() {\n        var index = nextIndex;\n        nextIndex += 1;\n        return index < values.length ? {\n          value: [keys[index], values[index]],\n          done: false\n        } : {\n          done: true\n        };\n      }\n    });\n  };\n  _proto.keys = function keys() {\n    return this.values();\n  };\n  _proto.values = function values() {\n    this.atom_.reportObserved();\n    var self = this;\n    var nextIndex = 0;\n    var observableValues = Array.from(this.data_.values());\n    return makeIterable({\n      next: function next() {\n        return nextIndex < observableValues.length ? {\n          value: self.dehanceValue_(observableValues[nextIndex++]),\n          done: false\n        } : {\n          done: true\n        };\n      }\n    });\n  };\n  _proto.replace = function replace(other) {\n    var _this4 = this;\n    if (isObservableSet(other)) {\n      other = new Set(other);\n    }\n    transaction(function () {\n      if (Array.isArray(other)) {\n        _this4.clear();\n        other.forEach(function (value) {\n          return _this4.add(value);\n        });\n      } else if (isES6Set(other)) {\n        _this4.clear();\n        other.forEach(function (value) {\n          return _this4.add(value);\n        });\n      } else if (other !== null && other !== undefined) {\n        die(\"Cannot initialize set from \" + other);\n      }\n    });\n    return this;\n  };\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    // ... 'fireImmediately' could also be true?\n    if (process.env.NODE_ENV !== \"production\" && fireImmediately === true) {\n      die(\"`observe` doesn't support fireImmediately=true in combination with sets.\");\n    }\n    return registerListener(this, listener);\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _proto.toJSON = function toJSON() {\n    return Array.from(this);\n  };\n  _proto.toString = function toString() {\n    return \"[object ObservableSet]\";\n  };\n  _proto[_Symbol$iterator$1] = function () {\n    return this.values();\n  };\n  _createClass(ObservableSet, [{\n    key: \"size\",\n    get: function get() {\n      this.atom_.reportObserved();\n      return this.data_.size;\n    }\n  }, {\n    key: _Symbol$toStringTag$1,\n    get: function get() {\n      return \"Set\";\n    }\n  }]);\n  return ObservableSet;\n}();\n// eslint-disable-next-line\nvar isObservableSet = /*#__PURE__*/createInstanceofPredicate(\"ObservableSet\", ObservableSet);\n\nvar descriptorCache = /*#__PURE__*/Object.create(null);\nvar REMOVE = \"remove\";\nvar ObservableObjectAdministration = /*#__PURE__*/function () {\n  function ObservableObjectAdministration(target_, values_, name_,\n  // Used anytime annotation is not explicitely provided\n  defaultAnnotation_) {\n    if (values_ === void 0) {\n      values_ = new Map();\n    }\n    if (defaultAnnotation_ === void 0) {\n      defaultAnnotation_ = autoAnnotation;\n    }\n    this.target_ = void 0;\n    this.values_ = void 0;\n    this.name_ = void 0;\n    this.defaultAnnotation_ = void 0;\n    this.keysAtom_ = void 0;\n    this.changeListeners_ = void 0;\n    this.interceptors_ = void 0;\n    this.proxy_ = void 0;\n    this.isPlainObject_ = void 0;\n    this.appliedAnnotations_ = void 0;\n    this.pendingKeys_ = void 0;\n    this.target_ = target_;\n    this.values_ = values_;\n    this.name_ = name_;\n    this.defaultAnnotation_ = defaultAnnotation_;\n    this.keysAtom_ = new Atom(process.env.NODE_ENV !== \"production\" ? this.name_ + \".keys\" : \"ObservableObject.keys\");\n    // Optimization: we use this frequently\n    this.isPlainObject_ = isPlainObject(this.target_);\n    if (process.env.NODE_ENV !== \"production\" && !isAnnotation(this.defaultAnnotation_)) {\n      die(\"defaultAnnotation must be valid annotation\");\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      // Prepare structure for tracking which fields were already annotated\n      this.appliedAnnotations_ = {};\n    }\n  }\n  var _proto = ObservableObjectAdministration.prototype;\n  _proto.getObservablePropValue_ = function getObservablePropValue_(key) {\n    return this.values_.get(key).get();\n  };\n  _proto.setObservablePropValue_ = function setObservablePropValue_(key, newValue) {\n    var observable = this.values_.get(key);\n    if (observable instanceof ComputedValue) {\n      observable.set(newValue);\n      return true;\n    }\n    // intercept\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: UPDATE,\n        object: this.proxy_ || this.target_,\n        name: key,\n        newValue: newValue\n      });\n      if (!change) {\n        return null;\n      }\n      newValue = change.newValue;\n    }\n    newValue = observable.prepareNewValue_(newValue);\n    // notify spy & observers\n    if (newValue !== globalState.UNCHANGED) {\n      var notify = hasListeners(this);\n      var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n      var _change = notify || notifySpy ? {\n        type: UPDATE,\n        observableKind: \"object\",\n        debugObjectName: this.name_,\n        object: this.proxy_ || this.target_,\n        oldValue: observable.value_,\n        name: key,\n        newValue: newValue\n      } : null;\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart(_change);\n      }\n      observable.setNewValue_(newValue);\n      if (notify) {\n        notifyListeners(this, _change);\n      }\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n    }\n    return true;\n  };\n  _proto.get_ = function get_(key) {\n    if (globalState.trackingDerivation && !hasProp(this.target_, key)) {\n      // Key doesn't exist yet, subscribe for it in case it's added later\n      this.has_(key);\n    }\n    return this.target_[key];\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {any} value\r\n   * @param {Annotation|boolean} annotation true - use default annotation, false - copy as is\r\n   * @param {boolean} proxyTrap whether it's called from proxy trap\r\n   * @returns {boolean|null} true on success, false on failure (proxyTrap + non-configurable), null when cancelled by interceptor\r\n   */;\n  _proto.set_ = function set_(key, value, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    // Don't use .has(key) - we care about own\n    if (hasProp(this.target_, key)) {\n      // Existing prop\n      if (this.values_.has(key)) {\n        // Observable (can be intercepted)\n        return this.setObservablePropValue_(key, value);\n      } else if (proxyTrap) {\n        // Non-observable - proxy\n        return Reflect.set(this.target_, key, value);\n      } else {\n        // Non-observable\n        this.target_[key] = value;\n        return true;\n      }\n    } else {\n      // New prop\n      return this.extend_(key, {\n        value: value,\n        enumerable: true,\n        writable: true,\n        configurable: true\n      }, this.defaultAnnotation_, proxyTrap);\n    }\n  }\n  // Trap for \"in\"\n  ;\n  _proto.has_ = function has_(key) {\n    if (!globalState.trackingDerivation) {\n      // Skip key subscription outside derivation\n      return key in this.target_;\n    }\n    this.pendingKeys_ || (this.pendingKeys_ = new Map());\n    var entry = this.pendingKeys_.get(key);\n    if (!entry) {\n      entry = new ObservableValue(key in this.target_, referenceEnhancer, process.env.NODE_ENV !== \"production\" ? this.name_ + \".\" + stringifyKey(key) + \"?\" : \"ObservableObject.key?\", false);\n      this.pendingKeys_.set(key, entry);\n    }\n    return entry.get();\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {Annotation|boolean} annotation true - use default annotation, false - ignore prop\r\n   */;\n  _proto.make_ = function make_(key, annotation) {\n    if (annotation === true) {\n      annotation = this.defaultAnnotation_;\n    }\n    if (annotation === false) {\n      return;\n    }\n    assertAnnotable(this, annotation, key);\n    if (!(key in this.target_)) {\n      var _this$target_$storedA;\n      // Throw on missing key, except for decorators:\n      // Decorator annotations are collected from whole prototype chain.\n      // When called from super() some props may not exist yet.\n      // However we don't have to worry about missing prop,\n      // because the decorator must have been applied to something.\n      if ((_this$target_$storedA = this.target_[storedAnnotationsSymbol]) != null && _this$target_$storedA[key]) {\n        return; // will be annotated by subclass constructor\n      } else {\n        die(1, annotation.annotationType_, this.name_ + \".\" + key.toString());\n      }\n    }\n    var source = this.target_;\n    while (source && source !== objectPrototype) {\n      var descriptor = getDescriptor(source, key);\n      if (descriptor) {\n        var outcome = annotation.make_(this, key, descriptor, source);\n        if (outcome === 0 /* Cancel */) {\n          return;\n        }\n        if (outcome === 1 /* Break */) {\n          break;\n        }\n      }\n      source = Object.getPrototypeOf(source);\n    }\n    recordAnnotationApplied(this, annotation, key);\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {PropertyDescriptor} descriptor\r\n   * @param {Annotation|boolean} annotation true - use default annotation, false - copy as is\r\n   * @param {boolean} proxyTrap whether it's called from proxy trap\r\n   * @returns {boolean|null} true on success, false on failure (proxyTrap + non-configurable), null when cancelled by interceptor\r\n   */;\n  _proto.extend_ = function extend_(key, descriptor, annotation, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    if (annotation === true) {\n      annotation = this.defaultAnnotation_;\n    }\n    if (annotation === false) {\n      return this.defineProperty_(key, descriptor, proxyTrap);\n    }\n    assertAnnotable(this, annotation, key);\n    var outcome = annotation.extend_(this, key, descriptor, proxyTrap);\n    if (outcome) {\n      recordAnnotationApplied(this, annotation, key);\n    }\n    return outcome;\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {PropertyDescriptor} descriptor\r\n   * @param {boolean} proxyTrap whether it's called from proxy trap\r\n   * @returns {boolean|null} true on success, false on failure (proxyTrap + non-configurable), null when cancelled by interceptor\r\n   */;\n  _proto.defineProperty_ = function defineProperty_(key, descriptor, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    try {\n      startBatch();\n      // Delete\n      var deleteOutcome = this.delete_(key);\n      if (!deleteOutcome) {\n        // Failure or intercepted\n        return deleteOutcome;\n      }\n      // ADD interceptor\n      if (hasInterceptors(this)) {\n        var change = interceptChange(this, {\n          object: this.proxy_ || this.target_,\n          name: key,\n          type: ADD,\n          newValue: descriptor.value\n        });\n        if (!change) {\n          return null;\n        }\n        var newValue = change.newValue;\n        if (descriptor.value !== newValue) {\n          descriptor = _extends({}, descriptor, {\n            value: newValue\n          });\n        }\n      }\n      // Define\n      if (proxyTrap) {\n        if (!Reflect.defineProperty(this.target_, key, descriptor)) {\n          return false;\n        }\n      } else {\n        defineProperty(this.target_, key, descriptor);\n      }\n      // Notify\n      this.notifyPropertyAddition_(key, descriptor.value);\n    } finally {\n      endBatch();\n    }\n    return true;\n  }\n  // If original descriptor becomes relevant, move this to annotation directly\n  ;\n  _proto.defineObservableProperty_ = function defineObservableProperty_(key, value, enhancer, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    try {\n      startBatch();\n      // Delete\n      var deleteOutcome = this.delete_(key);\n      if (!deleteOutcome) {\n        // Failure or intercepted\n        return deleteOutcome;\n      }\n      // ADD interceptor\n      if (hasInterceptors(this)) {\n        var change = interceptChange(this, {\n          object: this.proxy_ || this.target_,\n          name: key,\n          type: ADD,\n          newValue: value\n        });\n        if (!change) {\n          return null;\n        }\n        value = change.newValue;\n      }\n      var cachedDescriptor = getCachedObservablePropDescriptor(key);\n      var descriptor = {\n        configurable: globalState.safeDescriptors ? this.isPlainObject_ : true,\n        enumerable: true,\n        get: cachedDescriptor.get,\n        set: cachedDescriptor.set\n      };\n      // Define\n      if (proxyTrap) {\n        if (!Reflect.defineProperty(this.target_, key, descriptor)) {\n          return false;\n        }\n      } else {\n        defineProperty(this.target_, key, descriptor);\n      }\n      var observable = new ObservableValue(value, enhancer, process.env.NODE_ENV !== \"production\" ? this.name_ + \".\" + key.toString() : \"ObservableObject.key\", false);\n      this.values_.set(key, observable);\n      // Notify (value possibly changed by ObservableValue)\n      this.notifyPropertyAddition_(key, observable.value_);\n    } finally {\n      endBatch();\n    }\n    return true;\n  }\n  // If original descriptor becomes relevant, move this to annotation directly\n  ;\n  _proto.defineComputedProperty_ = function defineComputedProperty_(key, options, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    try {\n      startBatch();\n      // Delete\n      var deleteOutcome = this.delete_(key);\n      if (!deleteOutcome) {\n        // Failure or intercepted\n        return deleteOutcome;\n      }\n      // ADD interceptor\n      if (hasInterceptors(this)) {\n        var change = interceptChange(this, {\n          object: this.proxy_ || this.target_,\n          name: key,\n          type: ADD,\n          newValue: undefined\n        });\n        if (!change) {\n          return null;\n        }\n      }\n      options.name || (options.name = process.env.NODE_ENV !== \"production\" ? this.name_ + \".\" + key.toString() : \"ObservableObject.key\");\n      options.context = this.proxy_ || this.target_;\n      var cachedDescriptor = getCachedObservablePropDescriptor(key);\n      var descriptor = {\n        configurable: globalState.safeDescriptors ? this.isPlainObject_ : true,\n        enumerable: false,\n        get: cachedDescriptor.get,\n        set: cachedDescriptor.set\n      };\n      // Define\n      if (proxyTrap) {\n        if (!Reflect.defineProperty(this.target_, key, descriptor)) {\n          return false;\n        }\n      } else {\n        defineProperty(this.target_, key, descriptor);\n      }\n      this.values_.set(key, new ComputedValue(options));\n      // Notify\n      this.notifyPropertyAddition_(key, undefined);\n    } finally {\n      endBatch();\n    }\n    return true;\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {PropertyDescriptor} descriptor\r\n   * @param {boolean} proxyTrap whether it's called from proxy trap\r\n   * @returns {boolean|null} true on success, false on failure (proxyTrap + non-configurable), null when cancelled by interceptor\r\n   */;\n  _proto.delete_ = function delete_(key, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    // No such prop\n    if (!hasProp(this.target_, key)) {\n      return true;\n    }\n    // Intercept\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        object: this.proxy_ || this.target_,\n        name: key,\n        type: REMOVE\n      });\n      // Cancelled\n      if (!change) {\n        return null;\n      }\n    }\n    // Delete\n    try {\n      var _this$pendingKeys_, _this$pendingKeys_$ge;\n      startBatch();\n      var notify = hasListeners(this);\n      var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n      var observable = this.values_.get(key);\n      // Value needed for spies/listeners\n      var value = undefined;\n      // Optimization: don't pull the value unless we will need it\n      if (!observable && (notify || notifySpy)) {\n        var _getDescriptor;\n        value = (_getDescriptor = getDescriptor(this.target_, key)) == null ? void 0 : _getDescriptor.value;\n      }\n      // delete prop (do first, may fail)\n      if (proxyTrap) {\n        if (!Reflect.deleteProperty(this.target_, key)) {\n          return false;\n        }\n      } else {\n        delete this.target_[key];\n      }\n      // Allow re-annotating this field\n      if (process.env.NODE_ENV !== \"production\") {\n        delete this.appliedAnnotations_[key];\n      }\n      // Clear observable\n      if (observable) {\n        this.values_[\"delete\"](key);\n        // for computed, value is undefined\n        if (observable instanceof ObservableValue) {\n          value = observable.value_;\n        }\n        // Notify: autorun(() => obj[key]), see #1796\n        propagateChanged(observable);\n      }\n      // Notify \"keys/entries/values\" observers\n      this.keysAtom_.reportChanged();\n      // Notify \"has\" observers\n      // \"in\" as it may still exist in proto\n      (_this$pendingKeys_ = this.pendingKeys_) == null ? void 0 : (_this$pendingKeys_$ge = _this$pendingKeys_.get(key)) == null ? void 0 : _this$pendingKeys_$ge.set(key in this.target_);\n      // Notify spies/listeners\n      if (notify || notifySpy) {\n        var _change2 = {\n          type: REMOVE,\n          observableKind: \"object\",\n          object: this.proxy_ || this.target_,\n          debugObjectName: this.name_,\n          oldValue: value,\n          name: key\n        };\n        if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n          spyReportStart(_change2);\n        }\n        if (notify) {\n          notifyListeners(this, _change2);\n        }\n        if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n          spyReportEnd();\n        }\n      }\n    } finally {\n      endBatch();\n    }\n    return true;\n  }\n  /**\r\n   * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\r\n   * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\r\n   * for callback details\r\n   */;\n  _proto.observe_ = function observe_(callback, fireImmediately) {\n    if (process.env.NODE_ENV !== \"production\" && fireImmediately === true) {\n      die(\"`observe` doesn't support the fire immediately property for observable objects.\");\n    }\n    return registerListener(this, callback);\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _proto.notifyPropertyAddition_ = function notifyPropertyAddition_(key, value) {\n    var _this$pendingKeys_2, _this$pendingKeys_2$g;\n    var notify = hasListeners(this);\n    var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n    if (notify || notifySpy) {\n      var change = notify || notifySpy ? {\n        type: ADD,\n        observableKind: \"object\",\n        debugObjectName: this.name_,\n        object: this.proxy_ || this.target_,\n        name: key,\n        newValue: value\n      } : null;\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart(change);\n      }\n      if (notify) {\n        notifyListeners(this, change);\n      }\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n    }\n    (_this$pendingKeys_2 = this.pendingKeys_) == null ? void 0 : (_this$pendingKeys_2$g = _this$pendingKeys_2.get(key)) == null ? void 0 : _this$pendingKeys_2$g.set(true);\n    // Notify \"keys/entries/values\" observers\n    this.keysAtom_.reportChanged();\n  };\n  _proto.ownKeys_ = function ownKeys_() {\n    this.keysAtom_.reportObserved();\n    return ownKeys(this.target_);\n  };\n  _proto.keys_ = function keys_() {\n    // Returns enumerable && own, but unfortunately keysAtom will report on ANY key change.\n    // There is no way to distinguish between Object.keys(object) and Reflect.ownKeys(object) - both are handled by ownKeys trap.\n    // We can either over-report in Object.keys(object) or under-report in Reflect.ownKeys(object)\n    // We choose to over-report in Object.keys(object), because:\n    // - typically it's used with simple data objects\n    // - when symbolic/non-enumerable keys are relevant Reflect.ownKeys works as expected\n    this.keysAtom_.reportObserved();\n    return Object.keys(this.target_);\n  };\n  return ObservableObjectAdministration;\n}();\nfunction asObservableObject(target, options) {\n  var _options$name;\n  if (process.env.NODE_ENV !== \"production\" && options && isObservableObject(target)) {\n    die(\"Options can't be provided for already observable objects.\");\n  }\n  if (hasProp(target, $mobx)) {\n    if (process.env.NODE_ENV !== \"production\" && !(getAdministration(target) instanceof ObservableObjectAdministration)) {\n      die(\"Cannot convert '\" + getDebugName(target) + \"' into observable object:\" + \"\\nThe target is already observable of different type.\" + \"\\nExtending builtins is not supported.\");\n    }\n    return target;\n  }\n  if (process.env.NODE_ENV !== \"production\" && !Object.isExtensible(target)) {\n    die(\"Cannot make the designated object observable; it is not extensible\");\n  }\n  var name = (_options$name = options == null ? void 0 : options.name) != null ? _options$name : process.env.NODE_ENV !== \"production\" ? (isPlainObject(target) ? \"ObservableObject\" : target.constructor.name) + \"@\" + getNextId() : \"ObservableObject\";\n  var adm = new ObservableObjectAdministration(target, new Map(), String(name), getAnnotationFromOptions(options));\n  addHiddenProp(target, $mobx, adm);\n  return target;\n}\nvar isObservableObjectAdministration = /*#__PURE__*/createInstanceofPredicate(\"ObservableObjectAdministration\", ObservableObjectAdministration);\nfunction getCachedObservablePropDescriptor(key) {\n  return descriptorCache[key] || (descriptorCache[key] = {\n    get: function get() {\n      return this[$mobx].getObservablePropValue_(key);\n    },\n    set: function set(value) {\n      return this[$mobx].setObservablePropValue_(key, value);\n    }\n  });\n}\nfunction isObservableObject(thing) {\n  if (isObject(thing)) {\n    return isObservableObjectAdministration(thing[$mobx]);\n  }\n  return false;\n}\nfunction recordAnnotationApplied(adm, annotation, key) {\n  var _adm$target_$storedAn;\n  if (process.env.NODE_ENV !== \"production\") {\n    adm.appliedAnnotations_[key] = annotation;\n  }\n  // Remove applied decorator annotation so we don't try to apply it again in subclass constructor\n  (_adm$target_$storedAn = adm.target_[storedAnnotationsSymbol]) == null ? true : delete _adm$target_$storedAn[key];\n}\nfunction assertAnnotable(adm, annotation, key) {\n  // Valid annotation\n  if (process.env.NODE_ENV !== \"production\" && !isAnnotation(annotation)) {\n    die(\"Cannot annotate '\" + adm.name_ + \".\" + key.toString() + \"': Invalid annotation.\");\n  }\n  /*\r\n  // Configurable, not sealed, not frozen\r\n  // Possibly not needed, just a little better error then the one thrown by engine.\r\n  // Cases where this would be useful the most (subclass field initializer) are not interceptable by this.\r\n  if (__DEV__) {\r\n      const configurable = getDescriptor(adm.target_, key)?.configurable\r\n      const frozen = Object.isFrozen(adm.target_)\r\n      const sealed = Object.isSealed(adm.target_)\r\n      if (!configurable || frozen || sealed) {\r\n          const fieldName = `${adm.name_}.${key.toString()}`\r\n          const requestedAnnotationType = annotation.annotationType_\r\n          let error = `Cannot apply '${requestedAnnotationType}' to '${fieldName}':`\r\n          if (frozen) {\r\n              error += `\\nObject is frozen.`\r\n          }\r\n          if (sealed) {\r\n              error += `\\nObject is sealed.`\r\n          }\r\n          if (!configurable) {\r\n              error += `\\nproperty is not configurable.`\r\n              // Mention only if caused by us to avoid confusion\r\n              if (hasProp(adm.appliedAnnotations!, key)) {\r\n                  error += `\\nTo prevent accidental re-definition of a field by a subclass, `\r\n                  error += `all annotated fields of non-plain objects (classes) are not configurable.`\r\n              }\r\n          }\r\n          die(error)\r\n      }\r\n  }\r\n  */\n  // Not annotated\n  if (process.env.NODE_ENV !== \"production\" && !isOverride(annotation) && hasProp(adm.appliedAnnotations_, key)) {\n    var fieldName = adm.name_ + \".\" + key.toString();\n    var currentAnnotationType = adm.appliedAnnotations_[key].annotationType_;\n    var requestedAnnotationType = annotation.annotationType_;\n    die(\"Cannot apply '\" + requestedAnnotationType + \"' to '\" + fieldName + \"':\" + (\"\\nThe field is already annotated with '\" + currentAnnotationType + \"'.\") + \"\\nRe-annotating fields is not allowed.\" + \"\\nUse 'override' annotation for methods overridden by subclass.\");\n  }\n}\n\n// Bug in safari 9.* (or iOS 9 safari mobile). See #364\nvar ENTRY_0 = /*#__PURE__*/createArrayEntryDescriptor(0);\n/**\r\n * This array buffer contains two lists of properties, so that all arrays\r\n * can recycle their property definitions, which significantly improves performance of creating\r\n * properties on the fly.\r\n */\nvar OBSERVABLE_ARRAY_BUFFER_SIZE = 0;\n// Typescript workaround to make sure ObservableArray extends Array\nvar StubArray = function StubArray() {};\nfunction inherit(ctor, proto) {\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ctor.prototype, proto);\n  } else if (ctor.prototype.__proto__ !== undefined) {\n    ctor.prototype.__proto__ = proto;\n  } else {\n    ctor.prototype = proto;\n  }\n}\ninherit(StubArray, Array.prototype);\n// Weex proto freeze protection was here,\n// but it is unclear why the hack is need as MobX never changed the prototype\n// anyway, so removed it in V6\nvar LegacyObservableArray = /*#__PURE__*/function (_StubArray, _Symbol$toStringTag, _Symbol$iterator) {\n  _inheritsLoose(LegacyObservableArray, _StubArray);\n  function LegacyObservableArray(initialValues, enhancer, name, owned) {\n    var _this;\n    if (name === void 0) {\n      name = process.env.NODE_ENV !== \"production\" ? \"ObservableArray@\" + getNextId() : \"ObservableArray\";\n    }\n    if (owned === void 0) {\n      owned = false;\n    }\n    _this = _StubArray.call(this) || this;\n    var adm = new ObservableArrayAdministration(name, enhancer, owned, true);\n    adm.proxy_ = _assertThisInitialized(_this);\n    addHiddenFinalProp(_assertThisInitialized(_this), $mobx, adm);\n    if (initialValues && initialValues.length) {\n      var prev = allowStateChangesStart(true);\n      // @ts-ignore\n      _this.spliceWithArray(0, 0, initialValues);\n      allowStateChangesEnd(prev);\n    }\n    {\n      // Seems that Safari won't use numeric prototype setter untill any * numeric property is\n      // defined on the instance. After that it works fine, even if this property is deleted.\n      Object.defineProperty(_assertThisInitialized(_this), \"0\", ENTRY_0);\n    }\n    return _this;\n  }\n  var _proto = LegacyObservableArray.prototype;\n  _proto.concat = function concat() {\n    this[$mobx].atom_.reportObserved();\n    for (var _len = arguments.length, arrays = new Array(_len), _key = 0; _key < _len; _key++) {\n      arrays[_key] = arguments[_key];\n    }\n    return Array.prototype.concat.apply(this.slice(),\n    //@ts-ignore\n    arrays.map(function (a) {\n      return isObservableArray(a) ? a.slice() : a;\n    }));\n  };\n  _proto[_Symbol$iterator] = function () {\n    var self = this;\n    var nextIndex = 0;\n    return makeIterable({\n      next: function next() {\n        return nextIndex < self.length ? {\n          value: self[nextIndex++],\n          done: false\n        } : {\n          done: true,\n          value: undefined\n        };\n      }\n    });\n  };\n  _createClass(LegacyObservableArray, [{\n    key: \"length\",\n    get: function get() {\n      return this[$mobx].getArrayLength_();\n    },\n    set: function set(newLength) {\n      this[$mobx].setArrayLength_(newLength);\n    }\n  }, {\n    key: _Symbol$toStringTag,\n    get: function get() {\n      return \"Array\";\n    }\n  }]);\n  return LegacyObservableArray;\n}(StubArray, Symbol.toStringTag, Symbol.iterator);\nObject.entries(arrayExtensions).forEach(function (_ref) {\n  var prop = _ref[0],\n    fn = _ref[1];\n  if (prop !== \"concat\") {\n    addHiddenProp(LegacyObservableArray.prototype, prop, fn);\n  }\n});\nfunction createArrayEntryDescriptor(index) {\n  return {\n    enumerable: false,\n    configurable: true,\n    get: function get() {\n      return this[$mobx].get_(index);\n    },\n    set: function set(value) {\n      this[$mobx].set_(index, value);\n    }\n  };\n}\nfunction createArrayBufferItem(index) {\n  defineProperty(LegacyObservableArray.prototype, \"\" + index, createArrayEntryDescriptor(index));\n}\nfunction reserveArrayBuffer(max) {\n  if (max > OBSERVABLE_ARRAY_BUFFER_SIZE) {\n    for (var index = OBSERVABLE_ARRAY_BUFFER_SIZE; index < max + 100; index++) {\n      createArrayBufferItem(index);\n    }\n    OBSERVABLE_ARRAY_BUFFER_SIZE = max;\n  }\n}\nreserveArrayBuffer(1000);\nfunction createLegacyArray(initialValues, enhancer, name) {\n  return new LegacyObservableArray(initialValues, enhancer, name);\n}\n\nfunction getAtom(thing, property) {\n  if (typeof thing === \"object\" && thing !== null) {\n    if (isObservableArray(thing)) {\n      if (property !== undefined) {\n        die(23);\n      }\n      return thing[$mobx].atom_;\n    }\n    if (isObservableSet(thing)) {\n      return thing.atom_;\n    }\n    if (isObservableMap(thing)) {\n      if (property === undefined) {\n        return thing.keysAtom_;\n      }\n      var observable = thing.data_.get(property) || thing.hasMap_.get(property);\n      if (!observable) {\n        die(25, property, getDebugName(thing));\n      }\n      return observable;\n    }\n    if (isObservableObject(thing)) {\n      if (!property) {\n        return die(26);\n      }\n      var _observable = thing[$mobx].values_.get(property);\n      if (!_observable) {\n        die(27, property, getDebugName(thing));\n      }\n      return _observable;\n    }\n    if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n      return thing;\n    }\n  } else if (isFunction(thing)) {\n    if (isReaction(thing[$mobx])) {\n      // disposer function\n      return thing[$mobx];\n    }\n  }\n  die(28);\n}\nfunction getAdministration(thing, property) {\n  if (!thing) {\n    die(29);\n  }\n  if (property !== undefined) {\n    return getAdministration(getAtom(thing, property));\n  }\n  if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n    return thing;\n  }\n  if (isObservableMap(thing) || isObservableSet(thing)) {\n    return thing;\n  }\n  if (thing[$mobx]) {\n    return thing[$mobx];\n  }\n  die(24, thing);\n}\nfunction getDebugName(thing, property) {\n  var named;\n  if (property !== undefined) {\n    named = getAtom(thing, property);\n  } else if (isAction(thing)) {\n    return thing.name;\n  } else if (isObservableObject(thing) || isObservableMap(thing) || isObservableSet(thing)) {\n    named = getAdministration(thing);\n  } else {\n    // valid for arrays as well\n    named = getAtom(thing);\n  }\n  return named.name_;\n}\n\nvar toString = objectPrototype.toString;\nfunction deepEqual(a, b, depth) {\n  if (depth === void 0) {\n    depth = -1;\n  }\n  return eq(a, b, depth);\n}\n// Copied from https://github.com/jashkenas/underscore/blob/5c237a7c682fb68fd5378203f0bf22dce1624854/underscore.js#L1186-L1289\n// Internal recursive comparison function for `isEqual`.\nfunction eq(a, b, depth, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) {\n    return a !== 0 || 1 / a === 1 / b;\n  }\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) {\n    return false;\n  }\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) {\n    return b !== b;\n  }\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== \"function\" && type !== \"object\" && typeof b != \"object\") {\n    return false;\n  }\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) {\n    return false;\n  }\n  switch (className) {\n    // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n    case \"[object RegExp]\":\n    // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case \"[object String]\":\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return \"\" + a === \"\" + b;\n    case \"[object Number]\":\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) {\n        return +b !== +b;\n      }\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case \"[object Date]\":\n    case \"[object Boolean]\":\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case \"[object Symbol]\":\n      return typeof Symbol !== \"undefined\" && Symbol.valueOf.call(a) === Symbol.valueOf.call(b);\n    case \"[object Map]\":\n    case \"[object Set]\":\n      // Maps and Sets are unwrapped to arrays of entry-pairs, adding an incidental level.\n      // Hide this extra level by increasing the depth.\n      if (depth >= 0) {\n        depth++;\n      }\n      break;\n  }\n  // Unwrap any wrapped objects.\n  a = unwrap(a);\n  b = unwrap(b);\n  var areArrays = className === \"[object Array]\";\n  if (!areArrays) {\n    if (typeof a != \"object\" || typeof b != \"object\") {\n      return false;\n    }\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor,\n      bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor && isFunction(bCtor) && bCtor instanceof bCtor) && \"constructor\" in a && \"constructor\" in b) {\n      return false;\n    }\n  }\n  if (depth === 0) {\n    return false;\n  } else if (depth < 0) {\n    depth = -1;\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) {\n      return bStack[length] === b;\n    }\n  }\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) {\n      return false;\n    }\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], depth - 1, aStack, bStack)) {\n        return false;\n      }\n    }\n  } else {\n    // Deep compare objects.\n    var keys = Object.keys(a);\n    var key;\n    length = keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (Object.keys(b).length !== length) {\n      return false;\n    }\n    while (length--) {\n      // Deep compare each member\n      key = keys[length];\n      if (!(hasProp(b, key) && eq(a[key], b[key], depth - 1, aStack, bStack))) {\n        return false;\n      }\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\nfunction unwrap(a) {\n  if (isObservableArray(a)) {\n    return a.slice();\n  }\n  if (isES6Map(a) || isObservableMap(a)) {\n    return Array.from(a.entries());\n  }\n  if (isES6Set(a) || isObservableSet(a)) {\n    return Array.from(a.entries());\n  }\n  return a;\n}\n\nfunction makeIterable(iterator) {\n  iterator[Symbol.iterator] = getSelf;\n  return iterator;\n}\nfunction getSelf() {\n  return this;\n}\n\nfunction isAnnotation(thing) {\n  return (\n    // Can be function\n    thing instanceof Object && typeof thing.annotationType_ === \"string\" && isFunction(thing.make_) && isFunction(thing.extend_)\n  );\n}\n\n/**\r\n * (c) Michel Weststrate 2015 - 2020\r\n * MIT Licensed\r\n *\r\n * Welcome to the mobx sources! To get a global overview of how MobX internally works,\r\n * this is a good place to start:\r\n * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74\r\n *\r\n * Source folders:\r\n * ===============\r\n *\r\n * - api/     Most of the public static methods exposed by the module can be found here.\r\n * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.\r\n * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.\r\n * - utils/   Utility stuff.\r\n *\r\n */\n[\"Symbol\", \"Map\", \"Set\"].forEach(function (m) {\n  var g = getGlobal();\n  if (typeof g[m] === \"undefined\") {\n    die(\"MobX requires global '\" + m + \"' to be available or polyfilled\");\n  }\n});\nif (typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ === \"object\") {\n  // See: https://github.com/andykog/mobx-devtools/\n  __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({\n    spy: spy,\n    extras: {\n      getDebugName: getDebugName\n    },\n    $mobx: $mobx\n  });\n}\n\nexport { $mobx, FlowCancellationError, ObservableMap, ObservableSet, Reaction, allowStateChanges as _allowStateChanges, runInAction as _allowStateChangesInsideComputed, allowStateReadsEnd as _allowStateReadsEnd, allowStateReadsStart as _allowStateReadsStart, autoAction as _autoAction, _endAction, getAdministration as _getAdministration, getGlobalState as _getGlobalState, interceptReads as _interceptReads, isComputingDerivation as _isComputingDerivation, resetGlobalState as _resetGlobalState, _startAction, action, autorun, comparer, computed, configure, createAtom, apiDefineProperty as defineProperty, entries, extendObservable, flow, flowResult, get, getAtom, getDebugName, getDependencyTree, getObserverTree, has, intercept, isAction, isObservableValue as isBoxedObservable, isComputed, isComputedProp, isFlow, isFlowCancellationError, isObservable, isObservableArray, isObservableMap, isObservableObject, isObservableProp, isObservableSet, keys, makeAutoObservable, makeObservable, observable, observe, onBecomeObserved, onBecomeUnobserved, onReactionError, override, apiOwnKeys as ownKeys, reaction, remove, runInAction, set, spy, toJS, trace, transaction, untracked, values, when };\n//# sourceMappingURL=mobx.esm.js.map\n","module.exports = Next;","module.exports = _;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","import { IPublicTypeTipConfig } from '@alilc/lowcode-types';\nimport { IEventBus, createModuleEventBus } from '../../event-bus';\n\nexport interface TipOptions extends IPublicTypeTipConfig {\n  target: HTMLElement;\n}\n\nclass TipHandler {\n  tip: TipOptions | null = null;\n\n  private showDelay: number | null = null;\n\n  private hideDelay: number | null = null;\n\n  private emitter: IEventBus = createModuleEventBus('TipHandler');\n\n  setTarget(target: HTMLElement) {\n    const tip = findTip(target);\n    if (tip) {\n      if (this.tip) {\n        // the some target should return\n        if ((this.tip as any).target === (tip as any).target) {\n          this.tip = tip;\n          return;\n        }\n        // not show already, reset show delay\n        if (this.showDelay) {\n          clearTimeout(this.showDelay);\n          this.showDelay = null;\n          this.tip = null;\n        } else {\n          if (this.hideDelay) {\n            clearTimeout(this.hideDelay);\n            this.hideDelay = null;\n          }\n          this.tip = tip;\n          this.emitter.emit('tipchange');\n          return;\n        }\n      }\n\n      this.tip = tip;\n      if (this.hideDelay) {\n        clearTimeout(this.hideDelay);\n        this.hideDelay = null;\n        this.emitter.emit('tipchange');\n      } else {\n        this.showDelay = setTimeout(() => {\n          this.showDelay = null;\n          this.emitter.emit('tipchange');\n        }, 350) as any;\n      }\n    } else {\n      if (this.showDelay) {\n        clearTimeout(this.showDelay);\n        this.showDelay = null;\n      } else {\n        this.hideDelay = setTimeout(() => {\n          this.hideDelay = null;\n        }, 100) as any;\n      }\n      this.tip = null;\n\n      this.emitter.emit('tipchange');\n    }\n  }\n\n  hideImmediately() {\n    if (this.hideDelay) {\n      clearTimeout(this.hideDelay);\n      this.hideDelay = null;\n    }\n    if (this.showDelay) {\n      clearTimeout(this.showDelay);\n      this.showDelay = null;\n    }\n    this.tip = null;\n    this.emitter.emit('tipchange');\n  }\n\n  onChange(func: () => void) {\n    this.emitter.on('tipchange', func);\n    return () => {\n      this.emitter.removeListener('tipchange', func);\n    };\n  }\n}\n\nexport const tipHandler = new TipHandler();\n\nfunction findTip(target: HTMLElement | null): TipOptions | null {\n  if (!target) {\n    return null;\n  }\n  // optimize deep finding on mouseover\n  let loopupLimit = 10;\n  while (target && loopupLimit-- > 0) {\n    // get tip from target node\n    if (target.dataset && target.dataset.tip) {\n      return {\n        children: target.dataset.tip,\n        direction: (target.dataset.direction || target.dataset.dir) as any,\n        theme: target.dataset.theme,\n        target,\n      };\n    }\n\n    // or get tip from child nodes\n    let child: HTMLElement | null = target.lastElementChild as HTMLElement;\n\n    while (child) {\n      if (child.dataset && child.dataset.role === 'tip') {\n        const { tipId } = child.dataset;\n        if (!tipId) {\n          return null;\n        }\n        const tipProps = tipsMap.get(tipId);\n        if (!tipProps) {\n          return null;\n        }\n        return {\n          ...tipProps,\n          target,\n        };\n      }\n      child = child.previousElementSibling as HTMLElement;\n    }\n\n    target = target.parentNode as HTMLElement;\n  }\n\n  return null;\n}\n\nconst tipsMap = new Map<string, IPublicTypeTipConfig>();\nexport function postTip(id: string, props: IPublicTypeTipConfig | null) {\n  if (props) {\n    tipsMap.set(id, props);\n  } else {\n    tipsMap.delete(id);\n  }\n}\n","module.exports = window.PropTypes;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getMetadataField = exports.getMetadata = exports.MetadataType = exports.metaSymbol = void 0;\nexports.metaSymbol = Symbol('power-di-metadata');\nvar MetadataType = /** @class */ (function () {\n    function MetadataType() {\n        this.classInfo = {\n            extends: [],\n            implements: [],\n        };\n        this.injects = [];\n        this.postConstruct = [];\n        this.preDestroy = [];\n        this.aspects = [];\n    }\n    return MetadataType;\n}());\nexports.MetadataType = MetadataType;\n/**\n * get metadata of class\n * @param type type of class\n */\nfunction getMetadata(type) {\n    var metadata = Object.getOwnPropertyDescriptor(type, exports.metaSymbol);\n    if (!metadata || !metadata.value) {\n        Object.defineProperty(type, exports.metaSymbol, {\n            enumerable: false,\n            configurable: false,\n            value: new MetadataType(),\n        });\n        return getMetadata(type);\n    }\n    return metadata.value;\n}\nexports.getMetadata = getMetadata;\n/**\n * get the field of class metadata\n * @param type type of class\n * @param key field\n */\nfunction getMetadataField(type, key) {\n    var field = getMetadata(type)[key];\n    if (Array.isArray(field)) {\n        var superType = Object.getPrototypeOf(type);\n        if (superType) {\n            return getMetadataField(superType, key).concat(field);\n        }\n    }\n    return field;\n}\nexports.getMetadataField = getMetadataField;\n//# sourceMappingURL=metadata.js.map","import { IPublicApiEvent } from '@alilc/lowcode-types';\nimport { Logger } from '@alilc/lowcode-utils';\nimport EventEmitter from 'events';\n\nconst logger = new Logger({ level: 'warn', bizName: 'event-bus' });\nconst moduleLogger = new Logger({ level: 'warn', bizName: 'module-event-bus' });\n\nexport interface IEventBus extends IPublicApiEvent {\n  removeListener(event: string | symbol, listener: (...args: any[]) => void): any;\n  addListener(event: string | symbol, listener: (...args: any[]) => void): any;\n  setMaxListeners(n: number): any;\n  removeAllListeners(event?: string | symbol): any;\n}\n\nexport class EventBus implements IEventBus {\n  private readonly eventEmitter: EventEmitter;\n  private readonly name?: string;\n\n  /**\n   * 内核触发的事件名\n   */\n  readonly names = [];\n\n  constructor(emitter: EventEmitter, name?: string) {\n    this.eventEmitter = emitter;\n    this.name = name;\n  }\n\n  private getMsgPrefix(type: string): string {\n    if (this.name && this.name.length > 0) {\n      return `[${this.name}][event-${type}]`;\n    } else {\n      return `[*][event-${type}]`;\n    }\n  }\n\n  private getLogger(): Logger {\n    if (this.name && this.name.length > 0) {\n      return moduleLogger;\n    } else {\n      return logger;\n    }\n  }\n\n  /**\n   * 监听事件\n   * @param event 事件名称\n   * @param listener 事件回调\n   */\n  on(event: string, listener: (...args: any[]) => void): () => void {\n    this.eventEmitter.on(event, listener);\n    this.getLogger().debug(`${this.getMsgPrefix('on')} ${event}`);\n    return () => {\n      this.off(event, listener);\n    };\n  }\n\n  /**\n   * 取消监听事件\n   * @param event 事件名称\n   * @param listener 事件回调\n   */\n  off(event: string, listener: (...args: any[]) => void) {\n    this.eventEmitter.off(event, listener);\n    this.getLogger().debug(`${this.getMsgPrefix('off')} ${event}`);\n  }\n\n  /**\n   * 触发事件\n   * @param event 事件名称\n   * @param args 事件参数\n   * @returns\n   */\n  emit(event: string, ...args: any[]) {\n    this.eventEmitter.emit(event, ...args);\n    this.getLogger().debug(`${this.getMsgPrefix('emit')} name: ${event}, args: `, ...args);\n  }\n\n  removeListener(event: string | symbol, listener: (...args: any[]) => void): any {\n    return this.eventEmitter.removeListener(event, listener);\n  }\n\n  addListener(event: string | symbol, listener: (...args: any[]) => void): any {\n    return this.eventEmitter.addListener(event, listener);\n  }\n\n  setMaxListeners(n: number): any {\n    return this.eventEmitter.setMaxListeners(n);\n  }\n  removeAllListeners(event?: string | symbol): any {\n    return this.eventEmitter.removeAllListeners(event);\n  }\n}\n\nexport const createModuleEventBus = (moduleName: string, maxListeners?: number): IEventBus => {\n  const emitter = new EventEmitter();\n  if (maxListeners) {\n    emitter.setMaxListeners(maxListeners);\n  }\n  return new EventBus(emitter, moduleName);\n};","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export var ErrorKind;\n(function (ErrorKind) {\n    /** Argument is unclosed (e.g. `{0`) */\n    ErrorKind[ErrorKind[\"EXPECT_ARGUMENT_CLOSING_BRACE\"] = 1] = \"EXPECT_ARGUMENT_CLOSING_BRACE\";\n    /** Argument is empty (e.g. `{}`). */\n    ErrorKind[ErrorKind[\"EMPTY_ARGUMENT\"] = 2] = \"EMPTY_ARGUMENT\";\n    /** Argument is malformed (e.g. `{foo!}``) */\n    ErrorKind[ErrorKind[\"MALFORMED_ARGUMENT\"] = 3] = \"MALFORMED_ARGUMENT\";\n    /** Expect an argument type (e.g. `{foo,}`) */\n    ErrorKind[ErrorKind[\"EXPECT_ARGUMENT_TYPE\"] = 4] = \"EXPECT_ARGUMENT_TYPE\";\n    /** Unsupported argument type (e.g. `{foo,foo}`) */\n    ErrorKind[ErrorKind[\"INVALID_ARGUMENT_TYPE\"] = 5] = \"INVALID_ARGUMENT_TYPE\";\n    /** Expect an argument style (e.g. `{foo, number, }`) */\n    ErrorKind[ErrorKind[\"EXPECT_ARGUMENT_STYLE\"] = 6] = \"EXPECT_ARGUMENT_STYLE\";\n    /** The number skeleton is invalid. */\n    ErrorKind[ErrorKind[\"INVALID_NUMBER_SKELETON\"] = 7] = \"INVALID_NUMBER_SKELETON\";\n    /** The date time skeleton is invalid. */\n    ErrorKind[ErrorKind[\"INVALID_DATE_TIME_SKELETON\"] = 8] = \"INVALID_DATE_TIME_SKELETON\";\n    /** Exepct a number skeleton following the `::` (e.g. `{foo, number, ::}`) */\n    ErrorKind[ErrorKind[\"EXPECT_NUMBER_SKELETON\"] = 9] = \"EXPECT_NUMBER_SKELETON\";\n    /** Exepct a date time skeleton following the `::` (e.g. `{foo, date, ::}`) */\n    ErrorKind[ErrorKind[\"EXPECT_DATE_TIME_SKELETON\"] = 10] = \"EXPECT_DATE_TIME_SKELETON\";\n    /** Unmatched apostrophes in the argument style (e.g. `{foo, number, 'test`) */\n    ErrorKind[ErrorKind[\"UNCLOSED_QUOTE_IN_ARGUMENT_STYLE\"] = 11] = \"UNCLOSED_QUOTE_IN_ARGUMENT_STYLE\";\n    /** Missing select argument options (e.g. `{foo, select}`) */\n    ErrorKind[ErrorKind[\"EXPECT_SELECT_ARGUMENT_OPTIONS\"] = 12] = \"EXPECT_SELECT_ARGUMENT_OPTIONS\";\n    /** Expecting an offset value in `plural` or `selectordinal` argument (e.g `{foo, plural, offset}`) */\n    ErrorKind[ErrorKind[\"EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE\"] = 13] = \"EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE\";\n    /** Offset value in `plural` or `selectordinal` is invalid (e.g. `{foo, plural, offset: x}`) */\n    ErrorKind[ErrorKind[\"INVALID_PLURAL_ARGUMENT_OFFSET_VALUE\"] = 14] = \"INVALID_PLURAL_ARGUMENT_OFFSET_VALUE\";\n    /** Expecting a selector in `select` argument (e.g `{foo, select}`) */\n    ErrorKind[ErrorKind[\"EXPECT_SELECT_ARGUMENT_SELECTOR\"] = 15] = \"EXPECT_SELECT_ARGUMENT_SELECTOR\";\n    /** Expecting a selector in `plural` or `selectordinal` argument (e.g `{foo, plural}`) */\n    ErrorKind[ErrorKind[\"EXPECT_PLURAL_ARGUMENT_SELECTOR\"] = 16] = \"EXPECT_PLURAL_ARGUMENT_SELECTOR\";\n    /** Expecting a message fragment after the `select` selector (e.g. `{foo, select, apple}`) */\n    ErrorKind[ErrorKind[\"EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT\"] = 17] = \"EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT\";\n    /**\n     * Expecting a message fragment after the `plural` or `selectordinal` selector\n     * (e.g. `{foo, plural, one}`)\n     */\n    ErrorKind[ErrorKind[\"EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT\"] = 18] = \"EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT\";\n    /** Selector in `plural` or `selectordinal` is malformed (e.g. `{foo, plural, =x {#}}`) */\n    ErrorKind[ErrorKind[\"INVALID_PLURAL_ARGUMENT_SELECTOR\"] = 19] = \"INVALID_PLURAL_ARGUMENT_SELECTOR\";\n    /**\n     * Duplicate selectors in `plural` or `selectordinal` argument.\n     * (e.g. {foo, plural, one {#} one {#}})\n     */\n    ErrorKind[ErrorKind[\"DUPLICATE_PLURAL_ARGUMENT_SELECTOR\"] = 20] = \"DUPLICATE_PLURAL_ARGUMENT_SELECTOR\";\n    /** Duplicate selectors in `select` argument.\n     * (e.g. {foo, select, apple {apple} apple {apple}})\n     */\n    ErrorKind[ErrorKind[\"DUPLICATE_SELECT_ARGUMENT_SELECTOR\"] = 21] = \"DUPLICATE_SELECT_ARGUMENT_SELECTOR\";\n    /** Plural or select argument option must have `other` clause. */\n    ErrorKind[ErrorKind[\"MISSING_OTHER_CLAUSE\"] = 22] = \"MISSING_OTHER_CLAUSE\";\n    /** The tag is malformed. (e.g. `<bold!>foo</bold!>) */\n    ErrorKind[ErrorKind[\"INVALID_TAG\"] = 23] = \"INVALID_TAG\";\n    /** The tag name is invalid. (e.g. `<123>foo</123>`) */\n    ErrorKind[ErrorKind[\"INVALID_TAG_NAME\"] = 25] = \"INVALID_TAG_NAME\";\n    /** The closing tag does not match the opening tag. (e.g. `<bold>foo</italic>`) */\n    ErrorKind[ErrorKind[\"UNMATCHED_CLOSING_TAG\"] = 26] = \"UNMATCHED_CLOSING_TAG\";\n    /** The opening tag has unmatched closing tag. (e.g. `<bold>foo`) */\n    ErrorKind[ErrorKind[\"UNCLOSED_TAG\"] = 27] = \"UNCLOSED_TAG\";\n})(ErrorKind || (ErrorKind = {}));\n","export var TYPE;\n(function (TYPE) {\n    /**\n     * Raw text\n     */\n    TYPE[TYPE[\"literal\"] = 0] = \"literal\";\n    /**\n     * Variable w/o any format, e.g `var` in `this is a {var}`\n     */\n    TYPE[TYPE[\"argument\"] = 1] = \"argument\";\n    /**\n     * Variable w/ number format\n     */\n    TYPE[TYPE[\"number\"] = 2] = \"number\";\n    /**\n     * Variable w/ date format\n     */\n    TYPE[TYPE[\"date\"] = 3] = \"date\";\n    /**\n     * Variable w/ time format\n     */\n    TYPE[TYPE[\"time\"] = 4] = \"time\";\n    /**\n     * Variable w/ select format\n     */\n    TYPE[TYPE[\"select\"] = 5] = \"select\";\n    /**\n     * Variable w/ plural format\n     */\n    TYPE[TYPE[\"plural\"] = 6] = \"plural\";\n    /**\n     * Only possible within plural argument.\n     * This is the `#` symbol that will be substituted with the count.\n     */\n    TYPE[TYPE[\"pound\"] = 7] = \"pound\";\n    /**\n     * XML-like tag\n     */\n    TYPE[TYPE[\"tag\"] = 8] = \"tag\";\n})(TYPE || (TYPE = {}));\nexport var SKELETON_TYPE;\n(function (SKELETON_TYPE) {\n    SKELETON_TYPE[SKELETON_TYPE[\"number\"] = 0] = \"number\";\n    SKELETON_TYPE[SKELETON_TYPE[\"dateTime\"] = 1] = \"dateTime\";\n})(SKELETON_TYPE || (SKELETON_TYPE = {}));\n/**\n * Type Guards\n */\nexport function isLiteralElement(el) {\n    return el.type === TYPE.literal;\n}\nexport function isArgumentElement(el) {\n    return el.type === TYPE.argument;\n}\nexport function isNumberElement(el) {\n    return el.type === TYPE.number;\n}\nexport function isDateElement(el) {\n    return el.type === TYPE.date;\n}\nexport function isTimeElement(el) {\n    return el.type === TYPE.time;\n}\nexport function isSelectElement(el) {\n    return el.type === TYPE.select;\n}\nexport function isPluralElement(el) {\n    return el.type === TYPE.plural;\n}\nexport function isPoundElement(el) {\n    return el.type === TYPE.pound;\n}\nexport function isTagElement(el) {\n    return el.type === TYPE.tag;\n}\nexport function isNumberSkeleton(el) {\n    return !!(el && typeof el === 'object' && el.type === SKELETON_TYPE.number);\n}\nexport function isDateTimeSkeleton(el) {\n    return !!(el && typeof el === 'object' && el.type === SKELETON_TYPE.dateTime);\n}\nexport function createLiteralElement(value) {\n    return {\n        type: TYPE.literal,\n        value: value,\n    };\n}\nexport function createNumberElement(value, style) {\n    return {\n        type: TYPE.number,\n        value: value,\n        style: style,\n    };\n}\n","// @generated from regex-gen.ts\nexport var SPACE_SEPARATOR_REGEX = /[ \\xA0\\u1680\\u2000-\\u200A\\u202F\\u205F\\u3000]/;\nexport var WHITE_SPACE_REGEX = /[\\t-\\r \\x85\\u200E\\u200F\\u2028\\u2029]/;\n","/**\n * https://unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * Credit: https://github.com/caridy/intl-datetimeformat-pattern/blob/master/index.js\n * with some tweaks\n */\nvar DATE_TIME_REGEX = /(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;\n/**\n * Parse Date time skeleton into Intl.DateTimeFormatOptions\n * Ref: https://unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * @public\n * @param skeleton skeleton string\n */\nexport function parseDateTimeSkeleton(skeleton) {\n    var result = {};\n    skeleton.replace(DATE_TIME_REGEX, function (match) {\n        var len = match.length;\n        switch (match[0]) {\n            // Era\n            case 'G':\n                result.era = len === 4 ? 'long' : len === 5 ? 'narrow' : 'short';\n                break;\n            // Year\n            case 'y':\n                result.year = len === 2 ? '2-digit' : 'numeric';\n                break;\n            case 'Y':\n            case 'u':\n            case 'U':\n            case 'r':\n                throw new RangeError('`Y/u/U/r` (year) patterns are not supported, use `y` instead');\n            // Quarter\n            case 'q':\n            case 'Q':\n                throw new RangeError('`q/Q` (quarter) patterns are not supported');\n            // Month\n            case 'M':\n            case 'L':\n                result.month = ['numeric', '2-digit', 'short', 'long', 'narrow'][len - 1];\n                break;\n            // Week\n            case 'w':\n            case 'W':\n                throw new RangeError('`w/W` (week) patterns are not supported');\n            case 'd':\n                result.day = ['numeric', '2-digit'][len - 1];\n                break;\n            case 'D':\n            case 'F':\n            case 'g':\n                throw new RangeError('`D/F/g` (day) patterns are not supported, use `d` instead');\n            // Weekday\n            case 'E':\n                result.weekday = len === 4 ? 'short' : len === 5 ? 'narrow' : 'short';\n                break;\n            case 'e':\n                if (len < 4) {\n                    throw new RangeError('`e..eee` (weekday) patterns are not supported');\n                }\n                result.weekday = ['short', 'long', 'narrow', 'short'][len - 4];\n                break;\n            case 'c':\n                if (len < 4) {\n                    throw new RangeError('`c..ccc` (weekday) patterns are not supported');\n                }\n                result.weekday = ['short', 'long', 'narrow', 'short'][len - 4];\n                break;\n            // Period\n            case 'a': // AM, PM\n                result.hour12 = true;\n                break;\n            case 'b': // am, pm, noon, midnight\n            case 'B': // flexible day periods\n                throw new RangeError('`b/B` (period) patterns are not supported, use `a` instead');\n            // Hour\n            case 'h':\n                result.hourCycle = 'h12';\n                result.hour = ['numeric', '2-digit'][len - 1];\n                break;\n            case 'H':\n                result.hourCycle = 'h23';\n                result.hour = ['numeric', '2-digit'][len - 1];\n                break;\n            case 'K':\n                result.hourCycle = 'h11';\n                result.hour = ['numeric', '2-digit'][len - 1];\n                break;\n            case 'k':\n                result.hourCycle = 'h24';\n                result.hour = ['numeric', '2-digit'][len - 1];\n                break;\n            case 'j':\n            case 'J':\n            case 'C':\n                throw new RangeError('`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead');\n            // Minute\n            case 'm':\n                result.minute = ['numeric', '2-digit'][len - 1];\n                break;\n            // Second\n            case 's':\n                result.second = ['numeric', '2-digit'][len - 1];\n                break;\n            case 'S':\n            case 'A':\n                throw new RangeError('`S/A` (second) patterns are not supported, use `s` instead');\n            // Zone\n            case 'z': // 1..3, 4: specific non-location format\n                result.timeZoneName = len < 4 ? 'short' : 'long';\n                break;\n            case 'Z': // 1..3, 4, 5: The ISO8601 varios formats\n            case 'O': // 1, 4: miliseconds in day short, long\n            case 'v': // 1, 4: generic non-location format\n            case 'V': // 1, 2, 3, 4: time zone ID or city\n            case 'X': // 1, 2, 3, 4: The ISO8601 varios formats\n            case 'x': // 1, 2, 3, 4: The ISO8601 varios formats\n                throw new RangeError('`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead');\n        }\n        return '';\n    });\n    return result;\n}\n","// @generated from regex-gen.ts\nexport var WHITE_SPACE_REGEX = /[\\t-\\r \\x85\\u200E\\u200F\\u2028\\u2029]/i;\n","import { __assign } from \"tslib\";\nimport { WHITE_SPACE_REGEX } from './regex.generated';\nexport function parseNumberSkeletonFromString(skeleton) {\n    if (skeleton.length === 0) {\n        throw new Error('Number skeleton cannot be empty');\n    }\n    // Parse the skeleton\n    var stringTokens = skeleton\n        .split(WHITE_SPACE_REGEX)\n        .filter(function (x) { return x.length > 0; });\n    var tokens = [];\n    for (var _i = 0, stringTokens_1 = stringTokens; _i < stringTokens_1.length; _i++) {\n        var stringToken = stringTokens_1[_i];\n        var stemAndOptions = stringToken.split('/');\n        if (stemAndOptions.length === 0) {\n            throw new Error('Invalid number skeleton');\n        }\n        var stem = stemAndOptions[0], options = stemAndOptions.slice(1);\n        for (var _a = 0, options_1 = options; _a < options_1.length; _a++) {\n            var option = options_1[_a];\n            if (option.length === 0) {\n                throw new Error('Invalid number skeleton');\n            }\n        }\n        tokens.push({ stem: stem, options: options });\n    }\n    return tokens;\n}\nfunction icuUnitToEcma(unit) {\n    return unit.replace(/^(.*?)-/, '');\n}\nvar FRACTION_PRECISION_REGEX = /^\\.(?:(0+)(\\*)?|(#+)|(0+)(#+))$/g;\nvar SIGNIFICANT_PRECISION_REGEX = /^(@+)?(\\+|#+)?[rs]?$/g;\nvar INTEGER_WIDTH_REGEX = /(\\*)(0+)|(#+)(0+)|(0+)/g;\nvar CONCISE_INTEGER_WIDTH_REGEX = /^(0+)$/;\nfunction parseSignificantPrecision(str) {\n    var result = {};\n    if (str[str.length - 1] === 'r') {\n        result.roundingPriority = 'morePrecision';\n    }\n    else if (str[str.length - 1] === 's') {\n        result.roundingPriority = 'lessPrecision';\n    }\n    str.replace(SIGNIFICANT_PRECISION_REGEX, function (_, g1, g2) {\n        // @@@ case\n        if (typeof g2 !== 'string') {\n            result.minimumSignificantDigits = g1.length;\n            result.maximumSignificantDigits = g1.length;\n        }\n        // @@@+ case\n        else if (g2 === '+') {\n            result.minimumSignificantDigits = g1.length;\n        }\n        // .### case\n        else if (g1[0] === '#') {\n            result.maximumSignificantDigits = g1.length;\n        }\n        // .@@## or .@@@ case\n        else {\n            result.minimumSignificantDigits = g1.length;\n            result.maximumSignificantDigits =\n                g1.length + (typeof g2 === 'string' ? g2.length : 0);\n        }\n        return '';\n    });\n    return result;\n}\nfunction parseSign(str) {\n    switch (str) {\n        case 'sign-auto':\n            return {\n                signDisplay: 'auto',\n            };\n        case 'sign-accounting':\n        case '()':\n            return {\n                currencySign: 'accounting',\n            };\n        case 'sign-always':\n        case '+!':\n            return {\n                signDisplay: 'always',\n            };\n        case 'sign-accounting-always':\n        case '()!':\n            return {\n                signDisplay: 'always',\n                currencySign: 'accounting',\n            };\n        case 'sign-except-zero':\n        case '+?':\n            return {\n                signDisplay: 'exceptZero',\n            };\n        case 'sign-accounting-except-zero':\n        case '()?':\n            return {\n                signDisplay: 'exceptZero',\n                currencySign: 'accounting',\n            };\n        case 'sign-never':\n        case '+_':\n            return {\n                signDisplay: 'never',\n            };\n    }\n}\nfunction parseConciseScientificAndEngineeringStem(stem) {\n    // Engineering\n    var result;\n    if (stem[0] === 'E' && stem[1] === 'E') {\n        result = {\n            notation: 'engineering',\n        };\n        stem = stem.slice(2);\n    }\n    else if (stem[0] === 'E') {\n        result = {\n            notation: 'scientific',\n        };\n        stem = stem.slice(1);\n    }\n    if (result) {\n        var signDisplay = stem.slice(0, 2);\n        if (signDisplay === '+!') {\n            result.signDisplay = 'always';\n            stem = stem.slice(2);\n        }\n        else if (signDisplay === '+?') {\n            result.signDisplay = 'exceptZero';\n            stem = stem.slice(2);\n        }\n        if (!CONCISE_INTEGER_WIDTH_REGEX.test(stem)) {\n            throw new Error('Malformed concise eng/scientific notation');\n        }\n        result.minimumIntegerDigits = stem.length;\n    }\n    return result;\n}\nfunction parseNotationOptions(opt) {\n    var result = {};\n    var signOpts = parseSign(opt);\n    if (signOpts) {\n        return signOpts;\n    }\n    return result;\n}\n/**\n * https://github.com/unicode-org/icu/blob/master/docs/userguide/format_parse/numbers/skeletons.md#skeleton-stems-and-options\n */\nexport function parseNumberSkeleton(tokens) {\n    var result = {};\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n        var token = tokens_1[_i];\n        switch (token.stem) {\n            case 'percent':\n            case '%':\n                result.style = 'percent';\n                continue;\n            case '%x100':\n                result.style = 'percent';\n                result.scale = 100;\n                continue;\n            case 'currency':\n                result.style = 'currency';\n                result.currency = token.options[0];\n                continue;\n            case 'group-off':\n            case ',_':\n                result.useGrouping = false;\n                continue;\n            case 'precision-integer':\n            case '.':\n                result.maximumFractionDigits = 0;\n                continue;\n            case 'measure-unit':\n            case 'unit':\n                result.style = 'unit';\n                result.unit = icuUnitToEcma(token.options[0]);\n                continue;\n            case 'compact-short':\n            case 'K':\n                result.notation = 'compact';\n                result.compactDisplay = 'short';\n                continue;\n            case 'compact-long':\n            case 'KK':\n                result.notation = 'compact';\n                result.compactDisplay = 'long';\n                continue;\n            case 'scientific':\n                result = __assign(__assign(__assign({}, result), { notation: 'scientific' }), token.options.reduce(function (all, opt) { return (__assign(__assign({}, all), parseNotationOptions(opt))); }, {}));\n                continue;\n            case 'engineering':\n                result = __assign(__assign(__assign({}, result), { notation: 'engineering' }), token.options.reduce(function (all, opt) { return (__assign(__assign({}, all), parseNotationOptions(opt))); }, {}));\n                continue;\n            case 'notation-simple':\n                result.notation = 'standard';\n                continue;\n            // https://github.com/unicode-org/icu/blob/master/icu4c/source/i18n/unicode/unumberformatter.h\n            case 'unit-width-narrow':\n                result.currencyDisplay = 'narrowSymbol';\n                result.unitDisplay = 'narrow';\n                continue;\n            case 'unit-width-short':\n                result.currencyDisplay = 'code';\n                result.unitDisplay = 'short';\n                continue;\n            case 'unit-width-full-name':\n                result.currencyDisplay = 'name';\n                result.unitDisplay = 'long';\n                continue;\n            case 'unit-width-iso-code':\n                result.currencyDisplay = 'symbol';\n                continue;\n            case 'scale':\n                result.scale = parseFloat(token.options[0]);\n                continue;\n            // https://unicode-org.github.io/icu/userguide/format_parse/numbers/skeletons.html#integer-width\n            case 'integer-width':\n                if (token.options.length > 1) {\n                    throw new RangeError('integer-width stems only accept a single optional option');\n                }\n                token.options[0].replace(INTEGER_WIDTH_REGEX, function (_, g1, g2, g3, g4, g5) {\n                    if (g1) {\n                        result.minimumIntegerDigits = g2.length;\n                    }\n                    else if (g3 && g4) {\n                        throw new Error('We currently do not support maximum integer digits');\n                    }\n                    else if (g5) {\n                        throw new Error('We currently do not support exact integer digits');\n                    }\n                    return '';\n                });\n                continue;\n        }\n        // https://unicode-org.github.io/icu/userguide/format_parse/numbers/skeletons.html#integer-width\n        if (CONCISE_INTEGER_WIDTH_REGEX.test(token.stem)) {\n            result.minimumIntegerDigits = token.stem.length;\n            continue;\n        }\n        if (FRACTION_PRECISION_REGEX.test(token.stem)) {\n            // Precision\n            // https://unicode-org.github.io/icu/userguide/format_parse/numbers/skeletons.html#fraction-precision\n            // precision-integer case\n            if (token.options.length > 1) {\n                throw new RangeError('Fraction-precision stems only accept a single optional option');\n            }\n            token.stem.replace(FRACTION_PRECISION_REGEX, function (_, g1, g2, g3, g4, g5) {\n                // .000* case (before ICU67 it was .000+)\n                if (g2 === '*') {\n                    result.minimumFractionDigits = g1.length;\n                }\n                // .### case\n                else if (g3 && g3[0] === '#') {\n                    result.maximumFractionDigits = g3.length;\n                }\n                // .00## case\n                else if (g4 && g5) {\n                    result.minimumFractionDigits = g4.length;\n                    result.maximumFractionDigits = g4.length + g5.length;\n                }\n                else {\n                    result.minimumFractionDigits = g1.length;\n                    result.maximumFractionDigits = g1.length;\n                }\n                return '';\n            });\n            var opt = token.options[0];\n            // https://unicode-org.github.io/icu/userguide/format_parse/numbers/skeletons.html#trailing-zero-display\n            if (opt === 'w') {\n                result = __assign(__assign({}, result), { trailingZeroDisplay: 'stripIfInteger' });\n            }\n            else if (opt) {\n                result = __assign(__assign({}, result), parseSignificantPrecision(opt));\n            }\n            continue;\n        }\n        // https://unicode-org.github.io/icu/userguide/format_parse/numbers/skeletons.html#significant-digits-precision\n        if (SIGNIFICANT_PRECISION_REGEX.test(token.stem)) {\n            result = __assign(__assign({}, result), parseSignificantPrecision(token.stem));\n            continue;\n        }\n        var signOpts = parseSign(token.stem);\n        if (signOpts) {\n            result = __assign(__assign({}, result), signOpts);\n        }\n        var conciseScientificAndEngineeringOpts = parseConciseScientificAndEngineeringStem(token.stem);\n        if (conciseScientificAndEngineeringOpts) {\n            result = __assign(__assign({}, result), conciseScientificAndEngineeringOpts);\n        }\n    }\n    return result;\n}\n","// @generated from time-data-gen.ts\n// prettier-ignore  \nexport var timeData = {\n    \"AX\": [\n        \"H\"\n    ],\n    \"BQ\": [\n        \"H\"\n    ],\n    \"CP\": [\n        \"H\"\n    ],\n    \"CZ\": [\n        \"H\"\n    ],\n    \"DK\": [\n        \"H\"\n    ],\n    \"FI\": [\n        \"H\"\n    ],\n    \"ID\": [\n        \"H\"\n    ],\n    \"IS\": [\n        \"H\"\n    ],\n    \"ML\": [\n        \"H\"\n    ],\n    \"NE\": [\n        \"H\"\n    ],\n    \"RU\": [\n        \"H\"\n    ],\n    \"SE\": [\n        \"H\"\n    ],\n    \"SJ\": [\n        \"H\"\n    ],\n    \"SK\": [\n        \"H\"\n    ],\n    \"AS\": [\n        \"h\",\n        \"H\"\n    ],\n    \"BT\": [\n        \"h\",\n        \"H\"\n    ],\n    \"DJ\": [\n        \"h\",\n        \"H\"\n    ],\n    \"ER\": [\n        \"h\",\n        \"H\"\n    ],\n    \"GH\": [\n        \"h\",\n        \"H\"\n    ],\n    \"IN\": [\n        \"h\",\n        \"H\"\n    ],\n    \"LS\": [\n        \"h\",\n        \"H\"\n    ],\n    \"PG\": [\n        \"h\",\n        \"H\"\n    ],\n    \"PW\": [\n        \"h\",\n        \"H\"\n    ],\n    \"SO\": [\n        \"h\",\n        \"H\"\n    ],\n    \"TO\": [\n        \"h\",\n        \"H\"\n    ],\n    \"VU\": [\n        \"h\",\n        \"H\"\n    ],\n    \"WS\": [\n        \"h\",\n        \"H\"\n    ],\n    \"001\": [\n        \"H\",\n        \"h\"\n    ],\n    \"AL\": [\n        \"h\",\n        \"H\",\n        \"hB\"\n    ],\n    \"TD\": [\n        \"h\",\n        \"H\",\n        \"hB\"\n    ],\n    \"ca-ES\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"CF\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"CM\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"fr-CA\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"gl-ES\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"it-CH\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"it-IT\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"LU\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"NP\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"PF\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"SC\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"SM\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"SN\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"TF\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"VA\": [\n        \"H\",\n        \"h\",\n        \"hB\"\n    ],\n    \"CY\": [\n        \"h\",\n        \"H\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"GR\": [\n        \"h\",\n        \"H\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"CO\": [\n        \"h\",\n        \"H\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"DO\": [\n        \"h\",\n        \"H\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"KP\": [\n        \"h\",\n        \"H\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"KR\": [\n        \"h\",\n        \"H\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"NA\": [\n        \"h\",\n        \"H\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"PA\": [\n        \"h\",\n        \"H\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"PR\": [\n        \"h\",\n        \"H\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"VE\": [\n        \"h\",\n        \"H\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"AC\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"AI\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"BW\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"BZ\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"CC\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"CK\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"CX\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"DG\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"FK\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"GB\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"GG\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"GI\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"IE\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"IM\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"IO\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"JE\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"LT\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"MK\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"MN\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"MS\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"NF\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"NG\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"NR\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"NU\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"PN\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"SH\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"SX\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"TA\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"ZA\": [\n        \"H\",\n        \"h\",\n        \"hb\",\n        \"hB\"\n    ],\n    \"af-ZA\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"AR\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"CL\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"CR\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"CU\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"EA\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"es-BO\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"es-BR\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"es-EC\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"es-ES\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"es-GQ\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"es-PE\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"GT\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"HN\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"IC\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"KG\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"KM\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"LK\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"MA\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"MX\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"NI\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"PY\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"SV\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"UY\": [\n        \"H\",\n        \"h\",\n        \"hB\",\n        \"hb\"\n    ],\n    \"JP\": [\n        \"H\",\n        \"h\",\n        \"K\"\n    ],\n    \"AD\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"AM\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"AO\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"AT\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"AW\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"BE\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"BF\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"BJ\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"BL\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"BR\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"CG\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"CI\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"CV\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"DE\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"EE\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"FR\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"GA\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"GF\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"GN\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"GP\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"GW\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"HR\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"IL\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"IT\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"KZ\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"MC\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"MD\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"MF\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"MQ\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"MZ\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"NC\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"NL\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"PM\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"PT\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"RE\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"RO\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"SI\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"SR\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"ST\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"TG\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"TR\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"WF\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"YT\": [\n        \"H\",\n        \"hB\"\n    ],\n    \"BD\": [\n        \"h\",\n        \"hB\",\n        \"H\"\n    ],\n    \"PK\": [\n        \"h\",\n        \"hB\",\n        \"H\"\n    ],\n    \"AZ\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"BA\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"BG\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"CH\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"GE\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"LI\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"ME\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"RS\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"UA\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"UZ\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"XK\": [\n        \"H\",\n        \"hB\",\n        \"h\"\n    ],\n    \"AG\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"AU\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"BB\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"BM\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"BS\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"CA\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"DM\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"en-001\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"FJ\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"FM\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"GD\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"GM\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"GU\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"GY\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"JM\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"KI\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"KN\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"KY\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"LC\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"LR\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"MH\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"MP\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"MW\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"NZ\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"SB\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"SG\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"SL\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"SS\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"SZ\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"TC\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"TT\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"UM\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"US\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"VC\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"VG\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"VI\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"ZM\": [\n        \"h\",\n        \"hb\",\n        \"H\",\n        \"hB\"\n    ],\n    \"BO\": [\n        \"H\",\n        \"hB\",\n        \"h\",\n        \"hb\"\n    ],\n    \"EC\": [\n        \"H\",\n        \"hB\",\n        \"h\",\n        \"hb\"\n    ],\n    \"ES\": [\n        \"H\",\n        \"hB\",\n        \"h\",\n        \"hb\"\n    ],\n    \"GQ\": [\n        \"H\",\n        \"hB\",\n        \"h\",\n        \"hb\"\n    ],\n    \"PE\": [\n        \"H\",\n        \"hB\",\n        \"h\",\n        \"hb\"\n    ],\n    \"AE\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"ar-001\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"BH\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"DZ\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"EG\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"EH\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"HK\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"IQ\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"JO\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"KW\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"LB\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"LY\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"MO\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"MR\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"OM\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"PH\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"PS\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"QA\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"SA\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"SD\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"SY\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"TN\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"YE\": [\n        \"h\",\n        \"hB\",\n        \"hb\",\n        \"H\"\n    ],\n    \"AF\": [\n        \"H\",\n        \"hb\",\n        \"hB\",\n        \"h\"\n    ],\n    \"LA\": [\n        \"H\",\n        \"hb\",\n        \"hB\",\n        \"h\"\n    ],\n    \"CN\": [\n        \"H\",\n        \"hB\",\n        \"hb\",\n        \"h\"\n    ],\n    \"LV\": [\n        \"H\",\n        \"hB\",\n        \"hb\",\n        \"h\"\n    ],\n    \"TL\": [\n        \"H\",\n        \"hB\",\n        \"hb\",\n        \"h\"\n    ],\n    \"zu-ZA\": [\n        \"H\",\n        \"hB\",\n        \"hb\",\n        \"h\"\n    ],\n    \"CD\": [\n        \"hB\",\n        \"H\"\n    ],\n    \"IR\": [\n        \"hB\",\n        \"H\"\n    ],\n    \"hi-IN\": [\n        \"hB\",\n        \"h\",\n        \"H\"\n    ],\n    \"kn-IN\": [\n        \"hB\",\n        \"h\",\n        \"H\"\n    ],\n    \"ml-IN\": [\n        \"hB\",\n        \"h\",\n        \"H\"\n    ],\n    \"te-IN\": [\n        \"hB\",\n        \"h\",\n        \"H\"\n    ],\n    \"KH\": [\n        \"hB\",\n        \"h\",\n        \"H\",\n        \"hb\"\n    ],\n    \"ta-IN\": [\n        \"hB\",\n        \"h\",\n        \"hb\",\n        \"H\"\n    ],\n    \"BN\": [\n        \"hb\",\n        \"hB\",\n        \"h\",\n        \"H\"\n    ],\n    \"MY\": [\n        \"hb\",\n        \"hB\",\n        \"h\",\n        \"H\"\n    ],\n    \"ET\": [\n        \"hB\",\n        \"hb\",\n        \"h\",\n        \"H\"\n    ],\n    \"gu-IN\": [\n        \"hB\",\n        \"hb\",\n        \"h\",\n        \"H\"\n    ],\n    \"mr-IN\": [\n        \"hB\",\n        \"hb\",\n        \"h\",\n        \"H\"\n    ],\n    \"pa-IN\": [\n        \"hB\",\n        \"hb\",\n        \"h\",\n        \"H\"\n    ],\n    \"TW\": [\n        \"hB\",\n        \"hb\",\n        \"h\",\n        \"H\"\n    ],\n    \"KE\": [\n        \"hB\",\n        \"hb\",\n        \"H\",\n        \"h\"\n    ],\n    \"MM\": [\n        \"hB\",\n        \"hb\",\n        \"H\",\n        \"h\"\n    ],\n    \"TZ\": [\n        \"hB\",\n        \"hb\",\n        \"H\",\n        \"h\"\n    ],\n    \"UG\": [\n        \"hB\",\n        \"hb\",\n        \"H\",\n        \"h\"\n    ]\n};\n","var _a;\nimport { __assign } from \"tslib\";\nimport { ErrorKind } from './error';\nimport { SKELETON_TYPE, TYPE, } from './types';\nimport { SPACE_SEPARATOR_REGEX } from './regex.generated';\nimport { parseNumberSkeleton, parseNumberSkeletonFromString, parseDateTimeSkeleton, } from '@formatjs/icu-skeleton-parser';\nimport { getBestPattern } from './date-time-pattern-generator';\nvar SPACE_SEPARATOR_START_REGEX = new RegExp(\"^\".concat(SPACE_SEPARATOR_REGEX.source, \"*\"));\nvar SPACE_SEPARATOR_END_REGEX = new RegExp(\"\".concat(SPACE_SEPARATOR_REGEX.source, \"*$\"));\nfunction createLocation(start, end) {\n    return { start: start, end: end };\n}\n// #region Ponyfills\n// Consolidate these variables up top for easier toggling during debugging\nvar hasNativeStartsWith = !!String.prototype.startsWith;\nvar hasNativeFromCodePoint = !!String.fromCodePoint;\nvar hasNativeFromEntries = !!Object.fromEntries;\nvar hasNativeCodePointAt = !!String.prototype.codePointAt;\nvar hasTrimStart = !!String.prototype.trimStart;\nvar hasTrimEnd = !!String.prototype.trimEnd;\nvar hasNativeIsSafeInteger = !!Number.isSafeInteger;\nvar isSafeInteger = hasNativeIsSafeInteger\n    ? Number.isSafeInteger\n    : function (n) {\n        return (typeof n === 'number' &&\n            isFinite(n) &&\n            Math.floor(n) === n &&\n            Math.abs(n) <= 0x1fffffffffffff);\n    };\n// IE11 does not support y and u.\nvar REGEX_SUPPORTS_U_AND_Y = true;\ntry {\n    var re = RE('([^\\\\p{White_Space}\\\\p{Pattern_Syntax}]*)', 'yu');\n    /**\n     * legacy Edge or Xbox One browser\n     * Unicode flag support: supported\n     * Pattern_Syntax support: not supported\n     * See https://github.com/formatjs/formatjs/issues/2822\n     */\n    REGEX_SUPPORTS_U_AND_Y = ((_a = re.exec('a')) === null || _a === void 0 ? void 0 : _a[0]) === 'a';\n}\ncatch (_) {\n    REGEX_SUPPORTS_U_AND_Y = false;\n}\nvar startsWith = hasNativeStartsWith\n    ? // Native\n        function startsWith(s, search, position) {\n            return s.startsWith(search, position);\n        }\n    : // For IE11\n        function startsWith(s, search, position) {\n            return s.slice(position, position + search.length) === search;\n        };\nvar fromCodePoint = hasNativeFromCodePoint\n    ? String.fromCodePoint\n    : // IE11\n        function fromCodePoint() {\n            var codePoints = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                codePoints[_i] = arguments[_i];\n            }\n            var elements = '';\n            var length = codePoints.length;\n            var i = 0;\n            var code;\n            while (length > i) {\n                code = codePoints[i++];\n                if (code > 0x10ffff)\n                    throw RangeError(code + ' is not a valid code point');\n                elements +=\n                    code < 0x10000\n                        ? String.fromCharCode(code)\n                        : String.fromCharCode(((code -= 0x10000) >> 10) + 0xd800, (code % 0x400) + 0xdc00);\n            }\n            return elements;\n        };\nvar fromEntries = \n// native\nhasNativeFromEntries\n    ? Object.fromEntries\n    : // Ponyfill\n        function fromEntries(entries) {\n            var obj = {};\n            for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n                var _a = entries_1[_i], k = _a[0], v = _a[1];\n                obj[k] = v;\n            }\n            return obj;\n        };\nvar codePointAt = hasNativeCodePointAt\n    ? // Native\n        function codePointAt(s, index) {\n            return s.codePointAt(index);\n        }\n    : // IE 11\n        function codePointAt(s, index) {\n            var size = s.length;\n            if (index < 0 || index >= size) {\n                return undefined;\n            }\n            var first = s.charCodeAt(index);\n            var second;\n            return first < 0xd800 ||\n                first > 0xdbff ||\n                index + 1 === size ||\n                (second = s.charCodeAt(index + 1)) < 0xdc00 ||\n                second > 0xdfff\n                ? first\n                : ((first - 0xd800) << 10) + (second - 0xdc00) + 0x10000;\n        };\nvar trimStart = hasTrimStart\n    ? // Native\n        function trimStart(s) {\n            return s.trimStart();\n        }\n    : // Ponyfill\n        function trimStart(s) {\n            return s.replace(SPACE_SEPARATOR_START_REGEX, '');\n        };\nvar trimEnd = hasTrimEnd\n    ? // Native\n        function trimEnd(s) {\n            return s.trimEnd();\n        }\n    : // Ponyfill\n        function trimEnd(s) {\n            return s.replace(SPACE_SEPARATOR_END_REGEX, '');\n        };\n// Prevent minifier to translate new RegExp to literal form that might cause syntax error on IE11.\nfunction RE(s, flag) {\n    return new RegExp(s, flag);\n}\n// #endregion\nvar matchIdentifierAtIndex;\nif (REGEX_SUPPORTS_U_AND_Y) {\n    // Native\n    var IDENTIFIER_PREFIX_RE_1 = RE('([^\\\\p{White_Space}\\\\p{Pattern_Syntax}]*)', 'yu');\n    matchIdentifierAtIndex = function matchIdentifierAtIndex(s, index) {\n        var _a;\n        IDENTIFIER_PREFIX_RE_1.lastIndex = index;\n        var match = IDENTIFIER_PREFIX_RE_1.exec(s);\n        return (_a = match[1]) !== null && _a !== void 0 ? _a : '';\n    };\n}\nelse {\n    // IE11\n    matchIdentifierAtIndex = function matchIdentifierAtIndex(s, index) {\n        var match = [];\n        while (true) {\n            var c = codePointAt(s, index);\n            if (c === undefined || _isWhiteSpace(c) || _isPatternSyntax(c)) {\n                break;\n            }\n            match.push(c);\n            index += c >= 0x10000 ? 2 : 1;\n        }\n        return fromCodePoint.apply(void 0, match);\n    };\n}\nvar Parser = /** @class */ (function () {\n    function Parser(message, options) {\n        if (options === void 0) { options = {}; }\n        this.message = message;\n        this.position = { offset: 0, line: 1, column: 1 };\n        this.ignoreTag = !!options.ignoreTag;\n        this.locale = options.locale;\n        this.requiresOtherClause = !!options.requiresOtherClause;\n        this.shouldParseSkeletons = !!options.shouldParseSkeletons;\n    }\n    Parser.prototype.parse = function () {\n        if (this.offset() !== 0) {\n            throw Error('parser can only be used once');\n        }\n        return this.parseMessage(0, '', false);\n    };\n    Parser.prototype.parseMessage = function (nestingLevel, parentArgType, expectingCloseTag) {\n        var elements = [];\n        while (!this.isEOF()) {\n            var char = this.char();\n            if (char === 123 /* `{` */) {\n                var result = this.parseArgument(nestingLevel, expectingCloseTag);\n                if (result.err) {\n                    return result;\n                }\n                elements.push(result.val);\n            }\n            else if (char === 125 /* `}` */ && nestingLevel > 0) {\n                break;\n            }\n            else if (char === 35 /* `#` */ &&\n                (parentArgType === 'plural' || parentArgType === 'selectordinal')) {\n                var position = this.clonePosition();\n                this.bump();\n                elements.push({\n                    type: TYPE.pound,\n                    location: createLocation(position, this.clonePosition()),\n                });\n            }\n            else if (char === 60 /* `<` */ &&\n                !this.ignoreTag &&\n                this.peek() === 47 // char code for '/'\n            ) {\n                if (expectingCloseTag) {\n                    break;\n                }\n                else {\n                    return this.error(ErrorKind.UNMATCHED_CLOSING_TAG, createLocation(this.clonePosition(), this.clonePosition()));\n                }\n            }\n            else if (char === 60 /* `<` */ &&\n                !this.ignoreTag &&\n                _isAlpha(this.peek() || 0)) {\n                var result = this.parseTag(nestingLevel, parentArgType);\n                if (result.err) {\n                    return result;\n                }\n                elements.push(result.val);\n            }\n            else {\n                var result = this.parseLiteral(nestingLevel, parentArgType);\n                if (result.err) {\n                    return result;\n                }\n                elements.push(result.val);\n            }\n        }\n        return { val: elements, err: null };\n    };\n    /**\n     * A tag name must start with an ASCII lower/upper case letter. The grammar is based on the\n     * [custom element name][] except that a dash is NOT always mandatory and uppercase letters\n     * are accepted:\n     *\n     * ```\n     * tag ::= \"<\" tagName (whitespace)* \"/>\" | \"<\" tagName (whitespace)* \">\" message \"</\" tagName (whitespace)* \">\"\n     * tagName ::= [a-z] (PENChar)*\n     * PENChar ::=\n     *     \"-\" | \".\" | [0-9] | \"_\" | [a-z] | [A-Z] | #xB7 | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x37D] |\n     *     [#x37F-#x1FFF] | [#x200C-#x200D] | [#x203F-#x2040] | [#x2070-#x218F] | [#x2C00-#x2FEF] |\n     *     [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n     * ```\n     *\n     * [custom element name]: https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\n     * NOTE: We're a bit more lax here since HTML technically does not allow uppercase HTML element but we do\n     * since other tag-based engines like React allow it\n     */\n    Parser.prototype.parseTag = function (nestingLevel, parentArgType) {\n        var startPosition = this.clonePosition();\n        this.bump(); // `<`\n        var tagName = this.parseTagName();\n        this.bumpSpace();\n        if (this.bumpIf('/>')) {\n            // Self closing tag\n            return {\n                val: {\n                    type: TYPE.literal,\n                    value: \"<\".concat(tagName, \"/>\"),\n                    location: createLocation(startPosition, this.clonePosition()),\n                },\n                err: null,\n            };\n        }\n        else if (this.bumpIf('>')) {\n            var childrenResult = this.parseMessage(nestingLevel + 1, parentArgType, true);\n            if (childrenResult.err) {\n                return childrenResult;\n            }\n            var children = childrenResult.val;\n            // Expecting a close tag\n            var endTagStartPosition = this.clonePosition();\n            if (this.bumpIf('</')) {\n                if (this.isEOF() || !_isAlpha(this.char())) {\n                    return this.error(ErrorKind.INVALID_TAG, createLocation(endTagStartPosition, this.clonePosition()));\n                }\n                var closingTagNameStartPosition = this.clonePosition();\n                var closingTagName = this.parseTagName();\n                if (tagName !== closingTagName) {\n                    return this.error(ErrorKind.UNMATCHED_CLOSING_TAG, createLocation(closingTagNameStartPosition, this.clonePosition()));\n                }\n                this.bumpSpace();\n                if (!this.bumpIf('>')) {\n                    return this.error(ErrorKind.INVALID_TAG, createLocation(endTagStartPosition, this.clonePosition()));\n                }\n                return {\n                    val: {\n                        type: TYPE.tag,\n                        value: tagName,\n                        children: children,\n                        location: createLocation(startPosition, this.clonePosition()),\n                    },\n                    err: null,\n                };\n            }\n            else {\n                return this.error(ErrorKind.UNCLOSED_TAG, createLocation(startPosition, this.clonePosition()));\n            }\n        }\n        else {\n            return this.error(ErrorKind.INVALID_TAG, createLocation(startPosition, this.clonePosition()));\n        }\n    };\n    /**\n     * This method assumes that the caller has peeked ahead for the first tag character.\n     */\n    Parser.prototype.parseTagName = function () {\n        var startOffset = this.offset();\n        this.bump(); // the first tag name character\n        while (!this.isEOF() && _isPotentialElementNameChar(this.char())) {\n            this.bump();\n        }\n        return this.message.slice(startOffset, this.offset());\n    };\n    Parser.prototype.parseLiteral = function (nestingLevel, parentArgType) {\n        var start = this.clonePosition();\n        var value = '';\n        while (true) {\n            var parseQuoteResult = this.tryParseQuote(parentArgType);\n            if (parseQuoteResult) {\n                value += parseQuoteResult;\n                continue;\n            }\n            var parseUnquotedResult = this.tryParseUnquoted(nestingLevel, parentArgType);\n            if (parseUnquotedResult) {\n                value += parseUnquotedResult;\n                continue;\n            }\n            var parseLeftAngleResult = this.tryParseLeftAngleBracket();\n            if (parseLeftAngleResult) {\n                value += parseLeftAngleResult;\n                continue;\n            }\n            break;\n        }\n        var location = createLocation(start, this.clonePosition());\n        return {\n            val: { type: TYPE.literal, value: value, location: location },\n            err: null,\n        };\n    };\n    Parser.prototype.tryParseLeftAngleBracket = function () {\n        if (!this.isEOF() &&\n            this.char() === 60 /* `<` */ &&\n            (this.ignoreTag ||\n                // If at the opening tag or closing tag position, bail.\n                !_isAlphaOrSlash(this.peek() || 0))) {\n            this.bump(); // `<`\n            return '<';\n        }\n        return null;\n    };\n    /**\n     * Starting with ICU 4.8, an ASCII apostrophe only starts quoted text if it immediately precedes\n     * a character that requires quoting (that is, \"only where needed\"), and works the same in\n     * nested messages as on the top level of the pattern. The new behavior is otherwise compatible.\n     */\n    Parser.prototype.tryParseQuote = function (parentArgType) {\n        if (this.isEOF() || this.char() !== 39 /* `'` */) {\n            return null;\n        }\n        // Parse escaped char following the apostrophe, or early return if there is no escaped char.\n        // Check if is valid escaped character\n        switch (this.peek()) {\n            case 39 /* `'` */:\n                // double quote, should return as a single quote.\n                this.bump();\n                this.bump();\n                return \"'\";\n            // '{', '<', '>', '}'\n            case 123:\n            case 60:\n            case 62:\n            case 125:\n                break;\n            case 35: // '#'\n                if (parentArgType === 'plural' || parentArgType === 'selectordinal') {\n                    break;\n                }\n                return null;\n            default:\n                return null;\n        }\n        this.bump(); // apostrophe\n        var codePoints = [this.char()]; // escaped char\n        this.bump();\n        // read chars until the optional closing apostrophe is found\n        while (!this.isEOF()) {\n            var ch = this.char();\n            if (ch === 39 /* `'` */) {\n                if (this.peek() === 39 /* `'` */) {\n                    codePoints.push(39);\n                    // Bump one more time because we need to skip 2 characters.\n                    this.bump();\n                }\n                else {\n                    // Optional closing apostrophe.\n                    this.bump();\n                    break;\n                }\n            }\n            else {\n                codePoints.push(ch);\n            }\n            this.bump();\n        }\n        return fromCodePoint.apply(void 0, codePoints);\n    };\n    Parser.prototype.tryParseUnquoted = function (nestingLevel, parentArgType) {\n        if (this.isEOF()) {\n            return null;\n        }\n        var ch = this.char();\n        if (ch === 60 /* `<` */ ||\n            ch === 123 /* `{` */ ||\n            (ch === 35 /* `#` */ &&\n                (parentArgType === 'plural' || parentArgType === 'selectordinal')) ||\n            (ch === 125 /* `}` */ && nestingLevel > 0)) {\n            return null;\n        }\n        else {\n            this.bump();\n            return fromCodePoint(ch);\n        }\n    };\n    Parser.prototype.parseArgument = function (nestingLevel, expectingCloseTag) {\n        var openingBracePosition = this.clonePosition();\n        this.bump(); // `{`\n        this.bumpSpace();\n        if (this.isEOF()) {\n            return this.error(ErrorKind.EXPECT_ARGUMENT_CLOSING_BRACE, createLocation(openingBracePosition, this.clonePosition()));\n        }\n        if (this.char() === 125 /* `}` */) {\n            this.bump();\n            return this.error(ErrorKind.EMPTY_ARGUMENT, createLocation(openingBracePosition, this.clonePosition()));\n        }\n        // argument name\n        var value = this.parseIdentifierIfPossible().value;\n        if (!value) {\n            return this.error(ErrorKind.MALFORMED_ARGUMENT, createLocation(openingBracePosition, this.clonePosition()));\n        }\n        this.bumpSpace();\n        if (this.isEOF()) {\n            return this.error(ErrorKind.EXPECT_ARGUMENT_CLOSING_BRACE, createLocation(openingBracePosition, this.clonePosition()));\n        }\n        switch (this.char()) {\n            // Simple argument: `{name}`\n            case 125 /* `}` */: {\n                this.bump(); // `}`\n                return {\n                    val: {\n                        type: TYPE.argument,\n                        // value does not include the opening and closing braces.\n                        value: value,\n                        location: createLocation(openingBracePosition, this.clonePosition()),\n                    },\n                    err: null,\n                };\n            }\n            // Argument with options: `{name, format, ...}`\n            case 44 /* `,` */: {\n                this.bump(); // `,`\n                this.bumpSpace();\n                if (this.isEOF()) {\n                    return this.error(ErrorKind.EXPECT_ARGUMENT_CLOSING_BRACE, createLocation(openingBracePosition, this.clonePosition()));\n                }\n                return this.parseArgumentOptions(nestingLevel, expectingCloseTag, value, openingBracePosition);\n            }\n            default:\n                return this.error(ErrorKind.MALFORMED_ARGUMENT, createLocation(openingBracePosition, this.clonePosition()));\n        }\n    };\n    /**\n     * Advance the parser until the end of the identifier, if it is currently on\n     * an identifier character. Return an empty string otherwise.\n     */\n    Parser.prototype.parseIdentifierIfPossible = function () {\n        var startingPosition = this.clonePosition();\n        var startOffset = this.offset();\n        var value = matchIdentifierAtIndex(this.message, startOffset);\n        var endOffset = startOffset + value.length;\n        this.bumpTo(endOffset);\n        var endPosition = this.clonePosition();\n        var location = createLocation(startingPosition, endPosition);\n        return { value: value, location: location };\n    };\n    Parser.prototype.parseArgumentOptions = function (nestingLevel, expectingCloseTag, value, openingBracePosition) {\n        var _a;\n        // Parse this range:\n        // {name, type, style}\n        //        ^---^\n        var typeStartPosition = this.clonePosition();\n        var argType = this.parseIdentifierIfPossible().value;\n        var typeEndPosition = this.clonePosition();\n        switch (argType) {\n            case '':\n                // Expecting a style string number, date, time, plural, selectordinal, or select.\n                return this.error(ErrorKind.EXPECT_ARGUMENT_TYPE, createLocation(typeStartPosition, typeEndPosition));\n            case 'number':\n            case 'date':\n            case 'time': {\n                // Parse this range:\n                // {name, number, style}\n                //              ^-------^\n                this.bumpSpace();\n                var styleAndLocation = null;\n                if (this.bumpIf(',')) {\n                    this.bumpSpace();\n                    var styleStartPosition = this.clonePosition();\n                    var result = this.parseSimpleArgStyleIfPossible();\n                    if (result.err) {\n                        return result;\n                    }\n                    var style = trimEnd(result.val);\n                    if (style.length === 0) {\n                        return this.error(ErrorKind.EXPECT_ARGUMENT_STYLE, createLocation(this.clonePosition(), this.clonePosition()));\n                    }\n                    var styleLocation = createLocation(styleStartPosition, this.clonePosition());\n                    styleAndLocation = { style: style, styleLocation: styleLocation };\n                }\n                var argCloseResult = this.tryParseArgumentClose(openingBracePosition);\n                if (argCloseResult.err) {\n                    return argCloseResult;\n                }\n                var location_1 = createLocation(openingBracePosition, this.clonePosition());\n                // Extract style or skeleton\n                if (styleAndLocation && startsWith(styleAndLocation === null || styleAndLocation === void 0 ? void 0 : styleAndLocation.style, '::', 0)) {\n                    // Skeleton starts with `::`.\n                    var skeleton = trimStart(styleAndLocation.style.slice(2));\n                    if (argType === 'number') {\n                        var result = this.parseNumberSkeletonFromString(skeleton, styleAndLocation.styleLocation);\n                        if (result.err) {\n                            return result;\n                        }\n                        return {\n                            val: { type: TYPE.number, value: value, location: location_1, style: result.val },\n                            err: null,\n                        };\n                    }\n                    else {\n                        if (skeleton.length === 0) {\n                            return this.error(ErrorKind.EXPECT_DATE_TIME_SKELETON, location_1);\n                        }\n                        var dateTimePattern = skeleton;\n                        // Get \"best match\" pattern only if locale is passed, if not, let it\n                        // pass as-is where `parseDateTimeSkeleton()` will throw an error\n                        // for unsupported patterns.\n                        if (this.locale) {\n                            dateTimePattern = getBestPattern(skeleton, this.locale);\n                        }\n                        var style = {\n                            type: SKELETON_TYPE.dateTime,\n                            pattern: dateTimePattern,\n                            location: styleAndLocation.styleLocation,\n                            parsedOptions: this.shouldParseSkeletons\n                                ? parseDateTimeSkeleton(dateTimePattern)\n                                : {},\n                        };\n                        var type = argType === 'date' ? TYPE.date : TYPE.time;\n                        return {\n                            val: { type: type, value: value, location: location_1, style: style },\n                            err: null,\n                        };\n                    }\n                }\n                // Regular style or no style.\n                return {\n                    val: {\n                        type: argType === 'number'\n                            ? TYPE.number\n                            : argType === 'date'\n                                ? TYPE.date\n                                : TYPE.time,\n                        value: value,\n                        location: location_1,\n                        style: (_a = styleAndLocation === null || styleAndLocation === void 0 ? void 0 : styleAndLocation.style) !== null && _a !== void 0 ? _a : null,\n                    },\n                    err: null,\n                };\n            }\n            case 'plural':\n            case 'selectordinal':\n            case 'select': {\n                // Parse this range:\n                // {name, plural, options}\n                //              ^---------^\n                var typeEndPosition_1 = this.clonePosition();\n                this.bumpSpace();\n                if (!this.bumpIf(',')) {\n                    return this.error(ErrorKind.EXPECT_SELECT_ARGUMENT_OPTIONS, createLocation(typeEndPosition_1, __assign({}, typeEndPosition_1)));\n                }\n                this.bumpSpace();\n                // Parse offset:\n                // {name, plural, offset:1, options}\n                //                ^-----^\n                //\n                // or the first option:\n                //\n                // {name, plural, one {...} other {...}}\n                //                ^--^\n                var identifierAndLocation = this.parseIdentifierIfPossible();\n                var pluralOffset = 0;\n                if (argType !== 'select' && identifierAndLocation.value === 'offset') {\n                    if (!this.bumpIf(':')) {\n                        return this.error(ErrorKind.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE, createLocation(this.clonePosition(), this.clonePosition()));\n                    }\n                    this.bumpSpace();\n                    var result = this.tryParseDecimalInteger(ErrorKind.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE, ErrorKind.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);\n                    if (result.err) {\n                        return result;\n                    }\n                    // Parse another identifier for option parsing\n                    this.bumpSpace();\n                    identifierAndLocation = this.parseIdentifierIfPossible();\n                    pluralOffset = result.val;\n                }\n                var optionsResult = this.tryParsePluralOrSelectOptions(nestingLevel, argType, expectingCloseTag, identifierAndLocation);\n                if (optionsResult.err) {\n                    return optionsResult;\n                }\n                var argCloseResult = this.tryParseArgumentClose(openingBracePosition);\n                if (argCloseResult.err) {\n                    return argCloseResult;\n                }\n                var location_2 = createLocation(openingBracePosition, this.clonePosition());\n                if (argType === 'select') {\n                    return {\n                        val: {\n                            type: TYPE.select,\n                            value: value,\n                            options: fromEntries(optionsResult.val),\n                            location: location_2,\n                        },\n                        err: null,\n                    };\n                }\n                else {\n                    return {\n                        val: {\n                            type: TYPE.plural,\n                            value: value,\n                            options: fromEntries(optionsResult.val),\n                            offset: pluralOffset,\n                            pluralType: argType === 'plural' ? 'cardinal' : 'ordinal',\n                            location: location_2,\n                        },\n                        err: null,\n                    };\n                }\n            }\n            default:\n                return this.error(ErrorKind.INVALID_ARGUMENT_TYPE, createLocation(typeStartPosition, typeEndPosition));\n        }\n    };\n    Parser.prototype.tryParseArgumentClose = function (openingBracePosition) {\n        // Parse: {value, number, ::currency/GBP }\n        //\n        if (this.isEOF() || this.char() !== 125 /* `}` */) {\n            return this.error(ErrorKind.EXPECT_ARGUMENT_CLOSING_BRACE, createLocation(openingBracePosition, this.clonePosition()));\n        }\n        this.bump(); // `}`\n        return { val: true, err: null };\n    };\n    /**\n     * See: https://github.com/unicode-org/icu/blob/af7ed1f6d2298013dc303628438ec4abe1f16479/icu4c/source/common/messagepattern.cpp#L659\n     */\n    Parser.prototype.parseSimpleArgStyleIfPossible = function () {\n        var nestedBraces = 0;\n        var startPosition = this.clonePosition();\n        while (!this.isEOF()) {\n            var ch = this.char();\n            switch (ch) {\n                case 39 /* `'` */: {\n                    // Treat apostrophe as quoting but include it in the style part.\n                    // Find the end of the quoted literal text.\n                    this.bump();\n                    var apostrophePosition = this.clonePosition();\n                    if (!this.bumpUntil(\"'\")) {\n                        return this.error(ErrorKind.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE, createLocation(apostrophePosition, this.clonePosition()));\n                    }\n                    this.bump();\n                    break;\n                }\n                case 123 /* `{` */: {\n                    nestedBraces += 1;\n                    this.bump();\n                    break;\n                }\n                case 125 /* `}` */: {\n                    if (nestedBraces > 0) {\n                        nestedBraces -= 1;\n                    }\n                    else {\n                        return {\n                            val: this.message.slice(startPosition.offset, this.offset()),\n                            err: null,\n                        };\n                    }\n                    break;\n                }\n                default:\n                    this.bump();\n                    break;\n            }\n        }\n        return {\n            val: this.message.slice(startPosition.offset, this.offset()),\n            err: null,\n        };\n    };\n    Parser.prototype.parseNumberSkeletonFromString = function (skeleton, location) {\n        var tokens = [];\n        try {\n            tokens = parseNumberSkeletonFromString(skeleton);\n        }\n        catch (e) {\n            return this.error(ErrorKind.INVALID_NUMBER_SKELETON, location);\n        }\n        return {\n            val: {\n                type: SKELETON_TYPE.number,\n                tokens: tokens,\n                location: location,\n                parsedOptions: this.shouldParseSkeletons\n                    ? parseNumberSkeleton(tokens)\n                    : {},\n            },\n            err: null,\n        };\n    };\n    /**\n     * @param nesting_level The current nesting level of messages.\n     *     This can be positive when parsing message fragment in select or plural argument options.\n     * @param parent_arg_type The parent argument's type.\n     * @param parsed_first_identifier If provided, this is the first identifier-like selector of\n     *     the argument. It is a by-product of a previous parsing attempt.\n     * @param expecting_close_tag If true, this message is directly or indirectly nested inside\n     *     between a pair of opening and closing tags. The nested message will not parse beyond\n     *     the closing tag boundary.\n     */\n    Parser.prototype.tryParsePluralOrSelectOptions = function (nestingLevel, parentArgType, expectCloseTag, parsedFirstIdentifier) {\n        var _a;\n        var hasOtherClause = false;\n        var options = [];\n        var parsedSelectors = new Set();\n        var selector = parsedFirstIdentifier.value, selectorLocation = parsedFirstIdentifier.location;\n        // Parse:\n        // one {one apple}\n        // ^--^\n        while (true) {\n            if (selector.length === 0) {\n                var startPosition = this.clonePosition();\n                if (parentArgType !== 'select' && this.bumpIf('=')) {\n                    // Try parse `={number}` selector\n                    var result = this.tryParseDecimalInteger(ErrorKind.EXPECT_PLURAL_ARGUMENT_SELECTOR, ErrorKind.INVALID_PLURAL_ARGUMENT_SELECTOR);\n                    if (result.err) {\n                        return result;\n                    }\n                    selectorLocation = createLocation(startPosition, this.clonePosition());\n                    selector = this.message.slice(startPosition.offset, this.offset());\n                }\n                else {\n                    break;\n                }\n            }\n            // Duplicate selector clauses\n            if (parsedSelectors.has(selector)) {\n                return this.error(parentArgType === 'select'\n                    ? ErrorKind.DUPLICATE_SELECT_ARGUMENT_SELECTOR\n                    : ErrorKind.DUPLICATE_PLURAL_ARGUMENT_SELECTOR, selectorLocation);\n            }\n            if (selector === 'other') {\n                hasOtherClause = true;\n            }\n            // Parse:\n            // one {one apple}\n            //     ^----------^\n            this.bumpSpace();\n            var openingBracePosition = this.clonePosition();\n            if (!this.bumpIf('{')) {\n                return this.error(parentArgType === 'select'\n                    ? ErrorKind.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT\n                    : ErrorKind.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT, createLocation(this.clonePosition(), this.clonePosition()));\n            }\n            var fragmentResult = this.parseMessage(nestingLevel + 1, parentArgType, expectCloseTag);\n            if (fragmentResult.err) {\n                return fragmentResult;\n            }\n            var argCloseResult = this.tryParseArgumentClose(openingBracePosition);\n            if (argCloseResult.err) {\n                return argCloseResult;\n            }\n            options.push([\n                selector,\n                {\n                    value: fragmentResult.val,\n                    location: createLocation(openingBracePosition, this.clonePosition()),\n                },\n            ]);\n            // Keep track of the existing selectors\n            parsedSelectors.add(selector);\n            // Prep next selector clause.\n            this.bumpSpace();\n            (_a = this.parseIdentifierIfPossible(), selector = _a.value, selectorLocation = _a.location);\n        }\n        if (options.length === 0) {\n            return this.error(parentArgType === 'select'\n                ? ErrorKind.EXPECT_SELECT_ARGUMENT_SELECTOR\n                : ErrorKind.EXPECT_PLURAL_ARGUMENT_SELECTOR, createLocation(this.clonePosition(), this.clonePosition()));\n        }\n        if (this.requiresOtherClause && !hasOtherClause) {\n            return this.error(ErrorKind.MISSING_OTHER_CLAUSE, createLocation(this.clonePosition(), this.clonePosition()));\n        }\n        return { val: options, err: null };\n    };\n    Parser.prototype.tryParseDecimalInteger = function (expectNumberError, invalidNumberError) {\n        var sign = 1;\n        var startingPosition = this.clonePosition();\n        if (this.bumpIf('+')) {\n        }\n        else if (this.bumpIf('-')) {\n            sign = -1;\n        }\n        var hasDigits = false;\n        var decimal = 0;\n        while (!this.isEOF()) {\n            var ch = this.char();\n            if (ch >= 48 /* `0` */ && ch <= 57 /* `9` */) {\n                hasDigits = true;\n                decimal = decimal * 10 + (ch - 48);\n                this.bump();\n            }\n            else {\n                break;\n            }\n        }\n        var location = createLocation(startingPosition, this.clonePosition());\n        if (!hasDigits) {\n            return this.error(expectNumberError, location);\n        }\n        decimal *= sign;\n        if (!isSafeInteger(decimal)) {\n            return this.error(invalidNumberError, location);\n        }\n        return { val: decimal, err: null };\n    };\n    Parser.prototype.offset = function () {\n        return this.position.offset;\n    };\n    Parser.prototype.isEOF = function () {\n        return this.offset() === this.message.length;\n    };\n    Parser.prototype.clonePosition = function () {\n        // This is much faster than `Object.assign` or spread.\n        return {\n            offset: this.position.offset,\n            line: this.position.line,\n            column: this.position.column,\n        };\n    };\n    /**\n     * Return the code point at the current position of the parser.\n     * Throws if the index is out of bound.\n     */\n    Parser.prototype.char = function () {\n        var offset = this.position.offset;\n        if (offset >= this.message.length) {\n            throw Error('out of bound');\n        }\n        var code = codePointAt(this.message, offset);\n        if (code === undefined) {\n            throw Error(\"Offset \".concat(offset, \" is at invalid UTF-16 code unit boundary\"));\n        }\n        return code;\n    };\n    Parser.prototype.error = function (kind, location) {\n        return {\n            val: null,\n            err: {\n                kind: kind,\n                message: this.message,\n                location: location,\n            },\n        };\n    };\n    /** Bump the parser to the next UTF-16 code unit. */\n    Parser.prototype.bump = function () {\n        if (this.isEOF()) {\n            return;\n        }\n        var code = this.char();\n        if (code === 10 /* '\\n' */) {\n            this.position.line += 1;\n            this.position.column = 1;\n            this.position.offset += 1;\n        }\n        else {\n            this.position.column += 1;\n            // 0 ~ 0x10000 -> unicode BMP, otherwise skip the surrogate pair.\n            this.position.offset += code < 0x10000 ? 1 : 2;\n        }\n    };\n    /**\n     * If the substring starting at the current position of the parser has\n     * the given prefix, then bump the parser to the character immediately\n     * following the prefix and return true. Otherwise, don't bump the parser\n     * and return false.\n     */\n    Parser.prototype.bumpIf = function (prefix) {\n        if (startsWith(this.message, prefix, this.offset())) {\n            for (var i = 0; i < prefix.length; i++) {\n                this.bump();\n            }\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Bump the parser until the pattern character is found and return `true`.\n     * Otherwise bump to the end of the file and return `false`.\n     */\n    Parser.prototype.bumpUntil = function (pattern) {\n        var currentOffset = this.offset();\n        var index = this.message.indexOf(pattern, currentOffset);\n        if (index >= 0) {\n            this.bumpTo(index);\n            return true;\n        }\n        else {\n            this.bumpTo(this.message.length);\n            return false;\n        }\n    };\n    /**\n     * Bump the parser to the target offset.\n     * If target offset is beyond the end of the input, bump the parser to the end of the input.\n     */\n    Parser.prototype.bumpTo = function (targetOffset) {\n        if (this.offset() > targetOffset) {\n            throw Error(\"targetOffset \".concat(targetOffset, \" must be greater than or equal to the current offset \").concat(this.offset()));\n        }\n        targetOffset = Math.min(targetOffset, this.message.length);\n        while (true) {\n            var offset = this.offset();\n            if (offset === targetOffset) {\n                break;\n            }\n            if (offset > targetOffset) {\n                throw Error(\"targetOffset \".concat(targetOffset, \" is at invalid UTF-16 code unit boundary\"));\n            }\n            this.bump();\n            if (this.isEOF()) {\n                break;\n            }\n        }\n    };\n    /** advance the parser through all whitespace to the next non-whitespace code unit. */\n    Parser.prototype.bumpSpace = function () {\n        while (!this.isEOF() && _isWhiteSpace(this.char())) {\n            this.bump();\n        }\n    };\n    /**\n     * Peek at the *next* Unicode codepoint in the input without advancing the parser.\n     * If the input has been exhausted, then this returns null.\n     */\n    Parser.prototype.peek = function () {\n        if (this.isEOF()) {\n            return null;\n        }\n        var code = this.char();\n        var offset = this.offset();\n        var nextCode = this.message.charCodeAt(offset + (code >= 0x10000 ? 2 : 1));\n        return nextCode !== null && nextCode !== void 0 ? nextCode : null;\n    };\n    return Parser;\n}());\nexport { Parser };\n/**\n * This check if codepoint is alphabet (lower & uppercase)\n * @param codepoint\n * @returns\n */\nfunction _isAlpha(codepoint) {\n    return ((codepoint >= 97 && codepoint <= 122) ||\n        (codepoint >= 65 && codepoint <= 90));\n}\nfunction _isAlphaOrSlash(codepoint) {\n    return _isAlpha(codepoint) || codepoint === 47; /* '/' */\n}\n/** See `parseTag` function docs. */\nfunction _isPotentialElementNameChar(c) {\n    return (c === 45 /* '-' */ ||\n        c === 46 /* '.' */ ||\n        (c >= 48 && c <= 57) /* 0..9 */ ||\n        c === 95 /* '_' */ ||\n        (c >= 97 && c <= 122) /** a..z */ ||\n        (c >= 65 && c <= 90) /* A..Z */ ||\n        c == 0xb7 ||\n        (c >= 0xc0 && c <= 0xd6) ||\n        (c >= 0xd8 && c <= 0xf6) ||\n        (c >= 0xf8 && c <= 0x37d) ||\n        (c >= 0x37f && c <= 0x1fff) ||\n        (c >= 0x200c && c <= 0x200d) ||\n        (c >= 0x203f && c <= 0x2040) ||\n        (c >= 0x2070 && c <= 0x218f) ||\n        (c >= 0x2c00 && c <= 0x2fef) ||\n        (c >= 0x3001 && c <= 0xd7ff) ||\n        (c >= 0xf900 && c <= 0xfdcf) ||\n        (c >= 0xfdf0 && c <= 0xfffd) ||\n        (c >= 0x10000 && c <= 0xeffff));\n}\n/**\n * Code point equivalent of regex `\\p{White_Space}`.\n * From: https://www.unicode.org/Public/UCD/latest/ucd/PropList.txt\n */\nfunction _isWhiteSpace(c) {\n    return ((c >= 0x0009 && c <= 0x000d) ||\n        c === 0x0020 ||\n        c === 0x0085 ||\n        (c >= 0x200e && c <= 0x200f) ||\n        c === 0x2028 ||\n        c === 0x2029);\n}\n/**\n * Code point equivalent of regex `\\p{Pattern_Syntax}`.\n * See https://www.unicode.org/Public/UCD/latest/ucd/PropList.txt\n */\nfunction _isPatternSyntax(c) {\n    return ((c >= 0x0021 && c <= 0x0023) ||\n        c === 0x0024 ||\n        (c >= 0x0025 && c <= 0x0027) ||\n        c === 0x0028 ||\n        c === 0x0029 ||\n        c === 0x002a ||\n        c === 0x002b ||\n        c === 0x002c ||\n        c === 0x002d ||\n        (c >= 0x002e && c <= 0x002f) ||\n        (c >= 0x003a && c <= 0x003b) ||\n        (c >= 0x003c && c <= 0x003e) ||\n        (c >= 0x003f && c <= 0x0040) ||\n        c === 0x005b ||\n        c === 0x005c ||\n        c === 0x005d ||\n        c === 0x005e ||\n        c === 0x0060 ||\n        c === 0x007b ||\n        c === 0x007c ||\n        c === 0x007d ||\n        c === 0x007e ||\n        c === 0x00a1 ||\n        (c >= 0x00a2 && c <= 0x00a5) ||\n        c === 0x00a6 ||\n        c === 0x00a7 ||\n        c === 0x00a9 ||\n        c === 0x00ab ||\n        c === 0x00ac ||\n        c === 0x00ae ||\n        c === 0x00b0 ||\n        c === 0x00b1 ||\n        c === 0x00b6 ||\n        c === 0x00bb ||\n        c === 0x00bf ||\n        c === 0x00d7 ||\n        c === 0x00f7 ||\n        (c >= 0x2010 && c <= 0x2015) ||\n        (c >= 0x2016 && c <= 0x2017) ||\n        c === 0x2018 ||\n        c === 0x2019 ||\n        c === 0x201a ||\n        (c >= 0x201b && c <= 0x201c) ||\n        c === 0x201d ||\n        c === 0x201e ||\n        c === 0x201f ||\n        (c >= 0x2020 && c <= 0x2027) ||\n        (c >= 0x2030 && c <= 0x2038) ||\n        c === 0x2039 ||\n        c === 0x203a ||\n        (c >= 0x203b && c <= 0x203e) ||\n        (c >= 0x2041 && c <= 0x2043) ||\n        c === 0x2044 ||\n        c === 0x2045 ||\n        c === 0x2046 ||\n        (c >= 0x2047 && c <= 0x2051) ||\n        c === 0x2052 ||\n        c === 0x2053 ||\n        (c >= 0x2055 && c <= 0x205e) ||\n        (c >= 0x2190 && c <= 0x2194) ||\n        (c >= 0x2195 && c <= 0x2199) ||\n        (c >= 0x219a && c <= 0x219b) ||\n        (c >= 0x219c && c <= 0x219f) ||\n        c === 0x21a0 ||\n        (c >= 0x21a1 && c <= 0x21a2) ||\n        c === 0x21a3 ||\n        (c >= 0x21a4 && c <= 0x21a5) ||\n        c === 0x21a6 ||\n        (c >= 0x21a7 && c <= 0x21ad) ||\n        c === 0x21ae ||\n        (c >= 0x21af && c <= 0x21cd) ||\n        (c >= 0x21ce && c <= 0x21cf) ||\n        (c >= 0x21d0 && c <= 0x21d1) ||\n        c === 0x21d2 ||\n        c === 0x21d3 ||\n        c === 0x21d4 ||\n        (c >= 0x21d5 && c <= 0x21f3) ||\n        (c >= 0x21f4 && c <= 0x22ff) ||\n        (c >= 0x2300 && c <= 0x2307) ||\n        c === 0x2308 ||\n        c === 0x2309 ||\n        c === 0x230a ||\n        c === 0x230b ||\n        (c >= 0x230c && c <= 0x231f) ||\n        (c >= 0x2320 && c <= 0x2321) ||\n        (c >= 0x2322 && c <= 0x2328) ||\n        c === 0x2329 ||\n        c === 0x232a ||\n        (c >= 0x232b && c <= 0x237b) ||\n        c === 0x237c ||\n        (c >= 0x237d && c <= 0x239a) ||\n        (c >= 0x239b && c <= 0x23b3) ||\n        (c >= 0x23b4 && c <= 0x23db) ||\n        (c >= 0x23dc && c <= 0x23e1) ||\n        (c >= 0x23e2 && c <= 0x2426) ||\n        (c >= 0x2427 && c <= 0x243f) ||\n        (c >= 0x2440 && c <= 0x244a) ||\n        (c >= 0x244b && c <= 0x245f) ||\n        (c >= 0x2500 && c <= 0x25b6) ||\n        c === 0x25b7 ||\n        (c >= 0x25b8 && c <= 0x25c0) ||\n        c === 0x25c1 ||\n        (c >= 0x25c2 && c <= 0x25f7) ||\n        (c >= 0x25f8 && c <= 0x25ff) ||\n        (c >= 0x2600 && c <= 0x266e) ||\n        c === 0x266f ||\n        (c >= 0x2670 && c <= 0x2767) ||\n        c === 0x2768 ||\n        c === 0x2769 ||\n        c === 0x276a ||\n        c === 0x276b ||\n        c === 0x276c ||\n        c === 0x276d ||\n        c === 0x276e ||\n        c === 0x276f ||\n        c === 0x2770 ||\n        c === 0x2771 ||\n        c === 0x2772 ||\n        c === 0x2773 ||\n        c === 0x2774 ||\n        c === 0x2775 ||\n        (c >= 0x2794 && c <= 0x27bf) ||\n        (c >= 0x27c0 && c <= 0x27c4) ||\n        c === 0x27c5 ||\n        c === 0x27c6 ||\n        (c >= 0x27c7 && c <= 0x27e5) ||\n        c === 0x27e6 ||\n        c === 0x27e7 ||\n        c === 0x27e8 ||\n        c === 0x27e9 ||\n        c === 0x27ea ||\n        c === 0x27eb ||\n        c === 0x27ec ||\n        c === 0x27ed ||\n        c === 0x27ee ||\n        c === 0x27ef ||\n        (c >= 0x27f0 && c <= 0x27ff) ||\n        (c >= 0x2800 && c <= 0x28ff) ||\n        (c >= 0x2900 && c <= 0x2982) ||\n        c === 0x2983 ||\n        c === 0x2984 ||\n        c === 0x2985 ||\n        c === 0x2986 ||\n        c === 0x2987 ||\n        c === 0x2988 ||\n        c === 0x2989 ||\n        c === 0x298a ||\n        c === 0x298b ||\n        c === 0x298c ||\n        c === 0x298d ||\n        c === 0x298e ||\n        c === 0x298f ||\n        c === 0x2990 ||\n        c === 0x2991 ||\n        c === 0x2992 ||\n        c === 0x2993 ||\n        c === 0x2994 ||\n        c === 0x2995 ||\n        c === 0x2996 ||\n        c === 0x2997 ||\n        c === 0x2998 ||\n        (c >= 0x2999 && c <= 0x29d7) ||\n        c === 0x29d8 ||\n        c === 0x29d9 ||\n        c === 0x29da ||\n        c === 0x29db ||\n        (c >= 0x29dc && c <= 0x29fb) ||\n        c === 0x29fc ||\n        c === 0x29fd ||\n        (c >= 0x29fe && c <= 0x2aff) ||\n        (c >= 0x2b00 && c <= 0x2b2f) ||\n        (c >= 0x2b30 && c <= 0x2b44) ||\n        (c >= 0x2b45 && c <= 0x2b46) ||\n        (c >= 0x2b47 && c <= 0x2b4c) ||\n        (c >= 0x2b4d && c <= 0x2b73) ||\n        (c >= 0x2b74 && c <= 0x2b75) ||\n        (c >= 0x2b76 && c <= 0x2b95) ||\n        c === 0x2b96 ||\n        (c >= 0x2b97 && c <= 0x2bff) ||\n        (c >= 0x2e00 && c <= 0x2e01) ||\n        c === 0x2e02 ||\n        c === 0x2e03 ||\n        c === 0x2e04 ||\n        c === 0x2e05 ||\n        (c >= 0x2e06 && c <= 0x2e08) ||\n        c === 0x2e09 ||\n        c === 0x2e0a ||\n        c === 0x2e0b ||\n        c === 0x2e0c ||\n        c === 0x2e0d ||\n        (c >= 0x2e0e && c <= 0x2e16) ||\n        c === 0x2e17 ||\n        (c >= 0x2e18 && c <= 0x2e19) ||\n        c === 0x2e1a ||\n        c === 0x2e1b ||\n        c === 0x2e1c ||\n        c === 0x2e1d ||\n        (c >= 0x2e1e && c <= 0x2e1f) ||\n        c === 0x2e20 ||\n        c === 0x2e21 ||\n        c === 0x2e22 ||\n        c === 0x2e23 ||\n        c === 0x2e24 ||\n        c === 0x2e25 ||\n        c === 0x2e26 ||\n        c === 0x2e27 ||\n        c === 0x2e28 ||\n        c === 0x2e29 ||\n        (c >= 0x2e2a && c <= 0x2e2e) ||\n        c === 0x2e2f ||\n        (c >= 0x2e30 && c <= 0x2e39) ||\n        (c >= 0x2e3a && c <= 0x2e3b) ||\n        (c >= 0x2e3c && c <= 0x2e3f) ||\n        c === 0x2e40 ||\n        c === 0x2e41 ||\n        c === 0x2e42 ||\n        (c >= 0x2e43 && c <= 0x2e4f) ||\n        (c >= 0x2e50 && c <= 0x2e51) ||\n        c === 0x2e52 ||\n        (c >= 0x2e53 && c <= 0x2e7f) ||\n        (c >= 0x3001 && c <= 0x3003) ||\n        c === 0x3008 ||\n        c === 0x3009 ||\n        c === 0x300a ||\n        c === 0x300b ||\n        c === 0x300c ||\n        c === 0x300d ||\n        c === 0x300e ||\n        c === 0x300f ||\n        c === 0x3010 ||\n        c === 0x3011 ||\n        (c >= 0x3012 && c <= 0x3013) ||\n        c === 0x3014 ||\n        c === 0x3015 ||\n        c === 0x3016 ||\n        c === 0x3017 ||\n        c === 0x3018 ||\n        c === 0x3019 ||\n        c === 0x301a ||\n        c === 0x301b ||\n        c === 0x301c ||\n        c === 0x301d ||\n        (c >= 0x301e && c <= 0x301f) ||\n        c === 0x3020 ||\n        c === 0x3030 ||\n        c === 0xfd3e ||\n        c === 0xfd3f ||\n        (c >= 0xfe45 && c <= 0xfe46));\n}\n","import { timeData } from './time-data.generated';\n/**\n * Returns the best matching date time pattern if a date time skeleton\n * pattern is provided with a locale. Follows the Unicode specification:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#table-mapping-requested-time-skeletons-to-patterns\n * @param skeleton date time skeleton pattern that possibly includes j, J or C\n * @param locale\n */\nexport function getBestPattern(skeleton, locale) {\n    var skeletonCopy = '';\n    for (var patternPos = 0; patternPos < skeleton.length; patternPos++) {\n        var patternChar = skeleton.charAt(patternPos);\n        if (patternChar === 'j') {\n            var extraLength = 0;\n            while (patternPos + 1 < skeleton.length &&\n                skeleton.charAt(patternPos + 1) === patternChar) {\n                extraLength++;\n                patternPos++;\n            }\n            var hourLen = 1 + (extraLength & 1);\n            var dayPeriodLen = extraLength < 2 ? 1 : 3 + (extraLength >> 1);\n            var dayPeriodChar = 'a';\n            var hourChar = getDefaultHourSymbolFromLocale(locale);\n            if (hourChar == 'H' || hourChar == 'k') {\n                dayPeriodLen = 0;\n            }\n            while (dayPeriodLen-- > 0) {\n                skeletonCopy += dayPeriodChar;\n            }\n            while (hourLen-- > 0) {\n                skeletonCopy = hourChar + skeletonCopy;\n            }\n        }\n        else if (patternChar === 'J') {\n            skeletonCopy += 'H';\n        }\n        else {\n            skeletonCopy += patternChar;\n        }\n    }\n    return skeletonCopy;\n}\n/**\n * Maps the [hour cycle type](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/hourCycle)\n * of the given `locale` to the corresponding time pattern.\n * @param locale\n */\nfunction getDefaultHourSymbolFromLocale(locale) {\n    var hourCycle = locale.hourCycle;\n    if (hourCycle === undefined &&\n        // @ts-ignore hourCycle(s) is not identified yet\n        locale.hourCycles &&\n        // @ts-ignore\n        locale.hourCycles.length) {\n        // @ts-ignore\n        hourCycle = locale.hourCycles[0];\n    }\n    if (hourCycle) {\n        switch (hourCycle) {\n            case 'h24':\n                return 'k';\n            case 'h23':\n                return 'H';\n            case 'h12':\n                return 'h';\n            case 'h11':\n                return 'K';\n            default:\n                throw new Error('Invalid hourCycle');\n        }\n    }\n    // TODO: Once hourCycle is fully supported remove the following with data generation\n    var languageTag = locale.language;\n    var regionTag;\n    if (languageTag !== 'root') {\n        regionTag = locale.maximize().region;\n    }\n    var hourCycles = timeData[regionTag || ''] ||\n        timeData[languageTag || ''] ||\n        timeData[\"\".concat(languageTag, \"-001\")] ||\n        timeData['001'];\n    return hourCycles[0];\n}\n","import { __assign } from \"tslib\";\nimport { ErrorKind } from './error';\nimport { Parser } from './parser';\nimport { isDateElement, isDateTimeSkeleton, isNumberElement, isNumberSkeleton, isPluralElement, isSelectElement, isTagElement, isTimeElement, } from './types';\nfunction pruneLocation(els) {\n    els.forEach(function (el) {\n        delete el.location;\n        if (isSelectElement(el) || isPluralElement(el)) {\n            for (var k in el.options) {\n                delete el.options[k].location;\n                pruneLocation(el.options[k].value);\n            }\n        }\n        else if (isNumberElement(el) && isNumberSkeleton(el.style)) {\n            delete el.style.location;\n        }\n        else if ((isDateElement(el) || isTimeElement(el)) &&\n            isDateTimeSkeleton(el.style)) {\n            delete el.style.location;\n        }\n        else if (isTagElement(el)) {\n            pruneLocation(el.children);\n        }\n    });\n}\nexport function parse(message, opts) {\n    if (opts === void 0) { opts = {}; }\n    opts = __assign({ shouldParseSkeletons: true, requiresOtherClause: true }, opts);\n    var result = new Parser(message, opts).parse();\n    if (result.err) {\n        var error = SyntaxError(ErrorKind[result.err.kind]);\n        // @ts-expect-error Assign to error object\n        error.location = result.err.location;\n        // @ts-expect-error Assign to error object\n        error.originalMessage = result.err.message;\n        throw error;\n    }\n    if (!(opts === null || opts === void 0 ? void 0 : opts.captureLocation)) {\n        pruneLocation(result.val);\n    }\n    return result.val;\n}\nexport * from './types';\n","//\n// Main\n//\nexport default function memoize(fn, options) {\n    var cache = options && options.cache ? options.cache : cacheDefault;\n    var serializer = options && options.serializer ? options.serializer : serializerDefault;\n    var strategy = options && options.strategy ? options.strategy : strategyDefault;\n    return strategy(fn, {\n        cache: cache,\n        serializer: serializer,\n    });\n}\n//\n// Strategy\n//\nfunction isPrimitive(value) {\n    return (value == null || typeof value === 'number' || typeof value === 'boolean'); // || typeof value === \"string\" 'unsafe' primitive for our needs\n}\nfunction monadic(fn, cache, serializer, arg) {\n    var cacheKey = isPrimitive(arg) ? arg : serializer(arg);\n    var computedValue = cache.get(cacheKey);\n    if (typeof computedValue === 'undefined') {\n        computedValue = fn.call(this, arg);\n        cache.set(cacheKey, computedValue);\n    }\n    return computedValue;\n}\nfunction variadic(fn, cache, serializer) {\n    var args = Array.prototype.slice.call(arguments, 3);\n    var cacheKey = serializer(args);\n    var computedValue = cache.get(cacheKey);\n    if (typeof computedValue === 'undefined') {\n        computedValue = fn.apply(this, args);\n        cache.set(cacheKey, computedValue);\n    }\n    return computedValue;\n}\nfunction assemble(fn, context, strategy, cache, serialize) {\n    return strategy.bind(context, fn, cache, serialize);\n}\nfunction strategyDefault(fn, options) {\n    var strategy = fn.length === 1 ? monadic : variadic;\n    return assemble(fn, this, strategy, options.cache.create(), options.serializer);\n}\nfunction strategyVariadic(fn, options) {\n    return assemble(fn, this, variadic, options.cache.create(), options.serializer);\n}\nfunction strategyMonadic(fn, options) {\n    return assemble(fn, this, monadic, options.cache.create(), options.serializer);\n}\n//\n// Serializer\n//\nvar serializerDefault = function () {\n    return JSON.stringify(arguments);\n};\n//\n// Cache\n//\nfunction ObjectWithoutPrototypeCache() {\n    this.cache = Object.create(null);\n}\nObjectWithoutPrototypeCache.prototype.get = function (key) {\n    return this.cache[key];\n};\nObjectWithoutPrototypeCache.prototype.set = function (key, value) {\n    this.cache[key] = value;\n};\nvar cacheDefault = {\n    create: function create() {\n        // @ts-ignore\n        return new ObjectWithoutPrototypeCache();\n    },\n};\nexport var strategies = {\n    variadic: strategyVariadic,\n    monadic: strategyMonadic,\n};\n","import { __extends } from \"tslib\";\nexport var ErrorCode;\n(function (ErrorCode) {\n    // When we have a placeholder but no value to format\n    ErrorCode[\"MISSING_VALUE\"] = \"MISSING_VALUE\";\n    // When value supplied is invalid\n    ErrorCode[\"INVALID_VALUE\"] = \"INVALID_VALUE\";\n    // When we need specific Intl API but it's not available\n    ErrorCode[\"MISSING_INTL_API\"] = \"MISSING_INTL_API\";\n})(ErrorCode || (ErrorCode = {}));\nvar FormatError = /** @class */ (function (_super) {\n    __extends(FormatError, _super);\n    function FormatError(msg, code, originalMessage) {\n        var _this = _super.call(this, msg) || this;\n        _this.code = code;\n        _this.originalMessage = originalMessage;\n        return _this;\n    }\n    FormatError.prototype.toString = function () {\n        return \"[formatjs Error: \".concat(this.code, \"] \").concat(this.message);\n    };\n    return FormatError;\n}(Error));\nexport { FormatError };\nvar InvalidValueError = /** @class */ (function (_super) {\n    __extends(InvalidValueError, _super);\n    function InvalidValueError(variableId, value, options, originalMessage) {\n        return _super.call(this, \"Invalid values for \\\"\".concat(variableId, \"\\\": \\\"\").concat(value, \"\\\". Options are \\\"\").concat(Object.keys(options).join('\", \"'), \"\\\"\"), ErrorCode.INVALID_VALUE, originalMessage) || this;\n    }\n    return InvalidValueError;\n}(FormatError));\nexport { InvalidValueError };\nvar InvalidValueTypeError = /** @class */ (function (_super) {\n    __extends(InvalidValueTypeError, _super);\n    function InvalidValueTypeError(value, type, originalMessage) {\n        return _super.call(this, \"Value for \\\"\".concat(value, \"\\\" must be of type \").concat(type), ErrorCode.INVALID_VALUE, originalMessage) || this;\n    }\n    return InvalidValueTypeError;\n}(FormatError));\nexport { InvalidValueTypeError };\nvar MissingValueError = /** @class */ (function (_super) {\n    __extends(MissingValueError, _super);\n    function MissingValueError(variableId, originalMessage) {\n        return _super.call(this, \"The intl string context variable \\\"\".concat(variableId, \"\\\" was not provided to the string \\\"\").concat(originalMessage, \"\\\"\"), ErrorCode.MISSING_VALUE, originalMessage) || this;\n    }\n    return MissingValueError;\n}(FormatError));\nexport { MissingValueError };\n","import { isArgumentElement, isDateElement, isDateTimeSkeleton, isLiteralElement, isNumberElement, isNumberSkeleton, isPluralElement, isPoundElement, isSelectElement, isTimeElement, isTagElement, } from '@formatjs/icu-messageformat-parser';\nimport { MissingValueError, InvalidValueError, ErrorCode, FormatError, InvalidValueTypeError, } from './error';\nexport var PART_TYPE;\n(function (PART_TYPE) {\n    PART_TYPE[PART_TYPE[\"literal\"] = 0] = \"literal\";\n    PART_TYPE[PART_TYPE[\"object\"] = 1] = \"object\";\n})(PART_TYPE || (PART_TYPE = {}));\nfunction mergeLiteral(parts) {\n    if (parts.length < 2) {\n        return parts;\n    }\n    return parts.reduce(function (all, part) {\n        var lastPart = all[all.length - 1];\n        if (!lastPart ||\n            lastPart.type !== PART_TYPE.literal ||\n            part.type !== PART_TYPE.literal) {\n            all.push(part);\n        }\n        else {\n            lastPart.value += part.value;\n        }\n        return all;\n    }, []);\n}\nexport function isFormatXMLElementFn(el) {\n    return typeof el === 'function';\n}\n// TODO(skeleton): add skeleton support\nexport function formatToParts(els, locales, formatters, formats, values, currentPluralValue, \n// For debugging\noriginalMessage) {\n    // Hot path for straight simple msg translations\n    if (els.length === 1 && isLiteralElement(els[0])) {\n        return [\n            {\n                type: PART_TYPE.literal,\n                value: els[0].value,\n            },\n        ];\n    }\n    var result = [];\n    for (var _i = 0, els_1 = els; _i < els_1.length; _i++) {\n        var el = els_1[_i];\n        // Exit early for string parts.\n        if (isLiteralElement(el)) {\n            result.push({\n                type: PART_TYPE.literal,\n                value: el.value,\n            });\n            continue;\n        }\n        // TODO: should this part be literal type?\n        // Replace `#` in plural rules with the actual numeric value.\n        if (isPoundElement(el)) {\n            if (typeof currentPluralValue === 'number') {\n                result.push({\n                    type: PART_TYPE.literal,\n                    value: formatters.getNumberFormat(locales).format(currentPluralValue),\n                });\n            }\n            continue;\n        }\n        var varName = el.value;\n        // Enforce that all required values are provided by the caller.\n        if (!(values && varName in values)) {\n            throw new MissingValueError(varName, originalMessage);\n        }\n        var value = values[varName];\n        if (isArgumentElement(el)) {\n            if (!value || typeof value === 'string' || typeof value === 'number') {\n                value =\n                    typeof value === 'string' || typeof value === 'number'\n                        ? String(value)\n                        : '';\n            }\n            result.push({\n                type: typeof value === 'string' ? PART_TYPE.literal : PART_TYPE.object,\n                value: value,\n            });\n            continue;\n        }\n        // Recursively format plural and select parts' option — which can be a\n        // nested pattern structure. The choosing of the option to use is\n        // abstracted-by and delegated-to the part helper object.\n        if (isDateElement(el)) {\n            var style = typeof el.style === 'string'\n                ? formats.date[el.style]\n                : isDateTimeSkeleton(el.style)\n                    ? el.style.parsedOptions\n                    : undefined;\n            result.push({\n                type: PART_TYPE.literal,\n                value: formatters\n                    .getDateTimeFormat(locales, style)\n                    .format(value),\n            });\n            continue;\n        }\n        if (isTimeElement(el)) {\n            var style = typeof el.style === 'string'\n                ? formats.time[el.style]\n                : isDateTimeSkeleton(el.style)\n                    ? el.style.parsedOptions\n                    : formats.time.medium;\n            result.push({\n                type: PART_TYPE.literal,\n                value: formatters\n                    .getDateTimeFormat(locales, style)\n                    .format(value),\n            });\n            continue;\n        }\n        if (isNumberElement(el)) {\n            var style = typeof el.style === 'string'\n                ? formats.number[el.style]\n                : isNumberSkeleton(el.style)\n                    ? el.style.parsedOptions\n                    : undefined;\n            if (style && style.scale) {\n                value =\n                    value *\n                        (style.scale || 1);\n            }\n            result.push({\n                type: PART_TYPE.literal,\n                value: formatters\n                    .getNumberFormat(locales, style)\n                    .format(value),\n            });\n            continue;\n        }\n        if (isTagElement(el)) {\n            var children = el.children, value_1 = el.value;\n            var formatFn = values[value_1];\n            if (!isFormatXMLElementFn(formatFn)) {\n                throw new InvalidValueTypeError(value_1, 'function', originalMessage);\n            }\n            var parts = formatToParts(children, locales, formatters, formats, values, currentPluralValue);\n            var chunks = formatFn(parts.map(function (p) { return p.value; }));\n            if (!Array.isArray(chunks)) {\n                chunks = [chunks];\n            }\n            result.push.apply(result, chunks.map(function (c) {\n                return {\n                    type: typeof c === 'string' ? PART_TYPE.literal : PART_TYPE.object,\n                    value: c,\n                };\n            }));\n        }\n        if (isSelectElement(el)) {\n            var opt = el.options[value] || el.options.other;\n            if (!opt) {\n                throw new InvalidValueError(el.value, value, Object.keys(el.options), originalMessage);\n            }\n            result.push.apply(result, formatToParts(opt.value, locales, formatters, formats, values));\n            continue;\n        }\n        if (isPluralElement(el)) {\n            var opt = el.options[\"=\".concat(value)];\n            if (!opt) {\n                if (!Intl.PluralRules) {\n                    throw new FormatError(\"Intl.PluralRules is not available in this environment.\\nTry polyfilling it using \\\"@formatjs/intl-pluralrules\\\"\\n\", ErrorCode.MISSING_INTL_API, originalMessage);\n                }\n                var rule = formatters\n                    .getPluralRules(locales, { type: el.pluralType })\n                    .select(value - (el.offset || 0));\n                opt = el.options[rule] || el.options.other;\n            }\n            if (!opt) {\n                throw new InvalidValueError(el.value, value, Object.keys(el.options), originalMessage);\n            }\n            result.push.apply(result, formatToParts(opt.value, locales, formatters, formats, values, value - (el.offset || 0)));\n            continue;\n        }\n    }\n    return mergeLiteral(result);\n}\n","/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\nimport { __assign, __spreadArray } from \"tslib\";\nimport { parse } from '@formatjs/icu-messageformat-parser';\nimport memoize, { strategies } from '@formatjs/fast-memoize';\nimport { formatToParts, PART_TYPE, } from './formatters';\n// -- MessageFormat --------------------------------------------------------\nfunction mergeConfig(c1, c2) {\n    if (!c2) {\n        return c1;\n    }\n    return __assign(__assign(__assign({}, (c1 || {})), (c2 || {})), Object.keys(c1).reduce(function (all, k) {\n        all[k] = __assign(__assign({}, c1[k]), (c2[k] || {}));\n        return all;\n    }, {}));\n}\nfunction mergeConfigs(defaultConfig, configs) {\n    if (!configs) {\n        return defaultConfig;\n    }\n    return Object.keys(defaultConfig).reduce(function (all, k) {\n        all[k] = mergeConfig(defaultConfig[k], configs[k]);\n        return all;\n    }, __assign({}, defaultConfig));\n}\nfunction createFastMemoizeCache(store) {\n    return {\n        create: function () {\n            return {\n                get: function (key) {\n                    return store[key];\n                },\n                set: function (key, value) {\n                    store[key] = value;\n                },\n            };\n        },\n    };\n}\nfunction createDefaultFormatters(cache) {\n    if (cache === void 0) { cache = {\n        number: {},\n        dateTime: {},\n        pluralRules: {},\n    }; }\n    return {\n        getNumberFormat: memoize(function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return new ((_a = Intl.NumberFormat).bind.apply(_a, __spreadArray([void 0], args, false)))();\n        }, {\n            cache: createFastMemoizeCache(cache.number),\n            strategy: strategies.variadic,\n        }),\n        getDateTimeFormat: memoize(function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return new ((_a = Intl.DateTimeFormat).bind.apply(_a, __spreadArray([void 0], args, false)))();\n        }, {\n            cache: createFastMemoizeCache(cache.dateTime),\n            strategy: strategies.variadic,\n        }),\n        getPluralRules: memoize(function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return new ((_a = Intl.PluralRules).bind.apply(_a, __spreadArray([void 0], args, false)))();\n        }, {\n            cache: createFastMemoizeCache(cache.pluralRules),\n            strategy: strategies.variadic,\n        }),\n    };\n}\nvar IntlMessageFormat = /** @class */ (function () {\n    function IntlMessageFormat(message, locales, overrideFormats, opts) {\n        var _this = this;\n        if (locales === void 0) { locales = IntlMessageFormat.defaultLocale; }\n        this.formatterCache = {\n            number: {},\n            dateTime: {},\n            pluralRules: {},\n        };\n        this.format = function (values) {\n            var parts = _this.formatToParts(values);\n            // Hot path for straight simple msg translations\n            if (parts.length === 1) {\n                return parts[0].value;\n            }\n            var result = parts.reduce(function (all, part) {\n                if (!all.length ||\n                    part.type !== PART_TYPE.literal ||\n                    typeof all[all.length - 1] !== 'string') {\n                    all.push(part.value);\n                }\n                else {\n                    all[all.length - 1] += part.value;\n                }\n                return all;\n            }, []);\n            if (result.length <= 1) {\n                return result[0] || '';\n            }\n            return result;\n        };\n        this.formatToParts = function (values) {\n            return formatToParts(_this.ast, _this.locales, _this.formatters, _this.formats, values, undefined, _this.message);\n        };\n        this.resolvedOptions = function () { return ({\n            locale: _this.resolvedLocale.toString(),\n        }); };\n        this.getAst = function () { return _this.ast; };\n        // Defined first because it's used to build the format pattern.\n        this.locales = locales;\n        this.resolvedLocale = IntlMessageFormat.resolveLocale(locales);\n        if (typeof message === 'string') {\n            this.message = message;\n            if (!IntlMessageFormat.__parse) {\n                throw new TypeError('IntlMessageFormat.__parse must be set to process `message` of type `string`');\n            }\n            // Parse string messages into an AST.\n            this.ast = IntlMessageFormat.__parse(message, {\n                ignoreTag: opts === null || opts === void 0 ? void 0 : opts.ignoreTag,\n                locale: this.resolvedLocale,\n            });\n        }\n        else {\n            this.ast = message;\n        }\n        if (!Array.isArray(this.ast)) {\n            throw new TypeError('A message must be provided as a String or AST.');\n        }\n        // Creates a new object with the specified `formats` merged with the default\n        // formats.\n        this.formats = mergeConfigs(IntlMessageFormat.formats, overrideFormats);\n        this.formatters =\n            (opts && opts.formatters) || createDefaultFormatters(this.formatterCache);\n    }\n    Object.defineProperty(IntlMessageFormat, \"defaultLocale\", {\n        get: function () {\n            if (!IntlMessageFormat.memoizedDefaultLocale) {\n                IntlMessageFormat.memoizedDefaultLocale =\n                    new Intl.NumberFormat().resolvedOptions().locale;\n            }\n            return IntlMessageFormat.memoizedDefaultLocale;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    IntlMessageFormat.memoizedDefaultLocale = null;\n    IntlMessageFormat.resolveLocale = function (locales) {\n        var supportedLocales = Intl.NumberFormat.supportedLocalesOf(locales);\n        if (supportedLocales.length > 0) {\n            return new Intl.Locale(supportedLocales[0]);\n        }\n        return new Intl.Locale(typeof locales === 'string' ? locales : locales[0]);\n    };\n    IntlMessageFormat.__parse = parse;\n    // Default format options used as the prototype of the `formats` provided to the\n    // constructor. These are used when constructing the internal Intl.NumberFormat\n    // and Intl.DateTimeFormat instances.\n    IntlMessageFormat.formats = {\n        number: {\n            integer: {\n                maximumFractionDigits: 0,\n            },\n            currency: {\n                style: 'currency',\n            },\n            percent: {\n                style: 'percent',\n            },\n        },\n        date: {\n            short: {\n                month: 'numeric',\n                day: 'numeric',\n                year: '2-digit',\n            },\n            medium: {\n                month: 'short',\n                day: 'numeric',\n                year: 'numeric',\n            },\n            long: {\n                month: 'long',\n                day: 'numeric',\n                year: 'numeric',\n            },\n            full: {\n                weekday: 'long',\n                month: 'long',\n                day: 'numeric',\n                year: 'numeric',\n            },\n        },\n        time: {\n            short: {\n                hour: 'numeric',\n                minute: 'numeric',\n            },\n            medium: {\n                hour: 'numeric',\n                minute: 'numeric',\n                second: 'numeric',\n            },\n            long: {\n                hour: 'numeric',\n                minute: 'numeric',\n                second: 'numeric',\n                timeZoneName: 'short',\n            },\n            full: {\n                hour: 'numeric',\n                minute: 'numeric',\n                second: 'numeric',\n                timeZoneName: 'short',\n            },\n        },\n    };\n    return IntlMessageFormat;\n}());\nexport { IntlMessageFormat };\n","import { IEventBus, createModuleEventBus } from '../event-bus';\nimport { obx, computed } from '../utils/obx';\nimport { Logger } from '@alilc/lowcode-utils';\n\nconst logger = new Logger({ level: 'warn', bizName: 'globalLocale' });\n\nconst languageMap: { [key: string]: string } = {\n  en: 'en-US',\n  zh: 'zh-CN',\n  zt: 'zh-TW',\n  es: 'es-ES',\n  pt: 'pt-PT',\n  fr: 'fr-FR',\n  de: 'de-DE',\n  it: 'it-IT',\n  ru: 'ru-RU',\n  ja: 'ja-JP',\n  ko: 'ko-KR',\n  ar: 'ar-SA',\n  tr: 'tr-TR',\n  th: 'th-TH',\n  vi: 'vi-VN',\n  nl: 'nl-NL',\n  he: 'iw-IL',\n  id: 'in-ID',\n  pl: 'pl-PL',\n  hi: 'hi-IN',\n  uk: 'uk-UA',\n  ms: 'ms-MY',\n  tl: 'tl-PH',\n};\n\nconst LowcodeConfigKey = 'ali-lowcode-config';\n\nclass GlobalLocale {\n  private emitter: IEventBus = createModuleEventBus('GlobalLocale');\n\n  @obx.ref private _locale?: string;\n\n  @computed get locale() {\n    if (this._locale != null) {\n      return this._locale;\n    }\n\n    // TODO: store 1 & store 2 abstract out as custom implements\n\n    // store 1: config from storage\n    let result = null;\n    if (hasLocalStorage(window)) {\n      const store = window.localStorage;\n      let config: any;\n      try {\n        config = JSON.parse(store.getItem(LowcodeConfigKey) || '');\n      } catch (e) {\n        // ignore;\n      }\n      if (config?.locale) {\n        result = (config.locale || '').replace('_', '-');\n        logger.debug(`getting locale from localStorage: ${result}`);\n      }\n    }\n    if (!result) {\n      // store 2: config from window\n      let localeFromConfig: string = getConfig('locale');\n      if (localeFromConfig) {\n        result = languageMap[localeFromConfig] || localeFromConfig.replace('_', '-');\n        logger.debug(`getting locale from config: ${result}`);\n      }\n    }\n\n    if (!result) {\n      // store 3: config from system\n      const { navigator } = window as any;\n      if (navigator.language) {\n        const lang = (navigator.language as string);\n        return languageMap[lang] || lang.replace('_', '-');\n      } else if (navigator.browserLanguage) {\n        const it = navigator.browserLanguage.split('-');\n        let localeFromSystem = it[0];\n        if (it[1]) {\n          localeFromSystem += `-${it[1].toUpperCase()}`;\n        }\n        result = localeFromSystem;\n        logger.debug(`getting locale from system: ${result}`);\n      }\n    }\n    if (!result) {\n      logger.warn('something when wrong when trying to get locale, use zh-CN as default, please check it out!');\n      result = 'zh-CN';\n    }\n    this._locale = result;\n    return result;\n  }\n\n  constructor() {\n    this.emitter.setMaxListeners(0);\n  }\n\n  setLocale(locale: string) {\n    logger.info(`setting locale to ${locale}`);\n    if (locale === this.locale) {\n      return;\n    }\n    this._locale = locale;\n    if (hasLocalStorage(window)) {\n      const store = window.localStorage;\n      let config: any;\n      try {\n        config = JSON.parse(store.getItem(LowcodeConfigKey) || '');\n      } catch (e) {\n        // ignore;\n      }\n\n      if (config && typeof config === 'object') {\n        config.locale = locale;\n      } else {\n        config = { locale };\n      }\n\n      store.setItem(LowcodeConfigKey, JSON.stringify(config));\n    }\n    this.emitter.emit('localechange', locale);\n  }\n\n  getLocale() {\n    return this.locale;\n  }\n\n  onChangeLocale(fn: (locale: string) => void): () => void {\n    this.emitter.on('localechange', fn);\n    return () => {\n      this.emitter.removeListener('localechange', fn);\n    };\n  }\n}\n\nfunction getConfig(name: string) {\n  const win: any = window;\n  return (\n    win[name]\n    || (win.g_config || {})[name]\n    || (win.pageConfig || {})[name]\n  );\n}\n\nfunction hasLocalStorage(obj: any): obj is WindowLocalStorage {\n  return obj.localStorage;\n}\n\nlet globalLocale = new GlobalLocale();\n\nexport { globalLocale };\n","import { ReactNode, Component, createElement } from 'react';\nimport { IntlMessageFormat } from 'intl-messageformat';\nimport { globalLocale } from './global-locale';\nimport { isI18nData } from '@alilc/lowcode-utils';\nimport { observer } from '../utils';\n\nfunction generateTryLocales(locale: string) {\n  const tries = [locale, locale.replace('-', '_')];\n  if (locale === 'zh-TW' || locale === 'en-US') {\n    tries.push('zh-CN');\n    tries.push('zh_CN');\n  } else {\n    tries.push('en-US');\n    tries.push('en_US');\n    if (locale !== 'zh-CN') {\n      tries.push('zh-CN');\n      tries.push('zh_CN');\n    }\n  }\n  return tries;\n}\n\nfunction injectVars(msg: string, params: any, locale: string): string {\n  if (!msg || !params) {\n    return msg;\n  }\n  const formater = new IntlMessageFormat(msg, locale);\n  return formater.format(params as any) as string;\n  /*\n\n  return template.replace(/({\\w+})/g, (_, $1) => {\n    const key = (/\\d+/.exec($1) || [])[0] as any;\n    if (key && params[key] != null) {\n      return params[key];\n    }\n    return $1;\n  }); */\n}\n\nexport function intl(data: any, params?: object): ReactNode {\n  if (!isI18nData(data)) {\n    return data;\n  }\n  if (data.intl) {\n    return data.intl;\n  }\n  const locale = globalLocale.getLocale();\n  const tries = generateTryLocales(locale);\n  let msg: string | undefined;\n  for (const lan of tries) {\n    msg = data[lan];\n    if (msg != null) {\n      break;\n    }\n  }\n  if (msg == null) {\n    return `##intl@${locale}##`;\n  }\n  return injectVars(msg, params, locale);\n}\n\nexport function shallowIntl(data: any): any {\n  if (!data || typeof data !== 'object') {\n    return data;\n  }\n  const maps: any = {};\n  Object.keys(data).forEach(key => {\n    maps[key] = intl(data[key]);\n  });\n  return maps;\n}\n\nexport function intlNode(data: any, params?: object): ReactNode {\n  if (isI18nData(data)) {\n    if (data.intlNode) {\n      return data.intlNode;\n    }\n\n    return createElement(IntlElement, { data, params });\n  }\n  return data;\n}\n\n@observer\nclass IntlElement extends Component<{ data: any; params?: object }> {\n  render() {\n    const { data, params } = this.props;\n    return intl(data, params);\n  }\n}\n\nexport function createIntl(\n  instance: string | object,\n): {\n    intlNode(id: string, params?: object): ReactNode;\n    intl(id: string, params?: object): string;\n    getLocale(): string;\n    setLocale(locale: string): void;\n  } {\n  // TODO: make reactive\n  const data = (() => {\n    const locale = globalLocale.getLocale();\n    if (typeof instance === 'string') {\n      if ((window as any)[instance]) {\n        return (window as any)[instance][locale] || {};\n      }\n      const key = `${instance}_${locale.toLocaleLowerCase()}`;\n      return (window as any)[key] || {};\n    }\n    if (instance && typeof instance === 'object') {\n      return (instance as any)[locale] || {};\n    }\n    return {};\n  })();\n\n  function intl(key: string, params?: object): string {\n    // TODO: tries lost language\n    const str = data[key];\n\n    if (str == null) {\n      return `##intl@${key}##`;\n    }\n\n    return injectVars(str, params, globalLocale.getLocale());\n  }\n\n  @observer\n  class IntlElement extends Component<{ id: string; params?: object }> {\n    render() {\n      const { id, params } = this.props;\n      return intl(id, params);\n    }\n  }\n\n  return {\n    intlNode(id: string, params?: object) {\n      return createElement(IntlElement, { id, params });\n    },\n    intl,\n    getLocale() {\n      return globalLocale.getLocale();\n    },\n    setLocale(locale: string) {\n      globalLocale.setLocale(locale);\n    },\n  };\n}\n\nexport { globalLocale };\n","module.exports = window.ReactDOM;","/* globals requestIdleCallback, cancelIdleCallback */\nvar fallback = function (cb) {\n  return setTimeout(function () {\n    var start = Date.now()\n    cb({\n      didTimeout: false,\n      timeRemaining: function () {\n        return Math.max(0, 50 - (Date.now() - start))\n      }\n    })\n  }, 1)\n}\n\nvar isSupported = (typeof requestIdleCallback !== 'undefined')\n\nmodule.exports = isSupported ? requestIdleCallback : fallback\nmodule.exports.cancelIdleCallback = isSupported ? cancelIdleCallback : clearTimeout\n","const publicPath = (document.currentScript as HTMLScriptElement)?.src.replace(/^(.*\\/)[^/]+$/, '$1');\n\nexport function getPublicPath(): string {\n  return publicPath || '';\n}\n","import Debug from 'debug';\n\nconst debug = Debug('request');\n\nexport function serialize(obj?: object): string {\n  if (!obj) {\n    return '';\n  }\n  const rst: string[] = [];\n  Object.entries(obj || {}).forEach(([key, val]): void => {\n    if (val === null || val === undefined || val === '') return;\n    if (typeof val === 'object') rst.push(`${key}=${encodeURIComponent(JSON.stringify(val))}`);\n    else rst.push(`${key}=${encodeURIComponent(val)}`);\n  });\n  return rst.join('&');\n}\n\nexport function buildUrl(dataAPI: string, params?: object): string {\n  const paramStr = serialize(params);\n  if (paramStr) {\n    return dataAPI.indexOf('?') > 0 ? `${dataAPI}&${paramStr}` : `${dataAPI}?${paramStr}`;\n  }\n  return dataAPI;\n}\n\nexport function get(dataAPI: string, params?: object, headers?: object, otherProps?: object): Promise<any> {\n  const fetchHeaders = {\n    Accept: 'application/json',\n    ...headers,\n  };\n  return request(buildUrl(dataAPI, params), 'GET', undefined, fetchHeaders, otherProps);\n}\n\nexport function post(dataAPI: string, params?: object, headers?: object, otherProps?: object): Promise<any> {\n  const fetchHeaders = {\n    Accept: 'application/json',\n    'Content-Type': 'application/x-www-form-urlencoded',\n    ...headers,\n  };\n  return request(\n    dataAPI,\n    'POST',\n    fetchHeaders['Content-Type'].indexOf('application/json') > -1 || Array.isArray(params)\n      ? JSON.stringify(params)\n      : serialize(params),\n    fetchHeaders,\n    otherProps,\n  );\n}\n\nexport function request(\n  dataAPI: string,\n  method = 'GET',\n  data?: object | string,\n  headers?: object,\n  otherProps?: any,\n): Promise<any> {\n  return new Promise((resolve, reject): void => {\n    if (otherProps && otherProps.timeout) {\n      setTimeout((): void => {\n        reject(new Error('timeout'));\n      }, otherProps.timeout);\n    }\n    fetch(dataAPI, {\n      method,\n      credentials: 'include',\n      headers,\n      body: data,\n      ...otherProps,\n    })\n      .then((response: Response): any => {\n        switch (response.status) {\n          case 200:\n          case 201:\n          case 202:\n            return response.json();\n          case 204:\n            if (method === 'DELETE') {\n              return {\n                success: true,\n              };\n            } else {\n              return {\n                __success: false,\n                code: response.status,\n              };\n            }\n          case 400:\n          case 401:\n          case 403:\n          case 404:\n          case 406:\n          case 410:\n          case 422:\n          case 500:\n            return response\n              .json()\n              .then((res: object): any => {\n                return {\n                  __success: false,\n                  code: response.status,\n                  data: res,\n                };\n              })\n              .catch((): object => {\n                return {\n                  __success: false,\n                  code: response.status,\n                };\n              });\n          default:\n            return null;\n        }\n      })\n      .then((json: any): void => {\n        if (json && json.__success !== false) {\n          resolve(json);\n        } else {\n          delete json.__success;\n          reject(json);\n        }\n      })\n      .catch((err: Error): void => {\n        debug(err);\n        reject(err);\n      });\n  });\n}\n","export class FocusTracker {\n  mount(win: Window) {\n    const checkDown = (e: MouseEvent) => {\n      if (this.checkModalDown(e)) {\n        return;\n      }\n      const { first } = this;\n      if (first && !first.internalCheckInRange(e)) {\n        this.internalSuspenseItem(first);\n        first.internalTriggerBlur();\n      }\n    };\n    win.document.addEventListener('click', checkDown, true);\n    return () => {\n      win.document.removeEventListener('click', checkDown, true);\n    };\n  }\n\n  private actives: Focusable[] = [];\n\n  get first() {\n    return this.actives[0];\n  }\n\n  private modals: Array<{ checkDown: (e: MouseEvent) => boolean; checkOpen: () => boolean }> = [];\n\n  addModal(checkDown: (e: MouseEvent) => boolean, checkOpen: () => boolean) {\n    this.modals.push({\n      checkDown,\n      checkOpen,\n    });\n  }\n\n  private checkModalOpen(): boolean {\n    return this.modals.some((item) => item.checkOpen());\n  }\n\n  private checkModalDown(e: MouseEvent): boolean {\n    return this.modals.some((item) => item.checkDown(e));\n  }\n\n  execSave() {\n    // has Modal return;\n    if (this.checkModalOpen()) {\n      return;\n    }\n    // catch\n    if (this.first) {\n      this.first.internalTriggerSave();\n    }\n  }\n\n  execEsc() {\n    const { first } = this;\n    if (first) {\n      this.internalSuspenseItem(first);\n      first.internalTriggerEsc();\n    }\n  }\n\n  create(config: FocusableConfig) {\n    return new Focusable(this, config);\n  }\n\n  internalActiveItem(item: Focusable) {\n    const first = this.actives[0];\n    if (first === item) {\n      return;\n    }\n    const i = this.actives.indexOf(item);\n    if (i > -1) {\n      this.actives.splice(i, 1);\n    }\n    this.actives.unshift(item);\n    if (!item.isModal && first) {\n      // trigger Blur\n      first.internalTriggerBlur();\n    }\n    // trigger onActive\n    item.internalTriggerActive();\n  }\n\n  internalSuspenseItem(item: Focusable) {\n    const i = this.actives.indexOf(item);\n    if (i > -1) {\n      this.actives.splice(i, 1);\n      this.first?.internalTriggerActive();\n    }\n  }\n}\n\nexport interface FocusableConfig {\n  range: HTMLElement | ((e: MouseEvent) => boolean);\n  modal?: boolean; // 模态窗口级别\n  onEsc?: () => void;\n  onBlur?: () => void;\n  onSave?: () => void;\n  onActive?: () => void;\n}\n\nexport class Focusable {\n  readonly isModal: boolean;\n\n  constructor(private tracker: FocusTracker, private config: FocusableConfig) {\n    this.isModal = config.modal == null ? false : config.modal;\n  }\n\n  active() {\n    this.tracker.internalActiveItem(this);\n  }\n\n  suspense() {\n    this.tracker.internalSuspenseItem(this);\n  }\n\n  purge() {\n    this.tracker.internalSuspenseItem(this);\n  }\n\n  internalCheckInRange(e: MouseEvent) {\n    const { range } = this.config;\n    if (!range) {\n      return false;\n    }\n    if (typeof range === 'function') {\n      return range(e);\n    }\n    return range.contains(e.target as HTMLElement);\n  }\n\n  internalTriggerBlur() {\n    if (this.config.onBlur) {\n      this.config.onBlur();\n    }\n  }\n\n  internalTriggerSave() {\n    if (this.config.onSave) {\n      this.config.onSave();\n      return true;\n    }\n    return false;\n  }\n\n  internalTriggerEsc() {\n    if (this.config.onEsc) {\n      this.config.onEsc();\n    }\n  }\n\n  internalTriggerActive() {\n    if (this.config.onActive) {\n      this.config.onActive();\n    }\n  }\n}\n\nexport const focusTracker = new FocusTracker();\n\nfocusTracker.mount(window);\n","let globalEventOn = true;\n\nexport function setGlobalEventFlag(flag: boolean) {\n  globalEventOn = flag;\n}\n\nexport function switchGlobalEventOn() {\n  setGlobalEventFlag(true);\n}\n\nexport function switchGlobalEventOff() {\n  setGlobalEventFlag(false);\n}\n\nexport function isGlobalEventOn() {\n  return globalEventOn;\n}\n\nexport function runWithGlobalEventOff(fn: Function) {\n  switchGlobalEventOff();\n  fn();\n  switchGlobalEventOn();\n}\n\ntype ListenerFunc = (...args: any[]) => void;\nexport function wrapWithEventSwitch(fn: ListenerFunc): ListenerFunc {\n  return (...args: any[]) => {\n    if (isGlobalEventOn()) fn(...args);\n  };\n}","var assign = make_assign()\nvar create = make_create()\nvar trim = make_trim()\nvar Global = (typeof window !== 'undefined' ? window : global)\n\nmodule.exports = {\n\tassign: assign,\n\tcreate: create,\n\ttrim: trim,\n\tbind: bind,\n\tslice: slice,\n\teach: each,\n\tmap: map,\n\tpluck: pluck,\n\tisList: isList,\n\tisFunction: isFunction,\n\tisObject: isObject,\n\tGlobal: Global\n}\n\nfunction make_assign() {\n\tif (Object.assign) {\n\t\treturn Object.assign\n\t} else {\n\t\treturn function shimAssign(obj, props1, props2, etc) {\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\teach(Object(arguments[i]), function(val, key) {\n\t\t\t\t\tobj[key] = val\n\t\t\t\t})\n\t\t\t}\t\t\t\n\t\t\treturn obj\n\t\t}\n\t}\n}\n\nfunction make_create() {\n\tif (Object.create) {\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\treturn assign.apply(this, [Object.create(obj)].concat(assignArgsList))\n\t\t}\n\t} else {\n\t\tfunction F() {} // eslint-disable-line no-inner-declarations\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\tF.prototype = obj\n\t\t\treturn assign.apply(this, [new F()].concat(assignArgsList))\n\t\t}\n\t}\n}\n\nfunction make_trim() {\n\tif (String.prototype.trim) {\n\t\treturn function trim(str) {\n\t\t\treturn String.prototype.trim.call(str)\n\t\t}\n\t} else {\n\t\treturn function trim(str) {\n\t\t\treturn str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n\t\t}\n\t}\n}\n\nfunction bind(obj, fn) {\n\treturn function() {\n\t\treturn fn.apply(obj, Array.prototype.slice.call(arguments, 0))\n\t}\n}\n\nfunction slice(arr, index) {\n\treturn Array.prototype.slice.call(arr, index || 0)\n}\n\nfunction each(obj, fn) {\n\tpluck(obj, function(val, key) {\n\t\tfn(val, key)\n\t\treturn false\n\t})\n}\n\nfunction map(obj, fn) {\n\tvar res = (isList(obj) ? [] : {})\n\tpluck(obj, function(v, k) {\n\t\tres[k] = fn(v, k)\n\t\treturn false\n\t})\n\treturn res\n}\n\nfunction pluck(obj, fn) {\n\tif (isList(obj)) {\n\t\tfor (var i=0; i<obj.length; i++) {\n\t\t\tif (fn(obj[i], i)) {\n\t\t\t\treturn obj[i]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in obj) {\n\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\tif (fn(obj[key], key)) {\n\t\t\t\t\treturn obj[key]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction isList(val) {\n\treturn (val != null && typeof val != 'function' && typeof val.length == 'number')\n}\n\nfunction isFunction(val) {\n\treturn val && {}.toString.call(val) === '[object Function]'\n}\n\nfunction isObject(val) {\n\treturn val && {}.toString.call(val) === '[object Object]'\n}\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","export * from './setter';\nexport * from './ioc-context';\nexport * from '../widgets/tip/tip';\n","import { makeObservable } from \"mobx\";\nimport { useState } from \"react\";\nif (!useState) {\n    throw new Error(\"mobx-react-lite requires React with Hooks support\");\n}\nif (!makeObservable) {\n    throw new Error(\"mobx-react-lite@3 requires mobx at least version 6 to be available\");\n}\n//# sourceMappingURL=assertEnvironment.js.map","import { configure } from \"mobx\";\nexport function defaultNoopBatch(callback) {\n    callback();\n}\nexport function observerBatching(reactionScheduler) {\n    if (!reactionScheduler) {\n        reactionScheduler = defaultNoopBatch;\n        if (\"production\" !== process.env.NODE_ENV) {\n            console.warn(\"[MobX] Failed to get unstable_batched updates from react-dom / react-native\");\n        }\n    }\n    configure({ reactionScheduler: reactionScheduler });\n}\nexport var isObserverBatched = function () {\n    if (\"production\" !== process.env.NODE_ENV) {\n        console.warn(\"[MobX] Deprecated\");\n    }\n    return true;\n};\n//# sourceMappingURL=observerBatching.js.map","var deprecatedMessages = [];\nexport function useDeprecated(msg) {\n    if (!deprecatedMessages.includes(msg)) {\n        deprecatedMessages.push(msg);\n        console.warn(msg);\n    }\n}\n//# sourceMappingURL=utils.js.map","import { getDependencyTree } from \"mobx\";\nexport function printDebugValue(v) {\n    return getDependencyTree(v);\n}\n//# sourceMappingURL=printDebugValue.js.map","var FinalizationRegistryLocal = typeof FinalizationRegistry === \"undefined\" ? undefined : FinalizationRegistry;\nexport { FinalizationRegistryLocal as FinalizationRegistry };\n//# sourceMappingURL=FinalizationRegistryWrapper.js.map","export function createTrackingData(reaction) {\n    var trackingData = {\n        reaction: reaction,\n        mounted: false,\n        changedBeforeMount: false,\n        cleanAt: Date.now() + CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS\n    };\n    return trackingData;\n}\n/**\n * The minimum time before we'll clean up a Reaction created in a render\n * for a component that hasn't managed to run its effects. This needs to\n * be big enough to ensure that a component won't turn up and have its\n * effects run without being re-rendered.\n */\nexport var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = 10000;\n/**\n * The frequency with which we'll check for leaked reactions.\n */\nexport var CLEANUP_TIMER_LOOP_MILLIS = 10000;\n//# sourceMappingURL=reactionCleanupTrackingCommon.js.map","import { createTrackingData } from \"./reactionCleanupTrackingCommon\";\n/**\n * FinalizationRegistry-based uncommitted reaction cleanup\n */\nexport function createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistry) {\n    var cleanupTokenToReactionTrackingMap = new Map();\n    var globalCleanupTokensCounter = 1;\n    var registry = new FinalizationRegistry(function cleanupFunction(token) {\n        var trackedReaction = cleanupTokenToReactionTrackingMap.get(token);\n        if (trackedReaction) {\n            trackedReaction.reaction.dispose();\n            cleanupTokenToReactionTrackingMap.delete(token);\n        }\n    });\n    return {\n        addReactionToTrack: function (reactionTrackingRef, reaction, objectRetainedByReact) {\n            var token = globalCleanupTokensCounter++;\n            registry.register(objectRetainedByReact, token, reactionTrackingRef);\n            reactionTrackingRef.current = createTrackingData(reaction);\n            reactionTrackingRef.current.finalizationRegistryCleanupToken = token;\n            cleanupTokenToReactionTrackingMap.set(token, reactionTrackingRef.current);\n            return reactionTrackingRef.current;\n        },\n        recordReactionAsCommitted: function (reactionRef) {\n            registry.unregister(reactionRef);\n            if (reactionRef.current && reactionRef.current.finalizationRegistryCleanupToken) {\n                cleanupTokenToReactionTrackingMap.delete(reactionRef.current.finalizationRegistryCleanupToken);\n            }\n        },\n        forceCleanupTimerToRunNowForTests: function () {\n            // When FinalizationRegistry in use, this this is no-op\n        },\n        resetCleanupScheduleForTests: function () {\n            // When FinalizationRegistry in use, this this is no-op\n        }\n    };\n}\n//# sourceMappingURL=createReactionCleanupTrackingUsingFinalizationRegister.js.map","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { CLEANUP_TIMER_LOOP_MILLIS, createTrackingData } from \"./reactionCleanupTrackingCommon\";\n/**\n * timers, gc-style, uncommitted reaction cleanup\n */\nexport function createTimerBasedReactionCleanupTracking() {\n    /**\n     * Reactions created by components that have yet to be fully mounted.\n     */\n    var uncommittedReactionRefs = new Set();\n    /**\n     * Latest 'uncommitted reactions' cleanup timer handle.\n     */\n    var reactionCleanupHandle;\n    /* istanbul ignore next */\n    /**\n     * Only to be used by test functions; do not export outside of mobx-react-lite\n     */\n    function forceCleanupTimerToRunNowForTests() {\n        // This allows us to control the execution of the cleanup timer\n        // to force it to run at awkward times in unit tests.\n        if (reactionCleanupHandle) {\n            clearTimeout(reactionCleanupHandle);\n            cleanUncommittedReactions();\n        }\n    }\n    /* istanbul ignore next */\n    function resetCleanupScheduleForTests() {\n        var e_1, _a;\n        if (uncommittedReactionRefs.size > 0) {\n            try {\n                for (var uncommittedReactionRefs_1 = __values(uncommittedReactionRefs), uncommittedReactionRefs_1_1 = uncommittedReactionRefs_1.next(); !uncommittedReactionRefs_1_1.done; uncommittedReactionRefs_1_1 = uncommittedReactionRefs_1.next()) {\n                    var ref = uncommittedReactionRefs_1_1.value;\n                    var tracking = ref.current;\n                    if (tracking) {\n                        tracking.reaction.dispose();\n                        ref.current = null;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (uncommittedReactionRefs_1_1 && !uncommittedReactionRefs_1_1.done && (_a = uncommittedReactionRefs_1.return)) _a.call(uncommittedReactionRefs_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            uncommittedReactionRefs.clear();\n        }\n        if (reactionCleanupHandle) {\n            clearTimeout(reactionCleanupHandle);\n            reactionCleanupHandle = undefined;\n        }\n    }\n    function ensureCleanupTimerRunning() {\n        if (reactionCleanupHandle === undefined) {\n            reactionCleanupHandle = setTimeout(cleanUncommittedReactions, CLEANUP_TIMER_LOOP_MILLIS);\n        }\n    }\n    function scheduleCleanupOfReactionIfLeaked(ref) {\n        uncommittedReactionRefs.add(ref);\n        ensureCleanupTimerRunning();\n    }\n    function recordReactionAsCommitted(reactionRef) {\n        uncommittedReactionRefs.delete(reactionRef);\n    }\n    /**\n     * Run by the cleanup timer to dispose any outstanding reactions\n     */\n    function cleanUncommittedReactions() {\n        reactionCleanupHandle = undefined;\n        // Loop through all the candidate leaked reactions; those older\n        // than CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS get tidied.\n        var now = Date.now();\n        uncommittedReactionRefs.forEach(function (ref) {\n            var tracking = ref.current;\n            if (tracking) {\n                if (now >= tracking.cleanAt) {\n                    // It's time to tidy up this leaked reaction.\n                    tracking.reaction.dispose();\n                    ref.current = null;\n                    uncommittedReactionRefs.delete(ref);\n                }\n            }\n        });\n        if (uncommittedReactionRefs.size > 0) {\n            // We've just finished a round of cleanups but there are still\n            // some leak candidates outstanding.\n            ensureCleanupTimerRunning();\n        }\n    }\n    return {\n        addReactionToTrack: function (reactionTrackingRef, reaction, \n        /**\n         * On timer based implementation we don't really need this object,\n         * but we keep the same api\n         */\n        objectRetainedByReact) {\n            reactionTrackingRef.current = createTrackingData(reaction);\n            scheduleCleanupOfReactionIfLeaked(reactionTrackingRef);\n            return reactionTrackingRef.current;\n        },\n        recordReactionAsCommitted: recordReactionAsCommitted,\n        forceCleanupTimerToRunNowForTests: forceCleanupTimerToRunNowForTests,\n        resetCleanupScheduleForTests: resetCleanupScheduleForTests\n    };\n}\n//# sourceMappingURL=createTimerBasedReactionCleanupTracking.js.map","import { FinalizationRegistry as FinalizationRegistryMaybeUndefined } from \"./FinalizationRegistryWrapper\";\nimport { createReactionCleanupTrackingUsingFinalizationRegister } from \"./createReactionCleanupTrackingUsingFinalizationRegister\";\nimport { createTimerBasedReactionCleanupTracking } from \"./createTimerBasedReactionCleanupTracking\";\nvar _a = FinalizationRegistryMaybeUndefined\n    ? createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryMaybeUndefined)\n    : createTimerBasedReactionCleanupTracking(), addReactionToTrack = _a.addReactionToTrack, recordReactionAsCommitted = _a.recordReactionAsCommitted, resetCleanupScheduleForTests = _a.resetCleanupScheduleForTests, forceCleanupTimerToRunNowForTests = _a.forceCleanupTimerToRunNowForTests;\nexport { addReactionToTrack, recordReactionAsCommitted, resetCleanupScheduleForTests, forceCleanupTimerToRunNowForTests };\n//# sourceMappingURL=reactionCleanupTracking.js.map","var globalIsUsingStaticRendering = false;\nexport function enableStaticRendering(enable) {\n    globalIsUsingStaticRendering = enable;\n}\nexport function isUsingStaticRendering() {\n    return globalIsUsingStaticRendering;\n}\n//# sourceMappingURL=staticRendering.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Reaction } from \"mobx\";\nimport React from \"react\";\nimport { printDebugValue } from \"./utils/printDebugValue\";\nimport { addReactionToTrack, recordReactionAsCommitted } from \"./utils/reactionCleanupTracking\";\nimport { isUsingStaticRendering } from \"./staticRendering\";\nfunction observerComponentNameFor(baseComponentName) {\n    return \"observer\".concat(baseComponentName);\n}\n/**\n * We use class to make it easier to detect in heap snapshots by name\n */\nvar ObjectToBeRetainedByReact = /** @class */ (function () {\n    function ObjectToBeRetainedByReact() {\n    }\n    return ObjectToBeRetainedByReact;\n}());\nfunction objectToBeRetainedByReactFactory() {\n    return new ObjectToBeRetainedByReact();\n}\nexport function useObserver(fn, baseComponentName) {\n    if (baseComponentName === void 0) { baseComponentName = \"observed\"; }\n    if (isUsingStaticRendering()) {\n        return fn();\n    }\n    var _a = __read(React.useState(objectToBeRetainedByReactFactory), 1), objectRetainedByReact = _a[0];\n    // Force update, see #2982\n    var _b = __read(React.useState(), 2), setState = _b[1];\n    var forceUpdate = function () { return setState([]); };\n    // StrictMode/ConcurrentMode/Suspense may mean that our component is\n    // rendered and abandoned multiple times, so we need to track leaked\n    // Reactions.\n    var reactionTrackingRef = React.useRef(null);\n    if (!reactionTrackingRef.current) {\n        // First render for this component (or first time since a previous\n        // reaction from an abandoned render was disposed).\n        var newReaction = new Reaction(observerComponentNameFor(baseComponentName), function () {\n            // Observable has changed, meaning we want to re-render\n            // BUT if we're a component that hasn't yet got to the useEffect()\n            // stage, we might be a component that _started_ to render, but\n            // got dropped, and we don't want to make state changes then.\n            // (It triggers warnings in StrictMode, for a start.)\n            if (trackingData_1.mounted) {\n                // We have reached useEffect(), so we're mounted, and can trigger an update\n                forceUpdate();\n            }\n            else {\n                // We haven't yet reached useEffect(), so we'll need to trigger a re-render\n                // when (and if) useEffect() arrives.\n                trackingData_1.changedBeforeMount = true;\n            }\n        });\n        var trackingData_1 = addReactionToTrack(reactionTrackingRef, newReaction, objectRetainedByReact);\n    }\n    var reaction = reactionTrackingRef.current.reaction;\n    React.useDebugValue(reaction, printDebugValue);\n    React.useEffect(function () {\n        // Called on first mount only\n        recordReactionAsCommitted(reactionTrackingRef);\n        if (reactionTrackingRef.current) {\n            // Great. We've already got our reaction from our render;\n            // all we need to do is to record that it's now mounted,\n            // to allow future observable changes to trigger re-renders\n            reactionTrackingRef.current.mounted = true;\n            // Got a change before first mount, force an update\n            if (reactionTrackingRef.current.changedBeforeMount) {\n                reactionTrackingRef.current.changedBeforeMount = false;\n                forceUpdate();\n            }\n        }\n        else {\n            // The reaction we set up in our render has been disposed.\n            // This can be due to bad timings of renderings, e.g. our\n            // component was paused for a _very_ long time, and our\n            // reaction got cleaned up\n            // Re-create the reaction\n            reactionTrackingRef.current = {\n                reaction: new Reaction(observerComponentNameFor(baseComponentName), function () {\n                    // We've definitely already been mounted at this point\n                    forceUpdate();\n                }),\n                mounted: true,\n                changedBeforeMount: false,\n                cleanAt: Infinity\n            };\n            forceUpdate();\n        }\n        return function () {\n            reactionTrackingRef.current.reaction.dispose();\n            reactionTrackingRef.current = null;\n        };\n    }, []);\n    // render the original component, but have the\n    // reaction track the observables, so that rendering\n    // can be invalidated (see above) once a dependency changes\n    var rendering;\n    var exception;\n    reaction.track(function () {\n        try {\n            rendering = fn();\n        }\n        catch (e) {\n            exception = e;\n        }\n    });\n    if (exception) {\n        throw exception; // re-throw any exceptions caught during rendering\n    }\n    return rendering;\n}\n//# sourceMappingURL=useObserver.js.map","import { forwardRef, memo } from \"react\";\nimport { isUsingStaticRendering } from \"./staticRendering\";\nimport { useObserver } from \"./useObserver\";\nvar warnObserverOptionsDeprecated = true;\nvar hasSymbol = typeof Symbol === \"function\" && Symbol.for;\n// Using react-is had some issues (and operates on elements, not on types), see #608 / #609\nvar ReactForwardRefSymbol = hasSymbol\n    ? Symbol.for(\"react.forward_ref\")\n    : typeof forwardRef === \"function\" && forwardRef(function (props) { return null; })[\"$$typeof\"];\nvar ReactMemoSymbol = hasSymbol\n    ? Symbol.for(\"react.memo\")\n    : typeof memo === \"function\" && memo(function (props) { return null; })[\"$$typeof\"];\n// n.b. base case is not used for actual typings or exported in the typing files\nexport function observer(baseComponent, \n// TODO remove in next major\noptions) {\n    var _a;\n    if (process.env.NODE_ENV !== \"production\" && warnObserverOptionsDeprecated && options) {\n        warnObserverOptionsDeprecated = false;\n        console.warn(\"[mobx-react-lite] `observer(fn, { forwardRef: true })` is deprecated, use `observer(React.forwardRef(fn))`\");\n    }\n    if (ReactMemoSymbol && baseComponent[\"$$typeof\"] === ReactMemoSymbol) {\n        throw new Error(\"[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.\");\n    }\n    // The working of observer is explained step by step in this talk: https://www.youtube.com/watch?v=cPF4iBedoF0&feature=youtu.be&t=1307\n    if (isUsingStaticRendering()) {\n        return baseComponent;\n    }\n    var useForwardRef = (_a = options === null || options === void 0 ? void 0 : options.forwardRef) !== null && _a !== void 0 ? _a : false;\n    var render = baseComponent;\n    var baseComponentName = baseComponent.displayName || baseComponent.name;\n    // If already wrapped with forwardRef, unwrap,\n    // so we can patch render and apply memo\n    if (ReactForwardRefSymbol && baseComponent[\"$$typeof\"] === ReactForwardRefSymbol) {\n        useForwardRef = true;\n        render = baseComponent[\"render\"];\n        if (typeof render !== \"function\") {\n            throw new Error(\"[mobx-react-lite] `render` property of ForwardRef was not a function\");\n        }\n    }\n    var observerComponent = function (props, ref) {\n        return useObserver(function () { return render(props, ref); }, baseComponentName);\n    };\n    // Don't set `displayName` for anonymous components,\n    // so the `displayName` can be customized by user, see #3192.\n    if (baseComponentName !== \"\") {\n        ;\n        observerComponent.displayName = baseComponentName;\n    }\n    // Support legacy context: `contextTypes` must be applied before `memo`\n    if (baseComponent.contextTypes) {\n        ;\n        observerComponent.contextTypes = baseComponent.contextTypes;\n    }\n    if (useForwardRef) {\n        // `forwardRef` must be applied prior `memo`\n        // `forwardRef(observer(cmp))` throws:\n        // \"forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))\"\n        observerComponent = forwardRef(observerComponent);\n    }\n    // memo; we are not interested in deep updates\n    // in props; we assume that if deep objects are changed,\n    // this is in observables, which would have been tracked anyway\n    observerComponent = memo(observerComponent);\n    copyStaticProperties(baseComponent, observerComponent);\n    if (\"production\" !== process.env.NODE_ENV) {\n        Object.defineProperty(observerComponent, \"contextTypes\", {\n            set: function () {\n                var _a;\n                throw new Error(\"[mobx-react-lite] `\".concat(this.displayName || ((_a = this.type) === null || _a === void 0 ? void 0 : _a.displayName) || \"Component\", \".contextTypes` must be set before applying `observer`.\"));\n            }\n        });\n    }\n    return observerComponent;\n}\n// based on https://github.com/mridgway/hoist-non-react-statics/blob/master/src/index.js\nvar hoistBlackList = {\n    $$typeof: true,\n    render: true,\n    compare: true,\n    type: true,\n    // Don't redefine `displayName`,\n    // it's defined as getter-setter pair on `memo` (see #3192).\n    displayName: true\n};\nfunction copyStaticProperties(base, target) {\n    Object.keys(base).forEach(function (key) {\n        if (!hoistBlackList[key]) {\n            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(base, key));\n        }\n    });\n}\n//# sourceMappingURL=observer.js.map","import { useObserver } from \"./useObserver\";\nfunction ObserverComponent(_a) {\n    var children = _a.children, render = _a.render;\n    var component = children || render;\n    if (typeof component !== \"function\") {\n        return null;\n    }\n    return useObserver(component);\n}\nif (\"production\" !== process.env.NODE_ENV) {\n    ObserverComponent.propTypes = {\n        children: ObserverPropsCheck,\n        render: ObserverPropsCheck\n    };\n}\nObserverComponent.displayName = \"Observer\";\nexport { ObserverComponent as Observer };\nfunction ObserverPropsCheck(props, key, componentName, location, propFullName) {\n    var extraKey = key === \"children\" ? \"render\" : \"children\";\n    var hasProp = typeof props[key] === \"function\";\n    var hasExtraProp = typeof props[extraKey] === \"function\";\n    if (hasProp && hasExtraProp) {\n        return new Error(\"MobX Observer: Do not use children and render in the same time in`\" + componentName);\n    }\n    if (hasProp || hasExtraProp) {\n        return null;\n    }\n    return new Error(\"Invalid prop `\" +\n        propFullName +\n        \"` of type `\" +\n        typeof props[key] +\n        \"` supplied to\" +\n        \" `\" +\n        componentName +\n        \"`, expected `function`.\");\n}\n//# sourceMappingURL=ObserverComponent.js.map","import { observable } from \"mobx\";\nimport { useState } from \"react\";\nexport function useLocalObservable(initializer, annotations) {\n    return useState(function () { return observable(initializer(), annotations, { autoBind: true }); })[0];\n}\n//# sourceMappingURL=useLocalObservable.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useDeprecated } from \"./utils/utils\";\nimport { observable, runInAction } from \"mobx\";\nimport { useState } from \"react\";\nexport function useAsObservableSource(current) {\n    if (\"production\" !== process.env.NODE_ENV)\n        useDeprecated(\"[mobx-react-lite] 'useAsObservableSource' is deprecated, please store the values directly in an observable, for example by using 'useLocalObservable', and sync future updates using 'useEffect' when needed. See the README for examples.\");\n    var _a = __read(useState(function () { return observable(current, {}, { deep: false }); }), 1), res = _a[0];\n    runInAction(function () {\n        Object.assign(res, current);\n    });\n    return res;\n}\n//# sourceMappingURL=useAsObservableSource.js.map","import { observable } from \"mobx\";\nimport { useState } from \"react\";\nimport { useDeprecated } from \"./utils/utils\";\nimport { useAsObservableSource } from \"./useAsObservableSource\";\nexport function useLocalStore(initializer, current) {\n    if (\"production\" !== process.env.NODE_ENV)\n        useDeprecated(\"[mobx-react-lite] 'useLocalStore' is deprecated, use 'useLocalObservable' instead.\");\n    var source = current && useAsObservableSource(current);\n    return useState(function () { return observable(initializer(source), undefined, { autoBind: true }); })[0];\n}\n//# sourceMappingURL=useLocalStore.js.map","import \"./utils/assertEnvironment\";\nimport { unstable_batchedUpdates as batch } from \"./utils/reactBatchedUpdates\";\nimport { observerBatching } from \"./utils/observerBatching\";\nimport { useDeprecated } from \"./utils/utils\";\nimport { useObserver as useObserverOriginal } from \"./useObserver\";\nimport { enableStaticRendering } from \"./staticRendering\";\nobserverBatching(batch);\nexport { isUsingStaticRendering, enableStaticRendering } from \"./staticRendering\";\nexport { observer } from \"./observer\";\nexport { Observer } from \"./ObserverComponent\";\nexport { useLocalObservable } from \"./useLocalObservable\";\nexport { useLocalStore } from \"./useLocalStore\";\nexport { useAsObservableSource } from \"./useAsObservableSource\";\nexport { resetCleanupScheduleForTests as clearTimers } from \"./utils/reactionCleanupTracking\";\nexport function useObserver(fn, baseComponentName) {\n    if (baseComponentName === void 0) { baseComponentName = \"observed\"; }\n    if (\"production\" !== process.env.NODE_ENV) {\n        useDeprecated(\"[mobx-react-lite] 'useObserver(fn)' is deprecated. Use `<Observer>{fn}</Observer>` instead, or wrap the entire component in `observer`.\");\n    }\n    return useObserverOriginal(fn, baseComponentName);\n}\nexport { isObserverBatched, observerBatching } from \"./utils/observerBatching\";\nexport function useStaticRendering(enable) {\n    if (\"production\" !== process.env.NODE_ENV) {\n        console.warn(\"[mobx-react-lite] 'useStaticRendering' is deprecated, use 'enableStaticRendering' instead\");\n    }\n    enableStaticRendering(enable);\n}\n//# sourceMappingURL=index.js.map","import { _allowStateReadsStart, _allowStateReadsEnd, $mobx, _allowStateChanges, createAtom, Reaction, untracked, isObservableMap, isObservableObject, isObservableArray, observable } from 'mobx';\nimport React__default, { PureComponent, Component } from 'react';\nimport { isUsingStaticRendering, observer as observer$1 } from 'mobx-react-lite';\nexport { Observer, enableStaticRendering, isUsingStaticRendering, observerBatching, useAsObservableSource, useLocalObservable, useLocalStore, useObserver, useStaticRendering } from 'mobx-react-lite';\n\nvar symbolId = 0;\n\nfunction createSymbol(name) {\n  if (typeof Symbol === \"function\") {\n    return Symbol(name);\n  }\n\n  var symbol = \"__$mobx-react \" + name + \" (\" + symbolId + \")\";\n  symbolId++;\n  return symbol;\n}\n\nvar createdSymbols = {};\nfunction newSymbol(name) {\n  if (!createdSymbols[name]) {\n    createdSymbols[name] = createSymbol(name);\n  }\n\n  return createdSymbols[name];\n}\nfunction shallowEqual(objA, objB) {\n  //From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  for (var i = 0; i < keysA.length; i++) {\n    if (!Object.hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction is(x, y) {\n  // From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n} // based on https://github.com/mridgway/hoist-non-react-statics/blob/master/src/index.js\n\n\nvar hoistBlackList = {\n  $$typeof: 1,\n  render: 1,\n  compare: 1,\n  type: 1,\n  childContextTypes: 1,\n  contextType: 1,\n  contextTypes: 1,\n  defaultProps: 1,\n  getDefaultProps: 1,\n  getDerivedStateFromError: 1,\n  getDerivedStateFromProps: 1,\n  mixins: 1,\n  displayName: 1,\n  propTypes: 1\n};\nfunction copyStaticProperties(base, target) {\n  var protoProps = Object.getOwnPropertyNames(Object.getPrototypeOf(base));\n  Object.getOwnPropertyNames(base).forEach(function (key) {\n    if (!hoistBlackList[key] && protoProps.indexOf(key) === -1) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(base, key));\n    }\n  });\n}\n/**\r\n * Helper to set `prop` to `this` as non-enumerable (hidden prop)\r\n * @param target\r\n * @param prop\r\n * @param value\r\n */\n\nfunction setHiddenProp(target, prop, value) {\n  if (!Object.hasOwnProperty.call(target, prop)) {\n    Object.defineProperty(target, prop, {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: value\n    });\n  } else {\n    target[prop] = value;\n  }\n}\n/**\r\n * Utilities for patching componentWillUnmount, to make sure @disposeOnUnmount works correctly icm with user defined hooks\r\n * and the handler provided by mobx-react\r\n */\n\nvar mobxMixins = /*#__PURE__*/newSymbol(\"patchMixins\");\nvar mobxPatchedDefinition = /*#__PURE__*/newSymbol(\"patchedDefinition\");\n\nfunction getMixins(target, methodName) {\n  var mixins = target[mobxMixins] = target[mobxMixins] || {};\n  var methodMixins = mixins[methodName] = mixins[methodName] || {};\n  methodMixins.locks = methodMixins.locks || 0;\n  methodMixins.methods = methodMixins.methods || [];\n  return methodMixins;\n}\n\nfunction wrapper(realMethod, mixins) {\n  var _this = this;\n\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  // locks are used to ensure that mixins are invoked only once per invocation, even on recursive calls\n  mixins.locks++;\n\n  try {\n    var retVal;\n\n    if (realMethod !== undefined && realMethod !== null) {\n      retVal = realMethod.apply(this, args);\n    }\n\n    return retVal;\n  } finally {\n    mixins.locks--;\n\n    if (mixins.locks === 0) {\n      mixins.methods.forEach(function (mx) {\n        mx.apply(_this, args);\n      });\n    }\n  }\n}\n\nfunction wrapFunction(realMethod, mixins) {\n  var fn = function fn() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    wrapper.call.apply(wrapper, [this, realMethod, mixins].concat(args));\n  };\n\n  return fn;\n}\n\nfunction patch(target, methodName, mixinMethod) {\n  var mixins = getMixins(target, methodName);\n\n  if (mixins.methods.indexOf(mixinMethod) < 0) {\n    mixins.methods.push(mixinMethod);\n  }\n\n  var oldDefinition = Object.getOwnPropertyDescriptor(target, methodName);\n\n  if (oldDefinition && oldDefinition[mobxPatchedDefinition]) {\n    // already patched definition, do not repatch\n    return;\n  }\n\n  var originalMethod = target[methodName];\n  var newDefinition = createDefinition(target, methodName, oldDefinition ? oldDefinition.enumerable : undefined, mixins, originalMethod);\n  Object.defineProperty(target, methodName, newDefinition);\n}\n\nfunction createDefinition(target, methodName, enumerable, mixins, originalMethod) {\n  var _ref;\n\n  var wrappedFunc = wrapFunction(originalMethod, mixins);\n  return _ref = {}, _ref[mobxPatchedDefinition] = true, _ref.get = function get() {\n    return wrappedFunc;\n  }, _ref.set = function set(value) {\n    if (this === target) {\n      wrappedFunc = wrapFunction(value, mixins);\n    } else {\n      // when it is an instance of the prototype/a child prototype patch that particular case again separately\n      // since we need to store separate values depending on wether it is the actual instance, the prototype, etc\n      // e.g. the method for super might not be the same as the method for the prototype which might be not the same\n      // as the method for the instance\n      var newDefinition = createDefinition(this, methodName, enumerable, mixins, value);\n      Object.defineProperty(this, methodName, newDefinition);\n    }\n  }, _ref.configurable = true, _ref.enumerable = enumerable, _ref;\n}\n\nvar mobxAdminProperty = $mobx || \"$mobx\"; // BC\n\nvar mobxObserverProperty = /*#__PURE__*/newSymbol(\"isMobXReactObserver\");\nvar mobxIsUnmounted = /*#__PURE__*/newSymbol(\"isUnmounted\");\nvar skipRenderKey = /*#__PURE__*/newSymbol(\"skipRender\");\nvar isForcingUpdateKey = /*#__PURE__*/newSymbol(\"isForcingUpdate\");\nfunction makeClassComponentObserver(componentClass) {\n  var target = componentClass.prototype;\n\n  if (componentClass[mobxObserverProperty]) {\n    var displayName = getDisplayName(target);\n    console.warn(\"The provided component class (\" + displayName + \")\\n                has already been declared as an observer component.\");\n  } else {\n    componentClass[mobxObserverProperty] = true;\n  }\n\n  if (target.componentWillReact) {\n    throw new Error(\"The componentWillReact life-cycle event is no longer supported\");\n  }\n\n  if (componentClass[\"__proto__\"] !== PureComponent) {\n    if (!target.shouldComponentUpdate) {\n      target.shouldComponentUpdate = observerSCU;\n    } else if (target.shouldComponentUpdate !== observerSCU) {\n      // n.b. unequal check, instead of existence check, as @observer might be on superclass as well\n      throw new Error(\"It is not allowed to use shouldComponentUpdate in observer based components.\");\n    }\n  } // this.props and this.state are made observable, just to make sure @computed fields that\n  // are defined inside the component, and which rely on state or props, re-compute if state or props change\n  // (otherwise the computed wouldn't update and become stale on props change, since props are not observable)\n  // However, this solution is not without it's own problems: https://github.com/mobxjs/mobx-react/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3Aobservable-props-or-not+\n\n\n  makeObservableProp(target, \"props\");\n  makeObservableProp(target, \"state\");\n\n  if (componentClass.contextType) {\n    makeObservableProp(target, \"context\");\n  }\n\n  var originalRender = target.render;\n\n  if (typeof originalRender !== \"function\") {\n    var _displayName = getDisplayName(target);\n\n    throw new Error(\"[mobx-react] class component (\" + _displayName + \") is missing `render` method.\" + \"\\n`observer` requires `render` being a function defined on prototype.\" + \"\\n`render = () => {}` or `render = function() {}` is not supported.\");\n  }\n\n  target.render = function () {\n    this.render = isUsingStaticRendering() ? originalRender : createReactiveRender.call(this, originalRender);\n    return this.render();\n  };\n\n  patch(target, \"componentDidMount\", function () {\n    this[mobxIsUnmounted] = false;\n\n    if (!this.render[mobxAdminProperty]) {\n      // Reaction is re-created automatically during render, but a component can re-mount and skip render #3395.\n      // To re-create the reaction and re-subscribe to relevant observables we have to force an update.\n      Component.prototype.forceUpdate.call(this);\n    }\n  });\n  patch(target, \"componentWillUnmount\", function () {\n    if (isUsingStaticRendering()) {\n      return;\n    }\n\n    var reaction = this.render[mobxAdminProperty];\n\n    if (reaction) {\n      reaction.dispose(); // Forces reaction to be re-created on next render\n\n      this.render[mobxAdminProperty] = null;\n    } else {\n      // Render may have been hot-swapped and/or overridden by a subclass.\n      var _displayName2 = getDisplayName(this);\n\n      console.warn(\"The reactive render of an observer class component (\" + _displayName2 + \")\\n                was overridden after MobX attached. This may result in a memory leak if the\\n                overridden reactive render was not properly disposed.\");\n    }\n\n    this[mobxIsUnmounted] = true;\n  });\n  return componentClass;\n} // Generates a friendly name for debugging\n\nfunction getDisplayName(comp) {\n  return comp.displayName || comp.name || comp.constructor && (comp.constructor.displayName || comp.constructor.name) || \"<component>\";\n}\n\nfunction createReactiveRender(originalRender) {\n  var _this = this;\n\n  /**\r\n   * If props are shallowly modified, react will render anyway,\r\n   * so atom.reportChanged() should not result in yet another re-render\r\n   */\n  setHiddenProp(this, skipRenderKey, false);\n  /**\r\n   * forceUpdate will re-assign this.props. We don't want that to cause a loop,\r\n   * so detect these changes\r\n   */\n\n  setHiddenProp(this, isForcingUpdateKey, false);\n  var initialName = getDisplayName(this);\n  var boundOriginalRender = originalRender.bind(this);\n  var isRenderingPending = false;\n\n  var createReaction = function createReaction() {\n    var reaction = new Reaction(initialName + \".render()\", function () {\n      if (!isRenderingPending) {\n        // N.B. Getting here *before mounting* means that a component constructor has side effects (see the relevant test in misc.test.tsx)\n        // This unidiomatic React usage but React will correctly warn about this so we continue as usual\n        // See #85 / Pull #44\n        isRenderingPending = true;\n\n        if (_this[mobxIsUnmounted] !== true) {\n          var hasError = true;\n\n          try {\n            setHiddenProp(_this, isForcingUpdateKey, true);\n\n            if (!_this[skipRenderKey]) {\n              Component.prototype.forceUpdate.call(_this);\n            }\n\n            hasError = false;\n          } finally {\n            setHiddenProp(_this, isForcingUpdateKey, false);\n\n            if (hasError) {\n              reaction.dispose(); // Forces reaction to be re-created on next render\n\n              _this.render[mobxAdminProperty] = null;\n            }\n          }\n        }\n      }\n    });\n    reaction[\"reactComponent\"] = _this;\n    return reaction;\n  };\n\n  function reactiveRender() {\n    var _reactiveRender$mobxA;\n\n    isRenderingPending = false; // Create reaction lazily to support re-mounting #3395\n\n    var reaction = (_reactiveRender$mobxA = reactiveRender[mobxAdminProperty]) != null ? _reactiveRender$mobxA : reactiveRender[mobxAdminProperty] = createReaction();\n    var exception = undefined;\n    var rendering = undefined;\n    reaction.track(function () {\n      try {\n        // TODO@major\n        // Optimization: replace with _allowStateChangesStart/End (not available in mobx@6.0.0)\n        rendering = _allowStateChanges(false, boundOriginalRender);\n      } catch (e) {\n        exception = e;\n      }\n    });\n\n    if (exception) {\n      throw exception;\n    }\n\n    return rendering;\n  }\n\n  return reactiveRender;\n}\n\nfunction observerSCU(nextProps, nextState) {\n  if (isUsingStaticRendering()) {\n    console.warn(\"[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.\");\n  } // update on any state changes (as is the default)\n\n\n  if (this.state !== nextState) {\n    return true;\n  } // update if props are shallowly not equal, inspired by PureRenderMixin\n  // we could return just 'false' here, and avoid the `skipRender` checks etc\n  // however, it is nicer if lifecycle events are triggered like usually,\n  // so we return true here if props are shallowly modified.\n\n\n  return !shallowEqual(this.props, nextProps);\n}\n\nfunction makeObservableProp(target, propName) {\n  var valueHolderKey = newSymbol(\"reactProp_\" + propName + \"_valueHolder\");\n  var atomHolderKey = newSymbol(\"reactProp_\" + propName + \"_atomHolder\");\n\n  function getAtom() {\n    if (!this[atomHolderKey]) {\n      setHiddenProp(this, atomHolderKey, createAtom(\"reactive \" + propName));\n    }\n\n    return this[atomHolderKey];\n  }\n\n  Object.defineProperty(target, propName, {\n    configurable: true,\n    enumerable: true,\n    get: function get() {\n      var prevReadState = false; // Why this check? BC?\n      // @ts-expect-error\n\n      if (_allowStateReadsStart && _allowStateReadsEnd) {\n        prevReadState = _allowStateReadsStart(true);\n      }\n\n      getAtom.call(this).reportObserved(); // Why this check? BC?\n      // @ts-expect-error\n\n      if (_allowStateReadsStart && _allowStateReadsEnd) {\n        _allowStateReadsEnd(prevReadState);\n      }\n\n      return this[valueHolderKey];\n    },\n    set: function set(v) {\n      if (!this[isForcingUpdateKey] && !shallowEqual(this[valueHolderKey], v)) {\n        setHiddenProp(this, valueHolderKey, v);\n        setHiddenProp(this, skipRenderKey, true);\n        getAtom.call(this).reportChanged();\n        setHiddenProp(this, skipRenderKey, false);\n      } else {\n        setHiddenProp(this, valueHolderKey, v);\n      }\n    }\n  });\n}\n\n/**\r\n * Observer function / decorator\r\n */\n\nfunction observer(component) {\n  if (component[\"isMobxInjector\"] === true) {\n    console.warn(\"Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`\");\n  }\n\n  if (Object.prototype.isPrototypeOf.call(Component, component) || Object.prototype.isPrototypeOf.call(PureComponent, component)) {\n    // Class component\n    return makeClassComponentObserver(component);\n  } else {\n    // Function component\n    return observer$1(component);\n  }\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar _excluded = [\"children\"];\nvar MobXProviderContext = /*#__PURE__*/React__default.createContext({});\nfunction Provider(props) {\n  var children = props.children,\n      stores = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var parentValue = React__default.useContext(MobXProviderContext);\n  var mutableProviderRef = React__default.useRef(_extends({}, parentValue, stores));\n  var value = mutableProviderRef.current;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var newValue = _extends({}, value, stores); // spread in previous state for the context based stores\n\n\n    if (!shallowEqual(value, newValue)) {\n      throw new Error(\"MobX Provider: The set of provided stores has changed. See: https://github.com/mobxjs/mobx-react#the-set-of-provided-stores-has-changed-error.\");\n    }\n  }\n\n  return React__default.createElement(MobXProviderContext.Provider, {\n    value: value\n  }, children);\n}\nProvider.displayName = \"MobXProvider\";\n\n/**\r\n * Store Injection\r\n */\n\nfunction createStoreInjector(grabStoresFn, component, injectNames, makeReactive) {\n  // Support forward refs\n  var Injector = React__default.forwardRef(function (props, ref) {\n    var newProps = _extends({}, props);\n\n    var context = React__default.useContext(MobXProviderContext);\n    Object.assign(newProps, grabStoresFn(context || {}, newProps) || {});\n\n    if (ref) {\n      newProps.ref = ref;\n    }\n\n    return React__default.createElement(component, newProps);\n  });\n  if (makeReactive) Injector = observer(Injector);\n  Injector[\"isMobxInjector\"] = true; // assigned late to suppress observer warning\n  // Static fields from component should be visible on the generated Injector\n\n  copyStaticProperties(component, Injector);\n  Injector[\"wrappedComponent\"] = component;\n  Injector.displayName = getInjectName(component, injectNames);\n  return Injector;\n}\n\nfunction getInjectName(component, injectNames) {\n  var displayName;\n  var componentName = component.displayName || component.name || component.constructor && component.constructor.name || \"Component\";\n  if (injectNames) displayName = \"inject-with-\" + injectNames + \"(\" + componentName + \")\";else displayName = \"inject(\" + componentName + \")\";\n  return displayName;\n}\n\nfunction grabStoresByName(storeNames) {\n  return function (baseStores, nextProps) {\n    storeNames.forEach(function (storeName) {\n      if (storeName in nextProps // prefer props over stores\n      ) return;\n      if (!(storeName in baseStores)) throw new Error(\"MobX injector: Store '\" + storeName + \"' is not available! Make sure it is provided by some Provider\");\n      nextProps[storeName] = baseStores[storeName];\n    });\n    return nextProps;\n  };\n}\n/**\r\n * higher order component that injects stores to a child.\r\n * takes either a varargs list of strings, which are stores read from the context,\r\n * or a function that manually maps the available stores from the context to props:\r\n * storesToProps(mobxStores, props, context) => newProps\r\n */\n\n\nfunction inject() {\n  for (var _len = arguments.length, storeNames = new Array(_len), _key = 0; _key < _len; _key++) {\n    storeNames[_key] = arguments[_key];\n  }\n\n  if (typeof arguments[0] === \"function\") {\n    var grabStoresFn = arguments[0];\n    return function (componentClass) {\n      return createStoreInjector(grabStoresFn, componentClass, grabStoresFn.name, true);\n    };\n  } else {\n    return function (componentClass) {\n      return createStoreInjector(grabStoresByName(storeNames), componentClass, storeNames.join(\"-\"), false);\n    };\n  }\n}\n\nvar protoStoreKey = /*#__PURE__*/newSymbol(\"disposeOnUnmountProto\");\nvar instStoreKey = /*#__PURE__*/newSymbol(\"disposeOnUnmountInst\");\n\nfunction runDisposersOnWillUnmount() {\n  var _this = this;\n  [].concat(this[protoStoreKey] || [], this[instStoreKey] || []).forEach(function (propKeyOrFunction) {\n    var prop = typeof propKeyOrFunction === \"string\" ? _this[propKeyOrFunction] : propKeyOrFunction;\n\n    if (prop !== undefined && prop !== null) {\n      if (Array.isArray(prop)) prop.map(function (f) {\n        return f();\n      });else prop();\n    }\n  });\n}\n\nfunction disposeOnUnmount(target, propertyKeyOrFunction) {\n  if (Array.isArray(propertyKeyOrFunction)) {\n    return propertyKeyOrFunction.map(function (fn) {\n      return disposeOnUnmount(target, fn);\n    });\n  }\n\n  var c = Object.getPrototypeOf(target).constructor;\n  var c2 = Object.getPrototypeOf(target.constructor); // Special case for react-hot-loader\n\n  var c3 = Object.getPrototypeOf(Object.getPrototypeOf(target));\n\n  if (!(c === React__default.Component || c === React__default.PureComponent || c2 === React__default.Component || c2 === React__default.PureComponent || c3 === React__default.Component || c3 === React__default.PureComponent)) {\n    throw new Error(\"[mobx-react] disposeOnUnmount only supports direct subclasses of React.Component or React.PureComponent.\");\n  }\n\n  if (typeof propertyKeyOrFunction !== \"string\" && typeof propertyKeyOrFunction !== \"function\" && !Array.isArray(propertyKeyOrFunction)) {\n    throw new Error(\"[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.\");\n  } // decorator's target is the prototype, so it doesn't have any instance properties like props\n\n\n  var isDecorator = typeof propertyKeyOrFunction === \"string\"; // add property key / function we want run (disposed) to the store\n\n  var componentWasAlreadyModified = !!target[protoStoreKey] || !!target[instStoreKey];\n  var store = isDecorator ? // decorators are added to the prototype store\n  target[protoStoreKey] || (target[protoStoreKey] = []) : // functions are added to the instance store\n  target[instStoreKey] || (target[instStoreKey] = []);\n  store.push(propertyKeyOrFunction); // tweak the component class componentWillUnmount if not done already\n\n  if (!componentWasAlreadyModified) {\n    patch(target, \"componentWillUnmount\", runDisposersOnWillUnmount);\n  } // return the disposer as is if invoked as a non decorator\n\n\n  if (typeof propertyKeyOrFunction !== \"string\") {\n    return propertyKeyOrFunction;\n  }\n}\n\nfunction createChainableTypeChecker(validator) {\n  function checkType(isRequired, props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = new Array(_len > 6 ? _len - 6 : 0), _key = 6; _key < _len; _key++) {\n      rest[_key - 6] = arguments[_key];\n    }\n\n    return untracked(function () {\n      componentName = componentName || \"<<anonymous>>\";\n      propFullName = propFullName || propName;\n\n      if (props[propName] == null) {\n        if (isRequired) {\n          var actual = props[propName] === null ? \"null\" : \"undefined\";\n          return new Error(\"The \" + location + \" `\" + propFullName + \"` is marked as required \" + \"in `\" + componentName + \"`, but its value is `\" + actual + \"`.\");\n        }\n\n        return null;\n      } else {\n        // @ts-ignore rest arg is necessary for some React internals - fails tests otherwise\n        return validator.apply(void 0, [props, propName, componentName, location, propFullName].concat(rest));\n      }\n    });\n  }\n\n  var chainedCheckType = checkType.bind(null, false); // Add isRequired to satisfy Requirable\n\n  chainedCheckType.isRequired = checkType.bind(null, true);\n  return chainedCheckType;\n} // Copied from React.PropTypes\n\n\nfunction isSymbol(propType, propValue) {\n  // Native Symbol.\n  if (propType === \"symbol\") {\n    return true;\n  } // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n\n\n  if (propValue[\"@@toStringTag\"] === \"Symbol\") {\n    return true;\n  } // Fallback for non-spec compliant Symbols which are polyfilled.\n\n\n  if (typeof Symbol === \"function\" && propValue instanceof Symbol) {\n    return true;\n  }\n\n  return false;\n} // Copied from React.PropTypes\n\n\nfunction getPropType(propValue) {\n  var propType = typeof propValue;\n\n  if (Array.isArray(propValue)) {\n    return \"array\";\n  }\n\n  if (propValue instanceof RegExp) {\n    // Old webkits (at least until Android 4.0) return 'function' rather than\n    // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n    // passes PropTypes.object.\n    return \"object\";\n  }\n\n  if (isSymbol(propType, propValue)) {\n    return \"symbol\";\n  }\n\n  return propType;\n} // This handles more types than `getPropType`. Only used for error messages.\n// Copied from React.PropTypes\n\n\nfunction getPreciseType(propValue) {\n  var propType = getPropType(propValue);\n\n  if (propType === \"object\") {\n    if (propValue instanceof Date) {\n      return \"date\";\n    } else if (propValue instanceof RegExp) {\n      return \"regexp\";\n    }\n  }\n\n  return propType;\n}\n\nfunction createObservableTypeCheckerCreator(allowNativeType, mobxType) {\n  return createChainableTypeChecker(function (props, propName, componentName, location, propFullName) {\n    return untracked(function () {\n      if (allowNativeType) {\n        if (getPropType(props[propName]) === mobxType.toLowerCase()) return null;\n      }\n\n      var mobxChecker;\n\n      switch (mobxType) {\n        case \"Array\":\n          mobxChecker = isObservableArray;\n          break;\n\n        case \"Object\":\n          mobxChecker = isObservableObject;\n          break;\n\n        case \"Map\":\n          mobxChecker = isObservableMap;\n          break;\n\n        default:\n          throw new Error(\"Unexpected mobxType: \" + mobxType);\n      }\n\n      var propValue = props[propName];\n\n      if (!mobxChecker(propValue)) {\n        var preciseType = getPreciseType(propValue);\n        var nativeTypeExpectationMessage = allowNativeType ? \" or javascript `\" + mobxType.toLowerCase() + \"`\" : \"\";\n        return new Error(\"Invalid prop `\" + propFullName + \"` of type `\" + preciseType + \"` supplied to\" + \" `\" + componentName + \"`, expected `mobx.Observable\" + mobxType + \"`\" + nativeTypeExpectationMessage + \".\");\n      }\n\n      return null;\n    });\n  });\n}\n\nfunction createObservableArrayOfTypeChecker(allowNativeType, typeChecker) {\n  return createChainableTypeChecker(function (props, propName, componentName, location, propFullName) {\n    for (var _len2 = arguments.length, rest = new Array(_len2 > 5 ? _len2 - 5 : 0), _key2 = 5; _key2 < _len2; _key2++) {\n      rest[_key2 - 5] = arguments[_key2];\n    }\n\n    return untracked(function () {\n      if (typeof typeChecker !== \"function\") {\n        return new Error(\"Property `\" + propFullName + \"` of component `\" + componentName + \"` has \" + \"invalid PropType notation.\");\n      } else {\n        var error = createObservableTypeCheckerCreator(allowNativeType, \"Array\")(props, propName, componentName, location, propFullName);\n        if (error instanceof Error) return error;\n        var propValue = props[propName];\n\n        for (var i = 0; i < propValue.length; i++) {\n          error = typeChecker.apply(void 0, [propValue, i, componentName, location, propFullName + \"[\" + i + \"]\"].concat(rest));\n          if (error instanceof Error) return error;\n        }\n\n        return null;\n      }\n    });\n  });\n}\n\nvar observableArray = /*#__PURE__*/createObservableTypeCheckerCreator(false, \"Array\");\nvar observableArrayOf = /*#__PURE__*/createObservableArrayOfTypeChecker.bind(null, false);\nvar observableMap = /*#__PURE__*/createObservableTypeCheckerCreator(false, \"Map\");\nvar observableObject = /*#__PURE__*/createObservableTypeCheckerCreator(false, \"Object\");\nvar arrayOrObservableArray = /*#__PURE__*/createObservableTypeCheckerCreator(true, \"Array\");\nvar arrayOrObservableArrayOf = /*#__PURE__*/createObservableArrayOfTypeChecker.bind(null, true);\nvar objectOrObservableObject = /*#__PURE__*/createObservableTypeCheckerCreator(true, \"Object\");\nvar PropTypes = {\n  observableArray: observableArray,\n  observableArrayOf: observableArrayOf,\n  observableMap: observableMap,\n  observableObject: observableObject,\n  arrayOrObservableArray: arrayOrObservableArray,\n  arrayOrObservableArrayOf: arrayOrObservableArrayOf,\n  objectOrObservableObject: objectOrObservableObject\n};\n\nif (!Component) throw new Error(\"mobx-react requires React to be available\");\nif (!observable) throw new Error(\"mobx-react requires mobx to be available\");\n\nexport { MobXProviderContext, PropTypes, Provider, disposeOnUnmount, inject, observer };\n//# sourceMappingURL=mobxreact.esm.js.map\n","import { observer } from 'mobx-react';\nimport { configure } from 'mobx';\n\nconfigure({ enforceActions: 'never' });\n\n// 常用的直接导出，其他的以 mobx 命名空间导出\nexport {\n  observable as obx,\n  observable,\n  observe,\n  autorun,\n  makeObservable,\n  makeAutoObservable,\n  reaction,\n  computed,\n  action,\n  runInAction,\n  untracked,\n} from 'mobx';\nexport type { IReactionDisposer, IReactionPublic, IReactionOptions } from 'mobx';\n\nexport * as mobx from 'mobx';\nexport { observer };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.logger = void 0;\n__exportStar(require(\"./getByDecorator\"), exports);\n__exportStar(require(\"./getGlobalType\"), exports);\n__exportStar(require(\"./getRefMap\"), exports);\n__exportStar(require(\"./getSuperClassInfo\"), exports);\n__exportStar(require(\"./guard\"), exports);\n__exportStar(require(\"./logger\"), exports);\n__exportStar(require(\"./types\"), exports);\nvar logger_1 = require(\"./logger\");\nexports.logger = logger_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.symbolString = exports.isExtendOf = exports.getGlobalType = exports.isClass = void 0;\nvar class_1 = require(\"../class\");\nvar getSuperClassInfo_1 = require(\"./getSuperClassInfo\");\nvar _uid = 0;\nvar _globalTypes = {};\nfunction isClass(target) {\n    return (target === null || target === void 0 ? void 0 : target.prototype) && target.prototype.constructor === target;\n    // If browser, maybe no class\n    // getPrototypeOf a class, is not Function, not instanceof Function, but typeof 'function'\n}\nexports.isClass = isClass;\n/**\n * getGlobalType\n * @param key class, string or symbol.\n * @param prefix the prefix of type.\n */\nfunction getGlobalType(key, prefix) {\n    if (prefix === void 0) { prefix = ''; }\n    if (!key)\n        throw new Error('no key.');\n    // object for ie11 symbol\n    if (['string', 'symbol', 'object'].includes(typeof key)) {\n        return key;\n    }\n    if (key.hasOwnProperty('__type')) {\n        return key['__type'];\n    }\n    var type;\n    var keyName = key[class_1.nameSymbol] || key.name;\n    if (typeof key !== 'function' || !keyName) {\n        // Only for compatible with es5 class\n        throw new Error('data MUST be a class or string.');\n    }\n    type = prefix + keyName;\n    if (_globalTypes[type]) {\n        type = type + '_' + _uid++;\n    }\n    _globalTypes[type] = true;\n    Object.defineProperty(key, '__type', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: type,\n    });\n    return type;\n}\nexports.getGlobalType = getGlobalType;\nfunction isExtendOf(classType, superClassType) {\n    if (!isClass(classType) || !isClass(superClassType)) {\n        throw new Error('classType and superClassType MUST be a class.');\n    }\n    var type = getGlobalType(superClassType);\n    return !!(0, getSuperClassInfo_1.getSuperClassInfo)(classType).find(function (cls) { return cls.type === type; });\n}\nexports.isExtendOf = isExtendOf;\nfunction symbolString(key) {\n    return typeof key === 'symbol' ? key.toString() : key;\n}\nexports.symbolString = symbolString;\n//# sourceMappingURL=getGlobalType.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.classLoader = exports.ClassLoader = exports.DuplicateRegistrationError = void 0;\nvar metadata_1 = require(\"./metadata\");\nvar utils_1 = require(\"../utils\");\nvar DuplicateRegistrationError = /** @class */ (function (_super) {\n    __extends(DuplicateRegistrationError, _super);\n    function DuplicateRegistrationError(type) {\n        return _super.call(this, \"Type \".concat(type.name, \" is already registration.\")) || this;\n    }\n    return DuplicateRegistrationError;\n}(Error));\nexports.DuplicateRegistrationError = DuplicateRegistrationError;\nvar ClassLoader = /** @class */ (function () {\n    function ClassLoader(classInfoMap, implementCacheMap) {\n        if (classInfoMap === void 0) { classInfoMap = new Map(); }\n        if (implementCacheMap === void 0) { implementCacheMap = new Map(); }\n        this.classInfoMap = classInfoMap;\n        this.implementCacheMap = implementCacheMap;\n    }\n    /** has class */\n    ClassLoader.prototype.hasClass = function (type) {\n        return this.classInfoMap.has(type);\n    };\n    /** register class */\n    ClassLoader.prototype.registerClass = function (type, info) {\n        var _this = this;\n        var _a;\n        if (this.classInfoMap.has(type)) {\n            throw new DuplicateRegistrationError(type);\n        }\n        var metadata = (0, metadata_1.getMetadata)(type);\n        metadata.injectable = true;\n        var clsInfo = info || metadata.classInfo;\n        if (!clsInfo.name) {\n            clsInfo.name = type.name;\n        }\n        if (!((_a = clsInfo.extends) === null || _a === void 0 ? void 0 : _a.length)) {\n            var superClasses = (0, utils_1.getSuperClassInfo)(type);\n            clsInfo.extends = superClasses.map(function (c) { return c.class; });\n        }\n        this.classInfoMap.set(type, clsInfo);\n        if (!clsInfo.implements) {\n            clsInfo.implements = [];\n        }\n        // add cache\n        __spreadArray(__spreadArray([], clsInfo.extends, true), clsInfo.implements, true).forEach(function (ext) {\n            var impls = _this.getImplCacheByType(ext);\n            if (impls.every(function (impl) { return impl.type !== type; })) {\n                impls.push({\n                    type: type,\n                    info: clsInfo,\n                });\n            }\n        });\n        return this;\n    };\n    /** unregister class */\n    ClassLoader.prototype.unregisterClass = function (type) {\n        var _this = this;\n        var info = this.classInfoMap.get(type);\n        if (info) {\n            // remove from cache\n            __spreadArray(__spreadArray([], info.extends, true), info.implements, true).forEach(function (ext) {\n                var cache = _this.getImplCacheByType(ext);\n                var index = cache.findIndex(function (c) { return c.type === type; });\n                /* istanbul ignore else */\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                }\n            });\n            return this.classInfoMap.delete(type);\n        }\n        return false;\n    };\n    /** get class info */\n    ClassLoader.prototype.getClassInfo = function (type) {\n        return this.classInfoMap.get(type);\n    };\n    /** filter classes by info */\n    ClassLoader.prototype.filterClasses = function (pattern) {\n        var classes = [];\n        this.classInfoMap.forEach(function (info, type) {\n            var typeWithInfo = { type: type, info: info };\n            if (pattern(typeWithInfo)) {\n                classes.push(typeWithInfo);\n            }\n        });\n        return classes;\n    };\n    /** classes of extends/implements type */\n    ClassLoader.prototype.getImplementClasses = function (type) {\n        return this.getImplCacheByType(type);\n    };\n    ClassLoader.prototype.clearAll = function () {\n        this.classInfoMap.clear();\n        this.implementCacheMap.clear();\n        return this;\n    };\n    /** return new instance from this */\n    ClassLoader.prototype.clone = function () {\n        var Constructor = this.constructor;\n        var newInst = new Constructor();\n        newInst.initWith(this);\n        return newInst;\n    };\n    /**\n     * init maps from instance\n     * @param classLoader source loader\n     */\n    ClassLoader.prototype.initWith = function (classLoader) {\n        this.classInfoMap = new Map(classLoader.classInfoMap);\n        this.implementCacheMap = this.cloneImplCacheMap(classLoader.implementCacheMap);\n    };\n    ClassLoader.prototype.cloneImplCacheMap = function (map) {\n        return new Map(Array.from(map.entries()).map(function (_a) {\n            var k = _a[0], v = _a[1];\n            return [k, __spreadArray([], v, true)];\n        }));\n    };\n    ClassLoader.prototype.getImplCacheByType = function (type) {\n        var key = (0, utils_1.getGlobalType)(type);\n        if (!this.implementCacheMap.has(key)) {\n            this.implementCacheMap.set(key, []);\n            return this.getImplCacheByType(type);\n        }\n        return this.implementCacheMap.get(key);\n    };\n    return ClassLoader;\n}());\nexports.ClassLoader = ClassLoader;\nexports.classLoader = new ClassLoader();\n//# sourceMappingURL=ClassLoader.js.map","import { Component } from 'react';\nimport { IPublicTypeTipConfig } from '@alilc/lowcode-types';\nimport { uniqueId } from '@alilc/lowcode-utils';\nimport { postTip } from './tip-handler';\n\nexport class Tip extends Component<IPublicTypeTipConfig> {\n  private id = uniqueId('tips$');\n\n  componentWillUnmount() {\n    postTip(this.id, null);\n  }\n\n  render() {\n    postTip(this.id, this.props);\n    return <meta data-role=\"tip\" data-tip-id={this.id} />;\n  }\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","import store from 'store';\nimport { getLogger } from './logger';\nimport { IPublicModelPreference } from '@alilc/lowcode-types';\n\nconst logger = getLogger({ level: 'warn', bizName: 'Preference' });\nconst STORAGE_KEY_PREFIX = 'ale';\n\n/**\n * used to store user preferences, such as pinned status of a pannel.\n * save to local storage.\n */\nexport default class Preference implements IPublicModelPreference {\n  getStorageKey(key: string, module?: string): string {\n    const moduleKey = module || '__inner__';\n    return `${STORAGE_KEY_PREFIX}_${moduleKey}.${key}`;\n  }\n\n  set(key: string, value: any, module?: string): void {\n    if (!key || typeof key !== 'string' || key.length === 0) {\n      logger.error('Invalid key when setting preference', key);\n      return;\n    }\n    const storageKey = this.getStorageKey(key, module);\n    logger.debug('storageKey:', storageKey, 'set with value:', value);\n    store.set(storageKey, value);\n  }\n\n  get(key: string, module: string): any {\n    if (!key || typeof key !== 'string' || key.length === 0) {\n      logger.error('Invalid key when getting from preference', key);\n      return;\n    }\n    const storageKey = this.getStorageKey(key, module);\n    const result = store.get(storageKey);\n    logger.debug('storageKey:', storageKey, 'get with result:', result);\n    return result;\n  }\n\n  /**\n   * check if local storage contain certain key\n   *\n   * @param {string} key\n   * @param {string} module\n   */\n  contains(key: string, module: string): boolean {\n    if (!key || typeof key !== 'string' || key.length === 0) {\n      logger.error('Invalid key when getting from preference', key);\n      return false;\n    }\n    const storageKey = this.getStorageKey(key, module);\n    const result = store.get(storageKey);\n\n    return !(result === undefined || result === null);\n  }\n}","import { get as lodashGet } from 'lodash';\nimport { isPlainObject } from '@alilc/lowcode-utils';\nimport {\n  IPublicTypeEngineOptions,\n  IPublicModelEngineConfig,\n  IPublicModelPreference,\n} from '@alilc/lowcode-types';\nimport { getLogger } from './utils/logger';\nimport Preference from './utils/preference';\n\nconst logger = getLogger({ level: 'log', bizName: 'config' });\n\n// this default behavior will be different later\nconst STRICT_PLUGIN_MODE_DEFAULT = true;\n\n// used in strict mode, when only options in this VALID_ENGINE_OPTIONS can be accepted\n// type and description are only used for developer`s assistance, won`t affect runtime\nconst VALID_ENGINE_OPTIONS = {\n  enableCondition: {\n    type: 'boolean',\n    description: '是否开启 condition 的能力，默认在设计器中不管 condition 是啥都正常展示',\n  },\n  designMode: {\n    type: 'string',\n    enum: ['design', 'live'],\n    default: 'design',\n    description: '设计模式，live 模式将会实时展示变量值',\n  },\n  device: {\n    type: 'string',\n    enum: ['default', 'mobile', 'any string value'],\n    default: 'default',\n    description: '设备类型',\n  },\n  deviceClassName: {\n    type: 'string',\n    default: undefined,\n    description: '指定初始化的 deviceClassName，挂载到画布的顶层节点上',\n  },\n  locale: {\n    type: 'string',\n    default: 'zh-CN',\n    description: '语言',\n  },\n  renderEnv: {\n    type: 'string',\n    enum: ['react', 'rax', 'any string value'],\n    default: 'react',\n    description: '渲染器类型',\n  },\n  deviceMapper: {\n    type: 'object',\n    description: '设备类型映射器，处理设计器与渲染器中 device 的映射',\n  },\n  enableStrictPluginMode: {\n    type: 'boolean',\n    default: STRICT_PLUGIN_MODE_DEFAULT,\n    description: '开启严格插件模式，默认值：STRICT_PLUGIN_MODE_DEFAULT , 严格模式下，插件将无法通过 engineOptions 传递自定义配置项',\n  },\n  enableReactiveContainer: {\n    type: 'boolean',\n    default: false,\n    description: '开启拖拽组件时，即将被放入的容器是否有视觉反馈',\n  },\n  disableAutoRender: {\n    type: 'boolean',\n    default: false,\n    description: '关闭画布自动渲染，在资产包多重异步加载的场景有效',\n  },\n  disableDetecting: {\n    type: 'boolean',\n    default: false,\n    description: '关闭拖拽组件时的虚线响应，性能考虑',\n  },\n  customizeIgnoreSelectors: {\n    type: 'function',\n    default: undefined,\n    description: '定制画布中点击被忽略的 selectors, eg. (defaultIgnoreSelectors: string[], e: MouseEvent) => string[]',\n  },\n  disableDefaultSettingPanel: {\n    type: 'boolean',\n    default: false,\n    description: '禁止默认的设置面板',\n  },\n  disableDefaultSetters: {\n    type: 'boolean',\n    default: false,\n    description: '禁止默认的设置器',\n  },\n  enableCanvasLock: {\n    type: 'boolean',\n    default: false,\n    description: '打开画布的锁定操作',\n  },\n  enableLockedNodeSetting: {\n    type: 'boolean',\n    default: false,\n    description: '容器锁定后，容器本身是否可以设置属性，仅当画布锁定特性开启时生效',\n  },\n  stayOnTheSameSettingTab: {\n    type: 'boolean',\n    default: false,\n    description: '当选中节点切换时，是否停留在相同的设置 tab 上',\n  },\n  hideSettingsTabsWhenOnlyOneItem: {\n    type: 'boolean',\n    description: '是否在只有一个 item 的时候隐藏设置 tabs',\n  },\n  loadingComponent: {\n    type: 'ComponentType',\n    default: undefined,\n    description: '自定义 loading 组件',\n  },\n  supportVariableGlobally: {\n    type: 'boolean',\n    default: false,\n    description: '设置所有属性支持变量配置',\n  },\n  visionSettings: {\n    type: 'object',\n    description: 'Vision-polyfill settings',\n  },\n  simulatorUrl: {\n    type: 'array',\n    description: '自定义 simulatorUrl 的地址',\n  },\n  /**\n   * 与 react-renderer 的 appHelper 一致，https://lowcode-engine.cn/site/docs/guide/expand/runtime/renderer#apphelper\n   */\n  appHelper: {\n    type: 'object',\n    description: '定义 utils 和 constants 等对象',\n  },\n  requestHandlersMap: {\n    type: 'object',\n    description: '数据源引擎的请求处理器映射',\n  },\n  thisRequiredInJSE: {\n    type: 'boolean',\n    description: 'JSExpression 是否只支持使用 this 来访问上下文变量',\n  },\n  enableStrictNotFoundMode: {\n    type: 'boolean',\n    description: '当开启组件未找到严格模式时，渲染模块不会默认给一个容器组件',\n  },\n  focusNodeSelector: {\n    type: 'function',\n    description: '配置指定节点为根组件',\n  },\n};\n\n\nconst getStrictModeValue = (engineOptions: IPublicTypeEngineOptions, defaultValue: boolean): boolean => {\n  if (!engineOptions || !isPlainObject(engineOptions)) {\n    return defaultValue;\n  }\n  if (engineOptions.enableStrictPluginMode === undefined\n    || engineOptions.enableStrictPluginMode === null) {\n    return defaultValue;\n  }\n  return engineOptions.enableStrictPluginMode;\n};\n\nexport interface IEngineConfigPrivate {\n  /**\n   * if engineOptions.strictPluginMode === true, only accept propertied predefined in EngineOptions.\n   *\n   * @param {IPublicTypeEngineOptions} engineOptions\n   */\n  setEngineOptions(engineOptions: IPublicTypeEngineOptions): void;\n\n  notifyGot(key: string): void;\n\n  setWait(key: string, resolve: (data: any) => void, once?: boolean): void;\n\n  delWait(key: string, fn: any): void;\n}\n\n\nexport class EngineConfig implements IPublicModelEngineConfig, IEngineConfigPrivate {\n  private config: { [key: string]: any } = {};\n\n  private waits = new Map<\n  string,\n  Array<{\n    once?: boolean;\n    resolve: (data: any) => void;\n  }>\n  >();\n\n  /**\n   * used to store preferences\n   *\n   */\n  readonly preference: IPublicModelPreference;\n\n  constructor(config?: { [key: string]: any }) {\n    this.config = config || {};\n    this.preference = new Preference();\n  }\n\n  /**\n   * 判断指定 key 是否有值\n   * @param key\n   */\n  has(key: string): boolean {\n    return this.config[key] !== undefined;\n  }\n\n  /**\n   * 获取指定 key 的值\n   * @param key\n   * @param defaultValue\n   */\n  get(key: string, defaultValue?: any): any {\n    return lodashGet(this.config, key, defaultValue);\n  }\n\n  /**\n   * 设置指定 key 的值\n   * @param key\n   * @param value\n   */\n  set(key: string, value: any) {\n    this.config[key] = value;\n    this.notifyGot(key);\n  }\n\n  /**\n   * 批量设值，set 的对象版本\n   * @param config\n   */\n  setConfig(config: { [key: string]: any }) {\n    if (config) {\n      Object.keys(config).forEach((key) => {\n        this.set(key, config[key]);\n      });\n    }\n  }\n\n  /**\n   * if engineOptions.strictPluginMode === true, only accept propertied predefined in EngineOptions.\n   *\n   * @param {IPublicTypeEngineOptions} engineOptions\n   */\n  setEngineOptions(engineOptions: IPublicTypeEngineOptions) {\n    if (!engineOptions || !isPlainObject(engineOptions)) {\n      return;\n    }\n    const strictMode = getStrictModeValue(engineOptions, STRICT_PLUGIN_MODE_DEFAULT) === true;\n    if (strictMode) {\n      const isValidKey = (key: string) => {\n        const result = (VALID_ENGINE_OPTIONS as any)[key];\n        return !(result === undefined || result === null);\n      };\n      Object.keys(engineOptions).forEach((key) => {\n        if (isValidKey(key)) {\n          this.set(key, (engineOptions as any)[key]);\n        } else {\n          logger.warn(`failed to config ${key} to engineConfig, only predefined options can be set under strict mode, predefined options: `, VALID_ENGINE_OPTIONS);\n        }\n      });\n    } else {\n      this.setConfig(engineOptions as any);\n    }\n  }\n\n  /**\n   * 获取指定 key 的值，若此时还未赋值，则等待，若已有值，则直接返回值\n   *  注：此函数返回 Promise 实例，只会执行（fullfill）一次\n   * @param key\n   * @returns\n   */\n  onceGot(key: string): Promise<any> {\n    const val = this.config[key];\n    if (val !== undefined) {\n      return Promise.resolve(val);\n    }\n    return new Promise((resolve) => {\n      this.setWait(key, resolve, true);\n    });\n  }\n\n  /**\n   * 获取指定 key 的值，函数回调模式，若多次被赋值，回调会被多次调用\n   * @param key\n   * @param fn\n   * @returns\n   */\n  onGot(key: string, fn: (data: any) => void): () => void {\n    const val = this.config?.[key];\n    if (val !== undefined) {\n      fn(val);\n      return () => {};\n    } else {\n      this.setWait(key, fn);\n      return () => {\n        this.delWait(key, fn);\n      };\n    }\n  }\n\n  notifyGot(key: string): void {\n    let waits = this.waits.get(key);\n    if (!waits) {\n      return;\n    }\n    waits = waits.slice().reverse();\n    let i = waits.length;\n    while (i--) {\n      waits[i].resolve(this.get(key));\n      if (waits[i].once) {\n        waits.splice(i, 1);\n      }\n    }\n    if (waits.length > 0) {\n      this.waits.set(key, waits);\n    } else {\n      this.waits.delete(key);\n    }\n  }\n\n  setWait(key: string, resolve: (data: any) => void, once?: boolean) {\n    const waits = this.waits.get(key);\n    if (waits) {\n      waits.push({ resolve, once });\n    } else {\n      this.waits.set(key, [{ resolve, once }]);\n    }\n  }\n\n  delWait(key: string, fn: any) {\n    const waits = this.waits.get(key);\n    if (!waits) {\n      return;\n    }\n    let i = waits.length;\n    while (i--) {\n      if (waits[i].resolve === fn) {\n        waits.splice(i, 1);\n      }\n    }\n    if (waits.length < 1) {\n      this.waits.delete(key);\n    }\n  }\n\n  getPreference(): IPublicModelPreference {\n    return this.preference;\n  }\n}\n\nexport const engineConfig = new EngineConfig();","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./IocContext\"), exports);\n__exportStar(require(\"./class\"), exports);\n__exportStar(require(\"./decorator\"), exports);\n//# sourceMappingURL=index.js.map","import { Logger, Level } from '@alilc/lowcode-utils';\n\nexport { Logger };\n\nexport function getLogger(config: { level: Level; bizName: string }): Logger {\n  return new Logger(config);\n}\n","var engine = require('../src/store-engine')\n\nvar storages = require('../storages/all')\nvar plugins = [require('../plugins/json2')]\n\nmodule.exports = engine.createStore(storages, plugins)\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ClassInfo\"), exports);\n__exportStar(require(\"./ClassLoader\"), exports);\n//# sourceMappingURL=index.js.map","// parse out just the options we care about so we always get a consistent\n// obj with keys in a consistent order.\nconst opts = ['includePrerelease', 'loose', 'rtl']\nconst parseOptions = options =>\n  !options ? {}\n  : typeof options !== 'object' ? { loose: true }\n  : opts.filter(k => options[k]).reduce((o, k) => {\n    o[k] = true\n    return o\n  }, {})\nmodule.exports = parseOptions\n","const { MAX_SAFE_COMPONENT_LENGTH } = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst createToken = (name, value, isGlobal) => {\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '[0-9]+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*')\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', '[0-9A-Za-z-]+')\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCE', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier)\n        this.inc('pre', identifier)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier)\n        }\n        this.inc('pre', identifier)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre':\n        if (this.prerelease.length === 0) {\n          this.prerelease = [0]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            this.prerelease.push(0)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = [identifier, 0]\n            }\n          } else {\n            this.prerelease = [identifier, 0]\n          }\n        }\n        break\n\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.format()\n    this.raw = this.version\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","import { ReactNode } from 'react';\nimport { IPublicTypeCustomView, IPublicTypeRegisteredSetter } from '@alilc/lowcode-types';\nimport { createContent, isCustomView } from '@alilc/lowcode-utils';\n\n\nconst settersMap = new Map<string, IPublicTypeRegisteredSetter & {\n  type: string;\n}>();\nexport function registerSetter(\n  typeOrMaps: string | { [key: string]: IPublicTypeCustomView | IPublicTypeRegisteredSetter },\n  setter?: IPublicTypeCustomView | IPublicTypeRegisteredSetter,\n) {\n  if (typeof typeOrMaps === 'object') {\n    Object.keys(typeOrMaps).forEach(type => {\n      registerSetter(type, typeOrMaps[type]);\n    });\n    return;\n  }\n  if (!setter) {\n    return;\n  }\n  if (isCustomView(setter)) {\n    setter = {\n      component: setter,\n      // todo: intl\n      title: (setter as any).displayName || (setter as any).name || 'CustomSetter',\n    };\n  }\n  if (!setter.initialValue) {\n    const initial = getInitialFromSetter(setter.component);\n    if (initial) {\n      setter.initialValue = (field: any) => {\n        return initial.call(field, field.getValue());\n      };\n    }\n  }\n  settersMap.set(typeOrMaps, { type: typeOrMaps, ...setter });\n}\n\nfunction getInitialFromSetter(setter: any) {\n  return setter && (\n    setter.initial || setter.Initial\n      || (setter.type && (setter.type.initial || setter.type.Initial))\n    ) || null; // eslint-disable-line\n}\n\nexport class Setters {\n  constructor(readonly viewName: string = 'global') {}\n\n  settersMap = new Map<string, IPublicTypeRegisteredSetter & {\n    type: string;\n  }>();\n\n  getSetter = (type: string): IPublicTypeRegisteredSetter | null => {\n    return this.settersMap.get(type) || null;\n  };\n\n  registerSetter = (\n    typeOrMaps: string | { [key: string]: IPublicTypeCustomView | IPublicTypeRegisteredSetter },\n    setter?: IPublicTypeCustomView | IPublicTypeRegisteredSetter,\n  ) => {\n    if (typeof typeOrMaps === 'object') {\n      Object.keys(typeOrMaps).forEach(type => {\n        this.registerSetter(type, typeOrMaps[type]);\n      });\n      return;\n    }\n    if (!setter) {\n      return;\n    }\n    if (isCustomView(setter)) {\n      setter = {\n        component: setter,\n        // todo: intl\n        title: (setter as any).displayName || (setter as any).name || 'CustomSetter',\n      };\n    }\n    if (!setter.initialValue) {\n      const initial = getInitialFromSetter(setter.component);\n      if (initial) {\n        setter.initialValue = (field: any) => {\n          return initial.call(field, field.getValue());\n        };\n      }\n    }\n    this.settersMap.set(typeOrMaps, { type: typeOrMaps, ...setter });\n  };\n\n  getSettersMap = () => {\n    return this.settersMap;\n  };\n\n  createSetterContent = (setter: any, props: Record<string, any>): ReactNode => {\n    if (typeof setter === 'string') {\n      setter = this.getSetter(setter);\n      if (!setter) {\n        return null;\n      }\n      if (setter.defaultProps) {\n        props = {\n          ...setter.defaultProps,\n          ...props,\n        };\n      }\n      setter = setter.component;\n    }\n\n    // Fusion 的表单组件都是通过 'value' in props 来判断是否使用 defaultValue\n    if ('value' in props && typeof props.value === 'undefined') {\n      delete props.value;\n    }\n\n    return createContent(setter, props);\n  };\n}","import { IocContext } from 'power-di';\n\nexport * from 'power-di';\n\nexport const globalContext = IocContext.DefaultInstance;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSuperClassInfo = void 0;\nvar getGlobalType_1 = require(\"./getGlobalType\");\nfunction getSuperClassInfo(classType) {\n    if (!(0, getGlobalType_1.isClass)(classType)) {\n        throw new Error('need a classType.');\n    }\n    var superClasses = [];\n    var tmpType = Object.getPrototypeOf(classType);\n    while ((0, getGlobalType_1.isClass)(tmpType)) {\n        var type = (0, getGlobalType_1.getGlobalType)(tmpType);\n        superClasses.push({\n            type: type,\n            class: tmpType,\n        });\n        tmpType = Object.getPrototypeOf(tmpType);\n    }\n    return superClasses;\n}\nexports.getSuperClassInfo = getSuperClassInfo;\n//# sourceMappingURL=getSuperClassInfo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.guard = void 0;\nfunction guard(f, opt) {\n    var _a;\n    if (opt === void 0) { opt = {}; }\n    try {\n        return f();\n    }\n    catch (error) {\n        (_a = opt.onError) === null || _a === void 0 ? void 0 : _a.call(opt, error);\n        return opt.defaultValue;\n    }\n}\nexports.guard = guard;\n//# sourceMappingURL=guard.js.map","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Logger = exports.OutLevel = void 0;\nvar OutLevel;\n(function (OutLevel) {\n    OutLevel[OutLevel[\"Log\"] = 0] = \"Log\";\n    OutLevel[OutLevel[\"Info\"] = 1] = \"Info\";\n    OutLevel[OutLevel[\"Warn\"] = 2] = \"Warn\";\n    OutLevel[OutLevel[\"Error\"] = 3] = \"Error\";\n    OutLevel[OutLevel[\"None\"] = 4] = \"None\";\n})(OutLevel = exports.OutLevel || (exports.OutLevel = {}));\nvar Logger = /** @class */ (function () {\n    function Logger() {\n        this.outLevel = OutLevel.Warn;\n    }\n    Logger.prototype.setOutLevel = function (level) {\n        this.outLevel = level;\n    };\n    Logger.prototype.error = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (this.outLevel <= OutLevel.Error) {\n            console.error.apply(console, __spreadArray([message], optionalParams, false));\n        }\n    };\n    Logger.prototype.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (this.outLevel <= OutLevel.Info) {\n            console.info.apply(console, __spreadArray([message], optionalParams, false));\n        }\n    };\n    Logger.prototype.log = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (this.outLevel <= OutLevel.Log) {\n            console.log.apply(console, __spreadArray([message], optionalParams, false));\n        }\n    };\n    Logger.prototype.warn = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (this.outLevel <= OutLevel.Warn) {\n            console.warn.apply(console, __spreadArray([message], optionalParams, false));\n        }\n    };\n    return Logger;\n}());\nexports.Logger = Logger;\nvar logger = new Logger();\nexports.default = logger;\n//# sourceMappingURL=logger.js.map","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.aspect = exports.genAspectWrapper = void 0;\nvar metadata_1 = require(\"../class/metadata\");\n/* istanbul ignore next */\nvar normalFn = function normalFn() { };\n/* istanbul ignore next */\nvar generatorFn = function () { return __generator(this, function (_a) {\n    return [2 /*return*/];\n}); };\nvar normalFuncPrototype = Object.getPrototypeOf(normalFn);\nvar generatorFuncPrototype = Object.getPrototypeOf(generatorFn);\nfunction isGeneratorFunction(fn) {\n    // if use some transformer, generator is polyfill maybe.\n    return (typeof fn === 'function' &&\n        normalFuncPrototype !== generatorFuncPrototype &&\n        Object.getPrototypeOf(fn) === generatorFuncPrototype);\n}\nfunction run(func, context) {\n    func && func(context);\n}\nfunction createContext(ioc, inst, fn, args) {\n    return {\n        ioc: ioc,\n        functionName: fn.__name || fn.name,\n        inst: inst,\n        data: {},\n        args: args,\n    };\n}\nfunction genAspectWrapper(ioc, point, oriFn) {\n    var newFn;\n    if (isGeneratorFunction(oriFn)) {\n        newFn = function () {\n            var _i, context, _a, error_1;\n            var args = [];\n            for (_i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        context = createContext(ioc, this, oriFn, args);\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, , 5]);\n                        run(point.before, context);\n                        if (!!context.skipRunning) return [3 /*break*/, 3];\n                        _a = context;\n                        return [4 /*yield*/, oriFn.apply(this, context.args)];\n                    case 2:\n                        _a.ret = _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        run(point.after, context);\n                        return [2 /*return*/, context.ret];\n                    case 4:\n                        error_1 = _b.sent();\n                        context.err = error_1;\n                        run(point.error, context);\n                        if (context.err) {\n                            throw context.err;\n                        }\n                        return [3 /*break*/, 5];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        };\n    }\n    else {\n        newFn = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            var context = createContext(ioc, this, oriFn, args);\n            try {\n                run(point.before, context);\n                if (!context.skipRunning) {\n                    context.ret = oriFn.apply(this, context.args);\n                }\n                if (context.ret instanceof Promise) {\n                    context.ret = context.ret.then(function (ret) {\n                        context.ret = ret;\n                        run(point.after, context);\n                        return context.ret;\n                    });\n                    if (point.error) {\n                        context.ret = context.ret.catch(function (error) {\n                            context.err = error;\n                            run(point.error, context);\n                            if (context.err) {\n                                throw context.err;\n                            }\n                        });\n                    }\n                    return context.ret;\n                }\n                else {\n                    run(point.after, context);\n                    return context.ret;\n                }\n            }\n            catch (error) {\n                context.err = error;\n                run(point.error, context);\n                if (context.err) {\n                    throw context.err;\n                }\n            }\n        };\n    }\n    newFn.__name = oriFn.__name || oriFn.name;\n    return newFn;\n}\nexports.genAspectWrapper = genAspectWrapper;\nfunction aspect(point) {\n    if (point === void 0) { point = {}; }\n    return function (target, key) {\n        (0, metadata_1.getMetadata)(target.constructor).aspects.push({\n            key: key,\n            point: point,\n        });\n    };\n}\nexports.aspect = aspect;\n//# sourceMappingURL=aspect.js.map","import { isEqual } from 'lodash';\nimport { globalContext } from './di';\nimport { IPublicTypeHotkeyCallback, IPublicTypeHotkeyCallbackConfig, IPublicTypeHotkeyCallbacks, IPublicApiHotkey } from '@alilc/lowcode-types';\n\ninterface KeyMap {\n  [key: number]: string;\n}\n\ninterface CtrlKeyMap {\n  [key: string]: string;\n}\n\ninterface ActionEvent {\n  type: string;\n}\n\ninterface HotkeyDirectMap {\n  [key: string]: IPublicTypeHotkeyCallback;\n}\n\ninterface KeyInfo {\n  key: string;\n  modifiers: string[];\n  action: string;\n}\n\ninterface SequenceLevels {\n  [key: string]: number;\n}\n\nconst MAP: KeyMap = {\n  8: 'backspace',\n  9: 'tab',\n  13: 'enter',\n  16: 'shift',\n  17: 'ctrl',\n  18: 'alt',\n  20: 'capslock',\n  27: 'esc',\n  32: 'space',\n  33: 'pageup',\n  34: 'pagedown',\n  35: 'end',\n  36: 'home',\n  37: 'left',\n  38: 'up',\n  39: 'right',\n  40: 'down',\n  45: 'ins',\n  46: 'del',\n  91: 'meta',\n  93: 'meta',\n  224: 'meta',\n};\n\nconst KEYCODE_MAP: KeyMap = {\n  106: '*',\n  107: '+',\n  109: '-',\n  110: '.',\n  111: '/',\n  186: ';',\n  187: '=',\n  188: ',',\n  189: '-',\n  190: '.',\n  191: '/',\n  192: '`',\n  219: '[',\n  220: '\\\\',\n  221: ']',\n  222: \"'\",\n};\n\nconst SHIFT_MAP: CtrlKeyMap = {\n  '~': '`',\n  '!': '1',\n  '@': '2',\n  '#': '3',\n  $: '4',\n  '%': '5',\n  '^': '6',\n  '&': '7',\n  '*': '8',\n  '(': '9',\n  ')': '0',\n  _: '-',\n  '+': '=',\n  ':': ';',\n  '\"': \"'\",\n  '<': ',',\n  '>': '.',\n  '?': '/',\n  '|': '\\\\',\n};\n\nconst SPECIAL_ALIASES: CtrlKeyMap = {\n  option: 'alt',\n  command: 'meta',\n  return: 'enter',\n  escape: 'esc',\n  plus: '+',\n  mod: /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl',\n};\n\nlet REVERSE_MAP: CtrlKeyMap;\n\n/**\n * loop through the f keys, f1 to f19 and add them to the map\n * programatically\n */\nfor (let i = 1; i < 20; ++i) {\n  MAP[111 + i] = `f${ i}`;\n}\n\n/**\n * loop through to map numbers on the numeric keypad\n */\nfor (let i = 0; i <= 9; ++i) {\n  MAP[i + 96] = String(i);\n}\n\n/**\n * takes the event and returns the key character\n */\nfunction characterFromEvent(e: KeyboardEvent): string {\n  const keyCode = e.keyCode || e.which;\n  // for keypress events we should return the character as is\n  if (e.type === 'keypress') {\n    let character = String.fromCharCode(keyCode);\n    // if the shift key is not pressed then it is safe to assume\n    // that we want the character to be lowercase.  this means if\n    // you accidentally have caps lock on then your key bindings\n    // will continue to work\n    //\n    // the only side effect that might not be desired is if you\n    // bind something like 'A' cause you want to trigger an\n    // event when capital A is pressed caps lock will no longer\n    // trigger the event.  shift+a will though.\n    if (!e.shiftKey) {\n      character = character.toLowerCase();\n    }\n    return character;\n  }\n  // for non keypress events the special maps are needed\n  if (MAP[keyCode]) {\n    return MAP[keyCode];\n  }\n  if (KEYCODE_MAP[keyCode]) {\n    return KEYCODE_MAP[keyCode];\n  }\n  // if it is not in the special map\n  // with keydown and keyup events the character seems to always\n  // come in as an uppercase character whether you are pressing shift\n  // or not.  we should make sure it is always lowercase for comparisons\n  // tips: Q29weXJpZ2h0IChjKSAyMDIwLXByZXNlbnQgQWxpYmFiYSBJbmMuIFYy\n  return String.fromCharCode(keyCode).toLowerCase();\n}\n\ninterface KeypressEvent extends KeyboardEvent {\n  type: 'keypress';\n}\n\nfunction isPressEvent(e: KeyboardEvent | ActionEvent): e is KeypressEvent {\n  return e.type === 'keypress';\n}\n\n/**\n * checks if two arrays are equal\n */\nfunction modifiersMatch(modifiers1: string[], modifiers2: string[]): boolean {\n  return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n}\n\n/**\n * takes a key event and figures out what the modifiers are\n */\nfunction eventModifiers(e: KeyboardEvent): string[] {\n  const modifiers = [];\n\n  if (e.shiftKey) {\n    modifiers.push('shift');\n  }\n\n  if (e.altKey) {\n    modifiers.push('alt');\n  }\n\n  if (e.ctrlKey) {\n    modifiers.push('ctrl');\n  }\n\n  if (e.metaKey) {\n    modifiers.push('meta');\n  }\n\n  return modifiers;\n}\n\n/**\n * determines if the keycode specified is a modifier key or not\n */\nfunction isModifier(key: string): boolean {\n  return key === 'shift' || key === 'ctrl' || key === 'alt' || key === 'meta';\n}\n\n/**\n * reverses the map lookup so that we can look for specific keys\n * to see what can and can't use keypress\n *\n * @return {Object}\n */\nfunction getReverseMap(): CtrlKeyMap {\n  if (!REVERSE_MAP) {\n    REVERSE_MAP = {};\n    for (const key in MAP) {\n      // pull out the numeric keypad from here cause keypress should\n      // be able to detect the keys from the character\n      if (Number(key) > 95 && Number(key) < 112) {\n        continue;\n      }\n\n      if (MAP.hasOwnProperty(key)) {\n        REVERSE_MAP[MAP[key]] = key;\n      }\n    }\n  }\n  return REVERSE_MAP;\n}\n\n/**\n * picks the best action based on the key combination\n */\nfunction pickBestAction(key: string, modifiers: string[], action?: string): string {\n  // if no action was picked in we should try to pick the one\n  // that we think would work best for this key\n  if (!action) {\n    action = getReverseMap()[key] ? 'keydown' : 'keypress';\n  }\n  // modifier keys don't work as expected with keypress,\n  // switch to keydown\n  if (action === 'keypress' && modifiers.length) {\n    action = 'keydown';\n  }\n  return action;\n}\n\n/**\n * Converts from a string key combination to an array\n *\n * @param  {string} combination like \"command+shift+l\"\n * @return {Array}\n */\nfunction keysFromString(combination: string): string[] {\n  if (combination === '+') {\n    return ['+'];\n  }\n\n  combination = combination.replace(/\\+{2}/g, '+plus');\n  return combination.split('+');\n}\n\n/**\n * Gets info for a specific key combination\n *\n * @param combination key combination (\"command+s\" or \"a\" or \"*\")\n */\nfunction getKeyInfo(combination: string, action?: string): KeyInfo {\n  let keys: string[] = [];\n  let key = '';\n  let i: number;\n  const modifiers: string[] = [];\n\n  // take the keys from this pattern and figure out what the actual\n  // pattern is all about\n  keys = keysFromString(combination);\n\n  for (i = 0; i < keys.length; ++i) {\n    key = keys[i];\n\n    // normalize key names\n    if (SPECIAL_ALIASES[key]) {\n      key = SPECIAL_ALIASES[key];\n    }\n\n    // if this is not a keypress event then we should\n    // be smart about using shift keys\n    // this will only work for US keyboards however\n    if (action && action !== 'keypress' && SHIFT_MAP[key]) {\n      key = SHIFT_MAP[key];\n      modifiers.push('shift');\n    }\n\n    // if this key is a modifier then add it to the list of modifiers\n    if (isModifier(key)) {\n      modifiers.push(key);\n    }\n  }\n\n  // depending on what the key combination is\n  // we will try to pick the best event for it\n  action = pickBestAction(key, modifiers, action);\n\n  return {\n    key,\n    modifiers,\n    action,\n  };\n}\n\n/**\n * actually calls the callback function\n *\n * if your callback function returns false this will use the jquery\n * convention - prevent default and stop propogation on the event\n */\nfunction fireCallback(callback: IPublicTypeHotkeyCallback, e: KeyboardEvent, combo?: string, sequence?: string): void {\n  try {\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    const designer = editor.get('designer');\n    const node = designer?.currentSelection?.getNodes()?.[0];\n    const npm = node?.componentMeta?.npm;\n    const selected =\n      [npm?.package, npm?.componentName].filter((item) => !!item).join('-') || node?.componentMeta?.componentName || '';\n    if (callback(e, combo) === false) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    editor?.eventBus.emit('hotkey.callback.call', {\n      callback,\n      e,\n      combo,\n      sequence,\n      selected,\n    });\n  } catch (err) {\n    console.error(err.message);\n  }\n}\n\nexport interface IHotKey extends IPublicApiHotkey {\n\n}\n\nexport class Hotkey implements IHotKey {\n  callBacks: IPublicTypeHotkeyCallbacks = {};\n\n  private directMap: HotkeyDirectMap = {};\n\n  private sequenceLevels: SequenceLevels = {};\n\n  private resetTimer = 0;\n\n  private ignoreNextKeyup: boolean | string = false;\n\n  private ignoreNextKeypress = false;\n\n  private nextExpectedAction: boolean | string = false;\n\n  private isActivate = true;\n\n  constructor(readonly viewName: string = 'global') {\n    this.mount(window);\n  }\n\n  activate(activate: boolean): void {\n    this.isActivate = activate;\n  }\n\n  mount(window: Window) {\n    const { document } = window;\n    const handleKeyEvent = this.handleKeyEvent.bind(this);\n    document.addEventListener('keypress', handleKeyEvent, false);\n    document.addEventListener('keydown', handleKeyEvent, false);\n    document.addEventListener('keyup', handleKeyEvent, false);\n    return () => {\n      document.removeEventListener('keypress', handleKeyEvent, false);\n      document.removeEventListener('keydown', handleKeyEvent, false);\n      document.removeEventListener('keyup', handleKeyEvent, false);\n    };\n  }\n\n  bind(combos: string[] | string, callback: IPublicTypeHotkeyCallback, action?: string): Hotkey {\n    this.bindMultiple(Array.isArray(combos) ? combos : [combos], callback, action);\n    return this;\n  }\n\n  unbind(combos: string[] | string, callback: IPublicTypeHotkeyCallback, action?: string) {\n    const combinations = Array.isArray(combos) ? combos : [combos];\n\n    combinations.forEach(combination => {\n      const info: KeyInfo = getKeyInfo(combination, action);\n      const { key, modifiers } = info;\n      const idx = this.callBacks[key].findIndex(info => {\n        return isEqual(info.modifiers, modifiers) && info.callback === callback;\n      });\n      if (idx !== -1) {\n        this.callBacks[key].splice(idx, 1);\n      }\n    });\n  }\n\n  /**\n   * resets all sequence counters except for the ones passed in\n   */\n  private resetSequences(doNotReset?: SequenceLevels): void {\n    // doNotReset = doNotReset || {};\n    let activeSequences = false;\n    let key = '';\n    for (key in this.sequenceLevels) {\n      if (doNotReset && doNotReset[key]) {\n        activeSequences = true;\n      } else {\n        this.sequenceLevels[key] = 0;\n      }\n    }\n    if (!activeSequences) {\n      this.nextExpectedAction = false;\n    }\n  }\n\n  /**\n   * finds all callbacks that match based on the keycode, modifiers,\n   * and action\n   */\n  private getMatches(\n    character: string,\n    modifiers: string[],\n    e: KeyboardEvent | ActionEvent,\n    sequenceName?: string,\n    combination?: string,\n    level?: number,\n  ): IPublicTypeHotkeyCallbackConfig[] {\n    let i: number;\n    let callback: IPublicTypeHotkeyCallbackConfig;\n    const matches: IPublicTypeHotkeyCallbackConfig[] = [];\n    const action: string = e.type;\n\n    // if there are no events related to this keycode\n    if (!this.callBacks[character]) {\n      return [];\n    }\n\n    // if a modifier key is coming up on its own we should allow it\n    if (action === 'keyup' && isModifier(character)) {\n      modifiers = [character];\n    }\n\n    // loop through all callbacks for the key that was pressed\n    // and see if any of them match\n    for (i = 0; i < this.callBacks[character].length; ++i) {\n      callback = this.callBacks[character][i];\n\n      // if a sequence name is not specified, but this is a sequence at\n      // the wrong level then move onto the next match\n      if (!sequenceName && callback.seq && this.sequenceLevels[callback.seq] !== callback.level) {\n        continue;\n      }\n\n      // if the action we are looking for doesn't match the action we got\n      // then we should keep going\n      if (action !== callback.action) {\n        continue;\n      }\n\n      // if this is a keypress event and the meta key and control key\n      // are not pressed that means that we need to only look at the\n      // character, otherwise check the modifiers as well\n      //\n      // chrome will not fire a keypress if meta or control is down\n      // safari will fire a keypress if meta or meta+shift is down\n      // firefox will fire a keypress if meta or control is down\n      if ((isPressEvent(e) && !e.metaKey && !e.ctrlKey) || modifiersMatch(modifiers, callback.modifiers)) {\n        const deleteCombo = !sequenceName && callback.combo === combination;\n        const deleteSequence = sequenceName && callback.seq === sequenceName && callback.level === level;\n        if (deleteCombo || deleteSequence) {\n          this.callBacks[character].splice(i, 1);\n        }\n\n        matches.push(callback);\n      }\n    }\n    return matches;\n  }\n\n  private handleKey(character: string, modifiers: string[], e: KeyboardEvent): void {\n    const callbacks: IPublicTypeHotkeyCallbackConfig[] = this.getMatches(character, modifiers, e);\n    let i: number;\n    const doNotReset: SequenceLevels = {};\n    let maxLevel = 0;\n    let processedSequenceCallback = false;\n\n    // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n    for (i = 0; i < callbacks.length; ++i) {\n      if (callbacks[i].seq) {\n        maxLevel = Math.max(maxLevel, callbacks[i].level || 0);\n      }\n    }\n\n    // loop through matching callbacks for this key event\n    for (i = 0; i < callbacks.length; ++i) {\n      // fire for all sequence callbacks\n      // this is because if for example you have multiple sequences\n      // bound such as \"g i\" and \"g t\" they both need to fire the\n      // callback for matching g cause otherwise you can only ever\n      // match the first one\n      if (callbacks[i].seq) {\n        // only fire callbacks for the maxLevel to prevent\n        // subsequences from also firing\n        //\n        // for example 'a option b' should not cause 'option b' to fire\n        // even though 'option b' is part of the other sequence\n        //\n        // any sequences that do not match here will be discarded\n        // below by the resetSequences call\n        if (callbacks[i].level !== maxLevel) {\n          continue;\n        }\n\n        processedSequenceCallback = true;\n\n        // keep a list of which sequences were matches for later\n        doNotReset[callbacks[i].seq || ''] = 1;\n        fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n        continue;\n      }\n\n      // if there were no sequence matches but we are still here\n      // that means this is a regular match so we should fire that\n      if (!processedSequenceCallback) {\n        fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n      }\n    }\n\n    const ignoreThisKeypress = e.type === 'keypress' && this.ignoreNextKeypress;\n    if (e.type === this.nextExpectedAction && !isModifier(character) && !ignoreThisKeypress) {\n      this.resetSequences(doNotReset);\n    }\n\n    this.ignoreNextKeypress = processedSequenceCallback && e.type === 'keydown';\n  }\n\n  private handleKeyEvent(e: KeyboardEvent): void {\n    if (!this.isActivate) {\n      return;\n    }\n    const character = characterFromEvent(e);\n\n    // no character found then stop\n    if (!character) {\n      return;\n    }\n\n    // need to use === for the character check because the character can be 0\n    if (e.type === 'keyup' && this.ignoreNextKeyup === character) {\n      this.ignoreNextKeyup = false;\n      return;\n    }\n\n    this.handleKey(character, eventModifiers(e), e);\n  }\n\n  private resetSequenceTimer(): void {\n    if (this.resetTimer) {\n      clearTimeout(this.resetTimer);\n    }\n    this.resetTimer = window.setTimeout(this.resetSequences, 1000);\n  }\n\n  private bindSequence(combo: string, keys: string[], callback: IPublicTypeHotkeyCallback, action?: string): void {\n    // const self: any = this;\n    this.sequenceLevels[combo] = 0;\n    const increaseSequence = (nextAction: string) => {\n      return () => {\n        this.nextExpectedAction = nextAction;\n        ++this.sequenceLevels[combo];\n        this.resetSequenceTimer();\n      };\n    };\n    const callbackAndReset = (e: KeyboardEvent): void => {\n      fireCallback(callback, e, combo);\n\n      if (action !== 'keyup') {\n        this.ignoreNextKeyup = characterFromEvent(e);\n      }\n\n      setTimeout(this.resetSequences, 10);\n    };\n    for (let i = 0; i < keys.length; ++i) {\n      const isFinal = i + 1 === keys.length;\n      const wrappedCallback = isFinal ? callbackAndReset : increaseSequence(action || getKeyInfo(keys[i + 1]).action);\n      this.bindSingle(keys[i], wrappedCallback, action, combo, i);\n    }\n  }\n\n  private bindSingle(\n    combination: string,\n    callback: IPublicTypeHotkeyCallback,\n    action?: string,\n    sequenceName?: string,\n    level?: number,\n  ): void {\n    // store a direct mapped reference for use with HotKey.trigger\n    this.directMap[`${combination}:${action}`] = callback;\n\n    // make sure multiple spaces in a row become a single space\n    combination = combination.replace(/\\s+/g, ' ');\n\n    const sequence: string[] = combination.split(' ');\n\n    // if this pattern is a sequence of keys then run through this method\n    // to reprocess each pattern one key at a time\n    if (sequence.length > 1) {\n      this.bindSequence(combination, sequence, callback, action);\n      return;\n    }\n\n    const info: KeyInfo = getKeyInfo(combination, action);\n\n    // make sure to initialize array if this is the first time\n    // a callback is added for this key\n    this.callBacks[info.key] = this.callBacks[info.key] || [];\n\n    // remove an existing match if there is one\n    this.getMatches(info.key, info.modifiers, { type: info.action }, sequenceName, combination, level);\n\n    // add this call back to the array\n    // if it is a sequence put it at the beginning\n    // if not put it at the end\n    //\n    // this is important because the way these are processed expects\n    // the sequence ones to come first\n    this.callBacks[info.key][sequenceName ? 'unshift' : 'push']({\n      callback,\n      modifiers: info.modifiers,\n      action: info.action,\n      seq: sequenceName,\n      level,\n      combo: combination,\n    });\n  }\n\n  private bindMultiple(combinations: string[], callback: IPublicTypeHotkeyCallback, action?: string) {\n    for (const item of combinations) {\n      this.bindSingle(item, callback, action);\n    }\n  }\n}\n","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First, split based on boolean or ||\n    this.raw = range\n    this.set = range\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${range}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => {\n        return comps.join(' ').trim()\n      })\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    range = range.trim()\n\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts = Object.keys(this.options).join(',')\n    const memoKey = `parseRange:${memoOpts}:${range}`\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n    // normalize spaces\n    range = range.split(/\\s+/).join(' ')\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\nmodule.exports = Range\n\nconst LRU = require('lru-cache')\nconst cache = new LRU({ max: 1000 })\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) =>\n  comp.trim().split(/\\s+/).map((c) => {\n    return replaceTilde(c, options)\n  }).join(' ')\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) =>\n  comp.trim().split(/\\s+/).map((c) => {\n    return replaceCaret(c, options)\n  }).join(' ')\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map((c) => {\n    return replaceXRange(c, options)\n  }).join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp.trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return (`${from} ${to}`).trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\nmodule.exports = {\n  SEMVER_SPEC_VERSION,\n  MAX_LENGTH,\n  MAX_SAFE_INTEGER,\n  MAX_SAFE_COMPONENT_LENGTH,\n}\n","function resolveEdge(popup: any, target: any, arrow: any, bounds: any) {\n  const sx = arrow.width > target.width ? (arrow.width - target.width) / 2 : 0;\n  const sy = arrow.width > target.height ? (arrow.width - target.height) / 2 : 0;\n\n  const top = Math.max(target.top - popup.height + arrow.width - sy, bounds.top);\n  const right = Math.min(target.right + popup.width - arrow.width + sx, bounds.right);\n  const bottom = Math.min(target.bottom + popup.height - arrow.width + sy, bounds.bottom);\n  const left = Math.max(target.left - popup.width + arrow.width - sx, bounds.left);\n\n  return { top, right, bottom, left };\n}\n\nfunction resolveDirection(popup: any, target: any, edge: any, bounds: any, prefers: any) {\n  if (prefers.forceDirection) {\n    return prefers.dir;\n  }\n  const extendWidth = popup.width + popup.extraOffset;\n  const extendHeight = popup.height + popup.extraOffset;\n  const SY = popup.width * extendHeight;\n  const SX = popup.height * extendWidth;\n  const mw = Math.min(edge.right - edge.left, popup.width);\n  const mh = Math.min(edge.bottom - edge.top, popup.height);\n\n  const mat: any = {\n    top: () => {\n      const s = mw * Math.min(target.top - bounds.top, extendHeight);\n      return { s, enough: s >= SY };\n    },\n    bottom: () => {\n      const s = mw * Math.min(bounds.bottom - target.bottom, extendHeight);\n      return { s, enough: s >= SY };\n    },\n    left: () => {\n      const s = mh * Math.min(target.left - bounds.left, extendWidth);\n      return { s, enough: s >= SX };\n    },\n    right: () => {\n      const s = mh * Math.min(bounds.right - target.right, extendWidth);\n      return { s, enough: s >= SX };\n    },\n  };\n\n  const orders = ['top', 'right', 'bottom', 'left'];\n  if (prefers.dir) {\n    const i = orders.indexOf(prefers.dir);\n    if (i > -1) {\n      orders.splice(i, 1);\n      orders.unshift(prefers.dir);\n    }\n  }\n  let ms = 0;\n  let prefer = orders[0];\n  for (let i = 0, l = orders.length; i < l; i++) {\n    const dir = orders[i];\n    const { s, enough } = mat[dir]();\n    if (enough) {\n      return dir;\n    }\n    if (s > ms) {\n      ms = s;\n      prefer = dir;\n    }\n  }\n  return prefer;\n}\n\nfunction resolvePrefer(prefer: any, targetRect: any, bounds: any) {\n  if (!prefer) {\n    if (targetRect.left - bounds.left < 10) {\n      return { dir: 'right' };\n    } else if (targetRect.top - bounds.top < 10) {\n      return { dir: 'bottom' };\n    } else if (bounds.bottom - targetRect.bottom < 10) {\n      return { dir: 'top' };\n    } else if (bounds.right - targetRect.right < 10) {\n      return { dir: 'left' };\n    }\n    return {};\n  }\n  const force = prefer[0] === '!';\n  if (force) {\n    prefer = prefer.slice(1);\n  }\n  let [dir, offset] = prefer.split(/\\s+/);\n  let forceDirection = false;\n  let forceOffset = false;\n  if (dir === 'center') {\n    dir = 'auto';\n    if (!offset) {\n      offset = 'center';\n    }\n  }\n\n  if (force) {\n    if (dir && dir !== 'auto') {\n      forceDirection = true;\n    }\n    if (offset && offset !== 'auto') {\n      forceOffset = true;\n    }\n  }\n\n  return { dir, offset, forceDirection, forceOffset };\n}\n\nexport function resolvePosition(popup: any, target: any, arrow: any, bounds: any, prefer: any) {\n  popup = {\n    extraOffset: arrow.height,\n    top: popup.top,\n    right: popup.right,\n    left: popup.left,\n    bottom: popup.bottom,\n    height: popup.height,\n    width: popup.width,\n  };\n\n  const prefers = resolvePrefer(prefer, target, bounds);\n\n  const edge = resolveEdge(popup, target, arrow, bounds);\n\n  // 选择方向\n  const dir = resolveDirection(popup, target, edge, bounds, prefers);\n\n  let top;\n  let left;\n  let arrowTop;\n  let arrowLeft;\n\n  // 或得该方位上横向 或 纵向的 偏移\n  if (dir === 'top' || dir === 'bottom') {\n    if (dir === 'top') {\n      top = target.top - popup.extraOffset - popup.height;\n    } else {\n      top = target.bottom + popup.extraOffset;\n    }\n\n    // 解决横向偏移\n    const offset = arrow.width > target.width ? (arrow.width - target.width) / 2 : 0;\n    const minLeft = target.left + arrow.width - offset - popup.width;\n    const maxLeft = target.right - arrow.width + offset;\n    const centerLeft = target.left - (popup.width - target.width) / 2;\n\n    if (prefers.offset === 'left') {\n      left = minLeft;\n    } else if (prefers.offset === 'right') {\n      left = maxLeft;\n    } else {\n      left = centerLeft;\n    }\n\n    if (!prefers.forceOffset) {\n      left = Math.max(Math.min(edge.right - popup.width, left), minLeft);\n      left = Math.min(Math.max(edge.left, left), maxLeft);\n    }\n\n    arrowLeft = Math.min(popup.width - arrow.width, Math.max(target.left - (arrow.width - target.width) / 2 - left, 0));\n  } else {\n    if (dir === 'left') {\n      left = target.left - popup.extraOffset - popup.width;\n    } else {\n      left = target.right + popup.extraOffset;\n    }\n\n    // 解决纵向偏移\n    const offset = arrow.width > target.height ? (arrow.width - target.height) / 2 : 0;\n    const minTop = target.top + arrow.width - offset - popup.height;\n    const maxTop = target.bottom - arrow.width + offset;\n    const centerTop = target.top - (popup.height - target.height) / 2;\n\n    if (prefers.offset === 'top') {\n      top = minTop;\n    } else if (prefers.offset === 'bottom') {\n      top = maxTop;\n    } else {\n      top = centerTop;\n    }\n\n    if (!prefers.forceOffset) {\n      top = Math.max(Math.min(edge.bottom - popup.height, top), minTop);\n      top = Math.min(Math.max(edge.top, top), maxTop);\n    }\n\n    arrowTop = Math.min(popup.height - arrow.height, Math.max(target.top - (arrow.width - target.height) / 2 - top, 0));\n  }\n\n  return { dir, left, top, arrowLeft, arrowTop };\n}\n\nconst percentPresets: any = {\n  right: 1,\n  left: 0,\n  top: 0,\n  bottom: 1,\n  center: 0.5,\n};\n\nfunction isPercent(val: any) {\n  return /^[\\d.]+%$/.test(val);\n}\n\nfunction resolveRelativeValue(val: any, offset: any, total: any) {\n  if (!val) {\n    val = 0;\n  } else if (isPercent(val)) {\n    val = (parseFloat(val) / 100) * total;\n  } else if (percentPresets.hasOwnProperty(val)) {\n    val = percentPresets[val] * total;\n  } else {\n    val = parseFloat(val);\n    if (isNaN(val)) {\n      val = 0;\n    }\n  }\n\n  return `${val + offset}px`;\n}\n\nexport function resolveRelativePosition(align: any, popup: any, bounds: any) {\n  if (!align) {\n    // return default position\n    return {\n      top: '38.2%',\n      left: 'calc(50% - 110px)',\n    };\n  }\n\n  let [xAlign, yAlign] = align.trim().split(/\\s+/);\n\n  if (xAlign === 'top' || xAlign === 'bottom' || yAlign === 'left' || yAlign === 'right') {\n    const tmp = xAlign;\n    xAlign = yAlign;\n    yAlign = tmp;\n  }\n\n  if (xAlign === 'center' && !yAlign) {\n    yAlign = 'center';\n  }\n\n  return {\n    left: resolveRelativeValue(xAlign, 0, bounds.right - bounds.left - popup.width),\n    top: resolveRelativeValue(yAlign, 0, bounds.bottom - bounds.top - popup.height),\n  };\n}\n","import { Component } from 'react';\nimport classNames from 'classnames';\nimport { IPublicTypeTipConfig } from '@alilc/lowcode-types';\nimport { intl } from '../../intl';\nimport { resolvePosition } from './utils';\nimport { tipHandler } from './tip-handler';\n\nexport class TipItem extends Component {\n  private dispose?: () => void;\n\n  constructor(props: any) {\n    super(props);\n    this.dispose = tipHandler.onChange(() => this.forceUpdate());\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentDidMount() {\n    this.updateTip();\n  }\n\n  componentDidUpdate() {\n    this.updateTip();\n  }\n\n  componentWillUnmount() {\n    if (this.dispose) {\n      this.dispose();\n    }\n    this.clearTimer();\n  }\n\n  private timer: number | null = null;\n\n  clearTimer() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n  }\n\n  private shell: HTMLDivElement | null = null;\n\n  private originClassName = '';\n\n  updateTip() {\n    if (!this.shell) {\n      return;\n    }\n    const { shell } = this;\n    const arrow = shell.querySelector('.lc-arrow') as HTMLElement;\n\n    // reset\n    shell.className = this.originClassName;\n    shell.style.cssText = '';\n    arrow.style.cssText = '';\n    this.clearTimer();\n\n    const { tip } = tipHandler;\n    if (!tip) {\n      return;\n    }\n\n    const { target, direction } = tip;\n    const targetRect = target.getBoundingClientRect();\n\n    if (targetRect.width === 0 || targetRect.height === 0) {\n      return;\n    }\n\n    const shellRect = shell.getBoundingClientRect();\n    const bounds = {\n      left: 1,\n      top: 1,\n      right: document.documentElement.clientWidth - 1,\n      bottom: document.documentElement.clientHeight - 1,\n    };\n\n    const arrowRect = arrow.getBoundingClientRect();\n    const { dir, left, top, arrowLeft, arrowTop } = resolvePosition(\n      shellRect,\n      targetRect,\n      arrowRect,\n      bounds,\n      direction,\n    );\n\n    shell.classList.add(`lc-align-${dir}`);\n    shell.style.top = `${top}px`;\n    shell.style.left = `${left}px`;\n    shell.style.width = `${shellRect.width}px`;\n    shell.style.height = `${shellRect.height}px`;\n\n    if (dir === 'top' || dir === 'bottom') {\n      arrow.style.left = `${arrowLeft}px`;\n    } else {\n      arrow.style.top = `${arrowTop}px`;\n    }\n    this.timer = window.setTimeout(() => {\n      shell.classList.add('lc-visible-animate');\n      shell.style.transform = 'none';\n    }, 10); /**/\n  }\n\n  render() {\n    const tip: IPublicTypeTipConfig = tipHandler.tip || ({} as any);\n    const className = classNames('lc-tip', tip.className, tip && tip.theme ? `lc-theme-${tip.theme}` : null);\n\n    this.originClassName = className;\n\n    return (\n      <div\n        className={className}\n        ref={(ref) => {\n          this.shell = ref;\n        }}\n      >\n        <i className=\"lc-arrow\" />\n        <div className=\"lc-tip-content\">{intl(tip.children)}</div>\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { TipItem } from './tip-item';\nimport { tipHandler } from './tip-handler';\n\nexport class TipContainer extends Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  private dispose?: () => void;\n\n  componentDidMount() {\n    const over = (e: MouseEvent) => tipHandler.setTarget(e.target as any);\n    const down = () => tipHandler.hideImmediately();\n    document.addEventListener('mouseover', over, false);\n    document.addEventListener('mousedown', down, true);\n    this.dispose = () => {\n      document.removeEventListener('mouseover', over, false);\n      document.removeEventListener('mousedown', down, true);\n    };\n  }\n\n  UNSAFE_componentWillMount() {\n    if (this.dispose) {\n      this.dispose();\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"lc-tips-container\">\n        <TipItem />\n      </div>\n    );\n  }\n}\n","import { Component, isValidElement, ReactNode } from 'react';\nimport classNames from 'classnames';\nimport { createIcon, isI18nData } from '@alilc/lowcode-utils';\nimport { IPublicTypeTitleContent, IPublicTypeI18nData } from '@alilc/lowcode-types';\nimport { intl } from '../../intl';\nimport { Tip } from '../tip';\nimport './title.less';\n\n/**\n * 根据 keywords 将 label 分割成文字片段\n * 示例：title = '自定义页面布局'，keywords = '页面'，返回结果为 ['自定义', '页面', '布局']\n * @param label title\n * @param keywords 关键字\n * @returns 文字片段列表\n */\n function splitLabelByKeywords(label: string, keywords: string): string[] {\n  const len = keywords.length;\n  const fragments = [];\n  let str = label;\n\n  while (str.length > 0) {\n    const index = str.indexOf(keywords);\n\n    if (index === 0) {\n      fragments.push(keywords);\n      str = str.slice(len);\n    } else if (index < 0) {\n      fragments.push(str);\n      str = '';\n    } else {\n      fragments.push(str.slice(0, index));\n      str = str.slice(index);\n    }\n  }\n\n  return fragments;\n}\n\nexport class Title extends Component<{\n  title: IPublicTypeTitleContent;\n  className?: string;\n  onClick?: () => void;\n  match?: boolean;\n  keywords?: string;\n}> {\n  constructor(props: any) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick(e: React.MouseEvent) {\n    const { title, onClick } = this.props as any;\n    const url = title && (title.docUrl || title.url);\n    if (url) {\n      window.open(url);\n      // 防止触发行操作（如折叠面板）\n      e.stopPropagation();\n    }\n    // TODO: 操作交互冲突，目前 mixedSetter 仅有 2 个 setter 注册时用到了 onClick\n    onClick && onClick(e);\n  }\n\n  renderLabel = (label: string | IPublicTypeI18nData | ReactNode) => {\n    let { match, keywords } = this.props;\n\n    if (!label) {\n      return null;\n    }\n\n    const intlLabel = intl(label);\n\n    if (typeof intlLabel !== 'string') {\n      return <span className=\"lc-title-txt\">{intlLabel}</span>;\n    }\n\n    let labelToRender: ReactNode = intlLabel;\n\n    if (match && keywords) {\n      const fragments = splitLabelByKeywords(intlLabel as string, keywords);\n\n      labelToRender = fragments.map(f => <span style={{ color: f === keywords ? 'red' : 'inherit' }}>{f}</span>);\n    }\n\n    return (\n      <span className=\"lc-title-txt\">{labelToRender}</span>\n    );\n  };\n\n  render() {\n    // eslint-disable-next-line prefer-const\n    let { title, className } = this.props;\n    if (title == null) {\n      return null;\n    }\n    if (isValidElement(title)) {\n      return title;\n    }\n    if (typeof title === 'string' || isI18nData(title)) {\n      title = { label: title };\n    }\n\n    const icon = title.icon ? createIcon(title.icon, { size: 20 }) : null;\n\n    let tip: any = null;\n    if (title.tip) {\n      if (isValidElement(title.tip) && title.tip.type === Tip) {\n        tip = title.tip;\n      } else {\n        const tipProps =\n          typeof title.tip === 'object' && !(isValidElement(title.tip) || isI18nData(title.tip))\n            ? title.tip\n            : { children: title.tip };\n        tip = <Tip {...tipProps} />;\n      }\n    }\n\n    return (\n      <span\n        className={classNames('lc-title', className, title.className, {\n          'has-tip': !!tip,\n          'only-icon': !title.label,\n        })}\n        onClick={this.handleClick}\n      >\n        {icon ? <b className=\"lc-title-icon\">{icon}</b> : null}\n        {this.renderLabel(title.label)}\n        {tip}\n      </span>\n    );\n  }\n}\n","/* eslint-disable no-param-reassign */\nimport { IPublicTypeAssetsJson, IPublicTypeComponentDescription, IPublicTypePackage, IPublicTypeRemoteComponentDescription } from '@alilc/lowcode-types';\n\n// TODO: 该转换逻辑未来需要消化掉\nexport function assetsTransform(assets: IPublicTypeAssetsJson) {\n  const { components, packages } = assets;\n  const packageMaps = (packages || []).reduce((acc: Record<string, IPublicTypePackage>, cur: IPublicTypePackage) => {\n    const key = cur.id || cur.package || '';\n    acc[key] = cur;\n    return acc;\n  }, {} as any);\n  components.forEach((componentDesc: IPublicTypeComponentDescription | IPublicTypeRemoteComponentDescription) => {\n    let { devMode, schema, reference } = componentDesc;\n    if ((devMode as string) === 'lowcode') {\n      devMode = 'lowCode';\n    } else if (devMode === 'proCode') {\n      devMode = 'proCode';\n    }\n    if (devMode) {\n      componentDesc.devMode = devMode;\n    }\n    if (devMode === 'lowCode' && !schema && reference) {\n      const referenceId = reference.id || '';\n      componentDesc.schema = packageMaps[referenceId].schema;\n    }\n  });\n  return assets;\n}","/* eslint-disable no-console */\n/* eslint-disable max-len */\nimport { StrictEventEmitter } from 'strict-event-emitter-types';\nimport { EventEmitter } from 'events';\nimport { EventBus } from './event-bus';\nimport {\n  IPublicModelEditor,\n  EditorConfig,\n  PluginClassSet,\n  IPublicTypeEditorValueKey,\n  IPublicTypeEditorGetResult,\n  HookConfig,\n  IPublicTypeComponentDescription,\n  IPublicTypeRemoteComponentDescription,\n  GlobalEvent,\n} from '@alilc/lowcode-types';\nimport { engineConfig } from './config';\nimport { globalLocale } from './intl';\nimport { obx } from './utils';\nimport { IPublicTypeAssetsJson, AssetLoader } from '@alilc/lowcode-utils';\nimport { assetsTransform } from './utils/assets-transform';\n\nEventEmitter.defaultMaxListeners = 100;\n\n// inner instance keys which should not be stored in config\nconst keyBlacklist = [\n  'designer',\n  'skeleton',\n  'currentDocument',\n  'simulator',\n  'plugins',\n  'setters',\n  'material',\n  'innerHotkey',\n  'innerPlugins',\n];\n\nexport declare interface Editor extends StrictEventEmitter<EventEmitter, GlobalEvent.EventConfig> {\n  addListener(event: string | symbol, listener: (...args: any[]) => void): this;\n  once(event: string | symbol, listener: (...args: any[]) => void): this;\n  removeListener(event: string | symbol, listener: (...args: any[]) => void): this;\n  off(event: string | symbol, listener: (...args: any[]) => void): this;\n  removeAllListeners(event?: string | symbol): this;\n  setMaxListeners(n: number): this;\n  getMaxListeners(): number;\n  listeners(event: string | symbol): Function[];\n  rawListeners(event: string | symbol): Function[];\n  listenerCount(type: string | symbol): number;\n  // Added in Node 6...\n  prependListener(event: string | symbol, listener: (...args: any[]) => void): this;\n  prependOnceListener(event: string | symbol, listener: (...args: any[]) => void): this;\n  eventNames(): Array<string | symbol>;\n}\n\n// eslint-disable-next-line no-redeclare\nexport class Editor extends (EventEmitter as any) implements IPublicModelEditor {\n  constructor(readonly viewName: string = 'global', readonly workspaceMode: boolean = false) {\n    // eslint-disable-next-line constructor-super\n    super();\n    // set global emitter maxListeners\n    this.setMaxListeners(200);\n    this.eventBus = new EventBus(this);\n  }\n\n  /**\n   * Ioc Container\n   */\n  @obx.shallow private context = new Map<IPublicTypeEditorValueKey, any>();\n\n  get locale() {\n    return globalLocale.getLocale();\n  }\n\n  // readonly utils = utils;\n\n  private hooks: HookConfig[] = [];\n\n  get<T = undefined, KeyOrType = any>(\n      keyOrType: KeyOrType,\n    ): IPublicTypeEditorGetResult<T, KeyOrType> | undefined {\n    return this.context.get(keyOrType as any);\n  }\n\n  has(keyOrType: IPublicTypeEditorValueKey): boolean {\n    return this.context.has(keyOrType);\n  }\n\n  set(key: IPublicTypeEditorValueKey, data: any): void | Promise<void> {\n    if (key === 'assets') {\n      return this.setAssets(data);\n    }\n    // store the data to engineConfig while invoking editor.set()\n    if (!keyBlacklist.includes(key as string)) {\n      engineConfig.set(key as any, data);\n    }\n    this.context.set(key, data);\n    this.notifyGot(key);\n  }\n\n  async setAssets(assets: IPublicTypeAssetsJson) {\n    const { components } = assets;\n    if (components && components.length) {\n      const componentDescriptions: IPublicTypeComponentDescription[] = [];\n      const remoteComponentDescriptions: IPublicTypeRemoteComponentDescription[] = [];\n      components.forEach((component: any) => {\n        if (!component) {\n          return;\n        }\n        if (component.exportName && component.url) {\n          remoteComponentDescriptions.push(component);\n        } else {\n          componentDescriptions.push(component);\n        }\n      });\n      assets.components = componentDescriptions;\n      assets.componentList = assets.componentList || [];\n\n      // 如果有远程组件描述协议，则自动加载并补充到资产包中，同时出发 designer.incrementalAssetsReady 通知组件面板更新数据\n      if (remoteComponentDescriptions && remoteComponentDescriptions.length) {\n        await Promise.all(\n          remoteComponentDescriptions.map(async (component: any) => {\n            const { exportName, url, npm } = component;\n            await (new AssetLoader()).load(url);\n            function setAssetsComponent(component: any, extraNpmInfo: any = {}) {\n              const components = component.components;\n              if (Array.isArray(components)) {\n                components.forEach(d => {\n                  assets.components = assets.components.concat({\n                    npm: {\n                      ...npm,\n                      ...extraNpmInfo,\n                    },\n                    ...d,\n                  } || []);\n                });\n                return;\n              }\n              if (component.components) {\n                assets.components = assets.components.concat({\n                  npm: {\n                    ...npm,\n                    ...extraNpmInfo,\n                  },\n                  ...component.components,\n                } || []);\n              }\n              // assets.componentList = assets.componentList.concat(component.componentList || []);\n            }\n            function setArrayAssets(value: any[], preExportName: string = '', preSubName: string = '') {\n              value.forEach((d: any, i: number) => {\n                const exportName = [preExportName, i.toString()].filter(d => !!d).join('.');\n                const subName = [preSubName, i.toString()].filter(d => !!d).join('.');\n                Array.isArray(d) ? setArrayAssets(d, exportName, subName) : setAssetsComponent(d, {\n                  exportName,\n                  subName,\n                });\n              });\n            }\n            if (window[exportName]) {\n              if (Array.isArray(window[exportName])) {\n                setArrayAssets(window[exportName] as any);\n              } else {\n                setAssetsComponent(window[exportName] as any);\n              }\n            }\n            return window[exportName];\n          }),\n        );\n      }\n    }\n    const innerAssets = assetsTransform(assets);\n    this.context.set('assets', innerAssets);\n    this.notifyGot('assets');\n  }\n\n  onceGot<T = undefined, KeyOrType extends IPublicTypeEditorValueKey = any>(keyOrType: KeyOrType): Promise<IPublicTypeEditorGetResult<T, KeyOrType>> {\n    const x = this.context.get(keyOrType);\n    if (x !== undefined) {\n      return Promise.resolve(x);\n    }\n    return new Promise((resolve) => {\n      this.setWait(keyOrType, resolve, true);\n    });\n  }\n\n  onGot<T = undefined, KeyOrType extends IPublicTypeEditorValueKey = any>(\n    keyOrType: KeyOrType,\n    fn: (data: IPublicTypeEditorGetResult<T, KeyOrType>) => void,\n  ): () => void {\n    const x = this.context.get(keyOrType);\n    if (x !== undefined) {\n      fn(x);\n      return () => { };\n    } else {\n      this.setWait(keyOrType, fn);\n      return () => {\n        this.delWait(keyOrType, fn);\n      };\n    }\n  }\n\n  register(data: any, key?: IPublicTypeEditorValueKey): void {\n    this.context.set(key || data, data);\n    this.notifyGot(key || data);\n  }\n\n  config?: EditorConfig;\n\n  eventBus: EventBus;\n\n  components?: PluginClassSet;\n\n  async init(config?: EditorConfig, components?: PluginClassSet): Promise<any> {\n    this.config = config || {};\n    this.components = components || {};\n    const { hooks = [], lifeCycles } = this.config;\n\n    this.emit('editor.beforeInit');\n    const init = (lifeCycles && lifeCycles.init) || ((): void => { });\n\n    try {\n      await init(this);\n      // 注册快捷键\n      // 注册 hooks\n      this.registerHooks(hooks);\n      this.emit('editor.afterInit');\n\n      return true;\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  destroy(): void {\n    if (!this.config) {\n      return;\n    }\n    try {\n      const { lifeCycles = {} } = this.config;\n\n      this.unregisterHooks();\n\n      if (lifeCycles.destroy) {\n        lifeCycles.destroy(this);\n      }\n    } catch (err) {\n      console.warn(err);\n    }\n  }\n\n  initHooks = (hooks: HookConfig[]) => {\n    this.hooks = hooks.map((hook) => ({\n      ...hook,\n      // 指定第一个参数为 editor\n      handler: hook.handler.bind(this, this),\n    }));\n\n    return this.hooks;\n  };\n\n  registerHooks = (hooks: HookConfig[]) => {\n    this.initHooks(hooks).forEach(({ message, type, handler }) => {\n      if (['on', 'once'].indexOf(type) !== -1) {\n        this[type]((message as any), handler);\n      }\n    });\n  };\n\n  unregisterHooks = () => {\n    this.hooks.forEach(({ message, handler }) => {\n      this.removeListener(message, handler);\n    });\n  };\n\n  /* eslint-disable */\n  private waits = new Map<\n    IPublicTypeEditorValueKey,\n    Array<{\n      once?: boolean;\n      resolve: (data: any) => void;\n    }>\n  >();\n  /* eslint-enable */\n\n  private notifyGot(key: IPublicTypeEditorValueKey) {\n    let waits = this.waits.get(key);\n    if (!waits) {\n      return;\n    }\n    waits = waits.slice().reverse();\n    let i = waits.length;\n    while (i--) {\n      waits[i].resolve(this.get(key));\n      if (waits[i].once) {\n        waits.splice(i, 1);\n      }\n    }\n    if (waits.length > 0) {\n      this.waits.set(key, waits);\n    } else {\n      this.waits.delete(key);\n    }\n  }\n\n  private setWait(key: IPublicTypeEditorValueKey, resolve: (data: any) => void, once?: boolean) {\n    const waits = this.waits.get(key);\n    if (waits) {\n      waits.push({ resolve, once });\n    } else {\n      this.waits.set(key, [{ resolve, once }]);\n    }\n  }\n\n  private delWait(key: IPublicTypeEditorValueKey, fn: any) {\n    const waits = this.waits.get(key);\n    if (!waits) {\n      return;\n    }\n    let i = waits.length;\n    while (i--) {\n      if (waits[i].resolve === fn) {\n        waits.splice(i, 1);\n      }\n    }\n    if (waits.length < 1) {\n      this.waits.delete(key);\n    }\n  }\n}\n\nexport const commonEvent = new EventBus(new EventEmitter());","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","var niceErrors = {\n  0: \"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'\",\n  1: function _(annotationType, key) {\n    return \"Cannot apply '\" + annotationType + \"' to '\" + key.toString() + \"': Field not found.\";\n  },\n  /*\r\n  2(prop) {\r\n      return `invalid decorator for '${prop.toString()}'`\r\n  },\r\n  3(prop) {\r\n      return `Cannot decorate '${prop.toString()}': action can only be used on properties with a function value.`\r\n  },\r\n  4(prop) {\r\n      return `Cannot decorate '${prop.toString()}': computed can only be used on getter properties.`\r\n  },\r\n  */\n  5: \"'keys()' can only be used on observable objects, arrays, sets and maps\",\n  6: \"'values()' can only be used on observable objects, arrays, sets and maps\",\n  7: \"'entries()' can only be used on observable objects, arrays and maps\",\n  8: \"'set()' can only be used on observable objects, arrays and maps\",\n  9: \"'remove()' can only be used on observable objects, arrays and maps\",\n  10: \"'has()' can only be used on observable objects, arrays and maps\",\n  11: \"'get()' can only be used on observable objects, arrays and maps\",\n  12: \"Invalid annotation\",\n  13: \"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)\",\n  14: \"Intercept handlers should return nothing or a change object\",\n  15: \"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)\",\n  16: \"Modification exception: the internal structure of an observable array was changed.\",\n  17: function _(index, length) {\n    return \"[mobx.array] Index out of bounds, \" + index + \" is larger than \" + length;\n  },\n  18: \"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js\",\n  19: function _(other) {\n    return \"Cannot initialize from classes that inherit from Map: \" + other.constructor.name;\n  },\n  20: function _(other) {\n    return \"Cannot initialize map from \" + other;\n  },\n  21: function _(dataStructure) {\n    return \"Cannot convert to map from '\" + dataStructure + \"'\";\n  },\n  22: \"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js\",\n  23: \"It is not possible to get index atoms from arrays\",\n  24: function _(thing) {\n    return \"Cannot obtain administration from \" + thing;\n  },\n  25: function _(property, name) {\n    return \"the entry '\" + property + \"' does not exist in the observable map '\" + name + \"'\";\n  },\n  26: \"please specify a property\",\n  27: function _(property, name) {\n    return \"no observable property '\" + property.toString() + \"' found on the observable object '\" + name + \"'\";\n  },\n  28: function _(thing) {\n    return \"Cannot obtain atom from \" + thing;\n  },\n  29: \"Expecting some object\",\n  30: \"invalid action stack. did you forget to finish an action?\",\n  31: \"missing option for computed: get\",\n  32: function _(name, derivation) {\n    return \"Cycle detected in computation \" + name + \": \" + derivation;\n  },\n  33: function _(name) {\n    return \"The setter of computed value '\" + name + \"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\";\n  },\n  34: function _(name) {\n    return \"[ComputedValue '\" + name + \"'] It is not possible to assign a new value to a computed value.\";\n  },\n  35: \"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`\",\n  36: \"isolateGlobalState should be called before MobX is running any reactions\",\n  37: function _(method) {\n    return \"[mobx] `observableArray.\" + method + \"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice().\" + method + \"()` instead\";\n  },\n  38: \"'ownKeys()' can only be used on observable objects\",\n  39: \"'defineProperty()' can only be used on observable objects\"\n};\nvar errors = process.env.NODE_ENV !== \"production\" ? niceErrors : {};\nfunction die(error) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    var e = typeof error === \"string\" ? error : errors[error];\n    if (typeof e === \"function\") e = e.apply(null, args);\n    throw new Error(\"[MobX] \" + e);\n  }\n  throw new Error(typeof error === \"number\" ? \"[MobX] minified error nr: \" + error + (args.length ? \" \" + args.map(String).join(\",\") : \"\") + \". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts\" : \"[MobX] \" + error);\n}\n\nvar mockGlobal = {};\nfunction getGlobal() {\n  if (typeof globalThis !== \"undefined\") {\n    return globalThis;\n  }\n  if (typeof window !== \"undefined\") {\n    return window;\n  }\n  if (typeof global !== \"undefined\") {\n    return global;\n  }\n  if (typeof self !== \"undefined\") {\n    return self;\n  }\n  return mockGlobal;\n}\n\n// We shorten anything used > 5 times\nvar assign = Object.assign;\nvar getDescriptor = Object.getOwnPropertyDescriptor;\nvar defineProperty = Object.defineProperty;\nvar objectPrototype = Object.prototype;\nvar EMPTY_ARRAY = [];\nObject.freeze(EMPTY_ARRAY);\nvar EMPTY_OBJECT = {};\nObject.freeze(EMPTY_OBJECT);\nvar hasProxy = typeof Proxy !== \"undefined\";\nvar plainObjectString = /*#__PURE__*/Object.toString();\nfunction assertProxies() {\n  if (!hasProxy) {\n    die(process.env.NODE_ENV !== \"production\" ? \"`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`\" : \"Proxy not available\");\n  }\n}\nfunction warnAboutProxyRequirement(msg) {\n  if (process.env.NODE_ENV !== \"production\" && globalState.verifyProxies) {\n    die(\"MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to \" + msg);\n  }\n}\nfunction getNextId() {\n  return ++globalState.mobxGuid;\n}\n/**\r\n * Makes sure that the provided function is invoked at most once.\r\n */\nfunction once(func) {\n  var invoked = false;\n  return function () {\n    if (invoked) {\n      return;\n    }\n    invoked = true;\n    return func.apply(this, arguments);\n  };\n}\nvar noop = function noop() {};\nfunction isFunction(fn) {\n  return typeof fn === \"function\";\n}\nfunction isStringish(value) {\n  var t = typeof value;\n  switch (t) {\n    case \"string\":\n    case \"symbol\":\n    case \"number\":\n      return true;\n  }\n  return false;\n}\nfunction isObject(value) {\n  return value !== null && typeof value === \"object\";\n}\nfunction isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  var proto = Object.getPrototypeOf(value);\n  if (proto == null) {\n    return true;\n  }\n  var protoConstructor = Object.hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n  return typeof protoConstructor === \"function\" && protoConstructor.toString() === plainObjectString;\n}\n// https://stackoverflow.com/a/37865170\nfunction isGenerator(obj) {\n  var constructor = obj == null ? void 0 : obj.constructor;\n  if (!constructor) {\n    return false;\n  }\n  if (\"GeneratorFunction\" === constructor.name || \"GeneratorFunction\" === constructor.displayName) {\n    return true;\n  }\n  return false;\n}\nfunction addHiddenProp(object, propName, value) {\n  defineProperty(object, propName, {\n    enumerable: false,\n    writable: true,\n    configurable: true,\n    value: value\n  });\n}\nfunction addHiddenFinalProp(object, propName, value) {\n  defineProperty(object, propName, {\n    enumerable: false,\n    writable: false,\n    configurable: true,\n    value: value\n  });\n}\nfunction createInstanceofPredicate(name, theClass) {\n  var propName = \"isMobX\" + name;\n  theClass.prototype[propName] = true;\n  return function (x) {\n    return isObject(x) && x[propName] === true;\n  };\n}\nfunction isES6Map(thing) {\n  return thing instanceof Map;\n}\nfunction isES6Set(thing) {\n  return thing instanceof Set;\n}\nvar hasGetOwnPropertySymbols = typeof Object.getOwnPropertySymbols !== \"undefined\";\n/**\r\n * Returns the following: own enumerable keys and symbols.\r\n */\nfunction getPlainObjectKeys(object) {\n  var keys = Object.keys(object);\n  // Not supported in IE, so there are not going to be symbol props anyway...\n  if (!hasGetOwnPropertySymbols) {\n    return keys;\n  }\n  var symbols = Object.getOwnPropertySymbols(object);\n  if (!symbols.length) {\n    return keys;\n  }\n  return [].concat(keys, symbols.filter(function (s) {\n    return objectPrototype.propertyIsEnumerable.call(object, s);\n  }));\n}\n// From Immer utils\n// Returns all own keys, including non-enumerable and symbolic\nvar ownKeys = typeof Reflect !== \"undefined\" && Reflect.ownKeys ? Reflect.ownKeys : hasGetOwnPropertySymbols ? function (obj) {\n  return Object.getOwnPropertyNames(obj).concat(Object.getOwnPropertySymbols(obj));\n} : /* istanbul ignore next */Object.getOwnPropertyNames;\nfunction stringifyKey(key) {\n  if (typeof key === \"string\") {\n    return key;\n  }\n  if (typeof key === \"symbol\") {\n    return key.toString();\n  }\n  return new String(key).toString();\n}\nfunction toPrimitive(value) {\n  return value === null ? null : typeof value === \"object\" ? \"\" + value : value;\n}\nfunction hasProp(target, prop) {\n  return objectPrototype.hasOwnProperty.call(target, prop);\n}\n// From Immer utils\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors || function getOwnPropertyDescriptors(target) {\n  // Polyfill needed for Hermes and IE, see https://github.com/facebook/hermes/issues/274\n  var res = {};\n  // Note: without polyfill for ownKeys, symbols won't be picked up\n  ownKeys(target).forEach(function (key) {\n    res[key] = getDescriptor(target, key);\n  });\n  return res;\n};\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar storedAnnotationsSymbol = /*#__PURE__*/Symbol(\"mobx-stored-annotations\");\n/**\r\n * Creates a function that acts as\r\n * - decorator\r\n * - annotation object\r\n */\nfunction createDecoratorAnnotation(annotation) {\n  function decorator(target, property) {\n    storeAnnotation(target, property, annotation);\n  }\n  return Object.assign(decorator, annotation);\n}\n/**\r\n * Stores annotation to prototype,\r\n * so it can be inspected later by `makeObservable` called from constructor\r\n */\nfunction storeAnnotation(prototype, key, annotation) {\n  if (!hasProp(prototype, storedAnnotationsSymbol)) {\n    addHiddenProp(prototype, storedAnnotationsSymbol, _extends({}, prototype[storedAnnotationsSymbol]));\n  }\n  // @override must override something\n  if (process.env.NODE_ENV !== \"production\" && isOverride(annotation) && !hasProp(prototype[storedAnnotationsSymbol], key)) {\n    var fieldName = prototype.constructor.name + \".prototype.\" + key.toString();\n    die(\"'\" + fieldName + \"' is decorated with 'override', \" + \"but no such decorated member was found on prototype.\");\n  }\n  // Cannot re-decorate\n  assertNotDecorated(prototype, annotation, key);\n  // Ignore override\n  if (!isOverride(annotation)) {\n    prototype[storedAnnotationsSymbol][key] = annotation;\n  }\n}\nfunction assertNotDecorated(prototype, annotation, key) {\n  if (process.env.NODE_ENV !== \"production\" && !isOverride(annotation) && hasProp(prototype[storedAnnotationsSymbol], key)) {\n    var fieldName = prototype.constructor.name + \".prototype.\" + key.toString();\n    var currentAnnotationType = prototype[storedAnnotationsSymbol][key].annotationType_;\n    var requestedAnnotationType = annotation.annotationType_;\n    die(\"Cannot apply '@\" + requestedAnnotationType + \"' to '\" + fieldName + \"':\" + (\"\\nThe field is already decorated with '@\" + currentAnnotationType + \"'.\") + \"\\nRe-decorating fields is not allowed.\" + \"\\nUse '@override' decorator for methods overridden by subclass.\");\n  }\n}\n/**\r\n * Collects annotations from prototypes and stores them on target (instance)\r\n */\nfunction collectStoredAnnotations(target) {\n  if (!hasProp(target, storedAnnotationsSymbol)) {\n    if (process.env.NODE_ENV !== \"production\" && !target[storedAnnotationsSymbol]) {\n      die(\"No annotations were passed to makeObservable, but no decorated members have been found either\");\n    }\n    // We need a copy as we will remove annotation from the list once it's applied.\n    addHiddenProp(target, storedAnnotationsSymbol, _extends({}, target[storedAnnotationsSymbol]));\n  }\n  return target[storedAnnotationsSymbol];\n}\n\nvar $mobx = /*#__PURE__*/Symbol(\"mobx administration\");\nvar Atom = /*#__PURE__*/function () {\n  // for effective unobserving. BaseAtom has true, for extra optimization, so its onBecomeUnobserved never gets called, because it's not needed\n\n  /**\r\n   * Create a new atom. For debugging purposes it is recommended to give it a name.\r\n   * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\r\n   */\n  function Atom(name_) {\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"Atom@\" + getNextId() : \"Atom\";\n    }\n    this.name_ = void 0;\n    this.isPendingUnobservation_ = false;\n    this.isBeingObserved_ = false;\n    this.observers_ = new Set();\n    this.diffValue_ = 0;\n    this.lastAccessedBy_ = 0;\n    this.lowestObserverState_ = IDerivationState_.NOT_TRACKING_;\n    this.onBOL = void 0;\n    this.onBUOL = void 0;\n    this.name_ = name_;\n  }\n  // onBecomeObservedListeners\n  var _proto = Atom.prototype;\n  _proto.onBO = function onBO() {\n    if (this.onBOL) {\n      this.onBOL.forEach(function (listener) {\n        return listener();\n      });\n    }\n  };\n  _proto.onBUO = function onBUO() {\n    if (this.onBUOL) {\n      this.onBUOL.forEach(function (listener) {\n        return listener();\n      });\n    }\n  }\n  /**\r\n   * Invoke this method to notify mobx that your atom has been used somehow.\r\n   * Returns true if there is currently a reactive context.\r\n   */;\n  _proto.reportObserved = function reportObserved$1() {\n    return reportObserved(this);\n  }\n  /**\r\n   * Invoke this method _after_ this method has changed to signal mobx that all its observers should invalidate.\r\n   */;\n  _proto.reportChanged = function reportChanged() {\n    startBatch();\n    propagateChanged(this);\n    endBatch();\n  };\n  _proto.toString = function toString() {\n    return this.name_;\n  };\n  return Atom;\n}();\nvar isAtom = /*#__PURE__*/createInstanceofPredicate(\"Atom\", Atom);\nfunction createAtom(name, onBecomeObservedHandler, onBecomeUnobservedHandler) {\n  if (onBecomeObservedHandler === void 0) {\n    onBecomeObservedHandler = noop;\n  }\n  if (onBecomeUnobservedHandler === void 0) {\n    onBecomeUnobservedHandler = noop;\n  }\n  var atom = new Atom(name);\n  // default `noop` listener will not initialize the hook Set\n  if (onBecomeObservedHandler !== noop) {\n    onBecomeObserved(atom, onBecomeObservedHandler);\n  }\n  if (onBecomeUnobservedHandler !== noop) {\n    onBecomeUnobserved(atom, onBecomeUnobservedHandler);\n  }\n  return atom;\n}\n\nfunction identityComparer(a, b) {\n  return a === b;\n}\nfunction structuralComparer(a, b) {\n  return deepEqual(a, b);\n}\nfunction shallowComparer(a, b) {\n  return deepEqual(a, b, 1);\n}\nfunction defaultComparer(a, b) {\n  if (Object.is) {\n    return Object.is(a, b);\n  }\n  return a === b ? a !== 0 || 1 / a === 1 / b : a !== a && b !== b;\n}\nvar comparer = {\n  identity: identityComparer,\n  structural: structuralComparer,\n  \"default\": defaultComparer,\n  shallow: shallowComparer\n};\n\nfunction deepEnhancer(v, _, name) {\n  // it is an observable already, done\n  if (isObservable(v)) {\n    return v;\n  }\n  // something that can be converted and mutated?\n  if (Array.isArray(v)) {\n    return observable.array(v, {\n      name: name\n    });\n  }\n  if (isPlainObject(v)) {\n    return observable.object(v, undefined, {\n      name: name\n    });\n  }\n  if (isES6Map(v)) {\n    return observable.map(v, {\n      name: name\n    });\n  }\n  if (isES6Set(v)) {\n    return observable.set(v, {\n      name: name\n    });\n  }\n  if (typeof v === \"function\" && !isAction(v) && !isFlow(v)) {\n    if (isGenerator(v)) {\n      return flow(v);\n    } else {\n      return autoAction(name, v);\n    }\n  }\n  return v;\n}\nfunction shallowEnhancer(v, _, name) {\n  if (v === undefined || v === null) {\n    return v;\n  }\n  if (isObservableObject(v) || isObservableArray(v) || isObservableMap(v) || isObservableSet(v)) {\n    return v;\n  }\n  if (Array.isArray(v)) {\n    return observable.array(v, {\n      name: name,\n      deep: false\n    });\n  }\n  if (isPlainObject(v)) {\n    return observable.object(v, undefined, {\n      name: name,\n      deep: false\n    });\n  }\n  if (isES6Map(v)) {\n    return observable.map(v, {\n      name: name,\n      deep: false\n    });\n  }\n  if (isES6Set(v)) {\n    return observable.set(v, {\n      name: name,\n      deep: false\n    });\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    die(\"The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets\");\n  }\n}\nfunction referenceEnhancer(newValue) {\n  // never turn into an observable\n  return newValue;\n}\nfunction refStructEnhancer(v, oldValue) {\n  if (process.env.NODE_ENV !== \"production\" && isObservable(v)) {\n    die(\"observable.struct should not be used with observable values\");\n  }\n  if (deepEqual(v, oldValue)) {\n    return oldValue;\n  }\n  return v;\n}\n\nvar OVERRIDE = \"override\";\nvar override = /*#__PURE__*/createDecoratorAnnotation({\n  annotationType_: OVERRIDE,\n  make_: make_,\n  extend_: extend_\n});\nfunction isOverride(annotation) {\n  return annotation.annotationType_ === OVERRIDE;\n}\nfunction make_(adm, key) {\n  // Must not be plain object\n  if (process.env.NODE_ENV !== \"production\" && adm.isPlainObject_) {\n    die(\"Cannot apply '\" + this.annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + this.annotationType_ + \"' cannot be used on plain objects.\"));\n  }\n  // Must override something\n  if (process.env.NODE_ENV !== \"production\" && !hasProp(adm.appliedAnnotations_, key)) {\n    die(\"'\" + adm.name_ + \".\" + key.toString() + \"' is annotated with '\" + this.annotationType_ + \"', \" + \"but no such annotated member was found on prototype.\");\n  }\n  return 0 /* Cancel */;\n}\n\nfunction extend_(adm, key, descriptor, proxyTrap) {\n  die(\"'\" + this.annotationType_ + \"' can only be used with 'makeObservable'\");\n}\n\nfunction createActionAnnotation(name, options) {\n  return {\n    annotationType_: name,\n    options_: options,\n    make_: make_$1,\n    extend_: extend_$1\n  };\n}\nfunction make_$1(adm, key, descriptor, source) {\n  var _this$options_;\n  // bound\n  if ((_this$options_ = this.options_) != null && _this$options_.bound) {\n    return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 1 /* Break */;\n  }\n  // own\n  if (source === adm.target_) {\n    return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 2 /* Continue */;\n  }\n  // prototype\n  if (isAction(descriptor.value)) {\n    // A prototype could have been annotated already by other constructor,\n    // rest of the proto chain must be annotated already\n    return 1 /* Break */;\n  }\n\n  var actionDescriptor = createActionDescriptor(adm, this, key, descriptor, false);\n  defineProperty(source, key, actionDescriptor);\n  return 2 /* Continue */;\n}\n\nfunction extend_$1(adm, key, descriptor, proxyTrap) {\n  var actionDescriptor = createActionDescriptor(adm, this, key, descriptor);\n  return adm.defineProperty_(key, actionDescriptor, proxyTrap);\n}\nfunction assertActionDescriptor(adm, _ref, key, _ref2) {\n  var annotationType_ = _ref.annotationType_;\n  var value = _ref2.value;\n  if (process.env.NODE_ENV !== \"production\" && !isFunction(value)) {\n    die(\"Cannot apply '\" + annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + annotationType_ + \"' can only be used on properties with a function value.\"));\n  }\n}\nfunction createActionDescriptor(adm, annotation, key, descriptor,\n// provides ability to disable safeDescriptors for prototypes\nsafeDescriptors) {\n  var _annotation$options_, _annotation$options_$, _annotation$options_2, _annotation$options_$2, _annotation$options_3, _annotation$options_4, _adm$proxy_2;\n  if (safeDescriptors === void 0) {\n    safeDescriptors = globalState.safeDescriptors;\n  }\n  assertActionDescriptor(adm, annotation, key, descriptor);\n  var value = descriptor.value;\n  if ((_annotation$options_ = annotation.options_) != null && _annotation$options_.bound) {\n    var _adm$proxy_;\n    value = value.bind((_adm$proxy_ = adm.proxy_) != null ? _adm$proxy_ : adm.target_);\n  }\n  return {\n    value: createAction((_annotation$options_$ = (_annotation$options_2 = annotation.options_) == null ? void 0 : _annotation$options_2.name) != null ? _annotation$options_$ : key.toString(), value, (_annotation$options_$2 = (_annotation$options_3 = annotation.options_) == null ? void 0 : _annotation$options_3.autoAction) != null ? _annotation$options_$2 : false,\n    // https://github.com/mobxjs/mobx/discussions/3140\n    (_annotation$options_4 = annotation.options_) != null && _annotation$options_4.bound ? (_adm$proxy_2 = adm.proxy_) != null ? _adm$proxy_2 : adm.target_ : undefined),\n    // Non-configurable for classes\n    // prevents accidental field redefinition in subclass\n    configurable: safeDescriptors ? adm.isPlainObject_ : true,\n    // https://github.com/mobxjs/mobx/pull/2641#issuecomment-737292058\n    enumerable: false,\n    // Non-obsevable, therefore non-writable\n    // Also prevents rewriting in subclass constructor\n    writable: safeDescriptors ? false : true\n  };\n}\n\nfunction createFlowAnnotation(name, options) {\n  return {\n    annotationType_: name,\n    options_: options,\n    make_: make_$2,\n    extend_: extend_$2\n  };\n}\nfunction make_$2(adm, key, descriptor, source) {\n  var _this$options_;\n  // own\n  if (source === adm.target_) {\n    return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 2 /* Continue */;\n  }\n  // prototype\n  // bound - must annotate protos to support super.flow()\n  if ((_this$options_ = this.options_) != null && _this$options_.bound && (!hasProp(adm.target_, key) || !isFlow(adm.target_[key]))) {\n    if (this.extend_(adm, key, descriptor, false) === null) {\n      return 0 /* Cancel */;\n    }\n  }\n\n  if (isFlow(descriptor.value)) {\n    // A prototype could have been annotated already by other constructor,\n    // rest of the proto chain must be annotated already\n    return 1 /* Break */;\n  }\n\n  var flowDescriptor = createFlowDescriptor(adm, this, key, descriptor, false, false);\n  defineProperty(source, key, flowDescriptor);\n  return 2 /* Continue */;\n}\n\nfunction extend_$2(adm, key, descriptor, proxyTrap) {\n  var _this$options_2;\n  var flowDescriptor = createFlowDescriptor(adm, this, key, descriptor, (_this$options_2 = this.options_) == null ? void 0 : _this$options_2.bound);\n  return adm.defineProperty_(key, flowDescriptor, proxyTrap);\n}\nfunction assertFlowDescriptor(adm, _ref, key, _ref2) {\n  var annotationType_ = _ref.annotationType_;\n  var value = _ref2.value;\n  if (process.env.NODE_ENV !== \"production\" && !isFunction(value)) {\n    die(\"Cannot apply '\" + annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + annotationType_ + \"' can only be used on properties with a generator function value.\"));\n  }\n}\nfunction createFlowDescriptor(adm, annotation, key, descriptor, bound,\n// provides ability to disable safeDescriptors for prototypes\nsafeDescriptors) {\n  if (safeDescriptors === void 0) {\n    safeDescriptors = globalState.safeDescriptors;\n  }\n  assertFlowDescriptor(adm, annotation, key, descriptor);\n  var value = descriptor.value;\n  // In case of flow.bound, the descriptor can be from already annotated prototype\n  if (!isFlow(value)) {\n    value = flow(value);\n  }\n  if (bound) {\n    var _adm$proxy_;\n    // We do not keep original function around, so we bind the existing flow\n    value = value.bind((_adm$proxy_ = adm.proxy_) != null ? _adm$proxy_ : adm.target_);\n    // This is normally set by `flow`, but `bind` returns new function...\n    value.isMobXFlow = true;\n  }\n  return {\n    value: value,\n    // Non-configurable for classes\n    // prevents accidental field redefinition in subclass\n    configurable: safeDescriptors ? adm.isPlainObject_ : true,\n    // https://github.com/mobxjs/mobx/pull/2641#issuecomment-737292058\n    enumerable: false,\n    // Non-obsevable, therefore non-writable\n    // Also prevents rewriting in subclass constructor\n    writable: safeDescriptors ? false : true\n  };\n}\n\nfunction createComputedAnnotation(name, options) {\n  return {\n    annotationType_: name,\n    options_: options,\n    make_: make_$3,\n    extend_: extend_$3\n  };\n}\nfunction make_$3(adm, key, descriptor) {\n  return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 1 /* Break */;\n}\n\nfunction extend_$3(adm, key, descriptor, proxyTrap) {\n  assertComputedDescriptor(adm, this, key, descriptor);\n  return adm.defineComputedProperty_(key, _extends({}, this.options_, {\n    get: descriptor.get,\n    set: descriptor.set\n  }), proxyTrap);\n}\nfunction assertComputedDescriptor(adm, _ref, key, _ref2) {\n  var annotationType_ = _ref.annotationType_;\n  var get = _ref2.get;\n  if (process.env.NODE_ENV !== \"production\" && !get) {\n    die(\"Cannot apply '\" + annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + annotationType_ + \"' can only be used on getter(+setter) properties.\"));\n  }\n}\n\nfunction createObservableAnnotation(name, options) {\n  return {\n    annotationType_: name,\n    options_: options,\n    make_: make_$4,\n    extend_: extend_$4\n  };\n}\nfunction make_$4(adm, key, descriptor) {\n  return this.extend_(adm, key, descriptor, false) === null ? 0 /* Cancel */ : 1 /* Break */;\n}\n\nfunction extend_$4(adm, key, descriptor, proxyTrap) {\n  var _this$options_$enhanc, _this$options_;\n  assertObservableDescriptor(adm, this, key, descriptor);\n  return adm.defineObservableProperty_(key, descriptor.value, (_this$options_$enhanc = (_this$options_ = this.options_) == null ? void 0 : _this$options_.enhancer) != null ? _this$options_$enhanc : deepEnhancer, proxyTrap);\n}\nfunction assertObservableDescriptor(adm, _ref, key, descriptor) {\n  var annotationType_ = _ref.annotationType_;\n  if (process.env.NODE_ENV !== \"production\" && !(\"value\" in descriptor)) {\n    die(\"Cannot apply '\" + annotationType_ + \"' to '\" + adm.name_ + \".\" + key.toString() + \"':\" + (\"\\n'\" + annotationType_ + \"' cannot be used on getter/setter properties\"));\n  }\n}\n\nvar AUTO = \"true\";\nvar autoAnnotation = /*#__PURE__*/createAutoAnnotation();\nfunction createAutoAnnotation(options) {\n  return {\n    annotationType_: AUTO,\n    options_: options,\n    make_: make_$5,\n    extend_: extend_$5\n  };\n}\nfunction make_$5(adm, key, descriptor, source) {\n  var _this$options_3, _this$options_4;\n  // getter -> computed\n  if (descriptor.get) {\n    return computed.make_(adm, key, descriptor, source);\n  }\n  // lone setter -> action setter\n  if (descriptor.set) {\n    // TODO make action applicable to setter and delegate to action.make_\n    var set = createAction(key.toString(), descriptor.set);\n    // own\n    if (source === adm.target_) {\n      return adm.defineProperty_(key, {\n        configurable: globalState.safeDescriptors ? adm.isPlainObject_ : true,\n        set: set\n      }) === null ? 0 /* Cancel */ : 2 /* Continue */;\n    }\n    // proto\n    defineProperty(source, key, {\n      configurable: true,\n      set: set\n    });\n    return 2 /* Continue */;\n  }\n  // function on proto -> autoAction/flow\n  if (source !== adm.target_ && typeof descriptor.value === \"function\") {\n    var _this$options_2;\n    if (isGenerator(descriptor.value)) {\n      var _this$options_;\n      var flowAnnotation = (_this$options_ = this.options_) != null && _this$options_.autoBind ? flow.bound : flow;\n      return flowAnnotation.make_(adm, key, descriptor, source);\n    }\n    var actionAnnotation = (_this$options_2 = this.options_) != null && _this$options_2.autoBind ? autoAction.bound : autoAction;\n    return actionAnnotation.make_(adm, key, descriptor, source);\n  }\n  // other -> observable\n  // Copy props from proto as well, see test:\n  // \"decorate should work with Object.create\"\n  var observableAnnotation = ((_this$options_3 = this.options_) == null ? void 0 : _this$options_3.deep) === false ? observable.ref : observable;\n  // if function respect autoBind option\n  if (typeof descriptor.value === \"function\" && (_this$options_4 = this.options_) != null && _this$options_4.autoBind) {\n    var _adm$proxy_;\n    descriptor.value = descriptor.value.bind((_adm$proxy_ = adm.proxy_) != null ? _adm$proxy_ : adm.target_);\n  }\n  return observableAnnotation.make_(adm, key, descriptor, source);\n}\nfunction extend_$5(adm, key, descriptor, proxyTrap) {\n  var _this$options_5, _this$options_6;\n  // getter -> computed\n  if (descriptor.get) {\n    return computed.extend_(adm, key, descriptor, proxyTrap);\n  }\n  // lone setter -> action setter\n  if (descriptor.set) {\n    // TODO make action applicable to setter and delegate to action.extend_\n    return adm.defineProperty_(key, {\n      configurable: globalState.safeDescriptors ? adm.isPlainObject_ : true,\n      set: createAction(key.toString(), descriptor.set)\n    }, proxyTrap);\n  }\n  // other -> observable\n  // if function respect autoBind option\n  if (typeof descriptor.value === \"function\" && (_this$options_5 = this.options_) != null && _this$options_5.autoBind) {\n    var _adm$proxy_2;\n    descriptor.value = descriptor.value.bind((_adm$proxy_2 = adm.proxy_) != null ? _adm$proxy_2 : adm.target_);\n  }\n  var observableAnnotation = ((_this$options_6 = this.options_) == null ? void 0 : _this$options_6.deep) === false ? observable.ref : observable;\n  return observableAnnotation.extend_(adm, key, descriptor, proxyTrap);\n}\n\nvar OBSERVABLE = \"observable\";\nvar OBSERVABLE_REF = \"observable.ref\";\nvar OBSERVABLE_SHALLOW = \"observable.shallow\";\nvar OBSERVABLE_STRUCT = \"observable.struct\";\n// Predefined bags of create observable options, to avoid allocating temporarily option objects\n// in the majority of cases\nvar defaultCreateObservableOptions = {\n  deep: true,\n  name: undefined,\n  defaultDecorator: undefined,\n  proxy: true\n};\nObject.freeze(defaultCreateObservableOptions);\nfunction asCreateObservableOptions(thing) {\n  return thing || defaultCreateObservableOptions;\n}\nvar observableAnnotation = /*#__PURE__*/createObservableAnnotation(OBSERVABLE);\nvar observableRefAnnotation = /*#__PURE__*/createObservableAnnotation(OBSERVABLE_REF, {\n  enhancer: referenceEnhancer\n});\nvar observableShallowAnnotation = /*#__PURE__*/createObservableAnnotation(OBSERVABLE_SHALLOW, {\n  enhancer: shallowEnhancer\n});\nvar observableStructAnnotation = /*#__PURE__*/createObservableAnnotation(OBSERVABLE_STRUCT, {\n  enhancer: refStructEnhancer\n});\nvar observableDecoratorAnnotation = /*#__PURE__*/createDecoratorAnnotation(observableAnnotation);\nfunction getEnhancerFromOptions(options) {\n  return options.deep === true ? deepEnhancer : options.deep === false ? referenceEnhancer : getEnhancerFromAnnotation(options.defaultDecorator);\n}\nfunction getAnnotationFromOptions(options) {\n  var _options$defaultDecor;\n  return options ? (_options$defaultDecor = options.defaultDecorator) != null ? _options$defaultDecor : createAutoAnnotation(options) : undefined;\n}\nfunction getEnhancerFromAnnotation(annotation) {\n  var _annotation$options_$, _annotation$options_;\n  return !annotation ? deepEnhancer : (_annotation$options_$ = (_annotation$options_ = annotation.options_) == null ? void 0 : _annotation$options_.enhancer) != null ? _annotation$options_$ : deepEnhancer;\n}\n/**\r\n * Turns an object, array or function into a reactive structure.\r\n * @param v the value which should become observable.\r\n */\nfunction createObservable(v, arg2, arg3) {\n  // @observable someProp;\n  if (isStringish(arg2)) {\n    storeAnnotation(v, arg2, observableAnnotation);\n    return;\n  }\n  // already observable - ignore\n  if (isObservable(v)) {\n    return v;\n  }\n  // plain object\n  if (isPlainObject(v)) {\n    return observable.object(v, arg2, arg3);\n  }\n  // Array\n  if (Array.isArray(v)) {\n    return observable.array(v, arg2);\n  }\n  // Map\n  if (isES6Map(v)) {\n    return observable.map(v, arg2);\n  }\n  // Set\n  if (isES6Set(v)) {\n    return observable.set(v, arg2);\n  }\n  // other object - ignore\n  if (typeof v === \"object\" && v !== null) {\n    return v;\n  }\n  // anything else\n  return observable.box(v, arg2);\n}\nassign(createObservable, observableDecoratorAnnotation);\nvar observableFactories = {\n  box: function box(value, options) {\n    var o = asCreateObservableOptions(options);\n    return new ObservableValue(value, getEnhancerFromOptions(o), o.name, true, o.equals);\n  },\n  array: function array(initialValues, options) {\n    var o = asCreateObservableOptions(options);\n    return (globalState.useProxies === false || o.proxy === false ? createLegacyArray : createObservableArray)(initialValues, getEnhancerFromOptions(o), o.name);\n  },\n  map: function map(initialValues, options) {\n    var o = asCreateObservableOptions(options);\n    return new ObservableMap(initialValues, getEnhancerFromOptions(o), o.name);\n  },\n  set: function set(initialValues, options) {\n    var o = asCreateObservableOptions(options);\n    return new ObservableSet(initialValues, getEnhancerFromOptions(o), o.name);\n  },\n  object: function object(props, decorators, options) {\n    return extendObservable(globalState.useProxies === false || (options == null ? void 0 : options.proxy) === false ? asObservableObject({}, options) : asDynamicObservableObject({}, options), props, decorators);\n  },\n  ref: /*#__PURE__*/createDecoratorAnnotation(observableRefAnnotation),\n  shallow: /*#__PURE__*/createDecoratorAnnotation(observableShallowAnnotation),\n  deep: observableDecoratorAnnotation,\n  struct: /*#__PURE__*/createDecoratorAnnotation(observableStructAnnotation)\n};\n// eslint-disable-next-line\nvar observable = /*#__PURE__*/assign(createObservable, observableFactories);\n\nvar COMPUTED = \"computed\";\nvar COMPUTED_STRUCT = \"computed.struct\";\nvar computedAnnotation = /*#__PURE__*/createComputedAnnotation(COMPUTED);\nvar computedStructAnnotation = /*#__PURE__*/createComputedAnnotation(COMPUTED_STRUCT, {\n  equals: comparer.structural\n});\n/**\r\n * Decorator for class properties: @computed get value() { return expr; }.\r\n * For legacy purposes also invokable as ES5 observable created: `computed(() => expr)`;\r\n */\nvar computed = function computed(arg1, arg2) {\n  if (isStringish(arg2)) {\n    // @computed\n    return storeAnnotation(arg1, arg2, computedAnnotation);\n  }\n  if (isPlainObject(arg1)) {\n    // @computed({ options })\n    return createDecoratorAnnotation(createComputedAnnotation(COMPUTED, arg1));\n  }\n  // computed(expr, options?)\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isFunction(arg1)) {\n      die(\"First argument to `computed` should be an expression.\");\n    }\n    if (isFunction(arg2)) {\n      die(\"A setter as second argument is no longer supported, use `{ set: fn }` option instead\");\n    }\n  }\n  var opts = isPlainObject(arg2) ? arg2 : {};\n  opts.get = arg1;\n  opts.name || (opts.name = arg1.name || \"\"); /* for generated name */\n  return new ComputedValue(opts);\n};\nObject.assign(computed, computedAnnotation);\ncomputed.struct = /*#__PURE__*/createDecoratorAnnotation(computedStructAnnotation);\n\nvar _getDescriptor$config, _getDescriptor;\n// we don't use globalState for these in order to avoid possible issues with multiple\n// mobx versions\nvar currentActionId = 0;\nvar nextActionId = 1;\nvar isFunctionNameConfigurable = (_getDescriptor$config = (_getDescriptor = /*#__PURE__*/getDescriptor(function () {}, \"name\")) == null ? void 0 : _getDescriptor.configurable) != null ? _getDescriptor$config : false;\n// we can safely recycle this object\nvar tmpNameDescriptor = {\n  value: \"action\",\n  configurable: true,\n  writable: false,\n  enumerable: false\n};\nfunction createAction(actionName, fn, autoAction, ref) {\n  if (autoAction === void 0) {\n    autoAction = false;\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isFunction(fn)) {\n      die(\"`action` can only be invoked on functions\");\n    }\n    if (typeof actionName !== \"string\" || !actionName) {\n      die(\"actions should have valid names, got: '\" + actionName + \"'\");\n    }\n  }\n  function res() {\n    return executeAction(actionName, autoAction, fn, ref || this, arguments);\n  }\n  res.isMobxAction = true;\n  if (isFunctionNameConfigurable) {\n    tmpNameDescriptor.value = actionName;\n    defineProperty(res, \"name\", tmpNameDescriptor);\n  }\n  return res;\n}\nfunction executeAction(actionName, canRunAsDerivation, fn, scope, args) {\n  var runInfo = _startAction(actionName, canRunAsDerivation, scope, args);\n  try {\n    return fn.apply(scope, args);\n  } catch (err) {\n    runInfo.error_ = err;\n    throw err;\n  } finally {\n    _endAction(runInfo);\n  }\n}\nfunction _startAction(actionName, canRunAsDerivation,\n// true for autoAction\nscope, args) {\n  var notifySpy_ = process.env.NODE_ENV !== \"production\" && isSpyEnabled() && !!actionName;\n  var startTime_ = 0;\n  if (process.env.NODE_ENV !== \"production\" && notifySpy_) {\n    startTime_ = Date.now();\n    var flattenedArgs = args ? Array.from(args) : EMPTY_ARRAY;\n    spyReportStart({\n      type: ACTION,\n      name: actionName,\n      object: scope,\n      arguments: flattenedArgs\n    });\n  }\n  var prevDerivation_ = globalState.trackingDerivation;\n  var runAsAction = !canRunAsDerivation || !prevDerivation_;\n  startBatch();\n  var prevAllowStateChanges_ = globalState.allowStateChanges; // by default preserve previous allow\n  if (runAsAction) {\n    untrackedStart();\n    prevAllowStateChanges_ = allowStateChangesStart(true);\n  }\n  var prevAllowStateReads_ = allowStateReadsStart(true);\n  var runInfo = {\n    runAsAction_: runAsAction,\n    prevDerivation_: prevDerivation_,\n    prevAllowStateChanges_: prevAllowStateChanges_,\n    prevAllowStateReads_: prevAllowStateReads_,\n    notifySpy_: notifySpy_,\n    startTime_: startTime_,\n    actionId_: nextActionId++,\n    parentActionId_: currentActionId\n  };\n  currentActionId = runInfo.actionId_;\n  return runInfo;\n}\nfunction _endAction(runInfo) {\n  if (currentActionId !== runInfo.actionId_) {\n    die(30);\n  }\n  currentActionId = runInfo.parentActionId_;\n  if (runInfo.error_ !== undefined) {\n    globalState.suppressReactionErrors = true;\n  }\n  allowStateChangesEnd(runInfo.prevAllowStateChanges_);\n  allowStateReadsEnd(runInfo.prevAllowStateReads_);\n  endBatch();\n  if (runInfo.runAsAction_) {\n    untrackedEnd(runInfo.prevDerivation_);\n  }\n  if (process.env.NODE_ENV !== \"production\" && runInfo.notifySpy_) {\n    spyReportEnd({\n      time: Date.now() - runInfo.startTime_\n    });\n  }\n  globalState.suppressReactionErrors = false;\n}\nfunction allowStateChanges(allowStateChanges, func) {\n  var prev = allowStateChangesStart(allowStateChanges);\n  try {\n    return func();\n  } finally {\n    allowStateChangesEnd(prev);\n  }\n}\nfunction allowStateChangesStart(allowStateChanges) {\n  var prev = globalState.allowStateChanges;\n  globalState.allowStateChanges = allowStateChanges;\n  return prev;\n}\nfunction allowStateChangesEnd(prev) {\n  globalState.allowStateChanges = prev;\n}\n\nvar _Symbol$toPrimitive;\nvar CREATE = \"create\";\n_Symbol$toPrimitive = Symbol.toPrimitive;\nvar ObservableValue = /*#__PURE__*/function (_Atom) {\n  _inheritsLoose(ObservableValue, _Atom);\n  function ObservableValue(value, enhancer, name_, notifySpy, equals) {\n    var _this;\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"ObservableValue@\" + getNextId() : \"ObservableValue\";\n    }\n    if (notifySpy === void 0) {\n      notifySpy = true;\n    }\n    if (equals === void 0) {\n      equals = comparer[\"default\"];\n    }\n    _this = _Atom.call(this, name_) || this;\n    _this.enhancer = void 0;\n    _this.name_ = void 0;\n    _this.equals = void 0;\n    _this.hasUnreportedChange_ = false;\n    _this.interceptors_ = void 0;\n    _this.changeListeners_ = void 0;\n    _this.value_ = void 0;\n    _this.dehancer = void 0;\n    _this.enhancer = enhancer;\n    _this.name_ = name_;\n    _this.equals = equals;\n    _this.value_ = enhancer(value, undefined, name_);\n    if (process.env.NODE_ENV !== \"production\" && notifySpy && isSpyEnabled()) {\n      // only notify spy if this is a stand-alone observable\n      spyReport({\n        type: CREATE,\n        object: _assertThisInitialized(_this),\n        observableKind: \"value\",\n        debugObjectName: _this.name_,\n        newValue: \"\" + _this.value_\n      });\n    }\n    return _this;\n  }\n  var _proto = ObservableValue.prototype;\n  _proto.dehanceValue = function dehanceValue(value) {\n    if (this.dehancer !== undefined) {\n      return this.dehancer(value);\n    }\n    return value;\n  };\n  _proto.set = function set(newValue) {\n    var oldValue = this.value_;\n    newValue = this.prepareNewValue_(newValue);\n    if (newValue !== globalState.UNCHANGED) {\n      var notifySpy = isSpyEnabled();\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart({\n          type: UPDATE,\n          object: this,\n          observableKind: \"value\",\n          debugObjectName: this.name_,\n          newValue: newValue,\n          oldValue: oldValue\n        });\n      }\n      this.setNewValue_(newValue);\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n    }\n  };\n  _proto.prepareNewValue_ = function prepareNewValue_(newValue) {\n    checkIfStateModificationsAreAllowed(this);\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        object: this,\n        type: UPDATE,\n        newValue: newValue\n      });\n      if (!change) {\n        return globalState.UNCHANGED;\n      }\n      newValue = change.newValue;\n    }\n    // apply modifier\n    newValue = this.enhancer(newValue, this.value_, this.name_);\n    return this.equals(this.value_, newValue) ? globalState.UNCHANGED : newValue;\n  };\n  _proto.setNewValue_ = function setNewValue_(newValue) {\n    var oldValue = this.value_;\n    this.value_ = newValue;\n    this.reportChanged();\n    if (hasListeners(this)) {\n      notifyListeners(this, {\n        type: UPDATE,\n        object: this,\n        newValue: newValue,\n        oldValue: oldValue\n      });\n    }\n  };\n  _proto.get = function get() {\n    this.reportObserved();\n    return this.dehanceValue(this.value_);\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    if (fireImmediately) {\n      listener({\n        observableKind: \"value\",\n        debugObjectName: this.name_,\n        object: this,\n        type: UPDATE,\n        newValue: this.value_,\n        oldValue: undefined\n      });\n    }\n    return registerListener(this, listener);\n  };\n  _proto.raw = function raw() {\n    // used by MST ot get undehanced value\n    return this.value_;\n  };\n  _proto.toJSON = function toJSON() {\n    return this.get();\n  };\n  _proto.toString = function toString() {\n    return this.name_ + \"[\" + this.value_ + \"]\";\n  };\n  _proto.valueOf = function valueOf() {\n    return toPrimitive(this.get());\n  };\n  _proto[_Symbol$toPrimitive] = function () {\n    return this.valueOf();\n  };\n  return ObservableValue;\n}(Atom);\nvar isObservableValue = /*#__PURE__*/createInstanceofPredicate(\"ObservableValue\", ObservableValue);\n\nvar _Symbol$toPrimitive$1;\n/**\r\n * A node in the state dependency root that observes other nodes, and can be observed itself.\r\n *\r\n * ComputedValue will remember the result of the computation for the duration of the batch, or\r\n * while being observed.\r\n *\r\n * During this time it will recompute only when one of its direct dependencies changed,\r\n * but only when it is being accessed with `ComputedValue.get()`.\r\n *\r\n * Implementation description:\r\n * 1. First time it's being accessed it will compute and remember result\r\n *    give back remembered result until 2. happens\r\n * 2. First time any deep dependency change, propagate POSSIBLY_STALE to all observers, wait for 3.\r\n * 3. When it's being accessed, recompute if any shallow dependency changed.\r\n *    if result changed: propagate STALE to all observers, that were POSSIBLY_STALE from the last step.\r\n *    go to step 2. either way\r\n *\r\n * If at any point it's outside batch and it isn't observed: reset everything and go to 1.\r\n */\n_Symbol$toPrimitive$1 = Symbol.toPrimitive;\nvar ComputedValue = /*#__PURE__*/function () {\n  // nodes we are looking at. Our value depends on these nodes\n  // during tracking it's an array with new observed observers\n\n  // to check for cycles\n\n  // N.B: unminified as it is used by MST\n\n  /**\r\n   * Create a new computed value based on a function expression.\r\n   *\r\n   * The `name` property is for debug purposes only.\r\n   *\r\n   * The `equals` property specifies the comparer function to use to determine if a newly produced\r\n   * value differs from the previous value. Two comparers are provided in the library; `defaultComparer`\r\n   * compares based on identity comparison (===), and `structuralComparer` deeply compares the structure.\r\n   * Structural comparison can be convenient if you always produce a new aggregated object and\r\n   * don't want to notify observers if it is structurally the same.\r\n   * This is useful for working with vectors, mouse coordinates etc.\r\n   */\n  function ComputedValue(options) {\n    this.dependenciesState_ = IDerivationState_.NOT_TRACKING_;\n    this.observing_ = [];\n    this.newObserving_ = null;\n    this.isBeingObserved_ = false;\n    this.isPendingUnobservation_ = false;\n    this.observers_ = new Set();\n    this.diffValue_ = 0;\n    this.runId_ = 0;\n    this.lastAccessedBy_ = 0;\n    this.lowestObserverState_ = IDerivationState_.UP_TO_DATE_;\n    this.unboundDepsCount_ = 0;\n    this.value_ = new CaughtException(null);\n    this.name_ = void 0;\n    this.triggeredBy_ = void 0;\n    this.isComputing_ = false;\n    this.isRunningSetter_ = false;\n    this.derivation = void 0;\n    this.setter_ = void 0;\n    this.isTracing_ = TraceMode.NONE;\n    this.scope_ = void 0;\n    this.equals_ = void 0;\n    this.requiresReaction_ = void 0;\n    this.keepAlive_ = void 0;\n    this.onBOL = void 0;\n    this.onBUOL = void 0;\n    if (!options.get) {\n      die(31);\n    }\n    this.derivation = options.get;\n    this.name_ = options.name || (process.env.NODE_ENV !== \"production\" ? \"ComputedValue@\" + getNextId() : \"ComputedValue\");\n    if (options.set) {\n      this.setter_ = createAction(process.env.NODE_ENV !== \"production\" ? this.name_ + \"-setter\" : \"ComputedValue-setter\", options.set);\n    }\n    this.equals_ = options.equals || (options.compareStructural || options.struct ? comparer.structural : comparer[\"default\"]);\n    this.scope_ = options.context;\n    this.requiresReaction_ = options.requiresReaction;\n    this.keepAlive_ = !!options.keepAlive;\n  }\n  var _proto = ComputedValue.prototype;\n  _proto.onBecomeStale_ = function onBecomeStale_() {\n    propagateMaybeChanged(this);\n  };\n  _proto.onBO = function onBO() {\n    if (this.onBOL) {\n      this.onBOL.forEach(function (listener) {\n        return listener();\n      });\n    }\n  };\n  _proto.onBUO = function onBUO() {\n    if (this.onBUOL) {\n      this.onBUOL.forEach(function (listener) {\n        return listener();\n      });\n    }\n  }\n  /**\r\n   * Returns the current value of this computed value.\r\n   * Will evaluate its computation first if needed.\r\n   */;\n  _proto.get = function get() {\n    if (this.isComputing_) {\n      die(32, this.name_, this.derivation);\n    }\n    if (globalState.inBatch === 0 &&\n    // !globalState.trackingDerivatpion &&\n    this.observers_.size === 0 && !this.keepAlive_) {\n      if (shouldCompute(this)) {\n        this.warnAboutUntrackedRead_();\n        startBatch(); // See perf test 'computed memoization'\n        this.value_ = this.computeValue_(false);\n        endBatch();\n      }\n    } else {\n      reportObserved(this);\n      if (shouldCompute(this)) {\n        var prevTrackingContext = globalState.trackingContext;\n        if (this.keepAlive_ && !prevTrackingContext) {\n          globalState.trackingContext = this;\n        }\n        if (this.trackAndCompute()) {\n          propagateChangeConfirmed(this);\n        }\n        globalState.trackingContext = prevTrackingContext;\n      }\n    }\n    var result = this.value_;\n    if (isCaughtException(result)) {\n      throw result.cause;\n    }\n    return result;\n  };\n  _proto.set = function set(value) {\n    if (this.setter_) {\n      if (this.isRunningSetter_) {\n        die(33, this.name_);\n      }\n      this.isRunningSetter_ = true;\n      try {\n        this.setter_.call(this.scope_, value);\n      } finally {\n        this.isRunningSetter_ = false;\n      }\n    } else {\n      die(34, this.name_);\n    }\n  };\n  _proto.trackAndCompute = function trackAndCompute() {\n    // N.B: unminified as it is used by MST\n    var oldValue = this.value_;\n    var wasSuspended = /* see #1208 */this.dependenciesState_ === IDerivationState_.NOT_TRACKING_;\n    var newValue = this.computeValue_(true);\n    var changed = wasSuspended || isCaughtException(oldValue) || isCaughtException(newValue) || !this.equals_(oldValue, newValue);\n    if (changed) {\n      this.value_ = newValue;\n      if (process.env.NODE_ENV !== \"production\" && isSpyEnabled()) {\n        spyReport({\n          observableKind: \"computed\",\n          debugObjectName: this.name_,\n          object: this.scope_,\n          type: \"update\",\n          oldValue: oldValue,\n          newValue: newValue\n        });\n      }\n    }\n    return changed;\n  };\n  _proto.computeValue_ = function computeValue_(track) {\n    this.isComputing_ = true;\n    // don't allow state changes during computation\n    var prev = allowStateChangesStart(false);\n    var res;\n    if (track) {\n      res = trackDerivedFunction(this, this.derivation, this.scope_);\n    } else {\n      if (globalState.disableErrorBoundaries === true) {\n        res = this.derivation.call(this.scope_);\n      } else {\n        try {\n          res = this.derivation.call(this.scope_);\n        } catch (e) {\n          res = new CaughtException(e);\n        }\n      }\n    }\n    allowStateChangesEnd(prev);\n    this.isComputing_ = false;\n    return res;\n  };\n  _proto.suspend_ = function suspend_() {\n    if (!this.keepAlive_) {\n      clearObserving(this);\n      this.value_ = undefined; // don't hold on to computed value!\n      if (process.env.NODE_ENV !== \"production\" && this.isTracing_ !== TraceMode.NONE) {\n        console.log(\"[mobx.trace] Computed value '\" + this.name_ + \"' was suspended and it will recompute on the next access.\");\n      }\n    }\n  };\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    var _this = this;\n    var firstTime = true;\n    var prevValue = undefined;\n    return autorun(function () {\n      // TODO: why is this in a different place than the spyReport() function? in all other observables it's called in the same place\n      var newValue = _this.get();\n      if (!firstTime || fireImmediately) {\n        var prevU = untrackedStart();\n        listener({\n          observableKind: \"computed\",\n          debugObjectName: _this.name_,\n          type: UPDATE,\n          object: _this,\n          newValue: newValue,\n          oldValue: prevValue\n        });\n        untrackedEnd(prevU);\n      }\n      firstTime = false;\n      prevValue = newValue;\n    });\n  };\n  _proto.warnAboutUntrackedRead_ = function warnAboutUntrackedRead_() {\n    if (!(process.env.NODE_ENV !== \"production\")) {\n      return;\n    }\n    if (this.isTracing_ !== TraceMode.NONE) {\n      console.log(\"[mobx.trace] Computed value '\" + this.name_ + \"' is being read outside a reactive context. Doing a full recompute.\");\n    }\n    if (typeof this.requiresReaction_ === \"boolean\" ? this.requiresReaction_ : globalState.computedRequiresReaction) {\n      console.warn(\"[mobx] Computed value '\" + this.name_ + \"' is being read outside a reactive context. Doing a full recompute.\");\n    }\n  };\n  _proto.toString = function toString() {\n    return this.name_ + \"[\" + this.derivation.toString() + \"]\";\n  };\n  _proto.valueOf = function valueOf() {\n    return toPrimitive(this.get());\n  };\n  _proto[_Symbol$toPrimitive$1] = function () {\n    return this.valueOf();\n  };\n  return ComputedValue;\n}();\nvar isComputedValue = /*#__PURE__*/createInstanceofPredicate(\"ComputedValue\", ComputedValue);\n\nvar IDerivationState_;\n(function (IDerivationState_) {\n  // before being run or (outside batch and not being observed)\n  // at this point derivation is not holding any data about dependency tree\n  IDerivationState_[IDerivationState_[\"NOT_TRACKING_\"] = -1] = \"NOT_TRACKING_\";\n  // no shallow dependency changed since last computation\n  // won't recalculate derivation\n  // this is what makes mobx fast\n  IDerivationState_[IDerivationState_[\"UP_TO_DATE_\"] = 0] = \"UP_TO_DATE_\";\n  // some deep dependency changed, but don't know if shallow dependency changed\n  // will require to check first if UP_TO_DATE or POSSIBLY_STALE\n  // currently only ComputedValue will propagate POSSIBLY_STALE\n  //\n  // having this state is second big optimization:\n  // don't have to recompute on every dependency change, but only when it's needed\n  IDerivationState_[IDerivationState_[\"POSSIBLY_STALE_\"] = 1] = \"POSSIBLY_STALE_\";\n  // A shallow dependency has changed since last computation and the derivation\n  // will need to recompute when it's needed next.\n  IDerivationState_[IDerivationState_[\"STALE_\"] = 2] = \"STALE_\";\n})(IDerivationState_ || (IDerivationState_ = {}));\nvar TraceMode;\n(function (TraceMode) {\n  TraceMode[TraceMode[\"NONE\"] = 0] = \"NONE\";\n  TraceMode[TraceMode[\"LOG\"] = 1] = \"LOG\";\n  TraceMode[TraceMode[\"BREAK\"] = 2] = \"BREAK\";\n})(TraceMode || (TraceMode = {}));\nvar CaughtException = function CaughtException(cause) {\n  this.cause = void 0;\n  this.cause = cause;\n  // Empty\n};\n\nfunction isCaughtException(e) {\n  return e instanceof CaughtException;\n}\n/**\r\n * Finds out whether any dependency of the derivation has actually changed.\r\n * If dependenciesState is 1 then it will recalculate dependencies,\r\n * if any dependency changed it will propagate it by changing dependenciesState to 2.\r\n *\r\n * By iterating over the dependencies in the same order that they were reported and\r\n * stopping on the first change, all the recalculations are only called for ComputedValues\r\n * that will be tracked by derivation. That is because we assume that if the first x\r\n * dependencies of the derivation doesn't change then the derivation should run the same way\r\n * up until accessing x-th dependency.\r\n */\nfunction shouldCompute(derivation) {\n  switch (derivation.dependenciesState_) {\n    case IDerivationState_.UP_TO_DATE_:\n      return false;\n    case IDerivationState_.NOT_TRACKING_:\n    case IDerivationState_.STALE_:\n      return true;\n    case IDerivationState_.POSSIBLY_STALE_:\n      {\n        // state propagation can occur outside of action/reactive context #2195\n        var prevAllowStateReads = allowStateReadsStart(true);\n        var prevUntracked = untrackedStart(); // no need for those computeds to be reported, they will be picked up in trackDerivedFunction.\n        var obs = derivation.observing_,\n          l = obs.length;\n        for (var i = 0; i < l; i++) {\n          var obj = obs[i];\n          if (isComputedValue(obj)) {\n            if (globalState.disableErrorBoundaries) {\n              obj.get();\n            } else {\n              try {\n                obj.get();\n              } catch (e) {\n                // we are not interested in the value *or* exception at this moment, but if there is one, notify all\n                untrackedEnd(prevUntracked);\n                allowStateReadsEnd(prevAllowStateReads);\n                return true;\n              }\n            }\n            // if ComputedValue `obj` actually changed it will be computed and propagated to its observers.\n            // and `derivation` is an observer of `obj`\n            // invariantShouldCompute(derivation)\n            if (derivation.dependenciesState_ === IDerivationState_.STALE_) {\n              untrackedEnd(prevUntracked);\n              allowStateReadsEnd(prevAllowStateReads);\n              return true;\n            }\n          }\n        }\n        changeDependenciesStateTo0(derivation);\n        untrackedEnd(prevUntracked);\n        allowStateReadsEnd(prevAllowStateReads);\n        return false;\n      }\n  }\n}\nfunction isComputingDerivation() {\n  return globalState.trackingDerivation !== null; // filter out actions inside computations\n}\n\nfunction checkIfStateModificationsAreAllowed(atom) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  }\n  var hasObservers = atom.observers_.size > 0;\n  // Should not be possible to change observed state outside strict mode, except during initialization, see #563\n  if (!globalState.allowStateChanges && (hasObservers || globalState.enforceActions === \"always\")) {\n    console.warn(\"[MobX] \" + (globalState.enforceActions ? \"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: \" : \"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: \") + atom.name_);\n  }\n}\nfunction checkIfStateReadsAreAllowed(observable) {\n  if (process.env.NODE_ENV !== \"production\" && !globalState.allowStateReads && globalState.observableRequiresReaction) {\n    console.warn(\"[mobx] Observable '\" + observable.name_ + \"' being read outside a reactive context.\");\n  }\n}\n/**\r\n * Executes the provided function `f` and tracks which observables are being accessed.\r\n * The tracking information is stored on the `derivation` object and the derivation is registered\r\n * as observer of any of the accessed observables.\r\n */\nfunction trackDerivedFunction(derivation, f, context) {\n  var prevAllowStateReads = allowStateReadsStart(true);\n  // pre allocate array allocation + room for variation in deps\n  // array will be trimmed by bindDependencies\n  changeDependenciesStateTo0(derivation);\n  derivation.newObserving_ = new Array(derivation.observing_.length + 100);\n  derivation.unboundDepsCount_ = 0;\n  derivation.runId_ = ++globalState.runId;\n  var prevTracking = globalState.trackingDerivation;\n  globalState.trackingDerivation = derivation;\n  globalState.inBatch++;\n  var result;\n  if (globalState.disableErrorBoundaries === true) {\n    result = f.call(context);\n  } else {\n    try {\n      result = f.call(context);\n    } catch (e) {\n      result = new CaughtException(e);\n    }\n  }\n  globalState.inBatch--;\n  globalState.trackingDerivation = prevTracking;\n  bindDependencies(derivation);\n  warnAboutDerivationWithoutDependencies(derivation);\n  allowStateReadsEnd(prevAllowStateReads);\n  return result;\n}\nfunction warnAboutDerivationWithoutDependencies(derivation) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  }\n  if (derivation.observing_.length !== 0) {\n    return;\n  }\n  if (typeof derivation.requiresObservable_ === \"boolean\" ? derivation.requiresObservable_ : globalState.reactionRequiresObservable) {\n    console.warn(\"[mobx] Derivation '\" + derivation.name_ + \"' is created/updated without reading any observable value.\");\n  }\n}\n/**\r\n * diffs newObserving with observing.\r\n * update observing to be newObserving with unique observables\r\n * notify observers that become observed/unobserved\r\n */\nfunction bindDependencies(derivation) {\n  // invariant(derivation.dependenciesState !== IDerivationState.NOT_TRACKING, \"INTERNAL ERROR bindDependencies expects derivation.dependenciesState !== -1\");\n  var prevObserving = derivation.observing_;\n  var observing = derivation.observing_ = derivation.newObserving_;\n  var lowestNewObservingDerivationState = IDerivationState_.UP_TO_DATE_;\n  // Go through all new observables and check diffValue: (this list can contain duplicates):\n  //   0: first occurrence, change to 1 and keep it\n  //   1: extra occurrence, drop it\n  var i0 = 0,\n    l = derivation.unboundDepsCount_;\n  for (var i = 0; i < l; i++) {\n    var dep = observing[i];\n    if (dep.diffValue_ === 0) {\n      dep.diffValue_ = 1;\n      if (i0 !== i) {\n        observing[i0] = dep;\n      }\n      i0++;\n    }\n    // Upcast is 'safe' here, because if dep is IObservable, `dependenciesState` will be undefined,\n    // not hitting the condition\n    if (dep.dependenciesState_ > lowestNewObservingDerivationState) {\n      lowestNewObservingDerivationState = dep.dependenciesState_;\n    }\n  }\n  observing.length = i0;\n  derivation.newObserving_ = null; // newObserving shouldn't be needed outside tracking (statement moved down to work around FF bug, see #614)\n  // Go through all old observables and check diffValue: (it is unique after last bindDependencies)\n  //   0: it's not in new observables, unobserve it\n  //   1: it keeps being observed, don't want to notify it. change to 0\n  l = prevObserving.length;\n  while (l--) {\n    var _dep = prevObserving[l];\n    if (_dep.diffValue_ === 0) {\n      removeObserver(_dep, derivation);\n    }\n    _dep.diffValue_ = 0;\n  }\n  // Go through all new observables and check diffValue: (now it should be unique)\n  //   0: it was set to 0 in last loop. don't need to do anything.\n  //   1: it wasn't observed, let's observe it. set back to 0\n  while (i0--) {\n    var _dep2 = observing[i0];\n    if (_dep2.diffValue_ === 1) {\n      _dep2.diffValue_ = 0;\n      addObserver(_dep2, derivation);\n    }\n  }\n  // Some new observed derivations may become stale during this derivation computation\n  // so they have had no chance to propagate staleness (#916)\n  if (lowestNewObservingDerivationState !== IDerivationState_.UP_TO_DATE_) {\n    derivation.dependenciesState_ = lowestNewObservingDerivationState;\n    derivation.onBecomeStale_();\n  }\n}\nfunction clearObserving(derivation) {\n  // invariant(globalState.inBatch > 0, \"INTERNAL ERROR clearObserving should be called only inside batch\");\n  var obs = derivation.observing_;\n  derivation.observing_ = [];\n  var i = obs.length;\n  while (i--) {\n    removeObserver(obs[i], derivation);\n  }\n  derivation.dependenciesState_ = IDerivationState_.NOT_TRACKING_;\n}\nfunction untracked(action) {\n  var prev = untrackedStart();\n  try {\n    return action();\n  } finally {\n    untrackedEnd(prev);\n  }\n}\nfunction untrackedStart() {\n  var prev = globalState.trackingDerivation;\n  globalState.trackingDerivation = null;\n  return prev;\n}\nfunction untrackedEnd(prev) {\n  globalState.trackingDerivation = prev;\n}\nfunction allowStateReadsStart(allowStateReads) {\n  var prev = globalState.allowStateReads;\n  globalState.allowStateReads = allowStateReads;\n  return prev;\n}\nfunction allowStateReadsEnd(prev) {\n  globalState.allowStateReads = prev;\n}\n/**\r\n * needed to keep `lowestObserverState` correct. when changing from (2 or 1) to 0\r\n *\r\n */\nfunction changeDependenciesStateTo0(derivation) {\n  if (derivation.dependenciesState_ === IDerivationState_.UP_TO_DATE_) {\n    return;\n  }\n  derivation.dependenciesState_ = IDerivationState_.UP_TO_DATE_;\n  var obs = derivation.observing_;\n  var i = obs.length;\n  while (i--) {\n    obs[i].lowestObserverState_ = IDerivationState_.UP_TO_DATE_;\n  }\n}\n\n/**\r\n * These values will persist if global state is reset\r\n */\nvar persistentKeys = [\"mobxGuid\", \"spyListeners\", \"enforceActions\", \"computedRequiresReaction\", \"reactionRequiresObservable\", \"observableRequiresReaction\", \"allowStateReads\", \"disableErrorBoundaries\", \"runId\", \"UNCHANGED\", \"useProxies\"];\nvar MobXGlobals = function MobXGlobals() {\n  this.version = 6;\n  this.UNCHANGED = {};\n  this.trackingDerivation = null;\n  this.trackingContext = null;\n  this.runId = 0;\n  this.mobxGuid = 0;\n  this.inBatch = 0;\n  this.pendingUnobservations = [];\n  this.pendingReactions = [];\n  this.isRunningReactions = false;\n  this.allowStateChanges = false;\n  this.allowStateReads = true;\n  this.enforceActions = true;\n  this.spyListeners = [];\n  this.globalReactionErrorHandlers = [];\n  this.computedRequiresReaction = false;\n  this.reactionRequiresObservable = false;\n  this.observableRequiresReaction = false;\n  this.disableErrorBoundaries = false;\n  this.suppressReactionErrors = false;\n  this.useProxies = true;\n  this.verifyProxies = false;\n  this.safeDescriptors = true;\n};\nvar canMergeGlobalState = true;\nvar isolateCalled = false;\nvar globalState = /*#__PURE__*/function () {\n  var global = /*#__PURE__*/getGlobal();\n  if (global.__mobxInstanceCount > 0 && !global.__mobxGlobals) {\n    canMergeGlobalState = false;\n  }\n  if (global.__mobxGlobals && global.__mobxGlobals.version !== new MobXGlobals().version) {\n    canMergeGlobalState = false;\n  }\n  if (!canMergeGlobalState) {\n    // Because this is a IIFE we need to let isolateCalled a chance to change\n    // so we run it after the event loop completed at least 1 iteration\n    setTimeout(function () {\n      if (!isolateCalled) {\n        die(35);\n      }\n    }, 1);\n    return new MobXGlobals();\n  } else if (global.__mobxGlobals) {\n    global.__mobxInstanceCount += 1;\n    if (!global.__mobxGlobals.UNCHANGED) {\n      global.__mobxGlobals.UNCHANGED = {};\n    } // make merge backward compatible\n    return global.__mobxGlobals;\n  } else {\n    global.__mobxInstanceCount = 1;\n    return global.__mobxGlobals = /*#__PURE__*/new MobXGlobals();\n  }\n}();\nfunction isolateGlobalState() {\n  if (globalState.pendingReactions.length || globalState.inBatch || globalState.isRunningReactions) {\n    die(36);\n  }\n  isolateCalled = true;\n  if (canMergeGlobalState) {\n    var global = getGlobal();\n    if (--global.__mobxInstanceCount === 0) {\n      global.__mobxGlobals = undefined;\n    }\n    globalState = new MobXGlobals();\n  }\n}\nfunction getGlobalState() {\n  return globalState;\n}\n/**\r\n * For testing purposes only; this will break the internal state of existing observables,\r\n * but can be used to get back at a stable state after throwing errors\r\n */\nfunction resetGlobalState() {\n  var defaultGlobals = new MobXGlobals();\n  for (var key in defaultGlobals) {\n    if (persistentKeys.indexOf(key) === -1) {\n      globalState[key] = defaultGlobals[key];\n    }\n  }\n  globalState.allowStateChanges = !globalState.enforceActions;\n}\n\nfunction hasObservers(observable) {\n  return observable.observers_ && observable.observers_.size > 0;\n}\nfunction getObservers(observable) {\n  return observable.observers_;\n}\n// function invariantObservers(observable: IObservable) {\n//     const list = observable.observers\n//     const map = observable.observersIndexes\n//     const l = list.length\n//     for (let i = 0; i < l; i++) {\n//         const id = list[i].__mapid\n//         if (i) {\n//             invariant(map[id] === i, \"INTERNAL ERROR maps derivation.__mapid to index in list\") // for performance\n//         } else {\n//             invariant(!(id in map), \"INTERNAL ERROR observer on index 0 shouldn't be held in map.\") // for performance\n//         }\n//     }\n//     invariant(\n//         list.length === 0 || Object.keys(map).length === list.length - 1,\n//         \"INTERNAL ERROR there is no junk in map\"\n//     )\n// }\nfunction addObserver(observable, node) {\n  // invariant(node.dependenciesState !== -1, \"INTERNAL ERROR, can add only dependenciesState !== -1\");\n  // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR add already added node\");\n  // invariantObservers(observable);\n  observable.observers_.add(node);\n  if (observable.lowestObserverState_ > node.dependenciesState_) {\n    observable.lowestObserverState_ = node.dependenciesState_;\n  }\n  // invariantObservers(observable);\n  // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR didn't add node\");\n}\n\nfunction removeObserver(observable, node) {\n  // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n  // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR remove already removed node\");\n  // invariantObservers(observable);\n  observable.observers_[\"delete\"](node);\n  if (observable.observers_.size === 0) {\n    // deleting last observer\n    queueForUnobservation(observable);\n  }\n  // invariantObservers(observable);\n  // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR remove already removed node2\");\n}\n\nfunction queueForUnobservation(observable) {\n  if (observable.isPendingUnobservation_ === false) {\n    // invariant(observable._observers.length === 0, \"INTERNAL ERROR, should only queue for unobservation unobserved observables\");\n    observable.isPendingUnobservation_ = true;\n    globalState.pendingUnobservations.push(observable);\n  }\n}\n/**\r\n * Batch starts a transaction, at least for purposes of memoizing ComputedValues when nothing else does.\r\n * During a batch `onBecomeUnobserved` will be called at most once per observable.\r\n * Avoids unnecessary recalculations.\r\n */\nfunction startBatch() {\n  globalState.inBatch++;\n}\nfunction endBatch() {\n  if (--globalState.inBatch === 0) {\n    runReactions();\n    // the batch is actually about to finish, all unobserving should happen here.\n    var list = globalState.pendingUnobservations;\n    for (var i = 0; i < list.length; i++) {\n      var observable = list[i];\n      observable.isPendingUnobservation_ = false;\n      if (observable.observers_.size === 0) {\n        if (observable.isBeingObserved_) {\n          // if this observable had reactive observers, trigger the hooks\n          observable.isBeingObserved_ = false;\n          observable.onBUO();\n        }\n        if (observable instanceof ComputedValue) {\n          // computed values are automatically teared down when the last observer leaves\n          // this process happens recursively, this computed might be the last observabe of another, etc..\n          observable.suspend_();\n        }\n      }\n    }\n    globalState.pendingUnobservations = [];\n  }\n}\nfunction reportObserved(observable) {\n  checkIfStateReadsAreAllowed(observable);\n  var derivation = globalState.trackingDerivation;\n  if (derivation !== null) {\n    /**\r\n     * Simple optimization, give each derivation run an unique id (runId)\r\n     * Check if last time this observable was accessed the same runId is used\r\n     * if this is the case, the relation is already known\r\n     */\n    if (derivation.runId_ !== observable.lastAccessedBy_) {\n      observable.lastAccessedBy_ = derivation.runId_;\n      // Tried storing newObserving, or observing, or both as Set, but performance didn't come close...\n      derivation.newObserving_[derivation.unboundDepsCount_++] = observable;\n      if (!observable.isBeingObserved_ && globalState.trackingContext) {\n        observable.isBeingObserved_ = true;\n        observable.onBO();\n      }\n    }\n    return observable.isBeingObserved_;\n  } else if (observable.observers_.size === 0 && globalState.inBatch > 0) {\n    queueForUnobservation(observable);\n  }\n  return false;\n}\n// function invariantLOS(observable: IObservable, msg: string) {\n//     // it's expensive so better not run it in produciton. but temporarily helpful for testing\n//     const min = getObservers(observable).reduce((a, b) => Math.min(a, b.dependenciesState), 2)\n//     if (min >= observable.lowestObserverState) return // <- the only assumption about `lowestObserverState`\n//     throw new Error(\n//         \"lowestObserverState is wrong for \" +\n//             msg +\n//             \" because \" +\n//             min +\n//             \" < \" +\n//             observable.lowestObserverState\n//     )\n// }\n/**\r\n * NOTE: current propagation mechanism will in case of self reruning autoruns behave unexpectedly\r\n * It will propagate changes to observers from previous run\r\n * It's hard or maybe impossible (with reasonable perf) to get it right with current approach\r\n * Hopefully self reruning autoruns aren't a feature people should depend on\r\n * Also most basic use cases should be ok\r\n */\n// Called by Atom when its value changes\nfunction propagateChanged(observable) {\n  // invariantLOS(observable, \"changed start\");\n  if (observable.lowestObserverState_ === IDerivationState_.STALE_) {\n    return;\n  }\n  observable.lowestObserverState_ = IDerivationState_.STALE_;\n  // Ideally we use for..of here, but the downcompiled version is really slow...\n  observable.observers_.forEach(function (d) {\n    if (d.dependenciesState_ === IDerivationState_.UP_TO_DATE_) {\n      if (process.env.NODE_ENV !== \"production\" && d.isTracing_ !== TraceMode.NONE) {\n        logTraceInfo(d, observable);\n      }\n      d.onBecomeStale_();\n    }\n    d.dependenciesState_ = IDerivationState_.STALE_;\n  });\n  // invariantLOS(observable, \"changed end\");\n}\n// Called by ComputedValue when it recalculate and its value changed\nfunction propagateChangeConfirmed(observable) {\n  // invariantLOS(observable, \"confirmed start\");\n  if (observable.lowestObserverState_ === IDerivationState_.STALE_) {\n    return;\n  }\n  observable.lowestObserverState_ = IDerivationState_.STALE_;\n  observable.observers_.forEach(function (d) {\n    if (d.dependenciesState_ === IDerivationState_.POSSIBLY_STALE_) {\n      d.dependenciesState_ = IDerivationState_.STALE_;\n      if (process.env.NODE_ENV !== \"production\" && d.isTracing_ !== TraceMode.NONE) {\n        logTraceInfo(d, observable);\n      }\n    } else if (d.dependenciesState_ === IDerivationState_.UP_TO_DATE_ // this happens during computing of `d`, just keep lowestObserverState up to date.\n    ) {\n      observable.lowestObserverState_ = IDerivationState_.UP_TO_DATE_;\n    }\n  });\n  // invariantLOS(observable, \"confirmed end\");\n}\n// Used by computed when its dependency changed, but we don't wan't to immediately recompute.\nfunction propagateMaybeChanged(observable) {\n  // invariantLOS(observable, \"maybe start\");\n  if (observable.lowestObserverState_ !== IDerivationState_.UP_TO_DATE_) {\n    return;\n  }\n  observable.lowestObserverState_ = IDerivationState_.POSSIBLY_STALE_;\n  observable.observers_.forEach(function (d) {\n    if (d.dependenciesState_ === IDerivationState_.UP_TO_DATE_) {\n      d.dependenciesState_ = IDerivationState_.POSSIBLY_STALE_;\n      d.onBecomeStale_();\n    }\n  });\n  // invariantLOS(observable, \"maybe end\");\n}\n\nfunction logTraceInfo(derivation, observable) {\n  console.log(\"[mobx.trace] '\" + derivation.name_ + \"' is invalidated due to a change in: '\" + observable.name_ + \"'\");\n  if (derivation.isTracing_ === TraceMode.BREAK) {\n    var lines = [];\n    printDepTree(getDependencyTree(derivation), lines, 1);\n    // prettier-ignore\n    new Function(\"debugger;\\n/*\\nTracing '\" + derivation.name_ + \"'\\n\\nYou are entering this break point because derivation '\" + derivation.name_ + \"' is being traced and '\" + observable.name_ + \"' is now forcing it to update.\\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\\n\\n\" + (derivation instanceof ComputedValue ? derivation.derivation.toString().replace(/[*]\\//g, \"/\") : \"\") + \"\\n\\nThe dependencies for this derivation are:\\n\\n\" + lines.join(\"\\n\") + \"\\n*/\\n    \")();\n  }\n}\nfunction printDepTree(tree, lines, depth) {\n  if (lines.length >= 1000) {\n    lines.push(\"(and many more)\");\n    return;\n  }\n  lines.push(\"\" + \"\\t\".repeat(depth - 1) + tree.name);\n  if (tree.dependencies) {\n    tree.dependencies.forEach(function (child) {\n      return printDepTree(child, lines, depth + 1);\n    });\n  }\n}\n\nvar Reaction = /*#__PURE__*/function () {\n  // nodes we are looking at. Our value depends on these nodes\n\n  function Reaction(name_, onInvalidate_, errorHandler_, requiresObservable_) {\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"Reaction@\" + getNextId() : \"Reaction\";\n    }\n    this.name_ = void 0;\n    this.onInvalidate_ = void 0;\n    this.errorHandler_ = void 0;\n    this.requiresObservable_ = void 0;\n    this.observing_ = [];\n    this.newObserving_ = [];\n    this.dependenciesState_ = IDerivationState_.NOT_TRACKING_;\n    this.diffValue_ = 0;\n    this.runId_ = 0;\n    this.unboundDepsCount_ = 0;\n    this.isDisposed_ = false;\n    this.isScheduled_ = false;\n    this.isTrackPending_ = false;\n    this.isRunning_ = false;\n    this.isTracing_ = TraceMode.NONE;\n    this.name_ = name_;\n    this.onInvalidate_ = onInvalidate_;\n    this.errorHandler_ = errorHandler_;\n    this.requiresObservable_ = requiresObservable_;\n  }\n  var _proto = Reaction.prototype;\n  _proto.onBecomeStale_ = function onBecomeStale_() {\n    this.schedule_();\n  };\n  _proto.schedule_ = function schedule_() {\n    if (!this.isScheduled_) {\n      this.isScheduled_ = true;\n      globalState.pendingReactions.push(this);\n      runReactions();\n    }\n  };\n  _proto.isScheduled = function isScheduled() {\n    return this.isScheduled_;\n  }\n  /**\r\n   * internal, use schedule() if you intend to kick off a reaction\r\n   */;\n  _proto.runReaction_ = function runReaction_() {\n    if (!this.isDisposed_) {\n      startBatch();\n      this.isScheduled_ = false;\n      var prev = globalState.trackingContext;\n      globalState.trackingContext = this;\n      if (shouldCompute(this)) {\n        this.isTrackPending_ = true;\n        try {\n          this.onInvalidate_();\n          if (process.env.NODE_ENV !== \"production\" && this.isTrackPending_ && isSpyEnabled()) {\n            // onInvalidate didn't trigger track right away..\n            spyReport({\n              name: this.name_,\n              type: \"scheduled-reaction\"\n            });\n          }\n        } catch (e) {\n          this.reportExceptionInDerivation_(e);\n        }\n      }\n      globalState.trackingContext = prev;\n      endBatch();\n    }\n  };\n  _proto.track = function track(fn) {\n    if (this.isDisposed_) {\n      return;\n      // console.warn(\"Reaction already disposed\") // Note: Not a warning / error in mobx 4 either\n    }\n\n    startBatch();\n    var notify = isSpyEnabled();\n    var startTime;\n    if (process.env.NODE_ENV !== \"production\" && notify) {\n      startTime = Date.now();\n      spyReportStart({\n        name: this.name_,\n        type: \"reaction\"\n      });\n    }\n    this.isRunning_ = true;\n    var prevReaction = globalState.trackingContext; // reactions could create reactions...\n    globalState.trackingContext = this;\n    var result = trackDerivedFunction(this, fn, undefined);\n    globalState.trackingContext = prevReaction;\n    this.isRunning_ = false;\n    this.isTrackPending_ = false;\n    if (this.isDisposed_) {\n      // disposed during last run. Clean up everything that was bound after the dispose call.\n      clearObserving(this);\n    }\n    if (isCaughtException(result)) {\n      this.reportExceptionInDerivation_(result.cause);\n    }\n    if (process.env.NODE_ENV !== \"production\" && notify) {\n      spyReportEnd({\n        time: Date.now() - startTime\n      });\n    }\n    endBatch();\n  };\n  _proto.reportExceptionInDerivation_ = function reportExceptionInDerivation_(error) {\n    var _this = this;\n    if (this.errorHandler_) {\n      this.errorHandler_(error, this);\n      return;\n    }\n    if (globalState.disableErrorBoundaries) {\n      throw error;\n    }\n    var message = process.env.NODE_ENV !== \"production\" ? \"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\" + this + \"'\" : \"[mobx] uncaught error in '\" + this + \"'\";\n    if (!globalState.suppressReactionErrors) {\n      console.error(message, error);\n      /** If debugging brought you here, please, read the above message :-). Tnx! */\n    } else if (process.env.NODE_ENV !== \"production\") {\n      console.warn(\"[mobx] (error in reaction '\" + this.name_ + \"' suppressed, fix error of causing action below)\");\n    } // prettier-ignore\n    if (process.env.NODE_ENV !== \"production\" && isSpyEnabled()) {\n      spyReport({\n        type: \"error\",\n        name: this.name_,\n        message: message,\n        error: \"\" + error\n      });\n    }\n    globalState.globalReactionErrorHandlers.forEach(function (f) {\n      return f(error, _this);\n    });\n  };\n  _proto.dispose = function dispose() {\n    if (!this.isDisposed_) {\n      this.isDisposed_ = true;\n      if (!this.isRunning_) {\n        // if disposed while running, clean up later. Maybe not optimal, but rare case\n        startBatch();\n        clearObserving(this);\n        endBatch();\n      }\n    }\n  };\n  _proto.getDisposer_ = function getDisposer_() {\n    var r = this.dispose.bind(this);\n    r[$mobx] = this;\n    return r;\n  };\n  _proto.toString = function toString() {\n    return \"Reaction[\" + this.name_ + \"]\";\n  };\n  _proto.trace = function trace$1(enterBreakPoint) {\n    if (enterBreakPoint === void 0) {\n      enterBreakPoint = false;\n    }\n    trace(this, enterBreakPoint);\n  };\n  return Reaction;\n}();\nfunction onReactionError(handler) {\n  globalState.globalReactionErrorHandlers.push(handler);\n  return function () {\n    var idx = globalState.globalReactionErrorHandlers.indexOf(handler);\n    if (idx >= 0) {\n      globalState.globalReactionErrorHandlers.splice(idx, 1);\n    }\n  };\n}\n/**\r\n * Magic number alert!\r\n * Defines within how many times a reaction is allowed to re-trigger itself\r\n * until it is assumed that this is gonna be a never ending loop...\r\n */\nvar MAX_REACTION_ITERATIONS = 100;\nvar reactionScheduler = function reactionScheduler(f) {\n  return f();\n};\nfunction runReactions() {\n  // Trampolining, if runReactions are already running, new reactions will be picked up\n  if (globalState.inBatch > 0 || globalState.isRunningReactions) {\n    return;\n  }\n  reactionScheduler(runReactionsHelper);\n}\nfunction runReactionsHelper() {\n  globalState.isRunningReactions = true;\n  var allReactions = globalState.pendingReactions;\n  var iterations = 0;\n  // While running reactions, new reactions might be triggered.\n  // Hence we work with two variables and check whether\n  // we converge to no remaining reactions after a while.\n  while (allReactions.length > 0) {\n    if (++iterations === MAX_REACTION_ITERATIONS) {\n      console.error(process.env.NODE_ENV !== \"production\" ? \"Reaction doesn't converge to a stable state after \" + MAX_REACTION_ITERATIONS + \" iterations.\" + (\" Probably there is a cycle in the reactive function: \" + allReactions[0]) : \"[mobx] cycle in reaction: \" + allReactions[0]);\n      allReactions.splice(0); // clear reactions\n    }\n\n    var remainingReactions = allReactions.splice(0);\n    for (var i = 0, l = remainingReactions.length; i < l; i++) {\n      remainingReactions[i].runReaction_();\n    }\n  }\n  globalState.isRunningReactions = false;\n}\nvar isReaction = /*#__PURE__*/createInstanceofPredicate(\"Reaction\", Reaction);\nfunction setReactionScheduler(fn) {\n  var baseScheduler = reactionScheduler;\n  reactionScheduler = function reactionScheduler(f) {\n    return fn(function () {\n      return baseScheduler(f);\n    });\n  };\n}\n\nfunction isSpyEnabled() {\n  return process.env.NODE_ENV !== \"production\" && !!globalState.spyListeners.length;\n}\nfunction spyReport(event) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  } // dead code elimination can do the rest\n  if (!globalState.spyListeners.length) {\n    return;\n  }\n  var listeners = globalState.spyListeners;\n  for (var i = 0, l = listeners.length; i < l; i++) {\n    listeners[i](event);\n  }\n}\nfunction spyReportStart(event) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  }\n  var change = _extends({}, event, {\n    spyReportStart: true\n  });\n  spyReport(change);\n}\nvar END_EVENT = {\n  type: \"report-end\",\n  spyReportEnd: true\n};\nfunction spyReportEnd(change) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    return;\n  }\n  if (change) {\n    spyReport(_extends({}, change, {\n      type: \"report-end\",\n      spyReportEnd: true\n    }));\n  } else {\n    spyReport(END_EVENT);\n  }\n}\nfunction spy(listener) {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    console.warn(\"[mobx.spy] Is a no-op in production builds\");\n    return function () {};\n  } else {\n    globalState.spyListeners.push(listener);\n    return once(function () {\n      globalState.spyListeners = globalState.spyListeners.filter(function (l) {\n        return l !== listener;\n      });\n    });\n  }\n}\n\nvar ACTION = \"action\";\nvar ACTION_BOUND = \"action.bound\";\nvar AUTOACTION = \"autoAction\";\nvar AUTOACTION_BOUND = \"autoAction.bound\";\nvar DEFAULT_ACTION_NAME = \"<unnamed action>\";\nvar actionAnnotation = /*#__PURE__*/createActionAnnotation(ACTION);\nvar actionBoundAnnotation = /*#__PURE__*/createActionAnnotation(ACTION_BOUND, {\n  bound: true\n});\nvar autoActionAnnotation = /*#__PURE__*/createActionAnnotation(AUTOACTION, {\n  autoAction: true\n});\nvar autoActionBoundAnnotation = /*#__PURE__*/createActionAnnotation(AUTOACTION_BOUND, {\n  autoAction: true,\n  bound: true\n});\nfunction createActionFactory(autoAction) {\n  var res = function action(arg1, arg2) {\n    // action(fn() {})\n    if (isFunction(arg1)) {\n      return createAction(arg1.name || DEFAULT_ACTION_NAME, arg1, autoAction);\n    }\n    // action(\"name\", fn() {})\n    if (isFunction(arg2)) {\n      return createAction(arg1, arg2, autoAction);\n    }\n    // @action\n    if (isStringish(arg2)) {\n      return storeAnnotation(arg1, arg2, autoAction ? autoActionAnnotation : actionAnnotation);\n    }\n    // action(\"name\") & @action(\"name\")\n    if (isStringish(arg1)) {\n      return createDecoratorAnnotation(createActionAnnotation(autoAction ? AUTOACTION : ACTION, {\n        name: arg1,\n        autoAction: autoAction\n      }));\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      die(\"Invalid arguments for `action`\");\n    }\n  };\n  return res;\n}\nvar action = /*#__PURE__*/createActionFactory(false);\nObject.assign(action, actionAnnotation);\nvar autoAction = /*#__PURE__*/createActionFactory(true);\nObject.assign(autoAction, autoActionAnnotation);\naction.bound = /*#__PURE__*/createDecoratorAnnotation(actionBoundAnnotation);\nautoAction.bound = /*#__PURE__*/createDecoratorAnnotation(autoActionBoundAnnotation);\nfunction runInAction(fn) {\n  return executeAction(fn.name || DEFAULT_ACTION_NAME, false, fn, this, undefined);\n}\nfunction isAction(thing) {\n  return isFunction(thing) && thing.isMobxAction === true;\n}\n\n/**\r\n * Creates a named reactive view and keeps it alive, so that the view is always\r\n * updated if one of the dependencies changes, even when the view is not further used by something else.\r\n * @param view The reactive view\r\n * @returns disposer function, which can be used to stop the view from being updated in the future.\r\n */\nfunction autorun(view, opts) {\n  var _opts$name, _opts;\n  if (opts === void 0) {\n    opts = EMPTY_OBJECT;\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isFunction(view)) {\n      die(\"Autorun expects a function as first argument\");\n    }\n    if (isAction(view)) {\n      die(\"Autorun does not accept actions since actions are untrackable\");\n    }\n  }\n  var name = (_opts$name = (_opts = opts) == null ? void 0 : _opts.name) != null ? _opts$name : process.env.NODE_ENV !== \"production\" ? view.name || \"Autorun@\" + getNextId() : \"Autorun\";\n  var runSync = !opts.scheduler && !opts.delay;\n  var reaction;\n  if (runSync) {\n    // normal autorun\n    reaction = new Reaction(name, function () {\n      this.track(reactionRunner);\n    }, opts.onError, opts.requiresObservable);\n  } else {\n    var scheduler = createSchedulerFromOptions(opts);\n    // debounced autorun\n    var isScheduled = false;\n    reaction = new Reaction(name, function () {\n      if (!isScheduled) {\n        isScheduled = true;\n        scheduler(function () {\n          isScheduled = false;\n          if (!reaction.isDisposed_) {\n            reaction.track(reactionRunner);\n          }\n        });\n      }\n    }, opts.onError, opts.requiresObservable);\n  }\n  function reactionRunner() {\n    view(reaction);\n  }\n  reaction.schedule_();\n  return reaction.getDisposer_();\n}\nvar run = function run(f) {\n  return f();\n};\nfunction createSchedulerFromOptions(opts) {\n  return opts.scheduler ? opts.scheduler : opts.delay ? function (f) {\n    return setTimeout(f, opts.delay);\n  } : run;\n}\nfunction reaction(expression, effect, opts) {\n  var _opts$name2;\n  if (opts === void 0) {\n    opts = EMPTY_OBJECT;\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isFunction(expression) || !isFunction(effect)) {\n      die(\"First and second argument to reaction should be functions\");\n    }\n    if (!isPlainObject(opts)) {\n      die(\"Third argument of reactions should be an object\");\n    }\n  }\n  var name = (_opts$name2 = opts.name) != null ? _opts$name2 : process.env.NODE_ENV !== \"production\" ? \"Reaction@\" + getNextId() : \"Reaction\";\n  var effectAction = action(name, opts.onError ? wrapErrorHandler(opts.onError, effect) : effect);\n  var runSync = !opts.scheduler && !opts.delay;\n  var scheduler = createSchedulerFromOptions(opts);\n  var firstTime = true;\n  var isScheduled = false;\n  var value;\n  var oldValue;\n  var equals = opts.compareStructural ? comparer.structural : opts.equals || comparer[\"default\"];\n  var r = new Reaction(name, function () {\n    if (firstTime || runSync) {\n      reactionRunner();\n    } else if (!isScheduled) {\n      isScheduled = true;\n      scheduler(reactionRunner);\n    }\n  }, opts.onError, opts.requiresObservable);\n  function reactionRunner() {\n    isScheduled = false;\n    if (r.isDisposed_) {\n      return;\n    }\n    var changed = false;\n    r.track(function () {\n      var nextValue = allowStateChanges(false, function () {\n        return expression(r);\n      });\n      changed = firstTime || !equals(value, nextValue);\n      oldValue = value;\n      value = nextValue;\n    });\n    if (firstTime && opts.fireImmediately) {\n      effectAction(value, oldValue, r);\n    } else if (!firstTime && changed) {\n      effectAction(value, oldValue, r);\n    }\n    firstTime = false;\n  }\n  r.schedule_();\n  return r.getDisposer_();\n}\nfunction wrapErrorHandler(errorHandler, baseFn) {\n  return function () {\n    try {\n      return baseFn.apply(this, arguments);\n    } catch (e) {\n      errorHandler.call(this, e);\n    }\n  };\n}\n\nvar ON_BECOME_OBSERVED = \"onBO\";\nvar ON_BECOME_UNOBSERVED = \"onBUO\";\nfunction onBecomeObserved(thing, arg2, arg3) {\n  return interceptHook(ON_BECOME_OBSERVED, thing, arg2, arg3);\n}\nfunction onBecomeUnobserved(thing, arg2, arg3) {\n  return interceptHook(ON_BECOME_UNOBSERVED, thing, arg2, arg3);\n}\nfunction interceptHook(hook, thing, arg2, arg3) {\n  var atom = typeof arg3 === \"function\" ? getAtom(thing, arg2) : getAtom(thing);\n  var cb = isFunction(arg3) ? arg3 : arg2;\n  var listenersKey = hook + \"L\";\n  if (atom[listenersKey]) {\n    atom[listenersKey].add(cb);\n  } else {\n    atom[listenersKey] = new Set([cb]);\n  }\n  return function () {\n    var hookListeners = atom[listenersKey];\n    if (hookListeners) {\n      hookListeners[\"delete\"](cb);\n      if (hookListeners.size === 0) {\n        delete atom[listenersKey];\n      }\n    }\n  };\n}\n\nvar NEVER = \"never\";\nvar ALWAYS = \"always\";\nvar OBSERVED = \"observed\";\n// const IF_AVAILABLE = \"ifavailable\"\nfunction configure(options) {\n  if (options.isolateGlobalState === true) {\n    isolateGlobalState();\n  }\n  var useProxies = options.useProxies,\n    enforceActions = options.enforceActions;\n  if (useProxies !== undefined) {\n    globalState.useProxies = useProxies === ALWAYS ? true : useProxies === NEVER ? false : typeof Proxy !== \"undefined\";\n  }\n  if (useProxies === \"ifavailable\") {\n    globalState.verifyProxies = true;\n  }\n  if (enforceActions !== undefined) {\n    var ea = enforceActions === ALWAYS ? ALWAYS : enforceActions === OBSERVED;\n    globalState.enforceActions = ea;\n    globalState.allowStateChanges = ea === true || ea === ALWAYS ? false : true;\n  }\n  [\"computedRequiresReaction\", \"reactionRequiresObservable\", \"observableRequiresReaction\", \"disableErrorBoundaries\", \"safeDescriptors\"].forEach(function (key) {\n    if (key in options) {\n      globalState[key] = !!options[key];\n    }\n  });\n  globalState.allowStateReads = !globalState.observableRequiresReaction;\n  if (process.env.NODE_ENV !== \"production\" && globalState.disableErrorBoundaries === true) {\n    console.warn(\"WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled.\");\n  }\n  if (options.reactionScheduler) {\n    setReactionScheduler(options.reactionScheduler);\n  }\n}\n\nfunction extendObservable(target, properties, annotations, options) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (arguments.length > 4) {\n      die(\"'extendObservable' expected 2-4 arguments\");\n    }\n    if (typeof target !== \"object\") {\n      die(\"'extendObservable' expects an object as first argument\");\n    }\n    if (isObservableMap(target)) {\n      die(\"'extendObservable' should not be used on maps, use map.merge instead\");\n    }\n    if (!isPlainObject(properties)) {\n      die(\"'extendObservable' only accepts plain objects as second argument\");\n    }\n    if (isObservable(properties) || isObservable(annotations)) {\n      die(\"Extending an object with another observable (object) is not supported\");\n    }\n  }\n  // Pull descriptors first, so we don't have to deal with props added by administration ($mobx)\n  var descriptors = getOwnPropertyDescriptors(properties);\n  var adm = asObservableObject(target, options)[$mobx];\n  startBatch();\n  try {\n    ownKeys(descriptors).forEach(function (key) {\n      adm.extend_(key, descriptors[key],\n      // must pass \"undefined\" for { key: undefined }\n      !annotations ? true : key in annotations ? annotations[key] : true);\n    });\n  } finally {\n    endBatch();\n  }\n  return target;\n}\n\nfunction getDependencyTree(thing, property) {\n  return nodeToDependencyTree(getAtom(thing, property));\n}\nfunction nodeToDependencyTree(node) {\n  var result = {\n    name: node.name_\n  };\n  if (node.observing_ && node.observing_.length > 0) {\n    result.dependencies = unique(node.observing_).map(nodeToDependencyTree);\n  }\n  return result;\n}\nfunction getObserverTree(thing, property) {\n  return nodeToObserverTree(getAtom(thing, property));\n}\nfunction nodeToObserverTree(node) {\n  var result = {\n    name: node.name_\n  };\n  if (hasObservers(node)) {\n    result.observers = Array.from(getObservers(node)).map(nodeToObserverTree);\n  }\n  return result;\n}\nfunction unique(list) {\n  return Array.from(new Set(list));\n}\n\nvar generatorId = 0;\nfunction FlowCancellationError() {\n  this.message = \"FLOW_CANCELLED\";\n}\nFlowCancellationError.prototype = /*#__PURE__*/Object.create(Error.prototype);\nfunction isFlowCancellationError(error) {\n  return error instanceof FlowCancellationError;\n}\nvar flowAnnotation = /*#__PURE__*/createFlowAnnotation(\"flow\");\nvar flowBoundAnnotation = /*#__PURE__*/createFlowAnnotation(\"flow.bound\", {\n  bound: true\n});\nvar flow = /*#__PURE__*/Object.assign(function flow(arg1, arg2) {\n  // @flow\n  if (isStringish(arg2)) {\n    return storeAnnotation(arg1, arg2, flowAnnotation);\n  }\n  // flow(fn)\n  if (process.env.NODE_ENV !== \"production\" && arguments.length !== 1) {\n    die(\"Flow expects single argument with generator function\");\n  }\n  var generator = arg1;\n  var name = generator.name || \"<unnamed flow>\";\n  // Implementation based on https://github.com/tj/co/blob/master/index.js\n  var res = function res() {\n    var ctx = this;\n    var args = arguments;\n    var runId = ++generatorId;\n    var gen = action(name + \" - runid: \" + runId + \" - init\", generator).apply(ctx, args);\n    var rejector;\n    var pendingPromise = undefined;\n    var promise = new Promise(function (resolve, reject) {\n      var stepId = 0;\n      rejector = reject;\n      function onFulfilled(res) {\n        pendingPromise = undefined;\n        var ret;\n        try {\n          ret = action(name + \" - runid: \" + runId + \" - yield \" + stepId++, gen.next).call(gen, res);\n        } catch (e) {\n          return reject(e);\n        }\n        next(ret);\n      }\n      function onRejected(err) {\n        pendingPromise = undefined;\n        var ret;\n        try {\n          ret = action(name + \" - runid: \" + runId + \" - yield \" + stepId++, gen[\"throw\"]).call(gen, err);\n        } catch (e) {\n          return reject(e);\n        }\n        next(ret);\n      }\n      function next(ret) {\n        if (isFunction(ret == null ? void 0 : ret.then)) {\n          // an async iterator\n          ret.then(next, reject);\n          return;\n        }\n        if (ret.done) {\n          return resolve(ret.value);\n        }\n        pendingPromise = Promise.resolve(ret.value);\n        return pendingPromise.then(onFulfilled, onRejected);\n      }\n      onFulfilled(undefined); // kick off the process\n    });\n\n    promise.cancel = action(name + \" - runid: \" + runId + \" - cancel\", function () {\n      try {\n        if (pendingPromise) {\n          cancelPromise(pendingPromise);\n        }\n        // Finally block can return (or yield) stuff..\n        var _res = gen[\"return\"](undefined);\n        // eat anything that promise would do, it's cancelled!\n        var yieldedPromise = Promise.resolve(_res.value);\n        yieldedPromise.then(noop, noop);\n        cancelPromise(yieldedPromise); // maybe it can be cancelled :)\n        // reject our original promise\n        rejector(new FlowCancellationError());\n      } catch (e) {\n        rejector(e); // there could be a throwing finally block\n      }\n    });\n\n    return promise;\n  };\n  res.isMobXFlow = true;\n  return res;\n}, flowAnnotation);\nflow.bound = /*#__PURE__*/createDecoratorAnnotation(flowBoundAnnotation);\nfunction cancelPromise(promise) {\n  if (isFunction(promise.cancel)) {\n    promise.cancel();\n  }\n}\nfunction flowResult(result) {\n  return result; // just tricking TypeScript :)\n}\n\nfunction isFlow(fn) {\n  return (fn == null ? void 0 : fn.isMobXFlow) === true;\n}\n\nfunction interceptReads(thing, propOrHandler, handler) {\n  var target;\n  if (isObservableMap(thing) || isObservableArray(thing) || isObservableValue(thing)) {\n    target = getAdministration(thing);\n  } else if (isObservableObject(thing)) {\n    if (process.env.NODE_ENV !== \"production\" && !isStringish(propOrHandler)) {\n      return die(\"InterceptReads can only be used with a specific property, not with an object in general\");\n    }\n    target = getAdministration(thing, propOrHandler);\n  } else if (process.env.NODE_ENV !== \"production\") {\n    return die(\"Expected observable map, object or array as first array\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && target.dehancer !== undefined) {\n    return die(\"An intercept reader was already established\");\n  }\n  target.dehancer = typeof propOrHandler === \"function\" ? propOrHandler : handler;\n  return function () {\n    target.dehancer = undefined;\n  };\n}\n\nfunction intercept(thing, propOrHandler, handler) {\n  if (isFunction(handler)) {\n    return interceptProperty(thing, propOrHandler, handler);\n  } else {\n    return interceptInterceptable(thing, propOrHandler);\n  }\n}\nfunction interceptInterceptable(thing, handler) {\n  return getAdministration(thing).intercept_(handler);\n}\nfunction interceptProperty(thing, property, handler) {\n  return getAdministration(thing, property).intercept_(handler);\n}\n\nfunction _isComputed(value, property) {\n  if (property === undefined) {\n    return isComputedValue(value);\n  }\n  if (isObservableObject(value) === false) {\n    return false;\n  }\n  if (!value[$mobx].values_.has(property)) {\n    return false;\n  }\n  var atom = getAtom(value, property);\n  return isComputedValue(atom);\n}\nfunction isComputed(value) {\n  if (process.env.NODE_ENV !== \"production\" && arguments.length > 1) {\n    return die(\"isComputed expects only 1 argument. Use isComputedProp to inspect the observability of a property\");\n  }\n  return _isComputed(value);\n}\nfunction isComputedProp(value, propName) {\n  if (process.env.NODE_ENV !== \"production\" && !isStringish(propName)) {\n    return die(\"isComputed expected a property name as second argument\");\n  }\n  return _isComputed(value, propName);\n}\n\nfunction _isObservable(value, property) {\n  if (!value) {\n    return false;\n  }\n  if (property !== undefined) {\n    if (process.env.NODE_ENV !== \"production\" && (isObservableMap(value) || isObservableArray(value))) {\n      return die(\"isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.\");\n    }\n    if (isObservableObject(value)) {\n      return value[$mobx].values_.has(property);\n    }\n    return false;\n  }\n  // For first check, see #701\n  return isObservableObject(value) || !!value[$mobx] || isAtom(value) || isReaction(value) || isComputedValue(value);\n}\nfunction isObservable(value) {\n  if (process.env.NODE_ENV !== \"production\" && arguments.length !== 1) {\n    die(\"isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property\");\n  }\n  return _isObservable(value);\n}\nfunction isObservableProp(value, propName) {\n  if (process.env.NODE_ENV !== \"production\" && !isStringish(propName)) {\n    return die(\"expected a property name as second argument\");\n  }\n  return _isObservable(value, propName);\n}\n\nfunction keys(obj) {\n  if (isObservableObject(obj)) {\n    return obj[$mobx].keys_();\n  }\n  if (isObservableMap(obj) || isObservableSet(obj)) {\n    return Array.from(obj.keys());\n  }\n  if (isObservableArray(obj)) {\n    return obj.map(function (_, index) {\n      return index;\n    });\n  }\n  die(5);\n}\nfunction values(obj) {\n  if (isObservableObject(obj)) {\n    return keys(obj).map(function (key) {\n      return obj[key];\n    });\n  }\n  if (isObservableMap(obj)) {\n    return keys(obj).map(function (key) {\n      return obj.get(key);\n    });\n  }\n  if (isObservableSet(obj)) {\n    return Array.from(obj.values());\n  }\n  if (isObservableArray(obj)) {\n    return obj.slice();\n  }\n  die(6);\n}\nfunction entries(obj) {\n  if (isObservableObject(obj)) {\n    return keys(obj).map(function (key) {\n      return [key, obj[key]];\n    });\n  }\n  if (isObservableMap(obj)) {\n    return keys(obj).map(function (key) {\n      return [key, obj.get(key)];\n    });\n  }\n  if (isObservableSet(obj)) {\n    return Array.from(obj.entries());\n  }\n  if (isObservableArray(obj)) {\n    return obj.map(function (key, index) {\n      return [index, key];\n    });\n  }\n  die(7);\n}\nfunction set(obj, key, value) {\n  if (arguments.length === 2 && !isObservableSet(obj)) {\n    startBatch();\n    var _values = key;\n    try {\n      for (var _key in _values) {\n        set(obj, _key, _values[_key]);\n      }\n    } finally {\n      endBatch();\n    }\n    return;\n  }\n  if (isObservableObject(obj)) {\n    obj[$mobx].set_(key, value);\n  } else if (isObservableMap(obj)) {\n    obj.set(key, value);\n  } else if (isObservableSet(obj)) {\n    obj.add(key);\n  } else if (isObservableArray(obj)) {\n    if (typeof key !== \"number\") {\n      key = parseInt(key, 10);\n    }\n    if (key < 0) {\n      die(\"Invalid index: '\" + key + \"'\");\n    }\n    startBatch();\n    if (key >= obj.length) {\n      obj.length = key + 1;\n    }\n    obj[key] = value;\n    endBatch();\n  } else {\n    die(8);\n  }\n}\nfunction remove(obj, key) {\n  if (isObservableObject(obj)) {\n    obj[$mobx].delete_(key);\n  } else if (isObservableMap(obj)) {\n    obj[\"delete\"](key);\n  } else if (isObservableSet(obj)) {\n    obj[\"delete\"](key);\n  } else if (isObservableArray(obj)) {\n    if (typeof key !== \"number\") {\n      key = parseInt(key, 10);\n    }\n    obj.splice(key, 1);\n  } else {\n    die(9);\n  }\n}\nfunction has(obj, key) {\n  if (isObservableObject(obj)) {\n    return obj[$mobx].has_(key);\n  } else if (isObservableMap(obj)) {\n    return obj.has(key);\n  } else if (isObservableSet(obj)) {\n    return obj.has(key);\n  } else if (isObservableArray(obj)) {\n    return key >= 0 && key < obj.length;\n  }\n  die(10);\n}\nfunction get(obj, key) {\n  if (!has(obj, key)) {\n    return undefined;\n  }\n  if (isObservableObject(obj)) {\n    return obj[$mobx].get_(key);\n  } else if (isObservableMap(obj)) {\n    return obj.get(key);\n  } else if (isObservableArray(obj)) {\n    return obj[key];\n  }\n  die(11);\n}\nfunction apiDefineProperty(obj, key, descriptor) {\n  if (isObservableObject(obj)) {\n    return obj[$mobx].defineProperty_(key, descriptor);\n  }\n  die(39);\n}\nfunction apiOwnKeys(obj) {\n  if (isObservableObject(obj)) {\n    return obj[$mobx].ownKeys_();\n  }\n  die(38);\n}\n\nfunction observe(thing, propOrCb, cbOrFire, fireImmediately) {\n  if (isFunction(cbOrFire)) {\n    return observeObservableProperty(thing, propOrCb, cbOrFire, fireImmediately);\n  } else {\n    return observeObservable(thing, propOrCb, cbOrFire);\n  }\n}\nfunction observeObservable(thing, listener, fireImmediately) {\n  return getAdministration(thing).observe_(listener, fireImmediately);\n}\nfunction observeObservableProperty(thing, property, listener, fireImmediately) {\n  return getAdministration(thing, property).observe_(listener, fireImmediately);\n}\n\nfunction cache(map, key, value) {\n  map.set(key, value);\n  return value;\n}\nfunction toJSHelper(source, __alreadySeen) {\n  if (source == null || typeof source !== \"object\" || source instanceof Date || !isObservable(source)) {\n    return source;\n  }\n  if (isObservableValue(source) || isComputedValue(source)) {\n    return toJSHelper(source.get(), __alreadySeen);\n  }\n  if (__alreadySeen.has(source)) {\n    return __alreadySeen.get(source);\n  }\n  if (isObservableArray(source)) {\n    var res = cache(__alreadySeen, source, new Array(source.length));\n    source.forEach(function (value, idx) {\n      res[idx] = toJSHelper(value, __alreadySeen);\n    });\n    return res;\n  }\n  if (isObservableSet(source)) {\n    var _res = cache(__alreadySeen, source, new Set());\n    source.forEach(function (value) {\n      _res.add(toJSHelper(value, __alreadySeen));\n    });\n    return _res;\n  }\n  if (isObservableMap(source)) {\n    var _res2 = cache(__alreadySeen, source, new Map());\n    source.forEach(function (value, key) {\n      _res2.set(key, toJSHelper(value, __alreadySeen));\n    });\n    return _res2;\n  } else {\n    // must be observable object\n    var _res3 = cache(__alreadySeen, source, {});\n    apiOwnKeys(source).forEach(function (key) {\n      if (objectPrototype.propertyIsEnumerable.call(source, key)) {\n        _res3[key] = toJSHelper(source[key], __alreadySeen);\n      }\n    });\n    return _res3;\n  }\n}\n/**\r\n * Recursively converts an observable to it's non-observable native counterpart.\r\n * It does NOT recurse into non-observables, these are left as they are, even if they contain observables.\r\n * Computed and other non-enumerable properties are completely ignored.\r\n * Complex scenarios require custom solution, eg implementing `toJSON` or using `serializr` lib.\r\n */\nfunction toJS(source, options) {\n  if (process.env.NODE_ENV !== \"production\" && options) {\n    die(\"toJS no longer supports options\");\n  }\n  return toJSHelper(source, new Map());\n}\n\nfunction trace() {\n  if (!(process.env.NODE_ENV !== \"production\")) {\n    die(\"trace() is not available in production builds\");\n  }\n  var enterBreakPoint = false;\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (typeof args[args.length - 1] === \"boolean\") {\n    enterBreakPoint = args.pop();\n  }\n  var derivation = getAtomFromArgs(args);\n  if (!derivation) {\n    return die(\"'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly\");\n  }\n  if (derivation.isTracing_ === TraceMode.NONE) {\n    console.log(\"[mobx.trace] '\" + derivation.name_ + \"' tracing enabled\");\n  }\n  derivation.isTracing_ = enterBreakPoint ? TraceMode.BREAK : TraceMode.LOG;\n}\nfunction getAtomFromArgs(args) {\n  switch (args.length) {\n    case 0:\n      return globalState.trackingDerivation;\n    case 1:\n      return getAtom(args[0]);\n    case 2:\n      return getAtom(args[0], args[1]);\n  }\n}\n\n/**\r\n * During a transaction no views are updated until the end of the transaction.\r\n * The transaction will be run synchronously nonetheless.\r\n *\r\n * @param action a function that updates some reactive state\r\n * @returns any value that was returned by the 'action' parameter.\r\n */\nfunction transaction(action, thisArg) {\n  if (thisArg === void 0) {\n    thisArg = undefined;\n  }\n  startBatch();\n  try {\n    return action.apply(thisArg);\n  } finally {\n    endBatch();\n  }\n}\n\nfunction when(predicate, arg1, arg2) {\n  if (arguments.length === 1 || arg1 && typeof arg1 === \"object\") {\n    return whenPromise(predicate, arg1);\n  }\n  return _when(predicate, arg1, arg2 || {});\n}\nfunction _when(predicate, effect, opts) {\n  var timeoutHandle;\n  if (typeof opts.timeout === \"number\") {\n    var error = new Error(\"WHEN_TIMEOUT\");\n    timeoutHandle = setTimeout(function () {\n      if (!disposer[$mobx].isDisposed_) {\n        disposer();\n        if (opts.onError) {\n          opts.onError(error);\n        } else {\n          throw error;\n        }\n      }\n    }, opts.timeout);\n  }\n  opts.name = process.env.NODE_ENV !== \"production\" ? opts.name || \"When@\" + getNextId() : \"When\";\n  var effectAction = createAction(process.env.NODE_ENV !== \"production\" ? opts.name + \"-effect\" : \"When-effect\", effect);\n  // eslint-disable-next-line\n  var disposer = autorun(function (r) {\n    // predicate should not change state\n    var cond = allowStateChanges(false, predicate);\n    if (cond) {\n      r.dispose();\n      if (timeoutHandle) {\n        clearTimeout(timeoutHandle);\n      }\n      effectAction();\n    }\n  }, opts);\n  return disposer;\n}\nfunction whenPromise(predicate, opts) {\n  var _opts$signal;\n  if (process.env.NODE_ENV !== \"production\" && opts && opts.onError) {\n    return die(\"the options 'onError' and 'promise' cannot be combined\");\n  }\n  if (opts != null && (_opts$signal = opts.signal) != null && _opts$signal.aborted) {\n    return Object.assign(Promise.reject(new Error(\"WHEN_ABORTED\")), {\n      cancel: function cancel() {\n        return null;\n      }\n    });\n  }\n  var cancel;\n  var abort;\n  var res = new Promise(function (resolve, reject) {\n    var _opts$signal2;\n    var disposer = _when(predicate, resolve, _extends({}, opts, {\n      onError: reject\n    }));\n    cancel = function cancel() {\n      disposer();\n      reject(new Error(\"WHEN_CANCELLED\"));\n    };\n    abort = function abort() {\n      disposer();\n      reject(new Error(\"WHEN_ABORTED\"));\n    };\n    opts == null ? void 0 : (_opts$signal2 = opts.signal) == null ? void 0 : _opts$signal2.addEventListener == null ? void 0 : _opts$signal2.addEventListener(\"abort\", abort);\n  })[\"finally\"](function () {\n    var _opts$signal3;\n    return opts == null ? void 0 : (_opts$signal3 = opts.signal) == null ? void 0 : _opts$signal3.removeEventListener == null ? void 0 : _opts$signal3.removeEventListener(\"abort\", abort);\n  });\n  res.cancel = cancel;\n  return res;\n}\n\nfunction getAdm(target) {\n  return target[$mobx];\n}\n// Optimization: we don't need the intermediate objects and could have a completely custom administration for DynamicObjects,\n// and skip either the internal values map, or the base object with its property descriptors!\nvar objectProxyTraps = {\n  has: function has(target, name) {\n    if (process.env.NODE_ENV !== \"production\" && globalState.trackingDerivation) {\n      warnAboutProxyRequirement(\"detect new properties using the 'in' operator. Use 'has' from 'mobx' instead.\");\n    }\n    return getAdm(target).has_(name);\n  },\n  get: function get(target, name) {\n    return getAdm(target).get_(name);\n  },\n  set: function set(target, name, value) {\n    var _getAdm$set_;\n    if (!isStringish(name)) {\n      return false;\n    }\n    if (process.env.NODE_ENV !== \"production\" && !getAdm(target).values_.has(name)) {\n      warnAboutProxyRequirement(\"add a new observable property through direct assignment. Use 'set' from 'mobx' instead.\");\n    }\n    // null (intercepted) -> true (success)\n    return (_getAdm$set_ = getAdm(target).set_(name, value, true)) != null ? _getAdm$set_ : true;\n  },\n  deleteProperty: function deleteProperty(target, name) {\n    var _getAdm$delete_;\n    if (process.env.NODE_ENV !== \"production\") {\n      warnAboutProxyRequirement(\"delete properties from an observable object. Use 'remove' from 'mobx' instead.\");\n    }\n    if (!isStringish(name)) {\n      return false;\n    }\n    // null (intercepted) -> true (success)\n    return (_getAdm$delete_ = getAdm(target).delete_(name, true)) != null ? _getAdm$delete_ : true;\n  },\n  defineProperty: function defineProperty(target, name, descriptor) {\n    var _getAdm$definePropert;\n    if (process.env.NODE_ENV !== \"production\") {\n      warnAboutProxyRequirement(\"define property on an observable object. Use 'defineProperty' from 'mobx' instead.\");\n    }\n    // null (intercepted) -> true (success)\n    return (_getAdm$definePropert = getAdm(target).defineProperty_(name, descriptor)) != null ? _getAdm$definePropert : true;\n  },\n  ownKeys: function ownKeys(target) {\n    if (process.env.NODE_ENV !== \"production\" && globalState.trackingDerivation) {\n      warnAboutProxyRequirement(\"iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead.\");\n    }\n    return getAdm(target).ownKeys_();\n  },\n  preventExtensions: function preventExtensions(target) {\n    die(13);\n  }\n};\nfunction asDynamicObservableObject(target, options) {\n  var _target$$mobx, _target$$mobx$proxy_;\n  assertProxies();\n  target = asObservableObject(target, options);\n  return (_target$$mobx$proxy_ = (_target$$mobx = target[$mobx]).proxy_) != null ? _target$$mobx$proxy_ : _target$$mobx.proxy_ = new Proxy(target, objectProxyTraps);\n}\n\nfunction hasInterceptors(interceptable) {\n  return interceptable.interceptors_ !== undefined && interceptable.interceptors_.length > 0;\n}\nfunction registerInterceptor(interceptable, handler) {\n  var interceptors = interceptable.interceptors_ || (interceptable.interceptors_ = []);\n  interceptors.push(handler);\n  return once(function () {\n    var idx = interceptors.indexOf(handler);\n    if (idx !== -1) {\n      interceptors.splice(idx, 1);\n    }\n  });\n}\nfunction interceptChange(interceptable, change) {\n  var prevU = untrackedStart();\n  try {\n    // Interceptor can modify the array, copy it to avoid concurrent modification, see #1950\n    var interceptors = [].concat(interceptable.interceptors_ || []);\n    for (var i = 0, l = interceptors.length; i < l; i++) {\n      change = interceptors[i](change);\n      if (change && !change.type) {\n        die(14);\n      }\n      if (!change) {\n        break;\n      }\n    }\n    return change;\n  } finally {\n    untrackedEnd(prevU);\n  }\n}\n\nfunction hasListeners(listenable) {\n  return listenable.changeListeners_ !== undefined && listenable.changeListeners_.length > 0;\n}\nfunction registerListener(listenable, handler) {\n  var listeners = listenable.changeListeners_ || (listenable.changeListeners_ = []);\n  listeners.push(handler);\n  return once(function () {\n    var idx = listeners.indexOf(handler);\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    }\n  });\n}\nfunction notifyListeners(listenable, change) {\n  var prevU = untrackedStart();\n  var listeners = listenable.changeListeners_;\n  if (!listeners) {\n    return;\n  }\n  listeners = listeners.slice();\n  for (var i = 0, l = listeners.length; i < l; i++) {\n    listeners[i](change);\n  }\n  untrackedEnd(prevU);\n}\n\nfunction makeObservable(target, annotations, options) {\n  var adm = asObservableObject(target, options)[$mobx];\n  startBatch();\n  try {\n    var _annotations;\n    if (process.env.NODE_ENV !== \"production\" && annotations && target[storedAnnotationsSymbol]) {\n      die(\"makeObservable second arg must be nullish when using decorators. Mixing @decorator syntax with annotations is not supported.\");\n    }\n    // Default to decorators\n    (_annotations = annotations) != null ? _annotations : annotations = collectStoredAnnotations(target);\n    // Annotate\n    ownKeys(annotations).forEach(function (key) {\n      return adm.make_(key, annotations[key]);\n    });\n  } finally {\n    endBatch();\n  }\n  return target;\n}\n// proto[keysSymbol] = new Set<PropertyKey>()\nvar keysSymbol = /*#__PURE__*/Symbol(\"mobx-keys\");\nfunction makeAutoObservable(target, overrides, options) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isPlainObject(target) && !isPlainObject(Object.getPrototypeOf(target))) {\n      die(\"'makeAutoObservable' can only be used for classes that don't have a superclass\");\n    }\n    if (isObservableObject(target)) {\n      die(\"makeAutoObservable can only be used on objects not already made observable\");\n    }\n  }\n  // Optimization: avoid visiting protos\n  // Assumes that annotation.make_/.extend_ works the same for plain objects\n  if (isPlainObject(target)) {\n    return extendObservable(target, target, overrides, options);\n  }\n  var adm = asObservableObject(target, options)[$mobx];\n  // Optimization: cache keys on proto\n  // Assumes makeAutoObservable can be called only once per object and can't be used in subclass\n  if (!target[keysSymbol]) {\n    var proto = Object.getPrototypeOf(target);\n    var keys = new Set([].concat(ownKeys(target), ownKeys(proto)));\n    keys[\"delete\"](\"constructor\");\n    keys[\"delete\"]($mobx);\n    addHiddenProp(proto, keysSymbol, keys);\n  }\n  startBatch();\n  try {\n    target[keysSymbol].forEach(function (key) {\n      return adm.make_(key,\n      // must pass \"undefined\" for { key: undefined }\n      !overrides ? true : key in overrides ? overrides[key] : true);\n    });\n  } finally {\n    endBatch();\n  }\n  return target;\n}\n\nvar SPLICE = \"splice\";\nvar UPDATE = \"update\";\nvar MAX_SPLICE_SIZE = 10000; // See e.g. https://github.com/mobxjs/mobx/issues/859\nvar arrayTraps = {\n  get: function get(target, name) {\n    var adm = target[$mobx];\n    if (name === $mobx) {\n      return adm;\n    }\n    if (name === \"length\") {\n      return adm.getArrayLength_();\n    }\n    if (typeof name === \"string\" && !isNaN(name)) {\n      return adm.get_(parseInt(name));\n    }\n    if (hasProp(arrayExtensions, name)) {\n      return arrayExtensions[name];\n    }\n    return target[name];\n  },\n  set: function set(target, name, value) {\n    var adm = target[$mobx];\n    if (name === \"length\") {\n      adm.setArrayLength_(value);\n    }\n    if (typeof name === \"symbol\" || isNaN(name)) {\n      target[name] = value;\n    } else {\n      // numeric string\n      adm.set_(parseInt(name), value);\n    }\n    return true;\n  },\n  preventExtensions: function preventExtensions() {\n    die(15);\n  }\n};\nvar ObservableArrayAdministration = /*#__PURE__*/function () {\n  // this is the prop that gets proxied, so can't replace it!\n\n  function ObservableArrayAdministration(name, enhancer, owned_, legacyMode_) {\n    if (name === void 0) {\n      name = process.env.NODE_ENV !== \"production\" ? \"ObservableArray@\" + getNextId() : \"ObservableArray\";\n    }\n    this.owned_ = void 0;\n    this.legacyMode_ = void 0;\n    this.atom_ = void 0;\n    this.values_ = [];\n    this.interceptors_ = void 0;\n    this.changeListeners_ = void 0;\n    this.enhancer_ = void 0;\n    this.dehancer = void 0;\n    this.proxy_ = void 0;\n    this.lastKnownLength_ = 0;\n    this.owned_ = owned_;\n    this.legacyMode_ = legacyMode_;\n    this.atom_ = new Atom(name);\n    this.enhancer_ = function (newV, oldV) {\n      return enhancer(newV, oldV, process.env.NODE_ENV !== \"production\" ? name + \"[..]\" : \"ObservableArray[..]\");\n    };\n  }\n  var _proto = ObservableArrayAdministration.prototype;\n  _proto.dehanceValue_ = function dehanceValue_(value) {\n    if (this.dehancer !== undefined) {\n      return this.dehancer(value);\n    }\n    return value;\n  };\n  _proto.dehanceValues_ = function dehanceValues_(values) {\n    if (this.dehancer !== undefined && values.length > 0) {\n      return values.map(this.dehancer);\n    }\n    return values;\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    if (fireImmediately === void 0) {\n      fireImmediately = false;\n    }\n    if (fireImmediately) {\n      listener({\n        observableKind: \"array\",\n        object: this.proxy_,\n        debugObjectName: this.atom_.name_,\n        type: \"splice\",\n        index: 0,\n        added: this.values_.slice(),\n        addedCount: this.values_.length,\n        removed: [],\n        removedCount: 0\n      });\n    }\n    return registerListener(this, listener);\n  };\n  _proto.getArrayLength_ = function getArrayLength_() {\n    this.atom_.reportObserved();\n    return this.values_.length;\n  };\n  _proto.setArrayLength_ = function setArrayLength_(newLength) {\n    if (typeof newLength !== \"number\" || isNaN(newLength) || newLength < 0) {\n      die(\"Out of range: \" + newLength);\n    }\n    var currentLength = this.values_.length;\n    if (newLength === currentLength) {\n      return;\n    } else if (newLength > currentLength) {\n      var newItems = new Array(newLength - currentLength);\n      for (var i = 0; i < newLength - currentLength; i++) {\n        newItems[i] = undefined;\n      } // No Array.fill everywhere...\n      this.spliceWithArray_(currentLength, 0, newItems);\n    } else {\n      this.spliceWithArray_(newLength, currentLength - newLength);\n    }\n  };\n  _proto.updateArrayLength_ = function updateArrayLength_(oldLength, delta) {\n    if (oldLength !== this.lastKnownLength_) {\n      die(16);\n    }\n    this.lastKnownLength_ += delta;\n    if (this.legacyMode_ && delta > 0) {\n      reserveArrayBuffer(oldLength + delta + 1);\n    }\n  };\n  _proto.spliceWithArray_ = function spliceWithArray_(index, deleteCount, newItems) {\n    var _this = this;\n    checkIfStateModificationsAreAllowed(this.atom_);\n    var length = this.values_.length;\n    if (index === undefined) {\n      index = 0;\n    } else if (index > length) {\n      index = length;\n    } else if (index < 0) {\n      index = Math.max(0, length + index);\n    }\n    if (arguments.length === 1) {\n      deleteCount = length - index;\n    } else if (deleteCount === undefined || deleteCount === null) {\n      deleteCount = 0;\n    } else {\n      deleteCount = Math.max(0, Math.min(deleteCount, length - index));\n    }\n    if (newItems === undefined) {\n      newItems = EMPTY_ARRAY;\n    }\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        object: this.proxy_,\n        type: SPLICE,\n        index: index,\n        removedCount: deleteCount,\n        added: newItems\n      });\n      if (!change) {\n        return EMPTY_ARRAY;\n      }\n      deleteCount = change.removedCount;\n      newItems = change.added;\n    }\n    newItems = newItems.length === 0 ? newItems : newItems.map(function (v) {\n      return _this.enhancer_(v, undefined);\n    });\n    if (this.legacyMode_ || process.env.NODE_ENV !== \"production\") {\n      var lengthDelta = newItems.length - deleteCount;\n      this.updateArrayLength_(length, lengthDelta); // checks if internal array wasn't modified\n    }\n\n    var res = this.spliceItemsIntoValues_(index, deleteCount, newItems);\n    if (deleteCount !== 0 || newItems.length !== 0) {\n      this.notifyArraySplice_(index, newItems, res);\n    }\n    return this.dehanceValues_(res);\n  };\n  _proto.spliceItemsIntoValues_ = function spliceItemsIntoValues_(index, deleteCount, newItems) {\n    if (newItems.length < MAX_SPLICE_SIZE) {\n      var _this$values_;\n      return (_this$values_ = this.values_).splice.apply(_this$values_, [index, deleteCount].concat(newItems));\n    } else {\n      // The items removed by the splice\n      var res = this.values_.slice(index, index + deleteCount);\n      // The items that that should remain at the end of the array\n      var oldItems = this.values_.slice(index + deleteCount);\n      // New length is the previous length + addition count - deletion count\n      this.values_.length += newItems.length - deleteCount;\n      for (var i = 0; i < newItems.length; i++) {\n        this.values_[index + i] = newItems[i];\n      }\n      for (var _i = 0; _i < oldItems.length; _i++) {\n        this.values_[index + newItems.length + _i] = oldItems[_i];\n      }\n      return res;\n    }\n  };\n  _proto.notifyArrayChildUpdate_ = function notifyArrayChildUpdate_(index, newValue, oldValue) {\n    var notifySpy = !this.owned_ && isSpyEnabled();\n    var notify = hasListeners(this);\n    var change = notify || notifySpy ? {\n      observableKind: \"array\",\n      object: this.proxy_,\n      type: UPDATE,\n      debugObjectName: this.atom_.name_,\n      index: index,\n      newValue: newValue,\n      oldValue: oldValue\n    } : null;\n    // The reason why this is on right hand side here (and not above), is this way the uglifier will drop it, but it won't\n    // cause any runtime overhead in development mode without NODE_ENV set, unless spying is enabled\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportStart(change);\n    }\n    this.atom_.reportChanged();\n    if (notify) {\n      notifyListeners(this, change);\n    }\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportEnd();\n    }\n  };\n  _proto.notifyArraySplice_ = function notifyArraySplice_(index, added, removed) {\n    var notifySpy = !this.owned_ && isSpyEnabled();\n    var notify = hasListeners(this);\n    var change = notify || notifySpy ? {\n      observableKind: \"array\",\n      object: this.proxy_,\n      debugObjectName: this.atom_.name_,\n      type: SPLICE,\n      index: index,\n      removed: removed,\n      added: added,\n      removedCount: removed.length,\n      addedCount: added.length\n    } : null;\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportStart(change);\n    }\n    this.atom_.reportChanged();\n    // conform: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/observe\n    if (notify) {\n      notifyListeners(this, change);\n    }\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportEnd();\n    }\n  };\n  _proto.get_ = function get_(index) {\n    if (this.legacyMode_ && index >= this.values_.length) {\n      console.warn(process.env.NODE_ENV !== \"production\" ? \"[mobx.array] Attempt to read an array index (\" + index + \") that is out of bounds (\" + this.values_.length + \"). Please check length first. Out of bound indices will not be tracked by MobX\" : \"[mobx] Out of bounds read: \" + index);\n      return undefined;\n    }\n    this.atom_.reportObserved();\n    return this.dehanceValue_(this.values_[index]);\n  };\n  _proto.set_ = function set_(index, newValue) {\n    var values = this.values_;\n    if (this.legacyMode_ && index > values.length) {\n      // out of bounds\n      die(17, index, values.length);\n    }\n    if (index < values.length) {\n      // update at index in range\n      checkIfStateModificationsAreAllowed(this.atom_);\n      var oldValue = values[index];\n      if (hasInterceptors(this)) {\n        var change = interceptChange(this, {\n          type: UPDATE,\n          object: this.proxy_,\n          index: index,\n          newValue: newValue\n        });\n        if (!change) {\n          return;\n        }\n        newValue = change.newValue;\n      }\n      newValue = this.enhancer_(newValue, oldValue);\n      var changed = newValue !== oldValue;\n      if (changed) {\n        values[index] = newValue;\n        this.notifyArrayChildUpdate_(index, newValue, oldValue);\n      }\n    } else {\n      // For out of bound index, we don't create an actual sparse array,\n      // but rather fill the holes with undefined (same as setArrayLength_).\n      // This could be considered a bug.\n      var newItems = new Array(index + 1 - values.length);\n      for (var i = 0; i < newItems.length - 1; i++) {\n        newItems[i] = undefined;\n      } // No Array.fill everywhere...\n      newItems[newItems.length - 1] = newValue;\n      this.spliceWithArray_(values.length, 0, newItems);\n    }\n  };\n  return ObservableArrayAdministration;\n}();\nfunction createObservableArray(initialValues, enhancer, name, owned) {\n  if (name === void 0) {\n    name = process.env.NODE_ENV !== \"production\" ? \"ObservableArray@\" + getNextId() : \"ObservableArray\";\n  }\n  if (owned === void 0) {\n    owned = false;\n  }\n  assertProxies();\n  var adm = new ObservableArrayAdministration(name, enhancer, owned, false);\n  addHiddenFinalProp(adm.values_, $mobx, adm);\n  var proxy = new Proxy(adm.values_, arrayTraps);\n  adm.proxy_ = proxy;\n  if (initialValues && initialValues.length) {\n    var prev = allowStateChangesStart(true);\n    adm.spliceWithArray_(0, 0, initialValues);\n    allowStateChangesEnd(prev);\n  }\n  return proxy;\n}\n// eslint-disable-next-line\nvar arrayExtensions = {\n  clear: function clear() {\n    return this.splice(0);\n  },\n  replace: function replace(newItems) {\n    var adm = this[$mobx];\n    return adm.spliceWithArray_(0, adm.values_.length, newItems);\n  },\n  // Used by JSON.stringify\n  toJSON: function toJSON() {\n    return this.slice();\n  },\n  /*\r\n   * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)\r\n   * since these functions alter the inner structure of the array, the have side effects.\r\n   * Because the have side effects, they should not be used in computed function,\r\n   * and for that reason the do not call dependencyState.notifyObserved\r\n   */\n  splice: function splice(index, deleteCount) {\n    for (var _len = arguments.length, newItems = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      newItems[_key - 2] = arguments[_key];\n    }\n    var adm = this[$mobx];\n    switch (arguments.length) {\n      case 0:\n        return [];\n      case 1:\n        return adm.spliceWithArray_(index);\n      case 2:\n        return adm.spliceWithArray_(index, deleteCount);\n    }\n    return adm.spliceWithArray_(index, deleteCount, newItems);\n  },\n  spliceWithArray: function spliceWithArray(index, deleteCount, newItems) {\n    return this[$mobx].spliceWithArray_(index, deleteCount, newItems);\n  },\n  push: function push() {\n    var adm = this[$mobx];\n    for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      items[_key2] = arguments[_key2];\n    }\n    adm.spliceWithArray_(adm.values_.length, 0, items);\n    return adm.values_.length;\n  },\n  pop: function pop() {\n    return this.splice(Math.max(this[$mobx].values_.length - 1, 0), 1)[0];\n  },\n  shift: function shift() {\n    return this.splice(0, 1)[0];\n  },\n  unshift: function unshift() {\n    var adm = this[$mobx];\n    for (var _len3 = arguments.length, items = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      items[_key3] = arguments[_key3];\n    }\n    adm.spliceWithArray_(0, 0, items);\n    return adm.values_.length;\n  },\n  reverse: function reverse() {\n    // reverse by default mutates in place before returning the result\n    // which makes it both a 'derivation' and a 'mutation'.\n    if (globalState.trackingDerivation) {\n      die(37, \"reverse\");\n    }\n    this.replace(this.slice().reverse());\n    return this;\n  },\n  sort: function sort() {\n    // sort by default mutates in place before returning the result\n    // which goes against all good practices. Let's not change the array in place!\n    if (globalState.trackingDerivation) {\n      die(37, \"sort\");\n    }\n    var copy = this.slice();\n    copy.sort.apply(copy, arguments);\n    this.replace(copy);\n    return this;\n  },\n  remove: function remove(value) {\n    var adm = this[$mobx];\n    var idx = adm.dehanceValues_(adm.values_).indexOf(value);\n    if (idx > -1) {\n      this.splice(idx, 1);\n      return true;\n    }\n    return false;\n  }\n};\n/**\r\n * Wrap function from prototype\r\n * Without this, everything works as well, but this works\r\n * faster as everything works on unproxied values\r\n */\naddArrayExtension(\"concat\", simpleFunc);\naddArrayExtension(\"flat\", simpleFunc);\naddArrayExtension(\"includes\", simpleFunc);\naddArrayExtension(\"indexOf\", simpleFunc);\naddArrayExtension(\"join\", simpleFunc);\naddArrayExtension(\"lastIndexOf\", simpleFunc);\naddArrayExtension(\"slice\", simpleFunc);\naddArrayExtension(\"toString\", simpleFunc);\naddArrayExtension(\"toLocaleString\", simpleFunc);\n// map\naddArrayExtension(\"every\", mapLikeFunc);\naddArrayExtension(\"filter\", mapLikeFunc);\naddArrayExtension(\"find\", mapLikeFunc);\naddArrayExtension(\"findIndex\", mapLikeFunc);\naddArrayExtension(\"flatMap\", mapLikeFunc);\naddArrayExtension(\"forEach\", mapLikeFunc);\naddArrayExtension(\"map\", mapLikeFunc);\naddArrayExtension(\"some\", mapLikeFunc);\n// reduce\naddArrayExtension(\"reduce\", reduceLikeFunc);\naddArrayExtension(\"reduceRight\", reduceLikeFunc);\nfunction addArrayExtension(funcName, funcFactory) {\n  if (typeof Array.prototype[funcName] === \"function\") {\n    arrayExtensions[funcName] = funcFactory(funcName);\n  }\n}\n// Report and delegate to dehanced array\nfunction simpleFunc(funcName) {\n  return function () {\n    var adm = this[$mobx];\n    adm.atom_.reportObserved();\n    var dehancedValues = adm.dehanceValues_(adm.values_);\n    return dehancedValues[funcName].apply(dehancedValues, arguments);\n  };\n}\n// Make sure callbacks recieve correct array arg #2326\nfunction mapLikeFunc(funcName) {\n  return function (callback, thisArg) {\n    var _this2 = this;\n    var adm = this[$mobx];\n    adm.atom_.reportObserved();\n    var dehancedValues = adm.dehanceValues_(adm.values_);\n    return dehancedValues[funcName](function (element, index) {\n      return callback.call(thisArg, element, index, _this2);\n    });\n  };\n}\n// Make sure callbacks recieve correct array arg #2326\nfunction reduceLikeFunc(funcName) {\n  return function () {\n    var _this3 = this;\n    var adm = this[$mobx];\n    adm.atom_.reportObserved();\n    var dehancedValues = adm.dehanceValues_(adm.values_);\n    // #2432 - reduce behavior depends on arguments.length\n    var callback = arguments[0];\n    arguments[0] = function (accumulator, currentValue, index) {\n      return callback(accumulator, currentValue, index, _this3);\n    };\n    return dehancedValues[funcName].apply(dehancedValues, arguments);\n  };\n}\nvar isObservableArrayAdministration = /*#__PURE__*/createInstanceofPredicate(\"ObservableArrayAdministration\", ObservableArrayAdministration);\nfunction isObservableArray(thing) {\n  return isObject(thing) && isObservableArrayAdministration(thing[$mobx]);\n}\n\nvar _Symbol$iterator, _Symbol$toStringTag;\nvar ObservableMapMarker = {};\nvar ADD = \"add\";\nvar DELETE = \"delete\";\n// just extend Map? See also https://gist.github.com/nestharus/13b4d74f2ef4a2f4357dbd3fc23c1e54\n// But: https://github.com/mobxjs/mobx/issues/1556\n_Symbol$iterator = Symbol.iterator;\n_Symbol$toStringTag = Symbol.toStringTag;\nvar ObservableMap = /*#__PURE__*/function () {\n  // hasMap, not hashMap >-).\n\n  function ObservableMap(initialData, enhancer_, name_) {\n    var _this = this;\n    if (enhancer_ === void 0) {\n      enhancer_ = deepEnhancer;\n    }\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"ObservableMap@\" + getNextId() : \"ObservableMap\";\n    }\n    this.enhancer_ = void 0;\n    this.name_ = void 0;\n    this[$mobx] = ObservableMapMarker;\n    this.data_ = void 0;\n    this.hasMap_ = void 0;\n    this.keysAtom_ = void 0;\n    this.interceptors_ = void 0;\n    this.changeListeners_ = void 0;\n    this.dehancer = void 0;\n    this.enhancer_ = enhancer_;\n    this.name_ = name_;\n    if (!isFunction(Map)) {\n      die(18);\n    }\n    this.keysAtom_ = createAtom(process.env.NODE_ENV !== \"production\" ? this.name_ + \".keys()\" : \"ObservableMap.keys()\");\n    this.data_ = new Map();\n    this.hasMap_ = new Map();\n    allowStateChanges(true, function () {\n      _this.merge(initialData);\n    });\n  }\n  var _proto = ObservableMap.prototype;\n  _proto.has_ = function has_(key) {\n    return this.data_.has(key);\n  };\n  _proto.has = function has(key) {\n    var _this2 = this;\n    if (!globalState.trackingDerivation) {\n      return this.has_(key);\n    }\n    var entry = this.hasMap_.get(key);\n    if (!entry) {\n      var newEntry = entry = new ObservableValue(this.has_(key), referenceEnhancer, process.env.NODE_ENV !== \"production\" ? this.name_ + \".\" + stringifyKey(key) + \"?\" : \"ObservableMap.key?\", false);\n      this.hasMap_.set(key, newEntry);\n      onBecomeUnobserved(newEntry, function () {\n        return _this2.hasMap_[\"delete\"](key);\n      });\n    }\n    return entry.get();\n  };\n  _proto.set = function set(key, value) {\n    var hasKey = this.has_(key);\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: hasKey ? UPDATE : ADD,\n        object: this,\n        newValue: value,\n        name: key\n      });\n      if (!change) {\n        return this;\n      }\n      value = change.newValue;\n    }\n    if (hasKey) {\n      this.updateValue_(key, value);\n    } else {\n      this.addValue_(key, value);\n    }\n    return this;\n  };\n  _proto[\"delete\"] = function _delete(key) {\n    var _this3 = this;\n    checkIfStateModificationsAreAllowed(this.keysAtom_);\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: DELETE,\n        object: this,\n        name: key\n      });\n      if (!change) {\n        return false;\n      }\n    }\n    if (this.has_(key)) {\n      var notifySpy = isSpyEnabled();\n      var notify = hasListeners(this);\n      var _change = notify || notifySpy ? {\n        observableKind: \"map\",\n        debugObjectName: this.name_,\n        type: DELETE,\n        object: this,\n        oldValue: this.data_.get(key).value_,\n        name: key\n      } : null;\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart(_change);\n      } // TODO fix type\n      transaction(function () {\n        var _this3$hasMap_$get;\n        _this3.keysAtom_.reportChanged();\n        (_this3$hasMap_$get = _this3.hasMap_.get(key)) == null ? void 0 : _this3$hasMap_$get.setNewValue_(false);\n        var observable = _this3.data_.get(key);\n        observable.setNewValue_(undefined);\n        _this3.data_[\"delete\"](key);\n      });\n      if (notify) {\n        notifyListeners(this, _change);\n      }\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n      return true;\n    }\n    return false;\n  };\n  _proto.updateValue_ = function updateValue_(key, newValue) {\n    var observable = this.data_.get(key);\n    newValue = observable.prepareNewValue_(newValue);\n    if (newValue !== globalState.UNCHANGED) {\n      var notifySpy = isSpyEnabled();\n      var notify = hasListeners(this);\n      var change = notify || notifySpy ? {\n        observableKind: \"map\",\n        debugObjectName: this.name_,\n        type: UPDATE,\n        object: this,\n        oldValue: observable.value_,\n        name: key,\n        newValue: newValue\n      } : null;\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart(change);\n      } // TODO fix type\n      observable.setNewValue_(newValue);\n      if (notify) {\n        notifyListeners(this, change);\n      }\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n    }\n  };\n  _proto.addValue_ = function addValue_(key, newValue) {\n    var _this4 = this;\n    checkIfStateModificationsAreAllowed(this.keysAtom_);\n    transaction(function () {\n      var _this4$hasMap_$get;\n      var observable = new ObservableValue(newValue, _this4.enhancer_, process.env.NODE_ENV !== \"production\" ? _this4.name_ + \".\" + stringifyKey(key) : \"ObservableMap.key\", false);\n      _this4.data_.set(key, observable);\n      newValue = observable.value_; // value might have been changed\n      (_this4$hasMap_$get = _this4.hasMap_.get(key)) == null ? void 0 : _this4$hasMap_$get.setNewValue_(true);\n      _this4.keysAtom_.reportChanged();\n    });\n    var notifySpy = isSpyEnabled();\n    var notify = hasListeners(this);\n    var change = notify || notifySpy ? {\n      observableKind: \"map\",\n      debugObjectName: this.name_,\n      type: ADD,\n      object: this,\n      name: key,\n      newValue: newValue\n    } : null;\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportStart(change);\n    } // TODO fix type\n    if (notify) {\n      notifyListeners(this, change);\n    }\n    if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n      spyReportEnd();\n    }\n  };\n  _proto.get = function get(key) {\n    if (this.has(key)) {\n      return this.dehanceValue_(this.data_.get(key).get());\n    }\n    return this.dehanceValue_(undefined);\n  };\n  _proto.dehanceValue_ = function dehanceValue_(value) {\n    if (this.dehancer !== undefined) {\n      return this.dehancer(value);\n    }\n    return value;\n  };\n  _proto.keys = function keys() {\n    this.keysAtom_.reportObserved();\n    return this.data_.keys();\n  };\n  _proto.values = function values() {\n    var self = this;\n    var keys = this.keys();\n    return makeIterable({\n      next: function next() {\n        var _keys$next = keys.next(),\n          done = _keys$next.done,\n          value = _keys$next.value;\n        return {\n          done: done,\n          value: done ? undefined : self.get(value)\n        };\n      }\n    });\n  };\n  _proto.entries = function entries() {\n    var self = this;\n    var keys = this.keys();\n    return makeIterable({\n      next: function next() {\n        var _keys$next2 = keys.next(),\n          done = _keys$next2.done,\n          value = _keys$next2.value;\n        return {\n          done: done,\n          value: done ? undefined : [value, self.get(value)]\n        };\n      }\n    });\n  };\n  _proto[_Symbol$iterator] = function () {\n    return this.entries();\n  };\n  _proto.forEach = function forEach(callback, thisArg) {\n    for (var _iterator = _createForOfIteratorHelperLoose(this), _step; !(_step = _iterator()).done;) {\n      var _step$value = _step.value,\n        key = _step$value[0],\n        value = _step$value[1];\n      callback.call(thisArg, value, key, this);\n    }\n  }\n  /** Merge another object into this object, returns this. */;\n  _proto.merge = function merge(other) {\n    var _this5 = this;\n    if (isObservableMap(other)) {\n      other = new Map(other);\n    }\n    transaction(function () {\n      if (isPlainObject(other)) {\n        getPlainObjectKeys(other).forEach(function (key) {\n          return _this5.set(key, other[key]);\n        });\n      } else if (Array.isArray(other)) {\n        other.forEach(function (_ref) {\n          var key = _ref[0],\n            value = _ref[1];\n          return _this5.set(key, value);\n        });\n      } else if (isES6Map(other)) {\n        if (other.constructor !== Map) {\n          die(19, other);\n        }\n        other.forEach(function (value, key) {\n          return _this5.set(key, value);\n        });\n      } else if (other !== null && other !== undefined) {\n        die(20, other);\n      }\n    });\n    return this;\n  };\n  _proto.clear = function clear() {\n    var _this6 = this;\n    transaction(function () {\n      untracked(function () {\n        for (var _iterator2 = _createForOfIteratorHelperLoose(_this6.keys()), _step2; !(_step2 = _iterator2()).done;) {\n          var key = _step2.value;\n          _this6[\"delete\"](key);\n        }\n      });\n    });\n  };\n  _proto.replace = function replace(values) {\n    var _this7 = this;\n    // Implementation requirements:\n    // - respect ordering of replacement map\n    // - allow interceptors to run and potentially prevent individual operations\n    // - don't recreate observables that already exist in original map (so we don't destroy existing subscriptions)\n    // - don't _keysAtom.reportChanged if the keys of resulting map are indentical (order matters!)\n    // - note that result map may differ from replacement map due to the interceptors\n    transaction(function () {\n      // Convert to map so we can do quick key lookups\n      var replacementMap = convertToMap(values);\n      var orderedData = new Map();\n      // Used for optimization\n      var keysReportChangedCalled = false;\n      // Delete keys that don't exist in replacement map\n      // if the key deletion is prevented by interceptor\n      // add entry at the beginning of the result map\n      for (var _iterator3 = _createForOfIteratorHelperLoose(_this7.data_.keys()), _step3; !(_step3 = _iterator3()).done;) {\n        var key = _step3.value;\n        // Concurrently iterating/deleting keys\n        // iterator should handle this correctly\n        if (!replacementMap.has(key)) {\n          var deleted = _this7[\"delete\"](key);\n          // Was the key removed?\n          if (deleted) {\n            // _keysAtom.reportChanged() was already called\n            keysReportChangedCalled = true;\n          } else {\n            // Delete prevented by interceptor\n            var value = _this7.data_.get(key);\n            orderedData.set(key, value);\n          }\n        }\n      }\n      // Merge entries\n      for (var _iterator4 = _createForOfIteratorHelperLoose(replacementMap.entries()), _step4; !(_step4 = _iterator4()).done;) {\n        var _step4$value = _step4.value,\n          _key = _step4$value[0],\n          _value = _step4$value[1];\n        // We will want to know whether a new key is added\n        var keyExisted = _this7.data_.has(_key);\n        // Add or update value\n        _this7.set(_key, _value);\n        // The addition could have been prevent by interceptor\n        if (_this7.data_.has(_key)) {\n          // The update could have been prevented by interceptor\n          // and also we want to preserve existing values\n          // so use value from _data map (instead of replacement map)\n          var _value2 = _this7.data_.get(_key);\n          orderedData.set(_key, _value2);\n          // Was a new key added?\n          if (!keyExisted) {\n            // _keysAtom.reportChanged() was already called\n            keysReportChangedCalled = true;\n          }\n        }\n      }\n      // Check for possible key order change\n      if (!keysReportChangedCalled) {\n        if (_this7.data_.size !== orderedData.size) {\n          // If size differs, keys are definitely modified\n          _this7.keysAtom_.reportChanged();\n        } else {\n          var iter1 = _this7.data_.keys();\n          var iter2 = orderedData.keys();\n          var next1 = iter1.next();\n          var next2 = iter2.next();\n          while (!next1.done) {\n            if (next1.value !== next2.value) {\n              _this7.keysAtom_.reportChanged();\n              break;\n            }\n            next1 = iter1.next();\n            next2 = iter2.next();\n          }\n        }\n      }\n      // Use correctly ordered map\n      _this7.data_ = orderedData;\n    });\n    return this;\n  };\n  _proto.toString = function toString() {\n    return \"[object ObservableMap]\";\n  };\n  _proto.toJSON = function toJSON() {\n    return Array.from(this);\n  };\n  /**\r\n   * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\r\n   * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\r\n   * for callback details\r\n   */\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    if (process.env.NODE_ENV !== \"production\" && fireImmediately === true) {\n      die(\"`observe` doesn't support fireImmediately=true in combination with maps.\");\n    }\n    return registerListener(this, listener);\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _createClass(ObservableMap, [{\n    key: \"size\",\n    get: function get() {\n      this.keysAtom_.reportObserved();\n      return this.data_.size;\n    }\n  }, {\n    key: _Symbol$toStringTag,\n    get: function get() {\n      return \"Map\";\n    }\n  }]);\n  return ObservableMap;\n}();\n// eslint-disable-next-line\nvar isObservableMap = /*#__PURE__*/createInstanceofPredicate(\"ObservableMap\", ObservableMap);\nfunction convertToMap(dataStructure) {\n  if (isES6Map(dataStructure) || isObservableMap(dataStructure)) {\n    return dataStructure;\n  } else if (Array.isArray(dataStructure)) {\n    return new Map(dataStructure);\n  } else if (isPlainObject(dataStructure)) {\n    var map = new Map();\n    for (var key in dataStructure) {\n      map.set(key, dataStructure[key]);\n    }\n    return map;\n  } else {\n    return die(21, dataStructure);\n  }\n}\n\nvar _Symbol$iterator$1, _Symbol$toStringTag$1;\nvar ObservableSetMarker = {};\n_Symbol$iterator$1 = Symbol.iterator;\n_Symbol$toStringTag$1 = Symbol.toStringTag;\nvar ObservableSet = /*#__PURE__*/function () {\n  function ObservableSet(initialData, enhancer, name_) {\n    if (enhancer === void 0) {\n      enhancer = deepEnhancer;\n    }\n    if (name_ === void 0) {\n      name_ = process.env.NODE_ENV !== \"production\" ? \"ObservableSet@\" + getNextId() : \"ObservableSet\";\n    }\n    this.name_ = void 0;\n    this[$mobx] = ObservableSetMarker;\n    this.data_ = new Set();\n    this.atom_ = void 0;\n    this.changeListeners_ = void 0;\n    this.interceptors_ = void 0;\n    this.dehancer = void 0;\n    this.enhancer_ = void 0;\n    this.name_ = name_;\n    if (!isFunction(Set)) {\n      die(22);\n    }\n    this.atom_ = createAtom(this.name_);\n    this.enhancer_ = function (newV, oldV) {\n      return enhancer(newV, oldV, name_);\n    };\n    if (initialData) {\n      this.replace(initialData);\n    }\n  }\n  var _proto = ObservableSet.prototype;\n  _proto.dehanceValue_ = function dehanceValue_(value) {\n    if (this.dehancer !== undefined) {\n      return this.dehancer(value);\n    }\n    return value;\n  };\n  _proto.clear = function clear() {\n    var _this = this;\n    transaction(function () {\n      untracked(function () {\n        for (var _iterator = _createForOfIteratorHelperLoose(_this.data_.values()), _step; !(_step = _iterator()).done;) {\n          var value = _step.value;\n          _this[\"delete\"](value);\n        }\n      });\n    });\n  };\n  _proto.forEach = function forEach(callbackFn, thisArg) {\n    for (var _iterator2 = _createForOfIteratorHelperLoose(this), _step2; !(_step2 = _iterator2()).done;) {\n      var value = _step2.value;\n      callbackFn.call(thisArg, value, value, this);\n    }\n  };\n  _proto.add = function add(value) {\n    var _this2 = this;\n    checkIfStateModificationsAreAllowed(this.atom_);\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: ADD,\n        object: this,\n        newValue: value\n      });\n      if (!change) {\n        return this;\n      }\n      // ideally, value = change.value would be done here, so that values can be\n      // changed by interceptor. Same applies for other Set and Map api's.\n    }\n\n    if (!this.has(value)) {\n      transaction(function () {\n        _this2.data_.add(_this2.enhancer_(value, undefined));\n        _this2.atom_.reportChanged();\n      });\n      var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n      var notify = hasListeners(this);\n      var _change = notify || notifySpy ? {\n        observableKind: \"set\",\n        debugObjectName: this.name_,\n        type: ADD,\n        object: this,\n        newValue: value\n      } : null;\n      if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportStart(_change);\n      }\n      if (notify) {\n        notifyListeners(this, _change);\n      }\n      if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportEnd();\n      }\n    }\n    return this;\n  };\n  _proto[\"delete\"] = function _delete(value) {\n    var _this3 = this;\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: DELETE,\n        object: this,\n        oldValue: value\n      });\n      if (!change) {\n        return false;\n      }\n    }\n    if (this.has(value)) {\n      var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n      var notify = hasListeners(this);\n      var _change2 = notify || notifySpy ? {\n        observableKind: \"set\",\n        debugObjectName: this.name_,\n        type: DELETE,\n        object: this,\n        oldValue: value\n      } : null;\n      if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportStart(_change2);\n      }\n      transaction(function () {\n        _this3.atom_.reportChanged();\n        _this3.data_[\"delete\"](value);\n      });\n      if (notify) {\n        notifyListeners(this, _change2);\n      }\n      if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportEnd();\n      }\n      return true;\n    }\n    return false;\n  };\n  _proto.has = function has(value) {\n    this.atom_.reportObserved();\n    return this.data_.has(this.dehanceValue_(value));\n  };\n  _proto.entries = function entries() {\n    var nextIndex = 0;\n    var keys = Array.from(this.keys());\n    var values = Array.from(this.values());\n    return makeIterable({\n      next: function next() {\n        var index = nextIndex;\n        nextIndex += 1;\n        return index < values.length ? {\n          value: [keys[index], values[index]],\n          done: false\n        } : {\n          done: true\n        };\n      }\n    });\n  };\n  _proto.keys = function keys() {\n    return this.values();\n  };\n  _proto.values = function values() {\n    this.atom_.reportObserved();\n    var self = this;\n    var nextIndex = 0;\n    var observableValues = Array.from(this.data_.values());\n    return makeIterable({\n      next: function next() {\n        return nextIndex < observableValues.length ? {\n          value: self.dehanceValue_(observableValues[nextIndex++]),\n          done: false\n        } : {\n          done: true\n        };\n      }\n    });\n  };\n  _proto.replace = function replace(other) {\n    var _this4 = this;\n    if (isObservableSet(other)) {\n      other = new Set(other);\n    }\n    transaction(function () {\n      if (Array.isArray(other)) {\n        _this4.clear();\n        other.forEach(function (value) {\n          return _this4.add(value);\n        });\n      } else if (isES6Set(other)) {\n        _this4.clear();\n        other.forEach(function (value) {\n          return _this4.add(value);\n        });\n      } else if (other !== null && other !== undefined) {\n        die(\"Cannot initialize set from \" + other);\n      }\n    });\n    return this;\n  };\n  _proto.observe_ = function observe_(listener, fireImmediately) {\n    // ... 'fireImmediately' could also be true?\n    if (process.env.NODE_ENV !== \"production\" && fireImmediately === true) {\n      die(\"`observe` doesn't support fireImmediately=true in combination with sets.\");\n    }\n    return registerListener(this, listener);\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _proto.toJSON = function toJSON() {\n    return Array.from(this);\n  };\n  _proto.toString = function toString() {\n    return \"[object ObservableSet]\";\n  };\n  _proto[_Symbol$iterator$1] = function () {\n    return this.values();\n  };\n  _createClass(ObservableSet, [{\n    key: \"size\",\n    get: function get() {\n      this.atom_.reportObserved();\n      return this.data_.size;\n    }\n  }, {\n    key: _Symbol$toStringTag$1,\n    get: function get() {\n      return \"Set\";\n    }\n  }]);\n  return ObservableSet;\n}();\n// eslint-disable-next-line\nvar isObservableSet = /*#__PURE__*/createInstanceofPredicate(\"ObservableSet\", ObservableSet);\n\nvar descriptorCache = /*#__PURE__*/Object.create(null);\nvar REMOVE = \"remove\";\nvar ObservableObjectAdministration = /*#__PURE__*/function () {\n  function ObservableObjectAdministration(target_, values_, name_,\n  // Used anytime annotation is not explicitely provided\n  defaultAnnotation_) {\n    if (values_ === void 0) {\n      values_ = new Map();\n    }\n    if (defaultAnnotation_ === void 0) {\n      defaultAnnotation_ = autoAnnotation;\n    }\n    this.target_ = void 0;\n    this.values_ = void 0;\n    this.name_ = void 0;\n    this.defaultAnnotation_ = void 0;\n    this.keysAtom_ = void 0;\n    this.changeListeners_ = void 0;\n    this.interceptors_ = void 0;\n    this.proxy_ = void 0;\n    this.isPlainObject_ = void 0;\n    this.appliedAnnotations_ = void 0;\n    this.pendingKeys_ = void 0;\n    this.target_ = target_;\n    this.values_ = values_;\n    this.name_ = name_;\n    this.defaultAnnotation_ = defaultAnnotation_;\n    this.keysAtom_ = new Atom(process.env.NODE_ENV !== \"production\" ? this.name_ + \".keys\" : \"ObservableObject.keys\");\n    // Optimization: we use this frequently\n    this.isPlainObject_ = isPlainObject(this.target_);\n    if (process.env.NODE_ENV !== \"production\" && !isAnnotation(this.defaultAnnotation_)) {\n      die(\"defaultAnnotation must be valid annotation\");\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      // Prepare structure for tracking which fields were already annotated\n      this.appliedAnnotations_ = {};\n    }\n  }\n  var _proto = ObservableObjectAdministration.prototype;\n  _proto.getObservablePropValue_ = function getObservablePropValue_(key) {\n    return this.values_.get(key).get();\n  };\n  _proto.setObservablePropValue_ = function setObservablePropValue_(key, newValue) {\n    var observable = this.values_.get(key);\n    if (observable instanceof ComputedValue) {\n      observable.set(newValue);\n      return true;\n    }\n    // intercept\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        type: UPDATE,\n        object: this.proxy_ || this.target_,\n        name: key,\n        newValue: newValue\n      });\n      if (!change) {\n        return null;\n      }\n      newValue = change.newValue;\n    }\n    newValue = observable.prepareNewValue_(newValue);\n    // notify spy & observers\n    if (newValue !== globalState.UNCHANGED) {\n      var notify = hasListeners(this);\n      var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n      var _change = notify || notifySpy ? {\n        type: UPDATE,\n        observableKind: \"object\",\n        debugObjectName: this.name_,\n        object: this.proxy_ || this.target_,\n        oldValue: observable.value_,\n        name: key,\n        newValue: newValue\n      } : null;\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart(_change);\n      }\n      observable.setNewValue_(newValue);\n      if (notify) {\n        notifyListeners(this, _change);\n      }\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n    }\n    return true;\n  };\n  _proto.get_ = function get_(key) {\n    if (globalState.trackingDerivation && !hasProp(this.target_, key)) {\n      // Key doesn't exist yet, subscribe for it in case it's added later\n      this.has_(key);\n    }\n    return this.target_[key];\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {any} value\r\n   * @param {Annotation|boolean} annotation true - use default annotation, false - copy as is\r\n   * @param {boolean} proxyTrap whether it's called from proxy trap\r\n   * @returns {boolean|null} true on success, false on failure (proxyTrap + non-configurable), null when cancelled by interceptor\r\n   */;\n  _proto.set_ = function set_(key, value, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    // Don't use .has(key) - we care about own\n    if (hasProp(this.target_, key)) {\n      // Existing prop\n      if (this.values_.has(key)) {\n        // Observable (can be intercepted)\n        return this.setObservablePropValue_(key, value);\n      } else if (proxyTrap) {\n        // Non-observable - proxy\n        return Reflect.set(this.target_, key, value);\n      } else {\n        // Non-observable\n        this.target_[key] = value;\n        return true;\n      }\n    } else {\n      // New prop\n      return this.extend_(key, {\n        value: value,\n        enumerable: true,\n        writable: true,\n        configurable: true\n      }, this.defaultAnnotation_, proxyTrap);\n    }\n  }\n  // Trap for \"in\"\n  ;\n  _proto.has_ = function has_(key) {\n    if (!globalState.trackingDerivation) {\n      // Skip key subscription outside derivation\n      return key in this.target_;\n    }\n    this.pendingKeys_ || (this.pendingKeys_ = new Map());\n    var entry = this.pendingKeys_.get(key);\n    if (!entry) {\n      entry = new ObservableValue(key in this.target_, referenceEnhancer, process.env.NODE_ENV !== \"production\" ? this.name_ + \".\" + stringifyKey(key) + \"?\" : \"ObservableObject.key?\", false);\n      this.pendingKeys_.set(key, entry);\n    }\n    return entry.get();\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {Annotation|boolean} annotation true - use default annotation, false - ignore prop\r\n   */;\n  _proto.make_ = function make_(key, annotation) {\n    if (annotation === true) {\n      annotation = this.defaultAnnotation_;\n    }\n    if (annotation === false) {\n      return;\n    }\n    assertAnnotable(this, annotation, key);\n    if (!(key in this.target_)) {\n      var _this$target_$storedA;\n      // Throw on missing key, except for decorators:\n      // Decorator annotations are collected from whole prototype chain.\n      // When called from super() some props may not exist yet.\n      // However we don't have to worry about missing prop,\n      // because the decorator must have been applied to something.\n      if ((_this$target_$storedA = this.target_[storedAnnotationsSymbol]) != null && _this$target_$storedA[key]) {\n        return; // will be annotated by subclass constructor\n      } else {\n        die(1, annotation.annotationType_, this.name_ + \".\" + key.toString());\n      }\n    }\n    var source = this.target_;\n    while (source && source !== objectPrototype) {\n      var descriptor = getDescriptor(source, key);\n      if (descriptor) {\n        var outcome = annotation.make_(this, key, descriptor, source);\n        if (outcome === 0 /* Cancel */) {\n          return;\n        }\n        if (outcome === 1 /* Break */) {\n          break;\n        }\n      }\n      source = Object.getPrototypeOf(source);\n    }\n    recordAnnotationApplied(this, annotation, key);\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {PropertyDescriptor} descriptor\r\n   * @param {Annotation|boolean} annotation true - use default annotation, false - copy as is\r\n   * @param {boolean} proxyTrap whether it's called from proxy trap\r\n   * @returns {boolean|null} true on success, false on failure (proxyTrap + non-configurable), null when cancelled by interceptor\r\n   */;\n  _proto.extend_ = function extend_(key, descriptor, annotation, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    if (annotation === true) {\n      annotation = this.defaultAnnotation_;\n    }\n    if (annotation === false) {\n      return this.defineProperty_(key, descriptor, proxyTrap);\n    }\n    assertAnnotable(this, annotation, key);\n    var outcome = annotation.extend_(this, key, descriptor, proxyTrap);\n    if (outcome) {\n      recordAnnotationApplied(this, annotation, key);\n    }\n    return outcome;\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {PropertyDescriptor} descriptor\r\n   * @param {boolean} proxyTrap whether it's called from proxy trap\r\n   * @returns {boolean|null} true on success, false on failure (proxyTrap + non-configurable), null when cancelled by interceptor\r\n   */;\n  _proto.defineProperty_ = function defineProperty_(key, descriptor, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    try {\n      startBatch();\n      // Delete\n      var deleteOutcome = this.delete_(key);\n      if (!deleteOutcome) {\n        // Failure or intercepted\n        return deleteOutcome;\n      }\n      // ADD interceptor\n      if (hasInterceptors(this)) {\n        var change = interceptChange(this, {\n          object: this.proxy_ || this.target_,\n          name: key,\n          type: ADD,\n          newValue: descriptor.value\n        });\n        if (!change) {\n          return null;\n        }\n        var newValue = change.newValue;\n        if (descriptor.value !== newValue) {\n          descriptor = _extends({}, descriptor, {\n            value: newValue\n          });\n        }\n      }\n      // Define\n      if (proxyTrap) {\n        if (!Reflect.defineProperty(this.target_, key, descriptor)) {\n          return false;\n        }\n      } else {\n        defineProperty(this.target_, key, descriptor);\n      }\n      // Notify\n      this.notifyPropertyAddition_(key, descriptor.value);\n    } finally {\n      endBatch();\n    }\n    return true;\n  }\n  // If original descriptor becomes relevant, move this to annotation directly\n  ;\n  _proto.defineObservableProperty_ = function defineObservableProperty_(key, value, enhancer, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    try {\n      startBatch();\n      // Delete\n      var deleteOutcome = this.delete_(key);\n      if (!deleteOutcome) {\n        // Failure or intercepted\n        return deleteOutcome;\n      }\n      // ADD interceptor\n      if (hasInterceptors(this)) {\n        var change = interceptChange(this, {\n          object: this.proxy_ || this.target_,\n          name: key,\n          type: ADD,\n          newValue: value\n        });\n        if (!change) {\n          return null;\n        }\n        value = change.newValue;\n      }\n      var cachedDescriptor = getCachedObservablePropDescriptor(key);\n      var descriptor = {\n        configurable: globalState.safeDescriptors ? this.isPlainObject_ : true,\n        enumerable: true,\n        get: cachedDescriptor.get,\n        set: cachedDescriptor.set\n      };\n      // Define\n      if (proxyTrap) {\n        if (!Reflect.defineProperty(this.target_, key, descriptor)) {\n          return false;\n        }\n      } else {\n        defineProperty(this.target_, key, descriptor);\n      }\n      var observable = new ObservableValue(value, enhancer, process.env.NODE_ENV !== \"production\" ? this.name_ + \".\" + key.toString() : \"ObservableObject.key\", false);\n      this.values_.set(key, observable);\n      // Notify (value possibly changed by ObservableValue)\n      this.notifyPropertyAddition_(key, observable.value_);\n    } finally {\n      endBatch();\n    }\n    return true;\n  }\n  // If original descriptor becomes relevant, move this to annotation directly\n  ;\n  _proto.defineComputedProperty_ = function defineComputedProperty_(key, options, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    try {\n      startBatch();\n      // Delete\n      var deleteOutcome = this.delete_(key);\n      if (!deleteOutcome) {\n        // Failure or intercepted\n        return deleteOutcome;\n      }\n      // ADD interceptor\n      if (hasInterceptors(this)) {\n        var change = interceptChange(this, {\n          object: this.proxy_ || this.target_,\n          name: key,\n          type: ADD,\n          newValue: undefined\n        });\n        if (!change) {\n          return null;\n        }\n      }\n      options.name || (options.name = process.env.NODE_ENV !== \"production\" ? this.name_ + \".\" + key.toString() : \"ObservableObject.key\");\n      options.context = this.proxy_ || this.target_;\n      var cachedDescriptor = getCachedObservablePropDescriptor(key);\n      var descriptor = {\n        configurable: globalState.safeDescriptors ? this.isPlainObject_ : true,\n        enumerable: false,\n        get: cachedDescriptor.get,\n        set: cachedDescriptor.set\n      };\n      // Define\n      if (proxyTrap) {\n        if (!Reflect.defineProperty(this.target_, key, descriptor)) {\n          return false;\n        }\n      } else {\n        defineProperty(this.target_, key, descriptor);\n      }\n      this.values_.set(key, new ComputedValue(options));\n      // Notify\n      this.notifyPropertyAddition_(key, undefined);\n    } finally {\n      endBatch();\n    }\n    return true;\n  }\n  /**\r\n   * @param {PropertyKey} key\r\n   * @param {PropertyDescriptor} descriptor\r\n   * @param {boolean} proxyTrap whether it's called from proxy trap\r\n   * @returns {boolean|null} true on success, false on failure (proxyTrap + non-configurable), null when cancelled by interceptor\r\n   */;\n  _proto.delete_ = function delete_(key, proxyTrap) {\n    if (proxyTrap === void 0) {\n      proxyTrap = false;\n    }\n    // No such prop\n    if (!hasProp(this.target_, key)) {\n      return true;\n    }\n    // Intercept\n    if (hasInterceptors(this)) {\n      var change = interceptChange(this, {\n        object: this.proxy_ || this.target_,\n        name: key,\n        type: REMOVE\n      });\n      // Cancelled\n      if (!change) {\n        return null;\n      }\n    }\n    // Delete\n    try {\n      var _this$pendingKeys_, _this$pendingKeys_$ge;\n      startBatch();\n      var notify = hasListeners(this);\n      var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n      var observable = this.values_.get(key);\n      // Value needed for spies/listeners\n      var value = undefined;\n      // Optimization: don't pull the value unless we will need it\n      if (!observable && (notify || notifySpy)) {\n        var _getDescriptor;\n        value = (_getDescriptor = getDescriptor(this.target_, key)) == null ? void 0 : _getDescriptor.value;\n      }\n      // delete prop (do first, may fail)\n      if (proxyTrap) {\n        if (!Reflect.deleteProperty(this.target_, key)) {\n          return false;\n        }\n      } else {\n        delete this.target_[key];\n      }\n      // Allow re-annotating this field\n      if (process.env.NODE_ENV !== \"production\") {\n        delete this.appliedAnnotations_[key];\n      }\n      // Clear observable\n      if (observable) {\n        this.values_[\"delete\"](key);\n        // for computed, value is undefined\n        if (observable instanceof ObservableValue) {\n          value = observable.value_;\n        }\n        // Notify: autorun(() => obj[key]), see #1796\n        propagateChanged(observable);\n      }\n      // Notify \"keys/entries/values\" observers\n      this.keysAtom_.reportChanged();\n      // Notify \"has\" observers\n      // \"in\" as it may still exist in proto\n      (_this$pendingKeys_ = this.pendingKeys_) == null ? void 0 : (_this$pendingKeys_$ge = _this$pendingKeys_.get(key)) == null ? void 0 : _this$pendingKeys_$ge.set(key in this.target_);\n      // Notify spies/listeners\n      if (notify || notifySpy) {\n        var _change2 = {\n          type: REMOVE,\n          observableKind: \"object\",\n          object: this.proxy_ || this.target_,\n          debugObjectName: this.name_,\n          oldValue: value,\n          name: key\n        };\n        if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n          spyReportStart(_change2);\n        }\n        if (notify) {\n          notifyListeners(this, _change2);\n        }\n        if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n          spyReportEnd();\n        }\n      }\n    } finally {\n      endBatch();\n    }\n    return true;\n  }\n  /**\r\n   * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\r\n   * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\r\n   * for callback details\r\n   */;\n  _proto.observe_ = function observe_(callback, fireImmediately) {\n    if (process.env.NODE_ENV !== \"production\" && fireImmediately === true) {\n      die(\"`observe` doesn't support the fire immediately property for observable objects.\");\n    }\n    return registerListener(this, callback);\n  };\n  _proto.intercept_ = function intercept_(handler) {\n    return registerInterceptor(this, handler);\n  };\n  _proto.notifyPropertyAddition_ = function notifyPropertyAddition_(key, value) {\n    var _this$pendingKeys_2, _this$pendingKeys_2$g;\n    var notify = hasListeners(this);\n    var notifySpy = process.env.NODE_ENV !== \"production\" && isSpyEnabled();\n    if (notify || notifySpy) {\n      var change = notify || notifySpy ? {\n        type: ADD,\n        observableKind: \"object\",\n        debugObjectName: this.name_,\n        object: this.proxy_ || this.target_,\n        name: key,\n        newValue: value\n      } : null;\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportStart(change);\n      }\n      if (notify) {\n        notifyListeners(this, change);\n      }\n      if (process.env.NODE_ENV !== \"production\" && notifySpy) {\n        spyReportEnd();\n      }\n    }\n    (_this$pendingKeys_2 = this.pendingKeys_) == null ? void 0 : (_this$pendingKeys_2$g = _this$pendingKeys_2.get(key)) == null ? void 0 : _this$pendingKeys_2$g.set(true);\n    // Notify \"keys/entries/values\" observers\n    this.keysAtom_.reportChanged();\n  };\n  _proto.ownKeys_ = function ownKeys_() {\n    this.keysAtom_.reportObserved();\n    return ownKeys(this.target_);\n  };\n  _proto.keys_ = function keys_() {\n    // Returns enumerable && own, but unfortunately keysAtom will report on ANY key change.\n    // There is no way to distinguish between Object.keys(object) and Reflect.ownKeys(object) - both are handled by ownKeys trap.\n    // We can either over-report in Object.keys(object) or under-report in Reflect.ownKeys(object)\n    // We choose to over-report in Object.keys(object), because:\n    // - typically it's used with simple data objects\n    // - when symbolic/non-enumerable keys are relevant Reflect.ownKeys works as expected\n    this.keysAtom_.reportObserved();\n    return Object.keys(this.target_);\n  };\n  return ObservableObjectAdministration;\n}();\nfunction asObservableObject(target, options) {\n  var _options$name;\n  if (process.env.NODE_ENV !== \"production\" && options && isObservableObject(target)) {\n    die(\"Options can't be provided for already observable objects.\");\n  }\n  if (hasProp(target, $mobx)) {\n    if (process.env.NODE_ENV !== \"production\" && !(getAdministration(target) instanceof ObservableObjectAdministration)) {\n      die(\"Cannot convert '\" + getDebugName(target) + \"' into observable object:\" + \"\\nThe target is already observable of different type.\" + \"\\nExtending builtins is not supported.\");\n    }\n    return target;\n  }\n  if (process.env.NODE_ENV !== \"production\" && !Object.isExtensible(target)) {\n    die(\"Cannot make the designated object observable; it is not extensible\");\n  }\n  var name = (_options$name = options == null ? void 0 : options.name) != null ? _options$name : process.env.NODE_ENV !== \"production\" ? (isPlainObject(target) ? \"ObservableObject\" : target.constructor.name) + \"@\" + getNextId() : \"ObservableObject\";\n  var adm = new ObservableObjectAdministration(target, new Map(), String(name), getAnnotationFromOptions(options));\n  addHiddenProp(target, $mobx, adm);\n  return target;\n}\nvar isObservableObjectAdministration = /*#__PURE__*/createInstanceofPredicate(\"ObservableObjectAdministration\", ObservableObjectAdministration);\nfunction getCachedObservablePropDescriptor(key) {\n  return descriptorCache[key] || (descriptorCache[key] = {\n    get: function get() {\n      return this[$mobx].getObservablePropValue_(key);\n    },\n    set: function set(value) {\n      return this[$mobx].setObservablePropValue_(key, value);\n    }\n  });\n}\nfunction isObservableObject(thing) {\n  if (isObject(thing)) {\n    return isObservableObjectAdministration(thing[$mobx]);\n  }\n  return false;\n}\nfunction recordAnnotationApplied(adm, annotation, key) {\n  var _adm$target_$storedAn;\n  if (process.env.NODE_ENV !== \"production\") {\n    adm.appliedAnnotations_[key] = annotation;\n  }\n  // Remove applied decorator annotation so we don't try to apply it again in subclass constructor\n  (_adm$target_$storedAn = adm.target_[storedAnnotationsSymbol]) == null ? true : delete _adm$target_$storedAn[key];\n}\nfunction assertAnnotable(adm, annotation, key) {\n  // Valid annotation\n  if (process.env.NODE_ENV !== \"production\" && !isAnnotation(annotation)) {\n    die(\"Cannot annotate '\" + adm.name_ + \".\" + key.toString() + \"': Invalid annotation.\");\n  }\n  /*\r\n  // Configurable, not sealed, not frozen\r\n  // Possibly not needed, just a little better error then the one thrown by engine.\r\n  // Cases where this would be useful the most (subclass field initializer) are not interceptable by this.\r\n  if (__DEV__) {\r\n      const configurable = getDescriptor(adm.target_, key)?.configurable\r\n      const frozen = Object.isFrozen(adm.target_)\r\n      const sealed = Object.isSealed(adm.target_)\r\n      if (!configurable || frozen || sealed) {\r\n          const fieldName = `${adm.name_}.${key.toString()}`\r\n          const requestedAnnotationType = annotation.annotationType_\r\n          let error = `Cannot apply '${requestedAnnotationType}' to '${fieldName}':`\r\n          if (frozen) {\r\n              error += `\\nObject is frozen.`\r\n          }\r\n          if (sealed) {\r\n              error += `\\nObject is sealed.`\r\n          }\r\n          if (!configurable) {\r\n              error += `\\nproperty is not configurable.`\r\n              // Mention only if caused by us to avoid confusion\r\n              if (hasProp(adm.appliedAnnotations!, key)) {\r\n                  error += `\\nTo prevent accidental re-definition of a field by a subclass, `\r\n                  error += `all annotated fields of non-plain objects (classes) are not configurable.`\r\n              }\r\n          }\r\n          die(error)\r\n      }\r\n  }\r\n  */\n  // Not annotated\n  if (process.env.NODE_ENV !== \"production\" && !isOverride(annotation) && hasProp(adm.appliedAnnotations_, key)) {\n    var fieldName = adm.name_ + \".\" + key.toString();\n    var currentAnnotationType = adm.appliedAnnotations_[key].annotationType_;\n    var requestedAnnotationType = annotation.annotationType_;\n    die(\"Cannot apply '\" + requestedAnnotationType + \"' to '\" + fieldName + \"':\" + (\"\\nThe field is already annotated with '\" + currentAnnotationType + \"'.\") + \"\\nRe-annotating fields is not allowed.\" + \"\\nUse 'override' annotation for methods overridden by subclass.\");\n  }\n}\n\n// Bug in safari 9.* (or iOS 9 safari mobile). See #364\nvar ENTRY_0 = /*#__PURE__*/createArrayEntryDescriptor(0);\n/**\r\n * This array buffer contains two lists of properties, so that all arrays\r\n * can recycle their property definitions, which significantly improves performance of creating\r\n * properties on the fly.\r\n */\nvar OBSERVABLE_ARRAY_BUFFER_SIZE = 0;\n// Typescript workaround to make sure ObservableArray extends Array\nvar StubArray = function StubArray() {};\nfunction inherit(ctor, proto) {\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ctor.prototype, proto);\n  } else if (ctor.prototype.__proto__ !== undefined) {\n    ctor.prototype.__proto__ = proto;\n  } else {\n    ctor.prototype = proto;\n  }\n}\ninherit(StubArray, Array.prototype);\n// Weex proto freeze protection was here,\n// but it is unclear why the hack is need as MobX never changed the prototype\n// anyway, so removed it in V6\nvar LegacyObservableArray = /*#__PURE__*/function (_StubArray, _Symbol$toStringTag, _Symbol$iterator) {\n  _inheritsLoose(LegacyObservableArray, _StubArray);\n  function LegacyObservableArray(initialValues, enhancer, name, owned) {\n    var _this;\n    if (name === void 0) {\n      name = process.env.NODE_ENV !== \"production\" ? \"ObservableArray@\" + getNextId() : \"ObservableArray\";\n    }\n    if (owned === void 0) {\n      owned = false;\n    }\n    _this = _StubArray.call(this) || this;\n    var adm = new ObservableArrayAdministration(name, enhancer, owned, true);\n    adm.proxy_ = _assertThisInitialized(_this);\n    addHiddenFinalProp(_assertThisInitialized(_this), $mobx, adm);\n    if (initialValues && initialValues.length) {\n      var prev = allowStateChangesStart(true);\n      // @ts-ignore\n      _this.spliceWithArray(0, 0, initialValues);\n      allowStateChangesEnd(prev);\n    }\n    {\n      // Seems that Safari won't use numeric prototype setter untill any * numeric property is\n      // defined on the instance. After that it works fine, even if this property is deleted.\n      Object.defineProperty(_assertThisInitialized(_this), \"0\", ENTRY_0);\n    }\n    return _this;\n  }\n  var _proto = LegacyObservableArray.prototype;\n  _proto.concat = function concat() {\n    this[$mobx].atom_.reportObserved();\n    for (var _len = arguments.length, arrays = new Array(_len), _key = 0; _key < _len; _key++) {\n      arrays[_key] = arguments[_key];\n    }\n    return Array.prototype.concat.apply(this.slice(),\n    //@ts-ignore\n    arrays.map(function (a) {\n      return isObservableArray(a) ? a.slice() : a;\n    }));\n  };\n  _proto[_Symbol$iterator] = function () {\n    var self = this;\n    var nextIndex = 0;\n    return makeIterable({\n      next: function next() {\n        return nextIndex < self.length ? {\n          value: self[nextIndex++],\n          done: false\n        } : {\n          done: true,\n          value: undefined\n        };\n      }\n    });\n  };\n  _createClass(LegacyObservableArray, [{\n    key: \"length\",\n    get: function get() {\n      return this[$mobx].getArrayLength_();\n    },\n    set: function set(newLength) {\n      this[$mobx].setArrayLength_(newLength);\n    }\n  }, {\n    key: _Symbol$toStringTag,\n    get: function get() {\n      return \"Array\";\n    }\n  }]);\n  return LegacyObservableArray;\n}(StubArray, Symbol.toStringTag, Symbol.iterator);\nObject.entries(arrayExtensions).forEach(function (_ref) {\n  var prop = _ref[0],\n    fn = _ref[1];\n  if (prop !== \"concat\") {\n    addHiddenProp(LegacyObservableArray.prototype, prop, fn);\n  }\n});\nfunction createArrayEntryDescriptor(index) {\n  return {\n    enumerable: false,\n    configurable: true,\n    get: function get() {\n      return this[$mobx].get_(index);\n    },\n    set: function set(value) {\n      this[$mobx].set_(index, value);\n    }\n  };\n}\nfunction createArrayBufferItem(index) {\n  defineProperty(LegacyObservableArray.prototype, \"\" + index, createArrayEntryDescriptor(index));\n}\nfunction reserveArrayBuffer(max) {\n  if (max > OBSERVABLE_ARRAY_BUFFER_SIZE) {\n    for (var index = OBSERVABLE_ARRAY_BUFFER_SIZE; index < max + 100; index++) {\n      createArrayBufferItem(index);\n    }\n    OBSERVABLE_ARRAY_BUFFER_SIZE = max;\n  }\n}\nreserveArrayBuffer(1000);\nfunction createLegacyArray(initialValues, enhancer, name) {\n  return new LegacyObservableArray(initialValues, enhancer, name);\n}\n\nfunction getAtom(thing, property) {\n  if (typeof thing === \"object\" && thing !== null) {\n    if (isObservableArray(thing)) {\n      if (property !== undefined) {\n        die(23);\n      }\n      return thing[$mobx].atom_;\n    }\n    if (isObservableSet(thing)) {\n      return thing.atom_;\n    }\n    if (isObservableMap(thing)) {\n      if (property === undefined) {\n        return thing.keysAtom_;\n      }\n      var observable = thing.data_.get(property) || thing.hasMap_.get(property);\n      if (!observable) {\n        die(25, property, getDebugName(thing));\n      }\n      return observable;\n    }\n    if (isObservableObject(thing)) {\n      if (!property) {\n        return die(26);\n      }\n      var _observable = thing[$mobx].values_.get(property);\n      if (!_observable) {\n        die(27, property, getDebugName(thing));\n      }\n      return _observable;\n    }\n    if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n      return thing;\n    }\n  } else if (isFunction(thing)) {\n    if (isReaction(thing[$mobx])) {\n      // disposer function\n      return thing[$mobx];\n    }\n  }\n  die(28);\n}\nfunction getAdministration(thing, property) {\n  if (!thing) {\n    die(29);\n  }\n  if (property !== undefined) {\n    return getAdministration(getAtom(thing, property));\n  }\n  if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n    return thing;\n  }\n  if (isObservableMap(thing) || isObservableSet(thing)) {\n    return thing;\n  }\n  if (thing[$mobx]) {\n    return thing[$mobx];\n  }\n  die(24, thing);\n}\nfunction getDebugName(thing, property) {\n  var named;\n  if (property !== undefined) {\n    named = getAtom(thing, property);\n  } else if (isAction(thing)) {\n    return thing.name;\n  } else if (isObservableObject(thing) || isObservableMap(thing) || isObservableSet(thing)) {\n    named = getAdministration(thing);\n  } else {\n    // valid for arrays as well\n    named = getAtom(thing);\n  }\n  return named.name_;\n}\n\nvar toString = objectPrototype.toString;\nfunction deepEqual(a, b, depth) {\n  if (depth === void 0) {\n    depth = -1;\n  }\n  return eq(a, b, depth);\n}\n// Copied from https://github.com/jashkenas/underscore/blob/5c237a7c682fb68fd5378203f0bf22dce1624854/underscore.js#L1186-L1289\n// Internal recursive comparison function for `isEqual`.\nfunction eq(a, b, depth, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) {\n    return a !== 0 || 1 / a === 1 / b;\n  }\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) {\n    return false;\n  }\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) {\n    return b !== b;\n  }\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== \"function\" && type !== \"object\" && typeof b != \"object\") {\n    return false;\n  }\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) {\n    return false;\n  }\n  switch (className) {\n    // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n    case \"[object RegExp]\":\n    // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case \"[object String]\":\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return \"\" + a === \"\" + b;\n    case \"[object Number]\":\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) {\n        return +b !== +b;\n      }\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case \"[object Date]\":\n    case \"[object Boolean]\":\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case \"[object Symbol]\":\n      return typeof Symbol !== \"undefined\" && Symbol.valueOf.call(a) === Symbol.valueOf.call(b);\n    case \"[object Map]\":\n    case \"[object Set]\":\n      // Maps and Sets are unwrapped to arrays of entry-pairs, adding an incidental level.\n      // Hide this extra level by increasing the depth.\n      if (depth >= 0) {\n        depth++;\n      }\n      break;\n  }\n  // Unwrap any wrapped objects.\n  a = unwrap(a);\n  b = unwrap(b);\n  var areArrays = className === \"[object Array]\";\n  if (!areArrays) {\n    if (typeof a != \"object\" || typeof b != \"object\") {\n      return false;\n    }\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor,\n      bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor && isFunction(bCtor) && bCtor instanceof bCtor) && \"constructor\" in a && \"constructor\" in b) {\n      return false;\n    }\n  }\n  if (depth === 0) {\n    return false;\n  } else if (depth < 0) {\n    depth = -1;\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) {\n      return bStack[length] === b;\n    }\n  }\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) {\n      return false;\n    }\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], depth - 1, aStack, bStack)) {\n        return false;\n      }\n    }\n  } else {\n    // Deep compare objects.\n    var keys = Object.keys(a);\n    var key;\n    length = keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (Object.keys(b).length !== length) {\n      return false;\n    }\n    while (length--) {\n      // Deep compare each member\n      key = keys[length];\n      if (!(hasProp(b, key) && eq(a[key], b[key], depth - 1, aStack, bStack))) {\n        return false;\n      }\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\nfunction unwrap(a) {\n  if (isObservableArray(a)) {\n    return a.slice();\n  }\n  if (isES6Map(a) || isObservableMap(a)) {\n    return Array.from(a.entries());\n  }\n  if (isES6Set(a) || isObservableSet(a)) {\n    return Array.from(a.entries());\n  }\n  return a;\n}\n\nfunction makeIterable(iterator) {\n  iterator[Symbol.iterator] = getSelf;\n  return iterator;\n}\nfunction getSelf() {\n  return this;\n}\n\nfunction isAnnotation(thing) {\n  return (\n    // Can be function\n    thing instanceof Object && typeof thing.annotationType_ === \"string\" && isFunction(thing.make_) && isFunction(thing.extend_)\n  );\n}\n\n/**\r\n * (c) Michel Weststrate 2015 - 2020\r\n * MIT Licensed\r\n *\r\n * Welcome to the mobx sources! To get a global overview of how MobX internally works,\r\n * this is a good place to start:\r\n * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74\r\n *\r\n * Source folders:\r\n * ===============\r\n *\r\n * - api/     Most of the public static methods exposed by the module can be found here.\r\n * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.\r\n * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.\r\n * - utils/   Utility stuff.\r\n *\r\n */\n[\"Symbol\", \"Map\", \"Set\"].forEach(function (m) {\n  var g = getGlobal();\n  if (typeof g[m] === \"undefined\") {\n    die(\"MobX requires global '\" + m + \"' to be available or polyfilled\");\n  }\n});\nif (typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ === \"object\") {\n  // See: https://github.com/andykog/mobx-devtools/\n  __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({\n    spy: spy,\n    extras: {\n      getDebugName: getDebugName\n    },\n    $mobx: $mobx\n  });\n}\n\nexport { $mobx, FlowCancellationError, ObservableMap, ObservableSet, Reaction, allowStateChanges as _allowStateChanges, runInAction as _allowStateChangesInsideComputed, allowStateReadsEnd as _allowStateReadsEnd, allowStateReadsStart as _allowStateReadsStart, autoAction as _autoAction, _endAction, getAdministration as _getAdministration, getGlobalState as _getGlobalState, interceptReads as _interceptReads, isComputingDerivation as _isComputingDerivation, resetGlobalState as _resetGlobalState, _startAction, action, autorun, comparer, computed, configure, createAtom, apiDefineProperty as defineProperty, entries, extendObservable, flow, flowResult, get, getAtom, getDebugName, getDependencyTree, getObserverTree, has, intercept, isAction, isObservableValue as isBoxedObservable, isComputed, isComputedProp, isFlow, isFlowCancellationError, isObservable, isObservableArray, isObservableMap, isObservableObject, isObservableProp, isObservableSet, keys, makeAutoObservable, makeObservable, observable, observe, onBecomeObserved, onBecomeUnobserved, onReactionError, override, apiOwnKeys as ownKeys, reaction, remove, runInAction, set, spy, toJS, trace, transaction, untracked, values, when };\n//# sourceMappingURL=mobx.esm.js.map\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","var util = require('./util')\nvar slice = util.slice\nvar pluck = util.pluck\nvar each = util.each\nvar bind = util.bind\nvar create = util.create\nvar isList = util.isList\nvar isFunction = util.isFunction\nvar isObject = util.isObject\n\nmodule.exports = {\n\tcreateStore: createStore\n}\n\nvar storeAPI = {\n\tversion: '2.0.12',\n\tenabled: false,\n\t\n\t// get returns the value of the given key. If that value\n\t// is undefined, it returns optionalDefaultValue instead.\n\tget: function(key, optionalDefaultValue) {\n\t\tvar data = this.storage.read(this._namespacePrefix + key)\n\t\treturn this._deserialize(data, optionalDefaultValue)\n\t},\n\n\t// set will store the given value at key and returns value.\n\t// Calling set with value === undefined is equivalent to calling remove.\n\tset: function(key, value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.remove(key)\n\t\t}\n\t\tthis.storage.write(this._namespacePrefix + key, this._serialize(value))\n\t\treturn value\n\t},\n\n\t// remove deletes the key and value stored at the given key.\n\tremove: function(key) {\n\t\tthis.storage.remove(this._namespacePrefix + key)\n\t},\n\n\t// each will call the given callback once for each key-value pair\n\t// in this store.\n\teach: function(callback) {\n\t\tvar self = this\n\t\tthis.storage.each(function(val, namespacedKey) {\n\t\t\tcallback.call(self, self._deserialize(val), (namespacedKey || '').replace(self._namespaceRegexp, ''))\n\t\t})\n\t},\n\n\t// clearAll will remove all the stored key-value pairs in this store.\n\tclearAll: function() {\n\t\tthis.storage.clearAll()\n\t},\n\n\t// additional functionality that can't live in plugins\n\t// ---------------------------------------------------\n\n\t// hasNamespace returns true if this store instance has the given namespace.\n\thasNamespace: function(namespace) {\n\t\treturn (this._namespacePrefix == '__storejs_'+namespace+'_')\n\t},\n\n\t// createStore creates a store.js instance with the first\n\t// functioning storage in the list of storage candidates,\n\t// and applies the the given mixins to the instance.\n\tcreateStore: function() {\n\t\treturn createStore.apply(this, arguments)\n\t},\n\t\n\taddPlugin: function(plugin) {\n\t\tthis._addPlugin(plugin)\n\t},\n\t\n\tnamespace: function(namespace) {\n\t\treturn createStore(this.storage, this.plugins, namespace)\n\t}\n}\n\nfunction _warn() {\n\tvar _console = (typeof console == 'undefined' ? null : console)\n\tif (!_console) { return }\n\tvar fn = (_console.warn ? _console.warn : _console.log)\n\tfn.apply(_console, arguments)\n}\n\nfunction createStore(storages, plugins, namespace) {\n\tif (!namespace) {\n\t\tnamespace = ''\n\t}\n\tif (storages && !isList(storages)) {\n\t\tstorages = [storages]\n\t}\n\tif (plugins && !isList(plugins)) {\n\t\tplugins = [plugins]\n\t}\n\n\tvar namespacePrefix = (namespace ? '__storejs_'+namespace+'_' : '')\n\tvar namespaceRegexp = (namespace ? new RegExp('^'+namespacePrefix) : null)\n\tvar legalNamespaces = /^[a-zA-Z0-9_\\-]*$/ // alpha-numeric + underscore and dash\n\tif (!legalNamespaces.test(namespace)) {\n\t\tthrow new Error('store.js namespaces can only have alphanumerics + underscores and dashes')\n\t}\n\t\n\tvar _privateStoreProps = {\n\t\t_namespacePrefix: namespacePrefix,\n\t\t_namespaceRegexp: namespaceRegexp,\n\n\t\t_testStorage: function(storage) {\n\t\t\ttry {\n\t\t\t\tvar testStr = '__storejs__test__'\n\t\t\t\tstorage.write(testStr, testStr)\n\t\t\t\tvar ok = (storage.read(testStr) === testStr)\n\t\t\t\tstorage.remove(testStr)\n\t\t\t\treturn ok\n\t\t\t} catch(e) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\n\t\t_assignPluginFnProp: function(pluginFnProp, propName) {\n\t\t\tvar oldFn = this[propName]\n\t\t\tthis[propName] = function pluginFn() {\n\t\t\t\tvar args = slice(arguments, 0)\n\t\t\t\tvar self = this\n\n\t\t\t\t// super_fn calls the old function which was overwritten by\n\t\t\t\t// this mixin.\n\t\t\t\tfunction super_fn() {\n\t\t\t\t\tif (!oldFn) { return }\n\t\t\t\t\teach(arguments, function(arg, i) {\n\t\t\t\t\t\targs[i] = arg\n\t\t\t\t\t})\n\t\t\t\t\treturn oldFn.apply(self, args)\n\t\t\t\t}\n\n\t\t\t\t// Give mixing function access to super_fn by prefixing all mixin function\n\t\t\t\t// arguments with super_fn.\n\t\t\t\tvar newFnArgs = [super_fn].concat(args)\n\n\t\t\t\treturn pluginFnProp.apply(self, newFnArgs)\n\t\t\t}\n\t\t},\n\n\t\t_serialize: function(obj) {\n\t\t\treturn JSON.stringify(obj)\n\t\t},\n\n\t\t_deserialize: function(strVal, defaultVal) {\n\t\t\tif (!strVal) { return defaultVal }\n\t\t\t// It is possible that a raw string value has been previously stored\n\t\t\t// in a storage without using store.js, meaning it will be a raw\n\t\t\t// string value instead of a JSON serialized string. By defaulting\n\t\t\t// to the raw string value in case of a JSON parse error, we allow\n\t\t\t// for past stored values to be forwards-compatible with store.js\n\t\t\tvar val = ''\n\t\t\ttry { val = JSON.parse(strVal) }\n\t\t\tcatch(e) { val = strVal }\n\n\t\t\treturn (val !== undefined ? val : defaultVal)\n\t\t},\n\t\t\n\t\t_addStorage: function(storage) {\n\t\t\tif (this.enabled) { return }\n\t\t\tif (this._testStorage(storage)) {\n\t\t\t\tthis.storage = storage\n\t\t\t\tthis.enabled = true\n\t\t\t}\n\t\t},\n\n\t\t_addPlugin: function(plugin) {\n\t\t\tvar self = this\n\n\t\t\t// If the plugin is an array, then add all plugins in the array.\n\t\t\t// This allows for a plugin to depend on other plugins.\n\t\t\tif (isList(plugin)) {\n\t\t\t\teach(plugin, function(plugin) {\n\t\t\t\t\tself._addPlugin(plugin)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep track of all plugins we've seen so far, so that we\n\t\t\t// don't add any of them twice.\n\t\t\tvar seenPlugin = pluck(this.plugins, function(seenPlugin) {\n\t\t\t\treturn (plugin === seenPlugin)\n\t\t\t})\n\t\t\tif (seenPlugin) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.plugins.push(plugin)\n\n\t\t\t// Check that the plugin is properly formed\n\t\t\tif (!isFunction(plugin)) {\n\t\t\t\tthrow new Error('Plugins must be function values that return objects')\n\t\t\t}\n\n\t\t\tvar pluginProperties = plugin.call(this)\n\t\t\tif (!isObject(pluginProperties)) {\n\t\t\t\tthrow new Error('Plugins must return an object of function properties')\n\t\t\t}\n\n\t\t\t// Add the plugin function properties to this store instance.\n\t\t\teach(pluginProperties, function(pluginFnProp, propName) {\n\t\t\t\tif (!isFunction(pluginFnProp)) {\n\t\t\t\t\tthrow new Error('Bad plugin property: '+propName+' from plugin '+plugin.name+'. Plugins should only return functions.')\n\t\t\t\t}\n\t\t\t\tself._assignPluginFnProp(pluginFnProp, propName)\n\t\t\t})\n\t\t},\n\t\t\n\t\t// Put deprecated properties in the private API, so as to not expose it to accidential\n\t\t// discovery through inspection of the store object.\n\t\t\n\t\t// Deprecated: addStorage\n\t\taddStorage: function(storage) {\n\t\t\t_warn('store.addStorage(storage) is deprecated. Use createStore([storages])')\n\t\t\tthis._addStorage(storage)\n\t\t}\n\t}\n\n\tvar store = create(_privateStoreProps, storeAPI, {\n\t\tplugins: []\n\t})\n\tstore.raw = {}\n\teach(store, function(prop, propName) {\n\t\tif (isFunction(prop)) {\n\t\t\tstore.raw[propName] = bind(store, prop)\t\t\t\n\t\t}\n\t})\n\teach(storages, function(storage) {\n\t\tstore._addStorage(storage)\n\t})\n\teach(plugins, function(plugin) {\n\t\tstore._addPlugin(plugin)\n\t})\n\treturn store\n}\n","module.exports = [\n\t// Listed in order of usage preference\n\trequire('./localStorage'),\n\trequire('./oldFF-globalStorage'),\n\trequire('./oldIE-userDataStorage'),\n\trequire('./cookieStorage'),\n\trequire('./sessionStorage'),\n\trequire('./memoryStorage')\n]\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'localStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nfunction localStorage() {\n\treturn Global.localStorage\n}\n\nfunction read(key) {\n\treturn localStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn localStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = localStorage().length - 1; i >= 0; i--) {\n\t\tvar key = localStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn localStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn localStorage().clear()\n}\n","// oldFF-globalStorage provides storage for Firefox\n// versions 6 and 7, where no localStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldFF-globalStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar globalStorage = Global.globalStorage\n\nfunction read(key) {\n\treturn globalStorage[key]\n}\n\nfunction write(key, data) {\n\tglobalStorage[key] = data\n}\n\nfunction each(fn) {\n\tfor (var i = globalStorage.length - 1; i >= 0; i--) {\n\t\tvar key = globalStorage.key(i)\n\t\tfn(globalStorage[key], key)\n\t}\n}\n\nfunction remove(key) {\n\treturn globalStorage.removeItem(key)\n}\n\nfunction clearAll() {\n\teach(function(key, _) {\n\t\tdelete globalStorage[key]\n\t})\n}\n","// oldIE-userDataStorage provides storage for Internet Explorer\n// versions 6 and 7, where no localStorage, sessionStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldIE-userDataStorage',\n\twrite: write,\n\tread: read,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar storageName = 'storejs'\nvar doc = Global.document\nvar _withStorageEl = _makeIEStorageElFunction()\nvar disable = (Global.navigator ? Global.navigator.userAgent : '').match(/ (MSIE 8|MSIE 9|MSIE 10)\\./) // MSIE 9.x, MSIE 10.x\n\nfunction write(unfixedKey, data) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.setAttribute(fixedKey, data)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction read(unfixedKey) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\tvar res = null\n\t_withStorageEl(function(storageEl) {\n\t\tres = storageEl.getAttribute(fixedKey)\n\t})\n\treturn res\n}\n\nfunction each(callback) {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tvar attr = attributes[i]\n\t\t\tcallback(storageEl.getAttribute(attr.name), attr.name)\n\t\t}\n\t})\n}\n\nfunction remove(unfixedKey) {\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.removeAttribute(fixedKey)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction clearAll() {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tstorageEl.load(storageName)\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tstorageEl.removeAttribute(attributes[i].name)\n\t\t}\n\t\tstorageEl.save(storageName)\n\t})\n}\n\n// Helpers\n//////////\n\n// In IE7, keys cannot start with a digit or contain certain chars.\n// See https://github.com/marcuswestin/store.js/issues/40\n// See https://github.com/marcuswestin/store.js/issues/83\nvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\nfunction fixKey(key) {\n\treturn key.replace(/^\\d/, '___$&').replace(forbiddenCharsRegex, '___')\n}\n\nfunction _makeIEStorageElFunction() {\n\tif (!doc || !doc.documentElement || !doc.documentElement.addBehavior) {\n\t\treturn null\n\t}\n\tvar scriptTag = 'script',\n\t\tstorageOwner,\n\t\tstorageContainer,\n\t\tstorageEl\n\n\t// Since #userData storage applies only to specific paths, we need to\n\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t// as a pretty safe option, since all browsers already make a request to\n\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t// since the iframe access rules appear to allow direct access and\n\t// manipulation of the document element, even for a 404 page.  This\n\t// document can be used instead of the current document (which would\n\t// have been limited to the current path) to perform #userData storage.\n\ttry {\n\t\t/* global ActiveXObject */\n\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\tstorageContainer.open()\n\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\tstorageContainer.close()\n\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\tstorageEl = storageOwner.createElement('div')\n\t} catch(e) {\n\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t// security settings or otherwse), fall back to per-path storage\n\t\tstorageEl = doc.createElement('div')\n\t\tstorageOwner = doc.body\n\t}\n\n\treturn function(storeFunction) {\n\t\tvar args = [].slice.call(arguments, 0)\n\t\targs.unshift(storageEl)\n\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\tstorageOwner.appendChild(storageEl)\n\t\tstorageEl.addBehavior('#default#userData')\n\t\tstorageEl.load(storageName)\n\t\tstoreFunction.apply(this, args)\n\t\tstorageOwner.removeChild(storageEl)\n\t\treturn\n\t}\n}\n","// cookieStorage is useful Safari private browser mode, where localStorage\n// doesn't work but cookies do. This implementation is adopted from\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\n\nvar util = require('../src/util')\nvar Global = util.Global\nvar trim = util.trim\n\nmodule.exports = {\n\tname: 'cookieStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar doc = Global.document\n\nfunction read(key) {\n\tif (!key || !_has(key)) { return null }\n\tvar regexpStr = \"(?:^|.*;\\\\s*)\" +\n\t\tescape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") +\n\t\t\"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"\n\treturn unescape(doc.cookie.replace(new RegExp(regexpStr), \"$1\"))\n}\n\nfunction each(callback) {\n\tvar cookies = doc.cookie.split(/; ?/g)\n\tfor (var i = cookies.length - 1; i >= 0; i--) {\n\t\tif (!trim(cookies[i])) {\n\t\t\tcontinue\n\t\t}\n\t\tvar kvp = cookies[i].split('=')\n\t\tvar key = unescape(kvp[0])\n\t\tvar val = unescape(kvp[1])\n\t\tcallback(val, key)\n\t}\n}\n\nfunction write(key, data) {\n\tif(!key) { return }\n\tdoc.cookie = escape(key) + \"=\" + escape(data) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\"\n}\n\nfunction remove(key) {\n\tif (!key || !_has(key)) {\n\t\treturn\n\t}\n\tdoc.cookie = escape(key) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\"\n}\n\nfunction clearAll() {\n\teach(function(_, key) {\n\t\tremove(key)\n\t})\n}\n\nfunction _has(key) {\n\treturn (new RegExp(\"(?:^|;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(doc.cookie)\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'sessionStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll\n}\n\nfunction sessionStorage() {\n\treturn Global.sessionStorage\n}\n\nfunction read(key) {\n\treturn sessionStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn sessionStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = sessionStorage().length - 1; i >= 0; i--) {\n\t\tvar key = sessionStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn sessionStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn sessionStorage().clear()\n}\n","// memoryStorage is a useful last fallback to ensure that the store\n// is functions (meaning store.get(), store.set(), etc will all function).\n// However, stored values will not persist when the browser navigates to\n// a new page or reloads the current page.\n\nmodule.exports = {\n\tname: 'memoryStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar memoryStorage = {}\n\nfunction read(key) {\n\treturn memoryStorage[key]\n}\n\nfunction write(key, data) {\n\tmemoryStorage[key] = data\n}\n\nfunction each(callback) {\n\tfor (var key in memoryStorage) {\n\t\tif (memoryStorage.hasOwnProperty(key)) {\n\t\t\tcallback(memoryStorage[key], key)\n\t\t}\n\t}\n}\n\nfunction remove(key) {\n\tdelete memoryStorage[key]\n}\n\nfunction clearAll(key) {\n\tmemoryStorage = {}\n}\n","module.exports = json2Plugin\n\nfunction json2Plugin() {\n\trequire('./lib/json2')\n\treturn {}\n}\n","/* eslint-disable */\n\n//  json2.js\n//  2016-10-28\n//  Public Domain.\n//  NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n//  See http://www.JSON.org/js.html\n//  This code should be minified before deployment.\n//  See http://javascript.crockford.com/jsmin.html\n\n//  USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n//  NOT CONTROL.\n\n//  This file creates a global JSON object containing two methods: stringify\n//  and parse. This file provides the ES5 JSON capability to ES3 systems.\n//  If a project might run on IE8 or earlier, then this file should be included.\n//  This file does nothing on ES5 systems.\n\n//      JSON.stringify(value, replacer, space)\n//          value       any JavaScript value, usually an object or array.\n//          replacer    an optional parameter that determines how object\n//                      values are stringified for objects. It can be a\n//                      function or an array of strings.\n//          space       an optional parameter that specifies the indentation\n//                      of nested structures. If it is omitted, the text will\n//                      be packed without extra whitespace. If it is a number,\n//                      it will specify the number of spaces to indent at each\n//                      level. If it is a string (such as \"\\t\" or \"&nbsp;\"),\n//                      it contains the characters used to indent at each level.\n//          This method produces a JSON text from a JavaScript value.\n//          When an object value is found, if the object contains a toJSON\n//          method, its toJSON method will be called and the result will be\n//          stringified. A toJSON method does not serialize: it returns the\n//          value represented by the name/value pair that should be serialized,\n//          or undefined if nothing should be serialized. The toJSON method\n//          will be passed the key associated with the value, and this will be\n//          bound to the value.\n\n//          For example, this would serialize Dates as ISO strings.\n\n//              Date.prototype.toJSON = function (key) {\n//                  function f(n) {\n//                      // Format integers to have at least two digits.\n//                      return (n < 10)\n//                          ? \"0\" + n\n//                          : n;\n//                  }\n//                  return this.getUTCFullYear()   + \"-\" +\n//                       f(this.getUTCMonth() + 1) + \"-\" +\n//                       f(this.getUTCDate())      + \"T\" +\n//                       f(this.getUTCHours())     + \":\" +\n//                       f(this.getUTCMinutes())   + \":\" +\n//                       f(this.getUTCSeconds())   + \"Z\";\n//              };\n\n//          You can provide an optional replacer method. It will be passed the\n//          key and value of each member, with this bound to the containing\n//          object. The value that is returned from your method will be\n//          serialized. If your method returns undefined, then the member will\n//          be excluded from the serialization.\n\n//          If the replacer parameter is an array of strings, then it will be\n//          used to select the members to be serialized. It filters the results\n//          such that only members with keys listed in the replacer array are\n//          stringified.\n\n//          Values that do not have JSON representations, such as undefined or\n//          functions, will not be serialized. Such values in objects will be\n//          dropped; in arrays they will be replaced with null. You can use\n//          a replacer function to replace those with JSON values.\n\n//          JSON.stringify(undefined) returns undefined.\n\n//          The optional space parameter produces a stringification of the\n//          value that is filled with line breaks and indentation to make it\n//          easier to read.\n\n//          If the space parameter is a non-empty string, then that string will\n//          be used for indentation. If the space parameter is a number, then\n//          the indentation will be that many spaces.\n\n//          Example:\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}]);\n//          // text is '[\"e\",{\"pluribus\":\"unum\"}]'\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}], null, \"\\t\");\n//          // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\n\n//          text = JSON.stringify([new Date()], function (key, value) {\n//              return this[key] instanceof Date\n//                  ? \"Date(\" + this[key] + \")\"\n//                  : value;\n//          });\n//          // text is '[\"Date(---current time---)\"]'\n\n//      JSON.parse(text, reviver)\n//          This method parses a JSON text to produce an object or array.\n//          It can throw a SyntaxError exception.\n\n//          The optional reviver parameter is a function that can filter and\n//          transform the results. It receives each of the keys and values,\n//          and its return value is used instead of the original value.\n//          If it returns what it received, then the structure is not modified.\n//          If it returns undefined then the member is deleted.\n\n//          Example:\n\n//          // Parse the text. Values that look like ISO date strings will\n//          // be converted to Date objects.\n\n//          myData = JSON.parse(text, function (key, value) {\n//              var a;\n//              if (typeof value === \"string\") {\n//                  a =\n//   /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n//                  if (a) {\n//                      return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n//                          +a[5], +a[6]));\n//                  }\n//              }\n//              return value;\n//          });\n\n//          myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\n//              var d;\n//              if (typeof value === \"string\" &&\n//                      value.slice(0, 5) === \"Date(\" &&\n//                      value.slice(-1) === \")\") {\n//                  d = new Date(value.slice(5, -1));\n//                  if (d) {\n//                      return d;\n//                  }\n//              }\n//              return value;\n//          });\n\n//  This is a reference implementation. You are free to copy, modify, or\n//  redistribute.\n\n/*jslint\n    eval, for, this\n*/\n\n/*property\n    JSON, apply, call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\n    test, toJSON, toString, valueOf\n*/\n\n\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\n\nif (typeof JSON !== \"object\") {\n    JSON = {};\n}\n\n(function () {\n    \"use strict\";\n\n    var rx_one = /^[\\],:{}\\s]*$/;\n    var rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n    var rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n    var rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\n    var rx_escapable = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n    var rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10\n            ? \"0\" + n\n            : n;\n    }\n\n    function this_value() {\n        return this.valueOf();\n    }\n\n    if (typeof Date.prototype.toJSON !== \"function\") {\n\n        Date.prototype.toJSON = function () {\n\n            return isFinite(this.valueOf())\n                ? this.getUTCFullYear() + \"-\" +\n                        f(this.getUTCMonth() + 1) + \"-\" +\n                        f(this.getUTCDate()) + \"T\" +\n                        f(this.getUTCHours()) + \":\" +\n                        f(this.getUTCMinutes()) + \":\" +\n                        f(this.getUTCSeconds()) + \"Z\"\n                : null;\n        };\n\n        Boolean.prototype.toJSON = this_value;\n        Number.prototype.toJSON = this_value;\n        String.prototype.toJSON = this_value;\n    }\n\n    var gap;\n    var indent;\n    var meta;\n    var rep;\n\n\n    function quote(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n\n        rx_escapable.lastIndex = 0;\n        return rx_escapable.test(string)\n            ? \"\\\"\" + string.replace(rx_escapable, function (a) {\n                var c = meta[a];\n                return typeof c === \"string\"\n                    ? c\n                    : \"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + \"\\\"\"\n            : \"\\\"\" + string + \"\\\"\";\n    }\n\n\n    function str(key, holder) {\n\n// Produce a string from holder[key].\n\n        var i;          // The loop counter.\n        var k;          // The member key.\n        var v;          // The member value.\n        var length;\n        var mind = gap;\n        var partial;\n        var value = holder[key];\n\n// If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value && typeof value === \"object\" &&\n                typeof value.toJSON === \"function\") {\n            value = value.toJSON(key);\n        }\n\n// If we were called with a replacer function, then call the replacer to\n// obtain a replacement value.\n\n        if (typeof rep === \"function\") {\n            value = rep.call(holder, key, value);\n        }\n\n// What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case \"string\":\n            return quote(value);\n\n        case \"number\":\n\n// JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value)\n                ? String(value)\n                : \"null\";\n\n        case \"boolean\":\n        case \"null\":\n\n// If the value is a boolean or null, convert it to a string. Note:\n// typeof null does not produce \"null\". The case is included here in\n// the remote chance that this gets fixed someday.\n\n            return String(value);\n\n// If the type is \"object\", we might be dealing with an object or an array or\n// null.\n\n        case \"object\":\n\n// Due to a specification blunder in ECMAScript, typeof null is \"object\",\n// so watch out for that case.\n\n            if (!value) {\n                return \"null\";\n            }\n\n// Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n// Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n\n// The value is an array. Stringify every element. Use null as a placeholder\n// for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || \"null\";\n                }\n\n// Join all of the elements together, separated with commas, and wrap them in\n// brackets.\n\n                v = partial.length === 0\n                    ? \"[]\"\n                    : gap\n                        ? \"[\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"]\"\n                        : \"[\" + partial.join(\",\") + \"]\";\n                gap = mind;\n                return v;\n            }\n\n// If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === \"object\") {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === \"string\") {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            } else {\n\n// Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            }\n\n// Join all of the member texts together, separated with commas,\n// and wrap them in braces.\n\n            v = partial.length === 0\n                ? \"{}\"\n                : gap\n                    ? \"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\"\n                    : \"{\" + partial.join(\",\") + \"}\";\n            gap = mind;\n            return v;\n        }\n    }\n\n// If the JSON object does not yet have a stringify method, give it one.\n\n    if (typeof JSON.stringify !== \"function\") {\n        meta = {    // table of character substitutions\n            \"\\b\": \"\\\\b\",\n            \"\\t\": \"\\\\t\",\n            \"\\n\": \"\\\\n\",\n            \"\\f\": \"\\\\f\",\n            \"\\r\": \"\\\\r\",\n            \"\\\"\": \"\\\\\\\"\",\n            \"\\\\\": \"\\\\\\\\\"\n        };\n        JSON.stringify = function (value, replacer, space) {\n\n// The stringify method takes a value and an optional replacer, and an optional\n// space parameter, and returns a JSON text. The replacer can be a function\n// that can replace values, or an array of strings that will select the keys.\n// A default replacer method can be provided. Use of the space parameter can\n// produce text that is more easily readable.\n\n            var i;\n            gap = \"\";\n            indent = \"\";\n\n// If the space parameter is a number, make an indent string containing that\n// many spaces.\n\n            if (typeof space === \"number\") {\n                for (i = 0; i < space; i += 1) {\n                    indent += \" \";\n                }\n\n// If the space parameter is a string, it will be used as the indent string.\n\n            } else if (typeof space === \"string\") {\n                indent = space;\n            }\n\n// If there is a replacer, it must be a function or an array.\n// Otherwise, throw an error.\n\n            rep = replacer;\n            if (replacer && typeof replacer !== \"function\" &&\n                    (typeof replacer !== \"object\" ||\n                    typeof replacer.length !== \"number\")) {\n                throw new Error(\"JSON.stringify\");\n            }\n\n// Make a fake root object containing our value under the key of \"\".\n// Return the result of stringifying the value.\n\n            return str(\"\", {\"\": value});\n        };\n    }\n\n\n// If the JSON object does not yet have a parse method, give it one.\n\n    if (typeof JSON.parse !== \"function\") {\n        JSON.parse = function (text, reviver) {\n\n// The parse method takes a text and an optional reviver function, and returns\n// a JavaScript value if the text is a valid JSON text.\n\n            var j;\n\n            function walk(holder, key) {\n\n// The walk method is used to recursively walk the resulting structure so\n// that modifications can be made.\n\n                var k;\n                var v;\n                var value = holder[key];\n                if (value && typeof value === \"object\") {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            } else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n\n\n// Parsing happens in four stages. In the first stage, we replace certain\n// Unicode characters with escape sequences. JavaScript handles many characters\n// incorrectly, either silently deleting them, or treating them as line endings.\n\n            text = String(text);\n            rx_dangerous.lastIndex = 0;\n            if (rx_dangerous.test(text)) {\n                text = text.replace(rx_dangerous, function (a) {\n                    return \"\\\\u\" +\n                            (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n\n// In the second stage, we run the text against regular expressions that look\n// for non-JSON patterns. We are especially concerned with \"()\" and \"new\"\n// because they can cause invocation, and \"=\" because it can cause mutation.\n// But just to be safe, we want to reject all unexpected forms.\n\n// We split the second stage into 4 regexp operations in order to work around\n// crippling inefficiencies in IE's and Safari's regexp engines. First we\n// replace the JSON backslash pairs with \"@\" (a non-JSON character). Second, we\n// replace all simple value tokens with \"]\" characters. Third, we delete all\n// open brackets that follow a colon or comma or that begin the text. Finally,\n// we look to see that the remaining characters are only whitespace or \"]\" or\n// \",\" or \":\" or \"{\" or \"}\". If that is so, then the text is safe for eval.\n\n            if (\n                rx_one.test(\n                    text\n                        .replace(rx_two, \"@\")\n                        .replace(rx_three, \"]\")\n                        .replace(rx_four, \"\")\n                )\n            ) {\n\n// In the third stage we use the eval function to compile the text into a\n// JavaScript structure. The \"{\" operator is subject to a syntactic ambiguity\n// in JavaScript: it can begin a block or an object literal. We wrap the text\n// in parens to eliminate the ambiguity.\n\n                j = eval(\"(\" + text + \")\");\n\n// In the optional fourth stage, we recursively walk the new structure, passing\n// each name/value pair to a reviver function for possible transformation.\n\n                return (typeof reviver === \"function\")\n                    ? walk({\"\": j}, \"\")\n                    : j;\n            }\n\n// If the text is not JSON parseable, then a SyntaxError is thrown.\n\n            throw new SyntaxError(\"JSON.parse\");\n        };\n    }\n}());","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AlreadyRegistryError = exports.NoRegistryError = exports.NotfoundTypeError = exports.MultiImplementError = exports.IocContext = exports.DefaultRegisterOption = exports.Config = void 0;\nvar utils_1 = require(\"./utils\");\nvar metadata_1 = require(\"./class/metadata\");\nvar ClassLoader_1 = require(\"./class/ClassLoader\");\nvar guard_1 = require(\"./utils/guard\");\nvar aspect_1 = require(\"./decorator/aspect\");\nvar Config = /** @class */ (function () {\n    function Config() {\n        /** auto register class self, when class not found. default: false */\n        this.autoRegisterSelf = false;\n        /** constructor inject, MUST in TypeScript with emitDecoratorMetadata and use decorator with class, default: true */\n        this.constructorInject = true;\n        /** use class loader for autowired default: true */\n        this.useClassLoader = true;\n    }\n    return Config;\n}());\nexports.Config = Config;\nexports.DefaultRegisterOption = {\n    singleton: true,\n    autoNew: true,\n};\n/** ioc context */\nvar IocContext = /** @class */ (function () {\n    function IocContext(config) {\n        if (config === void 0) { config = {}; }\n        this.config = config;\n        this.components = new Map();\n        this.setConfig(Object.assign(new Config(), config));\n    }\n    Object.defineProperty(IocContext.prototype, \"classLoader\", {\n        get: function () {\n            return this._classLoader;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IocContext, \"DefaultInstance\", {\n        get: function () {\n            return (this.defaultInstance || ((this.defaultInstance = new IocContext()), this.defaultInstance));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * merge config\n     * @param config new partial config\n     */\n    IocContext.prototype.setConfig = function (config) {\n        Object.assign(this.config, config);\n        this._classLoader =\n            this.config.useClassLoader === true\n                ? ClassLoader_1.classLoader\n                : this.config.useClassLoader === false\n                    ? undefined\n                    : this.config.useClassLoader;\n    };\n    /**\n     * remove instance of key\n     * @param keyOrType key\n     */\n    IocContext.prototype.remove = function (keyOrType) {\n        var key = (0, utils_1.getGlobalType)(keyOrType);\n        var store = this.components.get(key);\n        if (store) {\n            this.preDestroyInstance(store);\n            return this.components.delete(key);\n        }\n        return false;\n    };\n    /** clear all */\n    IocContext.prototype.clear = function () {\n        var _this = this;\n        Array.from(this.components.values()).forEach(function (ele) {\n            _this.preDestroyInstance(ele);\n        });\n        this.components.clear();\n    };\n    /**\n     * get instance of key\n     * @param keyOrType key\n     * @param opt\n     */\n    IocContext.prototype.get = function (keyOrType, opt) {\n        var _this = this;\n        if (opt === void 0) { opt = {}; }\n        var key = (0, utils_1.getGlobalType)(keyOrType);\n        var store = this.components.get(key);\n        if (store) {\n            return this.returnValue(store, opt.forceNew);\n        }\n        if (this.config.notFoundHandler) {\n            var data = this.config.notFoundHandler(keyOrType);\n            if (data !== undefined) {\n                return data;\n            }\n        }\n        if (opt.useClassLoader !== false && this.classLoader) {\n            var type = keyOrType;\n            var classes = this.classLoader.getImplementClasses(type);\n            switch (classes.length) {\n                case 1:\n                    // class loader is only responsible for matching and not for registration.\n                    return this.get(classes[0].type, __assign(__assign({}, opt), { sourceType: opt.sourceType || type }));\n                case 0:\n                    break;\n                default:\n                    // if an instance of one of the classes already exists, the match takes precedence\n                    var instances = classes.filter(function (ele) { return _this.has(ele.type, true); });\n                    if (instances.length === 1) {\n                        return this.get(instances[0].type, opt);\n                    }\n                    if (this.config.conflictHandler) {\n                        var one = this.config.conflictHandler(type, classes, opt.sourceCls\n                            ? {\n                                type: opt.sourceCls,\n                                info: this.classLoader.getClassInfo(opt.sourceCls),\n                            }\n                            : undefined);\n                        if (one !== undefined) {\n                            // class loader is only responsible for matching and not for registration.\n                            return this.get(one, opt);\n                        }\n                    }\n                    // BaseClass has @injectable\n                    if ((0, utils_1.isClass)(keyOrType) && (0, metadata_1.getMetadata)(type).injectable) {\n                        this.register(type);\n                        return this.get(type, opt);\n                    }\n                    throw new MultiImplementError(type, key);\n            }\n        }\n        if (this.config.parentContext) {\n            return this.config.parentContext.get(opt.sourceType || keyOrType);\n        }\n        var canAutoRegister = (0, utils_1.isClass)(keyOrType) &&\n            (this.config.autoRegisterSelf || (0, metadata_1.getMetadata)(keyOrType).injectable);\n        if (canAutoRegister) {\n            this.register(keyOrType);\n            return this.get(keyOrType, opt);\n        }\n        throw new NotfoundTypeError(keyOrType, key);\n    };\n    /**\n     * get instances for key\n     * @param keyOrType key (super class or interface, use `@classInfo`)\n     * @param opt\n     */\n    IocContext.prototype.getImports = function (keyOrType, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, cache = _b.cache;\n        var type = keyOrType;\n        if (cache && this.has(type)) {\n            return this.get(type);\n        }\n        if (!this.classLoader) {\n            return [];\n        }\n        var data = this.classLoader.getImplementClasses(type).map(function (clsInfo) {\n            return _this.get(clsInfo.type);\n        });\n        if (cache) {\n            this.register(data, type);\n        }\n        return data;\n    };\n    /**\n     * instance of key in context\n     * @param keyOrType key\n     * @param deep deep search parent context\n     */\n    IocContext.prototype.has = function (keyOrType, deep) {\n        if (deep === void 0) { deep = false; }\n        var key = (0, utils_1.getGlobalType)(keyOrType);\n        return !!(this.components.has(key) ||\n            (deep && this.config.parentContext && this.config.parentContext.has(key, deep)));\n    };\n    IocContext.prototype.replace = function (keyOrType, newData, options, registerIfNotExist) {\n        if (registerIfNotExist === void 0) { registerIfNotExist = false; }\n        var key = (0, utils_1.getGlobalType)(keyOrType);\n        var data = this.components.get(key);\n        if (data) {\n            this.components.set(key, this.newStore(newData, options || data.options));\n        }\n        else if (registerIfNotExist) {\n            this.register(newData, keyOrType, options);\n        }\n        else {\n            throw new NoRegistryError(key);\n        }\n    };\n    /**\n     * register key\n     * @param data value of key (maybe instance, class, factory function or value)\n     * @param key key\n     * @param options register option\n     */\n    IocContext.prototype.register = function (data, key, options) {\n        if (options === void 0) { options = exports.DefaultRegisterOption; }\n        if (key) {\n            if (!this.canBeKey(key)) {\n                throw new Error('key require string, symbol or class.');\n            }\n        }\n        else {\n            if (!this.canBeKey(data)) {\n                throw new Error('when data is not string, symbol or class, require a key.');\n            }\n        }\n        var dataType = (key && (0, utils_1.getGlobalType)(key)) || (data && (0, utils_1.getGlobalType)(data));\n        if (this.components.has(dataType)) {\n            throw new AlreadyRegistryError(dataType);\n        }\n        options = __assign(__assign({}, exports.DefaultRegisterOption), options);\n        var store = this.newStore(data, options);\n        this.components.set(dataType, store);\n    };\n    /**\n     * complete instance inject\n     * @param instance\n     * @param opt\n     */\n    IocContext.prototype.inject = function (instance, opt) {\n        var _this = this;\n        if (opt === void 0) { opt = {\n            autoRunPostConstruct: true,\n        }; }\n        var iocSelf = this;\n        var classType = instance.constructor;\n        (0, metadata_1.getMetadataField)(classType, 'injects').forEach(function (inject) {\n            var key = inject.key, typeCls = inject.typeCls, optional = inject.optional, singleton = inject.singleton;\n            var descriptor = Object.getOwnPropertyDescriptor(instance, key);\n            var defaultValue = descriptor && descriptor.value;\n            var allowOptional = optional || defaultValue !== undefined;\n            if ('inject' === inject.type) {\n                Object.defineProperty(instance, key, {\n                    configurable: true,\n                    writable: true,\n                    value: (0, guard_1.guard)(function () {\n                        return _this.get(typeCls, __assign({ sourceCls: classType }, (singleton ? {} : { forceNew: true })));\n                    }, {\n                        defaultValue: defaultValue,\n                        onError: function (err) {\n                            if (!allowOptional) {\n                                err.message += \"\\n\\tSource: \".concat(classType.name, \".\").concat(key.toString());\n                                throw err;\n                            }\n                        },\n                    }),\n                });\n            }\n            if (['lazyInject', 'imports'].includes(inject.type)) {\n                var always_1 = inject.always;\n                Object.defineProperty(instance, key, {\n                    configurable: true,\n                    get: function () {\n                        var hasErr = false;\n                        var data = (0, guard_1.guard)(function () {\n                            switch (inject.type) {\n                                case 'lazyInject':\n                                    return iocSelf.get(typeCls, __assign({ sourceCls: classType }, (singleton ? {} : { forceNew: true })));\n                                case 'imports':\n                                    return iocSelf.getImports(typeCls, { cache: !always_1 });\n                            }\n                        }, {\n                            defaultValue: defaultValue,\n                            onError: function (err) {\n                                hasErr = true;\n                                if (!allowOptional) {\n                                    err.message += \"\\n\\tSource: \".concat(classType.name, \".\").concat(key.toString());\n                                    throw err;\n                                }\n                            },\n                        });\n                        if (!hasErr && !always_1) {\n                            Object.defineProperty(this, key, {\n                                configurable: true,\n                                writable: true,\n                                value: data,\n                            });\n                        }\n                        return data;\n                    },\n                    set: function (value) {\n                        Object.defineProperty(this, key, {\n                            configurable: true,\n                            writable: true,\n                            value: value,\n                        });\n                    },\n                });\n            }\n        });\n        (0, metadata_1.getMetadataField)(classType, 'aspects').forEach(function (aspect) {\n            var oriFn = instance[aspect.key];\n            var newFn = (0, aspect_1.genAspectWrapper)(_this, aspect.point, oriFn);\n            Object.defineProperty(instance, aspect.key, {\n                configurable: true,\n                value: newFn,\n            });\n        });\n        if (opt.autoRunPostConstruct) {\n            this.runPostConstruct(instance);\n        }\n    };\n    IocContext.prototype.runPostConstruct = function (instance) {\n        Array.from(new Set((0, metadata_1.getMetadataField)(instance.constructor, 'postConstruct').map(function (p) { return p.key; }))).forEach(function (key) {\n            instance[key]();\n        });\n    };\n    IocContext.prototype.runPreDestroy = function (instance) {\n        Array.from(new Set((0, metadata_1.getMetadataField)(instance.constructor, 'preDestroy').map(function (p) { return p.key; }))).forEach(function (key) {\n            instance[key]();\n        });\n    };\n    /**\n     * create child context, inherit this context\n     * @param config\n     */\n    IocContext.prototype.createChildContext = function (config) {\n        return new IocContext(__assign(__assign(__assign({}, this.config), (config || {})), { parentContext: this }));\n    };\n    /**\n     * run preDestroy method of instance\n     * @param store instance store\n     */\n    IocContext.prototype.preDestroyInstance = function (store) {\n        if (!store.inited) {\n            return;\n        }\n        this.runPreDestroy(store.value);\n    };\n    IocContext.prototype.newStore = function (data, options) {\n        var _this = this;\n        var dataIsFunction = typeof data === 'function';\n        var dataIsClass = dataIsFunction && (0, utils_1.isClass)(data);\n        var needFactory = dataIsFunction && options.autoNew;\n        return {\n            inited: needFactory ? false : true,\n            factory: needFactory\n                ? function () {\n                    if (dataIsClass) {\n                        var ClsType_1 = data;\n                        var args = [];\n                        if (_this.config.constructorInject && Reflect && Reflect.getMetadata) {\n                            var paramTypes = Reflect.getMetadata('design:paramtypes', ClsType_1);\n                            if (paramTypes) {\n                                args = paramTypes.map(function (type) {\n                                    if (type === ClsType_1 ||\n                                        type === undefined ||\n                                        type === null ||\n                                        type === Number ||\n                                        type === Error ||\n                                        type === Object ||\n                                        type === String ||\n                                        type === Boolean ||\n                                        type === Array ||\n                                        type === Function) {\n                                        return null;\n                                    }\n                                    return _this.get(type);\n                                });\n                            }\n                        }\n                        var value = new (ClsType_1.bind.apply(ClsType_1, __spreadArray([void 0], args, false)))();\n                        _this.inject(value);\n                        return _this.config.createInstanceHook\n                            ? _this.config.createInstanceHook(value, _this)\n                            : value;\n                    }\n                    else {\n                        var func = data;\n                        return func(_this);\n                    }\n                }\n                : undefined,\n            value: needFactory ? undefined : data,\n            options: options,\n        };\n    };\n    IocContext.prototype.canBeKey = function (obj) {\n        var type = typeof obj;\n        // ie11 symbol is object\n        if (type === 'object') {\n            return obj.toString() !== '[object Object]';\n        }\n        return ['function', 'string', 'symbol'].includes(type);\n    };\n    IocContext.prototype.returnValue = function (data, forceNew) {\n        if (forceNew === void 0) { forceNew = false; }\n        if (data.options.singleton && !forceNew) {\n            return data.inited\n                ? data.value\n                : ((data.inited = true), (data.value = data.factory()), data.value);\n        }\n        else {\n            // TODO use WeakMap collection for destroy\n            return data.factory();\n        }\n    };\n    IocContext.prototype.toJSON = function () {\n        return { type: 'power-di.IocContext', message: 'NoSerializable' };\n    };\n    return IocContext;\n}());\nexports.IocContext = IocContext;\nvar MultiImplementError = /** @class */ (function (_super) {\n    __extends(MultiImplementError, _super);\n    function MultiImplementError(type, key) {\n        return _super.call(this, \"Has multi Classes of implement type: \".concat(type.name, \"(\").concat((0, utils_1.symbolString)(key), \")\")) || this;\n    }\n    return MultiImplementError;\n}(Error));\nexports.MultiImplementError = MultiImplementError;\nvar NotfoundTypeError = /** @class */ (function (_super) {\n    __extends(NotfoundTypeError, _super);\n    function NotfoundTypeError(type, key) {\n        return _super.call(this, \"Notfound type: \".concat(type.name || (0, utils_1.symbolString)(type), \"(\").concat((0, utils_1.symbolString)(key), \")\")) || this;\n    }\n    return NotfoundTypeError;\n}(Error));\nexports.NotfoundTypeError = NotfoundTypeError;\nvar NoRegistryError = /** @class */ (function (_super) {\n    __extends(NoRegistryError, _super);\n    function NoRegistryError(key) {\n        return _super.call(this, \"the key:[\".concat((0, utils_1.symbolString)(key), \"] is no registry.\")) || this;\n    }\n    return NoRegistryError;\n}(Error));\nexports.NoRegistryError = NoRegistryError;\nvar AlreadyRegistryError = /** @class */ (function (_super) {\n    __extends(AlreadyRegistryError, _super);\n    function AlreadyRegistryError(key) {\n        return _super.call(this, \"the key:[\".concat((0, utils_1.symbolString)(key), \"] is already registry.\")) || this;\n    }\n    return AlreadyRegistryError;\n}(Error));\nexports.AlreadyRegistryError = AlreadyRegistryError;\n//# sourceMappingURL=IocContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getGlobalTypeByDecorator = exports.getClsTypeByDecorator = void 0;\nrequire(\"reflect-metadata\");\nvar getGlobalType_1 = require(\"./getGlobalType\");\nfunction getClsTypeByDecorator(type, target, key) {\n    if (!type && Reflect && Reflect.getMetadata) {\n        type = Reflect.getMetadata('design:type', target, key);\n    }\n    return type;\n}\nexports.getClsTypeByDecorator = getClsTypeByDecorator;\nfunction getGlobalTypeByDecorator(type, target, key) {\n    return (0, getGlobalType_1.getGlobalType)(getClsTypeByDecorator(type, target, key));\n}\nexports.getGlobalTypeByDecorator = getGlobalTypeByDecorator;\n//# sourceMappingURL=getByDecorator.js.map","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nameSymbol = void 0;\n/** class name */\nexports.nameSymbol = Symbol('className');\n//# sourceMappingURL=ClassInfo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRefMap = void 0;\nvar getGlobalType_1 = require(\"./getGlobalType\");\nvar metadata_1 = require(\"../class/metadata\");\nfunction getRefMap(clsType, initMaps) {\n    if (initMaps === void 0) { initMaps = {}; }\n    var maps = initMaps;\n    function scan(clsType) {\n        var type = (0, getGlobalType_1.symbolString)((0, getGlobalType_1.getGlobalType)(clsType));\n        if (maps[type]) {\n            return;\n        }\n        var refs = (maps[type] = {\n            count: 0,\n            deps: [],\n        });\n        (0, metadata_1.getMetadataField)(clsType, 'injects').forEach(function (inj) {\n            var globalType = (0, getGlobalType_1.symbolString)(inj.globalType);\n            scan(inj.typeCls);\n            maps[globalType].count++;\n            refs.deps.push({\n                prop: inj.key,\n                type: globalType,\n            });\n        });\n    }\n    scan(clsType);\n    return maps;\n}\nexports.getRefMap = getRefMap;\n//# sourceMappingURL=getRefMap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./classInfo\"), exports);\n__exportStar(require(\"./inject\"), exports);\n__exportStar(require(\"./injectable\"), exports);\n__exportStar(require(\"./imports\"), exports);\n__exportStar(require(\"./postConstruct\"), exports);\n__exportStar(require(\"./aspect\"), exports);\n__exportStar(require(\"./preDestroy\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.classInfo = void 0;\nvar class_1 = require(\"../class\");\nvar metadata_1 = require(\"../class/metadata\");\nvar ClassLoader_1 = require(\"../class/ClassLoader\");\nfunction classInfo(info) {\n    if (info === void 0) { info = {}; }\n    return function (target) {\n        if (info.name) {\n            Object.defineProperty(target, class_1.nameSymbol, {\n                enumerable: false,\n                writable: false,\n                configurable: false,\n                value: info.name,\n            });\n        }\n        // prevent cache is incorrect\n        if (ClassLoader_1.classLoader.hasClass(target)) {\n            ClassLoader_1.classLoader.unregisterClass(target);\n        }\n        Object.assign((0, metadata_1.getMetadata)(target).classInfo, {\n        // default value\n        }, info);\n        ClassLoader_1.classLoader.registerClass(target);\n    };\n}\nexports.classInfo = classInfo;\n//# sourceMappingURL=classInfo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inject = void 0;\nvar utils_1 = require(\"../utils\");\nvar metadata_1 = require(\"../class/metadata\");\n/**\n * inject\n */\nfunction inject(_a) {\n    var _b = _a === void 0 ? {} : _a, type = _b.type, _c = _b.lazy, lazy = _c === void 0 ? true : _c, _d = _b.always, always = _d === void 0 ? false : _d, _e = _b.optional, optional = _e === void 0 ? false : _e, _f = _b.singleton, singleton = _f === void 0 ? true : _f;\n    return function (target, key) {\n        var typeCls = (0, utils_1.getClsTypeByDecorator)(type, target, key);\n        if (typeCls === undefined || typeCls === Object) {\n            throw new Error(\"CANNOT inject undefined! source: \".concat(target.constructor.name, \".\").concat(key.toString()));\n        }\n        (0, metadata_1.getMetadata)(target.constructor).injects.push({\n            key: key,\n            globalType: (0, utils_1.getGlobalTypeByDecorator)(type, target, key),\n            type: lazy ? 'lazyInject' : 'inject',\n            always: always,\n            typeCls: typeCls,\n            optional: optional,\n            singleton: singleton,\n        });\n    };\n}\nexports.inject = inject;\n//# sourceMappingURL=inject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.injectable = void 0;\nvar ClassLoader_1 = require(\"../class/ClassLoader\");\n/** can be inject */\nfunction injectable() {\n    return function (target) {\n        if (!ClassLoader_1.classLoader.hasClass(target)) {\n            ClassLoader_1.classLoader.registerClass(target);\n        }\n    };\n}\nexports.injectable = injectable;\n//# sourceMappingURL=injectable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.imports = void 0;\nvar utils_1 = require(\"../utils\");\nvar metadata_1 = require(\"../class/metadata\");\n/** subClasses/implements inject */\nfunction imports(_a) {\n    var type = _a.type, _b = _a.always, always = _b === void 0 ? false : _b;\n    return function (target, key) {\n        // if (getClsTypeByDecorator(undefined, target, key) !== Array) {\n        //   throw new Error(`${target.constructor.name}.${key.toString()}'s type need 'Array<T>' or 'T[]'.`);\n        // }\n        (0, metadata_1.getMetadata)(target.constructor).injects.push({\n            key: key,\n            globalType: (0, utils_1.getGlobalType)(type),\n            type: 'imports',\n            always: always,\n            typeCls: type,\n        });\n    };\n}\nexports.imports = imports;\n//# sourceMappingURL=imports.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.postConstruct = void 0;\nvar metadata_1 = require(\"../class/metadata\");\n/** run method after create instance */\nfunction postConstruct() {\n    return function (target, key) {\n        (0, metadata_1.getMetadata)(target.constructor).postConstruct.push({ key: key });\n    };\n}\nexports.postConstruct = postConstruct;\n//# sourceMappingURL=postConstruct.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.preDestroy = void 0;\nvar metadata_1 = require(\"../class/metadata\");\n/** run method before destroy instance */\nfunction preDestroy() {\n    return function (target, key) {\n        (0, metadata_1.getMetadata)(target.constructor).preDestroy.push({ key: key });\n    };\n}\nexports.preDestroy = preDestroy;\n//# sourceMappingURL=preDestroy.js.map","'use strict'\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = require('yallist')\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n","'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  require('./iterator.js')(Yallist)\n} catch (er) {}\n","'use strict'\nmodule.exports = function (Yallist) {\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n}\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (!options || typeof options !== 'object') {\n      options = {\n        loose: !!options,\n        includePrerelease: false,\n      }\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    const sameDirectionIncreasing =\n      (this.operator === '>=' || this.operator === '>') &&\n      (comp.operator === '>=' || comp.operator === '>')\n    const sameDirectionDecreasing =\n      (this.operator === '<=' || this.operator === '<') &&\n      (comp.operator === '<=' || comp.operator === '<')\n    const sameSemVer = this.semver.version === comp.semver.version\n    const differentDirectionsInclusive =\n      (this.operator === '>=' || this.operator === '<=') &&\n      (comp.operator === '>=' || comp.operator === '<=')\n    const oppositeDirectionsLessThan =\n      cmp(this.semver, '<', comp.semver, options) &&\n      (this.operator === '>=' || this.operator === '>') &&\n        (comp.operator === '<=' || comp.operator === '<')\n    const oppositeDirectionsGreaterThan =\n      cmp(this.semver, '>', comp.semver, options) &&\n      (this.operator === '<=' || this.operator === '<') &&\n        (comp.operator === '>=' || comp.operator === '>')\n\n    return (\n      sameDirectionIncreasing ||\n      sameDirectionDecreasing ||\n      (sameSemVer && differentDirectionsInclusive) ||\n      oppositeDirectionsLessThan ||\n      oppositeDirectionsGreaterThan\n    )\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","module.exports = window.AliLowCodeEngineExt;","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","function propertyNameRequiresQuotes(propertyName: string) {\n  try {\n    const context = {\n      worksWithoutQuotes: false,\n    };\n\n    // eslint-disable-next-line no-new-func\n    new Function('ctx', `ctx.worksWithoutQuotes = {${propertyName}: true}['${propertyName}']`)();\n\n    return !context.worksWithoutQuotes;\n  } catch (ex) {\n    return true;\n  }\n}\n\nfunction quoteString(str: string, { doubleQuote }: any) {\n  return doubleQuote ? `\"${str.replace(/\"/gu, '\\\\\"')}\"` : `'${str.replace(/'/gu, \"\\\\'\")}'`;\n}\n\nexport function valueToSource(\n  value: any,\n  {\n    circularReferenceToken = 'CIRCULAR_REFERENCE',\n    doubleQuote = true,\n    includeFunctions = true,\n    includeUndefinedProperties = false,\n    indentLevel = 0,\n    indentString = '  ',\n    lineEnding = '\\n',\n    visitedObjects = new Set(),\n  }: any = {},\n): any {\n  switch (typeof value) {\n    case 'boolean':\n      return value ? `${indentString.repeat(indentLevel)}true` : `${indentString.repeat(indentLevel)}false`;\n    case 'function':\n      if (includeFunctions) {\n        return `${indentString.repeat(indentLevel)}${value}`;\n      }\n      return null;\n    case 'number':\n      return `${indentString.repeat(indentLevel)}${value}`;\n    case 'object':\n      if (!value) {\n        return `${indentString.repeat(indentLevel)}null`;\n      }\n\n      if (visitedObjects.has(value)) {\n        return `${indentString.repeat(indentLevel)}${circularReferenceToken}`;\n      }\n\n      if (value instanceof Date) {\n        return `${indentString.repeat(indentLevel)}new Date(${quoteString(value.toISOString(), {\n          doubleQuote,\n        })})`;\n      }\n\n      if (value instanceof Map) {\n        return value.size\n          ? `${indentString.repeat(indentLevel)}new Map(${valueToSource([...value], {\n            circularReferenceToken,\n            doubleQuote,\n            includeFunctions,\n            includeUndefinedProperties,\n            indentLevel,\n            indentString,\n            lineEnding,\n            visitedObjects: new Set([value, ...visitedObjects]),\n          }).slice(indentLevel * indentString.length)})`\n          : `${indentString.repeat(indentLevel)}new Map()`;\n      }\n\n      if (value instanceof RegExp) {\n        return `${indentString.repeat(indentLevel)}/${value.source}/${value.flags}`;\n      }\n\n      if (value instanceof Set) {\n        return value.size\n          ? `${indentString.repeat(indentLevel)}new Set(${valueToSource([...value], {\n            circularReferenceToken,\n            doubleQuote,\n            includeFunctions,\n            includeUndefinedProperties,\n            indentLevel,\n            indentString,\n            lineEnding,\n            visitedObjects: new Set([value, ...visitedObjects]),\n          }).slice(indentLevel * indentString.length)})`\n          : `${indentString.repeat(indentLevel)}new Set()`;\n      }\n\n      if (Array.isArray(value)) {\n        if (!value.length) {\n          return `${indentString.repeat(indentLevel)}[]`;\n        }\n\n        const itemsStayOnTheSameLine = value.every(\n          item => typeof item === 'object' &&\n            item &&\n            !(item instanceof Date) &&\n            !(item instanceof Map) &&\n            !(item instanceof RegExp) &&\n            !(item instanceof Set) &&\n            (Object.keys(item).length || value.length === 1),\n        );\n\n        let previousIndex: number | null = null;\n\n        value = value.reduce((items, item, index) => {\n          if (previousIndex !== null) {\n            for (let i = index - previousIndex - 1; i > 0; i -= 1) {\n              items.push(indentString.repeat(indentLevel + 1));\n            }\n          }\n\n          previousIndex = index;\n\n          item = valueToSource(item, {\n            circularReferenceToken,\n            doubleQuote,\n            includeFunctions,\n            includeUndefinedProperties,\n            indentLevel: itemsStayOnTheSameLine ? indentLevel : indentLevel + 1,\n            indentString,\n            lineEnding,\n            visitedObjects: new Set([value, ...visitedObjects]),\n          });\n\n          if (item === null) {\n            items.push(indentString.repeat(indentLevel + 1));\n          } else if (itemsStayOnTheSameLine) {\n            items.push(item.slice(indentLevel * indentString.length));\n          } else {\n            items.push(item);\n          }\n\n          return items;\n        }, []);\n\n        return itemsStayOnTheSameLine\n          ? `${indentString.repeat(indentLevel)}[${value.join(', ')}]`\n          : `${indentString.repeat(indentLevel)}[${lineEnding}${value.join(\n            `,${lineEnding}`,\n          )}${lineEnding}${indentString.repeat(indentLevel)}]`;\n      }\n\n      value = Object.keys(value).reduce<string[]>((entries, propertyName) => {\n        const propertyValue = value[propertyName];\n        const propertyValueString =\n            typeof propertyValue !== 'undefined' || includeUndefinedProperties\n              ? valueToSource(value[propertyName], {\n                circularReferenceToken,\n                doubleQuote,\n                includeFunctions,\n                includeUndefinedProperties,\n                indentLevel: indentLevel + 1,\n                indentString,\n                lineEnding,\n                visitedObjects: new Set([value, ...visitedObjects]),\n              })\n              : null;\n\n        if (propertyValueString) {\n          const quotedPropertyName = propertyNameRequiresQuotes(propertyName)\n            ? quoteString(propertyName, {\n              doubleQuote,\n            })\n            : propertyName;\n          const trimmedPropertyValueString = propertyValueString.slice((indentLevel + 1) * indentString.length);\n\n          if (typeof propertyValue === 'function' && trimmedPropertyValueString.startsWith(`${propertyName}()`)) {\n            entries.push(\n              `${indentString.repeat(indentLevel + 1)}${quotedPropertyName} ${trimmedPropertyValueString.slice(\n                propertyName.length,\n              )}`,\n            );\n          } else {\n            entries.push(`${indentString.repeat(indentLevel + 1)}${quotedPropertyName}: ${trimmedPropertyValueString}`);\n          }\n        }\n\n        return entries;\n      }, []);\n\n      return value.length\n        ? `${indentString.repeat(indentLevel)}{${lineEnding}${value.join(\n          `,${lineEnding}`,\n        )}${lineEnding}${indentString.repeat(indentLevel)}}`\n        : `${indentString.repeat(indentLevel)}{}`;\n    case 'string':\n      return `${indentString.repeat(indentLevel)}${quoteString(value, {\n        doubleQuote,\n      })}`;\n    case 'symbol': {\n      let key = Symbol.keyFor(value);\n\n      if (typeof key === 'string') {\n        return `${indentString.repeat(indentLevel)}Symbol.for(${quoteString(key, {\n          doubleQuote,\n        })})`;\n      }\n\n      key = value.toString().slice(7, -1);\n\n      if (key) {\n        return `${indentString.repeat(indentLevel)}Symbol(${quoteString(key, {\n          doubleQuote,\n        })})`;\n      }\n\n      return `${indentString.repeat(indentLevel)}Symbol()`;\n    }\n    case 'undefined':\n      return `${indentString.repeat(indentLevel)}undefined`;\n    default:\n      return `${indentString.repeat(indentLevel)}undefined`;\n  }\n}\n\nexport function getSource(value: any): string {\n  if (value && value.__source) {\n    return value.__source;\n  }\n  let source = valueToSource(value);\n  if (source === 'undefined') {\n    source = '';\n  }\n  if (value) {\n    try {\n      value.__source = source;\n    } catch (ex) {\n      console.error(ex);\n    }\n  }\n  return source;\n}\n","import { untracked, computed, obx, engineConfig, action, makeObservable, mobx, runInAction } from '@alilc/lowcode-editor-core';\nimport { IPublicTypeCompositeValue, GlobalEvent, IPublicTypeJSSlot, IPublicTypeSlotSchema, IPublicEnumTransformStage, IPublicModelProp } from '@alilc/lowcode-types';\nimport { uniqueId, isPlainObject, hasOwnProperty, compatStage, isJSExpression, isJSSlot } from '@alilc/lowcode-utils';\nimport { valueToSource } from './value-to-source';\nimport { Props, IProps, IPropParent } from './props';\nimport { SlotNode, INode } from '../node';\n// import { TransformStage } from '../transform-stage';\n\nconst { set: mobxSet, isObservableArray } = mobx;\nexport const UNSET = Symbol.for('unset');\n// eslint-disable-next-line no-redeclare\nexport type UNSET = typeof UNSET;\n\nexport interface IProp extends Omit<IPublicModelProp, 'exportSchema' | 'node' | 'slotNode' > {\n\n  readonly props: Props;\n\n  readonly owner: INode;\n\n  get slotNode(): INode | null;\n\n  delete(prop: Prop): void;\n\n  export(stage: IPublicEnumTransformStage): IPublicTypeCompositeValue;\n\n  getNode(): INode;\n}\n\nexport type ValueTypes = 'unset' | 'literal' | 'map' | 'list' | 'expression' | 'slot';\n\nexport class Prop implements IProp, IPropParent {\n  readonly isProp = true;\n\n  readonly owner: INode;\n\n  /**\n   * 键值\n   */\n  @obx key: string | number | undefined;\n\n  /**\n   * 扩展值\n   */\n  @obx spread: boolean;\n\n  readonly props: Props;\n\n  readonly options: any;\n\n  readonly id = uniqueId('prop$');\n\n  @obx.ref private _type: ValueTypes = 'unset';\n\n  /**\n   * 属性类型\n   */\n  get type(): ValueTypes {\n    return this._type;\n  }\n\n  @obx private _value: any = UNSET;\n\n  /**\n   * 属性值\n   */\n  @computed get value(): IPublicTypeCompositeValue | UNSET {\n    return this.export(IPublicEnumTransformStage.Serilize);\n  }\n\n  private _code: string | null = null;\n\n  /**\n   * 获得表达式值\n   */\n  @computed get code() {\n    if (isJSExpression(this.value)) {\n      return this.value.value;\n    }\n    // todo: JSFunction ...\n    if (this.type === 'slot') {\n      return JSON.stringify(this._slotNode!.export(IPublicEnumTransformStage.Save));\n    }\n    return this._code != null ? this._code : JSON.stringify(this.value);\n  }\n\n  /**\n   * 设置表达式值\n   */\n  set code(code: string) {\n    if (isJSExpression(this._value)) {\n      this.setValue({\n        ...this._value,\n        value: code,\n      });\n      this._code = code;\n      return;\n    }\n\n    try {\n      const v = JSON.parse(code);\n      this.setValue(v);\n      this._code = code;\n      return;\n    } catch (e) {\n      // ignore\n    }\n\n    this.setValue({\n      type: 'JSExpression',\n      value: code,\n      mock: this._value,\n    });\n    this._code = code;\n  }\n\n  private _slotNode?: INode;\n\n  get slotNode(): INode | null {\n    return this._slotNode || null;\n  }\n\n  @obx.shallow private _items: Prop[] | null = null;\n\n  @obx.shallow private _maps: Map<string | number, Prop> | null = null;\n\n  /**\n   * 作为 _maps 的一层缓存机制，主要是复用部分已存在的 Prop，保持响应式关系，比如：\n   * 当前 Prop#_value 值为 { a: 1 }，当调用 setValue({ a: 2 }) 时，所有原来的子 Prop 均被销毁，\n   * 导致假如外部有 mobx reaction（常见于 observer），此时响应式链路会被打断，\n   * 因为 reaction 监听的是原 Prop(a) 的 _value，而不是新 Prop(a) 的 _value。\n   */\n  private _prevMaps: Map<string | number, Prop> | null = null;\n\n  /**\n   * 构造 items 属性，同时构造 maps 属性\n   */\n  private get items(): Prop[] | null {\n    if (this._items) return this._items;\n    return runInAction(() => {\n      let items: Prop[] | null = null;\n      if (this._type === 'list') {\n        const data = this._value;\n        data.forEach((item: any, idx: number) => {\n          items = items || [];\n          items.push(new Prop(this, item, idx));\n        });\n        this._maps = null;\n      } else if (this._type === 'map') {\n        const data = this._value;\n        const maps = new Map<string, Prop>();\n        const keys = Object.keys(data);\n        for (const key of keys) {\n          let prop: Prop;\n          if (this._prevMaps?.has(key)) {\n            prop = this._prevMaps.get(key)!;\n            prop.setValue(data[key]);\n          } else {\n            prop = new Prop(this, data[key], key);\n          }\n          items = items || [];\n          items.push(prop);\n          maps.set(key, prop);\n        }\n        this._maps = maps;\n      } else {\n        items = null;\n        this._maps = null;\n      }\n      this._items = items;\n      return this._items;\n    });\n  }\n\n  @computed private get maps(): Map<string | number, Prop> | null {\n    if (!this.items) {\n      return null;\n    }\n    return this._maps;\n  }\n\n  get path(): string[] {\n    return (this.parent.path || []).concat(this.key as string);\n  }\n\n  /**\n   * 元素个数\n   */\n  get size(): number {\n    return this.items?.length || 0;\n  }\n\n  private purged = false;\n\n  constructor(\n    public parent: IPropParent,\n    value: IPublicTypeCompositeValue | UNSET = UNSET,\n    key?: string | number,\n    spread = false,\n    options = {},\n  ) {\n    makeObservable(this);\n    this.owner = parent.owner;\n    this.props = parent.props;\n    this.key = key;\n    this.spread = spread;\n    this.options = options;\n    if (value !== UNSET) {\n      this.setValue(value);\n    }\n    this.setupItems();\n  }\n\n  // TODO: 先用调用方式触发子 prop 的初始化，后续须重构\n  @action\n  setupItems() {\n    return this.items;\n  }\n\n  /**\n   * @see SettingTarget\n   */\n  @action\n  getPropValue(propName: string | number): any {\n    return this.get(propName)!.getValue();\n  }\n\n  /**\n   * @see SettingTarget\n   */\n  @action\n  setPropValue(propName: string | number, value: any): void {\n    this.set(propName, value);\n  }\n\n  /**\n   * @see SettingTarget\n   */\n  @action\n  clearPropValue(propName: string | number): void {\n    this.get(propName, false)?.unset();\n  }\n\n  export(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Save): IPublicTypeCompositeValue {\n    stage = compatStage(stage);\n    const type = this._type;\n    if (stage === IPublicEnumTransformStage.Render && this.key === '___condition___') {\n      // 在设计器里，所有组件默认需要展示，除非开启了 enableCondition 配置\n      if (engineConfig?.get('enableCondition') !== true) {\n        return true;\n      }\n      return this._value;\n    }\n\n    if (type === 'unset') {\n      return undefined;\n    }\n\n    if (type === 'literal' || type === 'expression') {\n      // TODO 后端改造之后删除此逻辑\n      if (this._value === null && stage === IPublicEnumTransformStage.Save) {\n        return '';\n      }\n      return this._value;\n    }\n\n    if (type === 'slot') {\n      const schema = this._slotNode?.export(stage) || {} as any;\n      if (stage === IPublicEnumTransformStage.Render) {\n        return {\n          type: 'JSSlot',\n          params: schema.params,\n          value: schema,\n        };\n      }\n      return {\n        type: 'JSSlot',\n        params: schema.params,\n        value: schema.children,\n        title: schema.title,\n        name: schema.name,\n      };\n    }\n\n    if (type === 'map') {\n      if (!this._items) {\n        return this._value;\n      }\n      let maps: any;\n      this.items!.forEach((prop, key) => {\n        if (!prop.isUnset()) {\n          const v = prop.export(stage);\n          if (v != null) {\n            maps = maps || {};\n            maps[prop.key || key] = v;\n          }\n        }\n      });\n      return maps;\n    }\n\n    if (type === 'list') {\n      if (!this._items) {\n        return this._value;\n      }\n      const values = this.items!.map((prop) => {\n        return prop.export(stage);\n      });\n      if (values.every((val) => val === undefined)) {\n        return undefined;\n      }\n      return values;\n    }\n  }\n\n  getAsString(): string {\n    if (this.type === 'literal') {\n      return this._value ? String(this._value) : '';\n    }\n    return '';\n  }\n\n  /**\n   * set value, val should be JSON Object\n   */\n  @action\n  setValue(val: IPublicTypeCompositeValue) {\n    if (val === this._value) return;\n    const editor = this.owner.document?.designer.editor;\n    const oldValue = this._value;\n    this._value = val;\n    this._code = null;\n    const t = typeof val;\n    if (val == null) {\n      // this._value = undefined;\n      this._type = 'literal';\n    } else if (t === 'string' || t === 'number' || t === 'boolean') {\n      this._type = 'literal';\n    } else if (Array.isArray(val)) {\n      this._type = 'list';\n    } else if (isPlainObject(val)) {\n      if (isJSSlot(val)) {\n        this.setAsSlot(val);\n      } else if (isJSExpression(val)) {\n        this._type = 'expression';\n      } else {\n        this._type = 'map';\n      }\n    } else /* istanbul ignore next */ {\n      this._type = 'expression';\n      this._value = {\n        type: 'JSExpression',\n        value: valueToSource(val),\n      };\n    }\n\n    this.dispose();\n\n    if (oldValue !== this._value) {\n      const propsInfo = {\n        key: this.key,\n        prop: this,\n        oldValue,\n        newValue: this._value,\n      };\n\n      editor?.eventBus.emit(GlobalEvent.Node.Prop.InnerChange, {\n        node: this.owner as any,\n        ...propsInfo,\n      });\n\n      this.owner?.emitPropChange?.(propsInfo);\n    }\n  }\n\n  getValue(): IPublicTypeCompositeValue {\n    return this.export(IPublicEnumTransformStage.Serilize);\n  }\n\n  @action\n  private dispose() {\n    const items = untracked(() => this._items);\n    if (items) {\n      items.forEach((prop) => prop.purge());\n    }\n    this._items = null;\n    this._prevMaps = this._maps;\n    this._maps = null;\n    if (this._type !== 'slot' && this._slotNode) {\n      this._slotNode.remove();\n      this._slotNode = undefined;\n    }\n  }\n\n  @action\n  setAsSlot(data: IPublicTypeJSSlot) {\n    this._type = 'slot';\n    let slotSchema: IPublicTypeSlotSchema;\n    // 当 data.value 的结构为 { componentName: 'Slot' } 时，复用部分 slotSchema 数据\n    if ((isPlainObject(data.value) && data.value?.componentName === 'Slot')) {\n      const value = data.value as IPublicTypeSlotSchema;\n      slotSchema = {\n        componentName: 'Slot',\n        title: value.title || value.props?.slotTitle,\n        id: data.id,\n        name: value.name || value.props?.slotName,\n        params: value.params || value.props?.slotParams,\n        children: value.children,\n      } as IPublicTypeSlotSchema;\n    } else {\n      slotSchema = {\n        componentName: 'Slot',\n        title: data.title,\n        id: data.id,\n        name: data.name,\n        params: data.params,\n        children: data.value,\n      };\n    }\n\n    if (this._slotNode) {\n      this._slotNode.import(slotSchema);\n    } else {\n      const { owner } = this.props;\n      this._slotNode = owner.document.createNode<SlotNode>(slotSchema);\n      if (this._slotNode) {\n        owner.addSlot(this._slotNode);\n        this._slotNode.internalSetSlotFor(this);\n      }\n    }\n  }\n\n  /**\n   * 取消设置值\n   */\n  @action\n  unset() {\n    this._type = 'unset';\n  }\n\n  /**\n   * 是否未设置值\n   */\n  @action\n  isUnset() {\n    return this._type === 'unset';\n  }\n\n  isVirtual() {\n    return typeof this.key === 'string' && this.key.charAt(0) === '!';\n  }\n\n  /**\n   * @returns  0: the same 1: maybe & like 2: not the same\n   */\n  compare(other: Prop | null): number {\n    if (!other || other.isUnset()) {\n      return this.isUnset() ? 0 : 2;\n    }\n    if (other.type !== this.type) {\n      return 2;\n    }\n    // list\n    if (this.type === 'list') {\n      return this.size === other.size ? 1 : 2;\n    }\n    if (this.type === 'map') {\n      return 1;\n    }\n\n    // 'literal' | 'map' | 'expression' | 'slot'\n    return this.code === other.code ? 0 : 2;\n  }\n\n  /**\n   * 获取某个属性\n   * @param createIfNone 当没有的时候，是否创建一个\n   */\n  @action\n  get(path: string | number, createIfNone = true): Prop | null {\n    const type = this._type;\n    if (type !== 'map' && type !== 'list' && type !== 'unset' && !createIfNone) {\n      return null;\n    }\n\n    const maps = type === 'map' ? this.maps : null;\n    const items = type === 'list' ? this.items : null;\n\n    let entry = path;\n    let nest = '';\n    if (typeof path !== 'number') {\n      const i = path.indexOf('.');\n      if (i > 0) {\n        nest = path.slice(i + 1);\n        if (nest) {\n          entry = path.slice(0, i);\n        }\n      }\n    }\n\n    let prop: any;\n    if (type === 'list') {\n      if (isValidArrayIndex(entry, this.size)) {\n        prop = items![entry];\n      }\n    } else if (type === 'map') {\n      prop = maps?.get(entry);\n    }\n\n    if (prop) {\n      return nest ? prop.get(nest, createIfNone) : prop;\n    }\n\n    if (createIfNone) {\n      prop = new Prop(this, UNSET, entry);\n      this.set(entry, prop, true);\n      if (nest) {\n        return prop.get(nest, true);\n      }\n\n      return prop;\n    }\n\n    return null;\n  }\n\n  /**\n   * 从父级移除本身\n   */\n  @action\n  remove() {\n    this.parent.delete(this);\n  }\n\n  /**\n   * 删除项\n   */\n  @action\n  delete(prop: Prop): void {\n    /* istanbul ignore else */\n    if (this._items) {\n      const i = this._items.indexOf(prop);\n      if (i > -1) {\n        this._items.splice(i, 1);\n        prop.purge();\n      }\n      if (this._maps && prop.key) {\n        this._maps.delete(String(prop.key));\n      }\n    }\n  }\n\n  /**\n   * 删除 key\n   */\n  @action\n  deleteKey(key: string): void {\n    /* istanbul ignore else */\n    if (this.maps) {\n      const prop = this.maps.get(key);\n      if (prop) {\n        this.delete(prop);\n      }\n    }\n  }\n\n  /**\n   * 添加值到列表\n   *\n   * @param force 强制\n   */\n  @action\n  add(value: IPublicTypeCompositeValue, force = false): Prop | null {\n    const type = this._type;\n    if (type !== 'list' && type !== 'unset' && !force) {\n      return null;\n    }\n    if (type === 'unset' || (force && type !== 'list')) {\n      this.setValue([]);\n    }\n    const prop = new Prop(this, value);\n    this._items = this._items || [];\n    this._items.push(prop);\n    return prop;\n  }\n\n  /**\n   * 设置值到字典\n   *\n   * @param force 强制\n   */\n  @action\n  set(key: string | number, value: IPublicTypeCompositeValue | Prop, force = false) {\n    const type = this._type;\n    if (type !== 'map' && type !== 'list' && type !== 'unset' && !force) {\n      return null;\n    }\n    if (type === 'unset' || (force && type !== 'map')) {\n      if (isValidArrayIndex(key)) {\n        if (type !== 'list') {\n          this.setValue([]);\n        }\n      } else {\n        this.setValue({});\n      }\n    }\n    const prop = isProp(value) ? value : new Prop(this, value, key);\n    let items = this._items! || [];\n    if (this.type === 'list') {\n      if (!isValidArrayIndex(key)) {\n        return null;\n      }\n      if (isObservableArray(items)) {\n        mobxSet(items, key, prop);\n      } else {\n        items[key] = prop;\n      }\n      this._items = items;\n    } else if (this.type === 'map') {\n      const maps = this._maps || new Map<string, Prop>();\n      const orig = maps?.get(key);\n      if (orig) {\n        // replace\n        const i = items.indexOf(orig);\n        if (i > -1) {\n          items.splice(i, 1, prop)[0].purge();\n        }\n        maps?.set(key, prop);\n      } else {\n        // push\n        items.push(prop);\n        this._items = items;\n        maps?.set(key, prop);\n      }\n      this._maps = maps;\n    } /* istanbul ignore next */ else {\n      return null;\n    }\n\n    return prop;\n  }\n\n  /**\n   * 是否存在 key\n   */\n  has(key: string): boolean {\n    if (this._type !== 'map') {\n      return false;\n    }\n    if (this._maps) {\n      return this._maps.has(key);\n    }\n    return hasOwnProperty(this._value, key);\n  }\n\n  /**\n   * 回收销毁\n   */\n  @action\n  purge() {\n    if (this.purged) {\n      return;\n    }\n    this.purged = true;\n    if (this._items) {\n      this._items.forEach((item) => item.purge());\n    }\n    this._items = null;\n    this._maps = null;\n    if (this._slotNode && this._slotNode.slotFor === this) {\n      this._slotNode.remove();\n      this._slotNode = undefined;\n    }\n  }\n\n  /**\n   * 迭代器\n   */\n  [Symbol.iterator](): { next(): { value: Prop } } {\n    let index = 0;\n    const { items } = this;\n    const length = items?.length || 0;\n    return {\n      next() {\n        if (index < length) {\n          return {\n            value: items![index++],\n            done: false,\n          };\n        }\n        return {\n          value: undefined as any,\n          done: true,\n        };\n      },\n    };\n  }\n\n  /**\n   * 遍历\n   */\n  @action\n  forEach(fn: (item: Prop, key: number | string | undefined) => void): void {\n    const { items } = this;\n    if (!items) {\n      return;\n    }\n    const isMap = this._type === 'map';\n    items.forEach((item, index) => {\n      return isMap ? fn(item, item.key) : fn(item, index);\n    });\n  }\n\n  /**\n   * 遍历\n   */\n  @action\n  map<T>(fn: (item: Prop, key: number | string | undefined) => T): T[] | null {\n    const { items } = this;\n    if (!items) {\n      return null;\n    }\n    const isMap = this._type === 'map';\n    return items.map((item, index) => {\n      return isMap ? fn(item, item.key) : fn(item, index);\n    });\n  }\n\n  getProps() {\n    return this.props;\n  }\n\n  getNode() {\n    return this.owner;\n  }\n}\n\nexport function isProp(obj: any): obj is Prop {\n  return obj && obj.isProp;\n}\n\nexport function isValidArrayIndex(key: any, limit = -1): key is number {\n  const n = parseFloat(String(key));\n  return n >= 0 && Math.floor(n) === n && isFinite(n) && (limit < 0 || n < limit);\n}\n","import { computed, makeObservable, obx, action } from '@alilc/lowcode-editor-core';\nimport { IPublicTypePropsMap, IPublicTypePropsList, IPublicTypeCompositeValue, IPublicEnumTransformStage, IPublicModelProps } from '@alilc/lowcode-types';\nimport { uniqueId, compatStage } from '@alilc/lowcode-utils';\nimport { Prop, IProp, UNSET } from './prop';\nimport { INode, Node } from '../node';\n// import { TransformStage } from '../transform-stage';\n\ninterface ExtrasObject {\n  [key: string]: any;\n}\n\nexport const EXTRA_KEY_PREFIX = '___';\nexport function getConvertedExtraKey(key: string): string {\n  if (!key) {\n    return '';\n  }\n  let _key = key;\n  if (key.indexOf('.') > 0) {\n    _key = key.split('.')[0];\n  }\n  return EXTRA_KEY_PREFIX + _key + EXTRA_KEY_PREFIX + key.slice(_key.length);\n}\nexport function getOriginalExtraKey(key: string): string {\n  return key.replace(new RegExp(`${EXTRA_KEY_PREFIX}`, 'g'), '');\n}\n\nexport interface IPropParent {\n\n  readonly props: Props;\n\n  readonly owner: INode;\n\n  get path(): string[];\n\n  delete(prop: Prop): void;\n\n}\n\nexport interface IProps extends Omit<IPublicModelProps, 'getProp' | 'getExtraProp' | 'getExtraPropValue' | 'setExtraPropValue' | 'node'> {\n\n  /**\n   * 获取 props 对应的 node\n   */\n  getNode(): INode;\n\n  getProp(path: string): IProp | null;\n\n  get(path: string, createIfNone: boolean): Prop;\n}\n\nexport class Props implements IProps, IPropParent {\n  readonly id = uniqueId('props');\n\n  @obx.shallow private items: Prop[] = [];\n\n  @computed private get maps(): Map<string, Prop> {\n    const maps = new Map();\n    if (this.items.length > 0) {\n      this.items.forEach((prop) => {\n        if (prop.key) {\n          maps.set(prop.key, prop);\n        }\n      });\n    }\n    return maps;\n  }\n\n  readonly path = [];\n\n  get props(): Props {\n    return this;\n  }\n\n  readonly owner: INode;\n\n  /**\n   * 元素个数\n   */\n  @computed get size() {\n    return this.items.length;\n  }\n\n  @obx type: 'map' | 'list' = 'map';\n\n  private purged = false;\n\n  constructor(owner: INode, value?: IPublicTypePropsMap | IPublicTypePropsList | null, extras?: ExtrasObject) {\n    makeObservable(this);\n    this.owner = owner;\n    if (Array.isArray(value)) {\n      this.type = 'list';\n      this.items = value.map(\n        (item, idx) => new Prop(this, item.value, item.name || idx, item.spread),\n      );\n    } else if (value != null) {\n      this.items = Object.keys(value).map((key) => new Prop(this, value[key], key, false));\n    }\n    if (extras) {\n      Object.keys(extras).forEach((key) => {\n        this.items.push(new Prop(this, (extras as any)[key], getConvertedExtraKey(key)));\n      });\n    }\n  }\n\n  @action\n  import(value?: IPublicTypePropsMap | IPublicTypePropsList | null, extras?: ExtrasObject) {\n    const originItems = this.items;\n    if (Array.isArray(value)) {\n      this.type = 'list';\n      this.items = value.map(\n        (item, idx) => new Prop(this, item.value, item.name || idx, item.spread),\n      );\n    } else if (value != null) {\n      this.type = 'map';\n      this.items = Object.keys(value).map((key) => new Prop(this, value[key], key));\n    } else {\n      this.type = 'map';\n      this.items = [];\n    }\n    if (extras) {\n      Object.keys(extras).forEach((key) => {\n        this.items.push(new Prop(this, (extras as any)[key], getConvertedExtraKey(key)));\n      });\n    }\n    originItems.forEach((item) => item.purge());\n  }\n\n  @action\n  merge(value: IPublicTypePropsMap, extras?: IPublicTypePropsMap) {\n    Object.keys(value).forEach((key) => {\n      this.query(key, true)!.setValue(value[key]);\n      this.query(key, true)!.setupItems();\n    });\n    if (extras) {\n      Object.keys(extras).forEach((key) => {\n        this.query(getConvertedExtraKey(key), true)!.setValue(extras[key]);\n        this.query(getConvertedExtraKey(key), true)!.setupItems();\n      });\n    }\n  }\n\n  export(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Save): {\n    props?: IPublicTypePropsMap | IPublicTypePropsList;\n    extras?: ExtrasObject;\n  } {\n    stage = compatStage(stage);\n    if (this.items.length < 1) {\n      return {};\n    }\n    let allProps = {} as any;\n    let props: any = {};\n    const extras: any = {};\n    if (this.type === 'list') {\n      props = [];\n      this.items.forEach((item) => {\n        let value = item.export(stage);\n        let name = item.key as string;\n        if (name && typeof name === 'string' && name.startsWith(EXTRA_KEY_PREFIX)) {\n          name = getOriginalExtraKey(name);\n          extras[name] = value;\n        } else {\n          props.push({\n            spread: item.spread,\n            name,\n            value,\n          });\n        }\n      });\n    } else {\n      this.items.forEach((item) => {\n        let name = item.key as string;\n        if (name == null || item.isUnset() || item.isVirtual()) return;\n        let value = item.export(stage);\n        if (value != null) {\n          allProps[name] = value;\n        }\n      });\n      // compatible vision\n      const transformedProps = this.transformToStatic(allProps);\n      Object.keys(transformedProps).forEach((name) => {\n        const value = transformedProps[name];\n        if (typeof name === 'string' && name.startsWith(EXTRA_KEY_PREFIX)) {\n          name = getOriginalExtraKey(name);\n          extras[name] = value;\n        } else {\n          props[name] = value;\n        }\n      });\n    }\n\n    return { props, extras };\n  }\n\n  /**\n   * @deprecated\n   */\n  /* istanbul ignore next */\n  private transformToStatic(props: any) {\n    let transducers = this.owner.componentMeta?.prototype?.options?.transducers;\n    if (!transducers) {\n      return props;\n    }\n    if (!Array.isArray(transducers)) {\n      transducers = [transducers];\n    }\n    props = transducers.reduce((xprops: any, transducer: any) => {\n      if (transducer && typeof transducer.toStatic === 'function') {\n        return transducer.toStatic(xprops);\n      }\n      return xprops;\n    }, props);\n    return props;\n  }\n\n  /**\n   * 根据 path 路径查询属性\n   *\n   * @param createIfNone 当没有的时候，是否创建一个\n   */\n  @action\n  query(path: string, createIfNone = true): Prop | null {\n    return this.get(path, createIfNone);\n  }\n\n  /**\n   * 获取某个属性，如果不存在，临时获取一个待写入\n   * @param createIfNone 当没有的时候，是否创建一个\n   */\n  @action\n  get(path: string, createIfNone = false): Prop | null {\n    let entry = path;\n    let nest = '';\n    const i = path.indexOf('.');\n    if (i > 0) {\n      nest = path.slice(i + 1);\n      if (nest) {\n        entry = path.slice(0, i);\n      }\n    }\n\n    let prop = this.maps.get(entry);\n    if (!prop && createIfNone) {\n      prop = new Prop(this, UNSET, entry);\n      this.items.push(prop);\n    }\n\n    if (prop) {\n      return nest ? prop.get(nest, createIfNone) : prop;\n    }\n\n    return null;\n  }\n\n  /**\n   * 删除项\n   */\n  @action\n  delete(prop: Prop): void {\n    const i = this.items.indexOf(prop);\n    if (i > -1) {\n      this.items.splice(i, 1);\n      prop.purge();\n    }\n  }\n\n  /**\n   * 删除 key\n   */\n  @action\n  deleteKey(key: string): void {\n    this.items = this.items.filter((item, i) => {\n      if (item.key === key) {\n        item.purge();\n        this.items.splice(i, 1);\n        return false;\n      }\n      return true;\n    });\n  }\n\n  /**\n   * 添加值\n   */\n  @action\n  add(\n    value: IPublicTypeCompositeValue | null,\n    key?: string | number,\n    spread = false,\n    options: any = {},\n  ): Prop {\n    const prop = new Prop(this, value, key, spread, options);\n    this.items.push(prop);\n    return prop;\n  }\n\n  /**\n   * 是否存在 key\n   */\n  has(key: string): boolean {\n    return this.maps.has(key);\n  }\n\n  /**\n   * 迭代器\n   */\n  [Symbol.iterator](): { next(): { value: Prop } } {\n    let index = 0;\n    const { items } = this;\n    const length = items.length || 0;\n    return {\n      next() {\n        if (index < length) {\n          return {\n            value: items[index++],\n            done: false,\n          };\n        }\n        return {\n          value: undefined as any,\n          done: true,\n        };\n      },\n    };\n  }\n\n  /**\n   * 遍历\n   */\n  @action\n  forEach(fn: (item: Prop, key: number | string | undefined) => void): void {\n    this.items.forEach((item) => {\n      return fn(item, item.key);\n    });\n  }\n\n  /**\n   * 遍历\n   */\n  @action\n  map<T>(fn: (item: Prop, key: number | string | undefined) => T): T[] | null {\n    return this.items.map((item) => {\n      return fn(item, item.key);\n    });\n  }\n\n  @action\n  filter(fn: (item: Prop, key: number | string | undefined) => boolean) {\n    return this.items.filter((item) => {\n      return fn(item, item.key);\n    });\n  }\n\n  /**\n   * 回收销毁\n   */\n  @action\n  purge() {\n    if (this.purged) {\n      return;\n    }\n    this.purged = true;\n    this.items.forEach((item) => item.purge());\n  }\n\n  /**\n   * 获取某个属性, 如果不存在，临时获取一个待写入\n   * @param createIfNone 当没有的时候，是否创建一个\n   */\n  @action\n  getProp(path: string, createIfNone = true): Prop | null {\n    return this.query(path, createIfNone) || null;\n  }\n\n  /**\n   * 获取单个属性值\n   */\n  @action\n  getPropValue(path: string): any {\n    return this.getProp(path, false)?.value;\n  }\n\n  /**\n   * 设置单个属性值\n   */\n  @action\n  setPropValue(path: string, value: any) {\n    this.getProp(path, true)!.setValue(value);\n  }\n\n  /**\n   * 获取 props 对应的 node\n   */\n  getNode() {\n    return this.owner;\n  }\n\n  /**\n   * @deprecated\n   * 获取 props 对应的 node\n   */\n  @action\n  toData() {\n    return this.export()?.props;\n  }\n}\n","import { NodeChildren } from '../document/node/node-children';\n\ntype IterableArray = NodeChildren | any[];\n\nexport function foreachReverse(\n  arr: IterableArray,\n  action: (item: any) => void,\n  getter: (arr: IterableArray, index: number) => any,\n  context: any = {},\n) {\n  for (let i = arr.length - 1; i >= 0; i--) {\n    action.call(context, getter(arr, i));\n  }\n}\n","import { obx, computed, globalContext, makeObservable, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport { Node, INode } from './node';\nimport { IPublicTypeNodeData, IPublicModelNodeChildren, IPublicEnumTransformStage } from '@alilc/lowcode-types';\nimport { shallowEqual, compatStage, isNodeSchema } from '@alilc/lowcode-utils';\nimport { foreachReverse } from '../../utils/tree';\nimport { NodeRemoveOptions } from '../../types';\n\nexport interface IOnChangeOptions {\n  type: string;\n  node: Node;\n}\n\nexport interface INodeChildren extends Omit<IPublicModelNodeChildren, 'forEach' | 'map' | 'every' | 'some' | 'filter' | 'find' | 'reduce' | 'mergeChildren' > {\n  get owner(): INode;\n\n  unlinkChild(node: INode): void;\n\n  /**\n   * 删除一个节点\n   */\n  internalDelete(\n      node: INode,\n      purge: boolean,\n      useMutator: boolean,\n      options: NodeRemoveOptions\n    ): boolean;\n\n  /**\n   * 插入一个节点，返回新长度\n   */\n  internalInsert(node: INode, at?: number | null, useMutator?: boolean): void;\n\n  import(data?: IPublicTypeNodeData | IPublicTypeNodeData[], checkId?: boolean): void;\n\n  /**\n   * 导出 schema\n   */\n  export(stage: IPublicEnumTransformStage): IPublicTypeNodeData[];\n\n  /** following methods are overriding super interface, using different param types */\n  /** overriding methods start */\n\n  forEach(fn: (item: INode, index: number) => void): void;\n\n  map<T>(fn: (item: INode, index: number) => T): T[] | null;\n\n  every(fn: (item: INode, index: number) => any): boolean;\n\n  some(fn: (item: INode, index: number) => any): boolean;\n\n  filter(fn: (item: INode, index: number) => any): any;\n\n  find(fn: (item: INode, index: number) => boolean): any;\n\n  reduce(fn: (acc: any, cur: INode) => any, initialValue: any): void;\n\n  mergeChildren(\n    remover: (node: INode, idx: number) => boolean,\n    adder: (children: INode[]) => IPublicTypeNodeData[] | null,\n    sorter: (firstNode: INode, secondNode: INode) => number,\n  ): any;\n\n  /**\n   * 根据索引获得节点\n   */\n  get(index: number): INode | null;\n\n  /** overriding methods end */\n}\nexport class NodeChildren implements INodeChildren {\n  @obx.shallow private children: INode[];\n\n  private emitter: IEventBus = createModuleEventBus('NodeChildren');\n\n  /**\n   * 元素个数\n   */\n  @computed get size(): number {\n    return this.children.length;\n  }\n\n  get isEmptyNode(): boolean {\n    return this.size < 1;\n  }\n  get notEmptyNode(): boolean {\n    return this.size > 0;\n  }\n\n  @computed get length(): number {\n    return this.children.length;\n  }\n\n  private purged = false;\n\n  get [Symbol.toStringTag]() {\n    // 保证向前兼容性\n    return 'Array';\n  }\n\n  constructor(\n      readonly owner: INode,\n      data: IPublicTypeNodeData | IPublicTypeNodeData[],\n      options: any = {},\n    ) {\n    makeObservable(this);\n    this.children = (Array.isArray(data) ? data : [data]).map((child) => {\n      return this.owner.document?.createNode(child, options.checkId);\n    });\n  }\n\n  internalInitParent() {\n    this.children.forEach((child) => child.internalSetParent(this.owner));\n  }\n\n  /**\n   * 导出 schema\n   */\n  export(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Save): IPublicTypeNodeData[] {\n    stage = compatStage(stage);\n    return this.children.map((node) => {\n      const data = node.export(stage);\n      if (node.isLeafNode && IPublicEnumTransformStage.Save === stage) {\n        // FIXME: filter empty\n        return data.children as IPublicTypeNodeData;\n      }\n      return data;\n    });\n  }\n\n  import(data?: IPublicTypeNodeData | IPublicTypeNodeData[], checkId = false) {\n    data = data ? (Array.isArray(data) ? data : [data]) : [];\n\n    const originChildren = this.children.slice();\n    this.children.forEach((child) => child.internalSetParent(null));\n\n    const children = new Array<Node>(data.length);\n    for (let i = 0, l = data.length; i < l; i++) {\n      const child = originChildren[i];\n      const item = data[i];\n\n      let node: Node | undefined;\n      if (isNodeSchema(item) && !checkId && child && child.componentName === item.componentName) {\n        node = child;\n        node.import(item);\n      } else {\n        node = this.owner.document.createNode(item, checkId);\n      }\n      children[i] = node;\n    }\n\n    this.children = children;\n    this.internalInitParent();\n    if (!shallowEqual(children, originChildren)) {\n      this.emitter.emit('change');\n    }\n  }\n\n  /**\n   * @deprecated\n   * @param nodes\n   */\n  concat(nodes: INode[]) {\n    return this.children.concat(nodes);\n  }\n\n  /**\n   *\n   */\n  isEmpty() {\n    return this.isEmptyNode;\n  }\n\n  notEmpty() {\n    return this.notEmptyNode;\n  }\n\n  /**\n   * 回收销毁\n   */\n  purge(useMutator = true) {\n    if (this.purged) {\n      return;\n    }\n    this.purged = true;\n    this.children.forEach((child) => {\n      child.purge(useMutator);\n    });\n  }\n\n  unlinkChild(node: INode) {\n    const i = this.children.map(d => d.id).indexOf(node.id);\n    if (i < 0) {\n      return false;\n    }\n    this.children.splice(i, 1);\n    this.emitter.emit('change', {\n      type: 'unlink',\n      node,\n    });\n  }\n\n  /**\n   * 删除一个节点\n   */\n  delete(node: INode): boolean {\n    return this.internalDelete(node);\n  }\n\n  /**\n   * 删除一个节点\n   */\n  internalDelete(node: INode, purge = false, useMutator = true, options: NodeRemoveOptions = {}): boolean {\n    node.internalPurgeStart();\n    if (node.isParentalNode) {\n      foreachReverse(\n        node.children,\n        (subNode: Node) => {\n          subNode.remove(useMutator, purge, options);\n        },\n        (iterable, idx) => (iterable as NodeChildren).get(idx),\n      );\n      foreachReverse(\n        node.slots,\n        (slotNode: Node) => {\n          slotNode.remove(useMutator, purge);\n        },\n        (iterable, idx) => (iterable as [])[idx],\n      );\n    }\n    // 需要在从 children 中删除 node 前记录下 index，internalSetParent 中会执行删除 (unlink) 操作\n    const i = this.children.map(d => d.id).indexOf(node.id);\n    if (purge) {\n      // should set parent null\n      node.internalSetParent(null, useMutator);\n      try {\n        node.purge();\n      } catch (err) {\n        console.error(err);\n      }\n    }\n    const { document } = node;\n    /* istanbul ignore next */\n    if (globalContext.has('editor')) {\n      const workspace = globalContext.get('workspace');\n      const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n      editor.eventBus.emit('node.remove', { node, index: i });\n    }\n    document?.unlinkNode(node);\n    document?.selection.remove(node.id);\n    document?.destroyNode(node);\n    this.emitter.emit('change', {\n      type: 'delete',\n      node,\n    });\n    if (useMutator) {\n      this.reportModified(node, this.owner, {\n        type: 'remove',\n        propagated: false,\n        isSubDeleting: this.owner.isPurging,\n        removeIndex: i,\n        removeNode: node,\n      });\n    }\n    // purge 为 true 时，已在 internalSetParent 中删除了子节点\n    if (i > -1 && !purge) {\n      this.children.splice(i, 1);\n    }\n    return false;\n  }\n\n  insert(node: INode, at?: number | null): void {\n    this.internalInsert(node, at, true);\n  }\n\n  /**\n   * 插入一个节点，返回新长度\n   */\n  internalInsert(node: INode, at?: number | null, useMutator = true): void {\n    const { children } = this;\n    let index = at == null || at === -1 ? children.length : at;\n\n    const i = children.map(d => d.id).indexOf(node.id);\n\n    if (node.parent) {\n      if (globalContext.has('editor')) {\n        const workspace = globalContext.get('workspace');\n        const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n        editor.eventBus.emit('node.remove.topLevel', {\n          node,\n          index: node.index,\n        });\n      }\n    }\n\n    if (i < 0) {\n      if (index < children.length) {\n        children.splice(index, 0, node);\n      } else {\n        children.push(node);\n      }\n      node.internalSetParent(this.owner, useMutator);\n    } else {\n      if (index > i) {\n        index -= 1;\n      }\n\n      if (index === i) {\n        return;\n      }\n\n      children.splice(i, 1);\n      children.splice(index, 0, node);\n    }\n\n    this.emitter.emit('change', {\n      type: 'insert',\n      node,\n    });\n    this.emitter.emit('insert', node);\n    /* istanbul ignore next */\n    if (globalContext.has('editor')) {\n      const workspace = globalContext.get('workspace');\n      const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n      editor.eventBus.emit('node.add', { node });\n    }\n    if (useMutator) {\n      this.reportModified(node, this.owner, { type: 'insert' });\n    }\n\n    // check condition group\n    if (node.conditionGroup) {\n      if (\n        !(\n          // just sort at condition group\n          (\n            (node.prevSibling && node.prevSibling.conditionGroup === node.conditionGroup) ||\n            (node.nextSibling && node.nextSibling.conditionGroup === node.conditionGroup)\n          )\n        )\n      ) {\n        node.setConditionGroup(null);\n      }\n    }\n    if (node.prevSibling && node.nextSibling) {\n      const { conditionGroup } = node.prevSibling;\n      // insert at condition group\n      if (conditionGroup && conditionGroup === node.nextSibling.conditionGroup) {\n        node.setConditionGroup(conditionGroup);\n      }\n    }\n  }\n\n  /**\n   * 取得节点索引编号\n   */\n  indexOf(node: INode): number {\n    return this.children.map(d => d.id).indexOf(node.id);\n  }\n\n  /**\n   *\n   */\n  splice(start: number, deleteCount: number, node?: INode): INode[] {\n    if (node) {\n      return this.children.splice(start, deleteCount, node);\n    }\n    return this.children.splice(start, deleteCount);\n  }\n\n  /**\n   * 根据索引获得节点\n   */\n  get(index: number): INode | null {\n    return this.children.length > index ? this.children[index] : null;\n  }\n\n  /**\n   * 是否存在节点\n   */\n  has(node: INode) {\n    return this.indexOf(node) > -1;\n  }\n\n  /**\n   * 迭代器\n   */\n  [Symbol.iterator](): { next(): { value: INode } } {\n    let index = 0;\n    const { children } = this;\n    const length = children.length || 0;\n    return {\n      next() {\n        if (index < length) {\n          return {\n            value: children[index++],\n            done: false,\n          };\n        }\n        return {\n          value: undefined as any,\n          done: true,\n        };\n      },\n    };\n  }\n\n  /**\n   * 遍历\n   */\n  forEach(fn: (item: INode, index: number) => void): void {\n    this.children.forEach((child, index) => {\n      return fn(child, index);\n    });\n  }\n\n  /**\n   * 遍历\n   */\n  map<T>(fn: (item: INode, index: number) => T): T[] | null {\n    return this.children.map((child, index) => {\n      return fn(child, index);\n    });\n  }\n\n  every(fn: (item: INode, index: number) => any): boolean {\n    return this.children.every((child, index) => fn(child, index));\n  }\n\n  some(fn: (item: INode, index: number) => any): boolean {\n    return this.children.some((child, index) => fn(child, index));\n  }\n\n  filter(fn: (item: INode, index: number) => any): any {\n    return this.children.filter(fn);\n  }\n\n  find(fn: (item: INode, index: number) => boolean) {\n    return this.children.find(fn);\n  }\n\n  reduce(fn: (acc: any, cur: INode) => any, initialValue: any): void {\n    return this.children.reduce(fn, initialValue);\n  }\n\n  mergeChildren(\n    remover: (node: INode, idx: number) => boolean,\n    adder: (children: INode[]) => IPublicTypeNodeData[] | null,\n    sorter: (firstNode: INode, secondNode: INode) => number,\n  ): any {\n    let changed = false;\n    if (remover) {\n      const willRemove = this.children.filter(remover);\n      if (willRemove.length > 0) {\n        willRemove.forEach((node) => {\n          const i = this.children.map(d => d.id).indexOf(node.id);\n          if (i > -1) {\n            this.children.splice(i, 1);\n            node.remove(false);\n          }\n        });\n        changed = true;\n      }\n    }\n    if (adder) {\n      const items = adder(this.children);\n      if (items && items.length > 0) {\n        items.forEach((child: IPublicTypeNodeData) => {\n          const node = this.owner.document?.createNode(child);\n          this.children.push(node);\n          node.internalSetParent(this.owner);\n        });\n        changed = true;\n      }\n    }\n    if (sorter) {\n      this.children = this.children.sort(sorter);\n      changed = true;\n    }\n    if (changed) {\n      this.emitter.emit('change');\n    }\n  }\n\n  onChange(fn: (info?: IOnChangeOptions) => void): () => void {\n    this.emitter.on('change', fn);\n    return () => {\n      this.emitter.removeListener('change', fn);\n    };\n  }\n\n  onInsert(fn: (node: INode) => void) {\n    this.emitter.on('insert', fn);\n    return () => {\n      this.emitter.removeListener('insert', fn);\n    };\n  }\n\n  private reportModified(node: INode, owner: INode, options = {}) {\n    if (!node) {\n      return;\n    }\n    if (node.isRootNode) {\n      return;\n    }\n    const callbacks = owner.componentMeta?.advanced.callbacks;\n    if (callbacks?.onSubtreeModified) {\n      try {\n        callbacks?.onSubtreeModified.call(\n          node.internalToShellNode(),\n          owner.internalToShellNode(),\n          options,\n        );\n      } catch (e) {\n        console.error('error when execute advanced.callbacks.onSubtreeModified', e);\n      }\n    }\n\n    if (owner.parent && !owner.parent.isRootNode) {\n      this.reportModified(node, owner.parent, { ...options, propagated: true });\n    }\n  }\n}\n","import { createIntl } from '@alilc/lowcode-editor-core';\nimport enUS from './en-US.json';\nimport zhCN from './zh-CN.json';\n\nconst { intl, intlNode, getLocale, setLocale } = createIntl({\n  'en-US': enUS,\n  'zh-CN': zhCN,\n});\n\nexport { intl, intlNode, getLocale, setLocale };\n","import { obx, computed, makeObservable } from '@alilc/lowcode-editor-core';\nimport { uniqueId } from '@alilc/lowcode-utils';\nimport { IPublicTypeTitleContent, IPublicModelExclusiveGroup } from '@alilc/lowcode-types';\nimport { Node } from './node';\nimport { intl } from '../../locale';\n\n// modals assoc x-hide value, initial: check is Modal, yes will put it in modals, cross levels\n// if-else-if assoc conditionGroup value, should be the same level,\n// and siblings, need renderEngine support\nexport class ExclusiveGroup implements IPublicModelExclusiveGroup {\n  readonly isExclusiveGroup = true;\n\n  readonly id = uniqueId('exclusive');\n\n  @obx.shallow readonly children: Node[] = [];\n\n  @obx private visibleIndex = 0;\n\n  @computed get document() {\n    return this.visibleNode.document;\n  }\n\n  @computed get zLevel() {\n    return this.visibleNode.zLevel;\n  }\n\n  @computed get length() {\n    return this.children.length;\n  }\n\n  @computed get visibleNode(): Node {\n    return this.children[this.visibleIndex];\n  }\n\n  @computed get firstNode(): Node {\n    return this.children[0]!;\n  }\n\n  get index() {\n    return this.firstNode.index;\n  }\n\n  add(node: Node) {\n    if (node.nextSibling && node.nextSibling.conditionGroup === this) {\n      const i = this.children.indexOf(node.nextSibling);\n      this.children.splice(i, 0, node);\n    } else {\n      this.children.push(node);\n    }\n  }\n\n  remove(node: Node) {\n    const i = this.children.indexOf(node);\n    if (i > -1) {\n      this.children.splice(i, 1);\n      if (this.visibleIndex > i) {\n        this.visibleIndex -= 1;\n      } else if (this.visibleIndex >= this.children.length) {\n        this.visibleIndex = this.children.length - 1;\n      }\n    }\n  }\n\n  setVisible(node: Node) {\n    const i = this.children.indexOf(node);\n    if (i > -1) {\n      this.visibleIndex = i;\n    }\n  }\n\n  isVisible(node: Node) {\n    const i = this.children.indexOf(node);\n    return i === this.visibleIndex;\n  }\n\n  readonly title: IPublicTypeTitleContent;\n\n  constructor(readonly name: string, title?: IPublicTypeTitleContent) {\n    makeObservable(this);\n    this.title = title || {\n      type: 'i18n',\n      intl: intl('Condition Group'),\n    };\n  }\n}\n\nexport function isExclusiveGroup(obj: any): obj is ExclusiveGroup {\n  return obj && obj.isExclusiveGroup;\n}\n","import { Node } from '../document/node/node';\n\nexport function includeSlot(node: Node, slotName: string | undefined): boolean {\n  const { slots = [] } = node;\n  return slots.some((slot) => {\n    return slotName && slotName === slot?.getExtraProp('name')?.getAsString();\n  });\n}\n\nexport function removeSlot(node: Node, slotName: string | undefined): boolean {\n  const { slots = [] } = node;\n  return slots.some((slot, idx) => {\n    if (slotName && slotName === slot?.getExtraProp('name')?.getAsString()) {\n      slot.remove();\n      slots.splice(idx, 1);\n      return true;\n    }\n    return false;\n  });\n}\n","import { isFormEvent, compatibleLegaoSchema, getNodeSchemaById, isNodeSchema } from '@alilc/lowcode-utils';\n\nexport type NodeRemoveOptions = {\n  suppressRemoveEvent?: boolean;\n};\n\nexport const utils = {\n  isNodeSchema,\n  isFormEvent,\n  compatibleLegaoSchema,\n  getNodeSchemaById,\n};\n\nexport enum EDITOR_EVENT {\n  NODE_CHILDREN_CHANGE = 'node.children.change',\n\n  NODE_VISIBLE_CHANGE = 'node.visible.change',\n}\n\nexport type Utils = typeof utils;","/**\n * 以下 symbol 均用于在 shell 层对外暴露的模型中存储相应内部模型的 key\n */\nexport const projectSymbol = Symbol('project');\nexport const designerSymbol = Symbol('designer');\nexport const skeletonSymbol = Symbol('skeleton');\nexport const documentSymbol = Symbol('document');\nexport const editorSymbol = Symbol('editor');\nexport const nodeSymbol = Symbol('node');\nexport const modalNodesManagerSymbol = Symbol('modalNodesManager');\nexport const nodeChildrenSymbol = Symbol('nodeChildren');\nexport const propSymbol = Symbol('prop');\nexport const settingPropEntrySymbol = Symbol('settingPropEntry');\nexport const settingTopEntrySymbol = Symbol('settingTopEntry');\nexport const propsSymbol = Symbol('props');\nexport const detectingSymbol = Symbol('detecting');\nexport const selectionSymbol = Symbol('selection');\nexport const historySymbol = Symbol('history');\nexport const canvasSymbol = Symbol('canvas');\nexport const dragonSymbol = Symbol('dragon');\nexport const componentMetaSymbol = Symbol('componentMeta');\nexport const dropLocationSymbol = Symbol('dropLocation');\nexport const simulatorHostSymbol = Symbol('simulatorHost');\nexport const dragObjectSymbol = Symbol('dragObject');\nexport const locateEventSymbol = Symbol('locateEvent');\nexport const designerCabinSymbol = Symbol('designerCabin');\nexport const hotkeySymbol = Symbol('hotkey');\nexport const pluginsSymbol = Symbol('plugins');\nexport const workspaceSymbol = Symbol('workspace');\nexport const windowSymbol = Symbol('window');\nexport const pluginInstanceSymbol = Symbol('plugin-instance');\nexport const resourceTypeSymbol = Symbol('resourceType');\nexport const resourceSymbol = Symbol('resource');\nexport const clipboardSymbol = Symbol('clipboard');","import {\n  IComponentMeta as InnerComponentMeta,\n  INode,\n} from '@alilc/lowcode-designer';\nimport { IPublicTypeNodeData, IPublicTypeNodeSchema, IPublicModelComponentMeta, IPublicTypeI18nData, IPublicTypeIconType, IPublicTypeNpmInfo, IPublicTypeTransformedComponentMetadata, IPublicModelNode, IPublicTypeAdvanced, IPublicTypeFieldConfig } from '@alilc/lowcode-types';\nimport { componentMetaSymbol, nodeSymbol } from '../symbols';\nimport { ReactElement } from 'react';\n\nexport class ComponentMeta implements IPublicModelComponentMeta {\n  private readonly [componentMetaSymbol]: InnerComponentMeta;\n\n  isComponentMeta = true;\n\n  constructor(componentMeta: InnerComponentMeta) {\n    this[componentMetaSymbol] = componentMeta;\n  }\n\n  static create(componentMeta: InnerComponentMeta | null): IPublicModelComponentMeta | null {\n    if (!componentMeta) {\n      return null;\n    }\n    return new ComponentMeta(componentMeta);\n  }\n\n  /**\n   * 组件名\n   */\n  get componentName(): string {\n    return this[componentMetaSymbol].componentName;\n  }\n\n  /**\n   * 是否是「容器型」组件\n   */\n  get isContainer(): boolean {\n    return this[componentMetaSymbol].isContainer;\n  }\n\n  /**\n   * 是否是最小渲染单元。\n   * 当组件需要重新渲染时：\n   *  若为最小渲染单元，则只渲染当前组件，\n   *  若不为最小渲染单元，则寻找到上层最近的最小渲染单元进行重新渲染，直至根节点。\n   */\n  get isMinimalRenderUnit(): boolean {\n    return this[componentMetaSymbol].isMinimalRenderUnit;\n  }\n\n  /**\n   * 是否为「模态框」组件\n   */\n  get isModal(): boolean {\n    return this[componentMetaSymbol].isModal;\n  }\n\n  /**\n   * 元数据配置\n   */\n  get configure(): IPublicTypeFieldConfig[] {\n    return this[componentMetaSymbol].configure;\n  }\n\n  /**\n   * 标题\n   */\n  get title(): string | IPublicTypeI18nData | ReactElement {\n    return this[componentMetaSymbol].title;\n  }\n\n  /**\n   * 图标\n   */\n  get icon(): IPublicTypeIconType {\n    return this[componentMetaSymbol].icon;\n  }\n\n  /**\n   * 组件 npm 信息\n   */\n  get npm(): IPublicTypeNpmInfo {\n    return this[componentMetaSymbol].npm;\n  }\n\n  /**\n   * @deprecated\n   */\n  get prototype() {\n    return (this[componentMetaSymbol] as any).prototype;\n  }\n\n  get availableActions(): any {\n    return this[componentMetaSymbol].availableActions;\n  }\n\n  get advanced(): IPublicTypeAdvanced {\n    return this[componentMetaSymbol].advanced;\n  }\n\n  /**\n   * 设置 npm 信息\n   * @param npm\n   */\n  setNpm(npm: IPublicTypeNpmInfo): void {\n    this[componentMetaSymbol].setNpm(npm);\n  }\n\n  /**\n   * 获取元数据\n   * @returns\n   */\n  getMetadata(): IPublicTypeTransformedComponentMetadata {\n    return this[componentMetaSymbol].getMetadata();\n  }\n\n  /**\n   * check if the current node could be placed in parent node\n   * @param my\n   * @param parent\n   * @returns\n   */\n  checkNestingUp(my: IPublicModelNode | IPublicTypeNodeData, parent: INode): boolean {\n    const curNode = (my as any).isNode ? (my as any)[nodeSymbol] : my;\n    return this[componentMetaSymbol].checkNestingUp(curNode as any, parent);\n  }\n\n  /**\n   * check if the target node(s) could be placed in current node\n   * @param my\n   * @param parent\n   * @returns\n   */\n  checkNestingDown(\n      my: IPublicModelNode | IPublicTypeNodeData,\n      target: IPublicTypeNodeSchema | IPublicModelNode | IPublicTypeNodeSchema[],\n    ) {\n    const curNode = (my as any)?.isNode ? (my as any)[nodeSymbol] : my;\n    return this[componentMetaSymbol].checkNestingDown(\n        curNode as any,\n        (target as any)[nodeSymbol] || target,\n      );\n  }\n\n  refreshMetadata(): void {\n    this[componentMetaSymbol].refreshMetadata();\n  }\n}\n","import { IProp as InnerProp } from '@alilc/lowcode-designer';\nimport { IPublicTypeCompositeValue, IPublicEnumTransformStage, IPublicModelProp, IPublicModelNode } from '@alilc/lowcode-types';\nimport { propSymbol } from '../symbols';\nimport { Node as ShellNode } from './node';\n\nexport class Prop implements IPublicModelProp {\n  private readonly [propSymbol]: InnerProp;\n\n  constructor(prop: InnerProp) {\n    this[propSymbol] = prop;\n  }\n\n  static create(prop: InnerProp | undefined | null): IPublicModelProp | null {\n    if (!prop) {\n      return null;\n    }\n    return new Prop(prop);\n  }\n\n  /**\n   * id\n   */\n  get id(): string {\n    return this[propSymbol].id;\n  }\n\n  /**\n   * key 值\n   * get key of prop\n   */\n  get key(): string | number | undefined {\n    return this[propSymbol].key;\n  }\n\n  /**\n   * 返回当前 prop 的路径\n   */\n  get path(): string[] {\n    return this[propSymbol].path;\n  }\n\n  /**\n   * 返回所属的节点实例\n   */\n  get node(): IPublicModelNode | null {\n    return ShellNode.create(this[propSymbol].getNode());\n  }\n\n  /**\n   * return the slot node (only if the current prop represents a slot)\n   */\n  get slotNode(): IPublicModelNode | null {\n    return ShellNode.create(this[propSymbol].slotNode);\n  }\n\n  /**\n   * judge if it is a prop or not\n   */\n  get isProp(): boolean {\n    return true;\n  }\n\n  /**\n   * 设置值\n   * @param val\n   */\n  setValue(val: IPublicTypeCompositeValue): void {\n    this[propSymbol].setValue(val);\n  }\n\n  /**\n   * 获取值\n   * @returns\n   */\n  getValue(): any {\n    return this[propSymbol].getValue();\n  }\n\n  /**\n   * 移除值\n   */\n  remove(): void {\n    this[propSymbol].remove();\n  }\n\n  /**\n   * 导出值\n   * @param stage\n   * @returns\n   */\n  exportSchema(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Render) {\n    return this[propSymbol].export(stage);\n  }\n}","import { IProps as InnerProps, getConvertedExtraKey } from '@alilc/lowcode-designer';\nimport { IPublicTypeCompositeValue, IPublicModelProps, IPublicModelNode, IPublicModelProp } from '@alilc/lowcode-types';\nimport { propsSymbol } from '../symbols';\nimport { Node as ShellNode } from './node';\nimport { Prop as ShellProp } from './prop';\n\nexport class Props implements IPublicModelProps {\n  private readonly [propsSymbol]: InnerProps;\n\n  constructor(props: InnerProps) {\n    this[propsSymbol] = props;\n  }\n\n  static create(props: InnerProps | undefined | null): IPublicModelProps | null {\n    if (!props) {\n      return null;\n    }\n    return new Props(props);\n  }\n\n  /**\n   * id\n   */\n  get id(): string {\n    return this[propsSymbol].id;\n  }\n\n  /**\n   * 返回当前 props 的路径\n   */\n  get path(): any[] {\n    return this[propsSymbol].path;\n  }\n\n  /**\n   * 返回所属的 node 实例\n   */\n  get node(): IPublicModelNode | null {\n    return ShellNode.create(this[propsSymbol].getNode());\n  }\n\n  /**\n   * 获取指定 path 的属性模型实例\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @returns\n   */\n  getProp(path: string): IPublicModelProp | null {\n    return ShellProp.create(this[propsSymbol].getProp(path));\n  }\n\n  /**\n   * 获取指定 path 的属性模型实例值\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @returns\n   */\n  getPropValue(path: string): any {\n    return this.getProp(path)?.getValue();\n  }\n\n  /**\n   * 获取指定 path 的属性模型实例，\n   *  注：导出时，不同于普通属性，该属性并不挂载在 props 之下，而是与 props 同级\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @returns\n   */\n  getExtraProp(path: string): IPublicModelProp | null {\n    return ShellProp.create(this[propsSymbol].getProp(getConvertedExtraKey(path)));\n  }\n\n  /**\n   * 获取指定 path 的属性模型实例值\n   *  注：导出时，不同于普通属性，该属性并不挂载在 props 之下，而是与 props 同级\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @returns\n   */\n  getExtraPropValue(path: string): any {\n    return this.getExtraProp(path)?.getValue();\n  }\n\n  /**\n   * 设置指定 path 的属性模型实例值\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @param value 值\n   * @returns\n   */\n  setPropValue(path: string, value: IPublicTypeCompositeValue): void {\n    return this.getProp(path)?.setValue(value);\n  }\n\n  /**\n   * 设置指定 path 的属性模型实例值\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @param value 值\n   * @returns\n   */\n  setExtraPropValue(path: string, value: IPublicTypeCompositeValue): void {\n    return this.getExtraProp(path)?.setValue(value);\n  }\n\n  /**\n   * test if the specified key is existing or not.\n   * @param key\n   * @returns\n   */\n  has(key: string): boolean {\n    return this[propsSymbol].has(key);\n  }\n\n  /**\n   * add a key with given value\n   * @param value\n   * @param key\n   * @returns\n   */\n  add(value: IPublicTypeCompositeValue, key?: string | number | undefined): any {\n    return this[propsSymbol].add(value, key);\n  }\n}","import {\n  IDocumentModel as InnerDocumentModel,\n  INode as InnerNode,\n  ISelection as InnerSelection,\n} from '@alilc/lowcode-designer';\nimport { Node as ShellNode } from './node';\nimport { selectionSymbol } from '../symbols';\nimport { IPublicModelSelection, IPublicModelNode, IPublicTypeDisposable } from '@alilc/lowcode-types';\n\nexport class Selection implements IPublicModelSelection {\n  private readonly [selectionSymbol]: InnerSelection;\n\n  constructor(document: InnerDocumentModel) {\n    this[selectionSymbol] = document.selection;\n  }\n\n  /**\n   * 返回选中的节点 id\n   */\n  get selected(): string[] {\n    return this[selectionSymbol].selected;\n  }\n\n  /**\n   * return selected Node instance\n   */\n  get node(): IPublicModelNode | null {\n    const nodes = this.getNodes();\n    return nodes && nodes.length > 0 ? nodes[0] : null;\n  }\n\n  /**\n   * 选中指定节点（覆盖方式）\n   * @param id\n   */\n  select(id: string): void {\n    this[selectionSymbol].select(id);\n  }\n\n  /**\n   * 批量选中指定节点们\n   * @param ids\n   */\n  selectAll(ids: string[]): void {\n    this[selectionSymbol].selectAll(ids);\n  }\n\n  /**\n   * 移除选中的指定节点\n   * @param id\n   */\n  remove(id: string): void {\n    this[selectionSymbol].remove(id);\n  }\n\n  /**\n   * 清除所有选中节点\n   */\n  clear(): void {\n    this[selectionSymbol].clear();\n  }\n\n  /**\n   * 判断是否选中了指定节点\n   * @param id\n   * @returns\n   */\n  has(id: string): boolean {\n    return this[selectionSymbol].has(id);\n  }\n\n  /**\n   * 选中指定节点（增量方式）\n   * @param id\n   */\n  add(id: string): void {\n    this[selectionSymbol].add(id);\n  }\n\n  /**\n   * 获取选中的节点实例\n   * @returns\n   */\n  getNodes(): IPublicModelNode[] {\n    const innerNodes = this[selectionSymbol].getNodes();\n    const nodes: IPublicModelNode[] = [];\n    innerNodes.forEach((node: InnerNode) => {\n      const shellNode = ShellNode.create(node);\n      if (shellNode) {\n        nodes.push(shellNode);\n      }\n    });\n    return nodes;\n  }\n\n  /**\n   * 获取选区的顶层节点\n   * for example:\n   *  getNodes() returns [A, subA, B], then\n   *  getTopNodes() will return [A, B], subA will be removed\n   * @returns\n   */\n  getTopNodes(includeRoot: boolean = false): IPublicModelNode[] {\n    const innerNodes = this[selectionSymbol].getTopNodes(includeRoot);\n    const nodes: IPublicModelNode[] = [];\n    innerNodes.forEach((node: InnerNode) => {\n      const shellNode = ShellNode.create(node);\n      if (shellNode) {\n        nodes.push(shellNode);\n      }\n    });\n    return nodes;\n  }\n\n  onSelectionChange(fn: (ids: string[]) => void): IPublicTypeDisposable {\n    return this[selectionSymbol].onSelectionChange(fn);\n  }\n}\n","import { IDocumentModel as InnerDocumentModel, IHistory as InnerHistory } from '@alilc/lowcode-designer';\nimport { historySymbol, documentSymbol } from '../symbols';\nimport { IPublicModelHistory, IPublicTypeDisposable } from '@alilc/lowcode-types';\n\nexport class History implements IPublicModelHistory {\n  private readonly [documentSymbol]: InnerDocumentModel;\n\n  private get [historySymbol](): InnerHistory {\n    return this[documentSymbol].getHistory();\n  }\n\n  constructor(document: InnerDocumentModel) {\n    this[documentSymbol] = document;\n  }\n\n  /**\n   * 历史记录跳转到指定位置\n   * @param cursor\n   */\n  go(cursor: number): void {\n    this[historySymbol].go(cursor);\n  }\n\n  /**\n   * 历史记录后退\n   */\n  back(): void {\n    this[historySymbol].back();\n  }\n\n  /**\n   * 历史记录前进\n   */\n  forward(): void {\n    this[historySymbol].forward();\n  }\n\n  /**\n   * 保存当前状态\n   */\n  savePoint(): void {\n    this[historySymbol].savePoint();\n  }\n\n  /**\n   * 当前是否是「保存点」，即是否有状态变更但未保存\n   * @returns\n   */\n  isSavePoint(): boolean {\n    return this[historySymbol].isSavePoint();\n  }\n\n  /**\n   * 获取 state，判断当前是否为「可回退」、「可前进」的状态\n   * @returns\n   */\n  getState(): number {\n    return this[historySymbol].getState();\n  }\n\n  /**\n   * 监听 state 变更事件\n   * @param func\n   * @returns\n   */\n  onChangeState(func: () => any): IPublicTypeDisposable {\n    return this[historySymbol].onChangeState(func);\n  }\n\n  /**\n   * 监听历史记录游标位置变更事件\n   * @param func\n   * @returns\n   */\n  onChangeCursor(func: () => any): IPublicTypeDisposable {\n    return this[historySymbol].onChangeCursor(func);\n  }\n}\n","import {\n  IDropLocation as InnerDropLocation,\n} from '@alilc/lowcode-designer';\nimport { dropLocationSymbol } from '../symbols';\nimport { Node as ShellNode } from './node';\nimport { IPublicModelDropLocation, IPublicTypeLocationDetail, IPublicModelLocateEvent } from '@alilc/lowcode-types';\n\nexport class DropLocation implements IPublicModelDropLocation {\n  private readonly [dropLocationSymbol]: InnerDropLocation;\n\n  constructor(dropLocation: InnerDropLocation) {\n    this[dropLocationSymbol] = dropLocation;\n  }\n\n  static create(dropLocation: InnerDropLocation | null): IPublicModelDropLocation | null {\n    if (!dropLocation) {\n      return null;\n    }\n    return new DropLocation(dropLocation);\n  }\n\n  get target() {\n    return ShellNode.create(this[dropLocationSymbol].target);\n  }\n\n  get detail(): IPublicTypeLocationDetail {\n    return this[dropLocationSymbol].detail;\n  }\n\n  get event(): IPublicModelLocateEvent {\n    return this[dropLocationSymbol].event;\n  }\n\n  clone(event: IPublicModelLocateEvent): IPublicModelDropLocation {\n    return new DropLocation(this[dropLocationSymbol].clone(event));\n  }\n}\n","/* eslint-disable max-len */\nimport { obx, computed, makeObservable } from '@alilc/lowcode-editor-core';\nimport { Logger } from '@alilc/lowcode-utils';\nimport { IPublicTypeWidgetBaseConfig } from '@alilc/lowcode-types';\nimport { WidgetContainer } from './widget/widget-container';\nimport { Skeleton } from './skeleton';\nimport { IWidget } from './widget/widget';\n\nconst logger = new Logger({ level: 'warn', bizName: 'skeleton:area' });\nexport interface IArea<C, T> {\n  isEmpty(): boolean;\n  add(config: T | C): T;\n  remove(config: T | string): number;\n  setVisible(flag: boolean): void;\n  hide(): void;\n  show(): void;\n}\n\nexport class Area<C extends IPublicTypeWidgetBaseConfig = any, T extends IWidget = IWidget> implements IArea<C, T> {\n  @obx private _visible = true;\n\n  @computed get visible() {\n    if (this.exclusive) {\n      return this.container.current != null;\n    }\n    return this._visible;\n  }\n\n  get current() {\n    if (this.exclusive) {\n      return this.container.current;\n    }\n    return null;\n  }\n\n  readonly container: WidgetContainer<T, C>;\n\n  constructor(readonly skeleton: Skeleton, readonly name: string, handle: (item: T | C) => T, private exclusive?: boolean, defaultSetCurrent = false) {\n    makeObservable(this);\n    this.container = skeleton.createContainer(name, handle, exclusive, () => this.visible, defaultSetCurrent);\n  }\n\n  isEmpty(): boolean {\n    return this.container.items.length < 1;\n  }\n\n  add(config: T | C): T {\n    const item = this.container.get(config.name);\n    if (item) {\n      logger.warn(`The ${config.name} has already been added to skeleton.`);\n      return item;\n    }\n    return this.container.add(config);\n  }\n\n  remove(config: T | string): number {\n    return this.container.remove(config);\n  }\n\n  private lastCurrent: T | null = null;\n\n  setVisible(flag: boolean) {\n    if (this.exclusive) {\n      const { current } = this.container;\n      if (flag && !current) {\n        this.container.active(this.lastCurrent || this.container.getAt(0));\n      } else if (current) {\n        this.lastCurrent = current;\n        this.container.unactive(current);\n      }\n      return;\n    }\n    this._visible = flag;\n  }\n\n  hide() {\n    this.setVisible(false);\n  }\n\n  show() {\n    this.setVisible(true);\n  }\n\n  // ========== compatible for vision ========\n  /**\n   * @deprecated\n   */\n  removeAction(config: string): number {\n    return this.remove(config);\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '../area';\n\n@observer\nexport default class TopArea extends Component<{ area: Area; itemClassName?: string }> {\n  render() {\n    const { area, itemClassName } = this.props;\n    if (area.isEmpty()) {\n      return null;\n    }\n    return (\n      <div className={classNames('lc-top-area engine-actionpane', {\n        'lc-area-visible': area.visible,\n      })}\n      >\n        <Contents area={area} itemClassName={itemClassName} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area; itemClassName?: string }> {\n  render() {\n    const { area, itemClassName } = this.props;\n    const left: any[] = [];\n    const center: any[] = [];\n    const right: any[] = [];\n    area.container.items.slice().sort((a, b) => {\n      const index1 = a.config?.index || 0;\n      const index2 = b.config?.index || 0;\n      return index1 === index2 ? 0 : (index1 > index2 ? 1 : -1);\n    }).forEach(item => {\n      const content = (\n        <div className={itemClassName || ''} key={`top-area-${item.name}`}>\n          {item.content}\n        </div>\n      );\n      if (item.align === 'center') {\n        center.push(content);\n      } else if (item.align === 'left') {\n        left.push(content);\n      } else {\n        right.push(content);\n      }\n    });\n    return (\n      <Fragment>\n        <div className=\"lc-top-area-left\">{left}</div>\n        <div className=\"lc-top-area-center\">{center}</div>\n        <div className=\"lc-top-area-right\">{right}</div>\n      </Fragment>\n    );\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '../area';\n\n@observer\nexport default class LeftArea extends Component<{ area: Area }> {\n  render() {\n    const { area } = this.props;\n    if (area.isEmpty()) {\n      return null;\n    }\n    return (\n      <div className={classNames('lc-left-area', {\n        'lc-area-visible': area.visible,\n      })}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n\n@observer\nclass Contents extends Component<{ area: Area }> {\n  render() {\n    const { area } = this.props;\n    const top: any[] = [];\n    const bottom: any[] = [];\n    area.container.items.slice().sort((a, b) => {\n      const index1 = a.config?.index || 0;\n      const index2 = b.config?.index || 0;\n      return index1 === index2 ? 0 : (index1 > index2 ? 1 : -1);\n    }).forEach((item) => {\n      const content = <div key={`left-area-${item.name}`}>{item.content}</div>;\n      if (item.align === 'bottom') {\n        bottom.push(content);\n      } else {\n        top.push(content);\n      }\n    });\n    return (\n      <Fragment>\n        <div className=\"lc-left-area-top\">{top}</div>\n        <div className=\"lc-left-area-bottom\">{bottom}</div>\n      </Fragment>\n    );\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '../area';\nimport { PanelConfig } from '../types';\nimport { Panel } from '../widget/panel';\n\n@observer\nexport default class LeftFixedPane extends Component<{ area: Area<PanelConfig, Panel> }> {\n  componentDidUpdate() {\n    // FIXME: dirty fix, need deep think\n    this.props.area.skeleton.editor.get('designer')?.touchOffsetObserver();\n  }\n\n\n  render() {\n    const { area } = this.props;\n    const width = area.current?.config.props?.width;\n    const style = width\n      ? {\n        width,\n      }\n      : undefined;\n\n    return (\n      <div\n        className={classNames('lc-left-fixed-pane', {\n          'lc-area-visible': area.visible,\n        })}\n        style={style}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area<PanelConfig, Panel> }> {\n  render() {\n    const { area } = this.props;\n    return <Fragment>{area.container.items.map((panel) => panel.content)}</Fragment>;\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer, Focusable, focusTracker } from '@alilc/lowcode-editor-core';\nimport { Area } from '../area';\nimport { Panel } from '../widget/panel';\n\n@observer\nexport default class LeftFloatPane extends Component<{ area: Area<any, Panel> }> {\n  private dispose?: () => void;\n\n  private focusing?: Focusable;\n\n  private shell: HTMLElement | null = null;\n\n  componentDidMount() {\n    const { area } = this.props;\n    const triggerClose = (e: any) => {\n      if (!area.visible) return;\n      // 当 MouseEvent 的 target 为「插入占位符」时，不关闭当前 panel\n      if (e.originalEvent?.target?.classList.contains('insertion')) return;\n      // 假如当前操作 target 祖先节点中有属性 data-keep-visible-while-dragging=\"true\" 代表该 target 所属 panel\n      // 不希望 target 在 panel 范围内拖拽时关闭 panel\n      const panelElem = e.originalEvent?.target.closest('div[data-keep-visible-while-dragging=\"true\"]');\n      if (panelElem) return;\n      area.setVisible(false);\n    };\n    area.skeleton.editor.eventBus.on('designer.drag', triggerClose);\n\n    this.dispose = () => {\n      area.skeleton.editor.removeListener('designer.drag', triggerClose);\n    };\n\n    this.focusing = focusTracker.create({\n      range: (e) => {\n        const target = e.target as HTMLElement;\n        if (!target) {\n          return false;\n        }\n        if (this.shell?.contains(target)) {\n          return true;\n        }\n        // 点击了 iframe 内容，算失焦\n        if ((document.querySelector('.lc-simulator-content-frame') as HTMLIFrameElement)?.contentWindow?.document.documentElement.contains(target)) {\n          return false;\n        }\n        // 点击设置区\n        if (document.querySelector('.lc-right-area')?.contains(target)) {\n          return false;\n        }\n        // 点击非编辑区域的popup/dialog,插件栏左侧等不触发失焦\n        if (!document.querySelector('.lc-workbench')?.contains(target)) {\n          return true;\n        }\n        // 排除设置区，iframe 之后，都不算失焦\n        if (document.querySelector('.lc-workbench-body')?.contains(target)) {\n          return true;\n        }\n        const docks = area.current?.getAssocDocks();\n        if (docks && docks?.length) {\n          return docks.some(dock => dock.getDOMNode()?.contains(target));\n        }\n        return false;\n      },\n      onEsc: () => {\n        this.props.area.setVisible(false);\n      },\n      onBlur: () => {\n        this.props.area.setVisible(false);\n      },\n    });\n\n    this.onEffect();\n  }\n\n  onEffect() {\n    const { area } = this.props;\n    if (area.visible) {\n      this.focusing?.active();\n      // 关闭当前fixed区域的面板\n      // TODO: 看看有没有更合适的地方\n      const fixedContainer = area?.skeleton?.leftFixedArea?.container;\n      const currentFixed = fixedContainer?.current;\n      if (currentFixed) {\n        fixedContainer.unactive(currentFixed);\n      }\n    } else {\n      this.focusing?.suspense();\n    }\n  }\n\n  componentDidUpdate() {\n    this.onEffect();\n  }\n\n  componentWillUnmount() {\n    this.focusing?.purge();\n    this.dispose?.();\n  }\n\n  render() {\n    const { area } = this.props;\n    const width = area.current?.config.props?.width;\n\n    const style = width ? {\n      width,\n    } : undefined;\n    return (\n      <div\n        ref={(ref) => { this.shell = ref; }}\n        className={classNames('lc-left-float-pane', {\n          'lc-area-visible': area.visible,\n        })}\n        style={style}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area<any, Panel> }> {\n  render() {\n    const { area } = this.props;\n    return (\n      <Fragment>\n        {area.container.items.map((panel) => panel.content)}\n      </Fragment>\n    );\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '../area';\n\n@observer\nexport default class Toolbar extends Component<{ area: Area }> {\n  render() {\n    const { area } = this.props;\n    if (area.isEmpty()) {\n      return null;\n    }\n    return (\n      <div\n        className={classNames('lc-toolbar', {\n          'lc-area-visible': area.visible,\n        })}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area }> {\n  render() {\n    const { area } = this.props;\n    const left: any[] = [];\n    const center: any[] = [];\n    const right: any[] = [];\n    area.container.items.forEach((item) => {\n      if (item.align === 'center') {\n        center.push(item.content);\n      } else if (item.align === 'right') {\n        right.push(item.content);\n      } else {\n        left.push(item.content);\n      }\n    });\n    return (\n      <Fragment>\n        <div className=\"lc-toolbar-left\">{left}</div>\n        <div className=\"lc-toolbar-center\">{center}</div>\n        <div className=\"lc-toolbar-right\">{right}</div>\n      </Fragment>\n    );\n  }\n}\n","import { Component } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '../area';\nimport { Panel } from '../widget/panel';\nimport { Widget } from '../widget/widget';\n\n@observer\nexport default class MainArea extends Component<{ area: Area<any, Panel | Widget> }> {\n  render() {\n    const { area } = this.props;\n    return (\n      <div className={classNames('lc-main-area engine-workspacepane')}>\n        {area.container.items.map((item) => item.content)}\n      </div>\n    );\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '../area';\nimport { Panel } from '../widget/panel';\n\n@observer\nexport default class BottomArea extends Component<{ area: Area<any, Panel> }> {\n  render() {\n    const { area } = this.props;\n    if (area.isEmpty()) {\n      return null;\n    }\n    return (\n      <div className={classNames('lc-bottom-area', {\n        'lc-area-visible': area.visible,\n      })}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area<any, Panel> }> {\n  render() {\n    const { area } = this.props;\n    return (\n      <Fragment>\n        {area.container.items.map((item) => item.content)}\n      </Fragment>\n    );\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '../area';\nimport { Panel } from '../widget/panel';\n\n@observer\nexport default class RightArea extends Component<{ area: Area<any, Panel> }> {\n  render() {\n    const { area } = this.props;\n    if (area.isEmpty()) {\n      return null;\n    }\n    return (\n      <div className={classNames('lc-right-area engine-tabpane', {\n        'lc-area-visible': area.visible,\n      })}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n\n@observer\nclass Contents extends Component<{ area: Area<any, Panel> }> {\n  render() {\n    const { area } = this.props;\n    return (\n      <Fragment>\n        {area.container.items.map((item) => item.content)}\n      </Fragment>\n    );\n  }\n}\n","import { createContext } from 'react';\nimport { Skeleton } from './skeleton';\n\nexport const SkeletonContext = createContext<Skeleton>({} as any);\n","import { Component } from 'react';\nimport { TipContainer, observer } from '@alilc/lowcode-editor-core';\nimport classNames from 'classnames';\nimport { Skeleton } from '../skeleton';\nimport TopArea from './top-area';\nimport LeftArea from './left-area';\nimport LeftFixedPane from './left-fixed-pane';\nimport LeftFloatPane from './left-float-pane';\nimport Toolbar from './toolbar';\nimport MainArea from './main-area';\nimport BottomArea from './bottom-area';\nimport RightArea from './right-area';\nimport './workbench.less';\nimport { SkeletonContext } from '../context';\nimport { EditorConfig, PluginClassSet } from '@alilc/lowcode-types';\n\n@observer\nexport class Workbench extends Component<{\n  skeleton: Skeleton;\n  config?: EditorConfig;\n  components?: PluginClassSet;\n  className?: string;\n  topAreaItemClassName?: string;\n}> {\n  constructor(props: any) {\n    super(props);\n    const { config, components, skeleton } = this.props;\n    skeleton.buildFromConfig(config, components);\n  }\n\n  render() {\n    const {\n      skeleton,\n      className,\n      topAreaItemClassName,\n    } = this.props;\n    return (\n      <div className={classNames('lc-workbench', className)}>\n        <SkeletonContext.Provider value={this.props.skeleton}>\n          <TopArea area={skeleton.topArea} itemClassName={topAreaItemClassName} />\n          <div className=\"lc-workbench-body\">\n            <LeftArea area={skeleton.leftArea} />\n            <LeftFloatPane area={skeleton.leftFloatArea} />\n            <LeftFixedPane area={skeleton.leftFixedArea} />\n            <div className=\"lc-workbench-center\">\n              <Toolbar area={skeleton.toolbar} />\n              <MainArea area={skeleton.mainArea} />\n              <BottomArea area={skeleton.bottomArea} />\n            </div>\n            <RightArea area={skeleton.rightArea} />\n          </div>\n          <TipContainer />\n        </SkeletonContext.Provider>\n      </div>\n    );\n  }\n}\n","import { ReactElement, ComponentType } from 'react';\nimport {\n  IPublicTypeTitleContent,\n  IPublicTypeIconType,\n  IPublicTypeI18nData,\n  TipContent,\n  IPublicTypeWidgetConfigArea,\n  IPublicTypeWidgetBaseConfig,\n  IPublicTypePanelDockPanelProps,\n} from '@alilc/lowcode-types';\nimport { IWidget } from './widget/widget';\n\nexport interface WidgetConfig extends IPublicTypeWidgetBaseConfig {\n  type: 'Widget';\n  props?: {\n    align?: 'left' | 'right' | 'bottom' | 'center' | 'top';\n    onInit?: (widget: IWidget) => void;\n    title?: IPublicTypeTitleContent;\n  };\n  content?: string | ReactElement | ComponentType<any>; // children\n}\n\nexport function isWidgetConfig(obj: any): obj is WidgetConfig {\n  return obj && obj.type === 'Widget';\n}\n\nexport interface DockProps {\n  title?: IPublicTypeTitleContent;\n  icon?: IPublicTypeIconType;\n  size?: 'small' | 'medium' | 'large';\n  className?: string;\n  description?: TipContent;\n  onClick?: () => void;\n}\n\nexport interface DividerConfig extends IPublicTypeWidgetBaseConfig {\n  type: 'Divider';\n  props?: {\n    align?: 'left' | 'right' | 'center';\n  };\n}\n\nexport function isDividerConfig(obj: any): obj is DividerConfig {\n  return obj && obj.type === 'Divider';\n}\n\nexport interface IDockBaseConfig extends IPublicTypeWidgetBaseConfig {\n  props?: DockProps & {\n    align?: 'left' | 'right' | 'bottom' | 'center' | 'top';\n    onInit?: (widget: IWidget) => void;\n  };\n}\n\nexport interface DockConfig extends IDockBaseConfig {\n  type: 'Dock';\n  content?: string | ReactElement | ComponentType<any>;\n}\n\nexport function isDockConfig(obj: any): obj is DockConfig {\n  return obj && /Dock$/.test(obj.type);\n}\n\n// 按钮弹窗扩展\nexport interface DialogDockConfig extends IDockBaseConfig {\n  type: 'DialogDock';\n  dialogProps?: {\n    [key: string]: any;\n    title?: IPublicTypeTitleContent;\n  };\n}\n\nexport function isDialogDockConfig(obj: any): obj is DialogDockConfig {\n  return obj && obj.type === 'DialogDock';\n}\n\n// 窗格扩展\nexport interface PanelConfig extends IPublicTypeWidgetBaseConfig {\n  type: 'Panel';\n  content?: string | ReactElement | ComponentType<any> | PanelConfig[]; // as children\n  props?: PanelProps;\n}\n\nexport function isPanelConfig(obj: any): obj is PanelConfig {\n  return obj && obj.type === 'Panel';\n}\n\nexport type HelpTipConfig = string | { url?: string; content?: string | ReactElement };\n\nexport interface PanelProps extends IPublicTypePanelDockPanelProps {\n  title?: IPublicTypeTitleContent;\n  icon?: any; // 冗余字段\n  description?: string | IPublicTypeI18nData;\n  help?: HelpTipConfig; // 显示问号帮助\n  hiddenWhenInit?: boolean; //  when this is true, by default will be hidden\n  condition?: (widget: IWidget) => any;\n  onInit?: (widget: IWidget) => any;\n  onDestroy?: () => any;\n  shortcut?: string; // 只有在特定位置，可触发 toggle show\n  enableDrag?: boolean; // 是否开启通过 drag 调整 宽度\n  keepVisibleWhileDragging?: boolean; // 是否在该 panel 范围内拖拽时保持 visible 状态\n}\n\nexport interface PanelDockConfig extends IDockBaseConfig {\n  type: 'PanelDock';\n  panelName?: string;\n  panelProps?: PanelProps & {\n    area?: IPublicTypeWidgetConfigArea;\n  };\n  content?: string | ReactElement | ComponentType<any> | PanelConfig[]; // content for pane\n}\n\nexport function isPanelDockConfig(obj: any): obj is PanelDockConfig {\n  return obj && obj.type === 'PanelDock';\n}\n","import { obx, computed, makeObservable } from '@alilc/lowcode-editor-core';\nimport { hasOwnProperty } from '@alilc/lowcode-utils';\nimport { isPanel } from './panel';\n\nexport interface WidgetItem {\n  name: string;\n}\n\nexport interface Activeable {\n  setActive(flag: boolean): void;\n}\n\nfunction isActiveable(obj: any): obj is Activeable {\n  return obj && obj.setActive;\n}\n\nexport class WidgetContainer<T extends WidgetItem = any, G extends WidgetItem = any> {\n  @obx.shallow items: T[] = [];\n\n  private maps: { [name: string]: T } = {};\n\n  @obx.ref private _current: T & Activeable | null = null;\n\n  get current() {\n    return this._current;\n  }\n\n  // eslint-disable-next-line no-useless-constructor\n  constructor(\n    readonly name: string,\n    private handle: (item: T | G) => T,\n    private exclusive: boolean = false,\n    private checkVisible: () => boolean = () => true,\n    private defaultSetCurrent: boolean = false,\n  ) {\n    makeObservable(this);\n  }\n\n  @computed get visible() {\n    return this.checkVisible();\n  }\n\n  active(nameOrItem?: T | string | null) {\n    let item: any = nameOrItem;\n    if (nameOrItem && typeof nameOrItem === 'string') {\n      item = this.get(nameOrItem);\n    }\n    if (!isActiveable(item)) {\n      item = null;\n    }\n\n    if (this.exclusive) {\n      if (this._current === item) {\n        return;\n      }\n      if (this._current) {\n        this._current.setActive(false);\n      }\n      this._current = item;\n    }\n\n    if (item) {\n      item.setActive(true);\n    }\n  }\n\n  unactive(nameOrItem?: T | string | null) {\n    let item: any = nameOrItem;\n    if (nameOrItem && typeof nameOrItem === 'string') {\n      item = this.get(nameOrItem);\n    }\n    if (!isActiveable(item)) {\n      item = null;\n    }\n    if (this._current === item) {\n      this._current = null;\n    }\n    if (item) {\n      item.setActive(false);\n    }\n  }\n\n  unactiveAll() {\n    Object.keys(this.maps).forEach((name) => this.unactive(name));\n  }\n\n  add(item: T | G): T {\n    item = this.handle(item);\n    const origin = this.get(item.name);\n    if (origin === item) {\n      return origin;\n    }\n    const i = origin ? this.items.indexOf(origin) : -1;\n    if (i > -1) {\n      this.items[i] = item;\n    } else {\n      this.items.push(item);\n    }\n    this.maps[item.name] = item;\n    if (isPanel(item)) {\n      item.setParent(this);\n    }\n    if (this.defaultSetCurrent) {\n      const shouldHiddenWhenInit = (item as any).config?.props?.hiddenWhenInit;\n      if (!this._current && !shouldHiddenWhenInit) {\n        this.active(item);\n      }\n    }\n    return item;\n  }\n\n  get(name: string): T | null {\n    return this.maps[name] || null;\n  }\n\n  getAt(index: number): T | null {\n    return this.items[index] || null;\n  }\n\n  has(name: string): boolean {\n    return hasOwnProperty(this.maps, name);\n  }\n\n  indexOf(item: T): number {\n    return this.items.indexOf(item);\n  }\n\n  /**\n   * return indexOf the deletion\n   */\n  remove(item: string | T): number {\n    const thing = typeof item === 'string' ? this.get(item) : item;\n    if (!thing) {\n      return -1;\n    }\n    const i = this.items.indexOf(thing);\n    if (i > -1) {\n      this.items.splice(i, 1);\n    }\n    delete this.maps[thing.name];\n    if (thing === this.current) {\n      this._current = null;\n    }\n    return i;\n  }\n}\n","import { IPublicTypeIconType, IPublicTypeTitleContent, TipContent } from '@alilc/lowcode-types';\nimport { isI18nData, isTitleConfig } from '@alilc/lowcode-utils';\nimport { isValidElement } from 'react';\n\nexport function composeTitle(title?: IPublicTypeTitleContent, icon?: IPublicTypeIconType, tip?: TipContent, tipAsTitle?: boolean, noIcon?: boolean) {\n  if (!title) {\n    title = {};\n    if (!icon || tipAsTitle) {\n      title.label = tip;\n      tip = undefined;\n    }\n  }\n  if (icon || tip) {\n    if (typeof title !== 'object' || isValidElement(title) || isI18nData(title)) {\n      if (isValidElement(title)) {\n        if (title.type === 'svg' || (title.type as any).getIcon) {\n          if (!icon) {\n            icon = title as any;\n          }\n          if (tipAsTitle) {\n            title = tip as any;\n            tip = null;\n          } else {\n            title = undefined;\n          }\n        }\n      }\n      title = {\n        label: title,\n        icon,\n        tip,\n      };\n    } else {\n      title = {\n        ...title,\n        icon,\n        tip,\n      };\n    }\n  }\n  if (isTitleConfig(title) && noIcon) {\n    if (!isValidElement(title)) {\n      title.icon = undefined;\n    }\n  }\n  return title;\n}\n","import { Component } from 'react';\nimport classNames from 'classnames';\nimport './index.less';\n\nexport interface DraggableLineProps {\n  onDrag: (l: number, e: any) => any;\n  onDragStart?: () => any;\n  onDragEnd?: () => any;\n  position?: 'right' | 'left' | 'top';\n  className?: string;\n  maxIncrement?: number;\n  maxDecrement?: number;\n}\n\nexport default class DraggableLine extends Component<DraggableLineProps> {\n  static displayName = 'DraggableLine';\n\n  static defaultProps = {\n    onDrag() {},\n    position: 'right',\n    className: '',\n    maxIncrement: 100,\n    maxDecrement: 0,\n  };\n\n  private startDrag: boolean;\n  private canDrag: boolean;\n  private offset: number;\n  private currentOffset: number;\n  private offEvent: any;\n  private offDragEvent: any;\n  private startOffset: any;\n  private shell: HTMLElement | null = null;\n\n  constructor(props: DraggableLineProps) {\n    super(props);\n    this.startDrag = false;\n    this.canDrag = false;\n    this.offset = 0;\n    this.currentOffset = 0;\n  }\n\n  componentDidMount() {\n    this.offEvent = this.initEvent();\n  }\n\n  componentWillUnmount() {\n    if (this.offEvent) {\n      this.offEvent();\n    }\n  }\n\n  onSelectStart(e: any) {\n    if (this.startDrag) {\n      e.preventDefault();\n    }\n  }\n\n  onStartMove(e: any) {\n    const { onDragStart } = this.props;\n    if (!this.startDrag) {\n      onDragStart && onDragStart();\n    }\n    this.startDrag = true;\n    this.canDrag = true;\n    this.currentOffset = 0;\n    this.offDragEvent = this.initDragEvent();\n    this.startOffset = this.getClientPosition(e);\n  }\n\n  onEndMove() {\n    const { onDragEnd } = this.props;\n    if (this.startDrag) {\n      if (this.offDragEvent) {\n        this.offDragEvent();\n      }\n      this.startDrag = false;\n      this.offset = this.currentOffset;\n    }\n    onDragEnd && onDragEnd();\n  }\n\n  onDrag(e: any) {\n    const { position, onDrag, maxIncrement = 100, maxDecrement = 0 } = this.props;\n    if (this.startDrag) {\n      if (position === 'left' || position === 'top') {\n        this.currentOffset = this.offset + this.startOffset - this.getClientPosition(e);\n      } else {\n        this.currentOffset = this.offset + this.getClientPosition(e) - this.startOffset;\n      }\n\n      if (this.currentOffset < -maxDecrement) {\n        this.currentOffset = -maxDecrement;\n      } else if (this.currentOffset > maxIncrement) {\n        this.currentOffset = maxIncrement;\n      }\n\n      onDrag(this.currentOffset, e);\n    }\n  }\n\n  getClientPosition(e: any) {\n    const { position } = this.props;\n    return position === 'left' || position === 'right' ? e.clientX : e.clientY;\n  }\n\n  initEvent() {\n    const selectStart = this.onSelectStart.bind(this);\n    document.addEventListener('selectstart', selectStart);\n    return () => document.removeEventListener('selectstart', selectStart);\n  }\n\n  initDragEvent() {\n    const onDrag = this.onDrag.bind(this);\n    const onEndMove = this.onEndMove.bind(this);\n    document.addEventListener('mousemove', onDrag);\n    document.addEventListener('mouseup', onEndMove);\n    return () => {\n      document.removeEventListener('mousemove', onDrag);\n      document.removeEventListener('mouseup', onEndMove);\n    };\n  }\n\n  getParent() {\n    return this.shell?.parentElement;\n  }\n\n  render() {\n    const { className = '', position } = this.props;\n\n    return (\n      <div\n        ref={(ref) => { this.shell = ref; }}\n        className={classNames(\n          position === 'left' || position === 'right'\n            ? 'lc-draggable-line-vertical'\n            : 'lc-draggable-line-horizontal',\n          {\n            [className]: !!className,\n          },\n        )}\n        onMouseDown={(e) => this.onStartMove(e)}\n      />\n    );\n  }\n}\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconFix(props: IconProps) {\n  const rect = {\n    width: 13,\n    height: 13,\n  };\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props} {...rect}>\n      <path d=\"M750.848 28.928l245.248 242.944a66.048 66.048 0 1 1-93.184 93.184l-25.6-19.456-249.6 353.792 78.336 78.336a66.048 66.048 0 0 1-93.184 92.672l-460.8-464.64a66.048 66.048 0 0 1 93.184-93.184l76.8 78.336 354.048-249.856-18.176-18.944a66.048 66.048 0 1 1 93.184-93.184zM380.672 732.416l-91.904-90.88c-74.24 89.6-191.488 219.904-212.736 247.04a419.84 419.84 0 0 0-70.656 128 419.84 419.84 0 0 0 128-70.144c27.136-21.248 157.44-138.496 246.528-214.016z\" />\n    </SVGIcon>\n  );\n}\n\nIconFix.displayName = 'Fix';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconFloat(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M160.256 816.64C116.224 872.448 102.4 921.6 102.4 921.6s49.152-13.824 104.96-57.856c22.016-17.408 128-112.64 200.704-174.08l-73.728-73.728c-61.44 72.704-157.184 178.688-174.08 200.704zM648.704 209.408L442.368 355.328l226.304 226.304 145.92-206.336 15.872 15.872c20.992 20.992 54.784 20.992 75.776 0s20.992-54.784 0-75.776l-197.12-197.12c-20.992-20.992-54.784-20.992-75.776 0-20.992 20.992-20.992 54.784 0 75.776l15.36 15.36zM247.808 334.848c-9.728 2.048-18.944 6.656-26.624 14.336-20.992 20.992-20.992 54.784 0 75.776l377.856 377.856c20.992 20.992 54.784 20.992 75.776 0 7.68-7.68 12.288-16.896 14.336-26.624L247.808 334.848z\" />\n      <path d=\"M840.704 879.104c-9.728 0-19.456-3.584-27.136-11.264L155.648 210.432c-14.848-14.848-14.848-39.424 0-54.272 14.848-14.848 39.424-14.848 54.272 0L867.84 814.08c14.848 14.848 14.848 39.424 0 54.272-7.168 7.168-16.896 10.752-27.136 10.752z\" />\n    </SVGIcon>\n  );\n}\n\nIconFloat.displayName = 'Float';\n","import { Component, Fragment } from 'react';\nimport { Button, Icon } from '@alifd/next';\nimport { action, makeObservable } from '@alilc/lowcode-editor-core';\nimport { IconFix } from '../../icons/fix';\nimport { IconFloat } from '../../icons/float';\nimport { Panel } from '../../widget/panel';\n\nexport default class PanelOperationRow extends Component<{ panel: Panel }> {\n  constructor(props) {\n    super(props);\n    makeObservable(this);\n  }\n  // fix or float\n  @action\n  setDisplay() {\n    const { panel } = this.props;\n    const current = panel;\n    if (!current) {\n      return;\n    }\n\n    panel.skeleton.toggleFloatStatus(panel);\n  }\n\n  render() {\n    const { panel } = this.props;\n    const isRightArea = this.props.panel.config?.area === 'rightArea';\n    if (isRightArea) {\n      return null;\n    }\n    // \bcan be set fixed by default\n    let canSetFixed = true;\n    if (panel?.config.props?.canSetFixed === false) {\n      canSetFixed = false;\n    }\n\n    const hideTitleBar = panel?.config.props?.hideTitleBar;\n\n    const areaName = panel?.parent?.name;\n    const area = panel.skeleton[areaName];\n\n    return (\n      <Fragment>\n        {!hideTitleBar && (\n          <Fragment>\n            {canSetFixed && (\n              // eslint-disable-next-line react/jsx-no-bind\n              <Button text className=\"lc-pane-icon-fix\" onClick={this.setDisplay.bind(this)}>\n                {areaName === 'leftFloatArea' ? <IconFix /> : <IconFloat />}\n              </Button>\n            )}\n            <Button\n              text\n              className=\"lc-pane-icon-close\"\n              onClick={() => {\n                area && area.setVisible(false);\n              }}\n            >\n              <Icon type=\"close\" />\n            </Button>\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n","import { Component, ReactElement } from 'react';\nimport { Icon } from '@alifd/next';\nimport classNames from 'classnames';\nimport { Title, observer, Tip, globalContext } from '@alilc/lowcode-editor-core';\nimport { DockProps } from '../../types';\nimport { PanelDock } from '../../widget/panel-dock';\nimport { composeTitle } from '../../widget/utils';\nimport { WidgetContainer } from '../../widget/widget-container';\nimport { Panel } from '../../widget/panel';\nimport { IWidget } from '../../widget/widget';\nimport { SkeletonEvents } from '../../skeleton';\nimport DraggableLine from '../draggable-line';\nimport PanelOperationRow from './panel-operation-row';\n\nimport './index.less';\n\nexport function DockView({ title, icon, description, size, className, onClick }: DockProps) {\n  return (\n    <Title\n      title={composeTitle(title, icon, description)}\n      className={classNames('lc-dock', className, {\n        [`lc-dock-${size}`]: size,\n      })}\n      onClick={onClick}\n    />\n  );\n}\n\nfunction HelpTip({ tip }: any) {\n  if (tip && tip.url) {\n    return (\n      <div>\n        <a href={tip.url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <Icon type=\"help\" size=\"small\" className=\"lc-help-tip\" />\n        </a>\n        <Tip>{tip.content}</Tip>\n      </div>\n    );\n  }\n  return (\n    <div>\n      <Icon type=\"help\" size=\"small\" className=\"lc-help-tip\" />\n      <Tip>{tip.content}</Tip>\n    </div>\n  );\n}\n\n@observer\nexport class PanelDockView extends Component<DockProps & { dock: PanelDock }> {\n  componentDidMount() {\n    this.checkActived();\n  }\n\n  componentDidUpdate() {\n    this.checkActived();\n  }\n\n  private lastActived = false;\n\n  checkActived() {\n    const { dock } = this.props;\n    if (dock.actived !== this.lastActived) {\n      this.lastActived = dock.actived;\n      if (this.lastActived) {\n        dock.skeleton.postEvent(SkeletonEvents.PANEL_DOCK_ACTIVE, dock.name, dock);\n      } else {\n        dock.skeleton.postEvent(SkeletonEvents.PANEL_DOCK_UNACTIVE, dock.name, dock);\n      }\n    }\n  }\n\n  render() {\n    const { dock, className, onClick, ...props } = this.props;\n    return DockView({\n      ...props,\n      className: classNames(className, {\n        actived: dock.actived,\n      }),\n      onClick: () => {\n        onClick && onClick();\n        dock.togglePanel();\n      },\n    });\n  }\n}\n\nexport class DialogDockView extends Component {}\n\nexport class DraggableLineView extends Component<{ panel: Panel }> {\n  private shell: any;\n  private defaultWidth: number;\n\n  private getDefaultWidth() {\n    const configWidth = this.props.panel?.config.props?.width;\n    if (configWidth) {\n      return configWidth;\n    }\n    if (this.defaultWidth) {\n      return this.defaultWidth;\n    }\n    const containerRef = this.shell?.getParent();\n    if (containerRef) {\n      this.defaultWidth = containerRef.offsetWidth;\n      return this.defaultWidth;\n    }\n    return 300;\n  }\n\n  onDrag(value: number) {\n    const defaultWidth = this.getDefaultWidth();\n    const width = defaultWidth + value;\n\n    const containerRef = this.shell?.getParent();\n    if (containerRef) {\n      containerRef.style.width = `${width}px`;\n    }\n\n    // 抛出事件，对于有些需要 panel 插件随着 度变化进行再次渲染的，由panel插件内部监听事件实现\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    editor?.eventBus.emit('dockpane.drag', width);\n  }\n\n  onDragChange(type: 'start' | 'end') {\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    editor?.eventBus.emit('dockpane.dragchange', type);\n    // builtinSimulator 屏蔽掉 鼠标事件\n    editor?.eventBus.emit('designer.builtinSimulator.disabledEvents', type === 'start');\n  }\n\n  render() {\n    // left fixed 下不允许改变宽度\n    // 默认 关闭，通过配置开启\n    const enableDrag = this.props.panel.config.props?.enableDrag;\n    const isRightArea = this.props.panel.config?.area === 'rightArea';\n    if (isRightArea || !enableDrag || this.props.panel?.parent.name === 'leftFixedArea') {\n      return null;\n    }\n    return (\n      <DraggableLine\n        ref={(ref) => {\n          this.shell = ref;\n        }}\n        position=\"right\"\n        className=\"lc-engine-slate-draggable-line-right\"\n        onDrag={(e) => this.onDrag(e)}\n        onDragStart={() => this.onDragChange('start')}\n        onDragEnd={() => this.onDragChange('end')}\n        maxIncrement={500}\n        maxDecrement={0}\n        // TODO: 优化\n        // maxIncrement={dock.getMaxWidth() - this.cachedSize.width}\n        // maxDecrement={this.cachedSize.width - dock.getWidth()}\n      />\n    );\n  }\n}\n\n@observer\nexport class TitledPanelView extends Component<{ panel: Panel; area?: string }> {\n  componentDidMount() {\n    this.checkVisible();\n  }\n\n  componentDidUpdate() {\n    this.checkVisible();\n  }\n\n  private lastVisible = false;\n\n  checkVisible() {\n    const { panel } = this.props;\n    const currentVisible = panel.inited && panel.visible;\n    if (currentVisible !== this.lastVisible) {\n      this.lastVisible = currentVisible;\n      if (this.lastVisible) {\n        panel.skeleton.postEvent(SkeletonEvents.PANEL_SHOW, panel.name, panel);\n      } else {\n        panel.skeleton.postEvent(SkeletonEvents.PANEL_HIDE, panel.name, panel);\n      }\n    }\n  }\n\n  render() {\n    const { panel, area } = this.props;\n    if (!panel.inited) {\n      return null;\n    }\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    const panelName = area ? `${area}-${panel.name}` : panel.name;\n    editor?.eventBus.emit('skeleton.panel.toggle', {\n      name: panelName || '',\n      status: panel.visible ? 'show' : 'hide',\n    });\n    return (\n      <div\n        className={classNames('lc-titled-panel', {\n          hidden: !panel.visible,\n        })}\n        id={panelName}\n        data-keep-visible-while-dragging={panel.config.props?.keepVisibleWhileDragging}\n      >\n        <PanelOperationRow panel={panel} />\n        <PanelTitle panel={panel} />\n        <div className=\"lc-panel-body\">{panel.body}</div>\n        <DraggableLineView panel={panel} />\n      </div>\n    );\n  }\n}\n\n@observer\nexport class PanelView extends Component<{\n  panel: Panel;\n  area?: string;\n  hideOperationRow?: boolean;\n  hideDragLine?: boolean;\n}> {\n  componentDidMount() {\n    this.checkVisible();\n  }\n\n  componentDidUpdate() {\n    this.checkVisible();\n  }\n\n  private lastVisible = false;\n\n  checkVisible() {\n    const { panel } = this.props;\n    const currentVisible = panel.inited && panel.visible;\n    if (currentVisible !== this.lastVisible) {\n      this.lastVisible = currentVisible;\n      if (this.lastVisible) {\n        panel.skeleton.postEvent(SkeletonEvents.PANEL_SHOW, panel.name, panel);\n        // FIXME! remove this line\n        panel.skeleton.postEvent('leftPanel.show' as any, panel.name, panel);\n      } else {\n        panel.skeleton.postEvent(SkeletonEvents.PANEL_HIDE, panel.name, panel);\n        // FIXME! remove this line\n        panel.skeleton.postEvent('leftPanel.hide' as any, panel.name, panel);\n      }\n    }\n  }\n\n  render() {\n    const { panel, area, hideOperationRow, hideDragLine } = this.props;\n    if (!panel.inited) {\n      return null;\n    }\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    const panelName = area ? `${area}-${panel.name}` : panel.name;\n    editor?.eventBus.emit('skeleton.panel.toggle', {\n      name: panelName || '',\n      status: panel.visible ? 'show' : 'hide',\n    });\n    return (\n      <div\n        className={classNames('lc-panel', {\n          hidden: !panel.visible,\n        })}\n        id={panelName}\n        data-keep-visible-while-dragging={panel.config.props?.keepVisibleWhileDragging}\n      >\n        {!hideOperationRow && <PanelOperationRow panel={panel} />}\n        {panel.body}\n        {!hideDragLine && <DraggableLineView panel={panel} />}\n      </div>\n    );\n  }\n}\n\n@observer\nexport class TabsPanelView extends Component<{ container: WidgetContainer<Panel> }> {\n  render() {\n    const { container } = this.props;\n    const titles: ReactElement[] = [];\n    const contents: ReactElement[] = [];\n    container.items.forEach((item: any) => {\n      titles.push(<PanelTitle key={item.id} panel={item} className=\"lc-tab-title\" />);\n      contents.push(<PanelView key={item.id} panel={item} hideOperationRow hideDragLine />);\n    });\n\n    return (\n      <div className=\"lc-tabs\">\n        <div\n          className=\"lc-tabs-title\"\n          onClick={(e) => {\n            const shell = e.currentTarget;\n            const t = e.target as Element;\n            let elt = shell.firstElementChild;\n            while (elt) {\n              if (elt.contains(t)) {\n                break;\n              }\n              elt = elt.nextElementSibling;\n            }\n            if (elt) {\n              container.active((elt as any).dataset.name);\n            }\n          }}\n        >\n          {titles}\n        </div>\n        <div className=\"lc-tabs-content\">{contents}</div>\n      </div>\n    );\n  }\n}\n\n@observer\nclass PanelTitle extends Component<{ panel: Panel; className?: string }> {\n  render() {\n    const { panel, className } = this.props;\n    return (\n      <div\n        className={classNames('lc-panel-title', className, {\n          actived: panel.actived,\n        })}\n        data-name={panel.name}\n      >\n        <Title title={panel.title || panel.name} />\n        {panel.help ? <HelpTip tip={panel.help} /> : null}\n      </div>\n    );\n  }\n}\n\n@observer\nexport class WidgetView extends Component<{ widget: IWidget }> {\n  componentDidMount() {\n    this.checkVisible();\n    this.checkDisabled();\n  }\n\n  componentDidUpdate() {\n    this.checkVisible();\n    this.checkDisabled();\n  }\n\n  private lastVisible = false;\n  private lastDisabled = false;\n\n  checkVisible() {\n    const { widget } = this.props;\n    const currentVisible = widget.visible;\n    if (currentVisible !== this.lastVisible) {\n      this.lastVisible = currentVisible;\n      if (this.lastVisible) {\n        widget.skeleton.postEvent(SkeletonEvents.WIDGET_SHOW, widget.name, widget);\n      } else {\n        widget.skeleton.postEvent(SkeletonEvents.WIDGET_SHOW, widget.name, widget);\n      }\n    }\n  }\n\n  checkDisabled() {\n    const { widget } = this.props;\n    const currentDisabled = widget.disabled;\n    if (currentDisabled !== this.lastDisabled) {\n      this.lastDisabled = currentDisabled;\n      if (this.lastDisabled) {\n        widget.skeleton.postEvent(SkeletonEvents.WIDGET_DISABLE, widget.name, widget);\n      } else {\n        widget.skeleton.postEvent(SkeletonEvents.WIDGET_ENABLE, widget.name, widget);\n      }\n    }\n  }\n\n  render() {\n    const { widget } = this.props;\n    if (!widget.visible) {\n      return null;\n    }\n    if (widget.disabled) {\n      return <div className=\"lc-widget-disabled\">{widget.body}</div>;\n    }\n    return widget.body;\n  }\n}\n","import { obx, computed, makeObservable } from '@alilc/lowcode-editor-core';\nimport { uniqueId } from '@alilc/lowcode-utils';\nimport { createElement, ReactNode, ReactInstance } from 'react';\nimport { Skeleton } from '../skeleton';\nimport { PanelDockConfig } from '../types';\nimport { Panel } from './panel';\nimport { PanelDockView, WidgetView } from '../components/widget-views';\nimport { IWidget } from './widget';\nimport { composeTitle } from './utils';\nimport { findDOMNode } from 'react-dom';\n\nexport class PanelDock implements IWidget {\n  readonly isWidget = true;\n\n  readonly isPanelDock = true;\n\n  readonly id: string;\n\n  readonly name: string;\n\n  readonly align?: string;\n\n  private inited = false;\n\n  private _body: ReactNode;\n\n  get body() {\n    if (this.inited) {\n      return this._body;\n    }\n    this.inited = true;\n    const { props } = this.config;\n\n    this._body = createElement(PanelDockView, {\n      ...props,\n      dock: this,\n    });\n\n    return this._body;\n  }\n\n  private _shell: ReactInstance | null = null;\n\n  get content(): ReactNode {\n    return createElement(WidgetView, {\n      widget: this,\n      ref: (ref) => {\n        this._shell = ref;\n      },\n      key: this.id,\n    });\n  }\n\n  getDOMNode() {\n    // eslint-disable-next-line react/no-find-dom-node\n    return this._shell ? findDOMNode(this._shell) : null;\n  }\n\n  @obx.ref private _visible = true;\n\n  get visible() {\n    return this._visible;\n  }\n\n  @computed get actived(): boolean {\n    return this.panel?.visible || false;\n  }\n\n  readonly panelName: string;\n\n  private _panel?: Panel;\n\n  @obx.ref private _disabled = false;\n\n  @computed get panel() {\n    return this._panel || this.skeleton.getPanel(this.panelName);\n  }\n\n  constructor(readonly skeleton: Skeleton, readonly config: PanelDockConfig) {\n    makeObservable(this);\n    const { content, contentProps, panelProps, name, props } = config;\n    this.name = name;\n    this.id = uniqueId(`dock:${name}$`);\n    this.panelName = config.panelName || name;\n    this.align = props?.align;\n    if (content) {\n      const _panelProps: any = { ...panelProps };\n      if (_panelProps.title == null && props) {\n        _panelProps.title = composeTitle(props.title, undefined, props.description, true, true);\n      }\n      this._panel = this.skeleton.add({\n        type: 'Panel',\n        name: this.panelName,\n        props: _panelProps,\n        contentProps,\n        content,\n        area: panelProps?.area,\n      }) as Panel;\n    }\n    if (props?.onInit) {\n      props.onInit.call(this, this);\n    }\n  }\n\n  setVisible(flag: boolean) {\n    if (flag === this._visible) {\n      return;\n    }\n    if (flag) {\n      this._visible = true;\n    } else if (this.inited) {\n      this._visible = false;\n    }\n  }\n\n  hide() {\n    this.setVisible(false);\n  }\n\n  show() {\n    this.setVisible(true);\n  }\n\n  toggle() {\n    this.setVisible(!this._visible);\n  }\n\n  private setDisabled(flag: boolean) {\n    if (this._disabled === flag) return;\n    this._disabled = flag;\n  }\n\n  disable() {\n    this.setDisabled(true);\n  }\n\n  enable() {\n    this.setDisabled(false);\n  }\n\n  get disabled(): boolean {\n    return this._disabled;\n  }\n\n  togglePanel() {\n    this.panel?.toggle();\n  }\n\n  getName() {\n    return this.name;\n  }\n\n  getContent() {\n    return this.content;\n  }\n\n  hidePanel() {\n    this.panel?.setActive(false);\n  }\n\n  showPanel() {\n    this.panel?.setActive(true);\n  }\n\n  /**\n   * @deprecated\n   */\n  onActiveChange(func: () => any) {\n    return this.panel?.onActiveChange(func);\n  }\n}\n\n\nexport function isPanelDock(obj: any): obj is PanelDock {\n  return obj && obj.isPanelDock;\n}\n","import { createElement, ReactNode } from 'react';\nimport { obx, computed, makeObservable, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport { uniqueId, createContent } from '@alilc/lowcode-utils';\nimport { IPublicTypeTitleContent } from '@alilc/lowcode-types';\nimport { WidgetContainer } from './widget-container';\nimport { getEvent } from '@alilc/lowcode-shell';\nimport { PanelConfig, HelpTipConfig } from '../types';\nimport { TitledPanelView, TabsPanelView, PanelView } from '../components/widget-views';\nimport { Skeleton } from '../skeleton';\nimport { composeTitle } from './utils';\nimport { IWidget } from './widget';\nimport { isPanelDock, PanelDock } from './panel-dock';\n\nexport class Panel implements IWidget {\n  readonly isWidget = true;\n\n  readonly name: string;\n\n  readonly id: string;\n\n  @obx.ref inited = false;\n\n  @obx.ref private _actived = false;\n\n  private emitter: IEventBus = createModuleEventBus('Panel');\n\n  @computed get actived(): boolean {\n    return this._actived;\n  }\n\n  @computed get visible(): boolean {\n    if (!this.parent || this.parent.visible) {\n      const { props } = this.config;\n      if (props?.condition) {\n        return props.condition(this);\n      }\n      return this._actived;\n    }\n    return false;\n  }\n\n  readonly isPanel = true;\n\n  get body() {\n    if (this.container) {\n      return createElement(TabsPanelView, {\n        container: this.container,\n      });\n    }\n\n    const { content, contentProps } = this.config;\n    return createContent(content, {\n      ...contentProps,\n      editor: getEvent(this.skeleton.editor),\n      config: this.config,\n      panel: this,\n      pane: this,\n    });\n  }\n\n  get content(): ReactNode {\n    const area = this.config?.area || this.parent?.name;\n    if (this.plain) {\n      return createElement(PanelView, {\n        panel: this,\n        key: this.id,\n        area,\n      });\n    }\n    return createElement(TitledPanelView, { panel: this, key: this.id, area });\n  }\n\n  readonly title: IPublicTypeTitleContent;\n\n  readonly help?: HelpTipConfig;\n\n  private plain = false;\n\n  private container?: WidgetContainer<Panel, PanelConfig>;\n\n  @obx.ref public parent?: WidgetContainer;\n\n  constructor(readonly skeleton: Skeleton, readonly config: PanelConfig) {\n    makeObservable(this);\n    const { name, content, props = {} } = config;\n    const { hideTitleBar, title, icon, description, help } = props;\n    this.name = name;\n    this.id = uniqueId(`pane:${name}$`);\n    this.title = composeTitle(title || name, icon, description);\n    this.plain = hideTitleBar || !title;\n    this.help = help;\n    if (Array.isArray(content)) {\n      if (content.length === 1) {\n        // todo: not show tabs\n      }\n      this.container = this.skeleton.createContainer(\n        name,\n        (item) => {\n          if (isPanel(item)) {\n            return item;\n          }\n          return this.skeleton.createPanel(item);\n        },\n        true,\n        () => this.visible,\n        true,\n      );\n      content.forEach((item) => this.add(item));\n    }\n    if (props.onInit) {\n      props.onInit.call(this, this);\n    }\n\n    if (content.onInit) {\n      content.onInit.call(this, this);\n    }\n    // todo: process shortcut\n  }\n\n  setParent(parent: WidgetContainer) {\n    if (parent === this.parent) {\n      return;\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n    this.parent = parent;\n  }\n\n  add(item: Panel | PanelConfig) {\n    return this.container?.add(item);\n  }\n\n  getPane(name: string): Panel | null {\n    return this.container?.get(name) || null;\n  }\n\n  remove(item: Panel | string) {\n    return this.container?.remove(item);\n  }\n\n  active(item?: Panel | string | null) {\n    if (item) {\n      this.container?.active(item);\n    } else {\n      this.setActive(true);\n    }\n  }\n\n  getName() {\n    return this.name;\n  }\n\n  getContent() {\n    return this.content;\n  }\n\n  /**\n   * check is current panel is in float area or not\n   *\n   * @returns {boolean}\n   * @memberof Panel\n   */\n  isChildOfFloatArea(): boolean {\n    return this.parent?.name === 'leftFloatArea';\n  }\n\n  /**\n   * check is current panel is in fixed area or not\n   *\n   * @returns {boolean}\n   * @memberof Panel\n   */\n  isChildOfFixedArea(): boolean {\n    return this.parent?.name === 'leftFixedArea';\n  }\n\n  setActive(flag: boolean) {\n    if (flag === this._actived) {\n      // TODO: 如果移动到另外一个 container，会有问题\n      return;\n    }\n    if (flag) {\n      // 对于 Area 的直接 Child，要专门处理 Float & Fixed 分组切换, 其他情况不需要\n      if (this.isChildOfFloatArea()) {\n        this.skeleton.leftFixedArea.container.unactiveAll();\n      } else if (this.isChildOfFixedArea()) {\n        this.skeleton.leftFloatArea.container.unactiveAll();\n      }\n      this._actived = true;\n      this.parent?.active(this);\n      if (!this.inited) {\n        this.inited = true;\n      }\n      this.emitter.emit('activechange', true);\n    } else if (this.inited) {\n      if (this.parent?.name && this.name.startsWith(this.parent.name)) {\n        this.inited = false;\n      }\n      this._actived = false;\n      this.parent?.unactive(this);\n      this.emitter.emit('activechange', false);\n    }\n  }\n\n  toggle() {\n    this.setActive(!this._actived);\n  }\n\n  hide() {\n    this.setActive(false);\n  }\n\n  show() {\n    this.setActive(true);\n  }\n\n  getAssocDocks(): PanelDock[] {\n    return this.skeleton.widgets.filter(item => {\n      return isPanelDock(item) && item.panelName === this.name;\n    }) as any;\n  }\n\n  /**\n   * @deprecated\n   */\n  getSupportedPositions() {\n    return ['default'];\n  }\n\n  /**\n   * @deprecated\n   */\n  getCurrentPosition() {\n    return 'default';\n  }\n\n  /**\n   * @deprecated\n   */\n  setPosition(/* position: string */) {\n    // noop\n  }\n\n  /**\n   * @deprecated\n   */\n  onActiveChange(fn: (flag: boolean) => void): () => void {\n    this.emitter.on('activechange', fn);\n    return () => {\n      this.emitter.removeListener('activechange', fn);\n    };\n  }\n}\n\nexport function isPanel(obj: any): obj is Panel {\n  return obj && obj.isPanel;\n}\n","import { ReactNode, createElement } from 'react';\nimport { makeObservable, obx } from '@alilc/lowcode-editor-core';\nimport { createContent, uniqueId } from '@alilc/lowcode-utils';\nimport { getEvent } from '@alilc/lowcode-shell';\nimport { WidgetConfig } from '../types';\nimport { Skeleton } from '../skeleton';\nimport { WidgetView } from '../components/widget-views';\nimport { IPublicTypeTitleContent, IPublicTypeWidgetBaseConfig } from '@alilc/lowcode-types';\n\nexport interface IWidget {\n  readonly name: string;\n  readonly content: ReactNode;\n  readonly align?: string;\n  readonly isWidget: true;\n  readonly visible: boolean;\n  readonly disabled?: boolean;\n  readonly body: ReactNode;\n  readonly skeleton: Skeleton;\n  readonly config: IPublicTypeWidgetBaseConfig;\n\n  getName(): string;\n  getContent(): any;\n  show(): void;\n  hide(): void;\n  toggle(): void;\n  enable?(): void;\n  disable?(): void;\n}\n\nexport class Widget implements IWidget {\n  readonly isWidget = true;\n\n  readonly id = uniqueId('widget');\n\n  readonly name: string;\n\n  readonly align?: string;\n\n  @obx.ref private _visible = true;\n\n  get visible(): boolean {\n    return this._visible;\n  }\n\n  @obx.ref inited = false;\n\n  @obx.ref private _disabled = false;\n\n  private _body: ReactNode;\n\n  get body() {\n    if (this.inited) {\n      return this._body;\n    }\n    this.inited = true;\n    const { content, contentProps } = this.config;\n    this._body = createContent(content, {\n      ...contentProps,\n      config: this.config,\n      editor: getEvent(this.skeleton.editor),\n    });\n    return this._body;\n  }\n\n  get content(): ReactNode {\n    return createElement(WidgetView, {\n      widget: this,\n      key: this.id,\n    });\n  }\n\n  readonly title: IPublicTypeTitleContent;\n\n  constructor(readonly skeleton: Skeleton, readonly config: WidgetConfig) {\n    makeObservable(this);\n    const { props = {}, name } = config;\n    this.name = name;\n    this.align = props.align;\n    this.title = props.title || name;\n    if (props.onInit) {\n      props.onInit.call(this, this);\n    }\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  getName() {\n    return this.name;\n  }\n\n  getContent() {\n    return this.content;\n  }\n\n  hide() {\n    this.setVisible(false);\n  }\n\n  show() {\n    this.setVisible(true);\n  }\n\n  setVisible(flag: boolean) {\n    if (flag === this._visible) {\n      return;\n    }\n    if (flag) {\n      this._visible = true;\n    } else if (this.inited) {\n      this._visible = false;\n    }\n  }\n\n  toggle() {\n    this.setVisible(!this._visible);\n  }\n\n  private setDisabled(flag: boolean) {\n    if (this._disabled === flag) return;\n    this._disabled = flag;\n  }\n\n  disable() {\n    this.setDisabled(true);\n  }\n\n  enable() {\n    this.setDisabled(false);\n  }\n\n  get disabled(): boolean {\n    return this._disabled;\n  }\n}\n\nexport function isWidget(obj: any): obj is IWidget {\n  return obj && obj.isWidget;\n}\n","import { ReactNode, createElement } from 'react';\nimport { makeObservable, obx } from '@alilc/lowcode-editor-core';\nimport { uniqueId, createContent } from '@alilc/lowcode-utils';\nimport { getEvent } from '@alilc/lowcode-shell';\nimport { DockConfig } from '../types';\nimport { Skeleton } from '../skeleton';\nimport { DockView, WidgetView } from '../components/widget-views';\nimport { IWidget } from './widget';\n\n/**\n * 带图标（主要）/标题（次要）的扩展\n */\nexport class Dock implements IWidget {\n  readonly isWidget = true;\n\n  readonly id = uniqueId('dock');\n\n  readonly name: string;\n\n  readonly align?: string;\n\n  @obx.ref private _visible = true;\n\n  get visible(): boolean {\n    return this._visible;\n  }\n\n  @obx.ref private _disabled = false;\n\n  get content(): ReactNode {\n    return createElement(WidgetView, {\n      widget: this,\n      key: this.id,\n    });\n  }\n\n  private inited = false;\n\n  private _body: ReactNode;\n\n  get body() {\n    if (this.inited) {\n      return this._body;\n    }\n\n    const { props, content, contentProps } = this.config;\n\n    if (content) {\n      this._body = createContent(content, {\n        ...contentProps,\n        config: this.config,\n        editor: getEvent(this.skeleton.editor),\n      });\n    } else {\n      this._body = createElement(DockView, props);\n    }\n    this.inited = true;\n\n    return this._body;\n  }\n\n  constructor(readonly skeleton: Skeleton, readonly config: DockConfig) {\n    makeObservable(this);\n    const { props = {}, name } = config;\n    this.name = name;\n    this.align = props.align;\n    if (props.onInit) {\n      props.onInit.call(this, this);\n    }\n  }\n\n  setVisible(flag: boolean) {\n    if (flag === this._visible) {\n      return;\n    }\n    if (flag) {\n      this._visible = true;\n    } else if (this.inited) {\n      this._visible = false;\n    }\n  }\n\n  private setDisabled(flag: boolean) {\n    if (this._disabled === flag) return;\n    this._disabled = flag;\n  }\n\n  disable() {\n    this.setDisabled(true);\n  }\n\n  enable() {\n    this.setDisabled(false);\n  }\n\n  get disabled(): boolean {\n    return this._disabled;\n  }\n\n  getContent() {\n    return this.content;\n  }\n\n  getName() {\n    return this.name;\n  }\n\n  hide() {\n    this.setVisible(false);\n  }\n\n  show() {\n    this.setVisible(true);\n  }\n\n  toggle() {\n    this.setVisible(!this._visible);\n  }\n}\n","// import { uniqueId } from '@alilc/lowcode-utils';\nimport { Widget } from './widget';\nimport { Skeleton } from '../skeleton';\nimport { WidgetConfig } from '../types';\n\nexport interface StageConfig extends WidgetConfig {\n  isRoot?: boolean;\n}\n\nexport class Stage extends Widget {\n  readonly isRoot: boolean;\n\n  private previous?: Stage;\n\n  private refer?: {\n    stage?: Stage;\n    direction?: 'right' | 'left';\n  };\n\n  constructor(skeleton: Skeleton, config: StageConfig) {\n    super(skeleton, config);\n    this.isRoot = config.isRoot || false;\n  }\n\n  setPrevious(stage: Stage) {\n    this.previous = stage;\n  }\n\n  getPrevious() {\n    return this.previous;\n  }\n\n  hasBack(): boolean {\n    return !!(this.previous && !this.isRoot);\n  }\n\n  setRefer(stage: Stage, direction: 'right' | 'left') {\n    this.refer = { stage, direction };\n  }\n\n  setReferRight(stage: Stage) {\n    this.setRefer(stage, 'right');\n  }\n\n  setReferLeft(stage: Stage) {\n    this.setRefer(stage, 'left');\n  }\n\n  getRefer() {\n    const { refer } = this;\n    this.refer = undefined;\n    return refer;\n  }\n}\n","import { Editor, action, makeObservable, obx, engineConfig } from '@alilc/lowcode-editor-core';\nimport {\n  DockConfig,\n  PanelConfig,\n  WidgetConfig,\n  PanelDockConfig,\n  DialogDockConfig,\n  isDockConfig,\n  isPanelDockConfig,\n  isPanelConfig,\n  DividerConfig,\n  isDividerConfig,\n} from './types';\nimport { isPanel, Panel } from './widget/panel';\nimport { WidgetContainer } from './widget/widget-container';\nimport { Area } from './area';\nimport { isWidget, IWidget, Widget } from './widget/widget';\nimport { PanelDock } from './widget/panel-dock';\nimport { Dock } from './widget/dock';\nimport { Stage, StageConfig } from './widget/stage';\nimport { isValidElement } from 'react';\nimport { isPlainObject, uniqueId, Logger } from '@alilc/lowcode-utils';\nimport { Divider } from '@alifd/next';\nimport {\n  EditorConfig,\n  PluginClassSet,\n  IPublicTypeWidgetBaseConfig,\n  IPublicTypeWidgetConfigArea,\n  IPublicTypeSkeletonConfig,\n} from '@alilc/lowcode-types';\n\nconst logger = new Logger({ level: 'warn', bizName: 'skeleton' });\n\nexport enum SkeletonEvents {\n  PANEL_DOCK_ACTIVE = 'skeleton.panel-dock.active',\n  PANEL_DOCK_UNACTIVE = 'skeleton.panel-dock.unactive',\n  PANEL_SHOW = 'skeleton.panel.show',\n  PANEL_HIDE = 'skeleton.panel.hide',\n  WIDGET_SHOW = 'skeleton.widget.show',\n  WIDGET_HIDE = 'skeleton.widget.hide',\n  WIDGET_DISABLE = 'skeleton.widget.disable',\n  WIDGET_ENABLE = 'skeleton.widget.enable',\n}\n\nexport class Skeleton {\n  private panels = new Map<string, Panel>();\n\n  private containers = new Map<string, WidgetContainer<any>>();\n\n  readonly leftArea: Area<DockConfig | PanelDockConfig | DialogDockConfig>;\n\n  readonly topArea: Area<DockConfig | DividerConfig | PanelDockConfig | DialogDockConfig>;\n\n  readonly subTopArea: Area<DockConfig | DividerConfig | PanelDockConfig | DialogDockConfig>;\n\n  readonly toolbar: Area<DockConfig | DividerConfig | PanelDockConfig | DialogDockConfig>;\n\n  readonly leftFixedArea: Area<PanelConfig, Panel>;\n\n  readonly leftFloatArea: Area<PanelConfig, Panel>;\n\n  readonly rightArea: Area<PanelConfig, Panel>;\n\n  @obx readonly mainArea: Area<WidgetConfig | PanelConfig, Widget | Panel>;\n\n  readonly bottomArea: Area<PanelConfig, Panel>;\n\n  readonly stages: Area<StageConfig, Stage>;\n\n  readonly widgets: IWidget[] = [];\n\n  constructor(readonly editor: Editor, readonly viewName: string = 'global') {\n    makeObservable(this);\n    this.leftArea = new Area(\n      this,\n      'leftArea',\n      (config) => {\n        if (isWidget(config)) {\n          return config;\n        }\n        return this.createWidget(config);\n      },\n      false,\n    );\n    this.topArea = new Area(\n      this,\n      'topArea',\n      (config) => {\n        if (isWidget(config)) {\n          return config;\n        }\n        return this.createWidget(config);\n      },\n      false,\n    );\n    this.subTopArea = new Area(\n      this,\n      'subTopArea',\n      (config) => {\n        if (isWidget(config)) {\n          return config;\n        }\n        return this.createWidget(config);\n      },\n      false,\n    );\n    this.toolbar = new Area(\n      this,\n      'toolbar',\n      (config) => {\n        if (isWidget(config)) {\n          return config;\n        }\n        return this.createWidget(config);\n      },\n      false,\n    );\n    this.leftFixedArea = new Area(\n      this,\n      'leftFixedArea',\n      (config) => {\n        if (isPanel(config)) {\n          return config;\n        }\n        return this.createPanel(config);\n      },\n      true,\n    );\n    this.leftFloatArea = new Area(\n      this,\n      'leftFloatArea',\n      (config) => {\n        if (isPanel(config)) {\n          return config;\n        }\n        return this.createPanel(config);\n      },\n      true,\n    );\n    this.rightArea = new Area(\n      this,\n      'rightArea',\n      (config) => {\n        if (isPanel(config)) {\n          return config;\n        }\n        return this.createPanel(config);\n      },\n      false,\n      true,\n    );\n    this.mainArea = new Area(\n      this,\n      'mainArea',\n      (config) => {\n        if (isWidget(config)) {\n          return config as Widget;\n        }\n        return this.createWidget(config) as Widget;\n      },\n      true,\n      true,\n    );\n    this.bottomArea = new Area(\n      this,\n      'bottomArea',\n      (config) => {\n        if (isPanel(config)) {\n          return config;\n        }\n        return this.createPanel(config);\n      },\n      true,\n    );\n    this.stages = new Area(this, 'stages', (config) => {\n      if (isWidget(config)) {\n        return config;\n      }\n      return new Stage(this, config);\n    });\n\n    this.setupPlugins();\n    this.setupEvents();\n  }\n\n  /**\n   * setup events\n   *\n   * @memberof Skeleton\n   */\n  setupEvents() {\n    // adjust pinned status when panel shown\n    this.editor.eventBus.on(SkeletonEvents.PANEL_SHOW, (panelName, panel) => {\n      const panelNameKey = `${panelName}-pinned-status-isFloat`;\n      const isInFloatAreaPreferenceExists = engineConfig.getPreference()?.contains(panelNameKey, 'skeleton');\n      if (isInFloatAreaPreferenceExists) {\n        const isInFloatAreaFromPreference = engineConfig.getPreference()?.get(panelNameKey, 'skeleton');\n        const isCurrentInFloatArea = panel?.isChildOfFloatArea();\n        if (isInFloatAreaFromPreference !== isCurrentInFloatArea) {\n          this.toggleFloatStatus(panel);\n        }\n      }\n    });\n  }\n\n  /**\n   * set isFloat status for panel\n   *\n   * @param {*} panel\n   * @memberof Skeleton\n   */\n  @action\n  toggleFloatStatus(panel: Panel) {\n    const isFloat = panel?.parent?.name === 'leftFloatArea';\n    if (isFloat) {\n      this.leftFloatArea.remove(panel);\n      this.leftFixedArea.add(panel);\n      this.leftFixedArea.container.active(panel);\n    } else {\n      this.leftFixedArea.remove(panel);\n      this.leftFloatArea.add(panel);\n      this.leftFloatArea.container.active(panel);\n    }\n    engineConfig.getPreference().set(`${panel.name}-pinned-status-isFloat`, !isFloat, 'skeleton');\n  }\n\n  buildFromConfig(config?: EditorConfig, components: PluginClassSet = {}) {\n    if (config) {\n      this.editor.init(config, components);\n    }\n    this.setupPlugins();\n  }\n\n  private setupPlugins() {\n    const { config, components = {} } = this.editor;\n    if (!config) {\n      return;\n    }\n\n    const { plugins } = config;\n    if (!plugins) {\n      return;\n    }\n    Object.keys(plugins).forEach((area) => {\n      plugins[area].forEach((item) => {\n        const { pluginKey, type, props = {}, pluginProps } = item;\n        const config: Partial<IPublicTypeWidgetBaseConfig> = {\n          area: area as IPublicTypeWidgetConfigArea,\n          type: 'Widget',\n          name: pluginKey,\n          contentProps: pluginProps,\n        };\n        const { dialogProps, balloonProps, panelProps, linkProps, ...restProps } = props;\n        config.props = restProps;\n        if (dialogProps) {\n          config.dialogProps = dialogProps;\n        }\n        if (balloonProps) {\n          config.balloonProps = balloonProps;\n        }\n        if (panelProps) {\n          config.panelProps = panelProps;\n        }\n        if (linkProps) {\n          config.linkProps = linkProps;\n        }\n        if (type === 'TabPanel') {\n          config.type = 'Panel';\n        } else if (/Icon$/.test(type)) {\n          config.type = type.replace('Icon', 'Dock');\n        }\n        if (pluginKey in components) {\n          config.content = components[pluginKey];\n        }\n        this.add(config as IPublicTypeWidgetBaseConfig);\n      });\n    });\n  }\n\n  postEvent(event: SkeletonEvents, ...args: any[]) {\n    this.editor.eventBus.emit(event, ...args);\n  }\n\n  createWidget(config: IPublicTypeWidgetBaseConfig | IWidget) {\n    if (isWidget(config)) {\n      return config;\n    }\n\n    config = this.parseConfig(config);\n    let widget: IWidget;\n    if (isDockConfig(config)) {\n      if (isPanelDockConfig(config)) {\n        widget = new PanelDock(this, config);\n      } else if (false) {\n        // DialogDock\n        // others...\n      } else {\n        widget = new Dock(this, config);\n      }\n    } else if (isDividerConfig(config)) {\n      widget = new Widget(this, {\n        ...config,\n        type: 'Widget',\n        content: Divider,\n      });\n    } else if (isPanelConfig(config)) {\n      widget = this.createPanel(config);\n    } else {\n      widget = new Widget(this, config as WidgetConfig);\n    }\n    this.widgets.push(widget);\n    return widget;\n  }\n\n  getWidget(name: string): IWidget | undefined {\n    return this.widgets.find(widget => widget.name === name);\n  }\n\n  createPanel(config: PanelConfig) {\n    const parsedConfig = this.parseConfig(config);\n    const panel = new Panel(this, parsedConfig as PanelConfig);\n    this.panels.set(panel.name, panel);\n    logger.debug(`Panel created with name: ${panel.name} \\nconfig:`, config, '\\n current panels: ', this.panels);\n    return panel;\n  }\n\n  getPanel(name: string): Panel | undefined {\n    return this.panels.get(name);\n  }\n\n  getStage(name: string) {\n    return this.stages.container.get(name);\n  }\n\n  createStage(config: any) {\n    const stage = this.add({\n      name: uniqueId('stage'),\n      area: 'stages',\n      ...config,\n    });\n    return stage?.getName?.();\n  }\n\n  createContainer(\n    name: string,\n    handle: (item: any) => any,\n    exclusive = false,\n    checkVisible: () => boolean = () => true,\n    defaultSetCurrent = false,\n  ) {\n    const container = new WidgetContainer(name, handle, exclusive, checkVisible, defaultSetCurrent);\n    this.containers.set(name, container);\n    return container;\n  }\n\n  private parseConfig(config: IPublicTypeWidgetBaseConfig) {\n    if (config.parsed) {\n      return config;\n    }\n    const { content, ...restConfig } = config;\n    if (content) {\n      if (isPlainObject(content) && !isValidElement(content)) {\n        Object.keys(content).forEach((key) => {\n          if (/props$/i.test(key) && restConfig[key]) {\n            restConfig[key] = {\n              ...restConfig[key],\n              ...content[key],\n            };\n          } else {\n            restConfig[key] = content[key];\n          }\n        });\n      } else {\n        restConfig.content = content;\n      }\n    }\n    restConfig.pluginKey = restConfig.name;\n    restConfig.parsed = true;\n    return restConfig;\n  }\n\n  add(config: IPublicTypeSkeletonConfig, extraConfig?: Record<string, any>) {\n    const parsedConfig = {\n      ...this.parseConfig(config),\n      ...extraConfig,\n    };\n    let { area } = parsedConfig;\n    if (!area) {\n      if (parsedConfig.type === 'Panel') {\n        area = 'leftFloatArea';\n      } else if (parsedConfig.type === 'Widget') {\n        area = 'mainArea';\n      } else {\n        area = 'leftArea';\n      }\n    }\n    switch (area) {\n      case 'leftArea':\n      case 'left':\n        return this.leftArea.add(parsedConfig as PanelDockConfig);\n      case 'rightArea':\n      case 'right':\n        return this.rightArea.add(parsedConfig as PanelConfig);\n      case 'topArea':\n      case 'top':\n        return this.topArea.add(parsedConfig as PanelDockConfig);\n      case 'subTopArea':\n        return this.subTopArea.add(parsedConfig as PanelDockConfig);\n      case 'toolbar':\n        return this.toolbar.add(parsedConfig as PanelDockConfig);\n      case 'mainArea':\n      case 'main':\n      case 'center':\n      case 'centerArea':\n        return this.mainArea.add(parsedConfig as PanelConfig);\n      case 'bottomArea':\n      case 'bottom':\n        return this.bottomArea.add(parsedConfig as PanelConfig);\n      case 'leftFixedArea':\n        return this.leftFixedArea.add(parsedConfig as PanelConfig);\n      case 'leftFloatArea':\n        return this.leftFloatArea.add(parsedConfig as PanelConfig);\n      case 'stages':\n        return this.stages.add(parsedConfig as StageConfig);\n      default:\n        // do nothing\n    }\n  }\n}\n","import { Node, Designer, Selection, SettingTopEntry } from '@alilc/lowcode-designer';\nimport { Editor, obx, computed, makeObservable, action, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\n\nfunction generateSessionId(nodes: Node[]) {\n  return nodes\n    .map((node) => node.id)\n    .sort()\n    .join(',');\n}\n\nexport class SettingsMain {\n  private emitter: IEventBus = createModuleEventBus('SettingsMain');\n\n  private _sessionId = '';\n\n  @obx.ref private _settings?: SettingTopEntry;\n\n  @computed get length(): number | undefined {\n    return this._settings?.nodes.length;\n  }\n\n  @computed get componentMeta() {\n    return this._settings?.componentMeta;\n  }\n\n  @computed get settings() {\n    return this._settings;\n  }\n\n  private disposeListener: () => void;\n\n  private designer?: Designer;\n\n  constructor(readonly editor: Editor) {\n    makeObservable(this);\n    this.init();\n  }\n\n  private async init() {\n    const setupSelection = (selection?: Selection) => {\n      if (selection) {\n        this.setup(selection.getNodes());\n      } else {\n        this.setup([]);\n      }\n    };\n    this.editor.eventBus.on('designer.selection.change', setupSelection);\n    this.disposeListener = () => {\n      this.editor.removeListener('designer.selection.change', setupSelection);\n    };\n    const designer = await this.editor.onceGot('designer');\n    this.designer = designer;\n    setupSelection(designer.currentSelection);\n  }\n\n  @action\n  private setup(nodes: Node[]) {\n    // check nodes change\n    const sessionId = generateSessionId(nodes);\n    if (sessionId === this._sessionId) {\n      return;\n    }\n    this._sessionId = sessionId;\n    if (nodes.length < 1) {\n      this._settings = undefined;\n      return;\n    }\n\n    if (!this.designer) {\n      this.designer = nodes[0].document.designer;\n    }\n    // 当节点只有一个时，复用 node 上挂载的 settingEntry，不会产生平行的两个实例，这样在整个系统中对\n    // 某个节点操作的 SettingTopEntry 只有一个实例，后续的 getProp() 也会拿到相同的 SettingField 实例\n    if (nodes.length === 1) {\n      this._settings = nodes[0].settingEntry;\n    } else {\n      this._settings = this.designer.createSettingEntry(nodes);\n    }\n  }\n\n  purge() {\n    this.disposeListener();\n    this.emitter.removeAllListeners();\n  }\n}\n","import { createContext, ReactNode, Component, PureComponent } from 'react';\nimport { Drawer, ConfigProvider } from '@alifd/next';\nimport { uniqueId } from '@alilc/lowcode-utils';\nimport { IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport './style.less';\n\nexport const PopupContext = createContext<PopupPipe>({} as any);\n\nexport class PopupPipe {\n  private emitter: IEventBus = createModuleEventBus('PopupPipe');\n\n  private currentId?: string;\n\n  create(props?: object): {\n    send: (content: ReactNode, title: ReactNode) => void;\n    show: (target: Element) => void;\n  } {\n    let sendContent: ReactNode = null;\n    let sendTitle: ReactNode = null;\n    const id = uniqueId('popup');\n    return {\n      send: (content: ReactNode, title: ReactNode) => {\n        sendContent = content;\n        sendTitle = title;\n        if (this.currentId === id) {\n          this.popup({\n            ...props,\n            content,\n            title,\n          });\n        }\n      },\n      show: (target: Element, actionKey?: string) => {\n        this.currentId = id;\n        this.popup(\n          {\n            ...props,\n            actionKey,\n            content: sendContent,\n            title: sendTitle,\n          },\n          target,\n        );\n      },\n    };\n  }\n\n  private popup(props: object, target?: Element) {\n    Promise.resolve().then(() => {\n      this.emitter.emit('popupchange', props, target);\n    });\n  }\n\n  onPopupChange(fn: (props: object, target?: Element) => void): () => void {\n    this.emitter.on('popupchange', fn);\n    return () => {\n      this.emitter.removeListener('popupchange', fn);\n    };\n  }\n\n  purge() {\n    this.emitter.removeAllListeners();\n  }\n}\n\nexport default class PopupService extends Component<{\n  popupPipe?: PopupPipe;\n  actionKey?: string;\n  safeId?: string;\n  popupContainer?: string;\n}> {\n  private popupPipe = this.props.popupPipe || new PopupPipe();\n\n  componentWillUnmount() {\n    this.popupPipe.purge();\n  }\n\n  render() {\n    const { children, actionKey, safeId, popupContainer } = this.props;\n    return (\n      <PopupContext.Provider value={this.popupPipe}>\n        {children}\n        <PopupContent key={`pop${actionKey}`} safeId={safeId} popupContainer={popupContainer} />\n      </PopupContext.Provider>\n    );\n  }\n}\n\nexport class PopupContent extends PureComponent<{ safeId?: string; popupContainer?: string }> {\n  static contextType = PopupContext;\n\n  popupContainerId = uniqueId('popupContainer');\n\n  state: any = {\n    visible: false,\n    offsetX: -300,\n  };\n\n  private dispose = (this.context as PopupPipe).onPopupChange((props, target) => {\n    const state: any = {\n      ...props,\n      visible: true,\n    };\n    if (target) {\n      const rect = target.getBoundingClientRect();\n      state.pos = {\n        top: rect.top,\n        height: rect.height,\n      };\n      // todo: compute the align method\n    }\n    this.setState(state);\n  });\n\n  componentDidMount() {\n    const clientWidth = document.documentElement.clientWidth || document.body.clientWidth;\n    if (clientWidth >= 1860) {\n      this.setState({\n        offsetX: -400,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.dispose();\n  }\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  render() {\n    const { content, visible, title, actionKey, pos, offsetX } = this.state;\n    if (!visible) {\n      return null;\n    }\n\n    let avoidLaterHidden = true;\n    setTimeout(() => {\n      avoidLaterHidden = false;\n    }, 10);\n\n    const id = uniqueId('ball');\n\n    return (\n      <Drawer\n        width={360}\n        visible={visible}\n        offset={[offsetX, 0]}\n        hasMask={false}\n        onVisibleChange={(_visible, type) => {\n          if (avoidLaterHidden) {\n            return;\n          }\n          if (!_visible && type === 'closeClick') {\n            this.setState({ visible: false });\n          }\n        }}\n        trigger={<div className=\"lc-popup-placeholder\" style={pos} />}\n        triggerType=\"click\"\n        canCloseByOutSideClick\n        animation={false}\n        onClose={this.onClose}\n        id={this.props.safeId}\n        safeNode={id}\n        closeable\n        container={this.props.popupContainer}\n      >\n        <div className=\"lc-ballon-title\">{title}</div>\n        <div className=\"lc-ballon-content\">\n          <PopupService actionKey={actionKey} safeId={id} popupContainer={this.popupContainerId}>\n            <ConfigProvider popupContainer={this.popupContainerId}>\n              {content}\n            </ConfigProvider>\n          </PopupService>\n        </div>\n        <div id={this.popupContainerId} />\n        <div id=\"engine-variable-setter-dialog\" />\n        <div id=\"engine-popup-container\" />\n      </Drawer>\n    );\n  }\n}\n","import * as React from 'react';\n\nexport interface InlineTipProps {\n  position: string;\n  theme?: 'green' | 'black';\n  children: React.ReactNode;\n}\n\nexport default class InlineTip extends React.Component<InlineTipProps> {\n  static displayName = 'InlineTip';\n\n  static defaultProps = {\n    position: 'auto',\n    theme: 'black',\n  };\n\n  render(): React.ReactNode {\n    const { position, theme, children } = this.props;\n    return (\n      <div style={{ display: 'none' }} data-role=\"tip\" data-position={position} data-theme={theme}>\n        {children}\n      </div>\n    );\n  }\n}\n","import { createIntl } from '@alilc/lowcode-editor-core';\nimport enUS from './en-US.json';\nimport zhCN from './zh-CN.json';\n\nconst { intl, intlNode, getLocale, setLocale } = createIntl({\n  'en-US': enUS,\n  'zh-CN': zhCN,\n});\n\nexport { intl, intlNode, getLocale, setLocale };\n","/* eslint-disable react/no-unused-prop-types */\nimport { Component, MouseEvent } from 'react';\nimport { isObject } from 'lodash';\nimport classNames from 'classnames';\nimport { Icon } from '@alifd/next';\nimport { Title } from '@alilc/lowcode-editor-core';\nimport { IPublicModelEditor, IPublicTypeTitleContent } from '@alilc/lowcode-types';\nimport { PopupPipe, PopupContext } from '../popup';\nimport './index.less';\nimport InlineTip from './inlinetip';\nimport { intl } from '../../locale';\n\nexport interface FieldProps {\n  className?: string;\n  meta?: { package: string; componentName: string } | string;\n  title?: IPublicTypeTitleContent | null;\n  editor?: IPublicModelEditor;\n  defaultDisplay?: 'accordion' | 'inline' | 'block' | 'plain' | 'popup' | 'entry';\n  collapsed?: boolean;\n  valueState?: number;\n  name?: string;\n  tip?: any;\n  onExpandChange?: (expandState: boolean) => void;\n  onClear?: () => void;\n}\n\nexport class Field extends Component<FieldProps> {\n  state = {\n    collapsed: this.props.collapsed,\n    display: this.props.defaultDisplay || 'inline',\n    hasError: false,\n  };\n\n  constructor(props: any) {\n    super(props);\n    this.handleClear = this.handleClear.bind(this);\n    this.clickHandler = this.clickHandler.bind(this);\n  }\n\n  private toggleExpand = () => {\n    const { onExpandChange } = this.props;\n    // eslint-disable-next-line react/no-access-state-in-setstate\n    const collapsed = !this.state.collapsed;\n    this.setState({\n      collapsed,\n    });\n    onExpandChange && onExpandChange(!collapsed);\n  };\n\n  private body: HTMLDivElement | null = null;\n\n  private dispose?: () => void;\n\n  private deployBlockTesting() {\n    if (this.dispose) {\n      this.dispose();\n    }\n    const { body } = this;\n    if (!body) {\n      return;\n    }\n    const check = () => {\n      const setter = body.firstElementChild;\n      if (setter && setter.classList.contains('lc-block-setter')) {\n        this.setState({\n          display: 'block',\n        });\n      } else {\n        this.setState({\n          display: 'inline',\n        });\n      }\n    };\n    const observer = new MutationObserver(check);\n    check();\n    observer.observe(body, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['class'],\n    });\n    this.dispose = () => observer.disconnect();\n  }\n\n  private handleClear(e: React.MouseEvent) {\n    e.stopPropagation();\n    this.props.onClear && this.props.onClear();\n  }\n\n  componentDidMount() {\n    const { defaultDisplay } = this.props;\n    if (!defaultDisplay || defaultDisplay === 'inline') {\n      this.deployBlockTesting();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.dispose) {\n      this.dispose();\n    }\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  getTipContent(propName: string, tip?: any): any {\n    let tipContent = (\n      <div>\n        <div>{intl('Attribute: ')}{propName}</div>\n      </div>\n    );\n\n    if (isObject(tip)) {\n      tipContent = (\n        <div>\n          <div>{intl('Attribute: ')}{propName}</div>\n          <div>{intl('Description: ')}{(tip as any).content}</div>\n        </div>\n      );\n    } else if (tip) {\n      tipContent = (\n        <div>\n          <div>{intl('Attribute: ')}{propName}</div>\n          <div>{intl('Description: ')}{tip}</div>\n        </div>\n      );\n    }\n    return tipContent;\n  }\n\n  clickHandler(event?: MouseEvent) {\n    const { editor, name, title, meta } = this.props;\n    editor?.eventBus.emit('setting.setter.field.click', { name, title, meta, event });\n  }\n\n  render() {\n    const { hasError } = this.state;\n    if (hasError) {\n      return null;\n    }\n\n    const { className, children, meta, title, valueState, name: propName, tip } = this.props;\n    const { display, collapsed } = this.state;\n    const isAccordion = display === 'accordion';\n    let hostName = '';\n    if (typeof meta === 'object') {\n      hostName = `${meta?.package || ''}-${meta.componentName || ''}`;\n    } else if (typeof meta === 'string') {\n      hostName = meta;\n    }\n    const id = `${hostName}-${propName || (title as any)['en-US'] || (title as any)['zh-CN']}`;\n    const tipContent = this.getTipContent(propName!, tip);\n    return (\n      <div\n        className={classNames(`lc-field lc-${display}-field`, className, {\n          'lc-field-is-collapsed': isAccordion && collapsed,\n        })}\n        id={id}\n      >\n        {\n          display !== 'plain' && (\n            <div className=\"lc-field-head\" onClick={isAccordion ? this.toggleExpand : undefined}>\n              <div className=\"lc-field-title\">\n                {createValueState(valueState, this.handleClear)}\n                <Title\n                  title={title || ''}\n                  onClick={this.clickHandler}\n                />\n                <InlineTip position=\"top\">{tipContent}</InlineTip>\n              </div>\n              {isAccordion && <Icon className=\"lc-field-icon\" type=\"arrow-up\" size=\"xs\" />}\n            </div>\n          )\n        }\n        <div key=\"body\" ref={(shell) => { this.body = shell; }} className=\"lc-field-body\">\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n\n/**\n * **交互专利点**\n *\n * -1 多种值\n * 0 | null 无值\n * 1 类似值，比如数组长度一样\n * 2 单一植\n * 10 必填\n *\n * TODO: turn number to enum\n */\nfunction createValueState(/* valueState?: number, onClear?: (e: React.MouseEvent) => void */) {\n  return null;\n  /*\n  let tip: any = null;\n  let className = 'lc-valuestate';\n  let icon: any = null;\n  if (valueState) {\n    if (valueState < 0) {\n      // multiple value 橘黄色点： tip：多种值，点击清除\n      tip = intlNode('Multiple Value, Click to Clear');\n      className += ' valuestate-multiple';\n      icon = <IconClear size={6} />;\n    } else if (valueState === 10) {\n      // isset  orangered tip: 必填项\n      tip = intlNode('Required');\n      className += ' valuestate-required';\n      onClear = undefined;\n    } else if (valueState > 0) {\n      // isset  蓝点 tip: 已设置值，点击清除\n      tip = intlNode('Setted Value, Click to Clear');\n      className += ' valuestate-isset';\n      icon = <IconClear size={6} />;\n    }\n  } else {\n    onClear = undefined;\n    // unset 占位空间\n  }\n\n  return (\n    <i className={className} onClick={onClear}>\n      {icon}\n      {tip && <Tip>{tip}</Tip>}\n    </i>\n  );\n  */\n}\n\nexport interface PopupFieldProps extends FieldProps {\n  width?: number;\n}\n\nexport class PopupField extends Component<PopupFieldProps> {\n  static contextType = PopupContext;\n\n  private pipe: any;\n\n  static defaultProps: PopupFieldProps = {\n    width: 300,\n  };\n\n  render() {\n    const { className, children, title, width } = this.props;\n    if (!this.pipe) {\n      this.pipe = (this.context as PopupPipe).create({ width });\n    }\n\n    const titleElement = title && (\n      <div className=\"lc-field-title\">\n        <Title title={title} />\n      </div>\n    );\n\n    this.pipe.send(<div className=\"lc-field-body\">{children}</div>, titleElement);\n\n    return (\n      <div className={classNames('lc-field lc-popup-field', className)}>\n        {title && (\n          <div\n            className=\"lc-field-head\"\n            onClick={(e) => {\n              this.pipe.show((e as any).target);\n            }}\n          >\n            <div className=\"lc-field-title\">\n              <Title title={title} />\n            </div>\n            <Icon className=\"lc-field-icon\" type=\"arrow-left\" size=\"xs\" />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport interface EntryFieldProps extends FieldProps {\n  stageName?: string;\n}\n\nexport class EntryField extends Component<EntryFieldProps> {\n  render() {\n    const { title, className, stageName } = this.props;\n    const classNameList = classNames('lc-field', 'lc-entry-field', className);\n\n    return (\n      <div className={classNameList}>\n        <div className=\"lc-field-head\" data-stage-target={stageName}>\n          <div className=\"lc-field-title\">\n            <Title title={title || ''} />\n          </div>\n          <Icon className=\"lc-field-icon\" type=\"arrow-right\" size=\"xs\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport class PlainField extends Component<FieldProps> {\n  render() {\n    const { className, children } = this.props;\n    return (\n      <div className={classNames('lc-field lc-plain-field', className)}>\n        <div className=\"lc-field-body\">{children}</div>\n      </div>\n    );\n  }\n}\n","import { ReactNode, createElement } from 'react';\nimport { IPublicTypeTitleContent } from '@alilc/lowcode-types';\nimport './index.less';\nimport { Field, PopupField, EntryField, PlainField } from './fields';\n\nexport interface FieldProps {\n  className?: string;\n  title?: IPublicTypeTitleContent | null;\n  display?: 'accordion' | 'inline' | 'block' | 'plain' | 'popup' | 'entry';\n  collapsed?: boolean;\n  valueState?: number;\n  onExpandChange?: (collapsed: boolean) => void;\n  onClear?: () => void;\n  [extra: string]: any;\n}\n\nexport function createField(props: FieldProps, children: ReactNode, type?: 'accordion' | 'inline' | 'block' | 'plain' | 'popup' | 'entry') {\n  if (type === 'popup') {\n    return createElement(PopupField, props, children);\n  }\n  if (type === 'entry') {\n    return createElement(EntryField, props, children);\n  }\n  if (type === 'plain' || !props.title) {\n    return createElement(PlainField, props, children);\n  }\n  return createElement(Field, { ...props, defaultDisplay: type }, children);\n}\n\nexport { Field, PopupField, EntryField, PlainField };\n","import { Component, MouseEvent, Fragment } from 'react';\nimport { shallowIntl, observer, obx, engineConfig, runInAction, globalContext } from '@alilc/lowcode-editor-core';\nimport { createContent, isJSSlot, isSetterConfig, isSettingField } from '@alilc/lowcode-utils';\nimport { Skeleton } from '@alilc/lowcode-editor-skeleton';\nimport { IPublicTypeCustomView } from '@alilc/lowcode-types';\nimport { SettingField, SettingTopEntry, SettingEntry, ComponentMeta } from '@alilc/lowcode-designer';\nimport { createField } from '../field';\nimport PopupService, { PopupPipe } from '../popup';\nimport { SkeletonContext } from '../../context';\nimport { intl } from '../../locale';\nimport { Setters } from '@alilc/lowcode-shell';\n\nfunction isStandardComponent(componentMeta: ComponentMeta | null) {\n  if (!componentMeta) return false;\n  const { prototype } = componentMeta;\n  return prototype == null;\n}\n\n/**\n * 判断 initialValue 是否为非空，非空条件：\n *  1. 当为 slot 结构时，value 为有长度的数组且 visible 不为 false\n *  2. 不为 slot 结构，为非 undefined / null 值\n * @param initialValue\n * @returns\n */\nfunction isInitialValueNotEmpty(initialValue: any) {\n  if (isJSSlot(initialValue)) {\n    // @ts-ignore visible 为 false 代表默认不展示\n    return initialValue.visible !== false && Array.isArray(initialValue.value) && initialValue.value.length > 0;\n  }\n  return (initialValue !== undefined && initialValue !== null);\n}\n\ntype SettingFieldViewProps = { field: SettingField };\ntype SettingFieldViewState = { fromOnChange: boolean; value: any };\n@observer\nclass SettingFieldView extends Component<SettingFieldViewProps, SettingFieldViewState> {\n  static contextType = SkeletonContext;\n\n  stageName: string | undefined;\n\n  setters: Setters;\n\n  constructor(props: SettingFieldViewProps) {\n    super(props);\n\n    const { field } = this.props;\n    const { extraProps } = field;\n    const { display } = extraProps;\n\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    const { stages } = editor.get('skeleton') as Skeleton;\n    this.setters = editor.get('setters');\n    let stageName;\n    if (display === 'entry') {\n      runInAction(() => {\n        stageName = `${field.getNode().id}_${field.name.toString()}`;\n        // 清除原 stage，不然 content 引用的一直是老的 field，导致数据无法得到更新\n        stages.container.remove(stageName);\n        const stage = stages.add({\n          type: 'Widget',\n          name: stageName,\n          content: <Fragment>{field.items.map((item, index) => createSettingFieldView(item, field, index))}</Fragment>,\n          props: {\n            title: field.title,\n          },\n        });\n      });\n    }\n    this.stageName = stageName;\n  }\n\n  get field() {\n    return this.props.field;\n  }\n\n  get visible() {\n    const { extraProps } = this.field;\n    const { condition } = extraProps;\n    try {\n      return typeof condition === 'function' ? condition(this.field.internalToShellPropEntry()) !== false : true;\n    } catch (error) {\n      console.error('exception when condition (hidden) is excuted', error);\n    }\n\n    return true;\n  }\n\n  get setterInfo(): {\n    setterProps: any;\n    initialValue: any;\n    setterType: any;\n  } {\n    const { extraProps, componentMeta } = this.field;\n    const { defaultValue } = extraProps;\n\n    const { setter } = this.field;\n    let setterProps: any = {};\n    let setterType: any;\n    let initialValue: any = null;\n\n    if (Array.isArray(setter)) {\n      setterType = 'MixedSetter';\n      setterProps = {\n        setters: setter,\n      };\n    } else if (isSetterConfig(setter)) {\n      setterType = setter.componentName;\n      if (setter.props) {\n        setterProps = setter.props;\n        if (typeof setterProps === 'function') {\n          setterProps = setterProps(this.field.internalToShellPropEntry());\n        }\n      }\n      if (setter.initialValue != null) {\n        initialValue = setter.initialValue;\n      }\n    } else if (setter) {\n      setterType = setter;\n    }\n\n    if (defaultValue != null && !('defaultValue' in setterProps)) {\n      setterProps.defaultValue = defaultValue;\n      if (initialValue == null) {\n        initialValue = defaultValue;\n      }\n    }\n\n    if (this.field.valueState === -1) {\n      setterProps.multiValue = true;\n      if (!('placeholder' in setterProps)) {\n        setterProps.placeholder = intl('Multiple Value');\n      }\n    }\n\n    // 根据是否支持变量配置做相应的更改\n    const supportVariable = this.field.extraProps?.supportVariable;\n    // supportVariableGlobally 只对标准组件生效，vc 需要单独配置\n    const supportVariableGlobally = engineConfig.get('supportVariableGlobally', false) && isStandardComponent(componentMeta);\n    if (supportVariable || supportVariableGlobally) {\n      if (setterType === 'MixedSetter') {\n        // VariableSetter 不单独使用\n        if (Array.isArray(setterProps.setters) && !setterProps.setters.includes('VariableSetter')) {\n          setterProps.setters.push('VariableSetter');\n        }\n      } else {\n        setterType = 'MixedSetter';\n        setterProps = {\n          setters: [\n            setter,\n            'VariableSetter',\n          ],\n        };\n      }\n    }\n\n    return {\n      setterProps,\n      initialValue,\n      setterType,\n    };\n  }\n\n  get value() {\n    return this.field.valueState === -1 ? null : this.field.getValue();\n  }\n\n  initDefaultValue() {\n    const { initialValue } = this.setterInfo;\n    if (this.state?.fromOnChange ||\n      !isInitialValueNotEmpty(initialValue) ||\n      this.value !== undefined\n    ) {\n      return;\n    }\n    // 当前 field 没有 value 值时，将 initialValue 写入 field\n    // 之所以用 initialValue，而不是 defaultValue 是为了保持跟 props.onInitial 的逻辑一致\n    const _initialValue = typeof initialValue === 'function' ? initialValue(this.field.internalToShellPropEntry()) : initialValue;\n    this.field.setValue(_initialValue);\n  }\n\n  componentDidMount() {\n    this.initDefaultValue();\n  }\n\n  render() {\n    const field = this.field;\n    const { extraProps } = field;\n    const visible = this.visible;\n\n    if (!visible) {\n      return null;\n    }\n\n    const {\n      setterProps = {},\n      setterType,\n      initialValue = null,\n    } = this.setterInfo;\n\n    const value = this.value;\n\n    let _onChange = extraProps?.onChange;\n    let stageName = this.stageName;\n\n    return createField(\n      {\n        meta: field?.componentMeta?.npm || field?.componentMeta?.componentName || '',\n        title: field.title,\n        // editor: field.editor,\n        collapsed: !field.expanded,\n        valueState: field.isRequired ? 10 : field.valueState,\n        onExpandChange: (expandState) => field.setExpanded(expandState),\n        onClear: () => field.clearValue(),\n        // field: field,\n        // stages,\n        stageName,\n        ...extraProps,\n      },\n      !stageName &&\n      this.setters.createSetterContent(setterType, {\n        ...shallowIntl(setterProps),\n        forceInline: extraProps.forceInline,\n        key: field.id,\n        // === injection\n        prop: field.internalToShellPropEntry(), // for compatible vision\n        selected: field.top?.getNode()?.internalToShellNode(),\n        field: field.internalToShellPropEntry(),\n        // === IO\n        value, // reaction point\n        initialValue,\n        onChange: (value: any) => {\n          this.setState({\n            fromOnChange: true,\n            // eslint-disable-next-line react/no-unused-state\n            value,\n          });\n          field.setValue(value, true);\n          if (_onChange) _onChange(value, field);\n        },\n        onInitial: () => {\n          if (initialValue == null) {\n            return;\n          }\n          const value = typeof initialValue === 'function' ? initialValue(field.internalToShellPropEntry()) : initialValue;\n          this.setState({\n            // eslint-disable-next-line react/no-unused-state\n            value,\n          });\n          field.setValue(value, true);\n        },\n\n        removeProp: () => {\n          field.parent.clearPropValue(field.name);\n        },\n      }),\n      extraProps.forceInline ? 'plain' : extraProps.display,\n    );\n  }\n}\n\ntype SettingGroupViewProps = SettingFieldViewProps;\n@observer\nclass SettingGroupView extends Component<SettingGroupViewProps> {\n  static contextType = SkeletonContext;\n\n  stageName: string | undefined;\n\n  constructor(props: SettingGroupViewProps) {\n    super(props);\n    const { field } = this.props;\n    const { extraProps } = field;\n    const { display } = extraProps;\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    const { stages } = editor.get('skeleton') as Skeleton;\n    // const items = field.items;\n\n    let stageName;\n    if (display === 'entry') {\n      runInAction(() => {\n        stageName = `${field.getNode().id}_${field.name.toString()}`;\n        // 清除原 stage，不然 content 引用的一直是老的 field，导致数据无法得到更新\n        stages.container.remove(stageName);\n        stages.add({\n          type: 'Widget',\n          name: stageName,\n          content: <Fragment>{field.items.map((item, index) => createSettingFieldView(item, field, index))}</Fragment>,\n          props: {\n            title: field.title,\n          },\n        });\n      });\n    }\n    this.stageName = stageName;\n  }\n\n  render() {\n    const { field } = this.props;\n    const { extraProps } = field;\n    const { condition, display } = extraProps;\n    const visible = field.isSingle && typeof condition === 'function' ? condition(field.internalToShellPropEntry()) !== false : true;\n\n    if (!visible) {\n      return null;\n    }\n\n    // todo: split collapsed state | field.items for optimize\n    return createField(\n      {\n        meta: field.componentMeta?.npm || field.componentMeta?.componentName || '',\n        title: field.title,\n        // editor: field.editor,\n        collapsed: !field.expanded,\n        onExpandChange: (expandState) => field.setExpanded(expandState),\n        // field: field,\n        // stages,\n        stageName: this.stageName,\n      },\n      field.items.map((item, index) => createSettingFieldView(item, field, index)),\n      display,\n    );\n  }\n}\n\nexport function createSettingFieldView(item: SettingField | IPublicTypeCustomView, field: SettingEntry, index?: number) {\n  if (isSettingField(item)) {\n    if (item.isGroup) {\n      return <SettingGroupView field={item} key={item.id} />;\n    } else {\n      return <SettingFieldView field={item} key={item.id} />;\n    }\n  } else {\n    return createContent(item, { key: index, field });\n  }\n}\n\nexport type SettingsPaneProps = {\n  target: SettingTopEntry | SettingField;\n  usePopup?: boolean;\n};\n\n@observer\nexport class SettingsPane extends Component<SettingsPaneProps> {\n  static contextType = SkeletonContext;\n\n  @obx private currentStage?: Stage;\n\n  private popupPipe = new PopupPipe();\n\n  private pipe = this.popupPipe.create();\n\n  private handleClick = (e: MouseEvent) => {\n    // compatiable vision stageBox\n    // TODO: optimize these codes\n    const { usePopup = true } = this.props;\n    if (!usePopup) return;\n    const pane = e.currentTarget as HTMLDivElement;\n    function getTarget(node: any): any {\n      if (!pane.contains(node) || (node.nodeName === 'A' && node.getAttribute('href'))) {\n        return null;\n      }\n\n      const target = node.dataset ? node.dataset.stageTarget : null;\n      if (target) {\n        return target;\n      }\n      return getTarget(node.parentNode);\n    }\n    const target = getTarget(e.target);\n    if (!target) {\n      return;\n    }\n\n    const skeleton = this.context as Skeleton;\n    if (!skeleton || !skeleton.stages) {\n      return;\n    }\n    const stage = skeleton.stages.container.get(target);\n    if (stage) {\n      if (this.currentStage) {\n        stage.setPrevious(this.currentStage);\n      }\n      this.currentStage = stage;\n    }\n  };\n\n  private popStage() {\n    this.currentStage = this.currentStage?.getPrevious();\n  }\n\n  render() {\n    const { target } = this.props;\n    const { items } = target;\n\n    return (\n      <div className=\"lc-settings-pane\" onClick={this.handleClick}>\n        {/* todo: add head for single use */}\n        <PopupService popupPipe={this.popupPipe}>\n          <div className=\"lc-settings-content\">\n            {items.map((item, index) => createSettingFieldView(item, target, index))}\n          </div>\n        </PopupService>\n      </div>\n    );\n  }\n}\n","import { Stage as StageWidget } from '../../widget/stage';\nimport { createModuleEventBus, IEventBus } from '@alilc/lowcode-editor-core';\n\nexport default class StageChain {\n  private emitter: IEventBus;\n\n  private stage: StageWidget;\n\n  constructor(stage: StageWidget) {\n    this.emitter = createModuleEventBus('StageChain');\n    this.stage = stage;\n  }\n\n  stagePush(stage: StageWidget | null) {\n    if (!stage) return;\n    stage.setPrevious(this.stage);\n    stage.setReferLeft(this.stage);\n    this.stage = stage;\n    this.emitter.emit('stagechange');\n  }\n\n  stageBack() {\n    const stage = this.stage.getPrevious();\n    if (!stage) return;\n    stage.setReferRight(this.stage);\n    this.stage = stage;\n    this.emitter.emit('stagechange');\n  }\n\n  /**\n   * 回到最开始\n   */\n  stageBackToRoot() {\n    let rootStage = this.stage.getPrevious();\n    while (rootStage && !rootStage.isRoot) {\n      rootStage = rootStage.getPrevious();\n    }\n    if (!rootStage) return;\n    rootStage.setReferRight(this.stage);\n    this.stage = rootStage;\n    this.emitter.emit('stagechange');\n  }\n\n  getCurrentStage() {\n    return this.stage;\n  }\n\n  onStageChange(func: () => void) {\n    this.emitter.on('stagechange', func);\n    return () => {\n      this.emitter.removeListener('stagechange', func);\n    };\n  }\n}\n","\nimport { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconArrow(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M512.002047 771.904425c-10.152221 0.518816-20.442588-2.800789-28.202319-10.598382L77.902254 315.937602c-14.548344-14.618952-14.548344-38.318724 0-52.933583 14.544251-14.614859 38.118156-14.614859 52.662407 0l381.437385 418.531212L893.432269 263.004019c14.544251-14.614859 38.125319-14.614859 52.662407 0 14.552437 14.614859 14.552437 38.314631 0 52.933583L540.205389 761.307066C532.451798 769.103636 522.158361 772.424264 512.002047 771.904425z\" />\n    </SVGIcon>\n  );\n}\nIconArrow.displayName = 'Arrow';","\nimport { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconExit(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M723.872 478.4l-81.12-81.152L688 352l135.776 135.776L846.4 510.4 688 668.8l-45.248-45.28 81.12-81.12H384v-64h339.872zM576 896H256.192A64.16 64.16 0 0 1 192 831.84V192.16c0-35.424 28.704-64.16 64.192-64.16H576v64H288.224A31.968 31.968 0 0 0 256 223.744v576.512C256 817.44 270.4 832 288.224 832H576v64z\" />\n    </SVGIcon>\n  );\n}\nIconExit.displayName = 'Exit';","// @todo 改成 hooks\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { IconArrow } from '../../icons/arrow';\nimport { IconExit } from '../../icons/exit';\nimport { Stage as StageWidget } from '../../widget/stage';\nimport { isTitleConfig } from '@alilc/lowcode-utils';\n\nexport const StageDefaultProps = {\n  current: false,\n};\n\nexport type StageProps = typeof StageDefaultProps & {\n  stage?: StageWidget;\n  current: boolean;\n  direction?: string;\n};\n\nexport default class Stage extends Component<StageProps> {\n  static defaultProps = StageDefaultProps;\n\n  private timer: number;\n\n  private additionClassName: string | null;\n\n  private shell: any;\n\n  componentDidMount() {\n    this.doSkate();\n  }\n\n  componentDidUpdate() {\n    this.doSkate();\n  }\n\n  componentWillUnmount() {\n    window.clearTimeout(this.timer);\n  }\n\n  doSkate() {\n    window.clearTimeout(this.timer);\n    if (this.additionClassName) {\n      this.timer = window.setTimeout(() => {\n        const elem = this.shell;\n        if (elem) {\n          if (this.props.current) {\n            elem.classList.remove(this.additionClassName);\n          } else {\n            elem.classList.add(this.additionClassName);\n          }\n          this.additionClassName = null;\n        }\n      }, 15);\n    }\n  }\n\n  render() {\n    const { stage, current, direction } = this.props;\n    const content = stage?.getContent();\n    const { title } = stage!;\n    const newTitle = isTitleConfig(title) ? title.label : title;\n\n    if (current) {\n      if (direction) {\n        this.additionClassName = `skeleton-stagebox-stagein-${direction}`;\n      }\n    } else if (direction) {\n      this.additionClassName = `skeleton-stagebox-stageout-${direction}`;\n    }\n\n    const className = classNames(\n      'skeleton-stagebox-stage',\n      {\n        'skeleton-stagebox-refer': !current,\n      },\n      this.additionClassName,\n    );\n\n    const stageBacker = stage?.hasBack() ? (\n      <div className=\"skeleton-stagebox-stagebacker\">\n        <IconArrow className=\"skeleton-stagebox-stage-arrow\" size=\"medium\" data-stage-target=\"stageback\" />\n        <span className=\"skeleton-stagebox-stage-title\">{newTitle}</span>\n        <IconExit className=\"skeleton-stagebox-stage-exit\" size=\"medium\" data-stage-target=\"stageexit\" />\n      </div>\n    ) : null;\n\n    return (\n      <div\n        ref={(ref) => {\n          this.shell = ref;\n        }}\n        className={className}\n      >\n        {stageBacker}\n        <div className=\"skeleton-stagebox-stage-content\">{content}</div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { SettingTopEntry, SettingField } from '@alilc/lowcode-designer';\nimport StageChain from './stage-chain';\nimport Stage from './stage';\nimport { Skeleton } from '../../skeleton';\nimport PopupService, { PopupPipe } from '../popup';\nimport { Stage as StageWidget } from '../../widget/stage';\n\nexport const StageBoxDefaultProps = {};\n\nexport type StageBoxProps = typeof StageBoxDefaultProps & {\n  stageChain?: StageChain;\n  className?: string;\n  children: React.ReactNode;\n  skeleton: Skeleton;\n  // @todo to remove\n  target?: SettingTopEntry | SettingField;\n};\n\ntype WillDetachMember = () => void;\n\n@observer\nexport default class StageBox extends Component<StageBoxProps> {\n  static defaultProps = StageBoxDefaultProps;\n\n  static displayName = 'StageBox';\n\n  private stageChain: StageChain;\n\n  private willDetach: WillDetachMember[] = [];\n\n  private shell: HTMLElement | null;\n\n  private popupPipe = new PopupPipe();\n\n  private pipe = this.popupPipe.create();\n\n  constructor(props: StageBoxProps) {\n    super(props);\n    const { stageChain, children, skeleton } = this.props;\n    if (stageChain) {\n      this.stageChain = stageChain;\n    } else {\n      const stateName = skeleton.createStage({\n        content: children,\n        isRoot: true,\n      });\n      this.stageChain = new StageChain(skeleton.getStage(stateName as string) as StageWidget);\n    }\n    this.willDetach.push(this.stageChain.onStageChange(() => this.forceUpdate()));\n  }\n\n  componentDidMount() {\n    const { shell } = this;\n\n    /**\n     * 向上层递归寻找 target\n     * @param node 节点\n     * @returns 节点的 dataset.stageTarget 信息\n     */\n    const getTarget = (node: HTMLElement | null): null | string => {\n      if (!node || !shell?.contains(node) || (node.nodeName === 'A' && node.getAttribute('href'))) {\n        return null;\n      }\n\n      const target = node.dataset ? node.dataset.stageTarget : null;\n      if (target) {\n        return target;\n      }\n      return getTarget(node.parentNode as HTMLElement);\n    };\n\n    const click = (e: MouseEvent) => {\n      const target = getTarget(e.target as HTMLElement);\n      if (!target) {\n        return;\n      }\n\n      if (target === 'stageback') {\n        this.stageChain.stageBack();\n      } else if (target === 'stageexit') {\n        this.stageChain.stageBackToRoot();\n      } else {\n        const { skeleton } = this.props;\n        this.stageChain.stagePush(skeleton.getStage(target));\n      }\n    };\n\n    shell?.addEventListener('click', click, false);\n    this.willDetach.push(() => shell?.removeEventListener('click', click, false));\n  }\n\n  componentWillUnmount() {\n    if (this.willDetach) {\n      this.willDetach.forEach((off: () => void) => off());\n    }\n  }\n\n  render() {\n    const className = classNames('skeleton-stagebox', this.props.className);\n    const stage = this.stageChain.getCurrentStage();\n    const refer = stage?.getRefer();\n\n    let contentCurrent = null;\n    let contentRefer = null;\n\n    if (refer) {\n      contentCurrent = <Stage key={stage.getId()} stage={stage} direction={refer.direction} current />;\n      contentRefer = <Stage key={refer?.stage?.getId()} stage={refer?.stage} direction={refer.direction} />;\n    } else {\n      contentCurrent = <Stage key={stage.getId()} stage={stage} current />;\n    }\n\n    return (\n      <div\n        ref={(ref) => {\n          this.shell = ref;\n        }}\n        className={className}\n      >\n\n        <PopupService popupPipe={this.popupPipe}>\n\n          {contentRefer}\n          {contentCurrent}\n\n        </PopupService>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Tab, Breadcrumb } from '@alifd/next';\nimport { Title, observer, Editor, obx, globalContext, engineConfig, makeObservable } from '@alilc/lowcode-editor-core';\nimport { Node, SettingField } from '@alilc/lowcode-designer';\nimport classNames from 'classnames';\nimport { SettingsMain } from './main';\nimport { SettingsPane } from './settings-pane';\nimport { StageBox } from '../stage-box';\nimport { SkeletonContext } from '../../context';\nimport { intl } from '../../locale';\nimport { createIcon, isSettingField } from '@alilc/lowcode-utils';\n\n@observer\nexport class SettingsPrimaryPane extends Component<{ engineEditor: Editor; config: any }, { shouldIgnoreRoot: boolean }> {\n  state = {\n    shouldIgnoreRoot: false,\n  };\n  private main = new SettingsMain(this.props.engineEditor);\n\n  @obx.ref private _activeKey?: any;\n\n  constructor(props) {\n    super(props);\n    makeObservable(this);\n  }\n\n  componentDidMount() {\n    this.setShouldIgnoreRoot();\n\n    const editor = this.props.engineEditor;\n\n    editor.eventBus.on('designer.selection.change', () => {\n      if (!engineConfig.get('stayOnTheSameSettingTab', false)) {\n        this._activeKey = null;\n      }\n    });\n  }\n\n  async setShouldIgnoreRoot() {\n    const designMode = await globalContext.get('editor').get('designMode');\n    this.setState({\n      shouldIgnoreRoot: designMode === 'live',\n    });\n  }\n\n  componentWillUnmount() {\n    this.main.purge();\n  }\n\n  renderBreadcrumb() {\n    const { settings } = this.main;\n    const { config } = this.props;\n    // const shouldIgnoreRoot = config.props?.ignoreRoot;\n    const { shouldIgnoreRoot } = this.state;\n    if (!settings) {\n      return null;\n    }\n    if (settings.isMultiple) {\n      return (\n        <div className=\"lc-settings-navigator\">\n          {createIcon(settings.componentMeta?.icon, {\n            className: 'lc-settings-navigator-icon',\n            class: 'lc-settings-navigator-icon',\n          })}\n          <Title title={settings.componentMeta!.title} />\n          <span> x {settings.nodes.length}</span>\n        </div>\n      );\n    }\n\n    const workspace = globalContext.get('workspace');\n    const editor = this.props.engineEditor;\n    const designer = editor.get('designer');\n    const current = designer?.currentSelection?.getNodes()?.[0];\n    let node: Node | null = settings.first;\n    const { focusNode } = node.document;\n\n    const items = [];\n    let l = 3;\n    while (l-- > 0 && node) {\n      const _node = node;\n      // dirty code: should remove\n      if (shouldIgnoreRoot && node.isRoot()) {\n        break;\n      }\n      if (node.contains(focusNode)) {\n        l = 0;\n      }\n      const props =\n        l === 2\n          ? {}\n          : {\n            onMouseOver: hoverNode.bind(null, _node, true),\n            onMouseOut: hoverNode.bind(null, _node, false),\n            onClick: () => {\n              if (!_node) {\n                return;\n              }\n              selectNode.call(null, _node);\n              const getName = (node: any) => {\n                const npm = node?.componentMeta?.npm;\n                return [npm?.package, npm?.componentName].filter((item) => !!item).join('-') ||\n                  node?.componentMeta?.componentName ||\n                  '';\n              };\n              const selected = getName(current);\n              const target = getName(_node);\n              editor?.eventBus.emit('skeleton.settingsPane.Breadcrumb', {\n                selected,\n                target,\n              });\n            },\n          };\n      items.unshift(\n        <Breadcrumb.Item {...props} key={node.id}>\n          <Title title={node.title} />\n        </Breadcrumb.Item>,\n      );\n      node = node.parent;\n    }\n\n    return (\n      <div className=\"lc-settings-navigator\">\n        {createIcon(this.main.componentMeta?.icon, {\n          className: 'lc-settings-navigator-icon',\n          class: 'lc-settings-navigator-icon',\n        })}\n        <Breadcrumb className=\"lc-settings-node-breadcrumb\">{items}</Breadcrumb>\n      </div>\n    );\n  }\n\n  render() {\n    const { settings } = this.main;\n    const editor = this.props.engineEditor;\n    if (!settings) {\n      // 未选中节点，提示选中 或者 显示根节点设置\n      return (\n        <div className=\"lc-settings-main\">\n          <div className=\"lc-settings-notice\">\n            <p>{intl('Please select a node in canvas')}</p>\n          </div>\n        </div>\n      );\n    }\n\n    // 当节点被锁定，且未开启锁定后容器可设置属性\n    if (settings.isLocked && !engineConfig.get('enableLockedNodeSetting', false)) {\n      return (\n        <div className=\"lc-settings-main\">\n          <div className=\"lc-settings-notice\">\n            <p>{intl('Current node is locked')}</p>\n          </div>\n        </div>\n      );\n    }\n    if (Array.isArray(settings.items) && settings.items.length === 0) {\n      return (\n        <div className=\"lc-settings-main\">\n          <div className=\"lc-settings-notice\">\n            <p>{intl('No config found for this type of component')}</p>\n          </div>\n        </div>\n      );\n    }\n\n    if (!settings.isSameComponent) {\n      // TODO: future support 获取设置项交集编辑\n      return (\n        <div className=\"lc-settings-main\">\n          <div className=\"lc-settings-notice\">\n            <p>{intl('Please select same kind of components')}</p>\n          </div>\n        </div>\n      );\n    }\n\n    const { items } = settings;\n    if (items.length > 5 || items.some((item) => !isSettingField(item) || !item.isGroup)) {\n      return (\n        <div className=\"lc-settings-main\">\n          {this.renderBreadcrumb()}\n          <div className=\"lc-settings-body\">\n            <SkeletonContext.Consumer>\n              {(skeleton) => {\n                if (skeleton) {\n                  return (\n                    <StageBox skeleton={skeleton} target={settings} key={settings.id}>\n                      <SettingsPane target={settings} usePopup={false} />\n                    </StageBox>\n                  );\n                }\n                return null;\n              }}\n            </SkeletonContext.Consumer>\n          </div>\n        </div>\n      );\n    }\n\n    let matched = false;\n    const tabs = (items as SettingField[]).map((field) => {\n      if (this._activeKey === field.name) {\n        matched = true;\n      }\n      return (\n        <Tab.Item\n          className=\"lc-settings-tab-item\"\n          title={<Title title={field.title} />}\n          key={field.name}\n          onClick={\n            () => {\n              editor?.eventBus.emit('skeleton.settingsPane.change', {\n                name: field.name,\n                title: field.title,\n              });\n            }\n          }\n        >\n          <SkeletonContext.Consumer>\n            {(skeleton) => {\n              if (skeleton) {\n                return (\n                  <StageBox skeleton={skeleton} target={field} key={field.id}>\n                    <SettingsPane target={field} key={field.id} usePopup={false} />\n                  </StageBox>\n                );\n              }\n              return null;\n            }}\n          </SkeletonContext.Consumer>\n        </Tab.Item>\n      );\n    });\n    const activeKey = matched ? this._activeKey : (items[0] as SettingField).name;\n\n    const className = classNames('lc-settings-main', {\n      'lc-settings-hide-tabs':\n        items.length === 1 && engineConfig.get('hideSettingsTabsWhenOnlyOneItem', false),\n    });\n    return (\n      <div className={className}>\n        { this.renderBreadcrumb() }\n        <Tab\n          activeKey={activeKey}\n          onChange={(tabKey) => {\n            this._activeKey = tabKey;\n          }}\n          navClassName=\"lc-settings-tabs\"\n          animation={false}\n          excessMode=\"dropdown\"\n          contentClassName=\"lc-settings-tabs-content\"\n        >\n          {tabs}\n        </Tab>\n      </div>\n    );\n  }\n}\n\nfunction hoverNode(node: Node, flag: boolean) {\n  node.hover(flag);\n}\nfunction selectNode(node: Node) {\n  node?.select();\n}\n","import { IPublicTypeTransformedComponentMetadata } from '@alilc/lowcode-types';\nimport { isPlainObject, isJSFunction, getLogger } from '@alilc/lowcode-utils';\n\nconst leadingFnRe = /^function/;\nconst leadingFnNameRe = /^\\w+\\s*\\(/;\nconst logger = getLogger({ level: 'warn', bizName: 'skeleton:transducers' });\n/**\n * 将函数字符串转成函数，支持几种类型\n *   类型一：() => {} / val => {}\n *   类型二：setValue() {}\n *   类型三：function() {} / function setValue() {}\n * @param str\n * @returns\n */\nfunction transformStringToFunction(str: string) {\n  if (typeof str !== 'string') return str;\n\n  let fn;\n  if (leadingFnNameRe.test(str) && !leadingFnRe.test(str)) {\n    str = `function ${str}`;\n  }\n  let fnBody = `\n    return function() {\n      const self = this;\n      try {\n        return (${str}).apply(self, arguments);\n      } catch(e) {\n        logger.warn('call function which parsed by lowcode failed: ', e);\n        return e.message;\n      }\n    };\n  `;\n  try {\n    // eslint-disable-next-line no-new-func\n    fn = new Function(fnBody)();\n  } catch (e) {\n    logger.error(str);\n    logger.error(e.message);\n  }\n  return fn;\n}\n\nfunction parseJSFunc(obj: any, enableAllowedKeys = true) {\n  if (!obj) return;\n  Object.keys(obj).forEach(key => {\n    const item = obj[key];\n    if (isJSFunction(item)) {\n      obj[key] = transformStringToFunction(item.value);\n    } else if (Array.isArray(item)) {\n      item.forEach(o => parseJSFunc(o, enableAllowedKeys));\n    } else if (isPlainObject(item)) {\n      parseJSFunc(item, enableAllowedKeys);\n    }\n  });\n}\n\nexport default function (metadata: IPublicTypeTransformedComponentMetadata): IPublicTypeTransformedComponentMetadata {\n  parseJSFunc(metadata, false);\n\n  return metadata;\n}","import {\n  IPublicTypeFieldConfig,\n  IPublicTypePropConfig,\n  IPublicTypePropType,\n  IPublicTypeSetterType,\n  IPublicTypeOneOf,\n  IPublicTypeObjectOf,\n  IPublicTypeArrayOf,\n  IPublicTypeTransformedComponentMetadata,\n  IPublicTypeOneOfType,\n  ConfigureSupportEvent,\n} from '@alilc/lowcode-types';\n\nfunction propConfigToFieldConfig(propConfig: IPublicTypePropConfig): IPublicTypeFieldConfig {\n  const { name, description } = propConfig;\n  const title = {\n    label: {\n      type: 'i18n',\n      'en-US': name,\n      'zh-CN': description?.slice(0, 10) || name,\n    },\n    tip: description ? `${name} | ${description}` : undefined,\n  };\n  return {\n    title,\n    ...propConfig,\n    // TODO 这边直接用propConfig，将setter丢在propconfig里，需要确认是否在PropConfig扩展还是换实现\n    setter: propConfig.setter ? propConfig.setter : propTypeToSetter(propConfig.propType),\n  };\n}\n\nfunction propTypeToSetter(propType: IPublicTypePropType): IPublicTypeSetterType {\n  let typeName: string;\n  let isRequired: boolean | undefined = false;\n  if (typeof propType === 'string') {\n    typeName = propType;\n  } else if (typeof propType === 'object') {\n    typeName = propType.type;\n    isRequired = propType.isRequired;\n  } else {\n    typeName = 'string';\n  }\n  // TODO: use mixinSetter wrapper\n  switch (typeName) {\n    case 'string':\n      return {\n        componentName: 'StringSetter',\n        isRequired,\n        initialValue: '',\n      };\n    case 'number':\n      return {\n        componentName: 'NumberSetter',\n        isRequired,\n        initialValue: 0,\n      };\n    case 'bool':\n      return {\n        componentName: 'BoolSetter',\n        isRequired,\n        initialValue: false,\n      };\n    case 'oneOf':\n      const dataSource = ((propType as IPublicTypeOneOf).value || []).map((value, index) => {\n        const t = typeof value;\n        return {\n          label: t === 'string' || t === 'number' || t === 'boolean' ? String(value) : `value ${index}`,\n          value,\n        };\n      });\n      const componentName = dataSource.length >= 4 ? 'SelectSetter' : 'RadioGroupSetter';\n      return {\n        componentName,\n        props: { dataSource, options: dataSource },\n        isRequired,\n        initialValue: dataSource[0] ? dataSource[0].value : null,\n      };\n\n    case 'element':\n    case 'node': // TODO: use Mixin\n      return {\n        // slotSetter\n        componentName: 'SlotSetter',\n        props: {\n          mode: typeName,\n        },\n        isRequired,\n        initialValue: {\n          type: 'JSSlot',\n          value: [],\n        },\n      };\n    case 'shape':\n    case 'exact':\n      const items = ((propType as any).value || []).map((item: any) => propConfigToFieldConfig(item));\n      return {\n        componentName: 'ObjectSetter',\n        props: {\n          config: {\n            items,\n            extraSetter: typeName === 'shape' ? propTypeToSetter('any') : null,\n          },\n        },\n        isRequired,\n        initialValue: (field: any) => {\n          const data: any = {};\n          items.forEach((item: any) => {\n            let initial = item.defaultValue;\n            if (initial == null && item.setter && typeof item.setter === 'object') {\n              initial = (item.setter as any).initialValue;\n            }\n            data[item.name] = initial ? (typeof initial === 'function' ? initial(field) : initial) : null;\n          });\n          return data;\n        },\n      };\n    case 'object':\n    case 'objectOf':\n      return {\n        componentName: 'ObjectSetter',\n        props: {\n          config: {\n            extraSetter: propTypeToSetter(typeName === 'objectOf' ? (propType as IPublicTypeObjectOf).value : 'any'),\n          },\n        },\n        isRequired,\n        initialValue: {},\n      };\n    case 'array':\n    case 'arrayOf':\n      return {\n        componentName: 'ArraySetter',\n        props: {\n          itemSetter: propTypeToSetter(typeName === 'arrayOf' ? (propType as IPublicTypeArrayOf).value : 'any'),\n        },\n        isRequired,\n        initialValue: [],\n      };\n    case 'func':\n      return {\n        componentName: 'FunctionSetter',\n        isRequired,\n      };\n    case 'color':\n      return {\n        componentName: 'ColorSetter',\n        isRequired,\n      };\n    case 'oneOfType':\n      return {\n        componentName: 'MixedSetter',\n        props: {\n          // TODO:\n          setters: (propType as IPublicTypeOneOfType).value.map((item) => propTypeToSetter(item)),\n        },\n        isRequired,\n      };\n    default:\n      // do nothing\n  }\n  return {\n    componentName: 'MixedSetter',\n    isRequired,\n    props: {},\n  };\n}\n\nconst EVENT_RE = /^on|after|before[A-Z][\\w]*$/;\n\nexport default function (metadata: IPublicTypeTransformedComponentMetadata): IPublicTypeTransformedComponentMetadata {\n  const { configure = {} } = metadata;\n  // TODO types后续补充\n  let extendsProps: any = null;\n  if (configure.props) {\n    if (Array.isArray(configure.props)) {\n      return metadata;\n    }\n    const { isExtends, override = [] } = configure.props;\n    // 不开启继承时，直接返回configure配置\n    if (!isExtends) {\n      return {\n        ...metadata,\n        configure: {\n          ...configure,\n          props: [...override],\n        },\n      };\n    }\n\n    extendsProps = {};\n    // 开启继承后，缓存重写内容的配置\n    override.forEach((prop: any) => {\n      extendsProps[prop.name] = prop;\n    });\n  }\n\n  if (!metadata.props) {\n    return {\n      ...metadata,\n      configure: {\n        ...configure,\n        props: [],\n      },\n    };\n  }\n  const { component = {}, supports = {} } = configure;\n  const supportedEvents: ConfigureSupportEvent[] | null = supports.events ? null : [];\n  const props: IPublicTypeFieldConfig[] = [];\n\n  metadata.props.forEach((prop) => {\n    const { name, propType, description } = prop;\n    if (\n      name === 'children' &&\n      (component.isContainer || propType === 'node' || propType === 'element' || propType === 'any')\n    ) {\n      if (component.isContainer !== false) {\n        component.isContainer = true;\n        props.push(propConfigToFieldConfig(prop));\n        return;\n      }\n    }\n\n    if (EVENT_RE.test(name) && (propType === 'func' || propType === 'any')) {\n      if (supportedEvents) {\n        supportedEvents.push({\n          name,\n          description,\n        });\n        supports.events = supportedEvents;\n      }\n      return;\n    }\n\n    if (name === 'className' && (propType === 'string' || propType === 'any')) {\n      if (supports.className == null) {\n        supports.className = true;\n      }\n      return;\n    }\n\n    if (name === 'style' && (propType === 'object' || propType === 'any')) {\n      if (supports.style == null) {\n        supports.style = true;\n      }\n      return;\n    }\n\n    // 存在覆盖配置时\n    if (extendsProps) {\n      if (name in extendsProps) {\n        prop = extendsProps[name];\n      }\n    }\n\n    props.push(propConfigToFieldConfig(prop));\n  });\n\n  return {\n    ...metadata,\n    configure: {\n      ...configure,\n      props,\n      supports,\n      component,\n    },\n  };\n}\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconSlot(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M682.325333 135.509333V204.8H819.2v613.376h-614.741333V204.8h136.874666v-69.290667h-206.165333v752.298667h754.346667V135.509333z\" c=\"Q29weXJpZ2h0IChjKSAyMDIwLXByZXNlbnQgQWxpYmFiYSBJbmMu\" />\n      <path d=\"M512 512m-170.325333 0a170.325333 170.325333 0 1 0 340.650666 0 170.325333 170.325333 0 1 0-340.650666 0Z\" />\n    </SVGIcon>\n  );\n}\n\nIconSlot.displayName = 'IconSlot';\n","import {\n  IPublicTypeTransformedComponentMetadata,\n  IPublicTypeFieldConfig,\n  IPublicModelSettingTarget,\n} from '@alilc/lowcode-types';\nimport { IconSlot } from '../icons/slot';\nimport { getConvertedExtraKey } from '@alilc/lowcode-designer';\n\nexport default function (\n  metadata: IPublicTypeTransformedComponentMetadata,\n): IPublicTypeTransformedComponentMetadata {\n  const { componentName, configure = {} } = metadata;\n\n  // 如果已经处理过，不再重新执行一遍\n  if (configure.combined) {\n    return metadata;\n  }\n  if (componentName === 'Leaf') {\n    return {\n      ...metadata,\n      configure: {\n        ...configure,\n        combined: [\n          {\n            name: 'children',\n            title: { type: 'i18n', 'zh-CN': '内容设置', 'en-US': 'Content' },\n            setter: {\n              componentName: 'MixedSetter',\n              props: {\n                // TODO:\n                setters: [\n                  {\n                    componentName: 'StringSetter',\n                    props: {\n                      // TODO: textarea mode\n                      multiline: true,\n                    },\n                    initialValue: '',\n                  },\n                  {\n                    componentName: 'ExpressionSetter',\n                    initialValue: {\n                      type: 'JSExpression',\n                      value: '',\n                    },\n                  },\n                ],\n              },\n            },\n          },\n        ],\n      },\n    };\n  }\n\n  const { props, supports = {} } = configure as any;\n  const isRoot: boolean = componentName === 'Page' || componentName === 'Component';\n  const eventsDefinition: any[] = [];\n  const supportedLifecycles =\n    supports.lifecycles ||\n    (isRoot\n      ? /* [\n          {\n            description: '初始化时',\n            name: 'constructor',\n          },\n          {\n            description: '装载后',\n            name: 'componentDidMount',\n          },\n          {\n            description: '更新时',\n            name: 'componentDidUpdate',\n          },\n          {\n            description: '卸载时',\n            name: 'componentWillUnmount',\n          },\n        ] */ null\n      : null);\n  if (supportedLifecycles) {\n    eventsDefinition.push({\n      type: 'lifeCycleEvent',\n      title: '生命周期',\n      list: supportedLifecycles.map((event: any) => (typeof event === 'string' ? { name: event } : event)),\n    });\n  }\n  if (supports.events) {\n    eventsDefinition.push({\n      type: 'events',\n      title: '事件',\n      list: (supports.events || []).map((event: any) => (typeof event === 'string' ? { name: event } : event)),\n    });\n  }\n  //  通用设置\n  let propsGroup = props ? [...props] : [];\n  const basicInfo: any = {};\n  if (componentName === 'Slot') {\n    if (!configure.component) {\n      configure.component = {\n        isContainer: true,\n      };\n    } else if (typeof configure.component === 'object') {\n      configure.component.isContainer = true;\n    }\n    basicInfo.icon = IconSlot;\n    propsGroup = [\n      {\n        name: getConvertedExtraKey('title'),\n        title: {\n          type: 'i18n',\n          'en-US': 'Slot Title',\n          'zh-CN': '插槽标题',\n        },\n        setter: 'StringSetter',\n        defaultValue: '插槽容器',\n      },\n    ];\n  }\n  // propsGroup.push({\n  //   name: '#generals',\n  //   title: { type: 'i18n', 'zh-CN': '通用', 'en-US': 'General' },\n  //   items: [\n  //     {\n  //       name: 'id',\n  //       title: 'ID',\n  //       setter: 'StringSetter',\n  //     },\n  //     {\n  //       name: 'key',\n  //       title: 'Key',\n  //       // todo: use Mixin\n  //       setter: 'StringSetter',\n  //     },\n  //     {\n  //       name: 'ref',\n  //       title: 'Ref',\n  //       setter: 'StringSetter',\n  //     },\n  //     {\n  //       name: '!more',\n  //       title: '更多',\n  //       setter: 'PropertiesSetter',\n  //     },\n  //   ],\n  // });\n  const stylesGroup: IPublicTypeFieldConfig[] = [];\n  const advancedGroup: IPublicTypeFieldConfig[] = [];\n  if (propsGroup) {\n    let l = propsGroup.length;\n    while (l-- > 0) {\n      const item = propsGroup[l];\n      // if (item.type === 'group' && (item.title === '高级' || item.title?.label === '高级')) {\n      //   advancedGroup = item.items || [];\n      //   propsGroup.splice(l, 1);\n      // }\n      if (\n        item.name === '__style__' ||\n        item.name === 'style' ||\n        item.name === 'containerStyle' ||\n        item.name === 'pageStyle'\n      ) {\n        propsGroup.splice(l, 1);\n        stylesGroup.push(item);\n        if (item.extraProps?.defaultCollapsed && item.name !== 'containerStyle') {\n          item.extraProps.defaultCollapsed = false;\n        }\n      }\n    }\n  }\n  const combined: IPublicTypeFieldConfig[] = [\n    {\n      title: { type: 'i18n', 'zh-CN': '属性', 'en-US': 'Props' },\n      name: '#props',\n      items: propsGroup,\n    },\n  ];\n  if (supports.className) {\n    stylesGroup.push({\n      name: 'className',\n      title: { type: 'i18n', 'zh-CN': '类名绑定', 'en-US': 'ClassName' },\n      setter: 'ClassNameSetter',\n    });\n  }\n  if (supports.style) {\n    stylesGroup.push({\n      name: 'style',\n      title: { type: 'i18n', 'zh-CN': '行内样式', 'en-US': 'Style' },\n      setter: 'StyleSetter',\n      extraProps: {\n        display: 'block',\n      },\n    });\n  }\n  if (stylesGroup.length > 0) {\n    combined.push({\n      name: '#styles',\n      title: { type: 'i18n', 'zh-CN': '样式', 'en-US': 'Styles' },\n      items: stylesGroup,\n    });\n  }\n\n  if (eventsDefinition.length > 0) {\n    combined.push({\n      name: '#events',\n      title: { type: 'i18n', 'zh-CN': '事件', 'en-US': 'Events' },\n      items: [\n        {\n          name: '__events',\n          title: { type: 'i18n', 'zh-CN': '事件设置', 'en-US': 'Events' },\n          setter: {\n            componentName: 'EventsSetter',\n            props: {\n              definition: eventsDefinition,\n            },\n          },\n          getValue(field: IPublicModelSettingTarget, val?: any[]) {\n            return val;\n          },\n\n          setValue(field: IPublicModelSettingTarget, eventData) {\n            const { eventDataList, eventList } = eventData;\n            Array.isArray(eventList) &&\n              eventList.map((item) => {\n                field.parent.clearPropValue(item.name);\n                return item;\n              });\n            Array.isArray(eventDataList) &&\n              eventDataList.map((item) => {\n                field.parent.setPropValue(item.name, {\n                  type: 'JSFunction',\n                  // 需要传下入参\n                  value: `function(){return this.${\n                    item.relatedEventName\n                  }.apply(this,Array.prototype.slice.call(arguments).concat([${\n                    item.paramStr ? item.paramStr : ''\n                  }])) }`,\n                });\n                return item;\n              });\n          },\n        },\n      ],\n    });\n  }\n\n  if (!isRoot) {\n    if (supports.condition !== false) {\n      advancedGroup.push({\n        name: getConvertedExtraKey('condition'),\n        title: { type: 'i18n', 'zh-CN': '是否渲染', 'en-US': 'Condition' },\n        defaultValue: true,\n        setter: [\n          {\n            componentName: 'BoolSetter',\n          },\n          {\n            componentName: 'VariableSetter',\n          },\n        ],\n        extraProps: {\n          display: 'block',\n        },\n      });\n    }\n    if (supports.loop !== false) {\n      advancedGroup.push({\n        name: '#loop',\n        title: { type: 'i18n', 'zh-CN': '循环', 'en-US': 'Loop' },\n        items: [\n          {\n            name: getConvertedExtraKey('loop'),\n            title: { type: 'i18n', 'zh-CN': '循环数据', 'en-US': 'Loop Data' },\n            setter: [\n              {\n                componentName: 'JsonSetter',\n                props: {\n                  label: { type: 'i18n', 'zh-CN': '编辑数据', 'en-US': 'Edit Data' },\n                  defaultValue: '[]',\n                },\n              },\n              {\n                componentName: 'VariableSetter',\n              },\n            ],\n          },\n          {\n            name: getConvertedExtraKey('loopArgs.0'),\n            title: { type: 'i18n', 'zh-CN': '迭代变量名', 'en-US': 'Loop Item' },\n            setter: {\n              componentName: 'StringSetter',\n              props: {\n                placeholder: { type: 'i18n', 'zh-CN': '默认为: item', 'en-US': 'Defaults: item' },\n              },\n            },\n          },\n          {\n            name: getConvertedExtraKey('loopArgs.1'),\n            title: { type: 'i18n', 'zh-CN': '索引变量名', 'en-US': 'Loop Index' },\n            setter: {\n              componentName: 'StringSetter',\n              props: {\n                placeholder: { type: 'i18n', 'zh-CN': '默认为: index', 'en-US': 'Defaults: index' },\n              },\n            },\n          },\n          {\n            name: 'key',\n            title: { type: 'i18n', 'zh-CN': '循环 Key', 'en-US': 'Loop Key' },\n            setter: [\n              {\n                componentName: 'StringSetter',\n              },\n              {\n                componentName: 'VariableSetter',\n              },\n            ],\n          },\n        ],\n        extraProps: {\n          display: 'accordion',\n        },\n      });\n    }\n\n    if (supports.condition !== false || supports.loop !== false) {\n      advancedGroup.push({\n        name: 'key',\n        title: {\n          label: {\n            type: 'i18n',\n            'zh-CN': '渲染唯一标识 (key)',\n            'en-US': 'Render unique identifier (key)',\n          },\n          tip: {\n            type: 'i18n',\n            'zh-CN': '搭配「条件渲染」或「循环渲染」时使用，和 react 组件中的 key 原理相同，点击查看帮助',\n            'en-US': 'Used with 「Conditional Rendering」or「Cycle Rendering」, the same principle as the key in the react component, click to view the help',\n          },\n          docUrl: 'https://www.yuque.com/lce/doc/qm75w3',\n        },\n        setter: [\n          {\n            componentName: 'StringSetter',\n          },\n          {\n            componentName: 'VariableSetter',\n          },\n        ],\n        extraProps: {\n          display: 'block',\n        },\n      });\n    }\n  }\n  if (advancedGroup.length > 0) {\n    combined.push({\n      name: '#advanced',\n      title: { type: 'i18n', 'zh-CN': '高级', 'en-US': 'Advanced' },\n      items: advancedGroup,\n    });\n  }\n\n  return {\n    ...metadata,\n    ...basicInfo,\n    configure: {\n      ...configure,\n      combined,\n    },\n  };\n}\n","import parseJSFunc from './transducers/parse-func';\nimport parseProps from './transducers/parse-props';\nimport addonCombine from './transducers/addon-combine';\nimport { IPublicModelPluginContext } from '@alilc/lowcode-types';\n\nexport const registerDefaults = (ctx: IPublicModelPluginContext) => {\n  const { material } = ctx;\n  return {\n    init() {\n      // parseFunc\n      material.registerMetadataTransducer(parseJSFunc, 1, 'parse-func');\n\n      // parseProps\n      material.registerMetadataTransducer(parseProps, 5, 'parse-props');\n\n      // addon/platform custom\n      material.registerMetadataTransducer(addonCombine, 10, 'combine-props');\n    },\n  };\n};\n\n\nregisterDefaults.pluginName = '___register_defaults___';\n","import { editorSymbol, skeletonSymbol, designerCabinSymbol, designerSymbol } from '../symbols';\nimport {\n  isFormEvent as innerIsFormEvent,\n  compatibleLegaoSchema as innerCompatibleLegaoSchema,\n  getNodeSchemaById as innerGetNodeSchemaById,\n  transactionManager,\n  isNodeSchema as innerIsNodeSchema,\n  isDragNodeDataObject as innerIsDragNodeDataObject,\n  isDragNodeObject as innerIsDragNodeObject,\n  isDragAnyObject as innerIsDragAnyObject,\n  isLocationChildrenDetail as innerIsLocationChildrenDetail,\n  isNode as innerIsNode,\n  isSettingField,\n  isSettingField as innerIsSettingField,\n} from '@alilc/lowcode-utils';\nimport {\n  IPublicTypeNodeSchema,\n  IPublicEnumTransitionType,\n  IPublicEnumTransformStage as InnerTransitionStage,\n  IPublicApiCommonDesignerCabin,\n  IPublicApiCommonSkeletonCabin,\n  IPublicApiCommonUtils,\n  IPublicApiCommon,\n  IPublicEnumDragObjectType as InnerDragObjectType,\n  IPublicTypeLocationDetailType as InnerLocationDetailType,\n  IPublicApiCommonEditorCabin,\n  IPublicModelDragon,\n} from '@alilc/lowcode-types';\nimport {\n  SettingField as InnerSettingField,\n  LiveEditing as InnerLiveEditing,\n  isShaken as innerIsShaken,\n  contains as innerContains,\n  ScrollTarget as InnerScrollTarget,\n  getConvertedExtraKey as innerGetConvertedExtraKey,\n  getOriginalExtraKey as innerGetOriginalExtraKey,\n  IDesigner,\n} from '@alilc/lowcode-designer';\nimport {\n  Skeleton as InnerSkeleton,\n  createSettingFieldView as innerCreateSettingFieldView,\n  PopupContext as InnerPopupContext,\n  PopupPipe as InnerPopupPipe,\n  Workbench as InnerWorkbench,\n} from '@alilc/lowcode-editor-skeleton';\nimport {\n  Editor,\n  Title as InnerTitle,\n  Tip as InnerTip,\n  shallowIntl as innerShallowIntl,\n  createIntl as innerCreateIntl,\n  intl as innerIntl,\n  globalLocale as innerGlobalLocale,\n  obx as innerObx,\n  observable as innerObservable,\n  makeObservable as innerMakeObservable,\n  untracked as innerUntracked,\n  computed as innerComputed,\n  observer as innerObserver,\n} from '@alilc/lowcode-editor-core';\nimport { Dragon as ShellDragon } from '../model';\nimport { ReactNode, Component } from 'react';\n\nclass DesignerCabin implements IPublicApiCommonDesignerCabin {\n  private readonly [editorSymbol]: Editor;\n\n  /**\n   * @deprecated\n   */\n  readonly [designerCabinSymbol]: any;\n\n  private get [designerSymbol](): IDesigner {\n    return this[editorSymbol].get('designer') as IDesigner;\n  }\n\n  constructor(editor: Editor) {\n    this[editorSymbol] = editor;\n    this[designerCabinSymbol] = {\n      isDragNodeObject: innerIsDragNodeObject,\n      isDragAnyObject: innerIsDragAnyObject,\n      isShaken: innerIsShaken,\n      contains: innerContains,\n      LocationDetailType: InnerLocationDetailType,\n      isLocationChildrenDetail: innerIsLocationChildrenDetail,\n      ScrollTarget: InnerScrollTarget,\n      isSettingField: innerIsSettingField,\n      TransformStage: InnerTransitionStage,\n      SettingField: InnerSettingField,\n      LiveEditing: InnerLiveEditing,\n      DragObjectType: InnerDragObjectType,\n      isDragNodeDataObject: innerIsDragNodeDataObject,\n      isNode: innerIsNode,\n    };\n  }\n\n  /**\n   * 是否是 SettingField 实例\n   * @deprecated use same function from @alilc/lowcode-utils directly\n   */\n  isSettingField(obj: any): boolean {\n    return isSettingField(obj);\n  }\n\n  /**\n   * 转换类型枚举对象，包含 init / upgrade / render 等类型\n   * [参考](https://github.com/alibaba/lowcode-engine/blob/main/packages/types/src/transform-stage.ts)\n   * @deprecated use { TransformStage } from '@alilc/lowcode-types' instead\n   */\n  get TransformStage() {\n    return InnerTransitionStage;\n  }\n\n  /**\n   * @deprecated\n   */\n  get SettingField() {\n    return InnerSettingField;\n  }\n\n  /**\n   * @deprecated\n   */\n  get LiveEditing() {\n    return InnerLiveEditing;\n  }\n\n  /**\n   * @deprecated\n   */\n  get DragObjectType() {\n    return InnerDragObjectType;\n  }\n\n  /**\n   * @deprecated\n   */\n  isDragNodeDataObject(obj: any): boolean {\n    return innerIsDragNodeDataObject(obj);\n  }\n\n  /**\n   * @deprecated\n   */\n  isNode(node: any): boolean {\n    return innerIsNode(node);\n  }\n\n  /**\n   * @deprecated please use canvas.dragon\n   */\n  get dragon(): IPublicModelDragon | null {\n    return ShellDragon.create(this[designerSymbol].dragon, false);\n  }\n}\n\nclass SkeletonCabin implements IPublicApiCommonSkeletonCabin {\n  private readonly [skeletonSymbol]: InnerSkeleton;\n\n  constructor(skeleton: InnerSkeleton) {\n    this[skeletonSymbol] = skeleton;\n  }\n\n  get Workbench(): any {\n    const innerSkeleton = this[skeletonSymbol];\n    return (props: any) => <InnerWorkbench {...props} skeleton={innerSkeleton} />;\n  }\n\n  /**\n   * @deprecated\n   */\n  createSettingFieldView(item: any, field: any) {\n    return innerCreateSettingFieldView(item, field);\n  }\n\n  /**\n   * @deprecated\n   */\n  get PopupContext(): any {\n    return InnerPopupContext;\n  }\n\n  /**\n   * @deprecated\n   */\n   get PopupPipe(): any {\n    return InnerPopupPipe;\n  }\n}\n\nclass Utils implements IPublicApiCommonUtils {\n  isNodeSchema(data: any): data is IPublicTypeNodeSchema {\n    return innerIsNodeSchema(data);\n  }\n\n  isFormEvent(e: KeyboardEvent | MouseEvent): boolean {\n    return innerIsFormEvent(e);\n  }\n\n  /**\n   * @deprecated this is a legacy api, do not use this if not using is already\n   */\n  compatibleLegaoSchema(props: any): any {\n    return innerCompatibleLegaoSchema(props);\n  }\n\n  getNodeSchemaById(\n      schema: IPublicTypeNodeSchema,\n      nodeId: string,\n    ): IPublicTypeNodeSchema | undefined {\n    return innerGetNodeSchemaById(schema, nodeId);\n  }\n\n  getConvertedExtraKey(key: string): string {\n    return innerGetConvertedExtraKey(key);\n  }\n\n  getOriginalExtraKey(key: string): string {\n    return innerGetOriginalExtraKey(key);\n  }\n\n  executeTransaction(\n      fn: () => void,\n      type: IPublicEnumTransitionType = IPublicEnumTransitionType.REPAINT,\n    ): void {\n    transactionManager.executeTransaction(fn, type);\n  }\n\n  createIntl(instance: string | object): {\n      intlNode(id: string, params?: object): ReactNode;\n      intl(id: string, params?: object): string;\n      getLocale(): string;\n      setLocale(locale: string): void;\n    } {\n    return innerCreateIntl(instance);\n  }\n}\n\nclass EditorCabin implements IPublicApiCommonEditorCabin {\n  private readonly [editorSymbol]: Editor;\n\n  constructor(editor: Editor) {\n    this[editorSymbol] = editor;\n  }\n\n  /**\n   * Title 组件\n   * @experimental unstable API, pay extra caution when trying to use this\n   */\n  get Title(): Component {\n    return InnerTitle;\n  }\n\n  /**\n   * Tip 组件\n   * @experimental unstable API, pay extra caution when trying to use this\n   */\n  get Tip(): Component {\n    return InnerTip;\n  }\n\n  /**\n   * @deprecated\n   */\n  shallowIntl(data: any): any {\n    return innerShallowIntl(data);\n  }\n\n  /**\n   * @deprecated use common.utils.createIntl instead\n   */\n  createIntl(instance: any): any {\n    return innerCreateIntl(instance);\n  }\n\n  /**\n   * @deprecated\n   */\n  intl(data: any, params?: object): any {\n    return innerIntl(data, params);\n  }\n\n  /**\n   * @deprecated\n   */\n  createSetterContent = (setter: any, props: Record<string, any>): ReactNode => {\n    const setters = this[editorSymbol].get('setters');\n    return setters.createSetterContent(setter, props);\n  };\n\n  /**\n   * @deprecated use common.utils.createIntl instead\n   */\n  get globalLocale(): any {\n    return innerGlobalLocale;\n  }\n\n  /**\n   * @deprecated\n   */\n  get obx() {\n    return innerObx;\n  }\n\n  /**\n   * @deprecated\n   */\n  get observable() {\n    return innerObservable;\n  }\n\n  /**\n   * @deprecated\n   */\n  makeObservable(target: any, annotations: any, options: any) {\n    return innerMakeObservable(target, annotations, options);\n  }\n\n  /**\n   * @deprecated\n   */\n  untracked(action: any) {\n    return innerUntracked(action);\n  }\n\n  /**\n   * @deprecated\n   */\n  get computed() {\n    return innerComputed;\n  }\n\n  /**\n   * @deprecated\n   */\n  observer(component: any) {\n    return innerObserver(component);\n  }\n}\n\nexport class Common implements IPublicApiCommon {\n  private readonly __designerCabin: any;\n  private readonly __skeletonCabin: any;\n  private readonly __editorCabin: any;\n  private readonly __utils: Utils;\n\n  constructor(editor: Editor, skeleton: InnerSkeleton) {\n    this.__designerCabin = new DesignerCabin(editor);\n    this.__skeletonCabin = new SkeletonCabin(skeleton);\n    this.__editorCabin = new EditorCabin(editor);\n    this.__utils = new Utils();\n  }\n\n  get utils(): any {\n    return this.__utils;\n  }\n\n  /**\n   * 历史原因导致此处设计不合理，慎用。\n   * this load of crap will be removed in some future versions, don`t use it.\n   * @deprecated\n   */\n  get editorCabin(): any {\n    return this.__editorCabin;\n  }\n\n  /**\n   * 历史原因导致此处设计不合理，慎用。\n   * this load of crap will be removed in some future versions, don`t use it.\n   * @deprecated use canvas api instead\n   */\n  get designerCabin(): any {\n    return this.__designerCabin;\n  }\n\n  get skeletonCabin(): any {\n    return this.__skeletonCabin;\n  }\n\n  /**\n   * 历史原因导致此处设计不合理，慎用。\n   * this load of crap will be removed in some future versions, don`t use it.\n   * @deprecated use { TransformStage } from '@alilc/lowcode-types' instead\n   */\n  get objects(): any {\n    return {\n      TransformStage: InnerTransitionStage,\n    };\n  }\n}","import { Editor as InnerEditor, EventBus } from '@alilc/lowcode-editor-core';\nimport { getLogger, isPluginEventName } from '@alilc/lowcode-utils';\nimport { IPublicApiEvent, IPublicTypeDisposable } from '@alilc/lowcode-types';\n\nconst logger = getLogger({ level: 'warn', bizName: 'shell-event' });\n\ntype EventOptions = {\n  prefix: string;\n};\n\nconst eventBusSymbol = Symbol('eventBus');\n\nexport class Event implements IPublicApiEvent {\n  private readonly [eventBusSymbol]: EventBus;\n  private readonly options: EventOptions;\n\n  constructor(eventBus: EventBus, options: EventOptions, public workspaceMode = false) {\n    this[eventBusSymbol] = eventBus;\n    this.options = options;\n    if (!this.options.prefix) {\n      logger.warn('prefix is required while initializing Event');\n    }\n  }\n\n  /**\n   * 监听事件\n   * @param event 事件名称\n   * @param listener 事件回调\n   */\n  on(event: string, listener: (...args: any[]) => void): IPublicTypeDisposable {\n    if (isPluginEventName(event)) {\n      return this[eventBusSymbol].on(event, listener);\n    } else {\n      logger.warn(`fail to monitor on event ${event}, event should have a prefix like 'somePrefix:eventName'`);\n      return () => {};\n    }\n  }\n\n  /**\n   * 取消监听事件\n   * @param event 事件名称\n   * @param listener 事件回调\n   */\n  off(event: string, listener: (...args: any[]) => void) {\n    this[eventBusSymbol].off(event, listener);\n  }\n\n  /**\n   * 触发事件\n   * @param event 事件名称\n   * @param args 事件参数\n   * @returns\n   */\n  emit(event: string, ...args: any[]) {\n    if (!this.options.prefix) {\n      logger.warn('Event#emit has been forbidden while prefix is not specified');\n      return;\n    }\n    this[eventBusSymbol].emit(`${this.options.prefix}:${event}`, ...args);\n  }\n\n  /**\n   * DO NOT USE if u fully understand what this method does.\n   * @param event\n   * @param args\n   */\n  __internalEmit__(event: string, ...args: unknown[]) {\n    this[eventBusSymbol].emit(event, ...args);\n  }\n}\n\nexport function getEvent(editor: InnerEditor, options: any = { prefix: 'common' }) {\n  return new Event(editor.eventBus, options);\n}\n","import { globalContext, Hotkey as InnerHotkey } from '@alilc/lowcode-editor-core';\nimport { hotkeySymbol } from '../symbols';\nimport { IPublicTypeDisposable, IPublicTypeHotkeyCallback, IPublicTypeHotkeyCallbacks, IPublicApiHotkey } from '@alilc/lowcode-types';\n\nconst innerHotkeySymbol = Symbol('innerHotkey');\n\nexport class Hotkey implements IPublicApiHotkey {\n  private readonly [innerHotkeySymbol]: InnerHotkey;\n  get [hotkeySymbol](): InnerHotkey {\n    if (this.workspaceMode) {\n      return this[innerHotkeySymbol];\n    }\n    const workspace = globalContext.get('workspace');\n    if (workspace.isActive) {\n      return workspace.window.innerHotkey;\n    }\n\n    return this[innerHotkeySymbol];\n  }\n\n  constructor(hotkey: InnerHotkey, readonly workspaceMode: boolean = false) {\n    this[innerHotkeySymbol] = hotkey;\n  }\n\n  get callbacks(): IPublicTypeHotkeyCallbacks {\n    return this[hotkeySymbol].callBacks;\n  }\n\n  /**\n   * @deprecated\n   */\n  get callBacks() {\n    return this.callbacks;\n  }\n\n  /**\n   * 绑定快捷键\n   * @param combos 快捷键，格式如：['command + s'] 、['ctrl + shift + s'] 等\n   * @param callback 回调函数\n   * @param action\n   * @returns\n   */\n  bind(\n      combos: string[] | string,\n      callback: IPublicTypeHotkeyCallback,\n      action?: string,\n    ): IPublicTypeDisposable {\n    this[hotkeySymbol].bind(combos, callback, action);\n    return () => {\n      this[hotkeySymbol].unbind(combos, callback, action);\n    };\n  }\n}","\nimport { getLogger } from '@alilc/lowcode-utils';\nimport { IPublicApiLogger, ILoggerOptions } from '@alilc/lowcode-types';\n\nconst innerLoggerSymbol = Symbol('logger');\n\nexport class Logger implements IPublicApiLogger {\n  private readonly [innerLoggerSymbol]: any;\n\n  constructor(options: ILoggerOptions) {\n    this[innerLoggerSymbol] = getLogger(options as any);\n  }\n\n  /**\n   * debug info\n   */\n  debug(...args: any | any[]): void {\n    this[innerLoggerSymbol].debug(...args);\n  }\n\n  /**\n   * normal info output\n   */\n  info(...args: any | any[]): void {\n    this[innerLoggerSymbol].info(...args);\n  }\n\n  /**\n   * warning info output\n   */\n  warn(...args: any | any[]): void {\n    this[innerLoggerSymbol].warn(...args);\n  }\n\n  /**\n   * error info output\n   */\n  error(...args: any | any[]): void {\n    this[innerLoggerSymbol].error(...args);\n  }\n\n  /**\n   * normal log output\n   */\n  log(...args: any | any[]): void {\n    this[innerLoggerSymbol].log(...args);\n  }\n}","import { globalContext } from '@alilc/lowcode-editor-core';\nimport {\n  IDesigner,\n  isComponentMeta,\n} from '@alilc/lowcode-designer';\nimport { IPublicTypeAssetsJson } from '@alilc/lowcode-utils';\nimport {\n  IPublicTypeComponentAction,\n  IPublicTypeComponentMetadata,\n  IPublicApiMaterial,\n  IPublicTypeMetadataTransducer,\n  IPublicModelComponentMeta,\n  IPublicTypeNpmInfo,\n  IPublicModelEditor,\n  IPublicTypeDisposable,\n} from '@alilc/lowcode-types';\nimport { Workspace as InnerWorkspace } from '@alilc/lowcode-workspace';\nimport { editorSymbol, designerSymbol } from '../symbols';\nimport { ComponentMeta as ShellComponentMeta } from '../model';\nimport { ComponentType } from 'react';\n\nconst innerEditorSymbol = Symbol('editor');\nexport class Material implements IPublicApiMaterial {\n  private readonly [innerEditorSymbol]: IPublicModelEditor;\n\n  get [editorSymbol](): IPublicModelEditor {\n    if (this.workspaceMode) {\n      return this[innerEditorSymbol];\n    }\n    const workspace: InnerWorkspace = globalContext.get('workspace');\n    if (workspace.isActive) {\n      return workspace.window.editor;\n    }\n\n    return this[innerEditorSymbol];\n  }\n\n  get [designerSymbol](): IDesigner {\n    return this[editorSymbol].get('designer')!;\n  }\n\n  constructor(editor: IPublicModelEditor, readonly workspaceMode: boolean = false) {\n    this[innerEditorSymbol] = editor;\n  }\n\n  /**\n   * 获取组件 map 结构\n   */\n  get componentsMap(): { [key: string]: IPublicTypeNpmInfo | ComponentType<any> | object } {\n    return this[designerSymbol].componentsMap;\n  }\n\n  /**\n   * 设置「资产包」结构\n   * @param assets\n   * @returns\n   */\n  async setAssets(assets: IPublicTypeAssetsJson) {\n    return await this[editorSymbol].setAssets(assets);\n  }\n\n  /**\n   * 获取「资产包」结构\n   * @returns\n   */\n  getAssets() {\n    return this[editorSymbol].get('assets');\n  }\n\n  /**\n   * 加载增量的「资产包」结构，该增量包会与原有的合并\n   * @param incrementalAssets\n   * @returns\n   */\n  loadIncrementalAssets(incrementalAssets: IPublicTypeAssetsJson) {\n    return this[designerSymbol].loadIncrementalAssets(incrementalAssets);\n  }\n\n  /**\n   * 注册物料元数据管道函数\n   * @param transducer\n   * @param level\n   * @param id\n   */\n  registerMetadataTransducer = (\n    transducer: IPublicTypeMetadataTransducer,\n    level?: number,\n    id?: string | undefined,\n  ) => {\n    this[designerSymbol].componentActions.registerMetadataTransducer(transducer, level, id);\n  };\n\n  /**\n   * 获取所有物料元数据管道函数\n   * @returns\n   */\n  getRegisteredMetadataTransducers() {\n    return this[designerSymbol].componentActions.getRegisteredMetadataTransducers();\n  }\n\n  /**\n   * 获取指定名称的物料元数据\n   * @param componentName\n   * @returns\n   */\n  getComponentMeta(componentName: string): IPublicModelComponentMeta | null {\n    const innerMeta = this[designerSymbol].getComponentMeta(componentName);\n    return ShellComponentMeta.create(innerMeta);\n  }\n\n  /**\n   * create an instance of ComponentMeta by given metadata\n   * @param metadata\n   * @returns\n   */\n  createComponentMeta(metadata: IPublicTypeComponentMetadata) {\n    return ShellComponentMeta.create(this[designerSymbol].createComponentMeta(metadata));\n  }\n\n  /**\n   * test if the given object is a ComponentMeta instance or not\n   * @param obj\n   * @returns\n   */\n  isComponentMeta(obj: any) {\n    return isComponentMeta(obj);\n  }\n\n  /**\n   * 获取所有已注册的物料元数据\n   * @returns\n   */\n  getComponentMetasMap(): Map<string, IPublicModelComponentMeta> {\n    const map = new Map<string, IPublicModelComponentMeta>();\n    const originalMap = this[designerSymbol].getComponentMetasMap();\n    for (let componentName of originalMap.keys()) {\n      map.set(componentName, this.getComponentMeta(componentName)!);\n    }\n    return map;\n  }\n\n  /**\n   * 在设计器辅助层增加一个扩展 action\n   * @param action\n   */\n  addBuiltinComponentAction(action: IPublicTypeComponentAction) {\n    this[designerSymbol].componentActions.addBuiltinComponentAction(action);\n  }\n\n  /**\n   * 移除设计器辅助层的指定 action\n   * @param name\n   */\n  removeBuiltinComponentAction(name: string) {\n    this[designerSymbol].componentActions.removeBuiltinComponentAction(name);\n  }\n\n  /**\n   * 修改已有的设计器辅助层的指定 action\n   * @param actionName\n   * @param handle\n   */\n  modifyBuiltinComponentAction(\n      actionName: string,\n      handle: (action: IPublicTypeComponentAction) => void,\n    ) {\n    this[designerSymbol].componentActions.modifyBuiltinComponentAction(actionName, handle);\n  }\n\n  /**\n   * 监听 assets 变化的事件\n   * @param fn\n   */\n  onChangeAssets(fn: () => void): IPublicTypeDisposable {\n    const dispose = [\n      // 设置 assets，经过 setAssets 赋值\n      this[editorSymbol].onGot('assets', fn),\n      // 增量设置 assets，经过 loadIncrementalAssets 赋值\n      this[editorSymbol].eventBus.on('designer.incrementalAssetsReady', fn),\n    ];\n\n    return () => {\n      dispose.forEach(d => d && d());\n    };\n  }\n}\n","import {\n  LowCodePluginManager,\n} from '@alilc/lowcode-designer';\nimport { globalContext } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicApiPlugins,\n  IPublicModelPluginInstance,\n  IPublicTypePlugin,\n  IPublicTypePluginRegisterOptions,\n  IPublicTypePreferenceValueType,\n} from '@alilc/lowcode-types';\nimport { PluginInstance as ShellPluginInstance } from '../model';\nimport { pluginsSymbol } from '../symbols';\n\nconst innerPluginsSymbol = Symbol('plugin');\nexport class Plugins implements IPublicApiPlugins {\n  private readonly [innerPluginsSymbol]: LowCodePluginManager;\n  get [pluginsSymbol](): LowCodePluginManager {\n    if (this.workspaceMode) {\n      return this[innerPluginsSymbol];\n    }\n    const workspace = globalContext.get('workspace');\n    if (workspace.isActive) {\n      return workspace.window.innerPlugins;\n    }\n\n    return this[innerPluginsSymbol];\n  }\n\n  constructor(plugins: LowCodePluginManager, public workspaceMode: boolean = false) {\n    this[innerPluginsSymbol] = plugins;\n  }\n\n  async register(\n    pluginModel: IPublicTypePlugin,\n    options?: any,\n    registerOptions?: IPublicTypePluginRegisterOptions,\n  ): Promise<void> {\n    await this[pluginsSymbol].register(pluginModel, options, registerOptions);\n  }\n\n  async init(registerOptions: any) {\n    await this[pluginsSymbol].init(registerOptions);\n  }\n\n  getPluginPreference(\n      pluginName: string,\n    ): Record<string, IPublicTypePreferenceValueType> | null | undefined {\n    return this[pluginsSymbol].getPluginPreference(pluginName);\n  }\n\n  get(pluginName: string): IPublicModelPluginInstance | null {\n    const instance = this[pluginsSymbol].get(pluginName);\n    if (instance) {\n      return new ShellPluginInstance(instance);\n    }\n\n    return null;\n  }\n\n  getAll() {\n    return this[pluginsSymbol].getAll()?.map((d) => new ShellPluginInstance(d));\n  }\n\n  has(pluginName: string) {\n    return this[pluginsSymbol].has(pluginName);\n  }\n\n  delete(pluginName: string) {\n    this[pluginsSymbol].delete(pluginName);\n  }\n\n  toProxy() {\n    return new Proxy(this, {\n      get(target, prop, receiver) {\n        const _target = target[pluginsSymbol];\n        if (_target.pluginsMap.has(prop as string)) {\n          // 禁用态的插件，直接返回 undefined\n          if (_target.pluginsMap.get(prop as string)!.disabled) {\n            return undefined;\n          }\n          return _target.pluginsMap.get(prop as string)?.toProxy();\n        }\n        return Reflect.get(target, prop, receiver);\n      },\n    });\n  }\n}\n","import {\n  BuiltinSimulatorHost,\n} from '@alilc/lowcode-designer';\nimport { simulatorHostSymbol, nodeSymbol } from '../symbols';\nimport { IPublicApiSimulatorHost, IPublicModelNode } from '@alilc/lowcode-types';\n\nexport class SimulatorHost implements IPublicApiSimulatorHost {\n  private readonly [simulatorHostSymbol]: BuiltinSimulatorHost;\n\n  constructor(simulator: BuiltinSimulatorHost) {\n    this[simulatorHostSymbol] = simulator;\n  }\n\n  static create(host: BuiltinSimulatorHost): IPublicApiSimulatorHost | null {\n    if (!host) return null;\n    return new SimulatorHost(host);\n  }\n\n  /**\n   * 获取 contentWindow\n   */\n  get contentWindow(): Window | undefined {\n    return this[simulatorHostSymbol].contentWindow;\n  }\n\n  /**\n   * 获取 contentDocument\n   */\n  get contentDocument(): Document | undefined {\n    return this[simulatorHostSymbol].contentDocument;\n  }\n\n  get renderer(): any {\n    return this[simulatorHostSymbol].renderer;\n  }\n\n  /**\n   * 设置 host 配置值\n   * @param key\n   * @param value\n   */\n  set(key: string, value: any): void {\n    this[simulatorHostSymbol].set(key, value);\n  }\n\n  /**\n   * 获取 host 配置值\n   * @param key\n   * @returns\n   */\n  get(key: string): any {\n    return this[simulatorHostSymbol].get(key);\n  }\n\n  /**\n   * scroll to specific node\n   * @param node\n   */\n  scrollToNode(node: IPublicModelNode): void {\n    this[simulatorHostSymbol].scrollToNode((node as any)[nodeSymbol]);\n  }\n\n  /**\n   * 刷新渲染画布\n   */\n  rerender(): void {\n    this[simulatorHostSymbol].rerender();\n  }\n}\n","import {\n  BuiltinSimulatorHost,\n  IProject as InnerProject,\n} from '@alilc/lowcode-designer';\nimport { globalContext } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicTypeRootSchema,\n  IPublicTypeProjectSchema,\n  IPublicModelEditor,\n  IPublicApiProject,\n  IPublicApiSimulatorHost,\n  IPublicModelDocumentModel,\n  IPublicTypePropsTransducer,\n  IPublicEnumTransformStage,\n  IPublicTypeDisposable,\n} from '@alilc/lowcode-types';\nimport { DocumentModel as ShellDocumentModel } from '../model';\nimport { SimulatorHost } from './simulator-host';\nimport { editorSymbol, projectSymbol, simulatorHostSymbol, documentSymbol } from '../symbols';\n\nconst innerProjectSymbol = Symbol('innerProject');\nexport class Project implements IPublicApiProject {\n  private readonly [innerProjectSymbol]: InnerProject;\n  private [simulatorHostSymbol]: BuiltinSimulatorHost;\n  get [projectSymbol](): InnerProject {\n    if (this.workspaceMode) {\n      return this[innerProjectSymbol];\n    }\n    const workspace = globalContext.get('workspace');\n    if (workspace.isActive) {\n      return workspace.window.innerProject;\n    }\n\n    return this[innerProjectSymbol];\n  }\n\n  get [editorSymbol](): IPublicModelEditor {\n    return this[projectSymbol]?.designer.editor;\n  }\n\n  constructor(project: InnerProject, public workspaceMode: boolean = false) {\n    this[innerProjectSymbol] = project;\n  }\n\n  static create(project: InnerProject) {\n    return new Project(project);\n  }\n\n  /**\n   * 获取当前的 document\n   * @returns\n   */\n  get currentDocument(): IPublicModelDocumentModel | null {\n    return this.getCurrentDocument();\n  }\n\n  /**\n   * 获取当前 project 下所有 documents\n   * @returns\n   */\n  get documents(): IPublicModelDocumentModel[] {\n    return this[projectSymbol].documents.map((doc) => ShellDocumentModel.create(doc)!);\n  }\n\n  /**\n   * 获取模拟器的 host\n   */\n  get simulatorHost(): IPublicApiSimulatorHost | null {\n    return SimulatorHost.create(this[projectSymbol].simulator as any || this[simulatorHostSymbol]);\n  }\n\n  /**\n   * @deprecated use .simulatorHost instead.\n   */\n  get simulator() {\n    return this.simulatorHost;\n  }\n\n  /**\n   * 打开一个 document\n   * @param doc\n   * @returns\n   */\n  openDocument(doc?: string | IPublicTypeRootSchema | undefined) {\n    const documentModel = this[projectSymbol].open(doc);\n    if (!documentModel) {\n      return null;\n    }\n    return ShellDocumentModel.create(documentModel);\n  }\n\n  /**\n   * 创建一个 document\n   * @param data\n   * @returns\n   */\n  createDocument(data?: IPublicTypeRootSchema): IPublicModelDocumentModel | null {\n    const doc = this[projectSymbol].createDocument(data);\n    return ShellDocumentModel.create(doc);\n  }\n\n  /**\n   * 删除一个 document\n   * @param doc\n   */\n  removeDocument(doc: IPublicModelDocumentModel) {\n    this[projectSymbol].removeDocument((doc as any)[documentSymbol]);\n  }\n\n  /**\n   * 根据 fileName 获取 document\n   * @param fileName\n   * @returns\n   */\n  getDocumentByFileName(fileName: string): IPublicModelDocumentModel | null {\n    const innerDocumentModel = this[projectSymbol].getDocumentByFileName(fileName);\n    return ShellDocumentModel.create(innerDocumentModel);\n  }\n\n  /**\n   * 根据 id 获取 document\n   * @param id\n   * @returns\n   */\n  getDocumentById(id: string): IPublicModelDocumentModel | null {\n    return ShellDocumentModel.create(this[projectSymbol].getDocument(id));\n  }\n\n  /**\n   * 导出 project\n   * @returns\n   */\n  exportSchema(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Render) {\n    return this[projectSymbol].getSchema(stage);\n  }\n\n  /**\n   * 导入 project\n   * @param schema 待导入的 project 数据\n   */\n  importSchema(schema?: IPublicTypeProjectSchema): void {\n    this[projectSymbol].load(schema, true);\n  }\n\n  /**\n   * 获取当前的 document\n   * @returns\n   */\n  getCurrentDocument(): IPublicModelDocumentModel | null {\n    return ShellDocumentModel.create(this[projectSymbol].currentDocument);\n  }\n\n  /**\n   * 增加一个属性的管道处理函数\n   * @param transducer\n   * @param stage\n   */\n  addPropsTransducer(\n      transducer: IPublicTypePropsTransducer,\n      stage: IPublicEnumTransformStage,\n    ): void {\n    this[projectSymbol].designer.addPropsReducer(transducer, stage);\n  }\n\n  /**\n   * 绑定删除文档事件\n   * @param fn\n   * @returns\n   */\n  onRemoveDocument(fn: (data: { id: string}) => void): IPublicTypeDisposable {\n    return this[editorSymbol].eventBus.on(\n        'designer.document.remove',\n        (data: { id: string }) => fn(data),\n      );\n  }\n\n  /**\n   * 当前 project 内的 document 变更事件\n   */\n  onChangeDocument(fn: (doc: IPublicModelDocumentModel) => void): IPublicTypeDisposable {\n    const offFn = this[projectSymbol].onCurrentDocumentChange((originalDoc) => {\n      fn(ShellDocumentModel.create(originalDoc)!);\n    });\n    if (this[projectSymbol].currentDocument) {\n      fn(ShellDocumentModel.create(this[projectSymbol].currentDocument)!);\n    }\n    return offFn;\n  }\n\n  /**\n   * 当前 project 的模拟器 ready 事件\n   */\n  onSimulatorHostReady(fn: (host: IPublicApiSimulatorHost) => void): IPublicTypeDisposable {\n    const offFn = this[projectSymbol].onSimulatorReady((simulator: BuiltinSimulatorHost) => {\n      fn(SimulatorHost.create(simulator)!);\n    });\n    return offFn;\n  }\n\n  /**\n   * 当前 project 的渲染器 ready 事件\n   */\n  onSimulatorRendererReady(fn: () => void): IPublicTypeDisposable {\n    const offFn = this[projectSymbol].onRendererReady(() => {\n      fn();\n    });\n    return offFn;\n  }\n\n  /**\n   * 设置多语言语料\n   * 数据格式参考 https://github.com/alibaba/lowcode-engine/blob/main/specs/lowcode-spec.md#2434%E5%9B%BD%E9%99%85%E5%8C%96%E5%A4%9A%E8%AF%AD%E8%A8%80%E7%B1%BB%E5%9E%8Baa\n   * @param value object\n   * @returns\n   */\n  setI18n(value: object): void {\n    this[projectSymbol].set('i18n', value);\n  }\n}\n","import { IPublicTypeCustomView, IPublicApiSetters, IPublicTypeRegisteredSetter } from '@alilc/lowcode-types';\nimport { Setters as InnerSetters, globalContext } from '@alilc/lowcode-editor-core';\nimport { ReactNode } from 'react';\n\nconst innerSettersSymbol = Symbol('setters');\nconst settersSymbol = Symbol('setters');\n\nexport class Setters implements IPublicApiSetters {\n  readonly [innerSettersSymbol]: InnerSetters;\n\n  get [settersSymbol](): InnerSetters {\n    if (this.workspaceMode) {\n      return this[innerSettersSymbol];\n    }\n\n    const workspace = globalContext.get('workspace');\n    if (workspace.isActive) {\n      return workspace.window.innerSetters;\n    }\n\n    return this[innerSettersSymbol];\n  }\n\n  constructor(innerSetters: InnerSetters, readonly workspaceMode = false) {\n    this[innerSettersSymbol] = innerSetters;\n  }\n\n  /**\n   * 获取指定 setter\n   * @param type\n   * @returns\n   */\n  getSetter = (type: string) => {\n    return this[settersSymbol].getSetter(type);\n  };\n\n  /**\n   * 获取已注册的所有 settersMap\n   * @returns\n   */\n  getSettersMap(): Map<string, IPublicTypeRegisteredSetter & {\n    type: string;\n  }> {\n    return this[settersSymbol].getSettersMap();\n  }\n\n  /**\n   * 注册一个 setter\n   * @param typeOrMaps\n   * @param setter\n   * @returns\n   */\n  registerSetter = (\n    typeOrMaps: string | { [key: string]: IPublicTypeCustomView | IPublicTypeRegisteredSetter },\n    setter?: IPublicTypeCustomView | IPublicTypeRegisteredSetter | undefined,\n  ) => {\n    return this[settersSymbol].registerSetter(typeOrMaps, setter);\n  };\n\n  createSetterContent = (setter: any, props: Record<string, any>): ReactNode => {\n    return this[settersSymbol].createSetterContent(setter, props);\n  };\n}\n","import { globalContext } from '@alilc/lowcode-editor-core';\nimport {\n  Skeleton as InnerSkeleton,\n  SkeletonEvents,\n} from '@alilc/lowcode-editor-skeleton';\nimport { skeletonSymbol } from '../symbols';\nimport { IPublicApiSkeleton, IPublicTypeDisposable, IPublicTypeSkeletonConfig, IPublicTypeWidgetConfigArea } from '@alilc/lowcode-types';\n\nconst innerSkeletonSymbol = Symbol('skeleton');\nexport class Skeleton implements IPublicApiSkeleton {\n  private readonly [innerSkeletonSymbol]: InnerSkeleton;\n  private readonly pluginName: string;\n\n  get [skeletonSymbol](): InnerSkeleton {\n    if (this.workspaceMode) {\n      return this[innerSkeletonSymbol];\n    }\n    const workspace = globalContext.get('workspace');\n    if (workspace.isActive) {\n      return workspace.window.innerSkeleton;\n    }\n\n    return this[innerSkeletonSymbol];\n  }\n\n  constructor(\n      skeleton: InnerSkeleton,\n      pluginName: string,\n      readonly workspaceMode: boolean = false,\n    ) {\n    this[innerSkeletonSymbol] = skeleton;\n    this.pluginName = pluginName;\n  }\n\n  /**\n   * 增加一个面板实例\n   * @param config\n   * @param extraConfig\n   * @returns\n   */\n  add(config: IPublicTypeSkeletonConfig, extraConfig?: Record<string, any>) {\n    const configWithName = {\n      ...config,\n      pluginName: this.pluginName,\n    };\n    return this[skeletonSymbol].add(configWithName, extraConfig);\n  }\n\n  /**\n   * 移除一个面板实例\n   * @param config\n   * @returns\n   */\n  remove(config: IPublicTypeSkeletonConfig): number | undefined {\n    const { area, name } = config;\n    const skeleton = this[skeletonSymbol];\n    if (!normalizeArea(area)) {\n      return;\n    }\n    skeleton[normalizeArea(area)!].container?.remove(name);\n  }\n\n  /**\n   * 显示面板\n   * @param name\n   */\n  showPanel(name: string) {\n    this[skeletonSymbol].getPanel(name)?.show();\n  }\n\n  /**\n   * 隐藏面板\n   * @param name\n   */\n  hidePanel(name: string) {\n    this[skeletonSymbol].getPanel(name)?.hide();\n  }\n\n  /**\n   * 显示 widget\n   * @param name\n   */\n  showWidget(name: string) {\n    this[skeletonSymbol].getWidget(name)?.show();\n  }\n\n  /**\n   * enable widget\n   * @param name\n   */\n  enableWidget(name: string) {\n    this[skeletonSymbol].getWidget(name)?.enable?.();\n  }\n\n  /**\n   * 隐藏 widget\n   * @param name\n   */\n  hideWidget(name: string) {\n    this[skeletonSymbol].getWidget(name)?.hide();\n  }\n\n  /**\n   * disable widget，不可点击\n   * @param name\n   */\n  disableWidget(name: string) {\n    this[skeletonSymbol].getWidget(name)?.disable?.();\n  }\n\n  /**\n   * show area\n   * @param areaName name of area\n   */\n  showArea(areaName: string) {\n    (this[skeletonSymbol] as any)[areaName]?.show();\n  }\n\n  /**\n   * hide area\n   * @param areaName name of area\n   */\n  hideArea(areaName: string) {\n    (this[skeletonSymbol] as any)[areaName]?.hide();\n  }\n\n  /**\n   * 监听 panel 显示事件\n   * @param listener\n   * @returns\n   */\n  onShowPanel(listener: (...args: any[]) => void): IPublicTypeDisposable {\n    const { editor } = this[skeletonSymbol];\n    editor.eventBus.on(SkeletonEvents.PANEL_SHOW, (name: any, panel: any) => {\n      // 不泄漏 skeleton\n      const { skeleton, ...restPanel } = panel;\n      listener(name, restPanel);\n    });\n    return () => editor.eventBus.off(SkeletonEvents.PANEL_SHOW, listener);\n  }\n\n  /**\n   * 监听 panel 隐藏事件\n   * @param listener\n   * @returns\n   */\n  onHidePanel(listener: (...args: any[]) => void): IPublicTypeDisposable {\n    const { editor } = this[skeletonSymbol];\n    editor.eventBus.on(SkeletonEvents.PANEL_HIDE, (name: any, panel: any) => {\n      // 不泄漏 skeleton\n      const { skeleton, ...restPanel } = panel;\n      listener(name, restPanel);\n    });\n    return () => editor.eventBus.off(SkeletonEvents.PANEL_HIDE, listener);\n  }\n\n  /**\n   * 监听 widget 显示事件\n   * @param listener\n   * @returns\n   */\n  onShowWidget(listener: (...args: any[]) => void): IPublicTypeDisposable {\n    const { editor } = this[skeletonSymbol];\n    editor.eventBus.on(SkeletonEvents.WIDGET_SHOW, (name: any, panel: any) => {\n      // 不泄漏 skeleton\n      const { skeleton, ...rest } = panel;\n      listener(name, rest);\n    });\n    return () => editor.eventBus.off(SkeletonEvents.WIDGET_SHOW, listener);\n  }\n\n  /**\n   * 监听 widget 隐藏事件\n   * @param listener\n   * @returns\n   */\n  onHideWidget(listener: (...args: any[]) => void): IPublicTypeDisposable {\n    const { editor } = this[skeletonSymbol];\n    editor.eventBus.on(SkeletonEvents.WIDGET_HIDE, (name: any, panel: any) => {\n      // 不泄漏 skeleton\n      const { skeleton, ...rest } = panel;\n      listener(name, rest);\n    });\n    return () => editor.eventBus.off(SkeletonEvents.WIDGET_HIDE, listener);\n  }\n}\n\nfunction normalizeArea(area: IPublicTypeWidgetConfigArea | undefined) {\n  switch (area) {\n    case 'leftArea':\n    case 'left':\n      return 'leftArea';\n    case 'rightArea':\n    case 'right':\n      return 'rightArea';\n    case 'topArea':\n    case 'top':\n      return 'topArea';\n    case 'toolbar':\n      return 'toolbar';\n    case 'mainArea':\n    case 'main':\n    case 'center':\n    case 'centerArea':\n      return 'mainArea';\n    case 'bottomArea':\n    case 'bottom':\n      return 'bottomArea';\n    case 'leftFixedArea':\n      return 'leftFixedArea';\n    case 'leftFloatArea':\n      return 'leftFloatArea';\n    case 'stages':\n      return 'stages';\n    default:\n      throw new Error(`${area} not supported`);\n  }\n}\n","import {\n  IPublicApiCanvas,\n  IPublicModelDropLocation,\n  IPublicModelScrollTarget,\n  IPublicTypeScrollable,\n  IPublicModelScroller,\n  IPublicTypeLocationData,\n  IPublicModelEditor,\n  IPublicModelDragon,\n  IPublicModelActiveTracker,\n  IPublicModelClipboard,\n} from '@alilc/lowcode-types';\nimport {\n  ScrollTarget as InnerScrollTarget,\n  IDesigner,\n} from '@alilc/lowcode-designer';\nimport { editorSymbol, designerSymbol, nodeSymbol } from '../symbols';\nimport {\n  Dragon as ShellDragon,\n  DropLocation as ShellDropLocation,\n  ActiveTracker as ShellActiveTracker,\n  Clipboard as ShellClipboard,\n} from '../model';\n\nconst clipboardInstanceSymbol = Symbol('clipboardInstace');\n\nexport class Canvas implements IPublicApiCanvas {\n  private readonly [editorSymbol]: IPublicModelEditor;\n  private readonly [clipboardInstanceSymbol]: IPublicModelClipboard;\n\n  private get [designerSymbol](): IDesigner {\n    return this[editorSymbol].get('designer') as IDesigner;\n  }\n\n  get dragon(): IPublicModelDragon | null {\n    return ShellDragon.create(this[designerSymbol].dragon, this.workspaceMode);\n  }\n\n  get activeTracker(): IPublicModelActiveTracker | null {\n    const activeTracker = new ShellActiveTracker(this[designerSymbol].activeTracker);\n    return activeTracker;\n  }\n\n  get isInLiveEditing(): boolean {\n    return Boolean(this[editorSymbol].get('designer')?.project?.simulator?.liveEditing?.editing);\n  }\n\n  get clipboard(): IPublicModelClipboard {\n    return this[clipboardInstanceSymbol];\n  }\n\n  constructor(editor: IPublicModelEditor, readonly workspaceMode: boolean = false) {\n    this[editorSymbol] = editor;\n    this[clipboardInstanceSymbol] = new ShellClipboard();\n  }\n\n  createScrollTarget(shell: HTMLDivElement): IPublicModelScrollTarget {\n    return new InnerScrollTarget(shell);\n  }\n\n  createScroller(scrollable: IPublicTypeScrollable): IPublicModelScroller {\n    return this[designerSymbol].createScroller(scrollable);\n  }\n\n  /**\n   * 创建插入位置，考虑放到 dragon 中\n   */\n  createLocation(locationData: IPublicTypeLocationData): IPublicModelDropLocation {\n    return this[designerSymbol].createLocation({\n      ...locationData,\n      target: (locationData.target as any)[nodeSymbol],\n    });\n  }\n\n  /**\n   * @deprecated\n   */\n  get dropLocation() {\n    return ShellDropLocation.create((this[designerSymbol] as any).dropLocation || null);\n  }\n}\n","import { IPublicApiWorkspace, IPublicResourceList, IPublicTypeDisposable, IPublicTypeResourceType } from '@alilc/lowcode-types';\nimport { Workspace as InnerWorkSpace } from '@alilc/lowcode-workspace';\nimport { Plugins } from '@alilc/lowcode-shell';\nimport { workspaceSymbol } from '../symbols';\nimport { Resource as ShellResource, Window as ShellWindow } from '../model';\n\nexport class Workspace implements IPublicApiWorkspace {\n  readonly [workspaceSymbol]: InnerWorkSpace;\n\n  constructor(innerWorkspace: InnerWorkSpace) {\n    this[workspaceSymbol] = innerWorkspace;\n  }\n\n  get resourceList() {\n    return this[workspaceSymbol].getResourceList().map((d) => new ShellResource(d));\n  }\n\n  setResourceList(resourceList: IPublicResourceList) {\n    this[workspaceSymbol].setResourceList(resourceList);\n  }\n\n  onResourceListChange(fn: (resourceList: IPublicResourceList) => void): IPublicTypeDisposable {\n    return this[workspaceSymbol].onResourceListChange(fn);\n  }\n\n  get isActive() {\n    return this[workspaceSymbol].isActive;\n  }\n\n  get window() {\n    return new ShellWindow(this[workspaceSymbol].window);\n  }\n\n  registerResourceType(resourceTypeModel: IPublicTypeResourceType): void {\n    this[workspaceSymbol].registerResourceType(resourceTypeModel);\n  }\n\n  openEditorWindow(resourceName: string, title: string, extra: object, viewName?: string) {\n    this[workspaceSymbol].openEditorWindow(resourceName, title, extra, viewName);\n  }\n\n  openEditorWindowById(id: string) {\n    this[workspaceSymbol].openEditorWindowById(id);\n  }\n\n  removeEditorWindow(resourceName: string, title: string) {\n    this[workspaceSymbol].removeEditorWindow(resourceName, title);\n  }\n\n  removeEditorWindowById(id: string) {\n    this[workspaceSymbol].removeEditorWindowById(id);\n  }\n\n  get plugins() {\n    return new Plugins(this[workspaceSymbol].plugins, true);\n  }\n\n  get windows() {\n    return this[workspaceSymbol].windows.map((d) => new ShellWindow(d));\n  }\n\n  onChangeWindows(fn: () => void): IPublicTypeDisposable {\n    return this[workspaceSymbol].onChangeWindows(fn);\n  }\n\n  onChangeActiveWindow(fn: () => void): IPublicTypeDisposable {\n    return this[workspaceSymbol].onChangeActiveWindow(fn);\n  }\n}\n","import {\n  IModalNodesManager as InnerModalNodesManager,\n  INode as InnerNode,\n} from '@alilc/lowcode-designer';\nimport { IPublicModelModalNodesManager, IPublicModelNode } from '@alilc/lowcode-types';\nimport { Node as ShellNode } from './node';\nimport { nodeSymbol, modalNodesManagerSymbol } from '../symbols';\n\nexport class ModalNodesManager implements IPublicModelModalNodesManager {\n  private readonly [modalNodesManagerSymbol]: InnerModalNodesManager;\n\n  constructor(modalNodesManager: InnerModalNodesManager) {\n    this[modalNodesManagerSymbol] = modalNodesManager;\n  }\n\n  static create(\n    modalNodesManager: InnerModalNodesManager | null,\n  ): IPublicModelModalNodesManager | null {\n    if (!modalNodesManager) {\n      return null;\n    }\n    return new ModalNodesManager(modalNodesManager);\n  }\n\n  /**\n   * 设置模态节点，触发内部事件\n   */\n  setNodes(): void {\n    this[modalNodesManagerSymbol].setNodes();\n  }\n\n  /**\n   * 获取模态节点（们）\n   */\n  getModalNodes(): IPublicModelNode[] {\n    const innerNodes = this[modalNodesManagerSymbol].getModalNodes();\n    const shellNodes: IPublicModelNode[] = [];\n    innerNodes?.forEach((node: InnerNode) => {\n      const shellNode = ShellNode.create(node);\n      if (shellNode) {\n        shellNodes.push(shellNode);\n      }\n    });\n    return shellNodes;\n  }\n\n  /**\n   * 获取当前可见的模态节点\n   */\n  getVisibleModalNode(): IPublicModelNode | null {\n    return ShellNode.create(this[modalNodesManagerSymbol].getVisibleModalNode());\n  }\n\n  /**\n   * 隐藏模态节点（们）\n   */\n  hideModalNodes(): void {\n    this[modalNodesManagerSymbol].hideModalNodes();\n  }\n\n  /**\n   * 设置指定节点为可见态\n   * @param node Node\n   */\n  setVisible(node: IPublicModelNode): void {\n    this[modalNodesManagerSymbol].setVisible((node as any)[nodeSymbol]);\n  }\n\n  /**\n   * 设置指定节点为不可见态\n   * @param node Node\n   */\n   setInvisible(node: IPublicModelNode): void {\n    this[modalNodesManagerSymbol].setInvisible((node as any)[nodeSymbol]);\n  }\n}","import {\n  IDocumentModel as InnerDocumentModel,\n  INode as InnerNode,\n} from '@alilc/lowcode-designer';\nimport {\n  IPublicEnumTransformStage,\n  IPublicTypeRootSchema,\n  GlobalEvent,\n  IPublicModelDocumentModel,\n  IPublicTypeOnChangeOptions,\n  IPublicTypeDragNodeObject,\n  IPublicTypeDragNodeDataObject,\n  IPublicModelNode,\n  IPublicModelSelection,\n  IPublicModelDetecting,\n  IPublicModelHistory,\n  IPublicApiProject,\n  IPublicModelModalNodesManager,\n  IPublicTypePropChangeOptions,\n  IPublicModelDropLocation,\n  IPublicApiCanvas,\n  IPublicTypeDisposable,\n  IPublicModelEditor,\n} from '@alilc/lowcode-types';\nimport { isDragNodeObject } from '@alilc/lowcode-utils';\nimport { Node as ShellNode } from './node';\nimport { Selection as ShellSelection } from './selection';\nimport { Detecting as ShellDetecting } from './detecting';\nimport { History as ShellHistory } from './history';\nimport { DropLocation as ShellDropLocation } from './drop-location';\nimport { Project as ShellProject, Canvas as ShellCanvas } from '../api';\nimport { Prop as ShellProp } from './prop';\nimport { ModalNodesManager } from './modal-nodes-manager';\nimport { documentSymbol, editorSymbol, nodeSymbol } from '../symbols';\n\nconst shellDocSymbol = Symbol('shellDocSymbol');\n\nexport class DocumentModel implements IPublicModelDocumentModel {\n  private readonly [documentSymbol]: InnerDocumentModel;\n  private readonly [editorSymbol]: IPublicModelEditor;\n  private _focusNode: IPublicModelNode | null;\n  selection: IPublicModelSelection;\n  detecting: IPublicModelDetecting;\n  history: IPublicModelHistory;\n\n  /**\n   * @deprecated use canvas API instead\n   */\n  canvas: IPublicApiCanvas;\n\n  constructor(document: InnerDocumentModel) {\n    this[documentSymbol] = document;\n    this[editorSymbol] = document.designer?.editor as IPublicModelEditor;\n    this.selection = new ShellSelection(document);\n    this.detecting = new ShellDetecting(document);\n    this.history = new ShellHistory(document);\n    this.canvas = new ShellCanvas(this[editorSymbol]);\n\n    this._focusNode = ShellNode.create(this[documentSymbol].focusNode);\n  }\n\n  static create(document: InnerDocumentModel | undefined | null): IPublicModelDocumentModel | null {\n    if (!document) {\n      return null;\n    }\n    // @ts-ignore 直接返回已挂载的 shell doc 实例\n    if (document[shellDocSymbol]) {\n      return (document as any)[shellDocSymbol];\n    }\n    const shellDoc = new DocumentModel(document);\n    // @ts-ignore 直接返回已挂载的 shell doc 实例\n    document[shellDocSymbol] = shellDoc;\n    return shellDoc;\n  }\n\n  /**\n   * id\n   */\n  get id(): string {\n    return this[documentSymbol].id;\n  }\n\n  set id(id) {\n    this[documentSymbol].id = id;\n  }\n\n  /**\n   * 获取当前文档所属的 project\n   * @returns\n   */\n  get project(): IPublicApiProject {\n    return ShellProject.create(this[documentSymbol].project);\n  }\n\n  /**\n   * 获取文档的根节点\n   * root node of this documentModel\n   * @returns\n   */\n  get root(): IPublicModelNode | null {\n    return ShellNode.create(this[documentSymbol].rootNode);\n  }\n\n  get focusNode(): IPublicModelNode | null {\n    return this._focusNode || this.root;\n  }\n\n  set focusNode(node: IPublicModelNode | null) {\n    this._focusNode = node;\n    this[editorSymbol].eventBus.emit(\n      'shell.document.focusNodeChanged',\n        { document: this, focusNode: node },\n      );\n  }\n\n  /**\n   * 获取文档下所有节点 Map, key 为 nodeId\n   * get map of all nodes , using node.id as key\n   */\n  get nodesMap(): Map<string, IPublicModelNode> {\n    const map = new Map<string, IPublicModelNode>();\n    for (let id of this[documentSymbol].nodesMap.keys()) {\n      map.set(id, this.getNodeById(id)!);\n    }\n    return map;\n  }\n\n  /**\n   * 模态节点管理\n   */\n  get modalNodesManager(): IPublicModelModalNodesManager | null {\n    return ModalNodesManager.create(this[documentSymbol].modalNodesManager);\n  }\n\n  get dropLocation(): IPublicModelDropLocation | null {\n    return ShellDropLocation.create(this[documentSymbol].dropLocation);\n  }\n\n  set dropLocation(loc: IPublicModelDropLocation | null) {\n    this[documentSymbol].dropLocation = loc;\n  }\n\n  /**\n   * 根据 nodeId 返回 Node 实例\n   * get node instance by nodeId\n   * @param {string} nodeId\n   */\n  getNodeById(nodeId: string): IPublicModelNode | null {\n    return ShellNode.create(this[documentSymbol].getNode(nodeId));\n  }\n\n  /**\n   * 导入 schema\n   * @param schema\n   */\n  importSchema(schema: IPublicTypeRootSchema): void {\n    this[documentSymbol].import(schema);\n    this[editorSymbol].eventBus.emit('shell.document.importSchema', schema);\n  }\n\n  /**\n   * 导出 schema\n   * @param stage\n   * @returns\n   */\n  exportSchema(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Render): any {\n    return this[documentSymbol].export(stage);\n  }\n\n  /**\n   * 插入节点\n   * @param parent\n   * @param thing\n   * @param at\n   * @param copy\n   * @returns\n   */\n  insertNode(\n    parent: IPublicModelNode,\n    thing: IPublicModelNode,\n    at?: number | null | undefined,\n    copy?: boolean | undefined,\n  ): IPublicModelNode | null {\n    const node = this[documentSymbol].insertNode(\n      (parent as any)[nodeSymbol] ? (parent as any)[nodeSymbol] : parent,\n      (thing as any)?.[nodeSymbol] ? (thing as any)[nodeSymbol] : thing,\n      at,\n      copy,\n    );\n    return ShellNode.create(node);\n  }\n\n  /**\n   * 创建一个节点\n   * @param data\n   * @returns\n   */\n  createNode(data: any): IPublicModelNode | null {\n    return ShellNode.create(this[documentSymbol].createNode(data));\n  }\n\n  /**\n   * 移除指定节点/节点id\n   * @param idOrNode\n   */\n  removeNode(idOrNode: string | IPublicModelNode): void {\n    this[documentSymbol].removeNode(idOrNode as any);\n  }\n\n  /**\n   * componentsMap of documentModel\n   * @param extraComps\n   * @returns\n   */\n  getComponentsMap(extraComps?: string[]): any {\n    return this[documentSymbol].getComponentsMap(extraComps);\n  }\n\n  /**\n   * 检查拖拽放置的目标节点是否可以放置该拖拽对象\n   * @param dropTarget 拖拽放置的目标节点\n   * @param dragObject 拖拽的对象\n   * @returns boolean 是否可以放置\n   */\n  checkNesting(\n      dropTarget: IPublicModelNode,\n      dragObject: IPublicTypeDragNodeObject | IPublicTypeDragNodeDataObject,\n    ): boolean {\n    let innerDragObject = dragObject;\n    if (isDragNodeObject(dragObject)) {\n      innerDragObject.nodes = innerDragObject.nodes?.map(\n          (node: IPublicModelNode) => ((node as any)[nodeSymbol] || node),\n        );\n    }\n    return this[documentSymbol].checkNesting(\n      ((dropTarget as any)[nodeSymbol] || dropTarget) as any,\n      innerDragObject as any,\n    );\n  }\n\n  /**\n   * 当前 document 新增节点事件\n   */\n  onAddNode(fn: (node: IPublicModelNode) => void): IPublicTypeDisposable {\n    return this[documentSymbol].onNodeCreate((node: InnerNode) => {\n      fn(ShellNode.create(node)!);\n    });\n  }\n\n  /**\n   * 当前 document 新增节点事件，此时节点已经挂载到 document 上\n   */\n  onMountNode(fn: (payload: { node: IPublicModelNode }) => void): IPublicTypeDisposable {\n    this[editorSymbol].eventBus.on('node.add', fn as any);\n    return () => {\n      this[editorSymbol].eventBus.off('node.add', fn as any);\n    };\n  }\n\n  /**\n   * 当前 document 删除节点事件\n   */\n  onRemoveNode(fn: (node: IPublicModelNode) => void): IPublicTypeDisposable {\n    return this[documentSymbol].onNodeDestroy((node: InnerNode) => {\n      fn(ShellNode.create(node)!);\n    });\n  }\n\n  /**\n   * 当前 document 的 hover 变更事件\n   */\n  onChangeDetecting(fn: (node: IPublicModelNode) => void): IPublicTypeDisposable {\n    return this[documentSymbol].designer.detecting.onDetectingChange((node: InnerNode) => {\n      fn(ShellNode.create(node)!);\n    });\n  }\n\n  /**\n   * 当前 document 的选中变更事件\n   */\n  onChangeSelection(fn: (ids: string[]) => void): IPublicTypeDisposable {\n    return this[documentSymbol].selection.onSelectionChange((ids: string[]) => {\n      fn(ids);\n    });\n  }\n\n  /**\n   * 当前 document 的节点显隐状态变更事件\n   * @param fn\n   */\n  onChangeNodeVisible(fn: (node: IPublicModelNode, visible: boolean) => void): IPublicTypeDisposable {\n    return this[documentSymbol].onChangeNodeVisible((node: IPublicModelNode, visible: boolean) => {\n      fn(ShellNode.create(node)!, visible);\n    });\n  }\n\n  /**\n   * 当前 document 的节点 children 变更事件\n   * @param fn\n   */\n  onChangeNodeChildren(fn: (info: IPublicTypeOnChangeOptions) => void): IPublicTypeDisposable {\n    return this[documentSymbol].onChangeNodeChildren((info?: IPublicTypeOnChangeOptions) => {\n      if (!info) {\n        return;\n      }\n      fn({\n        type: info.type,\n        node: ShellNode.create(info.node)!,\n      });\n    });\n  }\n\n  /**\n   * 当前 document 节点属性修改事件\n   * @param fn\n   */\n  onChangeNodeProp(fn: (info: IPublicTypePropChangeOptions) => void): IPublicTypeDisposable {\n    const callback = (info: GlobalEvent.Node.Prop.ChangeOptions) => {\n      fn({\n        key: info.key,\n        oldValue: info.oldValue,\n        newValue: info.newValue,\n        prop: ShellProp.create(info.prop)!,\n        node: ShellNode.create(info.node as any)!,\n      });\n    };\n    this[editorSymbol].on(\n      GlobalEvent.Node.Prop.InnerChange,\n      callback,\n    );\n\n    return () => {\n      this[editorSymbol].off(\n        GlobalEvent.Node.Prop.InnerChange,\n        callback,\n      );\n    };\n  }\n\n  /**\n   * import schema event\n   * @param fn\n   */\n  onImportSchema(fn: (schema: IPublicTypeRootSchema) => void): IPublicTypeDisposable {\n    return this[editorSymbol].eventBus.on('shell.document.importSchema', fn as any);\n  }\n\n  isDetectingNode(node: IPublicModelNode): boolean {\n    return this.detecting.current === node;\n  }\n\n  onFocusNodeChanged(\n    fn: (doc: IPublicModelDocumentModel, focusNode: IPublicModelNode) => void,\n  ): IPublicTypeDisposable {\n    if (!fn) {\n      return () => {};\n    }\n    return this[editorSymbol].eventBus.on(\n      'shell.document.focusNodeChanged',\n      (payload) => {\n        const { document, focusNode } = payload;\n        fn(document, focusNode);\n      },\n    );\n  }\n\n  onDropLocationChanged(fn: (doc: IPublicModelDocumentModel) => void): IPublicTypeDisposable {\n    if (!fn) {\n      return () => {};\n    }\n    return this[editorSymbol].eventBus.on(\n      'document.dropLocation.changed',\n      (payload) => {\n        const { document } = payload;\n        fn(document);\n      },\n    );\n  }\n}\n","import { INode as InnerNode, INodeChildren } from '@alilc/lowcode-designer';\nimport { IPublicTypeNodeData, IPublicEnumTransformStage, IPublicModelNodeChildren, IPublicModelNode } from '@alilc/lowcode-types';\nimport { Node as ShellNode } from './node';\nimport { nodeSymbol, nodeChildrenSymbol } from '../symbols';\n\nexport class NodeChildren implements IPublicModelNodeChildren {\n  private readonly [nodeChildrenSymbol]: INodeChildren;\n\n  constructor(nodeChildren: INodeChildren) {\n    this[nodeChildrenSymbol] = nodeChildren;\n  }\n\n  static create(nodeChildren: INodeChildren | null): IPublicModelNodeChildren | null {\n    if (!nodeChildren) {\n      return null;\n    }\n    return new NodeChildren(nodeChildren);\n  }\n\n  /**\n   * 返回当前 children 实例所属的节点实例\n   */\n  get owner(): IPublicModelNode | null {\n    return ShellNode.create(this[nodeChildrenSymbol].owner);\n  }\n\n  /**\n   * children 内的节点实例数\n   */\n  get size(): number {\n    return this[nodeChildrenSymbol].size;\n  }\n\n  /**\n   * @deprecated\n   * 是否为空\n   * @returns\n   */\n  get isEmpty(): boolean {\n    return this[nodeChildrenSymbol].isEmptyNode;\n  }\n\n  /**\n   * 是否为空\n   * @returns\n   */\n  get isEmptyNode(): boolean {\n    return this[nodeChildrenSymbol].isEmptyNode;\n  }\n\n  /**\n   * @deprecated\n   * judge if it is not empty\n   */\n  get notEmpty(): boolean {\n    return this[nodeChildrenSymbol].notEmptyNode;\n  }\n\n  /**\n   * judge if it is not empty\n   */\n  get notEmptyNode(): boolean {\n    return this[nodeChildrenSymbol].notEmptyNode;\n  }\n\n  /**\n   * 删除指定节点\n   * delete the node\n   * @param node\n   */\n  delete(node: IPublicModelNode): boolean {\n    return this[nodeChildrenSymbol].delete((node as any)?.[nodeSymbol]);\n  }\n\n  /**\n   * 插入一个节点\n   * @param node 待插入节点\n   * @param at 插入下标\n   * @returns\n   */\n  insert(node: IPublicModelNode, at?: number | null): void {\n    return this[nodeChildrenSymbol].insert((node as any)?.[nodeSymbol], at);\n  }\n\n  /**\n   * 返回指定节点的下标\n   * @param node\n   * @returns\n   */\n  indexOf(node: IPublicModelNode): number {\n    return this[nodeChildrenSymbol].indexOf((node as any)?.[nodeSymbol]);\n  }\n\n  /**\n   * 类似数组 splice 操作\n   * @param start\n   * @param deleteCount\n   * @param node\n   */\n  splice(start: number, deleteCount: number, node?: IPublicModelNode): any {\n    this[nodeChildrenSymbol].splice(start, deleteCount, (node as any)?.[nodeSymbol]);\n  }\n\n  /**\n   * 返回指定下标的节点\n   * @param index\n   * @returns\n   */\n  get(index: number): IPublicModelNode | null {\n    return ShellNode.create(this[nodeChildrenSymbol].get(index));\n  }\n\n  /**\n   * 是否包含指定节点\n   * @param node\n   * @returns\n   */\n  has(node: IPublicModelNode): boolean {\n    return this[nodeChildrenSymbol].has((node as any)?.[nodeSymbol]);\n  }\n\n  /**\n   * 类似数组的 forEach\n   * @param fn\n   */\n  forEach(fn: (node: IPublicModelNode, index: number) => void): void {\n    this[nodeChildrenSymbol].forEach((item: InnerNode, index: number) => {\n      fn(ShellNode.create(item)!, index);\n    });\n  }\n\n  /**\n   * 类似数组的 map\n   * @param fn\n   */\n  map<T>(fn: (node: IPublicModelNode, index: number) => T[]): any[] | null {\n    return this[nodeChildrenSymbol].map((item: InnerNode, index: number) => {\n      return fn(ShellNode.create(item)!, index);\n    });\n  }\n\n  /**\n   * 类似数组的 every\n   * @param fn\n   */\n  every(fn: (node: IPublicModelNode, index: number) => boolean): boolean {\n    return this[nodeChildrenSymbol].every((item: InnerNode, index: number) => {\n      return fn(ShellNode.create(item)!, index);\n    });\n  }\n\n  /**\n   * 类似数组的 some\n   * @param fn\n   */\n  some(fn: (node: IPublicModelNode, index: number) => boolean): boolean {\n    return this[nodeChildrenSymbol].some((item: InnerNode, index: number) => {\n      return fn(ShellNode.create(item)!, index);\n    });\n  }\n\n  /**\n   * 类似数组的 filter\n   * @param fn\n   */\n  filter(fn: (node: IPublicModelNode, index: number) => boolean): any {\n    return this[nodeChildrenSymbol]\n      .filter((item: InnerNode, index: number) => {\n        return fn(ShellNode.create(item)!, index);\n      })\n      .map((item: InnerNode) => ShellNode.create(item)!);\n  }\n\n  /**\n   * 类似数组的 find\n   * @param fn\n   */\n  find(fn: (node: IPublicModelNode, index: number) => boolean): IPublicModelNode | null {\n    return ShellNode.create(\n      this[nodeChildrenSymbol].find((item: InnerNode, index: number) => {\n        return fn(ShellNode.create(item)!, index);\n      }),\n    );\n  }\n\n  /**\n   * 类似数组的 reduce\n   * @param fn\n   */\n  reduce(fn: (acc: any, cur: IPublicModelNode) => any, initialValue: any): void {\n    return this[nodeChildrenSymbol].reduce((acc: any, cur: InnerNode) => {\n      return fn(acc, ShellNode.create(cur)!);\n    }, initialValue);\n  }\n\n  /**\n   * 导入 schema\n   * @param data\n   */\n  importSchema(data?: IPublicTypeNodeData | IPublicTypeNodeData[]): void {\n    this[nodeChildrenSymbol].import(data);\n  }\n\n  /**\n   * 导出 schema\n   * @param stage\n   * @returns\n   */\n  exportSchema(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Render): any {\n    return this[nodeChildrenSymbol].export(stage);\n  }\n\n  /**\n   * 执行新增、删除、排序等操作\n   * @param remover\n   * @param adder\n   * @param sorter\n   */\n  mergeChildren(\n    remover: (node: IPublicModelNode, idx: number) => boolean,\n    adder: (children: IPublicModelNode[]) => any,\n    originalSorter: (firstNode: IPublicModelNode, secondNode: IPublicModelNode) => number,\n  ) {\n    let sorter = originalSorter;\n    if (!sorter) {\n      sorter = () => 0;\n    }\n    this[nodeChildrenSymbol].mergeChildren(\n      (node: InnerNode, idx: number) => remover(ShellNode.create(node)!, idx),\n      (children: InnerNode[]) => adder(children.map((node) => ShellNode.create(node)!)),\n      (firstNode: InnerNode, secondNode: InnerNode) => {\n        return sorter(ShellNode.create(firstNode)!, ShellNode.create(secondNode)!);\n      },\n    );\n  }\n}\n","import { SettingField, SettingEntry } from '@alilc/lowcode-designer';\nimport {\n  IPublicTypeCompositeValue,\n  IPublicTypeFieldConfig,\n  IPublicTypeCustomView,\n  IPublicModelSettingPropEntry,\n  IPublicTypeSetterType,\n  IPublicTypeFieldExtraProps,\n  IPublicModelSettingTopEntry,\n  IPublicModelNode,\n  IPublicModelComponentMeta,\n  IPublicTypeSetValueOptions,\n} from '@alilc/lowcode-types';\nimport { settingPropEntrySymbol } from '../symbols';\nimport { Node as ShellNode } from './node';\nimport { SettingTopEntry as ShellSettingTopEntry } from './setting-top-entry';\nimport { ComponentMeta as ShellComponentMeta } from './component-meta';\nimport { isCustomView } from '@alilc/lowcode-utils';\n\nexport class SettingPropEntry implements IPublicModelSettingPropEntry {\n  private readonly [settingPropEntrySymbol]: SettingField;\n\n  constructor(prop: SettingField) {\n    this[settingPropEntrySymbol] = prop;\n  }\n\n  static create(prop: SettingField): IPublicModelSettingPropEntry {\n    return new SettingPropEntry(prop);\n  }\n\n  /**\n   * 获取设置属性的 isGroup\n   */\n  get isGroup(): boolean {\n    return this[settingPropEntrySymbol].isGroup;\n  }\n\n  /**\n   * 获取设置属性的 id\n   */\n  get id(): string {\n    return this[settingPropEntrySymbol].id;\n  }\n\n  /**\n   * 获取设置属性的 name\n   */\n  get name(): string | number {\n    return this[settingPropEntrySymbol].name;\n  }\n\n  /**\n   * 获取设置属性的 key\n   */\n  get key(): string | number {\n    return this[settingPropEntrySymbol].getKey();\n  }\n\n  /**\n   * 获取设置属性的 path\n   */\n  get path(): any[] {\n    return this[settingPropEntrySymbol].path;\n  }\n\n  /**\n   * 获取设置属性的 title\n   */\n  get title(): any {\n    return this[settingPropEntrySymbol].title;\n  }\n\n  /**\n   * 获取设置属性的 setter\n   */\n  get setter(): IPublicTypeSetterType | null {\n    return this[settingPropEntrySymbol].setter;\n  }\n\n  /**\n   * 获取设置属性的 expanded\n   */\n  get expanded(): boolean {\n    return this[settingPropEntrySymbol].expanded;\n  }\n\n  /**\n   * 获取设置属性的 extraProps\n   */\n  get extraProps(): IPublicTypeFieldExtraProps {\n    return this[settingPropEntrySymbol].extraProps;\n  }\n\n  get props(): IPublicModelSettingTopEntry {\n    return ShellSettingTopEntry.create(this[settingPropEntrySymbol].props);\n  }\n\n  /**\n   * 获取设置属性对应的节点实例\n   */\n  get node(): IPublicModelNode | null {\n    return ShellNode.create(this[settingPropEntrySymbol].getNode());\n  }\n\n  /**\n   * 获取设置属性的父设置属性\n   */\n  get parent(): IPublicModelSettingPropEntry {\n    return SettingPropEntry.create(this[settingPropEntrySymbol].parent as any);\n  }\n\n  /**\n   * 获取顶级设置属性\n   */\n  get top(): IPublicModelSettingTopEntry {\n    return ShellSettingTopEntry.create(this[settingPropEntrySymbol].top);\n  }\n\n  /**\n   * 是否是 SettingField 实例\n   */\n  get isSettingField(): boolean {\n    return this[settingPropEntrySymbol].isSettingField;\n  }\n\n  /**\n   * componentMeta\n   */\n  get componentMeta(): IPublicModelComponentMeta | null {\n    return ShellComponentMeta.create(this[settingPropEntrySymbol].componentMeta);\n  }\n\n  /**\n   * 获取设置属性的 items\n   */\n  get items(): Array<IPublicModelSettingPropEntry | IPublicTypeCustomView> {\n    return this[settingPropEntrySymbol].items?.map((item) => {\n      if (isCustomView(item)) {\n        return item;\n      }\n      return item.internalToShellPropEntry();\n    });\n  }\n\n  /**\n   * 设置 key 值\n   * @param key\n   */\n  setKey(key: string | number): void {\n    this[settingPropEntrySymbol].setKey(key);\n  }\n\n  /**\n   * @deprecated use .node instead\n   */\n  getNode() {\n    return this.node;\n  }\n\n  /**\n   * @deprecated use .parent instead\n   */\n  getParent() {\n    return this.parent;\n  }\n\n  /**\n   * 设置值\n   * @param val 值\n   */\n  setValue(val: IPublicTypeCompositeValue, extraOptions?: IPublicTypeSetValueOptions): void {\n    this[settingPropEntrySymbol].setValue(val, false, false, extraOptions);\n  }\n\n  /**\n   * 设置子级属性值\n   * @param propName 子属性名\n   * @param value 值\n   */\n  setPropValue(propName: string | number, value: any): void {\n    this[settingPropEntrySymbol].setPropValue(propName, value);\n  }\n\n  /**\n   * 清空指定属性值\n   * @param propName\n   */\n  clearPropValue(propName: string | number): void {\n    this[settingPropEntrySymbol].clearPropValue(propName);\n  }\n\n  /**\n   * 获取配置的默认值\n   * @returns\n   */\n  getDefaultValue(): any {\n    return this[settingPropEntrySymbol].getDefaultValue();\n  }\n\n  /**\n   * 获取值\n   * @returns\n   */\n  getValue(): any {\n    return this[settingPropEntrySymbol].getValue();\n  }\n\n  /**\n   * 获取子级属性值\n   * @param propName 子属性名\n   * @returns\n   */\n  getPropValue(propName: string | number): any {\n    return this[settingPropEntrySymbol].getPropValue(propName);\n  }\n\n  /**\n   * 获取顶层附属属性值\n   */\n  getExtraPropValue(propName: string): any {\n    return this[settingPropEntrySymbol].getExtraPropValue(propName);\n  }\n\n  /**\n   * 设置顶层附属属性值\n   */\n  setExtraPropValue(propName: string, value: any): void {\n    this[settingPropEntrySymbol].setExtraPropValue(propName, value);\n  }\n\n  /**\n   * 获取设置属性集\n   * @returns\n   */\n  getProps(): IPublicModelSettingTopEntry {\n    return ShellSettingTopEntry.create(this[settingPropEntrySymbol].getProps() as SettingEntry);\n  }\n\n  /**\n   * 是否绑定了变量\n   * @returns\n   */\n  isUseVariable(): boolean {\n    return this[settingPropEntrySymbol].isUseVariable();\n  }\n\n  /**\n   * 设置绑定变量\n   * @param flag\n   */\n  setUseVariable(flag: boolean): void {\n    this[settingPropEntrySymbol].setUseVariable(flag);\n  }\n\n  /**\n   * 创建一个设置 field 实例\n   * @param config\n   * @returns\n   */\n  createField(config: IPublicTypeFieldConfig): IPublicModelSettingPropEntry {\n    return SettingPropEntry.create(this[settingPropEntrySymbol].createField(config));\n  }\n\n  /**\n   * 获取值，当为变量时，返回 mock\n   * @returns\n   */\n  getMockOrValue(): any {\n    return this[settingPropEntrySymbol].getMockOrValue();\n  }\n\n  /**\n   * 销毁当前 field 实例\n   */\n  purge(): void {\n    this[settingPropEntrySymbol].purge();\n  }\n\n  /**\n   * 移除当前 field 实例\n   */\n  remove(): void {\n    this[settingPropEntrySymbol].remove();\n  }\n\n  /**\n   * 设置 autorun\n   * @param action\n   * @returns\n   */\n  onEffect(action: () => void): () => void {\n    return this[settingPropEntrySymbol].onEffect(action);\n  }\n\n  /**\n   * 返回 shell 模型，兼容某些场景下 field 已经是 shell field 了\n   * @returns\n   */\n  internalToShellPropEntry() {\n    return this;\n  }\n}\n","import { SettingEntry } from '@alilc/lowcode-designer';\nimport { settingTopEntrySymbol } from '../symbols';\nimport { Node as ShellNode } from './node';\nimport { SettingPropEntry as ShellSettingPropEntry } from './setting-prop-entry';\nimport { IPublicModelSettingTopEntry, IPublicModelNode, IPublicModelSettingPropEntry } from '@alilc/lowcode-types';\n\nexport class SettingTopEntry implements IPublicModelSettingTopEntry {\n  private readonly [settingTopEntrySymbol]: SettingEntry;\n\n  constructor(prop: SettingEntry) {\n    this[settingTopEntrySymbol] = prop;\n  }\n\n  static create(prop: SettingEntry): IPublicModelSettingTopEntry {\n    return new SettingTopEntry(prop);\n  }\n\n  /**\n   * 返回所属的节点实例\n   */\n  get node(): IPublicModelNode | null {\n    return ShellNode.create(this[settingTopEntrySymbol].getNode());\n  }\n\n  /**\n   * 获取子级属性对象\n   * @param propName\n   * @returns\n   */\n  get(propName: string | number): IPublicModelSettingPropEntry {\n    return ShellSettingPropEntry.create(this[settingTopEntrySymbol].get(propName) as any);\n  }\n\n  /**\n   * @deprecated use .node instead\n   */\n  getNode() {\n    return this.node;\n  }\n\n  /**\n   * 获取指定 propName 的值\n   * @param propName\n   * @returns\n   */\n  getPropValue(propName: string | number): any {\n    return this[settingTopEntrySymbol].getPropValue(propName);\n  }\n\n  /**\n   * 设置指定 propName 的值\n   * @param propName\n   * @param value\n   */\n  setPropValue(propName: string | number, value: any): void {\n    this[settingTopEntrySymbol].setPropValue(propName, value);\n  }\n}","import {\n  IDocumentModel as InnerDocumentModel,\n  INode as InnerNode,\n} from '@alilc/lowcode-designer';\nimport {\n  IPublicTypeCompositeValue,\n  IPublicTypeNodeSchema,\n  IPublicEnumTransformStage,\n  IPublicModelNode,\n  IPublicTypeIconType,\n  IPublicTypeI18nData,\n  IPublicModelComponentMeta,\n  IPublicModelDocumentModel,\n  IPublicModelNodeChildren,\n  IPublicModelProp,\n  IPublicModelProps,\n  IPublicTypePropsMap,\n  IPublicTypePropsList,\n  IPublicModelSettingTopEntry,\n  IPublicModelExclusiveGroup,\n} from '@alilc/lowcode-types';\nimport { Prop as ShellProp } from './prop';\nimport { Props as ShellProps } from './props';\nimport { DocumentModel as ShellDocumentModel } from './document-model';\nimport { NodeChildren as ShellNodeChildren } from './node-children';\nimport { ComponentMeta as ShellComponentMeta } from './component-meta';\nimport { SettingTopEntry as ShellSettingTopEntry } from './setting-top-entry';\nimport { documentSymbol, nodeSymbol } from '../symbols';\nimport { ReactElement } from 'react';\n\nconst shellNodeSymbol = Symbol('shellNodeSymbol');\n\nexport class Node implements IPublicModelNode {\n  private readonly [documentSymbol]: InnerDocumentModel | null;\n  private readonly [nodeSymbol]: InnerNode;\n\n  private _id: string;\n\n  /**\n   * 节点 id\n   */\n  get id() {\n    return this._id;\n  }\n\n  /**\n   * set id\n   */\n  set id(id: string) {\n    this._id = id;\n  }\n\n  /**\n   * 节点标题\n   */\n  get title(): string | IPublicTypeI18nData | ReactElement {\n    return this[nodeSymbol].title;\n  }\n\n  /**\n   * @deprecated\n   * 是否为「容器型」节点\n   */\n  get isContainer(): boolean {\n    return this[nodeSymbol].isContainerNode;\n  }\n\n  /**\n   * 是否为「容器型」节点\n   */\n  get isContainerNode(): boolean {\n    return this[nodeSymbol].isContainerNode;\n  }\n\n  /**\n   * @deprecated\n   * 是否为根节点\n   */\n  get isRoot(): boolean {\n    return this[nodeSymbol].isRootNode;\n  }\n\n  /**\n   * 是否为根节点\n   */\n  get isRootNode(): boolean {\n    return this[nodeSymbol].isRootNode;\n  }\n\n  /**\n   * @deprecated\n   * 是否为空节点（无 children 或者 children 为空）\n   */\n  get isEmpty(): boolean {\n    return this[nodeSymbol].isEmptyNode;\n  }\n\n  /**\n   * 是否为空节点（无 children 或者 children 为空）\n   */\n  get isEmptyNode(): boolean {\n    return this[nodeSymbol].isEmptyNode;\n  }\n\n  /**\n   * @deprecated\n   * 是否为 Page 节点\n   */\n  get isPage(): boolean {\n    return this[nodeSymbol].isPageNode;\n  }\n\n  /**\n   * 是否为 Page 节点\n   */\n  get isPageNode(): boolean {\n    return this[nodeSymbol].isPageNode;\n  }\n\n  /**\n   * @deprecated\n   * 是否为 Component 节点\n   */\n  get isComponent(): boolean {\n    return this[nodeSymbol].isComponentNode;\n  }\n\n  /**\n   * 是否为 Component 节点\n   */\n  get isComponentNode(): boolean {\n    return this[nodeSymbol].isComponentNode;\n  }\n\n  /**\n   * @deprecated\n   * 是否为「模态框」节点\n   */\n  get isModal(): boolean {\n    return this[nodeSymbol].isModalNode;\n  }\n\n  /**\n   * 是否为「模态框」节点\n   */\n  get isModalNode(): boolean {\n    return this[nodeSymbol].isModalNode;\n  }\n\n  /**\n   * @deprecated\n   * 是否为插槽节点\n   */\n  get isSlot(): boolean {\n    return this[nodeSymbol].isSlotNode;\n  }\n\n  /**\n   * 是否为插槽节点\n   */\n  get isSlotNode(): boolean {\n    return this[nodeSymbol].isSlotNode;\n  }\n\n  /**\n   * @deprecated\n   * 是否为父类/分支节点\n   */\n  get isParental(): boolean {\n    return this[nodeSymbol].isParentalNode;\n  }\n\n  /**\n   * 是否为父类/分支节点\n   */\n  get isParentalNode(): boolean {\n    return this[nodeSymbol].isParentalNode;\n  }\n\n  /**\n   * @deprecated\n   * 是否为叶子节点\n   */\n  get isLeaf(): boolean {\n    return this[nodeSymbol].isLeafNode;\n  }\n\n  /**\n   * 是否为叶子节点\n   */\n  get isLeafNode(): boolean {\n    return this[nodeSymbol].isLeafNode;\n  }\n\n  /**\n   * judge if it is a node or not\n   */\n  readonly isNode = true;\n\n  /**\n   * 获取当前节点的锁定状态\n   */\n  get isLocked(): boolean {\n    return this[nodeSymbol].isLocked;\n  }\n\n  /**\n   * 下标\n   */\n  get index() {\n    return this[nodeSymbol].index;\n  }\n\n  /**\n   * 图标\n   */\n  get icon(): IPublicTypeIconType {\n    return this[nodeSymbol].icon;\n  }\n\n  /**\n   * 节点所在树的层级深度，根节点深度为 0\n   */\n  get zLevel(): number {\n    return this[nodeSymbol].zLevel;\n  }\n\n  /**\n   * 节点 componentName\n   */\n  get componentName(): string {\n    return this[nodeSymbol].componentName;\n  }\n\n  /**\n   * 节点的物料元数据\n   */\n  get componentMeta(): IPublicModelComponentMeta | null {\n    return ShellComponentMeta.create(this[nodeSymbol].componentMeta);\n  }\n\n  /**\n   * 获取节点所属的文档模型对象\n   * @returns\n   */\n  get document(): IPublicModelDocumentModel | null {\n    return ShellDocumentModel.create(this[documentSymbol]);\n  }\n\n  /**\n   * 获取当前节点的前一个兄弟节点\n   * @returns\n   */\n  get prevSibling(): IPublicModelNode | null {\n    return Node.create(this[nodeSymbol].prevSibling);\n  }\n\n  /**\n   * 获取当前节点的后一个兄弟节点\n   * @returns\n   */\n  get nextSibling(): IPublicModelNode | null {\n    return Node.create(this[nodeSymbol].nextSibling);\n  }\n\n  /**\n   * 获取当前节点的父亲节点\n   * @returns\n   */\n  get parent(): IPublicModelNode | null {\n    return Node.create(this[nodeSymbol].parent);\n  }\n\n  /**\n   * 获取当前节点的孩子节点模型\n   * @returns\n   */\n  get children(): IPublicModelNodeChildren | null {\n    return ShellNodeChildren.create(this[nodeSymbol].children);\n  }\n\n  /**\n   * 节点上挂载的插槽节点们\n   */\n  get slots(): IPublicModelNode[] {\n    return this[nodeSymbol].slots.map((node: InnerNode) => Node.create(node)!);\n  }\n\n  /**\n   * 当前节点为插槽节点时，返回节点对应的属性实例\n   */\n  get slotFor(): IPublicModelProp | null {\n    return ShellProp.create(this[nodeSymbol].slotFor);\n  }\n\n  /**\n   * 返回节点的属性集\n   */\n  get props(): IPublicModelProps | null {\n    return ShellProps.create(this[nodeSymbol].props);\n  }\n\n  /**\n   * 返回节点的属性集\n   */\n  get propsData(): IPublicTypePropsMap | IPublicTypePropsList | null {\n    return this[nodeSymbol].propsData;\n  }\n\n  /**\n   * 获取符合搭建协议 - 节点 schema 结构\n   */\n  get schema(): IPublicTypeNodeSchema {\n    return this[nodeSymbol].schema;\n  }\n\n  get settingEntry(): IPublicModelSettingTopEntry {\n    return ShellSettingTopEntry.create(this[nodeSymbol].settingEntry as any);\n  }\n\n  constructor(node: InnerNode) {\n    this[nodeSymbol] = node;\n    this[documentSymbol] = node.document;\n\n    this._id = this[nodeSymbol].id;\n  }\n\n  static create(node: InnerNode | null | undefined): IPublicModelNode | null {\n    if (!node) {\n      return null;\n    }\n    // @ts-ignore 直接返回已挂载的 shell node 实例\n    if (node[shellNodeSymbol]) {\n      return (node as any)[shellNodeSymbol];\n    }\n    const shellNode = new Node(node);\n    // @ts-ignore 挂载 shell node 实例\n    // eslint-disable-next-line no-param-reassign\n    node[shellNodeSymbol] = shellNode;\n    return shellNode;\n  }\n\n  /**\n   * @deprecated use .children instead\n   */\n  getChildren() {\n    return this.children;\n  }\n\n  /**\n   * 获取节点实例对应的 dom 节点\n   * @deprecated\n   */\n  getDOMNode() {\n    return (this[nodeSymbol] as any).getDOMNode();\n  }\n\n  /**\n   * 执行新增、删除、排序等操作\n   * @param remover\n   * @param adder\n   * @param sorter\n   */\n  mergeChildren(\n    remover: (node: IPublicModelNode, idx: number) => boolean,\n    adder: (children: IPublicModelNode[]) => any,\n    sorter: (firstNode: IPublicModelNode, secondNode: IPublicModelNode) => number,\n  ): any {\n    return this.children?.mergeChildren(remover, adder, sorter);\n  }\n\n  /**\n   * 返回节点的尺寸、位置信息\n   * @returns\n   */\n  getRect(): DOMRect | null {\n    return this[nodeSymbol].getRect();\n  }\n\n  /**\n   * 是否有挂载插槽节点\n   * @returns\n   */\n  hasSlots(): boolean {\n    return this[nodeSymbol].hasSlots();\n  }\n\n  /**\n   * 是否设定了渲染条件\n   * @returns\n   */\n  hasCondition(): boolean {\n    return this[nodeSymbol].hasCondition();\n  }\n\n  /**\n   * 是否设定了循环数据\n   * @returns\n   */\n  hasLoop(): boolean {\n    return this[nodeSymbol].hasLoop();\n  }\n\n  get visible(): boolean {\n    return this[nodeSymbol].getVisible();\n  }\n\n  set visible(value: boolean) {\n    this[nodeSymbol].setVisible(value);\n  }\n\n  getVisible(): boolean {\n    return this[nodeSymbol].getVisible();\n  }\n\n  setVisible(flag: boolean): void {\n    this[nodeSymbol].setVisible(flag);\n  }\n\n  isConditionalVisible(): boolean | undefined {\n    return this[nodeSymbol].isConditionalVisible();\n  }\n\n  /**\n   * 设置节点锁定状态\n   * @param flag\n   */\n  lock(flag?: boolean): void {\n    this[nodeSymbol].lock(flag);\n  }\n\n  /**\n   * @deprecated use .props instead\n   */\n  getProps() {\n    return this.props;\n  }\n\n  contains(node: IPublicModelNode): boolean {\n    return this[nodeSymbol].contains((node as any)[nodeSymbol]);\n  }\n\n  /**\n   * 获取指定 path 的属性模型实例\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @returns\n   */\n  getProp(path: string, createIfNone = true): IPublicModelProp | null {\n    return ShellProp.create(this[nodeSymbol].getProp(path, createIfNone));\n  }\n\n  /**\n   * 获取指定 path 的属性模型实例值\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @returns\n   */\n  getPropValue(path: string) {\n    return this.getProp(path, false)?.getValue();\n  }\n\n  /**\n   * 获取指定 path 的属性模型实例，\n   *  注：导出时，不同于普通属性，该属性并不挂载在 props 之下，而是与 props 同级\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @param createIfNone 当没有属性的时候，是否创建一个属性\n   * @returns\n   */\n  getExtraProp(path: string, createIfNone?: boolean): IPublicModelProp | null {\n    return ShellProp.create(this[nodeSymbol].getExtraProp(path, createIfNone));\n  }\n\n  /**\n   * 获取指定 path 的属性模型实例，\n   *  注：导出时，不同于普通属性，该属性并不挂载在 props 之下，而是与 props 同级\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @returns\n   */\n  getExtraPropValue(path: string): any {\n    return this.getExtraProp(path)?.getValue();\n  }\n\n  /**\n   * 设置指定 path 的属性模型实例值\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @param value 值\n   * @returns\n   */\n  setPropValue(path: string, value: IPublicTypeCompositeValue): void {\n    return this.getProp(path)?.setValue(value);\n  }\n\n  /**\n   * 设置指定 path 的属性模型实例值\n   * @param path 属性路径，支持 a / a.b / a.0 等格式\n   * @param value 值\n   * @returns\n   */\n  setExtraPropValue(path: string, value: IPublicTypeCompositeValue): void {\n    return this.getExtraProp(path)?.setValue(value);\n  }\n\n  /**\n   * 导入节点数据\n   * @param data\n   */\n  importSchema(data: IPublicTypeNodeSchema): void {\n    this[nodeSymbol].import(data);\n  }\n\n  /**\n   * 导出节点数据\n   * @param stage\n   * @param options\n   * @returns\n   */\n  exportSchema(\n      stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Render,\n      options?: any,\n    ): IPublicTypeNodeSchema {\n    return this[nodeSymbol].export(stage, options);\n  }\n\n  /**\n   * 在指定位置之前插入一个节点\n   * @param node\n   * @param ref\n   * @param useMutator\n   */\n  insertBefore(\n      node: IPublicModelNode,\n      ref?: IPublicModelNode | undefined,\n      useMutator?: boolean,\n    ): void {\n    this[nodeSymbol].insertBefore(\n        (node as any)[nodeSymbol] || node,\n        (ref as any)?.[nodeSymbol],\n        useMutator,\n      );\n  }\n\n  /**\n   * 在指定位置之后插入一个节点\n   * @param node\n   * @param ref\n   * @param useMutator\n   */\n  insertAfter(\n      node: IPublicModelNode,\n      ref?: IPublicModelNode | undefined,\n      useMutator?: boolean,\n    ): void {\n    this[nodeSymbol].insertAfter(\n        (node as any)[nodeSymbol] || node,\n        (ref as any)?.[nodeSymbol],\n        useMutator,\n      );\n  }\n\n  /**\n   * 替换指定节点\n   * @param node 待替换的子节点\n   * @param data 用作替换的节点对象或者节点描述\n   * @returns\n   */\n  replaceChild(node: IPublicModelNode, data: any): IPublicModelNode | null {\n    return Node.create(this[nodeSymbol].replaceChild((node as any)[nodeSymbol], data));\n  }\n\n  /**\n   * 将当前节点替换成指定节点描述\n   * @param schema\n   */\n  replaceWith(schema: IPublicTypeNodeSchema): any {\n    this[nodeSymbol].replaceWith(schema);\n  }\n\n  /**\n   * 选中当前节点实例\n   */\n  select(): void {\n    this[nodeSymbol].select();\n  }\n\n  /**\n   * 设置悬停态\n   * @param flag\n   */\n  hover(flag = true): void {\n    this[nodeSymbol].hover(flag);\n  }\n\n  /**\n   * 删除当前节点实例\n   */\n  remove(): void {\n    this[nodeSymbol].remove();\n  }\n\n  /**\n   * @deprecated\n   * 设置为磁贴布局节点\n   */\n  set isRGLContainer(flag: boolean) {\n    this[nodeSymbol].isRGLContainerNode = flag;\n  }\n\n  /**\n   * @deprecated\n   * 获取磁贴布局节点设置状态\n   * @returns Boolean\n   */\n  get isRGLContainer() {\n    return this[nodeSymbol].isRGLContainerNode;\n  }\n\n  /**\n   * 设置为磁贴布局节点\n   */\n  set isRGLContainerNode(flag: boolean) {\n    this[nodeSymbol].isRGLContainerNode = flag;\n  }\n\n  /**\n   * 获取磁贴布局节点设置状态\n   * @returns Boolean\n   */\n  get isRGLContainerNode() {\n    return this[nodeSymbol].isRGLContainerNode;\n  }\n\n  internalToShellNode() {\n    return this;\n  }\n\n  canPerformAction(actionName: string): boolean {\n    return this[nodeSymbol].canPerformAction(actionName);\n  }\n\n  /**\n   * get conditionGroup\n   * @since v1.1.0\n   */\n  get conditionGroup(): IPublicModelExclusiveGroup | null {\n    return this[nodeSymbol].conditionGroup;\n  }\n\n  /**\n   * set value for conditionalVisible\n   * @since v1.1.0\n   */\n  setConditionalVisible(): void {\n    this[nodeSymbol].setConditionalVisible();\n  }\n}\n","import { Node as ShellNode } from './node';\nimport {\n  Detecting as InnerDetecting,\n  IDocumentModel as InnerDocumentModel,\n  INode as InnerNode,\n} from '@alilc/lowcode-designer';\nimport { documentSymbol, detectingSymbol } from '../symbols';\nimport { IPublicModelDetecting, IPublicModelNode, IPublicTypeDisposable } from '@alilc/lowcode-types';\n\nexport class Detecting implements IPublicModelDetecting {\n  private readonly [documentSymbol]: InnerDocumentModel;\n  private readonly [detectingSymbol]: InnerDetecting;\n\n  constructor(document: InnerDocumentModel) {\n    this[documentSymbol] = document;\n    this[detectingSymbol] = document.designer?.detecting;\n  }\n\n  /**\n   * 控制大纲树 hover 时是否出现悬停效果\n   */\n  get enable(): boolean {\n    return this[detectingSymbol].enable;\n  }\n\n  /**\n   * 当前 hover 的节点\n   */\n  get current() {\n    return ShellNode.create(this[detectingSymbol].current);\n  }\n\n  /**\n   * hover 指定节点\n   * @param id 节点 id\n   */\n  capture(id: string) {\n    this[detectingSymbol].capture(this[documentSymbol].getNode(id));\n  }\n\n  /**\n   * hover 离开指定节点\n   * @param id 节点 id\n   */\n  release(id: string) {\n    this[detectingSymbol].release(this[documentSymbol].getNode(id));\n  }\n\n  /**\n   * 清空 hover 态\n   */\n  leave() {\n    this[detectingSymbol].leave(this[documentSymbol]);\n  }\n\n  onDetectingChange(fn: (node: IPublicModelNode | null) => void): IPublicTypeDisposable {\n    const innerFn = (innerNode: InnerNode) => {\n      const shellNode = ShellNode.create(innerNode);\n      fn(shellNode);\n    };\n    return this[detectingSymbol].onDetectingChange(innerFn);\n  }\n}","import { dragObjectSymbol } from '../symbols';\nimport { IPublicModelDragObject, IPublicModelDragObject as InnerDragObject, IPublicTypeDragNodeDataObject } from '@alilc/lowcode-types';\nimport { Node } from './node';\n\nexport class DragObject implements IPublicModelDragObject {\n  private readonly [dragObjectSymbol]: InnerDragObject;\n\n  constructor(dragObject: InnerDragObject) {\n    this[dragObjectSymbol] = dragObject;\n  }\n\n  static create(dragObject: InnerDragObject | null): IPublicModelDragObject | null {\n    if (!dragObject) {\n      return null;\n    }\n    return new DragObject(dragObject);\n  }\n\n  get type(): any {\n    return this[dragObjectSymbol].type;\n  }\n\n  get nodes(): any {\n    const { nodes } = this[dragObjectSymbol];\n    if (!nodes) {\n      return null;\n    }\n    return nodes.map(Node.create);\n  }\n\n  get data(): any {\n    return (this[dragObjectSymbol] as IPublicTypeDragNodeDataObject).data;\n  }\n}","import { ILocateEvent as InnerLocateEvent } from '@alilc/lowcode-designer';\nimport { locateEventSymbol } from '../symbols';\nimport { DragObject } from './drag-object';\nimport { IPublicModelLocateEvent, IPublicModelDragObject } from '@alilc/lowcode-types';\n\nexport default class LocateEvent implements IPublicModelLocateEvent {\n  private readonly [locateEventSymbol]: InnerLocateEvent;\n\n  constructor(locateEvent: InnerLocateEvent) {\n    this[locateEventSymbol] = locateEvent;\n  }\n\n  static create(locateEvent: InnerLocateEvent): IPublicModelLocateEvent | null {\n    if (!locateEvent) {\n      return null;\n    }\n    return new LocateEvent(locateEvent);\n  }\n\n  get type(): string {\n    return this[locateEventSymbol].type;\n  }\n\n  get globalX(): number {\n    return this[locateEventSymbol].globalX;\n  }\n\n  get globalY(): number {\n    return this[locateEventSymbol].globalY;\n  }\n\n  get originalEvent(): MouseEvent | DragEvent {\n    return this[locateEventSymbol].originalEvent;\n  }\n\n  get target(): Element | null | undefined {\n    return this[locateEventSymbol].target;\n  }\n\n  get canvasX(): number | undefined {\n    return this[locateEventSymbol].canvasX;\n  }\n\n  get canvasY(): number | undefined {\n    return this[locateEventSymbol].canvasY;\n  }\n\n  get dragObject(): IPublicModelDragObject | null {\n    return DragObject.create(this[locateEventSymbol].dragObject);\n  }\n}","import {\n  ILocateEvent as InnerLocateEvent,\n} from '@alilc/lowcode-designer';\nimport { dragonSymbol, nodeSymbol } from '../symbols';\nimport LocateEvent from './locate-event';\nimport { DragObject } from './drag-object';\nimport { globalContext } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicModelDragon,\n  IPublicModelLocateEvent,\n  IPublicModelDragObject,\n  IPublicTypeDragNodeDataObject,\n  IPublicModelNode,\n} from '@alilc/lowcode-types';\n\nexport const innerDragonSymbol = Symbol('innerDragonSymbol');\n\nexport class Dragon implements IPublicModelDragon {\n  private readonly [innerDragonSymbol]: IPublicModelDragon;\n\n  constructor(innerDragon: IPublicModelDragon, readonly workspaceMode: boolean) {\n    this[innerDragonSymbol] = innerDragon;\n  }\n\n  get [dragonSymbol](): any {\n    if (this.workspaceMode) {\n      return this[innerDragonSymbol];\n    }\n    const workspace = globalContext.get('workspace');\n    let editor = globalContext.get('editor');\n\n    if (workspace.isActive) {\n      editor = workspace.window.editor;\n    }\n\n    const designer = editor.get('designer');\n    return designer.dragon;\n  }\n\n  static create(\n      dragon: IPublicModelDragon | null,\n      workspaceMode: boolean,\n    ): IPublicModelDragon | null {\n    if (!dragon) {\n      return null;\n    }\n    return new Dragon(dragon, workspaceMode);\n  }\n\n  /**\n   * is dragging or not\n   */\n  get dragging(): boolean {\n    return this[dragonSymbol].dragging;\n  }\n\n  /**\n   * 绑定 dragstart 事件\n   * @param func\n   * @returns\n   */\n  onDragstart(func: (e: IPublicModelLocateEvent) => any): () => void {\n    return this[dragonSymbol].onDragstart((e: InnerLocateEvent) => func(LocateEvent.create(e)!));\n  }\n\n  /**\n   * 绑定 drag 事件\n   * @param func\n   * @returns\n   */\n  onDrag(func: (e: IPublicModelLocateEvent) => any): () => void {\n    return this[dragonSymbol].onDrag((e: InnerLocateEvent) => func(LocateEvent.create(e)!));\n  }\n\n  /**\n   * 绑定 dragend 事件\n   * @param func\n   * @returns\n   */\n  onDragend(func: (o: { dragObject: IPublicModelDragObject; copy?: boolean }) => any): () => void {\n    return this[dragonSymbol].onDragend(\n      (o: { dragObject: IPublicModelDragObject; copy?: boolean }) => {\n        const dragObject = DragObject.create(o.dragObject);\n        const { copy } = o;\n        return func({ dragObject: dragObject!, copy });\n      },\n    );\n  }\n\n  /**\n   * 设置拖拽监听的区域 shell，以及自定义拖拽转换函数 boost\n   * @param shell 拖拽监听的区域\n   * @param boost 拖拽转换函数\n   */\n  from(shell: Element, boost: (e: MouseEvent) => IPublicTypeDragNodeDataObject | null): any {\n    return this[dragonSymbol].from(shell, boost);\n  }\n\n  /**\n   * boost your dragObject for dragging(flying) 发射拖拽对象\n   *\n   * @param dragObject 拖拽对象\n   * @param boostEvent 拖拽初始时事件\n   */\n  boost(dragObject: DragObject, boostEvent: MouseEvent | DragEvent, fromRglNode?: Node | IPublicModelNode): void {\n    return this[dragonSymbol].boost({\n      ...dragObject,\n      nodes: dragObject.nodes.map((node: any) => node[nodeSymbol]),\n    }, boostEvent, fromRglNode);\n  }\n\n  /**\n   * 添加投放感应区\n   */\n  addSensor(sensor: any): void {\n    return this[dragonSymbol].addSensor(sensor);\n  }\n\n  /**\n   * 移除投放感应\n   */\n  removeSensor(sensor: any): void {\n    return this[dragonSymbol].removeSensor(sensor);\n  }\n}\n","import { IPublicModelResource } from '@alilc/lowcode-types';\nimport { Resource as InnerResource } from '@alilc/lowcode-workspace';\nimport { resourceSymbol } from '../symbols';\n\nexport class Resource implements IPublicModelResource {\n  readonly [resourceSymbol]: InnerResource;\n\n  constructor(resource: InnerResource) {\n    this[resourceSymbol] = resource;\n  }\n\n  get title() {\n    return this[resourceSymbol].title;\n  }\n\n  get icon() {\n    return this[resourceSymbol].icon;\n  }\n\n  get options() {\n    return this[resourceSymbol].options;\n  }\n\n  get name() {\n    return this[resourceSymbol].resourceType.name;\n  }\n\n  get type() {\n    return this[resourceSymbol].resourceType.type;\n  }\n\n  get category() {\n    return this[resourceSymbol].category;\n  }\n\n  get children() {\n    return this[resourceSymbol].children.map((child) => new Resource(child));\n  }\n\n  get viewType() {\n    return this[resourceSymbol].viewType;\n  }\n}","import { IPublicModelActiveTracker, IPublicModelNode, IPublicTypeActiveTarget } from '@alilc/lowcode-types';\nimport { IActiveTracker as InnerActiveTracker, ActiveTarget } from '@alilc/lowcode-designer';\nimport { Node as ShellNode } from './node';\nimport { nodeSymbol } from '../symbols';\n\nconst activeTrackerSymbol = Symbol('activeTracker');\n\nexport class ActiveTracker implements IPublicModelActiveTracker {\n  private readonly [activeTrackerSymbol]: InnerActiveTracker;\n\n  constructor(innerTracker: InnerActiveTracker) {\n    this[activeTrackerSymbol] = innerTracker;\n  }\n\n  onChange(fn: (target: IPublicTypeActiveTarget) => void): () => void {\n    if (!fn) {\n      return () => {};\n    }\n    return this[activeTrackerSymbol].onChange((t: ActiveTarget) => {\n      const { node: innerNode, detail, instance } = t;\n      const publicNode = ShellNode.create(innerNode);\n      const publicActiveTarget = {\n        node: publicNode!,\n        detail,\n        instance,\n      };\n      fn(publicActiveTarget);\n    });\n  }\n\n  track(node: IPublicModelNode) {\n    this[activeTrackerSymbol].track((node as any)[nodeSymbol]);\n  }\n}","import { ILowCodePluginRuntime } from '@alilc/lowcode-designer';\nimport { IPublicModelPluginInstance } from '@alilc/lowcode-types';\nimport { pluginInstanceSymbol } from '../symbols';\n\nexport class PluginInstance implements IPublicModelPluginInstance {\n  private readonly [pluginInstanceSymbol]: ILowCodePluginRuntime;\n\n  constructor(pluginInstance: ILowCodePluginRuntime) {\n    this[pluginInstanceSymbol] = pluginInstance;\n  }\n\n  get pluginName(): string {\n    return this[pluginInstanceSymbol].name;\n  }\n\n  get dep(): string[] {\n    return this[pluginInstanceSymbol].dep;\n  }\n\n  get disabled(): boolean {\n    return this[pluginInstanceSymbol].disabled;\n  }\n\n  set disabled(disabled: boolean) {\n    this[pluginInstanceSymbol].setDisabled(disabled);\n  }\n\n  get meta() {\n    return this[pluginInstanceSymbol].meta;\n  }\n}\n","import { windowSymbol } from '../symbols';\nimport { IPublicModelResource, IPublicModelWindow, IPublicTypeDisposable } from '@alilc/lowcode-types';\nimport { EditorWindow } from '@alilc/lowcode-workspace';\nimport { Resource as ShellResource } from './resource';\n\nexport class Window implements IPublicModelWindow {\n  private readonly [windowSymbol]: EditorWindow;\n\n  get id() {\n    return this[windowSymbol]?.id;\n  }\n\n  get title() {\n    return this[windowSymbol].title;\n  }\n\n  get icon() {\n    return this[windowSymbol].icon;\n  }\n\n  get resource(): IPublicModelResource {\n    return new ShellResource(this[windowSymbol].resource);\n  }\n\n  constructor(editorWindow: EditorWindow) {\n    this[windowSymbol] = editorWindow;\n  }\n\n  importSchema(schema: any): any {\n    this[windowSymbol].importSchema(schema);\n  }\n\n  changeViewType(viewName: string) {\n    this[windowSymbol].changeViewType(viewName, false);\n  }\n\n  onChangeViewType(fun: (viewName: string) => void): IPublicTypeDisposable {\n    return this[windowSymbol].onChangeViewType(fun);\n  }\n\n  async save() {\n    return await this[windowSymbol].save();\n  }\n}\n","import { IPublicModelClipboard } from '@alilc/lowcode-types';\nimport { clipboardSymbol } from '../symbols';\nimport { IClipboard, clipboard } from '@alilc/lowcode-designer';\n\nexport class Clipboard implements IPublicModelClipboard {\n  private readonly [clipboardSymbol]: IClipboard;\n\n  constructor() {\n    this[clipboardSymbol] = clipboard;\n  }\n\n  setData(data: any): void {\n    this[clipboardSymbol].setData(data);\n  }\n\n  waitPasteData(\n      keyboardEvent: KeyboardEvent,\n      cb: (data: any, clipboardEvent: ClipboardEvent) => void,\n    ): void {\n    this[clipboardSymbol].waitPasteData(keyboardEvent, cb);\n  }\n}","import { ReactElement } from 'react';\nimport { obx, computed, autorun, makeObservable, runInAction, wrapWithEventSwitch, action, createModuleEventBus, IEventBus } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicTypeNodeSchema,\n  IPublicTypePropsMap,\n  IPublicTypePropsList,\n  IPublicTypeNodeData,\n  IPublicTypeI18nData,\n  IPublicTypeSlotSchema,\n  IPublicTypePageSchema,\n  IPublicTypeComponentSchema,\n  IPublicTypeCompositeValue,\n  GlobalEvent,\n  IPublicTypeComponentAction,\n  IPublicModelNode,\n  IPublicModelExclusiveGroup,\n  IPublicEnumTransformStage,\n  IPublicTypeDisposable,\n} from '@alilc/lowcode-types';\nimport { compatStage, isDOMText, isJSExpression, isNode } from '@alilc/lowcode-utils';\nimport { SettingTopEntry } from '@alilc/lowcode-designer';\nimport { Props, getConvertedExtraKey, IProps } from './props/props';\nimport { DocumentModel, IDocumentModel } from '../document-model';\nimport { NodeChildren, INodeChildren } from './node-children';\nimport { IProp, Prop } from './props/prop';\nimport { ComponentMeta, IComponentMeta } from '../../component-meta';\nimport { ExclusiveGroup, isExclusiveGroup } from './exclusive-group';\nimport { includeSlot, removeSlot } from '../../utils/slot';\nimport { foreachReverse } from '../../utils/tree';\nimport { NodeRemoveOptions, EDITOR_EVENT } from '../../types';\nimport { Prop as ShellProp } from '@alilc/lowcode-shell';\n\nexport interface NodeStatus {\n  locking: boolean;\n  pseudo: boolean;\n  inPlaceEditing: boolean;\n}\n\nexport interface INode extends IPublicModelNode {\n\n  /**\n   * 当前节点子集\n   */\n  get children(): INodeChildren | null;\n\n  /**\n   * 获取上一个兄弟节点\n   */\n  get prevSibling(): INode | null;\n\n  /**\n   * 获取下一个兄弟节点\n   */\n  get nextSibling(): INode | null;\n\n  /**\n   * 父级节点\n   */\n  get parent(): INode | null;\n\n  get slots(): INode[];\n\n  /**\n   * 关联属性\n   */\n  get slotFor(): IProp | null;\n\n  get props(): IProps;\n\n  get componentMeta(): IComponentMeta;\n\n  get document(): IDocumentModel;\n\n  setVisible(flag: boolean): void;\n\n  getVisible(): boolean;\n\n  /**\n   * 内部方法，请勿使用\n   * @param useMutator 是否触发联动逻辑\n   */\n  internalSetParent(parent: INode | null, useMutator: boolean): void;\n\n  setConditionGroup(grp: IPublicModelExclusiveGroup | string | null): void;\n\n  internalToShellNode(): IPublicModelNode | null;\n\n  internalPurgeStart(): void;\n\n  unlinkSlot(slotNode: Node): void;\n\n  didDropOut(dragment: Node): void;\n\n  /**\n   * 导出 schema\n   */\n  export(stage: IPublicEnumTransformStage, options?: any): IPublicTypeNodeSchema;\n\n  emitPropChange(val: IPublicTypePropChangeOptions): void;\n\n  import(data: IPublicTypeNodeSchema, checkId?: boolean): void;\n\n  internalSetSlotFor(slotFor: Prop | null | undefined): void;\n\n  addSlot(slotNode: INode): void;\n\n  onVisibleChange(func: (flag: boolean) => any): () => void;\n\n  getProp(path: string, createIfNone?: boolean): IProp | null;\n\n  getExtraProp(key: string, createIfNone?: boolean): IProp | null;\n\n  replaceChild(node: INode, data: any): INode;\n\n  getSuitablePlace(node: INode, ref: any): any;\n\n  onChildrenChange(fn: (param?: { type: string; node: INode }) => void): IPublicTypeDisposable;\n\n  onPropChange(func: (info: IPublicTypePropChangeOptions) => void): IPublicTypeDisposable;\n}\n\n/**\n * 基础节点\n *\n * [Node Properties]\n *  componentName: Page/Block/Component\n *  props\n *  children\n *\n * [Directives]\n *  loop\n *  loopArgs\n *  condition\n *  ------- addition support -----\n *  conditionGroup use for condition, for exclusive\n *  title          display on outline\n *  ignored        ignore this node will not publish to render, but will store\n *  isLocked       can not select/hover/ item on canvas and outline\n *  hidden         not visible on canvas\n *  slotArgs       like loopArgs, for slot node\n *\n * 根容器节点\n *\n * [Node Properties]\n *  componentName: Page/Block/Component\n *  props\n *  children\n *\n * [Root Container Extra Properties]\n *  fileName\n *  meta\n *  state\n *  defaultProps\n *  dataSource\n *  lifeCycles\n *  methods\n *  css\n *\n * [Directives **not used**]\n *  loop\n *  loopArgs\n *  condition\n *  ------- future support -----\n *  conditionGroup\n *  title\n *  ignored\n *  isLocked\n *  hidden\n */\nexport class Node<Schema extends IPublicTypeNodeSchema = IPublicTypeNodeSchema> implements INode {\n  private emitter: IEventBus;\n\n  /**\n   * 是节点实例\n   */\n  readonly isNode = true;\n\n  /**\n   * 节点 id\n   */\n  readonly id: string;\n\n  /**\n   * 节点组件类型\n   * 特殊节点：\n   *  * Page 页面\n   *  * Block 区块\n   *  * Component 组件/元件\n   *  * Fragment 碎片节点，无 props，有指令\n   *  * Leaf 文字节点 | 表达式节点，无 props，无指令？\n   *  * Slot 插槽节点，无 props，正常 children，有 slotArgs，有指令\n   */\n  readonly componentName: string;\n\n  /**\n   * 属性抽象\n   */\n  props: IProps;\n\n  protected _children?: INodeChildren;\n\n  /**\n   * @deprecated\n   */\n  private _addons: { [key: string]: { exportData: () => any; isProp: boolean } } = {};\n\n  @obx.ref private _parent: INode | null = null;\n\n  /**\n   * 父级节点\n   */\n  get parent(): INode | null {\n    return this._parent;\n  }\n\n  /**\n   * 当前节点子集\n   */\n  get children(): INodeChildren | null {\n    return this._children || null;\n  }\n\n  /**\n   * 当前节点深度\n   */\n  @computed get zLevel(): number {\n    if (this._parent) {\n      return this._parent.zLevel + 1;\n    }\n    return 0;\n  }\n\n  @computed get title(): string | IPublicTypeI18nData | ReactElement {\n    let t = this.getExtraProp('title');\n    // TODO: 暂时走不到这个分支\n    // if (!t && this.componentMeta.descriptor) {\n    //   t = this.getProp(this.componentMeta.descriptor, false);\n    // }\n    if (t) {\n      const v = t.getAsString();\n      if (v) {\n        return v;\n      }\n    }\n    return this.componentMeta.title;\n  }\n\n  get icon() {\n    return this.componentMeta.icon;\n  }\n\n  isInited = false;\n\n  _settingEntry: SettingTopEntry;\n\n  get settingEntry(): SettingTopEntry {\n    if (this._settingEntry) return this._settingEntry;\n    this._settingEntry = this.document.designer.createSettingEntry([this]);\n    return this._settingEntry;\n  }\n\n  private autoruns?: Array<() => void>;\n\n  private _isRGLContainer = false;\n\n  set isRGLContainer(status: boolean) {\n    this._isRGLContainer = status;\n  }\n\n  get isRGLContainer(): boolean {\n    return !!this._isRGLContainer;\n  }\n\n  set isRGLContainerNode(status: boolean) {\n    this._isRGLContainer = status;\n  }\n\n  get isRGLContainerNode(): boolean {\n    return !!this._isRGLContainer;\n  }\n\n  private _slotFor?: IProp | null = null;\n\n  @obx.shallow _slots: INode[] = [];\n\n  get slots(): INode[] {\n    return this._slots;\n  }\n\n  /* istanbul ignore next */\n  @obx.ref private _conditionGroup: IPublicModelExclusiveGroup | null = null;\n\n  /* istanbul ignore next */\n  get conditionGroup(): IPublicModelExclusiveGroup | null {\n    return this._conditionGroup;\n  }\n\n  private purged = false;\n\n  /**\n   * 是否已销毁\n   */\n  get isPurged() {\n    return this.purged;\n  }\n\n  private purging: boolean = false;\n\n  /**\n   * 是否正在销毁\n   */\n  get isPurging() {\n    return this.purging;\n  }\n\n  @obx.shallow status: NodeStatus = {\n    inPlaceEditing: false,\n    locking: false,\n    pseudo: false,\n  };\n\n  constructor(readonly document: IDocumentModel, nodeSchema: Schema, options: any = {}) {\n    makeObservable(this);\n    const { componentName, id, children, props, ...extras } = nodeSchema;\n    this.id = document.nextId(id);\n    this.componentName = componentName;\n    if (this.componentName === 'Leaf') {\n      this.props = new Props(this, {\n        children: isDOMText(children) || isJSExpression(children) ? children : '',\n      });\n    } else {\n      this.props = new Props(this, props, extras);\n      this._children = new NodeChildren(this as INode, this.initialChildren(children));\n      this._children.internalInitParent();\n      this.props.merge(\n        this.upgradeProps(this.initProps(props || {})),\n        this.upgradeProps(extras),\n      );\n      this.setupAutoruns();\n    }\n\n    this.initBuiltinProps();\n\n    this.isInited = true;\n    this.emitter = createModuleEventBus('Node');\n    const editor = this.document.designer.editor;\n    this.onVisibleChange((visible: boolean) => {\n      editor?.eventBus.emit(EDITOR_EVENT.NODE_VISIBLE_CHANGE, this, visible);\n    });\n    this.onChildrenChange((info?: { type: string; node: Node }) => {\n      editor?.eventBus.emit(EDITOR_EVENT.NODE_VISIBLE_CHANGE, info);\n    });\n  }\n\n  /**\n   * 节点初始化期间就把内置的一些 prop 初始化好，避免后续不断构造实例导致 reaction 执行多次\n   */\n  @action\n  private initBuiltinProps() {\n    this.props.has(getConvertedExtraKey('hidden')) || this.props.add(false, getConvertedExtraKey('hidden'));\n    this.props.has(getConvertedExtraKey('title')) || this.props.add('', getConvertedExtraKey('title'));\n    this.props.has(getConvertedExtraKey('isLocked')) || this.props.add(false, getConvertedExtraKey('isLocked'));\n    this.props.has(getConvertedExtraKey('condition')) || this.props.add(true, getConvertedExtraKey('condition'));\n    this.props.has(getConvertedExtraKey('conditionGroup')) || this.props.add('', getConvertedExtraKey('conditionGroup'));\n    this.props.has(getConvertedExtraKey('loop')) || this.props.add(undefined, getConvertedExtraKey('loop'));\n  }\n\n  @action\n  private initProps(props: any): any {\n    return this.document.designer.transformProps(props, this, IPublicEnumTransformStage.Init);\n  }\n\n  @action\n  private upgradeProps(props: any): any {\n    return this.document.designer.transformProps(props, this, IPublicEnumTransformStage.Upgrade);\n  }\n\n  private setupAutoruns() {\n    const { autoruns } = this.componentMeta.advanced;\n    if (!autoruns || autoruns.length < 1) {\n      return;\n    }\n    this.autoruns = autoruns.map((item) => {\n      return autorun(() => {\n        item.autorun(ShellProp.create(this.props.get(item.name, true))!);\n      });\n    });\n  }\n\n  private initialChildren(children: any): IPublicTypeNodeData[] {\n    // FIXME! this is dirty code\n    if (children == null) {\n      const { initialChildren } = this.componentMeta.advanced;\n      if (initialChildren) {\n        if (typeof initialChildren === 'function') {\n          return initialChildren(this as any) || [];\n        }\n        return initialChildren;\n      }\n    }\n    return children || [];\n  }\n\n  isContainer(): boolean {\n    return this.isContainerNode;\n  }\n\n  get isContainerNode(): boolean {\n    return this.isParentalNode && this.componentMeta.isContainer;\n  }\n\n  isModal(): boolean {\n    return this.isModalNode;\n  }\n\n  get isModalNode(): boolean {\n    return this.componentMeta.isModal;\n  }\n\n  isRoot(): boolean {\n    return this.isRootNode;\n  }\n\n  get isRootNode(): boolean {\n    return this.document.rootNode === (this as any);\n  }\n\n  isPage(): boolean {\n    return this.isPageNode;\n  }\n\n  get isPageNode(): boolean {\n    return this.isRootNode && this.componentName === 'Page';\n  }\n\n  isComponent(): boolean {\n    return this.isComponentNode;\n  }\n\n  get isComponentNode(): boolean {\n    return this.isRootNode && this.componentName === 'Component';\n  }\n\n  isSlot(): boolean {\n    return this.isSlotNode;\n  }\n\n  get isSlotNode(): boolean {\n    return this._slotFor != null && this.componentName === 'Slot';\n  }\n\n  /**\n   * 是否一个父亲类节点\n   */\n  isParental(): boolean {\n    return this.isParentalNode;\n  }\n\n  get isParentalNode(): boolean {\n    return !this.isLeafNode;\n  }\n\n  /**\n   * 终端节点，内容一般为 文字 或者 表达式\n   */\n  isLeaf(): boolean {\n    return this.isLeafNode;\n  }\n  get isLeafNode(): boolean {\n    return this.componentName === 'Leaf';\n  }\n\n  internalSetWillPurge() {\n    this.internalSetParent(null);\n    this.document.addWillPurge(this);\n  }\n\n  private didDropIn(dragment: Node) {\n    const { callbacks } = this.componentMeta.advanced;\n    if (callbacks?.onNodeAdd) {\n      const cbThis = this.internalToShellNode();\n      callbacks?.onNodeAdd.call(cbThis, dragment.internalToShellNode(), cbThis);\n    }\n    if (this._parent) {\n      this._parent.didDropIn(dragment);\n    }\n  }\n\n  private didDropOut(dragment: Node) {\n    const { callbacks } = this.componentMeta.advanced;\n    if (callbacks?.onNodeRemove) {\n      const cbThis = this.internalToShellNode();\n      callbacks?.onNodeRemove.call(cbThis, dragment.internalToShellNode(), cbThis);\n    }\n    if (this._parent) {\n      this._parent.didDropOut(dragment);\n    }\n  }\n\n  /**\n   * 内部方法，请勿使用\n   * @param useMutator 是否触发联动逻辑\n   */\n  internalSetParent(parent: INode | null, useMutator = false) {\n    if (this._parent === parent) {\n      return;\n    }\n\n    // 解除老的父子关系，但不需要真的删除节点\n    if (this._parent) {\n      if (this.isSlot()) {\n        this._parent.unlinkSlot(this);\n      } else {\n        this._parent.children?.unlinkChild(this);\n      }\n    }\n    if (useMutator) {\n      this._parent?.didDropOut(this);\n    }\n    if (parent) {\n      // 建立新的父子关系，尤其注意：对于 parent 为 null 的场景，不会赋值，因为 subtreeModified 等事件可能需要知道该 node 被删除前的父子关系\n      this._parent = parent;\n      this.document.removeWillPurge(this);\n      /* istanbul ignore next */\n      if (!this.conditionGroup) {\n        // initial conditionGroup\n        const grp = this.getExtraProp('conditionGroup', false)?.getAsString();\n        if (grp) {\n          this.setConditionGroup(grp);\n        }\n      }\n\n      if (useMutator) {\n        parent.didDropIn(this);\n      }\n    }\n  }\n\n  internalSetSlotFor(slotFor: Prop | null | undefined) {\n    this._slotFor = slotFor;\n  }\n\n  internalToShellNode(): IPublicModelNode | null {\n    return this.document.designer.shellModelFactory.createNode(this);\n  }\n\n  /**\n   * 关联属性\n   */\n  get slotFor(): IProp | null {\n    return this._slotFor;\n  }\n\n  /**\n   * 移除当前节点\n   */\n  remove(\n    useMutator = true,\n    purge = true,\n    options: NodeRemoveOptions = { suppressRemoveEvent: false },\n  ) {\n    if (this.parent) {\n      if (!options.suppressRemoveEvent) {\n        this.document.designer.editor?.eventBus.emit('node.remove.topLevel', {\n          node: this,\n          index: this.parent?.children?.indexOf(this),\n        });\n      }\n      if (this.isSlot()) {\n        this.parent.removeSlot(this, purge);\n        this.parent.children.internalDelete(this, purge, useMutator, { suppressRemoveEvent: true });\n      } else {\n        this.parent.children.internalDelete(this, purge, useMutator, { suppressRemoveEvent: true });\n      }\n    }\n  }\n\n  /**\n   * 锁住当前节点\n   */\n  lock(flag = true) {\n    this.setExtraProp('isLocked', flag);\n  }\n\n  /**\n   * 获取当前节点的锁定状态\n   */\n  get isLocked(): boolean {\n    return !!this.getExtraProp('isLocked')?.getValue();\n  }\n\n  /**\n   * 选择当前节点\n   */\n  select() {\n    this.document.selection.select(this.id);\n  }\n\n  /**\n   * 悬停高亮\n   */\n  hover(flag = true) {\n    if (flag) {\n      this.document.designer.detecting.capture(this);\n    } else {\n      this.document.designer.detecting.release(this);\n    }\n  }\n\n  /**\n   * 节点组件描述\n   */\n  @computed get componentMeta(): ComponentMeta {\n    return this.document.getComponentMeta(this.componentName);\n  }\n\n  @computed get propsData(): IPublicTypePropsMap | IPublicTypePropsList | null {\n    if (!this.isParental() || this.componentName === 'Fragment') {\n      return null;\n    }\n    return this.props.export(IPublicEnumTransformStage.Serilize).props || null;\n  }\n\n  hasSlots() {\n    return this._slots.length > 0;\n  }\n\n  /* istanbul ignore next */\n  setConditionGroup(grp: IPublicModelExclusiveGroup | string | null) {\n    if (!grp) {\n      this.getExtraProp('conditionGroup', false)?.remove();\n      if (this._conditionGroup) {\n        this._conditionGroup.remove(this);\n        this._conditionGroup = null;\n      }\n      return;\n    }\n    if (!isExclusiveGroup(grp)) {\n      if (this.prevSibling?.conditionGroup?.name === grp) {\n        grp = this.prevSibling.conditionGroup;\n      } else if (this.nextSibling?.conditionGroup?.name === grp) {\n        grp = this.nextSibling.conditionGroup;\n      } else {\n        grp = new ExclusiveGroup(grp);\n      }\n    }\n    if (this._conditionGroup !== grp) {\n      this.getExtraProp('conditionGroup', true)?.setValue(grp.name);\n      if (this._conditionGroup) {\n        this._conditionGroup.remove(this);\n      }\n      this._conditionGroup = grp;\n      grp.add(this);\n    }\n  }\n\n  /* istanbul ignore next */\n  isConditionalVisible(): boolean | undefined {\n    return this._conditionGroup?.isVisible(this);\n  }\n\n  /* istanbul ignore next */\n  setConditionalVisible() {\n    this._conditionGroup?.setVisible(this);\n  }\n\n  hasCondition() {\n    const v = this.getExtraProp('condition', false)?.getValue();\n    return v != null && v !== '' && v !== true;\n  }\n\n  /**\n   * has loop when 1. loop is validArray with length > 1 ; OR  2. loop is variable object\n   * @return boolean, has loop config or not\n   */\n  hasLoop() {\n    const value = this.getExtraProp('loop', false)?.getValue();\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    if (Array.isArray(value)) {\n      return true;\n    }\n    if (isJSExpression(value)) {\n      return true;\n    }\n    return false;\n  }\n\n  /* istanbul ignore next */\n  wrapWith(schema: Schema) {\n    const wrappedNode = this.replaceWith({ ...schema, children: [this.export()] });\n    return wrappedNode.children!.get(0);\n  }\n\n  replaceWith(schema: Schema, migrate = false): any {\n    // reuse the same id? or replaceSelection\n    schema = Object.assign({}, migrate ? this.export() : {}, schema);\n    return this.parent?.replaceChild(this, schema);\n  }\n\n  /**\n   * 替换子节点\n   *\n   * @param {INode} node\n   * @param {object} data\n   */\n  replaceChild(node: INode, data: any): INode {\n    if (this.children?.has(node)) {\n      const selected = this.document.selection.has(node.id);\n\n      delete data.id;\n      const newNode = this.document.createNode(data);\n\n      this.insertBefore(newNode, node, false);\n      node.remove(false);\n\n      if (selected) {\n        this.document.selection.select(newNode.id);\n      }\n      return newNode;\n    }\n    return node;\n  }\n\n  setVisible(flag: boolean): void {\n    this.getExtraProp('hidden')?.setValue(!flag);\n    this.emitter.emit('visibleChange', flag);\n  }\n\n  getVisible(): boolean {\n    return !this.getExtraProp('hidden')?.getValue();\n  }\n\n  onVisibleChange(func: (flag: boolean) => any): () => void {\n    const wrappedFunc = wrapWithEventSwitch(func);\n    this.emitter.on('visibleChange', wrappedFunc);\n    return () => {\n      this.emitter.removeListener('visibleChange', wrappedFunc);\n    };\n  }\n\n  getProp(path: string, createIfNone = true): IProp | null {\n    return this.props.query(path, createIfNone) || null;\n  }\n\n  getExtraProp(key: string, createIfNone = true): IProp | null {\n    return this.props.get(getConvertedExtraKey(key), createIfNone) || null;\n  }\n\n  setExtraProp(key: string, value: IPublicTypeCompositeValue) {\n    this.getProp(getConvertedExtraKey(key), true)?.setValue(value);\n  }\n\n  /**\n   * 获取单个属性值\n   */\n  getPropValue(path: string): any {\n    return this.getProp(path, false)?.value;\n  }\n\n  /**\n   * 设置单个属性值\n   */\n  setPropValue(path: string, value: any) {\n    this.getProp(path, true)!.setValue(value);\n  }\n\n  /**\n   * 清除已设置的值\n   */\n  clearPropValue(path: string): void {\n    this.getProp(path, false)?.unset();\n  }\n\n  /**\n   * 设置多个属性值，和原有值合并\n   */\n  mergeProps(props: IPublicTypePropsMap) {\n    this.props.merge(props);\n  }\n\n  /**\n   * 设置多个属性值，替换原有值\n   */\n  setProps(props?: IPublicTypePropsMap | IPublicTypePropsList | Props | null) {\n    if (props instanceof Props) {\n      this.props = props;\n      return;\n    }\n    this.props.import(props);\n  }\n\n  /**\n   * 获取节点在父容器中的索引\n   */\n  @computed get index(): number {\n    if (!this.parent) {\n      return -1;\n    }\n    return this.parent.children.indexOf(this);\n  }\n\n  /**\n   * 获取下一个兄弟节点\n   */\n  get nextSibling(): INode | null {\n    if (!this.parent) {\n      return null;\n    }\n    const { index } = this;\n    if (index < 0) {\n      return null;\n    }\n    return this.parent.children.get(index + 1);\n  }\n\n  /**\n   * 获取上一个兄弟节点\n   */\n  get prevSibling(): INode | null {\n    if (!this.parent) {\n      return null;\n    }\n    const { index } = this;\n    if (index < 1) {\n      return null;\n    }\n    return this.parent.children.get(index - 1);\n  }\n\n  /**\n   * 获取符合搭建协议-节点 schema 结构\n   */\n  get schema(): Schema {\n    return this.export(IPublicEnumTransformStage.Save);\n  }\n\n  set schema(data: Schema) {\n    runInAction(() => this.import(data));\n  }\n\n  import(data: Schema, checkId = false) {\n    const { componentName, id, children, props, ...extras } = data;\n    if (this.isSlot()) {\n      foreachReverse(\n        this.children!,\n        (subNode: Node) => {\n          subNode.remove(true, true);\n        },\n        (iterable, idx) => (iterable as NodeChildren).get(idx),\n      );\n    }\n    if (this.isParental()) {\n      this.props.import(props, extras);\n      (this._children as NodeChildren).import(children, checkId);\n    } else {\n      this.props\n        .get('children', true)!\n        .setValue(isDOMText(children) || isJSExpression(children) ? children : '');\n    }\n  }\n\n  toData() {\n    return this.export();\n  }\n\n  /**\n   * 导出 schema\n   */\n  export(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Save, options: any = {}): Schema {\n    stage = compatStage(stage);\n    const baseSchema: any = {\n      componentName: this.componentName,\n    };\n\n    if (stage !== IPublicEnumTransformStage.Clone) {\n      baseSchema.id = this.id;\n    }\n    if (stage === IPublicEnumTransformStage.Render) {\n      baseSchema.docId = this.document.id;\n    }\n\n    if (this.isLeaf()) {\n      if (!options.bypassChildren) {\n        baseSchema.children = this.props.get('children')?.export(stage);\n      }\n      return baseSchema;\n    }\n\n    const { props = {}, extras } = this.props.export(stage) || {};\n    const _extras_: { [key: string]: any } = {\n      ...extras,\n    };\n    /* istanbul ignore next */\n    Object.keys(this._addons).forEach((key) => {\n      const addon = this._addons[key];\n      if (addon) {\n        if (addon.isProp) {\n          (props as any)[getConvertedExtraKey(key)] = addon.exportData();\n        } else {\n          _extras_[key] = addon.exportData();\n        }\n      }\n    });\n\n    const schema: any = {\n      ...baseSchema,\n      props: this.document.designer.transformProps(props, this, stage),\n      ...this.document.designer.transformProps(_extras_, this, stage),\n    };\n\n    if (this.isParental() && this.children.size > 0 && !options.bypassChildren) {\n      schema.children = this.children.export(stage);\n    }\n\n    return schema;\n  }\n\n  /**\n   * 判断是否包含特定节点\n   */\n  contains(node: INode): boolean {\n    return contains(this, node);\n  }\n\n  /**\n   * 获取特定深度的父亲节点\n   */\n  getZLevelTop(zLevel: number): Node | null {\n    return getZLevelTop(this, zLevel);\n  }\n\n  /**\n   * 判断与其它节点的位置关系\n   *\n   *  16 thisNode contains otherNode\n   *  8  thisNode contained_by otherNode\n   *  2  thisNode before or after otherNode\n   *  0  thisNode same as otherNode\n   */\n  comparePosition(otherNode: Node): PositionNO {\n    return comparePosition(this, otherNode);\n  }\n\n  unlinkSlot(slotNode: Node) {\n    const i = this._slots.indexOf(slotNode);\n    if (i < 0) {\n      return false;\n    }\n    this._slots.splice(i, 1);\n  }\n\n  /**\n   * 删除一个Slot节点\n   */\n  removeSlot(slotNode: Node, purge = false): boolean {\n    // if (purge) {\n    //   // should set parent null\n    //   slotNode?.internalSetParent(null, false);\n    //   slotNode?.purge();\n    // }\n    // this.document.unlinkNode(slotNode);\n    // this.document.selection.remove(slotNode.id);\n    const i = this._slots.indexOf(slotNode);\n    if (i < 0) {\n      return false;\n    }\n    this._slots.splice(i, 1);\n    return false;\n  }\n\n  addSlot(slotNode: INode) {\n    const slotName = slotNode?.getExtraProp('name')?.getAsString();\n    // 一个组件下的所有 slot，相同 slotName 的 slot 应该是唯一的\n    if (includeSlot(this, slotName)) {\n      removeSlot(this, slotName);\n    }\n    slotNode.internalSetParent(this as INode, true);\n    this._slots.push(slotNode);\n  }\n\n  /**\n   * 当前node对应组件是否已注册可用\n   */\n  isValidComponent() {\n    const allComponents = this.document?.designer?.componentsMap;\n    if (allComponents && allComponents[this.componentName]) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * 删除一个节点\n   * @param node\n   */\n  removeChild(node: Node) {\n    this.children?.delete(node);\n  }\n\n  /**\n   * 销毁\n   */\n  purge() {\n    if (this.purged) {\n      return;\n    }\n    this.purged = true;\n    this.autoruns?.forEach((dispose) => dispose());\n    this.props.purge();\n    this.settingEntry?.purge();\n    // this.document.destroyNode(this);\n  }\n\n  internalPurgeStart() {\n    this.purging = true;\n  }\n\n  /**\n   * 是否可执行某action\n   */\n  canPerformAction(actionName: string): boolean {\n    const availableActions =\n      this.componentMeta?.availableActions?.filter((action: IPublicTypeComponentAction) => {\n        const { condition } = action;\n        return typeof condition === 'function' ?\n          condition(this) !== false :\n          condition !== false;\n      })\n      .map((action: IPublicTypeComponentAction) => action.name) || [];\n\n    return availableActions.indexOf(actionName) >= 0;\n  }\n\n  // ======= compatible apis ====\n  isEmpty(): boolean {\n    return this.children ? this.children.isEmpty() : true;\n  }\n\n  getChildren() {\n    return this.children;\n  }\n\n  getComponentName() {\n    return this.componentName;\n  }\n\n  insert(node: Node, ref?: Node, useMutator = true) {\n    this.insertAfter(node, ref, useMutator);\n  }\n\n  insertBefore(node: Node, ref?: Node, useMutator = true) {\n    const nodeInstance = ensureNode(node, this.document);\n    this.children?.internalInsert(nodeInstance, ref ? ref.index : null, useMutator);\n  }\n\n  insertAfter(node: any, ref?: Node, useMutator = true) {\n    const nodeInstance = ensureNode(node, this.document);\n    this.children?.internalInsert(nodeInstance, ref ? ref.index + 1 : null, useMutator);\n  }\n\n  getParent() {\n    return this.parent;\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  getIndex() {\n    return this.index;\n  }\n\n  getNode() {\n    return this;\n  }\n\n  getRoot() {\n    return this.document.rootNode;\n  }\n\n  getProps() {\n    return this.props;\n  }\n\n  onChildrenChange(fn: (param?: { type: string; node: Node }) => void): IPublicTypeDisposable {\n    const wrappedFunc = wrapWithEventSwitch(fn);\n    return this.children?.onChange(wrappedFunc);\n  }\n\n  mergeChildren(\n    remover: () => any,\n    adder: (children: Node[]) => IPublicTypeNodeData[] | null,\n    sorter: () => any,\n  ) {\n    this.children?.mergeChildren(remover, adder, sorter);\n  }\n\n  /**\n   * @deprecated\n   */\n  getStatus(field?: keyof NodeStatus) {\n    if (field && this.status[field] != null) {\n      return this.status[field];\n    }\n\n    return this.status;\n  }\n\n  /**\n   * @deprecated\n   */\n  setStatus(field: keyof NodeStatus, flag: boolean) {\n    if (!this.status.hasOwnProperty(field)) {\n      return;\n    }\n\n    if (flag !== this.status[field]) {\n      this.status[field] = flag;\n    }\n  }\n\n  /**\n   * @deprecated\n   */\n  getDOMNode(): any {\n    const instance = this.document.simulator?.getComponentInstances(this)?.[0];\n    if (!instance) {\n      return;\n    }\n    return this.document.simulator?.findDOMNodes(instance)?.[0];\n  }\n\n  /**\n   * @deprecated\n   */\n  getPage() {\n    console.warn('getPage is deprecated, use document instead');\n    return this.document;\n  }\n\n  /**\n   * 获取磁贴相关信息\n   */\n  getRGL() {\n    const isContainerNode = this.isContainer();\n    const isEmptyNode = this.isEmpty();\n    const isRGLContainerNode = this.isRGLContainer;\n    const isRGLNode = this.getParent()?.isRGLContainer;\n    const isRGL = isRGLContainerNode || (isRGLNode && (!isContainerNode || !isEmptyNode));\n    let rglNode = isRGLContainerNode ? this : isRGL ? this?.getParent() : {};\n    return { isContainerNode, isEmptyNode, isRGLContainerNode, isRGLNode, isRGL, rglNode };\n  }\n\n  /**\n   * @deprecated no one is using this, will be removed in a future release\n   */\n  getSuitablePlace(node: INode, ref: any): any {\n    const focusNode = this.document?.focusNode;\n    // 如果节点是模态框，插入到根节点下\n    if (node?.componentMeta?.isModal) {\n      return { container: focusNode, ref };\n    }\n\n    if (!ref && focusNode && this.contains(focusNode)) {\n      const rootCanDropIn = focusNode.componentMeta?.prototype?.options?.canDropIn;\n      if (\n        rootCanDropIn === undefined ||\n        rootCanDropIn === true ||\n        (typeof rootCanDropIn === 'function' && rootCanDropIn(node))\n      ) {\n        return { container: focusNode };\n      }\n\n      return null;\n    }\n\n    if (this.isRoot() && this.children) {\n      const dropElement = this.children.filter((c) => {\n        if (!c.isContainerNode) {\n          return false;\n        }\n        const canDropIn = c.componentMeta?.prototype?.options?.canDropIn;\n        if (\n          canDropIn === undefined ||\n          canDropIn === true ||\n          (typeof canDropIn === 'function' && canDropIn(node))\n        ) {\n          return true;\n        }\n        return false;\n      })[0];\n\n      if (dropElement) {\n        return { container: dropElement, ref };\n      }\n\n      const rootCanDropIn = this.componentMeta?.prototype?.options?.canDropIn;\n      if (\n        rootCanDropIn === undefined ||\n        rootCanDropIn === true ||\n        (typeof rootCanDropIn === 'function' && rootCanDropIn(node))\n      ) {\n        return { container: this, ref };\n      }\n\n      return null;\n    }\n\n    const canDropIn = this.componentMeta?.prototype?.options?.canDropIn;\n    if (this.isContainer()) {\n      if (\n        canDropIn === undefined ||\n        (typeof canDropIn === 'boolean' && canDropIn) ||\n        (typeof canDropIn === 'function' && canDropIn(node))\n      ) {\n        return { container: this, ref };\n      }\n    }\n\n    if (this.parent) {\n      return this.parent.getSuitablePlace(node, { index: this.index });\n    }\n\n    return null;\n  }\n\n  /**\n   * @deprecated\n   */\n  getAddonData(key: string) {\n    const addon = this._addons[key];\n    if (addon) {\n      return addon.exportData();\n    }\n    return this.getExtraProp(key)?.getValue();\n  }\n\n  /**\n   * @deprecated\n   */\n  registerAddon(key: string, exportData: () => any, isProp = false) {\n    this._addons[key] = { exportData, isProp };\n  }\n\n  getRect(): DOMRect | null {\n    if (this.isRoot()) {\n      return this.document.simulator?.viewport.contentBounds || null;\n    }\n    return this.document.simulator?.computeRect(this) || null;\n  }\n\n  /**\n   * @deprecated\n   */\n  getPrototype() {\n    return this.componentMeta.prototype;\n  }\n\n  /**\n   * @deprecated\n   */\n  setPrototype(proto: any) {\n    this.componentMeta.prototype = proto;\n  }\n\n  getIcon() {\n    return this.icon;\n  }\n\n  toString() {\n    return this.id;\n  }\n\n  emitPropChange(val: IPublicTypePropChangeOptions) {\n    this.emitter?.emit('propChange', val);\n  }\n\n  onPropChange(func: (info: IPublicTypePropChangeOptions) => void): IPublicTypeDisposable {\n    const wrappedFunc = wrapWithEventSwitch(func);\n    this.emitter.on('propChange', wrappedFunc);\n    return () => {\n      this.emitter.removeListener('propChange', wrappedFunc);\n    };\n  }\n}\n\nfunction ensureNode(node: any, document: DocumentModel): Node {\n  let nodeInstance = node;\n  if (!isNode(node)) {\n    if (node.getComponentName) {\n      nodeInstance = document.createNode({\n        componentName: node.getComponentName(),\n      });\n    } else {\n      nodeInstance = document.createNode(node);\n    }\n  }\n  return nodeInstance;\n}\n\nexport interface LeafNode extends Node {\n  readonly children: null;\n}\n\nexport type IPublicTypePropChangeOptions = Omit<GlobalEvent.Node.Prop.ChangeOptions, 'node'>;\n\nexport type SlotNode = Node<IPublicTypeSlotSchema>;\nexport type PageNode = Node<IPublicTypePageSchema>;\nexport type ComponentNode = Node<IPublicTypeComponentSchema>;\nexport type RootNode = PageNode | ComponentNode;\n\nexport function isRootNode(node: INode): node is INode {\n  return node && node.isRootNode;\n}\n\nexport function isLowCodeComponent(node: INode): node is INode {\n  return node.componentMeta?.getMetadata().devMode === 'lowCode';\n}\n\nexport function getZLevelTop(child: INode, zLevel: number): INode | null {\n  let l = child.zLevel;\n  if (l < zLevel || zLevel < 0) {\n    return null;\n  }\n  if (l === zLevel) {\n    return child;\n  }\n  let r: any = child;\n  while (r && l-- > zLevel) {\n    r = r.parent;\n  }\n  return r;\n}\n\n/**\n * 测试两个节点是否为包含关系\n * @param node1 测试的父节点\n * @param node2 测试的被包含节点\n * @returns 是否包含\n */\nexport function contains(node1: INode, node2: INode): boolean {\n  if (node1 === node2) {\n    return true;\n  }\n\n  if (!node1.isParentalNode || !node2.parent) {\n    return false;\n  }\n\n  const p = getZLevelTop(node2, node1.zLevel);\n  if (!p) {\n    return false;\n  }\n\n  return node1 === p;\n}\n\n// 16 node1 contains node2\n// 8  node1 contained_by node2\n// 2  node1 before or after node2\n// 0  node1 same as node2\nexport enum PositionNO {\n  Contains = 16,\n  ContainedBy = 8,\n  BeforeOrAfter = 2,\n  TheSame = 0,\n}\nexport function comparePosition(node1: INode, node2: INode): PositionNO {\n  if (node1 === node2) {\n    return PositionNO.TheSame;\n  }\n  const l1 = node1.zLevel;\n  const l2 = node2.zLevel;\n  if (l1 === l2) {\n    return PositionNO.BeforeOrAfter;\n  }\n\n  let p: any;\n  if (l1 < l2) {\n    p = getZLevelTop(node2, l1);\n    if (p && p === node1) {\n      return PositionNO.Contains;\n    }\n    return PositionNO.BeforeOrAfter;\n  }\n\n  p = getZLevelTop(node1, l2);\n  if (p && p === node2) {\n    return PositionNO.ContainedBy;\n  }\n\n  return PositionNO.BeforeOrAfter;\n}\n\nexport function insertChild(\n  container: INode,\n  thing: INode | IPublicTypeNodeData,\n  at?: number | null,\n  copy?: boolean,\n): INode {\n  let node: INode;\n  if (isNode(thing) && (copy || thing.isSlot())) {\n    thing = thing.export(IPublicEnumTransformStage.Clone);\n  }\n  if (isNode(thing)) {\n    node = thing;\n  } else {\n    node = container.document.createNode(thing);\n  }\n\n  container.children.insert(node, at);\n\n  return node;\n}\n\nexport function insertChildren(\n  container: INode,\n  nodes: INode[] | IPublicTypeNodeData[],\n  at?: number | null,\n  copy?: boolean,\n): INode[] {\n  let index = at;\n  let node: any;\n  const results: INode[] = [];\n  // eslint-disable-next-line no-cond-assign\n  while ((node = nodes.pop())) {\n    node = insertChild(container, node, index, copy);\n    results.push(node);\n    index = node.index;\n  }\n  return results;\n}\n","import { obx, makeObservable, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport { Node, INode, comparePosition, PositionNO } from './node/node';\nimport { DocumentModel } from './document-model';\nimport { IPublicModelSelection } from '@alilc/lowcode-types';\n\nexport interface ISelection extends Omit< IPublicModelSelection, 'getNodes' | 'getTopNodes' > {\n\n  /**\n   * 获取选中的节点实例\n   * @returns\n   */\n  getNodes(): INode[];\n\n  /**\n   * 获取顶层选区节点，场景：拖拽时，建立蒙层，只蒙在最上层\n   */\n  getTopNodes(includeRoot?: boolean): INode[];\n}\n\nexport class Selection implements ISelection {\n  private emitter: IEventBus = createModuleEventBus('Selection');\n\n  @obx.shallow private _selected: string[] = [];\n\n  constructor(readonly doc: DocumentModel) {\n    makeObservable(this);\n  }\n\n  /**\n   * 选中的节点 id\n   */\n  get selected(): string[] {\n    return this._selected;\n  }\n\n  /**\n   * 选中\n   */\n  select(id: string) {\n    if (this._selected.length === 1 && this._selected.indexOf(id) > -1) {\n      // avoid cause reaction\n      return;\n    }\n\n    this._selected = [id];\n    this.emitter.emit('selectionchange', this._selected);\n  }\n\n  /**\n   * 批量选中\n   */\n  selectAll(ids: string[]) {\n    this._selected = ids;\n    this.emitter.emit('selectionchange', this._selected);\n  }\n\n  /**\n   * 清除选中\n   */\n  clear() {\n    if (this._selected.length < 1) {\n      return;\n    }\n    this._selected = [];\n    this.emitter.emit('selectionchange', this._selected);\n  }\n\n  /**\n   * 整理选中\n   */\n  dispose() {\n    const l = this._selected.length;\n    let i = l;\n    while (i-- > 0) {\n      const id = this._selected[i];\n      if (!this.doc.hasNode(id)) {\n        this._selected.splice(i, 1);\n      }\n    }\n    if (this._selected.length !== l) {\n      this.emitter.emit('selectionchange', this._selected);\n    }\n  }\n\n  /**\n   * 添加选中\n   */\n  add(id: string) {\n    if (this._selected.indexOf(id) > -1) {\n      return;\n    }\n\n    this._selected.push(id);\n    this.emitter.emit('selectionchange', this._selected);\n  }\n\n  /**\n   * 是否选中\n   */\n  has(id: string) {\n    return this._selected.indexOf(id) > -1;\n  }\n\n  /**\n   * 移除选中\n   */\n  remove(id: string) {\n    const i = this._selected.indexOf(id);\n    if (i > -1) {\n      this._selected.splice(i, 1);\n      this.emitter.emit('selectionchange', this._selected);\n    }\n  }\n\n  /**\n   * 选区是否包含节点\n   */\n  containsNode(node: Node, excludeRoot = false) {\n    for (const id of this._selected) {\n      const parent = this.doc.getNode(id);\n      if (excludeRoot && parent?.contains(this.doc.focusNode)) {\n        continue;\n      }\n      if (parent?.contains(node)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * 获取选中的节点\n   */\n  getNodes(): Node[] {\n    const nodes = [];\n    for (const id of this._selected) {\n      const node = this.doc.getNode(id);\n      if (node) {\n        nodes.push(node);\n      }\n    }\n    return nodes;\n  }\n\n  /**\n   * 获取顶层选区节点，场景：拖拽时，建立蒙层，只蒙在最上层\n   */\n  getTopNodes(includeRoot = false) {\n    const nodes = [];\n    for (const id of this._selected) {\n      const node = this.doc.getNode(id);\n      // 排除根节点\n      if (!node || (!includeRoot && node.contains(this.doc.focusNode))) {\n        continue;\n      }\n      let i = nodes.length;\n      let isTop = true;\n      while (i-- > 0) {\n        const n = comparePosition(nodes[i], node);\n        // nodes[i] contains node\n        if (n === PositionNO.Contains || n === PositionNO.TheSame) {\n          isTop = false;\n          break;\n        } else if (n === PositionNO.ContainedBy) {\n          // node contains nodes[i], delete nodes[i]\n          nodes.splice(i, 1);\n        }\n      }\n      // node is top item, push to nodes\n      if (isTop) {\n        nodes.push(node);\n      }\n    }\n    return nodes;\n  }\n\n  onSelectionChange(fn: (ids: string[]) => void): () => void {\n    this.emitter.on('selectionchange', fn);\n    return () => {\n      this.emitter.removeListener('selectionchange', fn);\n    };\n  }\n}\n","import { reaction, untracked, globalContext, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport { IPublicTypeNodeSchema, IPublicModelHistory } from '@alilc/lowcode-types';\nimport { Logger } from '@alilc/lowcode-utils';\n\nconst logger = new Logger({ level: 'warn', bizName: 'history' });\n\nexport interface Serialization<K = IPublicTypeNodeSchema, T = string> {\n  serialize(data: K): T;\n  unserialize(data: T): K;\n}\n\nexport interface IHistory extends IPublicModelHistory {\n\n}\n\nexport class History<T = IPublicTypeNodeSchema> implements IHistory {\n  private session: Session;\n\n  private records: Session[];\n\n  private point = 0;\n\n  private emitter: IEventBus = createModuleEventBus('History');\n\n  private asleep = false;\n\n  private currentSerialization: Serialization<T, string> = {\n    serialize(data: T): string {\n      return JSON.stringify(data);\n    },\n    unserialize(data: string) {\n      return JSON.parse(data);\n    },\n  };\n\n  get hotData() {\n    return this.session.data;\n  }\n\n  constructor(\n      dataFn: () => T | null,\n      private redoer: (data: T) => void,\n      private timeGap: number = 1000,\n    ) {\n    this.session = new Session(0, null, this.timeGap);\n    this.records = [this.session];\n\n    reaction((): any => {\n      return dataFn();\n    }, (data: T) => {\n      if (this.asleep) return;\n      untracked(() => {\n        const log = this.currentSerialization.serialize(data);\n\n        // do not record unchanged data\n        if (this.session.data === log) {\n          return;\n        }\n\n        if (this.session.isActive()) {\n          this.session.log(log);\n        } else {\n          this.session.end();\n          const lastState = this.getState();\n          const cursor = this.session.cursor + 1;\n          const session = new Session(cursor, log, this.timeGap);\n          this.session = session;\n          this.records.splice(cursor, this.records.length - cursor, session);\n          const currentState = this.getState();\n          if (currentState !== lastState) {\n            this.emitter.emit('statechange', currentState);\n          }\n        }\n      });\n    }, { fireImmediately: true });\n  }\n\n  setSerialization(serialization: Serialization<T, string>) {\n    this.currentSerialization = serialization;\n  }\n\n  isSavePoint(): boolean {\n    return this.point !== this.session.cursor;\n  }\n\n  private sleep() {\n    this.asleep = true;\n  }\n\n  private wakeup() {\n    this.asleep = false;\n  }\n\n  go(originalCursor: number) {\n    this.session.end();\n\n    let cursor = originalCursor;\n    cursor = +cursor;\n    if (cursor < 0) {\n      cursor = 0;\n    } else if (cursor >= this.records.length) {\n      cursor = this.records.length - 1;\n    }\n\n    const currentCursor = this.session.cursor;\n    if (cursor === currentCursor) {\n      return;\n    }\n\n    const session = this.records[cursor];\n    const hotData = session.data;\n\n    this.sleep();\n    try {\n      this.redoer(this.currentSerialization.unserialize(hotData));\n      this.emitter.emit('cursor', hotData);\n    } catch (e) /* istanbul ignore next */ {\n      logger.error(e);\n    }\n\n    this.wakeup();\n    this.session = session;\n\n    this.emitter.emit('statechange', this.getState());\n  }\n\n  back() {\n    if (!this.session) {\n      return;\n    }\n    const cursor = this.session.cursor - 1;\n    this.go(cursor);\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    if (!editor) {\n      return;\n    }\n    editor.eventBus.emit('history.back', cursor);\n  }\n\n  forward() {\n    if (!this.session) {\n      return;\n    }\n    const cursor = this.session.cursor + 1;\n    this.go(cursor);\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    if (!editor) {\n      return;\n    }\n    editor.eventBus.emit('history.forward', cursor);\n  }\n\n  savePoint() {\n    if (!this.session) {\n      return;\n    }\n    this.session.end();\n    this.point = this.session.cursor;\n    this.emitter.emit('statechange', this.getState());\n  }\n\n  /**\n   *  |    1     |     1    |    1     |\n   *  | -------- | -------- | -------- |\n   *  | modified | redoable | undoable |\n   */\n  getState(): number {\n    const { cursor } = this.session;\n    let state = 7;\n    // undoable ?\n    if (cursor <= 0) {\n      state -= 1;\n    }\n    // redoable ?\n    if (cursor >= this.records.length - 1) {\n      state -= 2;\n    }\n    // modified ?\n    if (this.point === cursor) {\n      state -= 4;\n    }\n    return state;\n  }\n\n  /**\n   * 监听 state 变更事件\n   * @param func\n   * @returns\n   */\n  onChangeState(func: () => any): () => void {\n    return this.onStateChange(func);\n  }\n\n  onStateChange(func: () => any): () => void {\n    this.emitter.on('statechange', func);\n    return () => {\n      this.emitter.removeListener('statechange', func);\n    };\n  }\n\n  /**\n   * 监听历史记录游标位置变更事件\n   * @param func\n   * @returns\n   */\n  onChangeCursor(func: () => any): () => void {\n    return this.onCursor(func);\n  }\n\n  onCursor(func: () => any): () => void {\n    this.emitter.on('cursor', func);\n    return () => {\n      this.emitter.removeListener('cursor', func);\n    };\n  }\n\n  destroy() {\n    this.emitter.removeAllListeners();\n    this.records = [];\n  }\n\n  /**\n   *\n   * @deprecated\n   * @returns\n   * @memberof History\n   */\n  isModified() {\n    return this.isSavePoint();\n  }\n}\n\nexport class Session {\n  private _data: any;\n\n  private activeTimer: any;\n\n  get data() {\n    return this._data;\n  }\n\n  constructor(readonly cursor: number, data: any, private timeGap: number = 1000) {\n    this.setTimer();\n    this.log(data);\n  }\n\n  log(data: any) {\n    if (!this.isActive()) {\n      return;\n    }\n    this._data = data;\n    this.setTimer();\n  }\n\n  isActive() {\n    return this.activeTimer != null;\n  }\n\n  end() {\n    if (this.isActive()) {\n      this.clearTimer();\n    }\n  }\n\n  private setTimer() {\n    this.clearTimer();\n    this.activeTimer = setTimeout(() => this.end(), this.timeGap);\n  }\n\n  private clearTimer() {\n    if (this.activeTimer) {\n      clearTimeout(this.activeTimer);\n    }\n    this.activeTimer = null;\n  }\n}\n","import { INode, Node } from './node';\nimport { DocumentModel } from '../document-model';\nimport { IPublicModelModalNodesManager } from '@alilc/lowcode-types';\nimport { createModuleEventBus, IEventBus } from '@alilc/lowcode-editor-core';\n\nexport function getModalNodes(node: INode | Node) {\n  if (!node) return [];\n  let nodes: any = [];\n  if (node.componentMeta.isModal) {\n    nodes.push(node);\n  }\n  const { children } = node;\n  if (children) {\n    children.forEach((child) => {\n      nodes = nodes.concat(getModalNodes(child));\n    });\n  }\n  return nodes;\n}\n\nexport interface IModalNodesManager extends IPublicModelModalNodesManager {\n\n  getModalNodes(): INode[];\n\n  getVisibleModalNode(): INode | null;\n}\n\nexport class ModalNodesManager implements IModalNodesManager {\n  willDestroy: any;\n\n  private page: DocumentModel;\n\n  private modalNodes: INode[];\n\n  private nodeRemoveEvents: any;\n\n  private emitter: IEventBus;\n\n  constructor(page: DocumentModel) {\n    this.page = page;\n    this.emitter = createModuleEventBus('ModalNodesManager');\n    this.nodeRemoveEvents = {};\n    this.setNodes();\n    this.hideModalNodes();\n    this.willDestroy = [\n      page.onNodeCreate((node) => this.addNode(node)),\n      page.onNodeDestroy((node) => this.removeNode(node)),\n    ];\n  }\n\n  getModalNodes(): INode[] {\n    return this.modalNodes;\n  }\n\n  getVisibleModalNode(): INode | null {\n    const visibleNode = this.getModalNodes().find((node: INode) => node.getVisible());\n    return visibleNode || null;\n  }\n\n  hideModalNodes() {\n    this.modalNodes.forEach((node: INode) => {\n      node.setVisible(false);\n    });\n  }\n\n  setVisible(node: INode) {\n    this.hideModalNodes();\n    node.setVisible(true);\n  }\n\n  setInvisible(node: INode) {\n    node.setVisible(false);\n  }\n\n  onVisibleChange(func: () => any) {\n    this.emitter.on('visibleChange', func);\n    return () => {\n      this.emitter.removeListener('visibleChange', func);\n    };\n  }\n\n  onModalNodesChange(func: () => any) {\n    this.emitter.on('modalNodesChange', func);\n    return () => {\n      this.emitter.removeListener('modalNodesChange', func);\n    };\n  }\n\n  private addNode(node: INode) {\n    if (node.componentMeta.isModal) {\n      this.hideModalNodes();\n      this.modalNodes.push(node);\n      this.addNodeEvent(node);\n      this.emitter.emit('modalNodesChange');\n      this.emitter.emit('visibleChange');\n    }\n  }\n\n  private removeNode(node: INode) {\n    if (node.componentMeta.isModal) {\n      const index = this.modalNodes.indexOf(node);\n      if (index >= 0) {\n        this.modalNodes.splice(index, 1);\n      }\n      this.removeNodeEvent(node);\n      this.emitter.emit('modalNodesChange');\n      if (node.getVisible()) {\n        this.emitter.emit('visibleChange');\n      }\n    }\n  }\n\n  private addNodeEvent(node: INode) {\n    this.nodeRemoveEvents[node.id] =\n      node.onVisibleChange(() => {\n        this.emitter.emit('visibleChange');\n      });\n  }\n\n  private removeNodeEvent(node: INode) {\n    if (this.nodeRemoveEvents[node.id]) {\n      this.nodeRemoveEvents[node.id]();\n      delete this.nodeRemoveEvents[node.id];\n    }\n  }\n\n  setNodes() {\n    const nodes = getModalNodes(this.page.rootNode!);\n    this.modalNodes = nodes;\n    this.modalNodes.forEach((node: INode) => {\n      this.addNodeEvent(node);\n    });\n\n    this.emitter.emit('modalNodesChange');\n  }\n}\n","import { makeObservable, obx, engineConfig, action, runWithGlobalEventOff, wrapWithEventSwitch, createModuleEventBus, IEventBus } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicTypeNodeData,\n  IPublicTypeNodeSchema,\n  IPublicTypeRootSchema,\n  IPublicTypePageSchema,\n  IPublicTypeComponentsMap,\n  IPublicTypeDragNodeObject,\n  IPublicTypeDragNodeDataObject,\n  IPublicModelDocumentModel,\n  IPublicModelHistory,\n  IPublicModelNode,\n  IPublicEnumTransformStage,\n  IPublicTypeOnChangeOptions,\n} from '@alilc/lowcode-types';\nimport { IProject, Project } from '../project';\nimport { ISimulatorHost } from '../simulator';\nimport { ComponentMeta } from '../component-meta';\nimport { IDropLocation, Designer, IHistory } from '../designer';\nimport { Node, insertChildren, insertChild, RootNode, INode } from './node/node';\nimport { Selection, ISelection } from './selection';\nimport { History } from './history';\nimport { IModalNodesManager, ModalNodesManager } from './node';\nimport { uniqueId, isPlainObject, compatStage, isJSExpression, isDOMText, isNodeSchema, isDragNodeObject, isDragNodeDataObject, isNode } from '@alilc/lowcode-utils';\nimport { EDITOR_EVENT } from '../types';\n\nexport type GetDataType<T, NodeType> = T extends undefined\n  ? NodeType extends {\n    schema: infer R;\n  }\n    ? R\n    : any\n  : T;\n\nexport interface IDocumentModel extends Omit< IPublicModelDocumentModel, 'selection' | 'checkNesting' > {\n\n  readonly designer: Designer;\n\n  /**\n   * 选区控制\n   */\n  readonly selection: ISelection;\n\n  readonly project: IProject;\n\n  /**\n   * 模态节点管理\n   */\n  readonly modalNodesManager: IModalNodesManager;\n\n  /**\n   * 根据 id 获取节点\n   */\n  getNode(id: string): INode | null;\n\n  getHistory(): IHistory;\n\n  get focusNode(): INode | null;\n\n  get rootNode(): INode | null;\n\n  checkNesting(\n    dropTarget: INode,\n    dragObject: IPublicTypeDragNodeObject | IPublicTypeNodeSchema | INode | IPublicTypeDragNodeDataObject,\n  ): boolean;\n\n  getNodeCount(): number;\n}\n\nexport class DocumentModel implements IDocumentModel {\n  /**\n   * 根节点 类型有：Page/Component/Block\n   */\n  rootNode: INode | null;\n\n  /**\n   * 文档编号\n   */\n  id: string = uniqueId('doc');\n\n  /**\n   * 选区控制\n   */\n  readonly selection: ISelection = new Selection(this);\n\n  /**\n   * 操作记录控制\n   */\n  readonly history: IPublicModelHistory;\n\n  /**\n   * 模态节点管理\n   */\n  readonly modalNodesManager: IModalNodesManager;\n\n  private _nodesMap = new Map<string, IPublicModelNode>();\n\n  readonly project: IProject;\n\n  readonly designer: Designer;\n\n  @obx.shallow private nodes = new Set<IPublicModelNode>();\n\n  private seqId = 0;\n\n  private emitter: IEventBus;\n\n  private rootNodeVisitorMap: { [visitorName: string]: any } = {};\n\n  /**\n   * @deprecated\n   */\n  private _addons: Array<{ name: string; exportData: any }> = [];\n\n  /**\n   * 模拟器\n   */\n  get simulator(): ISimulatorHost | null {\n    return this.project.simulator;\n  }\n\n  get nodesMap(): Map<string, Node> {\n    return this._nodesMap;\n  }\n\n  get fileName(): string {\n    return this.rootNode?.getExtraProp('fileName', false)?.getAsString() || this.id;\n  }\n\n  set fileName(fileName: string) {\n    this.rootNode?.getExtraProp('fileName', true)?.setValue(fileName);\n  }\n\n  get focusNode(): INode {\n    if (this._drillDownNode) {\n      return this._drillDownNode;\n    }\n    const selector = engineConfig.get('focusNodeSelector');\n    if (selector && typeof selector === 'function') {\n      return selector(this.rootNode!);\n    }\n    return this.rootNode;\n  }\n\n  @obx.ref private _drillDownNode: Node | null = null;\n\n  private _modalNode?: INode;\n\n  private _blank?: boolean;\n\n  private inited = false;\n\n  @obx.shallow private willPurgeSpace: Node[] = [];\n\n  get modalNode() {\n    return this._modalNode;\n  }\n\n  get currentRoot() {\n    return this.modalNode || this.focusNode;\n  }\n\n  @obx.shallow private activeNodes?: Node[];\n\n  @obx.ref private _dropLocation: IDropLocation | null = null;\n\n  set dropLocation(loc: IDropLocation | null) {\n    this._dropLocation = loc;\n    // pub event\n    this.designer.editor.eventBus.emit(\n      'document.dropLocation.changed',\n      { document: this, location: loc },\n    );\n  }\n\n  /**\n   * 投放插入位置标记\n   */\n  get dropLocation() {\n    return this._dropLocation;\n  }\n\n  /**\n   * 导出 schema 数据\n   */\n  get schema(): IPublicTypeRootSchema {\n    return this.rootNode?.schema as any;\n  }\n\n  @obx.ref private _opened = false;\n\n  @obx.ref private _suspensed = false;\n\n  /**\n   * 是否为非激活状态\n   */\n  get suspensed(): boolean {\n    return this._suspensed || !this._opened;\n  }\n\n  /**\n   * 与 suspensed 相反，是否为激活状态，这个函数可能用的更多一点\n   */\n  get active(): boolean {\n    return !this._suspensed;\n  }\n\n  /**\n   * @deprecated 兼容\n   */\n  get actived(): boolean {\n    return this.active;\n  }\n\n  /**\n   * 是否打开\n   */\n  get opened() {\n    return this._opened;\n  }\n\n  get root() {\n    return this.rootNode;\n  }\n\n  constructor(project: Project, schema?: IPublicTypeRootSchema) {\n    makeObservable(this);\n    this.project = project;\n    this.designer = this.project?.designer;\n    this.emitter = createModuleEventBus('DocumentModel');\n\n    if (!schema) {\n      this._blank = true;\n    }\n\n    // 兼容 vision\n    this.id = project.getSchema()?.id || this.id;\n\n    this.rootNode = this.createNode<RootNode>(\n      schema || {\n        componentName: 'Page',\n        id: 'root',\n        fileName: '',\n      },\n    );\n\n    this.history = new History(\n      () => this.export(IPublicEnumTransformStage.Serilize),\n      (schema) => {\n        this.import(schema as IPublicTypeRootSchema, true);\n        this.simulator?.rerender();\n      },\n    );\n\n    this.setupListenActiveNodes();\n    this.modalNodesManager = new ModalNodesManager(this);\n    this.inited = true;\n  }\n\n  drillDown(node: Node | null) {\n    this._drillDownNode = node;\n  }\n\n  onChangeNodeVisible(fn: (node: IPublicModelNode, visible: boolean) => void): () => void {\n    this.designer.editor?.eventBus.on(EDITOR_EVENT.NODE_CHILDREN_CHANGE, fn);\n\n    return () => {\n      this.designer.editor?.eventBus.off(EDITOR_EVENT.NODE_CHILDREN_CHANGE, fn);\n    };\n  }\n\n  onChangeNodeChildren(fn: (info: IPublicTypeOnChangeOptions) => void): () => void {\n    this.designer.editor?.eventBus.on(EDITOR_EVENT.NODE_VISIBLE_CHANGE, fn);\n\n    return () => {\n      this.designer.editor?.eventBus.off(EDITOR_EVENT.NODE_VISIBLE_CHANGE, fn);\n    };\n  }\n\n  addWillPurge(node: Node) {\n    this.willPurgeSpace.push(node);\n  }\n\n  removeWillPurge(node: Node) {\n    const i = this.willPurgeSpace.indexOf(node);\n    if (i > -1) {\n      this.willPurgeSpace.splice(i, 1);\n    }\n  }\n\n  isBlank() {\n    return this._blank && !this.isModified();\n  }\n\n  /**\n   * 生成唯一 id\n   */\n  nextId(possibleId: string | undefined) {\n    let id = possibleId;\n    while (!id || this.nodesMap.get(id)) {\n      id = `node_${(String(this.id).slice(-10) + (++this.seqId).toString(36)).toLocaleLowerCase()}`;\n    }\n\n    return id;\n  }\n\n  /**\n   * 根据 id 获取节点\n   */\n  getNode(id: string): INode | null {\n    return this._nodesMap.get(id) || null;\n  }\n\n  /**\n   * 根据 id 获取节点\n   */\n  getNodeCount(): number {\n    return this._nodesMap?.size;\n  }\n\n  /**\n   * 是否存在节点\n   */\n  hasNode(id: string): boolean {\n    const node = this.getNode(id);\n    return node ? !node.isPurged : false;\n  }\n\n  /**\n   * 根据 schema 创建一个节点\n   */\n  @action\n  createNode<T extends Node = Node, C = undefined>(data: GetDataType<C, T>, checkId: boolean = true): T {\n    let schema: any;\n    if (isDOMText(data) || isJSExpression(data)) {\n      schema = {\n        componentName: 'Leaf',\n        children: data,\n      };\n    } else {\n      schema = data;\n    }\n\n    let node: Node | null = null;\n    if (this.hasNode(schema?.id)) {\n      schema.id = null;\n    }\n    /* istanbul ignore next */\n    if (schema.id) {\n      node = this.getNode(schema.id);\n      // TODO: 底下这几段代码似乎永远都进不去\n      if (node && node.componentName === schema.componentName) {\n        if (node.parent) {\n          node.internalSetParent(null, false);\n          // will move to another position\n          // todo: this.activeNodes?.push(node);\n        }\n        node.import(schema, true);\n      } else if (node) {\n        node = null;\n      }\n    }\n    if (!node) {\n      node = new Node(this, schema, { checkId });\n      // will add\n      // todo: this.activeNodes?.push(node);\n    }\n\n    this._nodesMap.set(node.id, node);\n    this.nodes.add(node);\n\n    this.emitter.emit('nodecreate', node);\n    return node as any;\n  }\n\n  public destroyNode(node: Node) {\n    this.emitter.emit('nodedestroy', node);\n  }\n\n  /**\n   * 插入一个节点\n   */\n  insertNode(parent: INode, thing: Node | IPublicTypeNodeData, at?: number | null, copy?: boolean): Node {\n    return insertChild(parent, thing, at, copy);\n  }\n\n  /**\n   * 插入多个节点\n   */\n  insertNodes(parent: INode, thing: Node[] | IPublicTypeNodeData[], at?: number | null, copy?: boolean) {\n    return insertChildren(parent, thing, at, copy);\n  }\n\n  /**\n   * 移除一个节点\n   */\n  removeNode(idOrNode: string | Node) {\n    let id: string;\n    let node: Node | null;\n    if (typeof idOrNode === 'string') {\n      id = idOrNode;\n      node = this.getNode(id);\n    } else if (idOrNode.id) {\n      id = idOrNode.id;\n      node = this.getNode(id);\n    }\n    if (!node) {\n      return;\n    }\n    this.internalRemoveAndPurgeNode(node, true);\n  }\n\n  /**\n   * 内部方法，请勿调用\n   */\n  internalRemoveAndPurgeNode(node: Node, useMutator = false) {\n    if (!this.nodes.has(node)) {\n      return;\n    }\n    node.remove(useMutator);\n  }\n\n  unlinkNode(node: Node) {\n    this.nodes.delete(node);\n    this._nodesMap.delete(node.id);\n  }\n\n  /**\n   * 包裹当前选区中的节点\n   */\n  wrapWith(schema: IPublicTypeNodeSchema): Node | null {\n    const nodes = this.selection.getTopNodes();\n    if (nodes.length < 1) {\n      return null;\n    }\n    const wrapper = this.createNode(schema);\n    if (wrapper.isParental()) {\n      const first = nodes[0];\n      // TODO: check nesting rules x 2\n      insertChild(first.parent!, wrapper, first.index);\n      insertChildren(wrapper, nodes);\n      this.selection.select(wrapper.id);\n      return wrapper;\n    }\n\n    this.removeNode(wrapper);\n    return null;\n  }\n\n  @action\n  import(schema: IPublicTypeRootSchema, checkId = false) {\n    const drillDownNodeId = this._drillDownNode?.id;\n    runWithGlobalEventOff(() => {\n      // TODO: 暂时用饱和式删除，原因是 Slot 节点并不是树节点，无法正常递归删除\n      this.nodes.forEach(node => {\n        if (node.isRoot()) return;\n        this.internalRemoveAndPurgeNode(node, true);\n      });\n      this.rootNode?.import(schema as any, checkId);\n      this.modalNodesManager = new ModalNodesManager(this);\n      // todo: select added and active track added\n      if (drillDownNodeId) {\n        this.drillDown(this.getNode(drillDownNodeId));\n      }\n    });\n  }\n\n  export(stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Serilize) {\n    stage = compatStage(stage);\n    // 置顶只作用于 Page 的第一级子节点，目前还用不到里层的置顶；如果后面有需要可以考虑将这段写到 node-children 中的 export\n    const currentSchema = this.rootNode?.export(stage);\n    if (Array.isArray(currentSchema?.children) && currentSchema?.children.length > 0) {\n      const FixedTopNodeIndex = currentSchema.children\n        .filter(i => isPlainObject(i))\n        .findIndex((i => (i as IPublicTypeNodeSchema).props?.__isTopFixed__));\n      if (FixedTopNodeIndex > 0) {\n        const FixedTopNode = currentSchema.children.splice(FixedTopNodeIndex, 1);\n        currentSchema.children.unshift(FixedTopNode[0]);\n      }\n    }\n    return currentSchema;\n  }\n\n  /**\n   * 导出节点数据\n   */\n  getNodeSchema(id: string): IPublicTypeNodeData | null {\n    const node = this.getNode(id);\n    if (node) {\n      return node.schema;\n    }\n    return null;\n  }\n\n  /**\n   * 是否已修改\n   */\n  isModified() {\n    return this.history.isSavePoint();\n  }\n\n  // FIXME: does needed?\n  getComponent(componentName: string): any {\n    return this.simulator!.getComponent(componentName);\n  }\n\n  getComponentMeta(componentName: string): ComponentMeta {\n    return this.designer.getComponentMeta(\n      componentName,\n      () => this.simulator?.generateComponentMetadata(componentName) || null,\n    );\n  }\n\n  /**\n   * 切换激活，只有打开的才能激活\n   * 不激活，打开之后切换到另外一个时发生，比如 tab 视图，切换到另外一个标签页\n   */\n  private setSuspense(flag: boolean) {\n    if (!this._opened && !flag) {\n      return;\n    }\n    this._suspensed = flag;\n    this.simulator?.setSuspense(flag);\n    if (!flag) {\n      this.project.checkExclusive(this);\n    }\n  }\n\n  suspense() {\n    this.setSuspense(true);\n  }\n\n  activate() {\n    this.setSuspense(false);\n  }\n\n  /**\n   * 打开，已载入，默认建立时就打开状态，除非手动关闭\n   */\n  open(): DocumentModel {\n    const originState = this._opened;\n    this._opened = true;\n    if (originState === false) {\n      this.designer.postEvent('document-open', this);\n    }\n    if (this._suspensed) {\n      this.setSuspense(false);\n    } else {\n      this.project.checkExclusive(this);\n    }\n    return this;\n  }\n\n  /**\n   * 关闭，相当于 sleep，仍然缓存，停止一切响应，如果有发生的变更没被保存，仍然需要去取数据保存\n   */\n  close(): void {\n    this.setSuspense(true);\n    this._opened = false;\n  }\n\n  /**\n   * 从项目中移除\n   */\n  remove() {\n    this.designer.postEvent('document.remove', { id: this.id });\n    this.purge();\n    this.project.removeDocument(this);\n  }\n\n  purge() {\n    this.rootNode?.purge();\n    this.nodes.clear();\n    this._nodesMap.clear();\n    this.rootNode = null;\n  }\n\n  checkNesting(\n      dropTarget: INode,\n      dragObject: IPublicTypeDragNodeObject | IPublicTypeNodeSchema | INode | IPublicTypeDragNodeDataObject,\n    ): boolean {\n    let items: Array<Node | IPublicTypeNodeSchema>;\n    if (isDragNodeDataObject(dragObject)) {\n      items = Array.isArray(dragObject.data) ? dragObject.data : [dragObject.data];\n    } else if (isDragNodeObject(dragObject)) {\n      items = dragObject.nodes;\n    } else if (isNode(dragObject) || isNodeSchema(dragObject)) {\n      items = [dragObject];\n    } else {\n      console.warn('the dragObject is not in the correct type, dragObject:', dragObject);\n      return true;\n    }\n    return items.every((item) => this.checkNestingDown(dropTarget, item) && this.checkNestingUp(dropTarget, item));\n  }\n\n  /**\n   * @deprecated since version 1.0.16.\n   * Will be deleted in version 2.0.0.\n   * Use checkNesting method instead.\n   */\n  checkDropTarget(dropTarget: INode, dragObject: IPublicTypeDragNodeObject | IPublicTypeDragNodeDataObject): boolean {\n    let items: Array<Node | IPublicTypeNodeSchema>;\n    if (isDragNodeDataObject(dragObject)) {\n      items = Array.isArray(dragObject.data) ? dragObject.data : [dragObject.data];\n    } else {\n      items = dragObject.nodes;\n    }\n    return items.every((item) => this.checkNestingUp(dropTarget, item));\n  }\n\n  /**\n   * 检查对象对父级的要求，涉及配置 parentWhitelist\n   */\n  checkNestingUp(parent: INode, obj: IPublicTypeNodeSchema | Node): boolean {\n    if (isNode(obj) || isNodeSchema(obj)) {\n      const config = isNode(obj) ? obj.componentMeta : this.getComponentMeta(obj.componentName);\n      if (config) {\n        return config.checkNestingUp(obj, parent);\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * 检查投放位置对子级的要求，涉及配置 childWhitelist\n   */\n  checkNestingDown(parent: INode, obj: IPublicTypeNodeSchema | Node): boolean {\n    const config = parent.componentMeta;\n    return config.checkNestingDown(parent, obj);\n  }\n\n  // ======= compatibles for vision\n  getRoot() {\n    return this.rootNode;\n  }\n\n  // add toData\n  toData(extraComps?: string[]) {\n    const node = this.export(IPublicEnumTransformStage.Save);\n    const data = {\n      componentsMap: this.getComponentsMap(extraComps),\n      utils: this.getUtilsMap(),\n      componentsTree: [node],\n    };\n    return data;\n  }\n\n  getHistory(): IHistory {\n    return this.history;\n  }\n\n  /**\n   * @deprecated\n   */\n  /* istanbul ignore next */\n  getAddonData(name: string) {\n    const addon = this._addons.find((item) => item.name === name);\n    if (addon) {\n      return addon.exportData();\n    }\n  }\n\n  /**\n   * @deprecated\n  */\n  /* istanbul ignore next */\n  exportAddonData() {\n    const addons = {};\n    this._addons.forEach((addon) => {\n      const data = addon.exportData();\n      if (data === null) {\n        delete addons[addon.name];\n      } else {\n        addons[addon.name] = data;\n      }\n    });\n    return addons;\n  }\n\n  /**\n   * @deprecated\n   */\n  /* istanbul ignore next */\n  registerAddon(name: string, exportData: any) {\n    if (['id', 'params', 'layout'].indexOf(name) > -1) {\n      throw new Error('addon name cannot be id, params, layout');\n    }\n    const i = this._addons.findIndex((item) => item.name === name);\n    if (i > -1) {\n      this._addons.splice(i, 1);\n    }\n    this._addons.push({\n      exportData,\n      name,\n    });\n  }\n\n  /* istanbul ignore next */\n  acceptRootNodeVisitor(\n    visitorName = 'default',\n    visitorFn: (node: RootNode) => any,\n  ) {\n    let visitorResult = {};\n    if (!visitorName) {\n      /* eslint-disable-next-line no-console */\n      console.warn('Invalid or empty RootNodeVisitor name.');\n    }\n    try {\n      visitorResult = visitorFn.call(this, this.rootNode);\n      this.rootNodeVisitorMap[visitorName] = visitorResult;\n    } catch (e) {\n      console.error('RootNodeVisitor is not valid.');\n      console.error(e);\n    }\n    return visitorResult;\n  }\n\n  /* istanbul ignore next */\n  getRootNodeVisitor(name: string) {\n    return this.rootNodeVisitorMap[name];\n  }\n\n  getComponentsMap(extraComps?: string[]) {\n    const componentsMap: IPublicTypeComponentsMap = [];\n    // 组件去重\n    const exsitingMap: { [componentName: string]: boolean } = {};\n    for (const node of this._nodesMap.values()) {\n      const { componentName } = node || {};\n      if (componentName === 'Slot') continue;\n      if (!exsitingMap[componentName]) {\n        exsitingMap[componentName] = true;\n        if (node.componentMeta?.npm?.package) {\n          componentsMap.push({\n            ...node.componentMeta.npm,\n            componentName,\n          });\n        } else {\n          componentsMap.push({\n            devMode: 'lowCode',\n            componentName,\n          });\n        }\n      }\n    }\n    // 合并外界传入的自定义渲染的组件\n    if (Array.isArray(extraComps)) {\n      extraComps.forEach(c => {\n        if (c && !exsitingMap[c]) {\n          const m = this.getComponentMeta(c);\n          if (m && m.npm?.package) {\n            componentsMap.push({\n              ...m?.npm,\n              componentName: c,\n            });\n          }\n        }\n      });\n    }\n    return componentsMap;\n  }\n\n  /**\n   * 获取 schema 中的 utils 节点，当前版本不判断页面中使用了哪些 utils，直接返回资产包中所有的 utils\n   * @returns\n   */\n  getUtilsMap() {\n    return this.designer?.editor?.get('assets')?.utils?.map((item: any) => ({\n      name: item.name,\n      type: item.type || 'npm',\n      // TODO 当前只有 npm 类型，content 直接设置为 item.npm，有 function 类型之后需要处理\n      content: item.npm,\n    }));\n  }\n\n  onNodeCreate(func: (node: INode) => void) {\n    const wrappedFunc = wrapWithEventSwitch(func);\n    this.emitter.on('nodecreate', wrappedFunc);\n    return () => {\n      this.emitter.removeListener('nodecreate', wrappedFunc);\n    };\n  }\n\n  onNodeDestroy(func: (node: INode) => void) {\n    const wrappedFunc = wrapWithEventSwitch(func);\n    this.emitter.on('nodedestroy', wrappedFunc);\n    return () => {\n      this.emitter.removeListener('nodedestroy', wrappedFunc);\n    };\n  }\n\n  /**\n   * @deprecated\n   */\n  refresh() {\n    console.warn('refresh method is deprecated');\n  }\n\n  /**\n   * @deprecated\n   */\n  onRefresh(/* func: () => void */) {\n    console.warn('onRefresh method is deprecated');\n  }\n\n  onReady(fn: Function) {\n    this.designer.editor.eventBus.on('document-open', fn);\n    return () => {\n      this.designer.editor.removeListener('document-open', fn);\n    };\n  }\n\n  private setupListenActiveNodes() {\n    // todo:\n  }\n}\n\nexport function isDocumentModel(obj: any): obj is DocumentModel {\n  return obj && obj.rootNode;\n}\n\nexport function isPageSchema(obj: any): obj is IPublicTypePageSchema {\n  return obj?.componentName === 'Page';\n}\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconLock(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M704 480v-160c0-105.6-86.4-192-192-192s-192 86.4-192 192v160H160v416h704V480h-160z m-320-160c0-70.4 57.6-128 128-128s128 57.6 128 128v160h-256v-160z m416 512H224v-288h576v288z\" fill=\"#ffffff\" p-id=\"2680\" />\n      <path d=\"M480 768h64v-160h-64z\" fill=\"#ffffff\" p-id=\"2681\" />\n    </SVGIcon>\n  );\n}\nIconLock.displayName = 'IconLock';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconHidden(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M183.423543 657.078213l163.499771-98.484012c-4.233418-14.908548-6.646374-30.585599-6.646374-46.852074 0-94.665033 76.739778-171.404812 171.404812-171.404812 45.983287 0 87.641059 18.20871 118.42518 47.679929l129.791042-78.17957c-73.254398-41.73145-157.866471-65.812915-248.216221-65.812915-192.742792 0-360.068705 108.505249-444.453604 267.715321C96.636944 567.228859 136.301316 616.355743 183.423543 657.078213zM841.253886 367.552144l-164.382884 99.015108c3.934612 14.415314 6.215562 29.513174 6.215562 45.174875 0 94.665033-76.739778 171.404812-171.404812 171.404812-45.361117 0-86.484723-17.747199-117.142977-46.515407l-129.419582 77.955466c72.874751 41.149189 156.893306 64.871473 246.563582 64.871473 192.742792 0 360.068705-108.505249 444.453604-267.717368C927.000805 456.773188 887.794875 408.054603 841.253886 367.552144zM420.280042 511.741104c0 0.550539 0.152473 1.060145 0.161682 1.608637l135.080511-81.366146c-13.065574-7.198959-27.854395-11.658528-43.826158-11.658528C461.20922 420.325068 420.280042 461.254246 420.280042 511.741104zM447.739441 576.947198l69.02098-41.574884L948.364369 275.395234c10.812253-6.512321 14.297634-20.558222 7.785314-31.369452-6.512321-10.812253-20.556175-14.296611-31.368428-7.785314L575.654762 446.537056l0 0-151.20577 91.078345 0 0L75.027787 748.090043c-10.812253 6.512321-14.297634 20.556175-7.785314 31.368428 6.512321 10.812253 20.556175 14.297634 31.369452 7.785314L447.739441 576.947198 447.739441 576.947198zM511.696078 603.157139c50.487881 0 91.416036-40.928155 91.416036-91.416036 0-0.549515-0.152473-1.057075-0.161682-1.605567l-135.079488 81.364099C480.935494 598.699618 495.724315 603.157139 511.696078 603.157139z\" />\n    </SVGIcon>\n  );\n}\nIconHidden.displayName = 'Hidden';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconRemove(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M224 256v639.84A64 64 0 0 0 287.84 960h448.32A64 64 0 0 0 800 895.84V256h64a32 32 0 1 0 0-64H160a32 32 0 1 0 0 64h64zM384 96c0-17.664 14.496-32 31.904-32h192.192C625.696 64 640 78.208 640 96c0 17.664-14.496 32-31.904 32H415.904A31.872 31.872 0 0 1 384 96z m-96 191.744C288 270.208 302.4 256 320.224 256h383.552C721.6 256 736 270.56 736 287.744v576.512C736 881.792 721.6 896 703.776 896H320.224A32.224 32.224 0 0 1 288 864.256V287.744zM352 352c0-17.696 14.208-32.032 32-32.032 17.664 0 32 14.24 32 32v448c0 17.664-14.208 32-32 32-17.664 0-32-14.24-32-32V352z m128 0c0-17.696 14.208-32.032 32-32.032 17.664 0 32 14.24 32 32v448c0 17.664-14.208 32-32 32-17.664 0-32-14.24-32-32V352z m128 0c0-17.696 14.208-32.032 32-32.032 17.664 0 32 14.24 32 32v448c0 17.664-14.208 32-32 32-17.664 0-32-14.24-32-32V352z\" />\n    </SVGIcon>\n  );\n}\nIconRemove.displayName = 'Remove';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconSetting(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M965.824 405.952a180.48 180.48 0 0 1-117.12-85.376 174.464 174.464 0 0 1-16-142.08 22.208 22.208 0 0 0-7.04-23.552 480.576 480.576 0 0 0-153.6-89.216 23.104 23.104 0 0 0-24.32 5.76 182.208 182.208 0 0 1-135.68 57.92 182.208 182.208 0 0 1-133.12-56.64 23.104 23.104 0 0 0-26.88-7.04 478.656 478.656 0 0 0-153.6 89.856 22.208 22.208 0 0 0-7.04 23.552 174.464 174.464 0 0 1-16 141.44A180.48 180.48 0 0 1 58.24 405.952a22.4 22.4 0 0 0-17.28 17.792 455.08 455.08 0 0 0 0 176.512 22.4 22.4 0 0 0 17.28 17.792 180.48 180.48 0 0 1 117.12 84.736c25.408 42.944 31.232 94.592 16 142.08a22.208 22.208 0 0 0 7.04 23.552A480.576 480.576 0 0 0 352 957.632h7.68a23.04 23.04 0 0 0 16.64-7.04 184.128 184.128 0 0 1 266.944 0c6.592 8.96 18.752 11.968 28.8 7.04a479.36 479.36 0 0 0 156.16-88.576 22.208 22.208 0 0 0 7.04-23.552 174.464 174.464 0 0 1 13.44-142.72 180.48 180.48 0 0 1 117.12-84.736 22.4 22.4 0 0 0 17.28-17.792 452.613 452.613 0 0 0 0-176.512 23.04 23.04 0 0 0-17.28-17.792z m-42.88 169.408a218.752 218.752 0 0 0-128 98.112 211.904 211.904 0 0 0-21.76 156.736 415.936 415.936 0 0 1-112 63.68 217.472 217.472 0 0 0-149.12-63.68 221.312 221.312 0 0 0-149.12 63.68 414.592 414.592 0 0 1-112-63.68c12.8-53.12 4.288-109.12-23.68-156.096A218.752 218.752 0 0 0 101.12 575.36a386.176 386.176 0 0 1 0-127.36 218.752 218.752 0 0 0 128-98.112c27.2-47.552 34.944-103.68 21.76-156.8a415.296 415.296 0 0 1 112-63.68A221.44 221.44 0 0 0 512 187.392a218.24 218.24 0 0 0 149.12-57.984 413.952 413.952 0 0 1 112 63.744 211.904 211.904 0 0 0 23.04 156.096 218.752 218.752 0 0 0 128 98.112 386.65 386.65 0 0 1 0 127.36l-1.28 0.64z\" />\n      <path d=\"M512 320.576c-105.984 0-192 85.568-192 191.104a191.552 191.552 0 0 0 192 191.104c106.112 0 192.064-85.568 192.064-191.104a190.72 190.72 0 0 0-56.256-135.168 192.448 192.448 0 0 0-135.744-55.936z m0 318.528c-70.656 0-128-57.088-128-127.424 0-70.4 57.344-127.36 128-127.36 70.72 0 128 56.96 128 127.36 0 33.792-13.44 66.176-37.44 90.112a128.32 128.32 0 0 1-90.496 37.312z\" />\n    </SVGIcon>\n  );\n}\n\nIconSetting.displayName = 'Setting';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconComponent(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M783.5648 437.4528h-18.0224V336.6912c0-43.8272-35.6352-79.4624-79.4624-79.4624h-110.592V241.664c0-90.9312-73.728-164.6592-164.6592-164.6592-90.9312 0-164.6592 73.728-164.6592 164.6592v15.5648H155.2384c-43.8272 0-79.4624 35.6352-79.4624 79.4624v131.4816c0 16.7936 13.9264 30.72 30.72 30.72h56.1152c56.9344 0 103.2192 46.2848 103.2192 103.2192s-46.2848 103.2192-103.2192 103.2192H106.496c-16.7936 0-30.72 13.9264-30.72 30.72v131.4816c0 43.8272 35.6352 79.4624 79.4624 79.4624h531.2512c43.8272 0 79.4624-35.6352 79.4624-79.4624v-100.7616h18.0224c90.9312 0 164.6592-73.728 164.6592-164.6592-0.4096-90.9312-74.1376-164.6592-165.0688-164.6592z m0 267.8784h-48.7424c-16.7936 0-30.72 13.9264-30.72 30.72v131.4816c0 9.8304-8.192 18.0224-18.0224 18.0224H155.2384c-9.8304 0-18.0224-8.192-18.0224-18.0224v-100.7616h25.3952c90.9312 0 164.6592-73.728 164.6592-164.6592 0-90.9312-73.728-164.6592-164.6592-164.6592h-25.3952V336.6912c0-9.8304 8.192-18.0224 18.0224-18.0224h121.6512c16.7936 0 30.72-13.9264 30.72-30.72V241.664c0-56.9344 46.2848-103.2192 103.2192-103.2192s103.2192 46.2848 103.2192 103.2192v46.2848c0 16.7936 13.9264 30.72 30.72 30.72h141.312c9.8304 0 18.0224 8.192 18.0224 18.0224v131.4816c0 16.7936 13.9264 30.72 30.72 30.72h48.7424c56.9344 0 103.2192 46.2848 103.2192 103.2192s-46.2848 103.2192-103.2192 103.2192z\" />\n    </SVGIcon>\n  );\n}\nIconComponent.displayName = 'Component';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconClone(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M192 256.16C192 220.736 220.704 192 256.16 192h639.68C931.264 192 960 220.704 960 256.16v639.68A64.16 64.16 0 0 1 895.84 960H256.16A64.16 64.16 0 0 1 192 895.84V256.16z m64 31.584v576.512a32 32 0 0 0 31.744 31.744h576.512a32 32 0 0 0 31.744-31.744V287.744A32 32 0 0 0 864.256 256H287.744A32 32 0 0 0 256 287.744zM288 192v64h64V192H288z m128 0v64h64V192h-64z m128 0v64h64V192h-64z m128 0v64h64V192h-64z m128 0v64h64V192h-64z m96 96v64h64V288h-64z m0 128v64h64v-64h-64z m0 128v64h64v-64h-64z m0 128v64h64v-64h-64z m0 128v64h64v-64h-64z m-96 96v64h64v-64h-64z m-128 0v64h64v-64h-64z m-128 0v64h64v-64h-64z m-128 0v64h64v-64h-64z m-128 0v64h64v-64H288z m-96-96v64h64v-64H192z m0-128v64h64v-64H192z m0-128v64h64v-64H192z m0-128v64h64v-64H192z m0-128v64h64V288H192z m160 416c0-17.664 14.592-32 32.064-32h319.872a31.968 31.968 0 1 1 0 64h-319.872A31.968 31.968 0 0 1 352 704z m0-128c0-17.664 14.4-32 32.224-32h383.552c17.792 0 32.224 14.208 32.224 32 0 17.664-14.4 32-32.224 32H384.224A32.032 32.032 0 0 1 352 576z m0-128c0-17.664 14.4-32 32.224-32h383.552c17.792 0 32.224 14.208 32.224 32 0 17.664-14.4 32-32.224 32H384.224A32.032 32.032 0 0 1 352 448z m512 47.936V192h-64V159.968A31.776 31.776 0 0 0 768.032 128H160A31.776 31.776 0 0 0 128 159.968V768c0 17.92 14.304 31.968 31.968 31.968H192v64h303.936H128.128A63.968 63.968 0 0 1 64 799.872V128.128C64 92.704 92.48 64 128.128 64h671.744C835.296 64 864 92.48 864 128.128v367.808z\" />\n    </SVGIcon>\n  );\n}\n\nIconClone.displayName = 'Clone';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconPage(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M381.6 864H162.4c-6.9 0-12.4 4.6-12.4 10.3v19.3c0 5.7 5.6 10.3 12.4 10.3h219.1c6.8 0 12.4-4.6 12.4-10.3v-19.3c0.1-5.7-5.5-10.3-12.3-10.3zM382 780.6H162c-6.9 0-12.5 4.6-12.5 10.3v19.3c0 5.7 5.6 10.3 12.5 10.3h220c6.9 0 12.5-4.6 12.5-10.3v-19.3c0-5.7-5.6-10.3-12.5-10.3zM162.4 737.2h219.1c6.8 0 12.4-4.6 12.4-10.3v-19.3c0-5.7-5.6-10.3-12.4-10.3H162.4c-6.9 0-12.4 4.6-12.4 10.3v19.3c0 5.7 5.6 10.3 12.4 10.3z\" />\n      <path d=\"M977.1 0H46.9C21 0 0 21 0 46.9v930.2c0 25.9 21 46.9 46.9 46.9h930.2c25.9 0 46.9-21 46.9-46.9V46.9C1024 21 1003 0 977.1 0z m-18.7 911.6c0 25.9-21 46.9-46.9 46.9H112.4c-25.9 0-46.9-21-46.9-47V112.4c0-25.9 21-46.9 46.9-46.9h799.1c25.9 0 46.9 21 46.9 46.9v799.2z\" />\n      <path d=\"M207.9 342.7h608.2c32 0 57.9-25.9 57.9-57.9v-83c0-32-25.9-57.9-57.9-57.9H207.9c-32 0-57.9 25.9-57.9 57.9v83c0 32 25.9 57.9 57.9 57.9zM200 201.8c0-4.4 3.5-7.9 7.9-7.9h608.2c4.4 0 7.9 3.5 7.9 7.9v83c0 4.4-3.5 7.9-7.9 7.9H207.9c-4.4 0-7.9-3.5-7.9-7.9v-83zM806.4 405.7h-277c-37.3 0-67.6 30.2-67.6 67.6v363.2c0 37.3 30.2 67.6 67.6 67.6h277c37.3 0 67.6-30.2 67.6-67.6V473.3c0-37.4-30.2-67.6-67.6-67.6zM824 836.4c0 9.7-7.9 17.6-17.6 17.6h-277c-9.7 0-17.6-7.9-17.6-17.6V473.3c0-9.7 7.9-17.6 17.6-17.6h277c9.7 0 17.6 7.9 17.6 17.6v363.1zM272 649.7c67.4 0 122-54.6 122-122s-54.6-122-122-122-122 54.6-122 122 54.6 122 122 122z m0-204c45.2 0 82 36.8 82 82s-36.8 82-82 82-82-36.8-82-82 36.8-82 82-82z\" />\n    </SVGIcon>\n  );\n}\nIconPage.displayName = 'Page';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconContainer(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M800 800h64v64h-64v-64z m-128 0h64v64h-64v-64z m-128 0h64v64h-64v-64z m-128 0h64v64h-64v-64z m-256 0h64v64h-64v-64z m0-640h64v64h-64v-64z m128 640h64v64h-64v-64zM160 672h64v64h-64v-64z m0-128h64v64h-64v-64z m0-128h64v64h-64v-64z m0-128h64v64h-64v-64z m640 384h64v64h-64v-64z m0-128h64v64h-64v-64z m0-128h64v64h-64v-64z m0-128h64v64h-64v-64z m0-128h64v64h-64v-64z m-128 0h64v64h-64v-64z m-128 0h64v64h-64v-64z m-128 0h64v64h-64v-64z m-128 0h64v64h-64v-64z\" />\n      <path d=\"M896 64H128c-35.2 0-64 28.8-64 64v768c0 35.2 28.8 64 64 64h768c35.2 0 64-28.8 64-64V128c0-35.2-28.8-64-64-64z m0 800c0 19.2-12.8 32-32 32H160c-19.2 0-32-12.8-32-32V160c0-19.2 12.8-32 32-32h704c19.2 0 32 12.8 32 32v704z\" />\n    </SVGIcon>\n  );\n}\nIconContainer.displayName = 'Container';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconUnlock(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M384 480v-160c0-70.4 57.6-128 128-128s128 57.6 128 128v64h64v-64c0-105.6-86.4-192-192-192s-192 86.4-192 192v160H160v416h704V480H384z m416 352H224v-288h576v288z\" fill=\"#ffffff\" p-id=\"2813\" />\n      <path d=\"M416 736h192v-64h-192z\" fill=\"#ffffff\" p-id=\"2814\" />\n    </SVGIcon>\n  );\n}\nIconUnlock.displayName = 'IconUnlock';\n","import { ReactElement } from 'react';\nimport {\n  IPublicTypeComponentMetadata,\n  IPublicTypeNpmInfo,\n  IPublicTypeNodeData,\n  IPublicTypeNodeSchema,\n  IPublicTypeTitleContent,\n  IPublicTypeTransformedComponentMetadata,\n  IPublicTypeNestingFilter,\n  IPublicTypeI18nData,\n  IPublicTypePluginConfig,\n  IPublicTypeFieldConfig,\n  IPublicModelComponentMeta,\n  IPublicTypeAdvanced,\n} from '@alilc/lowcode-types';\nimport { deprecate, isRegExp, isTitleConfig, isNode } from '@alilc/lowcode-utils';\nimport { computed, createModuleEventBus, IEventBus } from '@alilc/lowcode-editor-core';\nimport { Node, INode } from './document';\nimport { Designer } from './designer';\nimport {\n  IconContainer,\n  IconPage,\n  IconComponent,\n} from './icons';\n\nexport function ensureAList(list?: string | string[]): string[] | null {\n  if (!list) {\n    return null;\n  }\n  if (!Array.isArray(list)) {\n    if (typeof list !== 'string') {\n      return null;\n    }\n    list = list.split(/ *[ ,|] */).filter(Boolean);\n  }\n  if (list.length < 1) {\n    return null;\n  }\n  return list;\n}\n\nexport function buildFilter(rule?: string | string[] | RegExp | IPublicTypeNestingFilter) {\n  if (!rule) {\n    return null;\n  }\n  if (typeof rule === 'function') {\n    return rule;\n  }\n  if (isRegExp(rule)) {\n    return (testNode: Node | IPublicTypeNodeSchema) => rule.test(testNode.componentName);\n  }\n  const list = ensureAList(rule);\n  if (!list) {\n    return null;\n  }\n  return (testNode: Node | IPublicTypeNodeSchema) => list.includes(testNode.componentName);\n}\n\nexport interface IComponentMeta extends IPublicModelComponentMeta {\n}\n\nexport class ComponentMeta implements IComponentMeta {\n  readonly isComponentMeta = true;\n\n  private _npm?: IPublicTypeNpmInfo;\n\n  private emitter: IEventBus = createModuleEventBus('ComponentMeta');\n\n  get npm() {\n    return this._npm;\n  }\n\n  set npm(_npm: any) {\n    this.setNpm(_npm);\n  }\n\n  private _componentName?: string;\n\n  get componentName(): string {\n    return this._componentName!;\n  }\n\n  private _isContainer?: boolean;\n\n  get isContainer(): boolean {\n    return this._isContainer! || this.isRootComponent();\n  }\n\n  get isMinimalRenderUnit(): boolean {\n    return this._isMinimalRenderUnit || false;\n  }\n\n  private _isModal?: boolean;\n\n  get isModal(): boolean {\n    return this._isModal!;\n  }\n\n  private _descriptor?: string;\n\n  get descriptor(): string | undefined {\n    return this._descriptor;\n  }\n\n  private _rootSelector?: string;\n\n  get rootSelector(): string | undefined {\n    return this._rootSelector;\n  }\n\n  private _transformedMetadata?: IPublicTypeTransformedComponentMetadata;\n\n  get configure(): IPublicTypeFieldConfig[] {\n    const config = this._transformedMetadata?.configure;\n    return config?.combined || config?.props || [];\n  }\n\n  private _liveTextEditing?: IPublicTypePluginConfig[];\n\n  get liveTextEditing() {\n    return this._liveTextEditing;\n  }\n\n  private _isTopFixed?: boolean;\n\n  get isTopFixed(): boolean {\n    return !!(this._isTopFixed);\n  }\n\n  private parentWhitelist?: IPublicTypeNestingFilter | null;\n\n  private childWhitelist?: IPublicTypeNestingFilter | null;\n\n  private _title?: IPublicTypeTitleContent;\n\n  private _isMinimalRenderUnit?: boolean;\n\n  get title(): string | IPublicTypeI18nData | ReactElement {\n    // string | i18nData | ReactElement\n    // TitleConfig title.label\n    if (isTitleConfig(this._title)) {\n      return (this._title?.label as any) || this.componentName;\n    }\n    return this._title || this.componentName;\n  }\n\n  @computed get icon() {\n    // give Slot default icon\n    // if _title is TitleConfig  get _title.icon\n    return (\n      this._transformedMetadata?.icon ||\n      // eslint-disable-next-line\n      (this.componentName === 'Page' ? IconPage : this.isContainer ? IconContainer : IconComponent)\n    );\n  }\n\n  private _acceptable?: boolean;\n\n  get acceptable(): boolean {\n    return this._acceptable!;\n  }\n\n  get advanced(): IPublicTypeAdvanced {\n    return this.getMetadata().configure.advanced || {};\n  }\n\n  /**\n   * @legacy compatiable for vision\n   * @deprecated\n   */\n  prototype?: any;\n\n  constructor(readonly designer: Designer, metadata: IPublicTypeComponentMetadata) {\n    this.parseMetadata(metadata);\n  }\n\n  setNpm(info: IPublicTypeNpmInfo) {\n    if (!this._npm) {\n      this._npm = info;\n    }\n  }\n\n  private parseMetadata(metadata: IPublicTypeComponentMetadata) {\n    const { componentName, npm, ...others } = metadata;\n    let _metadata = metadata;\n    if ((metadata as any).prototype) {\n      this.prototype = (metadata as any).prototype;\n    }\n    if (!npm && !Object.keys(others).length) {\n      // 没有注册的组件，只能删除，不支持复制、移动等操作\n      _metadata = {\n        componentName,\n        configure: {\n          component: {\n            disableBehaviors: ['copy', 'move', 'lock', 'unlock'],\n          },\n          advanced: {\n            callbacks: {\n              onMoveHook: () => false,\n            },\n          },\n        },\n      };\n    }\n    this._npm = npm || this._npm;\n    this._componentName = componentName;\n\n    // 额外转换逻辑\n    this._transformedMetadata = this.transformMetadata(_metadata);\n\n    const { title } = this._transformedMetadata;\n    if (title) {\n      this._title =\n        typeof title === 'string'\n          ? {\n              type: 'i18n',\n              'en-US': this.componentName,\n              'zh-CN': title,\n            }\n          : title;\n    }\n\n    const liveTextEditing = this.advanced.liveTextEditing || [];\n\n    function collectLiveTextEditing(items: IPublicTypeFieldConfig[]) {\n      items.forEach((config) => {\n        if (config?.items) {\n          collectLiveTextEditing(config.items);\n        } else {\n          const liveConfig = config.liveTextEditing || config.extraProps?.liveTextEditing;\n          if (liveConfig) {\n            liveTextEditing.push({\n              propTarget: String(config.name),\n              ...liveConfig,\n            });\n          }\n        }\n      });\n    }\n    collectLiveTextEditing(this.configure);\n    this._liveTextEditing = liveTextEditing.length > 0 ? liveTextEditing : undefined;\n\n    const isTopFixed = this.advanced.isTopFixed;\n\n    if (isTopFixed) {\n      this._isTopFixed = isTopFixed;\n    }\n\n    const { configure = {} } = this._transformedMetadata;\n    this._acceptable = false;\n\n    const { component } = configure;\n    if (component) {\n      this._isContainer = !!component.isContainer;\n      this._isModal = !!component.isModal;\n      this._descriptor = component.descriptor;\n      this._rootSelector = component.rootSelector;\n      this._isMinimalRenderUnit = component.isMinimalRenderUnit;\n      if (component.nestingRule) {\n        const { parentWhitelist, childWhitelist } = component.nestingRule;\n        this.parentWhitelist = buildFilter(parentWhitelist);\n        this.childWhitelist = buildFilter(childWhitelist);\n      }\n    } else {\n      this._isContainer = false;\n      this._isModal = false;\n    }\n    this.emitter.emit('metadata_change');\n  }\n\n  refreshMetadata() {\n    this.parseMetadata(this.getMetadata());\n  }\n\n  private transformMetadata(\n      metadta: IPublicTypeComponentMetadata,\n    ): IPublicTypeTransformedComponentMetadata {\n    const registeredTransducers = this.designer.componentActions.getRegisteredMetadataTransducers();\n    const result = registeredTransducers.reduce((prevMetadata, current) => {\n      return current(prevMetadata);\n    }, preprocessMetadata(metadta));\n\n    if (!result.configure) {\n      result.configure = {};\n    }\n    if (result.experimental && !result.configure.advanced) {\n      deprecate(result.experimental, '.experimental', '.configure.advanced');\n      result.configure.advanced = result.experimental;\n    }\n    return result as any;\n  }\n\n  isRootComponent(includeBlock = true): boolean {\n    return (\n      this.componentName === 'Page' ||\n      this.componentName === 'Component' ||\n      (includeBlock && this.componentName === 'Block')\n    );\n  }\n\n  @computed get availableActions() {\n    // eslint-disable-next-line prefer-const\n    let { disableBehaviors, actions } = this._transformedMetadata?.configure.component || {};\n    const disabled =\n      ensureAList(disableBehaviors) ||\n      (this.isRootComponent(false) ? ['copy', 'remove', 'lock', 'unlock'] : null);\n    actions = this.designer.componentActions.actions.concat(\n      this.designer.getGlobalComponentActions() || [],\n      actions || [],\n    );\n\n    if (disabled) {\n      if (disabled.includes('*')) {\n        return actions.filter((action) => action.condition === 'always');\n      }\n      return actions.filter((action) => disabled.indexOf(action.name) < 0);\n    }\n    return actions;\n  }\n\n  setMetadata(metadata: IPublicTypeComponentMetadata) {\n    this.parseMetadata(metadata);\n  }\n\n  getMetadata(): IPublicTypeTransformedComponentMetadata {\n    return this._transformedMetadata!;\n  }\n\n  checkNestingUp(my: INode | IPublicTypeNodeData, parent: INode) {\n    // 检查父子关系，直接约束型，在画布中拖拽直接掠过目标容器\n    if (this.parentWhitelist) {\n      return this.parentWhitelist(\n        parent.internalToShellNode(),\n        isNode(my) ? my.internalToShellNode() : my,\n      );\n    }\n    return true;\n  }\n\n  checkNestingDown(my: INode, target: INode | IPublicTypeNodeSchema | IPublicTypeNodeSchema[]): boolean {\n    // 检查父子关系，直接约束型，在画布中拖拽直接掠过目标容器\n    if (this.childWhitelist) {\n      const _target: any = !Array.isArray(target) ? [target] : target;\n      return _target.every((item: Node | IPublicTypeNodeSchema) => {\n        const _item = !isNode(item) ? new Node(my.document, item) : item;\n        return (\n          this.childWhitelist &&\n          this.childWhitelist(_item.internalToShellNode(), my.internalToShellNode())\n        );\n      });\n    }\n    return true;\n  }\n\n  onMetadataChange(fn: (args: any) => void): () => void {\n    this.emitter.on('metadata_change', fn);\n    return () => {\n      this.emitter.removeListener('metadata_change', fn);\n    };\n  }\n\n}\n\nexport function isComponentMeta(obj: any): obj is ComponentMeta {\n  return obj && obj.isComponentMeta;\n}\n\nfunction preprocessMetadata(metadata: IPublicTypeComponentMetadata): IPublicTypeTransformedComponentMetadata {\n  if (metadata.configure) {\n    if (Array.isArray(metadata.configure)) {\n      return {\n        ...metadata,\n        configure: {\n          props: metadata.configure,\n        },\n      };\n    }\n    return metadata as any;\n  }\n\n  return {\n    ...metadata,\n    configure: {},\n  };\n}\n","import { ComponentType } from 'react';\nimport { IPublicTypeComponentMetadata, IPublicTypeNodeSchema, IPublicTypeScrollable, IPublicTypeComponentInstance, IPublicModelSensor, IPublicTypeNodeInstance } from '@alilc/lowcode-types';\nimport { Point, ScrollTarget, ILocateEvent } from './designer';\nimport { BuiltinSimulatorRenderer } from './builtin-simulator/renderer';\nimport { Node, INode } from './document';\n\nexport type AutoFit = '100%';\n// eslint-disable-next-line no-redeclare\nexport const AutoFit = '100%';\n\nexport interface IScrollable extends IPublicTypeScrollable {\n}\nexport interface IViewport extends IScrollable {\n\n  /**\n   * 视口大小\n   */\n  width: number;\n  height: number;\n\n  /**\n   * 内容大小\n   */\n  contentWidth: number | AutoFit;\n  contentHeight: number | AutoFit;\n\n  /**\n   * 内容缩放\n   */\n  scale: number;\n\n  /**\n   * 视口矩形维度\n   */\n  readonly bounds: DOMRect;\n\n  /**\n   * 内容矩形维度\n   */\n  readonly contentBounds: DOMRect;\n\n  /**\n   * 视口滚动对象\n   */\n  readonly scrollTarget?: ScrollTarget;\n\n  /**\n   * 是否滚动中\n   */\n  readonly scrolling: boolean;\n\n  /**\n   * 内容当前滚动 X\n   */\n  readonly scrollX: number;\n\n  /**\n   * 内容当前滚动 Y\n   */\n  readonly scrollY: number;\n\n  /**\n   * 全局坐标系转化为本地坐标系\n   */\n  toLocalPoint(point: Point): Point;\n\n  /**\n   * 本地坐标系转化为全局坐标系\n   */\n  toGlobalPoint(point: Point): Point;\n}\n\nexport interface DropContainer {\n  container: INode;\n  instance: IPublicTypeComponentInstance;\n}\n\n/**\n * 模拟器控制进程协议\n */\nexport interface ISimulatorHost<P = object> extends IPublicModelSensor {\n  readonly isSimulator: true;\n\n  /**\n   * 获得边界维度等信息\n   */\n  readonly viewport: IViewport;\n  readonly contentWindow?: Window;\n  readonly contentDocument?: Document;\n  readonly renderer?: BuiltinSimulatorRenderer;\n\n  // dependsAsset // like react jQuery lodash\n  // themesAsset\n  // componentsAsset\n  // simulatorUrl //\n  // utils, dataSource, constants 模拟\n  //\n  // later:\n  // layout: ComponentName\n  // 获取区块代码，通过 components 传递，可异步获取\n  // 设置 simulator Props\n  setProps(props: P): void;\n  // 设置单个 Prop\n  set(key: string, value: any): void;\n\n  setSuspense(suspensed: boolean): void;\n\n  // #region ========= drag and drop helpers =============\n\n  /**\n   * 设置文字拖选\n   */\n  setNativeSelection(enableFlag: boolean): void;\n\n  /**\n   * 设置拖拽态\n   */\n  setDraggingState(state: boolean): void;\n\n  /**\n   * 设置拷贝态\n   */\n  setCopyState(state: boolean): void;\n\n  /**\n   * 清除所有态：拖拽态、拷贝态\n   */\n  clearState(): void;\n\n  // #endregion\n\n  /**\n   * 滚动视口到节点\n   */\n  scrollToNode(node: Node, detail?: any): void;\n\n  /**\n   * 描述组件\n   */\n  generateComponentMetadata(componentName: string): IPublicTypeComponentMetadata;\n\n  /**\n   * 根据组件信息获取组件类\n   */\n  getComponent(componentName: string): Component | any;\n\n  /**\n   * 根据节点获取节点的组件实例\n   */\n  getComponentInstances(node: Node): IPublicTypeComponentInstance[] | null;\n\n  /**\n   * 根据 schema 创建组件类\n   */\n  createComponent(schema: IPublicTypeNodeSchema): Component | null;\n\n  /**\n   * 根据节点获取节点的组件运行上下文\n   */\n  getComponentContext(node: Node): object | null;\n\n  getClosestNodeInstance(from: IPublicTypeComponentInstance, specId?: string): IPublicTypeNodeInstance | null;\n\n  computeRect(node: Node): DOMRect | null;\n\n  computeComponentInstanceRect(instance: IPublicTypeComponentInstance, selector?: string): DOMRect | null;\n\n  findDOMNodes(instance: IPublicTypeComponentInstance, selector?: string): Array<Element | Text> | null;\n\n  getDropContainer(e: ILocateEvent): DropContainer | null;\n\n  postEvent(evtName: string, evtData: any): void;\n\n  rerender(): void;\n\n  /**\n   * 销毁\n   */\n  purge(): void;\n}\n\nexport function isSimulatorHost(obj: any): obj is ISimulatorHost {\n  return obj && obj.isSimulator;\n}\n\n/**\n * 组件类定义\n */\nexport type Component = ComponentType<any> | object;\n\nexport interface INodeSelector {\n  node: Node;\n  instance?: IPublicTypeComponentInstance;\n}\n","import { obx, computed, makeObservable, action, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport { IDesigner } from '../designer';\nimport { DocumentModel, IDocumentModel, isDocumentModel } from '../document';\nimport {\n  IPublicTypeProjectSchema,\n  IPublicTypeRootSchema,\n  IPublicTypeComponentsMap,\n  IPublicApiProject,\n  IPublicModelDocumentModel,\n  IPublicEnumTransformStage,\n} from '@alilc/lowcode-types';\nimport { isLowCodeComponentType, isProCodeComponentType } from '@alilc/lowcode-utils';\nimport { ISimulatorHost } from '../simulator';\n\nexport interface IProject extends Omit< IPublicApiProject, 'simulatorHost' | 'importSchema' | 'exportSchema' | 'openDocument' | 'getDocumentById' | 'getCurrentDocument' | 'addPropsTransducer' | 'onRemoveDocument' | 'onChangeDocument' | 'onSimulatorHostReady' | 'onSimulatorRendererReady' | 'setI18n' > {\n\n  get designer(): IDesigner;\n\n  get simulator(): ISimulatorHost | null;\n\n  get currentDocument(): IDocumentModel | null;\n\n  get documents(): IDocumentModel[];\n\n  open(doc?: string | IDocumentModel | IPublicTypeRootSchema): IDocumentModel | null;\n\n  getDocumentByFileName(fileName: string): IDocumentModel | null;\n\n  createDocument(data?: IPublicTypeRootSchema): IDocumentModel;\n\n  load(schema?: IPublicTypeProjectSchema, autoOpen?: boolean | string): void;\n\n  getSchema(\n    stage: IPublicEnumTransformStage,\n  ): IPublicTypeProjectSchema;\n\n  getDocument(id: string): IDocumentModel | null;\n\n  onCurrentDocumentChange(fn: (doc: IDocumentModel) => void): () => void;\n\n  onSimulatorReady(fn: (args: any) => void): () => void;\n\n  onRendererReady(fn: () => void): () => void;\n\n  /**\n   * 分字段设置储存数据，不记录操作记录\n   */\n  set(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    key:\n      | 'version'\n      | 'componentsTree'\n      | 'componentsMap'\n      | 'utils'\n      | 'constants'\n      | 'i18n'\n      | 'css'\n      | 'dataSource'\n      | string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    value: any,\n  ): void;\n}\n\nexport class Project implements IProject {\n  private emitter: IEventBus = createModuleEventBus('Project');\n\n  @obx.shallow readonly documents: IDocumentModel[] = [];\n\n  private data: IPublicTypeProjectSchema = {\n    version: '1.0.0',\n    componentsMap: [],\n    componentsTree: [],\n    i18n: {},\n  };\n\n  private _simulator?: ISimulatorHost;\n\n  private isRendererReady: boolean = false;\n\n  /**\n   * 模拟器\n   */\n  get simulator(): ISimulatorHost | null {\n    return this._simulator || null;\n  }\n\n  @computed get currentDocument(): IDocumentModel | null {\n    return this.documents.find((doc) => doc.active);\n  }\n\n  @obx private _config: any = {};\n  @computed get config(): any {\n    // TODO: parse layout Component\n    return this._config;\n  }\n  set config(value: any) {\n    this._config = value;\n  }\n\n  @obx.ref private _i18n: any = {};\n  @computed get i18n(): any {\n    return this._i18n;\n  }\n  set i18n(value: any) {\n    this._i18n = value || {};\n  }\n\n  private documentsMap = new Map<string, DocumentModel>();\n\n  constructor(readonly designer: IDesigner, schema?: IPublicTypeProjectSchema, readonly viewName = 'global') {\n    makeObservable(this);\n    this.load(schema);\n  }\n\n  private getComponentsMap(): IPublicTypeComponentsMap {\n    return this.documents.reduce((\n      componentsMap: IPublicTypeComponentsMap,\n      curDoc: DocumentModel,\n      ) => {\n      const curComponentsMap = curDoc.getComponentsMap();\n      if (Array.isArray(curComponentsMap)) {\n        curComponentsMap.forEach((item) => {\n          const found = componentsMap.find((eItem) => {\n            if (\n              isProCodeComponentType(eItem) &&\n              isProCodeComponentType(item) &&\n              eItem.package === item.package &&\n              eItem.componentName === item.componentName\n            ) {\n              return true;\n            } else if (\n              isLowCodeComponentType(eItem) &&\n              eItem.componentName === item.componentName\n            ) {\n              return true;\n            }\n            return false;\n          });\n          if (found) return;\n          componentsMap.push(item);\n        });\n      }\n      return componentsMap;\n    }, [] as IPublicTypeComponentsMap);\n  }\n\n  /**\n   * 获取项目整体 schema\n   */\n  getSchema(\n      stage: IPublicEnumTransformStage = IPublicEnumTransformStage.Save,\n    ): IPublicTypeProjectSchema {\n    return {\n      ...this.data,\n      componentsMap: this.getComponentsMap(),\n      componentsTree: this.documents\n        .filter((doc) => !doc.isBlank())\n        .map((doc) => doc.export(stage)),\n      i18n: this.i18n,\n    };\n  }\n\n  /**\n   * 替换当前 document 的 schema，并触发渲染器的 render\n   * @param schema\n   */\n  setSchema(schema?: IPublicTypeProjectSchema) {\n    // FIXME: 这里的行为和 getSchema 并不对等，感觉不太对\n    const doc = this.documents.find((doc) => doc.active);\n    doc && doc.import(schema?.componentsTree[0]);\n    this.simulator?.rerender();\n  }\n\n  /**\n   * 整体设置项目 schema\n   *\n   * @param autoOpen true 自动打开文档 string 指定打开的文件\n   */\n  @action\n  load(schema?: IPublicTypeProjectSchema, autoOpen?: boolean | string) {\n    this.unload();\n    // load new document\n    this.data = {\n      version: '1.0.0',\n      componentsMap: [],\n      componentsTree: [],\n      i18n: {},\n      ...schema,\n    };\n    this.config = schema?.config || this.config;\n    this.i18n = schema?.i18n || this.i18n;\n\n    if (autoOpen) {\n      if (autoOpen === true) {\n        // auto open first document or open a blank page\n        // this.open(this.data.componentsTree[0]);\n        const documentInstances = this.data.componentsTree.map((data) => this.createDocument(data));\n        // TODO: 暂时先读 config tabBar 里的值，后面看整个 layout 结构是否能作为引擎规范\n        if (this.config?.layout?.props?.tabBar?.items?.length > 0) {\n          // slice(1) 这个贼不雅，默认任务 fileName 是类'/fileName'的形式\n          documentInstances\n            .find((i) => i.fileName === this.config.layout.props.tabBar.items[0].path?.slice(1))\n            ?.open();\n        } else {\n          documentInstances[0].open();\n        }\n      } else {\n        // auto open should be string of fileName\n        this.open(autoOpen);\n      }\n    }\n  }\n\n  /**\n   * 卸载当前项目数据\n   */\n  unload() {\n    if (this.documents.length < 1) {\n      return;\n    }\n    for (let i = this.documents.length - 1; i >= 0; i--) {\n      this.documents[i].remove();\n    }\n  }\n\n  removeDocument(doc: IPublicModelDocumentModel) {\n    const index = this.documents.indexOf(doc);\n    if (index < 0) {\n      return;\n    }\n    this.documents.splice(index, 1);\n    this.documentsMap.delete(doc.id);\n  }\n\n  /**\n   * 分字段设置储存数据，不记录操作记录\n   */\n  set(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    key:\n      | 'version'\n      | 'componentsTree'\n      | 'componentsMap'\n      | 'utils'\n      | 'constants'\n      | 'i18n'\n      | 'css'\n      | 'dataSource'\n      | string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    value: any,\n  ): void {\n    if (key === 'config') {\n      this.config = value;\n    }\n    if (key === 'i18n') {\n      this.i18n = value;\n    }\n    Object.assign(this.data, { [key]: value });\n  }\n\n  /**\n   * 分字段设置储存数据\n   */\n  get(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    key:\n      | 'version'\n      | 'componentsTree'\n      | 'componentsMap'\n      | 'utils'\n      | 'constants'\n      | 'i18n'\n      | 'css'\n      | 'dataSource'\n      | 'config'\n      | string,\n  ): any {\n    if (key === 'config') {\n      return this.config;\n    }\n    if (key === 'i18n') {\n      return this.i18n;\n    }\n    return Reflect.get(this.data, key);\n  }\n\n  getDocument(id: string): IDocumentModel | null {\n    // 此处不能使用 this.documentsMap.get(id)，因为在乐高 rollback 场景，document.id 会被改成其他值\n    return this.documents.find((doc) => doc.id === id) || null;\n  }\n\n  getDocumentByFileName(fileName: string): IDocumentModel | null {\n    return this.documents.find((doc) => doc.fileName === fileName) || null;\n  }\n\n  @action\n  createDocument(data?: IPublicTypeRootSchema): IDocumentModel {\n    const doc = new DocumentModel(this, data || this?.data?.componentsTree?.[0]);\n    this.documents.push(doc);\n    this.documentsMap.set(doc.id, doc);\n    return doc;\n  }\n\n  open(doc?: string | IDocumentModel | IPublicTypeRootSchema): IDocumentModel | null {\n    if (!doc) {\n      const got = this.documents.find((item) => item.isBlank());\n      if (got) {\n        return got.open();\n      }\n      doc = this.createDocument();\n      return doc.open();\n    }\n    if (typeof doc === 'string') {\n      const got = this.documents.find((item) => item.fileName === doc || item.id === doc);\n      if (got) {\n        return got.open();\n      }\n\n      const data = this.data.componentsTree.find((data) => data.fileName === doc);\n      if (data) {\n        doc = this.createDocument(data);\n        return doc.open();\n      }\n\n      return null;\n    } else if (isDocumentModel(doc)) {\n      return doc.open();\n    }\n    //  else if (isPageSchema(doc)) {\n    // 暂时注释掉，影响了 diff 功能\n    // const foundDoc = this.documents.find(curDoc => curDoc?.rootNode?.id && curDoc?.rootNode?.id === doc?.id);\n    // if (foundDoc) {\n    //   foundDoc.remove();\n    // }\n    // }\n\n    doc = this.createDocument(doc);\n    return doc.open();\n  }\n\n  checkExclusive(activeDoc: DocumentModel) {\n    this.documents.forEach((doc) => {\n      if (doc !== activeDoc) {\n        doc.suspense();\n      }\n    });\n    this.emitter.emit('current-document.change', activeDoc);\n  }\n\n  closeOthers(opened: DocumentModel) {\n    this.documents.forEach((doc) => {\n      if (doc !== opened) {\n        doc.close();\n      }\n    });\n  }\n\n  mountSimulator(simulator: ISimulatorHost) {\n    // TODO: 多设备 simulator 支持\n    this._simulator = simulator;\n    this.emitter.emit('lowcode_engine_simulator_ready', simulator);\n  }\n\n  setRendererReady(renderer: any) {\n    this.isRendererReady = true;\n    this.emitter.emit('lowcode_engine_renderer_ready', renderer);\n  }\n\n  onSimulatorReady(fn: (args: any) => void): () => void {\n    if (this._simulator) {\n      fn(this._simulator);\n      return () => {};\n    }\n    this.emitter.on('lowcode_engine_simulator_ready', fn);\n    return () => {\n      this.emitter.removeListener('lowcode_engine_simulator_ready', fn);\n    };\n  }\n\n  onRendererReady(fn: () => void): () => void {\n    if (this.isRendererReady) {\n      fn();\n    }\n    this.emitter.on('lowcode_engine_renderer_ready', fn);\n    return () => {\n      this.emitter.removeListener('lowcode_engine_renderer_ready', fn);\n    };\n  }\n\n  onCurrentDocumentChange(fn: (doc: IDocumentModel) => void): () => void {\n    this.emitter.on('current-document.change', fn);\n    return () => {\n      this.emitter.removeListener('current-document.change', fn);\n    };\n  }\n}\n","import { obx, computed, makeObservable } from '@alilc/lowcode-editor-core';\nimport { Point, ScrollTarget } from '../designer';\nimport { AutoFit, IViewport } from '../simulator';\n\nexport default class Viewport implements IViewport {\n  @obx.ref private rect?: DOMRect;\n\n  private _bounds?: DOMRect;\n\n  get bounds(): DOMRect {\n    if (this._bounds) {\n      return this._bounds;\n    }\n    this._bounds = this.viewportElement!.getBoundingClientRect();\n    requestAnimationFrame(() => {\n      this._bounds = undefined;\n    });\n    return this._bounds;\n  }\n\n  get contentBounds(): DOMRect {\n    const { bounds, scale } = this;\n    return new DOMRect(0, 0, bounds.width / scale, bounds.height / scale);\n  }\n\n  private viewportElement?: HTMLElement;\n\n  constructor() {\n    makeObservable(this);\n  }\n\n  mount(viewportElement: HTMLElement | null) {\n    if (!viewportElement || this.viewportElement === viewportElement) {\n      return;\n    }\n    this.viewportElement = viewportElement;\n    this.touch();\n  }\n\n  touch() {\n    if (this.viewportElement) {\n      this.rect = this.bounds;\n    }\n  }\n\n  @computed get height(): number {\n    if (!this.rect) {\n      return 600;\n    }\n    return this.rect.height;\n  }\n\n  set height(newHeight: number) {\n    this._contentHeight = newHeight / this.scale;\n    if (this.viewportElement) {\n      this.viewportElement.style.height = `${newHeight}px`;\n      this.touch();\n    }\n  }\n\n  @computed get width(): number {\n    if (!this.rect) {\n      return 1000;\n    }\n    return this.rect.width;\n  }\n\n  set width(newWidth: number) {\n    this._contentWidth = newWidth / this.scale;\n    if (this.viewportElement) {\n      this.viewportElement.style.width = `${newWidth}px`;\n      this.touch();\n    }\n  }\n\n  @obx.ref private _scale = 1;\n\n  /**\n   * 缩放比例\n   */\n  @computed get scale(): number {\n    return this._scale;\n  }\n\n  set scale(newScale: number) {\n    if (isNaN(newScale) || newScale <= 0) {\n      throw new Error(`invalid new scale \"${newScale}\"`);\n    }\n\n    this._scale = newScale;\n    this._contentWidth = this.width / this.scale;\n    this._contentHeight = this.height / this.scale;\n  }\n\n  @obx.ref private _contentWidth: number | AutoFit = AutoFit;\n\n  @obx.ref private _contentHeight: number | AutoFit = AutoFit;\n\n  @computed get contentHeight(): number | AutoFit {\n    return this._contentHeight;\n  }\n\n  set contentHeight(newContentHeight: number | AutoFit) {\n    this._contentHeight = newContentHeight;\n  }\n\n  @computed get contentWidth(): number | AutoFit {\n    return this._contentWidth;\n  }\n\n  set contentWidth(val: number | AutoFit) {\n    this._contentWidth = val;\n  }\n\n  @obx.ref private _scrollX = 0;\n\n  @obx.ref private _scrollY = 0;\n\n  get scrollX() {\n    return this._scrollX;\n  }\n\n  get scrollY() {\n    return this._scrollY;\n  }\n\n  private _scrollTarget?: ScrollTarget;\n\n  /**\n   * 滚动对象\n   */\n  get scrollTarget(): ScrollTarget | undefined {\n    return this._scrollTarget;\n  }\n\n  @obx private _scrolling = false;\n\n  get scrolling(): boolean {\n    return this._scrolling;\n  }\n\n  setScrollTarget(target: Window) {\n    const scrollTarget = new ScrollTarget(target);\n    this._scrollX = scrollTarget.left;\n    this._scrollY = scrollTarget.top;\n\n    let scrollTimer: any;\n    target.addEventListener('scroll', () => {\n      this._scrollX = scrollTarget.left;\n      this._scrollY = scrollTarget.top;\n      this._scrolling = true;\n      if (scrollTimer) {\n        clearTimeout(scrollTimer);\n      }\n      scrollTimer = setTimeout(() => {\n        this._scrolling = false;\n      }, 80);\n    });\n    target.addEventListener('resize', () => this.touch());\n    this._scrollTarget = scrollTarget;\n  }\n\n  toGlobalPoint(point: Point): Point {\n    if (!this.viewportElement) {\n      return point;\n    }\n\n    const rect = this.bounds;\n    return {\n      clientX: point.clientX * this.scale + rect.left,\n      clientY: point.clientY * this.scale + rect.top,\n    };\n  }\n\n  toLocalPoint(point: Point): Point {\n    if (!this.viewportElement) {\n      return point;\n    }\n\n    const rect = this.bounds;\n    return {\n      clientX: (point.clientX - rect.left) / this.scale,\n      clientY: (point.clientY - rect.top) / this.scale,\n    };\n  }\n}\n","// NOTE: 仅用作类型标注，切勿作为实体使用\nimport { BuiltinSimulatorHost } from './host';\nimport {\n  AssetLevel,\n  AssetLevels,\n  AssetList,\n  isAssetBundle,\n  isAssetItem,\n  AssetType,\n  assetItem,\n  isCSSUrl,\n} from '@alilc/lowcode-utils';\n\nimport { BuiltinSimulatorRenderer } from './renderer';\n\nexport function createSimulator(\n  host: BuiltinSimulatorHost,\n  iframe: HTMLIFrameElement,\n  vendors: AssetList = [],\n): Promise<BuiltinSimulatorRenderer> {\n  const win: any = iframe.contentWindow;\n  const doc = iframe.contentDocument!;\n\n  win.LCSimulatorHost = host;\n  win._ = window._;\n\n  const styles: any = {};\n  const scripts: any = {};\n  AssetLevels.forEach((lv) => {\n    styles[lv] = [];\n    scripts[lv] = [];\n  });\n\n  function parseAssetList(assets: AssetList, level?: AssetLevel) {\n    for (let asset of assets) {\n      if (!asset) {\n        continue;\n      }\n      if (isAssetBundle(asset)) {\n        if (asset.assets) {\n          parseAssetList(\n            Array.isArray(asset.assets) ? asset.assets : [asset.assets],\n            asset.level || level,\n          );\n        }\n        continue;\n      }\n      if (Array.isArray(asset)) {\n        parseAssetList(asset, level);\n        continue;\n      }\n      if (!isAssetItem(asset)) {\n        asset = assetItem(isCSSUrl(asset) ? AssetType.CSSUrl : AssetType.JSUrl, asset, level)!;\n      }\n      const id = asset.id ? ` data-id=\"${asset.id}\"` : '';\n      const lv = asset.level || level || AssetLevel.Environment;\n      if (asset.type === AssetType.JSUrl) {\n        scripts[lv].push(\n          `<script src=\"${asset.content}\"${id}></script>`,\n        );\n      } else if (asset.type === AssetType.JSText) {\n        scripts[lv].push(`<script${id}>${asset.content}</script>`);\n      } else if (asset.type === AssetType.CSSUrl) {\n        styles[lv].push(\n          `<link rel=\"stylesheet\" href=\"${asset.content}\"${id} />`,\n        );\n      } else if (asset.type === AssetType.CSSText) {\n        styles[lv].push(\n          `<style type=\"text/css\"${id}>${asset.content}</style>`,\n        );\n      }\n    }\n  }\n\n  parseAssetList(vendors);\n\n  const styleFrags = Object.keys(styles)\n    .map((key) => {\n      return `${styles[key].join('\\n')}<meta level=\"${key}\" />`;\n    })\n    .join('');\n  const scriptFrags = Object.keys(scripts)\n    .map((key) => {\n      return scripts[key].join('\\n');\n    })\n    .join('');\n\n  doc.open();\n  doc.write(`\n<!doctype html>\n<html class=\"engine-design-mode\">\n  <head><meta charset=\"utf-8\"/>\n    ${styleFrags}\n  </head>\n  <body>\n    ${scriptFrags}\n  </body>\n</html>`);\n  doc.close();\n\n  return new Promise((resolve) => {\n    const renderer = win.SimulatorRenderer;\n    if (renderer) {\n      return resolve(renderer);\n    }\n    const loaded = () => {\n      resolve(win.SimulatorRenderer || host.renderer);\n      win.removeEventListener('load', loaded);\n    };\n    win.addEventListener('load', loaded);\n  });\n}\n","import { Component } from '../simulator';\nimport { IPublicTypeNodeSchema, IPublicTypeComponentInstance, IPublicTypeNodeInstance } from '@alilc/lowcode-types';\n\nexport interface BuiltinSimulatorRenderer {\n  readonly isSimulatorRenderer: true;\n  autoRepaintNode?: boolean;\n  components: Record<string, Component>;\n  rerender: () => void;\n  createComponent(schema: IPublicTypeNodeSchema): Component | null;\n  getComponent(componentName: string): Component;\n  getClosestNodeInstance(\n      from: IPublicTypeComponentInstance,\n      nodeId?: string,\n    ): IPublicTypeNodeInstance<IPublicTypeComponentInstance> | null;\n  findDOMNodes(instance: IPublicTypeComponentInstance): Array<Element | Text> | null;\n  getClientRects(element: Element | Text): DOMRect[];\n  setNativeSelection(enableFlag: boolean): void;\n  setDraggingState(state: boolean): void;\n  setCopyState(state: boolean): void;\n  loadAsyncLibrary(asyncMap: { [index: string]: any }): void;\n  clearState(): void;\n  stopAutoRepaintNode(): void;\n  enableAutoRepaintNode(): void;\n  run(): void;\n}\n\nexport function isSimulatorRenderer(obj: any): obj is BuiltinSimulatorRenderer {\n  return obj && obj.isSimulatorRenderer;\n}\n","import { autorun, makeObservable, obx, createModuleEventBus, IEventBus } from '@alilc/lowcode-editor-core';\nimport { BuiltinSimulatorHost } from './host';\nimport { BuiltinSimulatorRenderer, isSimulatorRenderer } from './renderer';\n\nconst UNSET = Symbol('unset');\nexport type MasterProvider = (master: BuiltinSimulatorHost) => any;\nexport type RendererConsumer<T> = (renderer: BuiltinSimulatorRenderer, data: T) => Promise<any>;\n\n// master 进程\n//  0. 初始化该对象，因为需要响应变更发生在 master 进程\n//  1. 提供消费数据或数据提供器，比如 Asset 资源，如果不是数据提供器，会持续提供\n//  2. 收到成功通知\n// renderer 进程\n//  1. 持续消费，并持续监听数据\n//  2. 消费\n\n// 这里涉及俩个自定义项\n//  1. 被消费数据协议\n//  2. 消费机制（渲染进程自定 + 传递进入）\n\nexport default class ResourceConsumer<T = any> {\n  private emitter: IEventBus = createModuleEventBus('ResourceConsumer');\n\n  @obx.ref private _data: T | typeof UNSET = UNSET;\n\n  private _providing?: () => void;\n\n  private _consuming?: () => void;\n\n  private _firstConsumed = false;\n\n  private resolveFirst?: (resolve?: any) => void;\n\n  constructor(provider: () => T, private consumer?: RendererConsumer<T>) {\n    makeObservable(this);\n    this._providing = autorun(() => {\n      this._data = provider();\n    });\n  }\n\n  consume(consumerOrRenderer: BuiltinSimulatorRenderer | ((data: T) => any)) {\n    if (this._consuming) {\n      return;\n    }\n    let consumer: (data: T) => any;\n    if (isSimulatorRenderer(consumerOrRenderer)) {\n      if (!this.consumer) {\n        // TODO: throw error\n        return;\n      }\n      const rendererConsumer = this.consumer!;\n\n      consumer = (data) => rendererConsumer(consumerOrRenderer, data);\n    } else {\n      consumer = consumerOrRenderer;\n    }\n    this._consuming = autorun(async () => {\n      if (this._data === UNSET) {\n        return;\n      }\n      await consumer(this._data);\n      // TODO: catch error and report\n      if (this.resolveFirst) {\n        this.resolveFirst();\n      } else {\n        this._firstConsumed = true;\n      }\n    });\n  }\n\n  dispose() {\n    if (this._providing) {\n      this._providing();\n    }\n    if (this._consuming) {\n      this._consuming();\n    }\n    this.emitter.removeAllListeners();\n  }\n\n  waitFirstConsume(): Promise<any> {\n    if (this._firstConsumed) {\n      return Promise.resolve();\n    }\n    return new Promise((resolve) => {\n      this.resolveFirst = resolve;\n    });\n  }\n}\n","import PropTypes from 'prop-types';\nimport { isValidElement } from 'react';\nimport { isElement } from '@alilc/lowcode-utils';\nimport { IPublicTypePropConfig } from '@alilc/lowcode-types';\n\nexport const primitiveTypes = [\n  'string',\n  'number',\n  'array',\n  'bool',\n  'func',\n  'object',\n  'node',\n  'element',\n  'symbol',\n  'any',\n];\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction makeRequired(propType: any, lowcodeType: string | object) {\n  function lowcodeCheckTypeIsRequired(...rest: any[]) {\n    return propType.isRequired(...rest);\n  }\n  if (typeof lowcodeType === 'string') {\n    lowcodeType = {\n      type: lowcodeType,\n    };\n  }\n  lowcodeCheckTypeIsRequired.lowcodeType = {\n    ...lowcodeType,\n    isRequired: true,\n  };\n  return lowcodeCheckTypeIsRequired;\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction define(propType: any = PropTypes.any, lowcodeType: string | object = {}) {\n  if (!propType._inner && propType.name !== 'lowcodeCheckType') {\n    propType.lowcodeType = lowcodeType;\n  }\n  function lowcodeCheckType(...rest: any[]) {\n    return propType(...rest);\n  }\n  lowcodeCheckType.lowcodeType = lowcodeType;\n  lowcodeCheckType.isRequired = makeRequired(propType, lowcodeType);\n  return lowcodeCheckType;\n}\n\nconst LowcodeTypes: any = {\n  ...PropTypes,\n  define,\n};\n\n(window as any).PropTypes = LowcodeTypes;\n(window as any).React.PropTypes = LowcodeTypes;\n\n// override primitive type checkers\nprimitiveTypes.forEach((type) => {\n  const propType = (PropTypes as any)[type];\n  if (!propType) {\n    return;\n  }\n  propType._inner = true;\n  LowcodeTypes[type] = define(propType, type);\n});\n\n// You can ensure that your prop is limited to specific values by treating\n// it as an enum.\nLowcodeTypes.oneOf = (list: any[]) => {\n  return define(PropTypes.oneOf(list), {\n    type: 'oneOf',\n    value: list,\n  });\n};\n\n// An array of a certain type\nLowcodeTypes.arrayOf = (type: any) => {\n  return define(PropTypes.arrayOf(type), {\n    type: 'arrayOf',\n    value: type.lowcodeType || 'any',\n  });\n};\n\n// An object with property values of a certain type\nLowcodeTypes.objectOf = (type: any) => {\n  return define(PropTypes.objectOf(type), {\n    type: 'objectOf',\n    value: type.lowcodeType || 'any',\n  });\n};\n\n// An object that could be one of many types\nLowcodeTypes.oneOfType = (types: any[]) => {\n  const itemTypes = types.map((type) => type.lowcodeType || 'any');\n  return define(PropTypes.oneOfType(types), {\n    type: 'oneOfType',\n    value: itemTypes,\n  });\n};\n\n// An object with warnings on extra properties\nLowcodeTypes.exact = (typesMap: any) => {\n  const configs = Object.keys(typesMap).map((key) => {\n    return {\n      name: key,\n      propType: typesMap[key]?.lowcodeType || 'any',\n    };\n  });\n  return define(PropTypes.exact(typesMap), {\n    type: 'exact',\n    value: configs,\n  });\n};\n\n// An object taking on a particular shape\nLowcodeTypes.shape = (typesMap: any = {}) => {\n  const configs = Object.keys(typesMap).map((key) => {\n    return {\n      name: key,\n      propType: typesMap[key]?.lowcodeType || 'any',\n    };\n  });\n  return define(PropTypes.shape(typesMap), {\n    type: 'shape',\n    value: configs,\n  });\n};\n\nconst BasicTypes = ['string', 'number', 'object'];\nexport function parseProps(component: any): IPublicTypePropConfig[] {\n  if (!component) {\n    return [];\n  }\n  const propTypes = component.propTypes || ({} as any);\n  const defaultProps = component.defaultProps || ({} as any);\n  const result: any = {};\n  if (!propTypes) return [];\n  Object.keys(propTypes).forEach((key) => {\n    const propTypeItem = propTypes[key];\n    const defaultValue = defaultProps[key];\n    const { lowcodeType } = propTypeItem;\n    if (lowcodeType) {\n      result[key] = {\n        name: key,\n        propType: lowcodeType,\n      };\n      if (defaultValue != null) {\n        result[key].defaultValue = defaultValue;\n      }\n      return;\n    }\n\n    let i = primitiveTypes.length;\n    while (i-- > 0) {\n      const k = primitiveTypes[i];\n      if ((LowcodeTypes as any)[k] === propTypeItem) {\n        result[key] = {\n          name: key,\n          propType: k,\n        };\n        if (defaultValue != null) {\n          result[key].defaultValue = defaultValue;\n        }\n        return;\n      }\n    }\n    result[key] = {\n      name: key,\n      propType: 'any',\n    };\n    if (defaultValue != null) {\n      result[key].defaultValue = defaultValue;\n    }\n  });\n\n  Object.keys(defaultProps).forEach((key) => {\n    if (result[key]) return;\n    const defaultValue = defaultProps[key];\n    let type: string = typeof defaultValue;\n    if (type === 'boolean') {\n      type = 'bool';\n    } else if (type === 'function') {\n      type = 'func';\n    } else if (type === 'object' && Array.isArray(defaultValue)) {\n      type = 'array';\n    } else if (defaultValue && isValidElement(defaultValue)) {\n      type = 'node';\n    } else if (defaultValue && isElement(defaultValue)) {\n      type = 'element';\n    } else if (!BasicTypes.includes(type)) {\n      type = 'any';\n    }\n\n    result[key] = {\n      name: key,\n      propType: type || 'any',\n      defaultValue,\n    };\n  });\n\n  return Object.keys(result).map((key) => result[key]);\n}\n\nexport function parseMetadata(component: any): any {\n  return {\n    props: parseProps(component),\n    ...component.componentMetadata,\n  };\n}\n","import { getClosestNode, canClickNode } from '@alilc/lowcode-utils';\nimport { Node } from '../../document';\n\n/**\n * 获取离当前节点最近的可点击节点\n * @param currentNode\n * @param event\n */\nexport const getClosestClickableNode = (\n  currentNode: Node | undefined | null,\n  event: MouseEvent,\n) => {\n  let node = currentNode;\n  while (node) {\n    // 判断当前节点是否可点击\n    let canClick = canClickNode(node, event);\n    // eslint-disable-next-line no-loop-func\n    const lockedNode = getClosestNode(node!, (n) => {\n      // 假如当前节点就是 locked 状态，要从当前节点的父节点开始查找\n      return !!(node?.isLocked ? n.parent?.isLocked : n.isLocked);\n    });\n    if (lockedNode && lockedNode.getId() !== node.getId()) {\n      canClick = false;\n    }\n    if (canClick) {\n      break;\n    }\n    // 对于不可点击的节点，继续向上找\n    node = node.parent;\n  }\n  return node;\n};\n","import { IPublicModelClipboard } from '@alilc/lowcode-types';\n\nfunction getDataFromPasteEvent(event: ClipboardEvent) {\n  const { clipboardData } = event;\n  if (!clipboardData) {\n    return null;\n  }\n\n  try {\n    // { componentsMap, componentsTree, ... }\n    const data = JSON.parse(clipboardData.getData('text/plain'));\n    if (!data) {\n      return {};\n    }\n    if (data.componentsTree) {\n      return data;\n    } else if (data.componentName) {\n      return {\n        componentsTree: [data],\n      };\n    }\n  } catch (error) {\n    // TODO: open the parser implement\n    return { };\n  }\n}\n\nexport interface IClipboard extends IPublicModelClipboard {\n\n  initCopyPaster(el: HTMLTextAreaElement): void;\n\n  injectCopyPaster(document: Document): void;\n}\nclass Clipboard implements IClipboard {\n  private copyPasters: HTMLTextAreaElement[] = [];\n\n  private waitFn?: (data: any, e: ClipboardEvent) => void;\n\n  isCopyPasteEvent(e: Event) {\n    this.isCopyPaster(e.target);\n  }\n\n  private isCopyPaster(el: any) {\n    return this.copyPasters.includes(el);\n  }\n\n  initCopyPaster(el: HTMLTextAreaElement) {\n    this.copyPasters.push(el);\n    const onPaste = (e: ClipboardEvent) => {\n      if (this.waitFn) {\n        this.waitFn(getDataFromPasteEvent(e), e);\n        this.waitFn = undefined;\n      }\n      el.blur();\n    };\n    el.addEventListener('paste', onPaste, false);\n    return () => {\n      el.removeEventListener('paste', onPaste, false);\n      const i = this.copyPasters.indexOf(el);\n      if (i > -1) {\n        this.copyPasters.splice(i, 1);\n      }\n    };\n  }\n\n  injectCopyPaster(document: Document) {\n    if (this.copyPasters.find((x) => x.ownerDocument === document)) {\n      return;\n    }\n    const copyPaster = document.createElement<'textarea'>('textarea');\n    copyPaster.style.cssText = 'position: absolute;left: -9999px;top:-100px';\n    document.body.appendChild(copyPaster);\n    const dispose = this.initCopyPaster(copyPaster);\n    return () => {\n      dispose();\n      document.removeChild(copyPaster);\n    };\n  }\n\n  setData(data: any): void {\n    const copyPaster = this.copyPasters.find((x) => x.ownerDocument);\n    if (!copyPaster) {\n      return;\n    }\n    copyPaster.value = typeof data === 'string' ? data : JSON.stringify(data);\n    copyPaster.select();\n    copyPaster.ownerDocument!.execCommand('copy');\n\n    copyPaster.blur();\n  }\n\n  waitPasteData(keyboardEvent: KeyboardEvent, cb: (data: any, e: ClipboardEvent) => void) {\n    const win = keyboardEvent.view;\n    if (!win) {\n      return;\n    }\n    const copyPaster = this.copyPasters.find((cp) => cp.ownerDocument === win.document);\n    if (copyPaster) {\n      copyPaster.select();\n      this.waitFn = cb;\n    }\n  }\n}\n\nexport const clipboard = new Clipboard();\n","import { obx, globalContext } from '@alilc/lowcode-editor-core';\nimport { IPublicTypePluginConfig, IPublicTypeLiveTextEditingConfig } from '@alilc/lowcode-types';\nimport { Node, Prop } from '../../document';\n\nconst EDITOR_KEY = 'data-setter-prop';\n\nfunction getSetterPropElement(ele: HTMLElement, root: HTMLElement): HTMLElement | null {\n  const box = ele.closest(`[${EDITOR_KEY}]`);\n  if (!box || !root.contains(box)) {\n    return null;\n  }\n  return box as HTMLElement;\n}\n\nfunction defaultSaveContent(content: string, prop: Prop) {\n  prop.setValue(content);\n}\n\nexport interface EditingTarget {\n  node: Node;\n  rootElement: HTMLElement;\n  event: MouseEvent;\n}\n\nlet saveHandlers: SaveHandler[] = [];\nfunction addLiveEditingSaveHandler(handler: SaveHandler) {\n  saveHandlers.push(handler);\n}\nfunction clearLiveEditingSaveHandler() {\n  saveHandlers = [];\n}\n\nlet specificRules: SpecificRule[] = [];\nfunction addLiveEditingSpecificRule(rule: SpecificRule) {\n  specificRules.push(rule);\n}\nfunction clearLiveEditingSpecificRule() {\n  specificRules = [];\n}\n\nexport class LiveEditing {\n  static addLiveEditingSpecificRule = addLiveEditingSpecificRule;\n  static clearLiveEditingSpecificRule = clearLiveEditingSpecificRule;\n\n  static addLiveEditingSaveHandler = addLiveEditingSaveHandler;\n  static clearLiveEditingSaveHandler = clearLiveEditingSaveHandler;\n\n  @obx.ref private _editing: Prop | null = null;\n\n  apply(target: EditingTarget) {\n    const { node, event, rootElement } = target;\n    const targetElement = event.target as HTMLElement;\n    const { liveTextEditing } = node.componentMeta;\n\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    const npm = node?.componentMeta?.npm;\n    const selected =\n      [npm?.package, npm?.componentName].filter((item) => !!item).join('-') || node?.componentMeta?.componentName || '';\n    editor?.eventBus.emit('designer.builtinSimulator.liveEditing', {\n      selected,\n    });\n\n    let setterPropElement = getSetterPropElement(targetElement, rootElement);\n    let propTarget = setterPropElement?.dataset.setterProp;\n    let matched: (IPublicTypePluginConfig & { propElement?: HTMLElement }) | undefined | null;\n    if (liveTextEditing) {\n      if (propTarget) {\n        // 已埋点命中 data-setter-prop=\"proptarget\", 从 liveTextEditing 读取配置（mode|onSaveContent）\n        matched = liveTextEditing.find(config => config.propTarget == propTarget);\n      } else {\n        // 执行 embedTextEditing selector 规则，获得第一个节点 是否 contains e.target，若匹配，读取配置\n        matched = liveTextEditing.find(config => {\n          if (!config.selector) {\n            return false;\n          }\n          setterPropElement = queryPropElement(rootElement, targetElement, config.selector);\n          return !!setterPropElement;\n        });\n        propTarget = matched?.propTarget;\n      }\n    } else {\n      specificRules.some((rule) => {\n        matched = rule(target);\n        return !!matched;\n      });\n      if (matched) {\n        propTarget = matched.propTarget;\n        setterPropElement = matched.propElement || queryPropElement(rootElement, targetElement, matched.selector);\n      }\n    }\n\n    // if (!propTarget) {\n    //   // 自动纯文本编辑满足一下情况：\n    //   //  1. children 内容都是 Leaf 且都是文本（一期）\n    //   //  2. DOM 节点是单层容器，子集都是文本节点 (已满足)\n    //   const isAllText = node.children?.every(item => {\n    //     return item.isLeaf() && item.getProp('children')?.type === 'literal';\n    //   });\n    //   // TODO:\n    // }\n\n    if (propTarget && setterPropElement) {\n      const prop = node.getProp(propTarget, true)!;\n\n      if (this._editing === prop) {\n        return;\n      }\n\n      // 进入编辑\n      //  1. 设置 contentEditable=\"plaintext|...\"\n      //  2. 添加类名\n      //  3. focus & cursor locate\n      //  4. 监听 blur 事件\n      //  5. 设置编辑锁定：disable hover | disable select | disable canvas drag\n\n      const onSaveContent = matched?.onSaveContent || saveHandlers.find(item => item.condition(prop))?.onSaveContent || defaultSaveContent;\n\n      setterPropElement.setAttribute('contenteditable', matched?.mode && matched.mode !== 'plaintext' ? 'true' : 'plaintext-only');\n      setterPropElement.classList.add('engine-live-editing');\n      // be sure\n      setterPropElement.focus();\n      setCaret(event);\n\n      this._save = () => {\n        onSaveContent(setterPropElement!.innerText, prop);\n      };\n\n      const keydown = (e: KeyboardEvent) => {\n        console.info(e.code);\n        switch (e.code) {\n          case 'Enter':\n            break;\n            // TODO: check is richtext?\n          case 'Escape':\n            break;\n          case 'Tab':\n            setterPropElement?.blur();\n        }\n        // esc\n        // enter\n        // tab\n      };\n      const focusout = (/* e: FocusEvent */) => {\n        this.saveAndDispose();\n      };\n      setterPropElement.addEventListener('focusout', focusout);\n      setterPropElement.addEventListener('keydown', keydown, true);\n\n      this._dispose = () => {\n        setterPropElement!.classList.remove('engine-live-editing');\n        setterPropElement!.removeAttribute('contenteditable');\n        setterPropElement!.removeEventListener('focusout', focusout);\n        setterPropElement!.removeEventListener('keydown', keydown, true);\n      };\n\n      this._editing = prop;\n    }\n\n    // TODO: process enter | esc events & joint the FocusTracker\n\n    // TODO: upward testing for b/i/a html elements\n  }\n\n  get editing() {\n    return this._editing;\n  }\n\n  private _dispose?: () => void;\n\n  private _save?: () => void;\n\n  saveAndDispose() {\n    if (this._save) {\n      this._save();\n      this._save = undefined;\n    }\n    this.dispose();\n  }\n\n  dispose() {\n    if (this._dispose) {\n      this._dispose();\n      this._dispose = undefined;\n    }\n    this._editing = null;\n  }\n}\n\nexport type SpecificRule = (target: EditingTarget) => (IPublicTypeLiveTextEditingConfig & {\n  propElement?: HTMLElement;\n}) | null;\n\nexport interface SaveHandler {\n  condition: (prop: Prop) => boolean;\n  onSaveContent: (content: string, prop: Prop) => void;\n}\n\nfunction setCaret(event: MouseEvent) {\n  const doc = event.view?.document;\n  if (!doc) return;\n  const range = doc.caretRangeFromPoint(event.clientX, event.clientY);\n  if (range) {\n    selectRange(doc, range);\n    setTimeout(() => selectRange(doc, range), 1);\n  }\n}\n\nfunction selectRange(doc: Document, range: Range) {\n  const selection = doc.getSelection();\n  if (selection) {\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}\n\nfunction queryPropElement(rootElement: HTMLElement, targetElement: HTMLElement, selector?: string) {\n  if (!selector) {\n    return null;\n  }\n  let propElement = selector === ':root' ? rootElement : rootElement.querySelector(selector);\n  if (!propElement) {\n    return null;\n  }\n  if (!propElement.contains(targetElement)) {\n    // try selectorAll\n    propElement = Array.from(rootElement.querySelectorAll(selector)).find(item => item.contains(targetElement)) as HTMLElement;\n    if (!propElement) {\n      return null;\n    }\n  }\n  return propElement as HTMLElement;\n}\n","import Viewport from '../builtin-simulator/viewport';\nimport { ISimulatorHost } from '../simulator';\n\nexport function isElementNode(domNode: Element) {\n  return domNode.nodeType === Node.ELEMENT_NODE;\n}\n\n/**\n * 判断节点是否在 viewport 内，判断依据：只要节点有一部分在 viewport 内，都算 true，其余情况 false\n * @param domNode 待检测的节点\n * @param viewport 画布 viewport\n * @returns 是否在 viewport 内\n */\nexport function isDOMNodeVisible(domNode: Element, viewport: Viewport) {\n  const domNodeRect = domNode.getBoundingClientRect();\n  const { width, height } = viewport.contentBounds;\n  const { left, right, top, bottom, width: nodeWidth, height: nodeHeight } = domNodeRect;\n  return (\n    left >= -nodeWidth &&\n    top >= -nodeHeight &&\n    bottom <= height + nodeHeight &&\n    right <= width + nodeWidth\n  );\n}\n\n/**\n * normalize triggers\n * @param triggers\n */\nexport function normalizeTriggers(triggers: string[]) {\n  return triggers.map((trigger: string) => trigger?.toUpperCase());\n}\n\n/**\n * make a handler that listen all sensors:document, avoid frame lost\n */\n export function makeEventsHandler(\n  boostEvent: MouseEvent | DragEvent,\n  sensors: ISimulatorHost[],\n): (fn: (sdoc: Document) => void) => void {\n  const topDoc = window.document;\n  const sourceDoc = boostEvent.view?.document || topDoc;\n  const docs = new Set<Document>();\n  docs.add(topDoc);\n  docs.add(sourceDoc);\n  sensors.forEach((sim) => {\n    const sdoc = sim.contentDocument;\n    if (sdoc) {\n      docs.add(sdoc);\n    }\n  });\n\n  return (handle: (sdoc: Document) => void) => {\n    docs.forEach((doc) => handle(doc));\n  };\n}","import {\n  obx,\n  autorun,\n  reaction,\n  computed,\n  getPublicPath,\n  focusTracker,\n  engineConfig,\n  IReactionPublic,\n  IReactionOptions,\n  IReactionDisposer,\n  makeObservable,\n  createModuleEventBus,\n  IEventBus,\n} from '@alilc/lowcode-editor-core';\nimport { ISimulatorHost, Component, DropContainer } from '../simulator';\nimport Viewport from './viewport';\nimport { createSimulator } from './create-simulator';\nimport { Node, INode, contains, isRootNode, isLowCodeComponent } from '../document';\nimport ResourceConsumer from './resource-consumer';\nimport {\n  AssetLevel,\n  Asset,\n  AssetList,\n  assetBundle,\n  assetItem,\n  AssetType,\n  isElement,\n  isFormEvent,\n  hasOwnProperty,\n  UtilsMetadata,\n  getClosestNode,\n  transactionManager,\n  isDragAnyObject,\n  isDragNodeObject,\n  isLocationData,\n} from '@alilc/lowcode-utils';\nimport {\n  isShaken,\n  ILocateEvent,\n  isChildInline,\n  isRowContainer,\n  getRectTarget,\n  CanvasPoint,\n  Designer,\n} from '../designer';\nimport { parseMetadata } from './utils/parse-metadata';\nimport { getClosestClickableNode } from './utils/clickable';\nimport {\n  IPublicTypeComponentMetadata,\n  IPublicTypeComponentSchema,\n  IPublicTypePackage,\n  IPublicEnumTransitionType,\n  IPublicEnumDragObjectType,\n  IPublicTypeDragNodeObject,\n  IPublicTypeNodeInstance,\n  IPublicTypeComponentInstance,\n  IPublicTypeLocationChildrenDetail,\n  IPublicTypeLocationDetailType,\n  IPublicTypeRect,\n} from '@alilc/lowcode-types';\nimport { BuiltinSimulatorRenderer } from './renderer';\nimport { clipboard } from '../designer/clipboard';\nimport { LiveEditing } from './live-editing/live-editing';\nimport { Project } from '../project';\nimport { Scroller } from '../designer/scroller';\nimport { isElementNode, isDOMNodeVisible } from '../utils/misc';\nimport { debounce } from 'lodash';\n\nexport type LibraryItem = IPublicTypePackage & {\n  package: string;\n  library: string;\n  urls?: Asset;\n  editUrls?: Asset;\n};\n\nexport interface DeviceStyleProps {\n  canvas?: object;\n  viewport?: object;\n}\n\nexport interface BuiltinSimulatorProps {\n  // 从 documentModel 上获取\n  // suspended?: boolean;\n  designMode?: 'live' | 'design' | 'preview' | 'extend' | 'border';\n  device?: 'mobile' | 'iphone' | string;\n  deviceClassName?: string;\n  environment?: Asset;\n  // @TODO 补充类型\n  /** @property 请求处理器配置 */\n  requestHandlersMap?: any;\n  extraEnvironment?: Asset;\n  library?: LibraryItem[];\n  utilsMetadata?: UtilsMetadata;\n  simulatorUrl?: Asset;\n  theme?: Asset;\n  componentsAsset?: Asset;\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  [key: string]: any;\n}\n\nconst defaultSimulatorUrl = (() => {\n  const publicPath = getPublicPath();\n  let urls;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_, prefix = '', dev] = /^(.+?)(\\/js)?\\/?$/.exec(publicPath) || [];\n  if (dev) {\n    urls = [\n      `${prefix}/css/react-simulator-renderer.css`,\n      `${prefix}/js/react-simulator-renderer.js`,\n    ];\n  } else if (process.env.NODE_ENV === 'production') {\n    urls = [`${prefix}/react-simulator-renderer.css`, `${prefix}/react-simulator-renderer.js`];\n  } else {\n    urls = [`${prefix}/react-simulator-renderer.css`, `${prefix}/react-simulator-renderer.js`];\n  }\n  return urls;\n})();\n\nconst defaultRaxSimulatorUrl = (() => {\n  const publicPath = getPublicPath();\n  let urls;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_, prefix = '', dev] = /^(.+?)(\\/js)?\\/?$/.exec(publicPath) || [];\n  if (dev) {\n    urls = [`${prefix}/css/rax-simulator-renderer.css`, `${prefix}/js/rax-simulator-renderer.js`];\n  } else if (process.env.NODE_ENV === 'production') {\n    urls = [`${prefix}/rax-simulator-renderer.css`, `${prefix}/rax-simulator-renderer.js`];\n  } else {\n    urls = [`${prefix}/rax-simulator-renderer.css`, `${prefix}/rax-simulator-renderer.js`];\n  }\n  return urls;\n})();\n\nconst defaultEnvironment = [\n  // https://g.alicdn.com/mylib/??react/16.11.0/umd/react.production.min.js,react-dom/16.8.6/umd/react-dom.production.min.js,prop-types/15.7.2/prop-types.min.js\n  assetItem(\n    AssetType.JSText,\n    'window.React=parent.React;window.ReactDOM=parent.ReactDOM;window.__is_simulator_env__=true;',\n    undefined,\n    'react',\n  ),\n  assetItem(\n    AssetType.JSText,\n    'window.PropTypes=parent.PropTypes;React.PropTypes=parent.PropTypes; window.__REACT_DEVTOOLS_GLOBAL_HOOK__ = window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__;',\n  ),\n];\n\nconst defaultRaxEnvironment = [\n  assetItem(\n    AssetType.JSText,\n    'window.Rax=parent.Rax;window.React=parent.React;window.ReactDOM=parent.ReactDOM;window.VisualEngineUtils=parent.VisualEngineUtils;window.VisualEngine=parent.VisualEngine',\n  ),\n  assetItem(\n    AssetType.JSText,\n    'window.PropTypes=parent.PropTypes;React.PropTypes=parent.PropTypes; window.__REACT_DEVTOOLS_GLOBAL_HOOK__ = window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__;',\n  ),\n];\n\nexport class BuiltinSimulatorHost implements ISimulatorHost<BuiltinSimulatorProps> {\n  readonly isSimulator = true;\n\n  readonly project: Project;\n\n  readonly designer: Designer;\n\n  readonly viewport = new Viewport();\n\n  readonly scroller: Scroller;\n\n  readonly emitter: IEventBus = createModuleEventBus('BuiltinSimulatorHost');\n\n  readonly componentsConsumer: ResourceConsumer;\n\n  readonly injectionConsumer: ResourceConsumer;\n\n  readonly i18nConsumer: ResourceConsumer;\n\n  /**\n   * 是否为画布自动渲染\n   */\n  autoRender = true;\n\n  get currentDocument() {\n    return this.project.currentDocument;\n  }\n\n  @computed get renderEnv(): string {\n    return this.get('renderEnv') || 'default';\n  }\n\n  @computed get device(): string {\n    return this.get('device') || 'default';\n  }\n\n  @computed get locale(): string {\n    return this.get('locale');\n  }\n\n  @computed get deviceClassName(): string | undefined {\n    return this.get('deviceClassName');\n  }\n\n  @computed get designMode(): 'live' | 'design' | 'preview' {\n    // renderer 依赖\n    // TODO: 需要根据 design mode 不同切换鼠标响应情况\n    return this.get('designMode') || 'design';\n  }\n\n  @computed get requestHandlersMap(): any {\n    // renderer 依赖\n    // TODO: 需要根据 design mode 不同切换鼠标响应情况\n    return this.get('requestHandlersMap') || null;\n  }\n\n  get thisRequiredInJSE(): any {\n    return engineConfig.get('thisRequiredInJSE') ?? true;\n  }\n\n  get enableStrictNotFoundMode(): any {\n    return engineConfig.get('enableStrictNotFoundMode') ?? false;\n  }\n\n  get notFoundComponent(): any {\n    return engineConfig.get('notFoundComponent') ?? null;\n  }\n\n  get faultComponent(): any {\n    return engineConfig.get('faultComponent') ?? null;\n  }\n\n  @computed get componentsAsset(): Asset | undefined {\n    return this.get('componentsAsset');\n  }\n\n  @computed get theme(): Asset | undefined {\n    return this.get('theme');\n  }\n\n  @computed get componentsMap() {\n    // renderer 依赖\n    return this.designer.componentsMap;\n  }\n\n  @computed get deviceStyle(): DeviceStyleProps | undefined {\n    return this.get('deviceStyle');\n  }\n\n  @obx.ref _props: BuiltinSimulatorProps = {};\n\n  @obx.ref private _contentWindow?: Window;\n\n  get contentWindow() {\n    return this._contentWindow;\n  }\n\n  @obx.ref private _contentDocument?: Document;\n\n  get contentDocument() {\n    return this._contentDocument;\n  }\n\n  private _renderer?: BuiltinSimulatorRenderer;\n\n  get renderer() {\n    return this._renderer;\n  }\n\n  readonly asyncLibraryMap: { [key: string]: {} } = {};\n\n  readonly libraryMap: { [key: string]: string } = {};\n\n  private _iframe?: HTMLIFrameElement;\n\n  private disableHovering?: () => void;\n\n  private disableDetecting?: () => void;\n\n  readonly liveEditing = new LiveEditing();\n\n  @obx private instancesMap: {\n    [docId: string]: Map<string, IPublicTypeComponentInstance[]>;\n  } = {};\n\n  private tryScrollAgain: number | null = null;\n\n  private _sensorAvailable = true;\n\n  /**\n   * @see IPublicModelSensor\n   */\n  get sensorAvailable(): boolean {\n    return this._sensorAvailable;\n  }\n\n  private sensing = false;\n\n  constructor(project: Project, designer: Designer) {\n    makeObservable(this);\n    this.project = project;\n    this.designer = designer;\n    this.scroller = this.designer.createScroller(this.viewport);\n    this.autoRender = !engineConfig.get('disableAutoRender', false);\n    this.componentsConsumer = new ResourceConsumer<Asset | undefined>(() => this.componentsAsset);\n    this.injectionConsumer = new ResourceConsumer(() => {\n      return {\n        appHelper: engineConfig.get('appHelper'),\n      };\n    });\n\n    this.i18nConsumer = new ResourceConsumer(() => this.project.i18n);\n\n    transactionManager.onStartTransaction(() => {\n      this.stopAutoRepaintNode();\n    }, IPublicEnumTransitionType.REPAINT);\n    // 防止批量调用 transaction 时，执行多次 rerender\n    const rerender = debounce(this.rerender.bind(this), 28);\n    transactionManager.onEndTransaction(() => {\n      rerender();\n      this.enableAutoRepaintNode();\n    }, IPublicEnumTransitionType.REPAINT);\n  }\n\n  stopAutoRepaintNode() {\n    this.renderer?.stopAutoRepaintNode();\n  }\n\n  enableAutoRepaintNode() {\n    this.renderer?.enableAutoRepaintNode();\n  }\n\n  /**\n   * @see ISimulator\n   */\n  setProps(props: BuiltinSimulatorProps) {\n    this._props = props;\n  }\n\n  set(key: string, value: any) {\n    this._props = {\n      ...this._props,\n      [key]: value,\n    };\n  }\n\n  get(key: string): any {\n    if (key === 'device') {\n      return (\n        this.designer?.editor?.get('deviceMapper')?.transform?.(this._props.device) ||\n        this._props.device\n      );\n    }\n    return this._props[key];\n  }\n\n  /**\n   * 有 Renderer 进程连接进来，设置同步机制\n   */\n  connect(\n    renderer: BuiltinSimulatorRenderer,\n    effect: (reaction: IReactionPublic) => void,\n    options?: IReactionOptions,\n  ) {\n    this._renderer = renderer;\n    return autorun(effect, options);\n  }\n\n  reaction(\n    expression: (reaction: IReactionPublic) => unknown,\n    effect: (value: unknown, prev: unknown, reaction: IReactionPublic) => void,\n    opts?: IReactionOptions | undefined,\n  ): IReactionDisposer {\n    return reaction(expression, effect, opts);\n  }\n\n  autorun(\n    effect: (reaction: IReactionPublic) => void,\n    options?: IReactionOptions,\n  ): IReactionDisposer {\n    return autorun(effect, options);\n  }\n\n  purge(): void {\n    // todo\n  }\n\n  mountViewport(viewport: Element | null) {\n    this.viewport.mount(viewport);\n  }\n\n  /**\n   * {\n   *   \"title\":\"BizCharts\",\n   *   \"package\":\"bizcharts\",\n   *   \"exportName\":\"bizcharts\",\n   *   \"version\":\"4.0.14\",\n   *   \"urls\":[\n   *      \"https://g.alicdn.com/code/lib/bizcharts/4.0.14/BizCharts.js\"\n   *   ],\n   *   \"library\":\"BizCharts\"\n   * }\n   * package：String 资源 npm 包名\n   * exportName：String umd 包导出名字，用于适配部分物料包 define name 不一致的问题，例如把 BizCharts 改成 bizcharts，用来兼容物料用 define 声明的 bizcharts\n   * version：String 版本号\n   * urls：Array 资源 cdn 地址，必须是 umd 类型，可以是.js 或者.css\n   * library：String umd 包直接导出的 name\n   */\n  buildLibrary(library?: LibraryItem[]) {\n    const _library = library || (this.get('library') as LibraryItem[]);\n    const libraryAsset: AssetList = [];\n    const libraryExportList: string[] = [];\n    const functionCallLibraryExportList: string[] = [];\n\n    if (_library && _library.length) {\n      _library.forEach((item) => {\n        const { exportMode, exportSourceLibrary } = item;\n        this.libraryMap[item.package] = item.library;\n        if (item.async) {\n          this.asyncLibraryMap[item.package] = item;\n        }\n        if (item.exportName && item.library) {\n          libraryExportList.push(\n            `Object.defineProperty(window,'${item.exportName}',{get:()=>window.${item.library}});`,\n          );\n        }\n        if (exportMode === 'functionCall' && exportSourceLibrary) {\n          functionCallLibraryExportList.push(\n            `window[\"${item.library}\"] = window[\"${exportSourceLibrary}\"](\"${item.library}\", \"${item.package}\");`,\n          );\n        }\n        if (item.editUrls) {\n          libraryAsset.push(item.editUrls);\n        } else if (item.urls) {\n          libraryAsset.push(item.urls);\n        }\n      });\n    }\n    libraryAsset.unshift(assetItem(AssetType.JSText, libraryExportList.join('')));\n    libraryAsset.push(assetItem(AssetType.JSText, functionCallLibraryExportList.join('')));\n    return libraryAsset;\n  }\n\n  rerender() {\n    this.designer.refreshComponentMetasMap();\n    this.renderer?.rerender?.();\n  }\n\n  async mountContentFrame(iframe: HTMLIFrameElement | null): Promise<void> {\n    if (!iframe || this._iframe === iframe) {\n      return;\n    }\n    this._iframe = iframe;\n\n    this._contentWindow = iframe.contentWindow!;\n    this._contentDocument = this._contentWindow.document;\n\n    const libraryAsset: AssetList = this.buildLibrary();\n\n    const vendors = [\n      // required & use once\n      assetBundle(\n        this.get('environment') ||\n          (this.renderEnv === 'rax' ? defaultRaxEnvironment : defaultEnvironment),\n        AssetLevel.Environment,\n      ),\n      // required & use once\n      assetBundle(this.get('extraEnvironment'), AssetLevel.Environment),\n\n      // required & use once\n      assetBundle(libraryAsset, AssetLevel.Library),\n      // required & TODO: think of update\n      assetBundle(this.theme, AssetLevel.Theme),\n      // required & use once\n      assetBundle(\n        this.get('simulatorUrl') ||\n          (this.renderEnv === 'rax' ? defaultRaxSimulatorUrl : defaultSimulatorUrl),\n        AssetLevel.Runtime,\n      ),\n    ];\n\n    // wait 准备 iframe 内容、依赖库注入\n    const renderer = await createSimulator(this, iframe, vendors);\n\n    // TODO: !!! thinkof reload onloa\n\n    // wait 业务组件被第一次消费，否则会渲染出错\n    await this.componentsConsumer.waitFirstConsume();\n\n    // wait 运行时上下文\n    await this.injectionConsumer.waitFirstConsume();\n\n    if (Object.keys(this.asyncLibraryMap).length > 0) {\n      // 加载异步 Library\n      await renderer.loadAsyncLibrary(this.asyncLibraryMap);\n      Object.keys(this.asyncLibraryMap).forEach((key) => {\n        delete this.asyncLibraryMap[key];\n      });\n    }\n\n    // step 5 ready & render\n    renderer.run();\n\n    // init events, overlays\n    this.viewport.setScrollTarget(this._contentWindow);\n    this.setupEvents();\n\n    // bind hotkey & clipboard\n    const hotkey = this.designer.editor.get('innerHotkey');\n    hotkey.mount(this._contentWindow);\n    focusTracker.mount(this._contentWindow);\n    clipboard.injectCopyPaster(this._contentDocument);\n\n    // TODO: dispose the bindings\n  }\n\n  async setupComponents(library) {\n    const libraryAsset: AssetList = this.buildLibrary(library);\n    await this.renderer?.load(libraryAsset);\n    if (Object.keys(this.asyncLibraryMap).length > 0) {\n      // 加载异步 Library\n      await this.renderer?.loadAsyncLibrary(this.asyncLibraryMap);\n      Object.keys(this.asyncLibraryMap).forEach((key) => {\n        delete this.asyncLibraryMap[key];\n      });\n    }\n  }\n\n  setupEvents() {\n    // TODO: Thinkof move events control to simulator renderer\n    //       just listen special callback\n    // because iframe maybe reload\n    this.setupDragAndClick();\n    this.setupDetecting();\n    this.setupLiveEditing();\n    this.setupContextMenu();\n  }\n\n  postEvent(eventName: string, ...data: any[]) {\n    this.emitter.emit(eventName, ...data);\n  }\n\n  setupDragAndClick() {\n    const { designer } = this;\n    const doc = this.contentDocument!;\n\n    // TODO: think of lock when edit a node\n    // 事件路由\n    doc.addEventListener(\n      'mousedown',\n      (downEvent: MouseEvent) => {\n        // fix for popups close logic\n        document.dispatchEvent(new Event('mousedown'));\n        const documentModel = this.project.currentDocument;\n        if (this.liveEditing.editing || !documentModel) {\n          return;\n        }\n        const { selection } = documentModel;\n        let isMulti = false;\n        if (this.designMode === 'design') {\n          isMulti = downEvent.metaKey || downEvent.ctrlKey;\n        } else if (!downEvent.metaKey) {\n          return;\n        }\n        // FIXME: dirty fix remove label-for fro liveEditing\n        (downEvent.target as HTMLElement).removeAttribute('for');\n        const nodeInst = this.getNodeInstanceFromElement(downEvent.target as Element);\n        const { focusNode } = documentModel;\n        const node = getClosestClickableNode(nodeInst?.node || focusNode, downEvent);\n        // 如果找不到可点击的节点，直接返回\n        if (!node) {\n          return;\n        }\n        // 触发 onMouseDownHook 钩子\n        const onMouseDownHook = node.componentMeta.advanced.callbacks?.onMouseDownHook;\n        if (onMouseDownHook) {\n          onMouseDownHook(downEvent, node.internalToShellNode());\n        }\n        const rglNode = node?.getParent();\n        const isRGLNode = rglNode?.isRGLContainer;\n        if (isRGLNode) {\n          // 如果拖拽的是磁铁块的右下角 handle，则直接跳过\n          if (downEvent.target.classList.contains('react-resizable-handle')) return;\n          // 禁止多选\n          isMulti = false;\n          designer.dragon.emitter.emit('rgl.switch', {\n            action: 'start',\n            rglNode,\n          });\n        } else {\n          // stop response document focus event\n          // 禁止原生拖拽\n          downEvent.stopPropagation();\n          downEvent.preventDefault();\n        }\n        // if (!node?.isValidComponent()) {\n        //   // 对于未注册组件直接返回\n        //   return;\n        // }\n        const isLeftButton = downEvent.which === 1 || downEvent.button === 0;\n        const checkSelect = (e: MouseEvent) => {\n          doc.removeEventListener('mouseup', checkSelect, true);\n          // 取消移动;\n          designer.dragon.emitter.emit('rgl.switch', {\n            action: 'end',\n            rglNode,\n          });\n          // 鼠标是否移动 ? - 鼠标抖动应该也需要支持选中事件，偶尔点击不能选中，磁帖块移除 shaken 检测\n          if (!isShaken(downEvent, e) || isRGLNode) {\n            let { id } = node;\n            designer.activeTracker.track({ node, instance: nodeInst?.instance });\n            if (isMulti && !node.contains(focusNode) && selection.has(id)) {\n              selection.remove(id);\n            } else {\n              // TODO: 避免选中 Page 组件，默认选中第一个子节点；新增规则 或 判断 Live 模式\n              if (node.isPage() && node.getChildren()?.notEmpty() && this.designMode === 'live') {\n                const firstChildId = node.getChildren()?.get(0)?.getId();\n                if (firstChildId) id = firstChildId;\n              }\n              selection.select(node.contains(focusNode) ? focusNode.id : id);\n\n              // dirty code should refector\n              const editor = this.designer?.editor;\n              const npm = node?.componentMeta?.npm;\n              const selected =\n                [npm?.package, npm?.componentName].filter((item) => !!item).join('-') ||\n                node?.componentMeta?.componentName ||\n                '';\n              editor?.eventBus.emit('designer.builtinSimulator.select', {\n                selected,\n              });\n            }\n          }\n        };\n\n        if (isLeftButton && !node.contains(focusNode)) {\n          let nodes: Node[] = [node];\n          let ignoreUpSelected = false;\n          if (isMulti) {\n            // multi select mode, directily add\n            if (!selection.has(node.id)) {\n              designer.activeTracker.track({ node, instance: nodeInst?.instance });\n              selection.add(node.id);\n              ignoreUpSelected = true;\n            }\n            selection.remove(focusNode.id);\n            // 获得顶层 nodes\n            nodes = selection.getTopNodes();\n          } else if (selection.containsNode(node, true)) {\n            nodes = selection.getTopNodes();\n          } else {\n            // will clear current selection & select dragment in dragstart\n          }\n          designer.dragon.boost(\n            {\n              type: IPublicEnumDragObjectType.Node,\n              nodes,\n            },\n            downEvent,\n            isRGLNode ? rglNode : undefined,\n          );\n          if (ignoreUpSelected) {\n            // multi select mode has add selected, should return\n            return;\n          }\n        }\n\n        doc.addEventListener('mouseup', checkSelect, true);\n      },\n      true,\n    );\n\n    doc.addEventListener(\n      'click',\n      (e) => {\n        // fix for popups close logic\n        const x = new Event('click');\n        x.initEvent('click', true);\n        this._iframe?.dispatchEvent(x);\n        const target = e.target as HTMLElement;\n\n        const customizeIgnoreSelectors = engineConfig.get('customizeIgnoreSelectors');\n        // TODO: need more elegant solution to ignore click events of components in designer\n        const defaultIgnoreSelectors: any = [\n          '.next-input-group',\n          '.next-checkbox-group',\n          '.next-checkbox-wrapper',\n          '.next-date-picker',\n          '.next-input',\n          '.next-month-picker',\n          '.next-number-picker',\n          '.next-radio-group',\n          '.next-range',\n          '.next-range-picker',\n          '.next-rating',\n          '.next-select',\n          '.next-switch',\n          '.next-time-picker',\n          '.next-upload',\n          '.next-year-picker',\n          '.next-breadcrumb-item',\n          '.next-calendar-header',\n          '.next-calendar-table',\n          '.editor-container', // 富文本组件\n        ];\n        const ignoreSelectors =\n          customizeIgnoreSelectors?.(defaultIgnoreSelectors, e) || defaultIgnoreSelectors;\n        const ignoreSelectorsString = ignoreSelectors.join(',');\n        // 提供了 customizeIgnoreSelectors 的情况下，忽略 isFormEvent() 判断\n        if (\n          (!customizeIgnoreSelectors && isFormEvent(e)) ||\n          target?.closest(ignoreSelectorsString)\n        ) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        // stop response document click event\n        // todo: catch link redirect\n      },\n      true,\n    );\n  }\n\n  /**\n   * 设置悬停处理\n   */\n  setupDetecting() {\n    const doc = this.contentDocument!;\n    const { detecting, dragon } = this.designer;\n    const hover = (e: MouseEvent) => {\n      if (!detecting.enable || this.designMode !== 'design') {\n        return;\n      }\n      const nodeInst = this.getNodeInstanceFromElement(e.target as Element);\n      if (nodeInst?.node) {\n        let { node } = nodeInst;\n        const focusNode = node.document?.focusNode;\n        if (node.contains(focusNode)) {\n          node = focusNode;\n        }\n        detecting.capture(node);\n      } else {\n        detecting.capture(null);\n      }\n      if (!engineConfig.get('enableMouseEventPropagationInCanvas', false) || dragon.dragging) {\n        e.stopPropagation();\n      }\n    };\n    const leave = () => detecting.leave(this.project.currentDocument);\n\n    doc.addEventListener('mouseover', hover, true);\n    doc.addEventListener('mouseleave', leave, false);\n\n    // TODO: refactor this line, contains click, mousedown, mousemove\n    doc.addEventListener(\n      'mousemove',\n      (e: Event) => {\n        if (!engineConfig.get('enableMouseEventPropagationInCanvas', false) || dragon.dragging) {\n          e.stopPropagation();\n        }\n      },\n      true,\n    );\n\n    // this.disableDetecting = () => {\n    //   detecting.leave(this.project.currentDocument);\n    //   doc.removeEventListener('mouseover', hover, true);\n    //   doc.removeEventListener('mouseleave', leave, false);\n    //   this.disableDetecting = undefined;\n    // };\n  }\n\n  setupLiveEditing() {\n    const doc = this.contentDocument!;\n    // cause edit\n    doc.addEventListener(\n      'dblclick',\n      (e: MouseEvent) => {\n        // stop response document dblclick event\n        e.stopPropagation();\n        e.preventDefault();\n\n        const targetElement = e.target as HTMLElement;\n        const nodeInst = this.getNodeInstanceFromElement(targetElement);\n        if (!nodeInst) {\n          return;\n        }\n        const focusNode = this.project.currentDocument?.focusNode;\n        const node = nodeInst.node || focusNode;\n        if (!node || isLowCodeComponent(node)) {\n          return;\n        }\n\n        const rootElement = this.findDOMNodes(\n          nodeInst.instance,\n          node.componentMeta.rootSelector,\n        )?.find(\n          (item) =>\n            // 可能是 [null];\n            item && item.contains(targetElement),\n        ) as HTMLElement;\n        if (!rootElement) {\n          return;\n        }\n\n        this.liveEditing.apply({\n          node,\n          rootElement,\n          event: e,\n        });\n      },\n      true,\n    );\n  }\n\n  /**\n   * @see ISimulator\n   */\n  setSuspense(suspended: boolean) {\n    return false;\n    // if (suspended) {\n    //   /*\n    //   if (this.disableDetecting) {\n    //     this.disableDetecting();\n    //   }\n    //   */\n    //   // sleep some autorun reaction\n    // } else {\n    //   // weekup some autorun reaction\n    //   /*\n    //   if (!this.disableDetecting) {\n    //     this.setupDetecting();\n    //   }\n    //   */\n    // }\n  }\n\n  setupContextMenu() {\n    const doc = this.contentDocument!;\n    doc.addEventListener('contextmenu', (e: MouseEvent) => {\n      const targetElement = e.target as HTMLElement;\n      const nodeInst = this.getNodeInstanceFromElement(targetElement);\n      if (!nodeInst) {\n        return;\n      }\n      const node = nodeInst.node || this.project.currentDocument?.focusNode;\n      if (!node) {\n        return;\n      }\n\n      // dirty code should refector\n      const editor = this.designer?.editor;\n      const npm = node?.componentMeta?.npm;\n      const selected =\n        [npm?.package, npm?.componentName].filter((item) => !!item).join('-') ||\n        node?.componentMeta?.componentName ||\n        '';\n      editor?.eventBus.emit('designer.builtinSimulator.contextmenu', {\n        selected,\n        ...nodeInst,\n        instanceRect: this.computeComponentInstanceRect(nodeInst.instance),\n        originalEvent: e,\n      });\n    });\n  }\n\n  /**\n   * @see ISimulator\n   */\n  generateComponentMetadata(componentName: string): IPublicTypeComponentMetadata {\n    // if html tags\n    if (isHTMLTag(componentName)) {\n      return {\n        componentName,\n        // TODO: read builtins html metadata\n      };\n    }\n\n    const component = this.getComponent(componentName);\n\n    if (!component) {\n      return {\n        componentName,\n      };\n    }\n\n    // TODO:\n    // 1. generate builtin div/p/h1/h2\n    // 2. read propTypes\n\n    return {\n      componentName,\n      ...parseMetadata(component),\n    };\n  }\n\n  /**\n   * @see ISimulator\n   */\n  getComponent(componentName: string): Component | null {\n    return this.renderer?.getComponent(componentName) || null;\n  }\n\n  createComponent(schema: IPublicTypeComponentSchema): Component | null {\n    return null;\n    // return this.renderer?.createComponent(schema) || null;\n  }\n\n  setInstance(docId: string, id: string, instances: IPublicTypeComponentInstance[] | null) {\n    if (!hasOwnProperty(this.instancesMap, docId)) {\n      this.instancesMap[docId] = new Map();\n    }\n    if (instances == null) {\n      this.instancesMap[docId].delete(id);\n    } else {\n      this.instancesMap[docId].set(id, instances.slice());\n    }\n  }\n\n  /**\n   * @see ISimulator\n   */\n  getComponentInstances(\n    node: Node,\n    context?: IPublicTypeNodeInstance,\n  ): IPublicTypeComponentInstance[] | null {\n    const docId = node.document.id;\n\n    const instances = this.instancesMap[docId]?.get(node.id) || null;\n    if (!instances || !context) {\n      return instances;\n    }\n\n    // filter with context\n    return instances.filter((instance) => {\n      return this.getClosestNodeInstance(instance, context?.nodeId)?.instance === context.instance;\n    });\n  }\n\n  /**\n   * @see ISimulator\n   */\n  getComponentContext(/* node: Node */): any {\n    throw new Error('Method not implemented.');\n  }\n\n  /**\n   * @see ISimulator\n   */\n  getClosestNodeInstance(\n    from: IPublicTypeComponentInstance,\n    specId?: string,\n  ): IPublicTypeNodeInstance<IPublicTypeComponentInstance> | null {\n    return this.renderer?.getClosestNodeInstance(from, specId) || null;\n  }\n\n  /**\n   * @see ISimulator\n   */\n  computeRect(node: Node): IPublicTypeRect | null {\n    const instances = this.getComponentInstances(node);\n    if (!instances) {\n      return null;\n    }\n    return this.computeComponentInstanceRect(instances[0], node.componentMeta.rootSelector);\n  }\n\n  /**\n   * @see ISimulator\n   */\n  computeComponentInstanceRect(\n    instance: IPublicTypeComponentInstance,\n    selector?: string,\n  ): IPublicTypeRect | null {\n    const renderer = this.renderer!;\n    const elements = this.findDOMNodes(instance, selector);\n    if (!elements) {\n      return null;\n    }\n\n    const elems = elements.slice();\n    let rects: DOMRect[] | undefined;\n    let last: { x: number; y: number; r: number; b: number } | undefined;\n    let _computed = false;\n    while (true) {\n      if (!rects || rects.length < 1) {\n        const elem = elems.pop();\n        if (!elem) {\n          break;\n        }\n        rects = renderer.getClientRects(elem);\n      }\n      const rect = rects.pop();\n      if (!rect) {\n        break;\n      }\n      if (rect.width === 0 && rect.height === 0) {\n        continue;\n      }\n      if (!last) {\n        last = {\n          x: rect.left,\n          y: rect.top,\n          r: rect.right,\n          b: rect.bottom,\n        };\n        continue;\n      }\n      if (rect.left < last.x) {\n        last.x = rect.left;\n        _computed = true;\n      }\n      if (rect.top < last.y) {\n        last.y = rect.top;\n        _computed = true;\n      }\n      if (rect.right > last.r) {\n        last.r = rect.right;\n        _computed = true;\n      }\n      if (rect.bottom > last.b) {\n        last.b = rect.bottom;\n        _computed = true;\n      }\n    }\n\n    if (last) {\n      const r: any = new DOMRect(last.x, last.y, last.r - last.x, last.b - last.y);\n      r.elements = elements;\n      r.computed = _computed;\n      return r;\n    }\n\n    return null;\n  }\n\n  /**\n   * @see ISimulator\n   */\n  findDOMNodes(\n    instance: IPublicTypeComponentInstance,\n    selector?: string,\n  ): Array<Element | Text> | null {\n    const elements = this._renderer?.findDOMNodes(instance);\n    if (!elements) {\n      return null;\n    }\n\n    if (selector) {\n      const matched = getMatched(elements, selector);\n      if (!matched) {\n        return null;\n      }\n      return [matched];\n    }\n    return elements;\n  }\n\n  /**\n   * 通过 DOM 节点获取节点，依赖 simulator 的接口\n   */\n  getNodeInstanceFromElement(\n    target: Element | null,\n  ): IPublicTypeNodeInstance<IPublicTypeComponentInstance> | null {\n    if (!target) {\n      return null;\n    }\n\n    const nodeIntance = this.getClosestNodeInstance(target);\n    if (!nodeIntance) {\n      return null;\n    }\n    const { docId } = nodeIntance;\n    const doc = this.project.getDocument(docId)!;\n    const node = doc.getNode(nodeIntance.nodeId);\n    return {\n      ...nodeIntance,\n      node,\n    };\n  }\n\n  /**\n   * @see ISimulator\n   */\n  /* istanbul ignore next */\n  scrollToNode(node: Node, detail?: any /* , tryTimes = 0 */) {\n    this.tryScrollAgain = null;\n    if (this.sensing) {\n      // active sensor\n      return;\n    }\n\n    const opt: any = {};\n    let scroll = false;\n\n    const componentInstance = this.getComponentInstances(detail?.near?.node || node)?.[0];\n    if (!componentInstance) return;\n    const domNode = this.findDOMNodes(componentInstance)?.[0] as Element;\n    if (!domNode) return;\n    if (isElementNode(domNode) && !isDOMNodeVisible(domNode, this.viewport)) {\n      const { left, top } = domNode.getBoundingClientRect();\n      const { scrollTop = 0, scrollLeft = 0 } = this.contentDocument?.documentElement || {};\n      opt.left = left + scrollLeft;\n      opt.top = top + scrollTop;\n      scroll = true;\n    }\n\n    if (scroll && this.scroller) {\n      this.scroller.scrollTo(opt);\n    }\n  }\n\n  // #region ========= drag and drop helpers =============\n  /**\n   * @see ISimulator\n   */\n  setNativeSelection(enableFlag: boolean) {\n    this.renderer?.setNativeSelection(enableFlag);\n  }\n\n  /**\n   * @see ISimulator\n   */\n  setDraggingState(state: boolean) {\n    this.renderer?.setDraggingState(state);\n  }\n\n  /**\n   * @see ISimulator\n   */\n  setCopyState(state: boolean) {\n    this.renderer?.setCopyState(state);\n  }\n\n  /**\n   * @see ISimulator\n   */\n  clearState() {\n    this.renderer?.clearState();\n  }\n\n  /**\n   * @see IPublicModelSensor\n   */\n  fixEvent(e: ILocateEvent): ILocateEvent {\n    if (e.fixed) {\n      return e;\n    }\n\n    const notMyEvent = e.originalEvent.view?.document !== this.contentDocument;\n    // fix canvasX canvasY : 当前激活文档画布坐标系\n    if (notMyEvent || !('canvasX' in e) || !('canvasY' in e)) {\n      const l = this.viewport.toLocalPoint({\n        clientX: e.globalX,\n        clientY: e.globalY,\n      });\n      e.canvasX = l.clientX;\n      e.canvasY = l.clientY;\n    }\n\n    // fix target : 浏览器事件响应目标\n    if (!e.target || notMyEvent) {\n      if (!isNaN(e.canvasX!) && !isNaN(e.canvasY!)) {\n        e.target = this.contentDocument?.elementFromPoint(e.canvasX!, e.canvasY!);\n      }\n    }\n\n    // 事件已订正\n    e.fixed = true;\n    return e;\n  }\n\n  /**\n   * @see IPublicModelSensor\n   */\n  isEnter(e: ILocateEvent): boolean {\n    const rect = this.viewport.bounds;\n    return (\n      e.globalY >= rect.top &&\n      e.globalY <= rect.bottom &&\n      e.globalX >= rect.left &&\n      e.globalX <= rect.right\n    );\n  }\n\n  /**\n   * @see IPublicModelSensor\n   */\n  deactiveSensor() {\n    this.sensing = false;\n    this.scroller.cancel();\n  }\n\n  // ========= drag location logic: helper for locate ==========\n\n  /**\n   * @see IPublicModelSensor\n   */\n  locate(e: ILocateEvent): any {\n    const { dragObject } = e;\n    const { nodes } = dragObject as IPublicTypeDragNodeObject;\n\n    const operationalNodes = nodes?.filter((node) => {\n      const onMoveHook = node.componentMeta?.advanced.callbacks?.onMoveHook;\n      const canMove =\n        onMoveHook && typeof onMoveHook === 'function'\n          ? onMoveHook(e, node.internalToShellNode())\n          : true;\n\n      let parentContainerNode: Node | null = null;\n      let parentNode = node.parent;\n\n      while (parentNode) {\n        if (parentNode.isContainer()) {\n          parentContainerNode = parentNode;\n          break;\n        }\n\n        parentNode = parentNode.parent;\n      }\n\n      const onChildMoveHook =\n        parentContainerNode?.componentMeta?.advanced.callbacks?.onChildMoveHook;\n\n      const childrenCanMove =\n        onChildMoveHook && parentContainerNode && typeof onChildMoveHook === 'function'\n          ? onChildMoveHook(node.internalToShellNode(), parentContainerNode.internalToShellNode())\n          : true;\n\n      return canMove && childrenCanMove;\n    });\n\n    if (nodes && (!operationalNodes || operationalNodes.length === 0)) {\n      return;\n    }\n\n    this.sensing = true;\n    this.scroller.scrolling(e);\n    const document = this.project.currentDocument;\n    if (!document) {\n      return null;\n    }\n    const dropContainer = this.getDropContainer(e);\n    const lockedNode = getClosestNode(dropContainer?.container as Node, (node) => node.isLocked);\n    if (lockedNode) return null;\n    if (!dropContainer) {\n      return null;\n    }\n\n    if (isLocationData(dropContainer)) {\n      return this.designer.createLocation(dropContainer);\n    }\n\n    const { container, instance: containerInstance } = dropContainer;\n\n    const edge = this.computeComponentInstanceRect(\n      containerInstance,\n      container.componentMeta.rootSelector,\n    );\n\n    if (!edge) {\n      return null;\n    }\n\n    const { children } = container;\n\n    const detail: IPublicTypeLocationChildrenDetail = {\n      type: IPublicTypeLocationDetailType.Children,\n      index: 0,\n      edge,\n    };\n\n    const locationData = {\n      target: container as INode,\n      detail,\n      source: `simulator${document.id}`,\n      event: e,\n    };\n\n    if (\n      e.dragObject &&\n      e.dragObject.nodes &&\n      e.dragObject.nodes.length &&\n      e.dragObject.nodes[0].componentMeta.isModal\n    ) {\n      return this.designer.createLocation({\n        target: document.focusNode,\n        detail,\n        source: `simulator${document.id}`,\n        event: e,\n      });\n    }\n\n    if (!children || children.size < 1 || !edge) {\n      return this.designer.createLocation(locationData);\n    }\n\n    let nearRect = null;\n    let nearIndex = 0;\n    let nearNode = null;\n    let nearDistance = null;\n    let minTop = null;\n    let maxBottom = null;\n\n    for (let i = 0, l = children.size; i < l; i++) {\n      const node = children.get(i)!;\n      const index = i;\n      const instances = this.getComponentInstances(node);\n      const inst = instances\n        ? instances.length > 1\n          ? instances.find(\n              (_inst) =>\n                this.getClosestNodeInstance(_inst, container.id)?.instance === containerInstance,\n            )\n          : instances[0]\n        : null;\n      const rect = inst\n        ? this.computeComponentInstanceRect(inst, node.componentMeta.rootSelector)\n        : null;\n\n      if (!rect) {\n        continue;\n      }\n\n      const distance = isPointInRect(e as any, rect) ? 0 : distanceToRect(e as any, rect);\n\n      if (distance === 0) {\n        nearDistance = distance;\n        nearNode = node;\n        nearIndex = index;\n        nearRect = rect;\n        break;\n      }\n\n      // 标记子节点最顶\n      if (minTop === null || rect.top < minTop) {\n        minTop = rect.top;\n      }\n      // 标记子节点最底\n      if (maxBottom === null || rect.bottom > maxBottom) {\n        maxBottom = rect.bottom;\n      }\n\n      if (nearDistance === null || distance < nearDistance) {\n        nearDistance = distance;\n        nearNode = node;\n        nearIndex = index;\n        nearRect = rect;\n      }\n    }\n\n    detail.index = nearIndex;\n\n    if (nearNode && nearRect) {\n      const el = getRectTarget(nearRect);\n      const inline = el ? isChildInline(el) : false;\n      const row = el ? isRowContainer(el.parentElement!) : false;\n      const vertical = inline || row;\n\n      // TODO: fix type\n      const near: any = {\n        node: nearNode,\n        pos: 'before',\n        align: vertical ? 'V' : 'H',\n      };\n      detail.near = near;\n      if (isNearAfter(e as any, nearRect, vertical)) {\n        near.pos = 'after';\n        detail.index = nearIndex + 1;\n      }\n      if (!row && nearDistance !== 0) {\n        const edgeDistance = distanceToEdge(e as any, edge);\n        if (edgeDistance.distance < nearDistance!) {\n          const { nearAfter } = edgeDistance;\n          if (minTop == null) {\n            minTop = edge.top;\n          }\n          if (maxBottom == null) {\n            maxBottom = edge.bottom;\n          }\n          near.rect = new DOMRect(edge.left, minTop, edge.width, maxBottom - minTop);\n          near.align = 'H';\n          near.pos = nearAfter ? 'after' : 'before';\n          detail.index = nearAfter ? children.size : 0;\n        }\n      }\n    }\n\n    return this.designer.createLocation(locationData);\n  }\n\n  /**\n   * 查找合适的投放容器\n   */\n  getDropContainer(e: ILocateEvent): DropContainer | null {\n    const { target, dragObject } = e;\n    const isAny = isDragAnyObject(dragObject);\n    const document = this.project.currentDocument!;\n    const { currentRoot } = document;\n    let container: INode;\n    let nodeInstance: IPublicTypeNodeInstance<IPublicTypeComponentInstance> | undefined;\n\n    if (target) {\n      const ref = this.getNodeInstanceFromElement(target);\n      if (ref?.node) {\n        nodeInstance = ref;\n        container = ref.node;\n      } else if (isAny) {\n        return null;\n      } else {\n        container = currentRoot;\n      }\n    } else if (isAny) {\n      return null;\n    } else {\n      container = currentRoot;\n    }\n\n    if (!container.isParental()) {\n      container = container.parent || currentRoot;\n    }\n\n    // TODO: use spec container to accept specialData\n    if (isAny) {\n      // will return locationData\n      return null;\n    }\n\n    // get common parent, avoid drop container contains by dragObject\n    const drillDownExcludes = new Set<Node>();\n    if (isDragNodeObject(dragObject)) {\n      const { nodes } = dragObject;\n      let i = nodes.length;\n      let p: any = container;\n      while (i-- > 0) {\n        if (contains(nodes[i], p)) {\n          p = nodes[i].parent;\n        }\n      }\n      if (p !== container) {\n        container = p || document.focusNode;\n        drillDownExcludes.add(container);\n      }\n    }\n\n    let instance: any;\n    if (nodeInstance) {\n      if (nodeInstance.node === container) {\n        instance = nodeInstance.instance;\n      } else {\n        instance = this.getClosestNodeInstance(\n          nodeInstance.instance as any,\n          container.id,\n        )?.instance;\n      }\n    } else {\n      instance = this.getComponentInstances(container)?.[0];\n    }\n\n    let dropContainer: DropContainer = {\n      container: container as any,\n      instance,\n    };\n\n    let res: any;\n    let upward: DropContainer | null = null;\n    while (container) {\n      res = this.handleAccept(dropContainer, e);\n      // if (isLocationData(res)) {\n      //   return res;\n      // }\n      if (res === true) {\n        return dropContainer;\n      }\n      if (!res) {\n        drillDownExcludes.add(container);\n        if (upward) {\n          dropContainer = upward;\n          container = dropContainer.container;\n          upward = null;\n        } else if (container.parent) {\n          container = container.parent;\n          instance = this.getClosestNodeInstance(dropContainer.instance, container.id)?.instance;\n          dropContainer = {\n            container: container as INode,\n            instance,\n          };\n        } else {\n          return null;\n        }\n      }\n    }\n    return null;\n  }\n\n  isAcceptable(): boolean {\n    return false;\n  }\n\n  /**\n   * 控制接受\n   */\n  handleAccept({ container, instance }: DropContainer, e: ILocateEvent): boolean {\n    const { dragObject } = e;\n    const document = this.currentDocument!;\n    const focusNode = document.focusNode;\n    if (isRootNode(container) || container.contains(focusNode)) {\n      return document.checkNesting(focusNode, dragObject as any);\n    }\n\n    const meta = (container as Node).componentMeta;\n\n    // FIXME: get containerInstance for accept logic use\n    const acceptable: boolean = this.isAcceptable(container);\n    if (!meta.isContainer && !acceptable) {\n      return false;\n    }\n\n    // check nesting\n    return document.checkNesting(container, dragObject as any);\n  }\n\n  /**\n   * 查找邻近容器\n   */\n  getNearByContainer(\n    { container, instance }: DropContainer,\n    drillDownExcludes: Set<Node>,\n    e: ILocateEvent,\n  ) {\n    const { children } = container;\n    const document = this.project.currentDocument!;\n    if (!children || children.isEmpty()) {\n      return null;\n    }\n\n    const nearDistance: any = null;\n    const nearBy: any = null;\n    for (let i = 0, l = children.size; i < l; i++) {\n      let child = children.get(i);\n\n      if (!child) {\n        continue;\n      }\n      if (child.conditionGroup) {\n        const bn = child.conditionGroup;\n        i = bn.index + bn.length - 1;\n        child = bn.visibleNode;\n      }\n      if (!child.isParental() || drillDownExcludes.has(child)) {\n        continue;\n      }\n      // TODO:\n      this.findDOMNodes(instance);\n      this.getComponentInstances(child);\n      const rect = this.computeRect(child);\n      if (!rect) {\n        continue;\n      }\n    }\n\n    return nearBy;\n  }\n  // #endregion\n}\n\nfunction isHTMLTag(name: string) {\n  return /^[a-z]\\w*$/.test(name);\n}\n\nfunction isPointInRect(point: CanvasPoint, rect: IPublicTypeRect) {\n  return (\n    point.canvasY >= rect.top &&\n    point.canvasY <= rect.bottom &&\n    point.canvasX >= rect.left &&\n    point.canvasX <= rect.right\n  );\n}\n\nfunction distanceToRect(point: CanvasPoint, rect: IPublicTypeRect) {\n  let minX = Math.min(Math.abs(point.canvasX - rect.left), Math.abs(point.canvasX - rect.right));\n  let minY = Math.min(Math.abs(point.canvasY - rect.top), Math.abs(point.canvasY - rect.bottom));\n  if (point.canvasX >= rect.left && point.canvasX <= rect.right) {\n    minX = 0;\n  }\n  if (point.canvasY >= rect.top && point.canvasY <= rect.bottom) {\n    minY = 0;\n  }\n\n  return Math.sqrt(minX ** 2 + minY ** 2);\n}\n\nfunction distanceToEdge(point: CanvasPoint, rect: IPublicTypeRect) {\n  const distanceTop = Math.abs(point.canvasY - rect.top);\n  const distanceBottom = Math.abs(point.canvasY - rect.bottom);\n\n  return {\n    distance: Math.min(distanceTop, distanceBottom),\n    nearAfter: distanceBottom < distanceTop,\n  };\n}\n\nfunction isNearAfter(point: CanvasPoint, rect: IPublicTypeRect, inline: boolean) {\n  if (inline) {\n    return (\n      Math.abs(point.canvasX - rect.left) + Math.abs(point.canvasY - rect.top) >\n      Math.abs(point.canvasX - rect.right) + Math.abs(point.canvasY - rect.bottom)\n    );\n  }\n  return Math.abs(point.canvasY - rect.top) > Math.abs(point.canvasY - rect.bottom);\n}\n\nfunction getMatched(elements: Array<Element | Text>, selector: string): Element | null {\n  let firstQueried: Element | null = null;\n  for (const elem of elements) {\n    if (isElement(elem)) {\n      if (elem.matches(selector)) {\n        return elem;\n      }\n\n      if (!firstQueried) {\n        firstQueried = elem.querySelector(selector);\n      }\n    }\n  }\n  return firstQueried;\n}\n","import { Component, Fragment, PureComponent } from 'react';\nimport classNames from 'classnames';\nimport { computed, observer, Title } from '@alilc/lowcode-editor-core';\nimport { IPublicTypeTitleContent } from '@alilc/lowcode-types';\nimport { getClosestNode } from '@alilc/lowcode-utils';\nimport { intl } from '../../locale';\nimport { BuiltinSimulatorHost } from '../host';\n\nexport class BorderDetectingInstance extends PureComponent<{\n  title: IPublicTypeTitleContent;\n  rect: DOMRect | null;\n  scale: number;\n  scrollX: number;\n  scrollY: number;\n  isLocked?: boolean;\n}> {\n  render() {\n    const { title, rect, scale, scrollX, scrollY, isLocked } = this.props;\n    if (!rect) {\n      return null;\n    }\n\n    const style = {\n      width: rect.width * scale,\n      height: rect.height * scale,\n      transform: `translate(${(scrollX + rect.left) * scale}px, ${(scrollY + rect.top) * scale}px)`,\n    };\n\n    const className = classNames('lc-borders lc-borders-detecting');\n\n    // TODO:\n    // 1. thinkof icon\n    // 2. thinkof top|bottom|inner space\n\n    return (\n      <div className={className} style={style}>\n        <Title title={title} className=\"lc-borders-title\" />\n        {\n          isLocked ? (<Title title={intl('locked')} className=\"lc-borders-status\" />) : null\n        }\n      </div>\n    );\n  }\n}\n\n@observer\nexport class BorderDetecting extends Component<{ host: BuiltinSimulatorHost }> {\n  @computed get scale() {\n    return this.props.host.viewport.scale;\n  }\n\n  @computed get scrollX() {\n    return this.props.host.viewport.scrollX;\n  }\n\n  @computed get scrollY() {\n    return this.props.host.viewport.scrollY;\n  }\n\n  @computed get current() {\n    const { host } = this.props;\n    const doc = host.currentDocument;\n    if (!doc) {\n      return null;\n    }\n    const { selection } = doc;\n    const { current } = host.designer.detecting;\n\n    if (!current || current.document !== doc || selection.has(current.id)) {\n      return null;\n    }\n    return current;\n  }\n\n  render() {\n    const { host } = this.props;\n    const { current } = this;\n\n    const canHoverHook = current?.componentMeta.advanced.callbacks?.onHoverHook;\n    const canHover = (canHoverHook && typeof canHoverHook === 'function') ? canHoverHook(current.internalToShellNode()) : true;\n\n    if (!canHover || !current || host.viewport.scrolling || host.liveEditing.editing) {\n      return null;\n    }\n\n    // rootNode, hover whole viewport\n    const focusNode = current.document.focusNode!;\n\n    if (!focusNode.contains(current)) {\n      return null;\n    }\n\n    if (current.contains(focusNode)) {\n      const bounds = host.viewport.bounds;\n      return (\n        <BorderDetectingInstance\n          key=\"line-root\"\n          title={current.title}\n          scale={this.scale}\n          scrollX={host.viewport.scrollX}\n          scrollY={host.viewport.scrollY}\n          rect={new DOMRect(0, 0, bounds.width, bounds.height)}\n        />\n      );\n    }\n\n    const lockedNode = getClosestNode(current, (n) => {\n      // 假如当前节点就是 locked 状态，要从当前节点的父节点开始查找\n      return !!(current?.isLocked ? n.parent?.isLocked : n.isLocked);\n    });\n    if (lockedNode && lockedNode.getId() !== current.getId()) {\n      // 选中父节锁定的节点\n      return (\n        <BorderDetectingInstance\n          key=\"line-h\"\n          title={current.title}\n          scale={this.scale}\n          scrollX={this.scrollX}\n          scrollY={this.scrollY}\n          // @ts-ignore\n          rect={host.computeComponentInstanceRect(host.getComponentInstances(lockedNode)[0], lockedNode.componentMeta.rootSelector)}\n          isLocked={lockedNode?.getId() !== current.getId()}\n        />\n      );\n    }\n\n    const instances = host.getComponentInstances(current);\n    if (!instances || instances.length < 1) {\n      return null;\n    }\n\n    if (instances.length === 1) {\n      return (\n        <BorderDetectingInstance\n          key=\"line-h\"\n          title={current.title}\n          scale={this.scale}\n          scrollX={this.scrollX}\n          scrollY={this.scrollY}\n          rect={host.computeComponentInstanceRect(instances[0], current.componentMeta.rootSelector)}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {instances.map((inst, i) => (\n          <BorderDetectingInstance\n            key={`line-h-${i}`}\n            title={current.title}\n            scale={this.scale}\n            scrollX={this.scrollX}\n            scrollY={this.scrollY}\n            rect={host.computeComponentInstanceRect(inst, current.componentMeta.rootSelector)}\n          />\n        ))}\n      </Fragment>\n    );\n  }\n}\n","import * as React from 'react';\nimport { Component, Fragment, ReactElement, PureComponent } from 'react';\nimport classNames from 'classnames';\nimport { computed, observer, Title, globalLocale } from '@alilc/lowcode-editor-core';\nimport { IPublicTypeI18nData, IPublicTypeTitleContent } from '@alilc/lowcode-types';\nimport { isI18nData } from '@alilc/lowcode-utils';\nimport { DropLocation } from '../../designer';\nimport { BuiltinSimulatorHost } from '../../builtin-simulator/host';\nimport { INode } from '../../document/node';\n\nexport class BorderContainerInstance extends PureComponent<{\n  title: IPublicTypeTitleContent;\n  rect: DOMRect | null;\n  scale: number;\n  scrollX: number;\n  scrollY: number;\n}> {\n  render() {\n    const { title, rect, scale, scrollX, scrollY } = this.props;\n    if (!rect) {\n      return null;\n    }\n\n    const style = {\n      width: rect.width * scale,\n      height: rect.height * scale,\n      transform: `translate(${(scrollX + rect.left) * scale}px, ${(scrollY + rect.top) * scale}px)`,\n    };\n\n    const className = classNames('lc-borders lc-borders-detecting');\n\n    return (\n      <div className={className} style={style}>\n        <Title title={title} className=\"lc-borders-title\" />\n      </div>\n    );\n  }\n}\n\nfunction getTitle(title: string | IPublicTypeI18nData | ReactElement) {\n  if (typeof title === 'string') return title;\n  if (isI18nData(title)) {\n    const locale = globalLocale.getLocale() || 'zh-CN';\n    return `将放入到此${title[locale]}`;\n  }\n  return '';\n}\n\n@observer\nexport class BorderContainer extends Component<{\n  host: BuiltinSimulatorHost;\n}, {\n  target?: INode;\n}> {\n  state = {} as any;\n\n  @computed get scale() {\n    return this.props.host.viewport.scale;\n  }\n\n  @computed get scrollX() {\n    return this.props.host.viewport.scrollX;\n  }\n\n  @computed get scrollY() {\n    return this.props.host.viewport.scrollY;\n  }\n\n  componentDidMount() {\n    const { host } = this.props;\n\n    host.designer.editor.eventBus.on('designer.dropLocation.change', (loc: DropLocation) => {\n      let { target } = this.state;\n      if (target === loc?.target) return;\n      this.setState({\n        target: loc?.target,\n      });\n    });\n  }\n\n  render() {\n    const { host } = this.props;\n    const { target } = this.state;\n    if (target == undefined) {\n      return null;\n    }\n    const instances = host.getComponentInstances(target!);\n    if (!instances || instances.length < 1) {\n      return null;\n    }\n\n    if (instances.length === 1) {\n      return (\n        <BorderContainerInstance\n          key=\"line-h\"\n          title={getTitle(target.componentMeta.title)}\n          scale={this.scale}\n          scrollX={this.scrollX}\n          scrollY={this.scrollY}\n          rect={host.computeComponentInstanceRect(instances[0], target.componentMeta.rootSelector)}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {instances.map((inst, i) => (\n          <BorderContainerInstance\n            key={`line-h-${i}`}\n            title={getTitle(target.componentMeta.title)}\n            scale={this.scale}\n            scrollX={this.scrollX}\n            scrollY={this.scrollY}\n            rect={host.computeComponentInstanceRect(inst, target.componentMeta.rootSelector)}\n          />\n        ))}\n      </Fragment>\n    );\n  }\n}\n","import { Overlay } from '@alifd/next';\nimport React from 'react';\nimport { Title, globalContext } from '@alilc/lowcode-editor-core';\nimport { canClickNode } from '@alilc/lowcode-utils';\nimport './index.less';\n\nimport { Node, INode } from '@alilc/lowcode-designer';\n\nconst { Popup } = Overlay;\n\nexport interface IProps {\n  node: Node;\n}\n\nexport interface IState {\n  parentNodes: Node[];\n}\n\ntype UnionNode = INode | null;\n\nexport default class InstanceNodeSelector extends React.Component<IProps, IState> {\n  state: IState = {\n    parentNodes: [],\n  };\n\n  componentDidMount() {\n    const parentNodes = this.getParentNodes(this.props.node);\n    this.setState({\n      parentNodes,\n    });\n  }\n\n  // 获取节点的父级节点（最多获取 5 层）\n  getParentNodes = (node: Node) => {\n    const parentNodes: any[] = [];\n    const { focusNode } = node.document;\n\n    if (node.contains(focusNode) || !focusNode.contains(node)) {\n      return parentNodes;\n    }\n\n    let currentNode: UnionNode = node;\n\n    while (currentNode && parentNodes.length < 5) {\n      currentNode = currentNode.getParent();\n      if (currentNode) {\n        parentNodes.push(currentNode);\n      }\n      if (currentNode === focusNode) {\n        break;\n      }\n    }\n    return parentNodes;\n  };\n\n  onSelect = (node: Node) => (e: unknown) => {\n    if (!node) {\n      return;\n    }\n\n    const canClick = canClickNode(node, e as MouseEvent);\n\n    if (canClick && typeof node.select === 'function') {\n      node.select();\n      const workspace = globalContext.get('workspace');\n      const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n      const npm = node?.componentMeta?.npm;\n      const selected =\n        [npm?.package, npm?.componentName].filter((item) => !!item).join('-') ||\n        node?.componentMeta?.componentName ||\n        '';\n      editor?.eventBus.emit('designer.border.action', {\n        name: 'select',\n        selected,\n      });\n    }\n  };\n\n  onMouseOver = (node: Node) => (_: any, flag = true) => {\n    if (node && typeof node.hover === 'function') {\n      node.hover(flag);\n    }\n  };\n\n  onMouseOut = (node: Node) => (_: any, flag = false) => {\n    if (node && typeof node.hover === 'function') {\n      node.hover(flag);\n    }\n  };\n\n  renderNodes = (/* node: Node */) => {\n    const nodes = this.state.parentNodes;\n    if (!nodes || nodes.length < 1) {\n      return null;\n    }\n    const children = nodes.map((node, key) => {\n      return (\n        <div\n          key={key}\n          onClick={this.onSelect(node)}\n          onMouseEnter={this.onMouseOver(node)}\n          onMouseLeave={this.onMouseOut(node)}\n          className=\"instance-node-selector-node\"\n        >\n          <div className=\"instance-node-selector-node-content\">\n            <Title\n              className=\"instance-node-selector-node-title\"\n              title={{\n                label: node.title,\n                icon: node.icon,\n              }}\n            />\n          </div>\n        </div>\n      );\n    });\n    return children;\n  };\n\n  render() {\n    const { node } = this.props;\n    return (\n      <div className=\"instance-node-selector\">\n        <Popup\n          trigger={\n            <div className=\"instance-node-selector-current\">\n              <Title\n                className=\"instance-node-selector-node-title\"\n                title={{\n                  label: node.title,\n                  icon: node.icon,\n                }}\n              />\n            </div>\n          }\n          triggerType=\"hover\"\n          offset={[0, 0]}\n        >\n          <div className=\"instance-node-selector\">{this.renderNodes(node)}</div>\n        </Popup>\n      </div>\n    );\n  }\n}\n","import {\n  Component,\n  Fragment,\n  ReactNodeArray,\n  isValidElement,\n  cloneElement,\n  createElement,\n  ReactNode,\n  ComponentType,\n} from 'react';\nimport classNames from 'classnames';\nimport { observer, computed, Tip, globalContext } from '@alilc/lowcode-editor-core';\nimport { createIcon, isReactComponent, isActionContentObject } from '@alilc/lowcode-utils';\nimport { IPublicTypeActionContentObject } from '@alilc/lowcode-types';\nimport { BuiltinSimulatorHost } from '../host';\nimport { OffsetObserver } from '../../designer';\nimport { Node } from '../../document';\nimport NodeSelector from '../node-selector';\n\n@observer\nexport class BorderSelectingInstance extends Component<{\n  observed: OffsetObserver;\n  highlight?: boolean;\n  dragging?: boolean;\n}> {\n  componentWillUnmount() {\n    this.props.observed.purge();\n  }\n\n  render() {\n    const { observed, highlight, dragging } = this.props;\n    if (!observed.hasOffset) {\n      return null;\n    }\n\n    const { offsetWidth, offsetHeight, offsetTop, offsetLeft } = observed;\n\n    const style = {\n      width: offsetWidth,\n      height: offsetHeight,\n      transform: `translate3d(${offsetLeft}px, ${offsetTop}px, 0)`,\n    };\n\n    const className = classNames('lc-borders lc-borders-selecting', {\n      highlight,\n      dragging,\n    });\n\n    const { hideSelectTools } = observed.node.componentMeta.advanced;\n\n    if (hideSelectTools) {\n      return null;\n    }\n\n    return (\n      <div className={className} style={style}>\n        {!dragging && <Toolbar observed={observed} />}\n      </div>\n    );\n  }\n}\n\n@observer\nclass Toolbar extends Component<{ observed: OffsetObserver }> {\n  render() {\n    const { observed } = this.props;\n    const { height, width } = observed.viewport;\n    const BAR_HEIGHT = 20;\n    const MARGIN = 1;\n    const BORDER = 2;\n    const SPACE_HEIGHT = BAR_HEIGHT + MARGIN + BORDER;\n    const SPACE_MINIMUM_WIDTH = 160; // magic number，大致是 toolbar 的宽度\n    let style: any;\n    // 计算 toolbar 的上/下位置\n    if (observed.top > SPACE_HEIGHT) {\n      style = {\n        top: -SPACE_HEIGHT,\n        height: BAR_HEIGHT,\n      };\n    } else if (observed.bottom + SPACE_HEIGHT < height) {\n      style = {\n        bottom: -SPACE_HEIGHT,\n        height: BAR_HEIGHT,\n      };\n    } else {\n      style = {\n        height: BAR_HEIGHT,\n        top: Math.max(MARGIN, MARGIN - observed.top),\n      };\n    }\n    // 计算 toolbar 的左/右位置\n    if (SPACE_MINIMUM_WIDTH > observed.left + observed.width) {\n      style.left = Math.max(-BORDER, observed.left - width - BORDER);\n    } else {\n      style.right = Math.max(-BORDER, observed.right - width - BORDER);\n      style.justifyContent = 'flex-start';\n    }\n    const { node } = observed;\n    const actions: ReactNodeArray = [];\n    node.componentMeta.availableActions.forEach((action) => {\n      const { important = true, condition, content, name } = action;\n      if (node.isSlot() && (name === 'copy' || name === 'remove')) {\n        // FIXME: need this?\n        return;\n      }\n      if (important && (typeof condition === 'function' ? condition(node) !== false : condition !== false)) {\n        actions.push(createAction(content, name, node));\n      }\n    });\n    return (\n      <div className=\"lc-borders-actions\" style={style}>\n        {actions}\n        <NodeSelector node={node} />\n      </div>\n    );\n  }\n}\n\nfunction createAction(content: ReactNode | ComponentType<any> | IPublicTypeActionContentObject, key: string, node: Node) {\n  if (isValidElement(content)) {\n    return cloneElement(content, { key, node });\n  }\n  if (isReactComponent(content)) {\n    return createElement(content, { key, node });\n  }\n  if (isActionContentObject(content)) {\n    const { action, title, icon } = content;\n    return (\n      <div\n        key={key}\n        className=\"lc-borders-action\"\n        onClick={() => {\n          action && action(node);\n          const workspace = globalContext.get('workspace');\n          const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n          const npm = node?.componentMeta?.npm;\n          const selected =\n            [npm?.package, npm?.componentName].filter((item) => !!item).join('-') ||\n            node?.componentMeta?.componentName ||\n            '';\n          editor?.eventBus.emit('designer.border.action', {\n            name: key,\n            selected,\n          });\n        }}\n      >\n        {icon && createIcon(icon)}\n        <Tip>{title}</Tip>\n      </div>\n    );\n  }\n  return null;\n}\n\n@observer\nexport class BorderSelectingForNode extends Component<{ host: BuiltinSimulatorHost; node: Node }> {\n  get host(): BuiltinSimulatorHost {\n    return this.props.host;\n  }\n\n  get dragging(): boolean {\n    return this.host.designer.dragon.dragging;\n  }\n\n  @computed get instances() {\n    return this.host.getComponentInstances(this.props.node);\n  }\n\n  render() {\n    const { instances } = this;\n    const { node } = this.props;\n    const { designer } = this.host;\n\n    if (!instances || instances.length < 1) {\n      return null;\n    }\n    return (\n      <Fragment key={node.id}>\n        {instances.map((instance) => {\n          const observed = designer.createOffsetObserver({\n            node,\n            instance,\n          });\n          if (!observed) {\n            return null;\n          }\n          return <BorderSelectingInstance key={observed.id} dragging={this.dragging} observed={observed} />;\n        })}\n      </Fragment>\n    );\n  }\n}\n\n@observer\nexport class BorderSelecting extends Component<{ host: BuiltinSimulatorHost }> {\n  get host(): BuiltinSimulatorHost {\n    return this.props.host;\n  }\n\n  get dragging(): boolean {\n    return this.host.designer.dragon.dragging;\n  }\n\n  @computed get selecting() {\n    const doc = this.host.currentDocument;\n    if (!doc || doc.suspensed || this.host.liveEditing.editing) {\n      return null;\n    }\n    const { selection } = doc;\n    return this.dragging ? selection.getTopNodes() : selection.getNodes();\n  }\n\n  render() {\n    const { selecting } = this;\n    if (!selecting || selecting.length < 1) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        {selecting.map((node) => (\n          <BorderSelectingForNode key={node.id} host={this.props.host} node={node} />\n        ))}\n      </Fragment>\n    );\n  }\n}\n","import { ISimulatorHost } from '../../simulator';\nimport { Designer, Point } from '../../designer';\nimport { cursor } from '@alilc/lowcode-utils';\nimport { makeEventsHandler } from '../../utils/misc';\nimport { createModuleEventBus, IEventBus } from '@alilc/lowcode-editor-core';\n\n// 拖动缩放\nexport default class DragResizeEngine {\n  private emitter: IEventBus;\n\n  private dragResizing = false;\n\n  private designer: Designer;\n\n  constructor(designer: Designer) {\n    this.designer = designer;\n    this.emitter = createModuleEventBus('DragResizeEngine');\n  }\n\n  isDragResizing() {\n    return this.dragResizing;\n  }\n\n  /**\n   * drag reszie from\n   * @param shell\n   * @param direction n/s/e/w\n   * @param boost (e: MouseEvent) => VE.Node\n   */\n  from(shell: Element, direction: string, boost: (e: MouseEvent) => any) {\n    let node: any;\n    let startEvent: Point;\n\n    if (!shell) {\n      return () => {};\n    }\n\n    const move = (e: MouseEvent) => {\n      const x = createResizeEvent(e);\n      const moveX = x.clientX - startEvent.clientX;\n      const moveY = x.clientY - startEvent.clientY;\n\n      this.emitter.emit('resize', e, direction, node, moveX, moveY);\n    };\n\n    const masterSensors = this.getMasterSensors();\n\n    /* istanbul ignore next */\n    const createResizeEvent = (e: MouseEvent | DragEvent): Point => {\n      const sourceDocument = e.view?.document;\n\n      if (!sourceDocument || sourceDocument === document) {\n        return e;\n      }\n      const srcSim = masterSensors.find(sim => sim.contentDocument === sourceDocument);\n      if (srcSim) {\n        return srcSim.viewport.toGlobalPoint(e);\n      }\n      return e;\n    };\n\n    const over = (e: MouseEvent) => {\n      const handleEvents = makeEventsHandler(e, masterSensors);\n      handleEvents(doc => {\n        doc.removeEventListener('mousemove', move, true);\n        doc.removeEventListener('mouseup', over, true);\n      });\n\n      this.dragResizing = false;\n      this.designer.detecting.enable = true;\n      cursor.release();\n\n      this.emitter.emit('resizeEnd', e, direction, node);\n    };\n\n    const mousedown = (e: MouseEvent) => {\n      node = boost(e);\n      startEvent = createResizeEvent(e);\n      const handleEvents = makeEventsHandler(e, masterSensors);\n      handleEvents(doc => {\n        doc.addEventListener('mousemove', move, true);\n        doc.addEventListener('mouseup', over, true);\n      });\n\n      this.emitter.emit('resizeStart', e, direction, node);\n      this.dragResizing = true;\n      this.designer.detecting.enable = false;\n      cursor.addState('ew-resize');\n    };\n    shell.addEventListener('mousedown', mousedown);\n    return () => {\n      shell.removeEventListener('mousedown', mousedown);\n    };\n  }\n\n  onResizeStart(func: (e: MouseEvent, direction: string, node: any) => any) {\n    this.emitter.on('resizeStart', func);\n    return () => {\n      this.emitter.removeListener('resizeStart', func);\n    };\n  }\n\n  onResize(\n    func: (e: MouseEvent, direction: string, node: any, moveX: number, moveY: number) => any,\n  ) {\n    this.emitter.on('resize', func);\n    return () => {\n      this.emitter.removeListener('resize', func);\n    };\n  }\n\n  onResizeEnd(func: (e: MouseEvent, direction: string, node: any) => any) {\n    this.emitter.on('resizeEnd', func);\n    return () => {\n      this.emitter.removeListener('resizeEnd', func);\n    };\n  }\n\n  private getMasterSensors(): ISimulatorHost[] {\n    return this.designer.project.documents\n      .map(doc => {\n        if (doc.active && doc.simulator?.sensorAvailable) {\n          return doc.simulator;\n        }\n        return null;\n      })\n      .filter(Boolean) as any;\n  }\n}\n\n// new DragResizeEngine();\n","import { createContext } from 'react';\nimport { BuiltinSimulatorHost } from './host';\n\nexport const SimulatorContext = createContext<BuiltinSimulatorHost>({} as any);\n","import React, { Component, Fragment } from 'react';\nimport DragResizeEngine from './drag-resize-engine';\nimport { observer, computed, globalContext } from '@alilc/lowcode-editor-core';\nimport classNames from 'classnames';\nimport { SimulatorContext } from '../context';\nimport { BuiltinSimulatorHost } from '../host';\nimport { OffsetObserver, Designer } from '../../designer';\nimport { Node } from '../../document';\nimport { normalizeTriggers } from '../../utils/misc';\n\n@observer\nexport default class BoxResizing extends Component<{ host: BuiltinSimulatorHost }> {\n  static contextType = SimulatorContext;\n\n  get host(): BuiltinSimulatorHost {\n    return this.props.host;\n  }\n\n  get dragging(): boolean {\n    return this.host.designer.dragon.dragging;\n  }\n\n  @computed get selecting() {\n    const doc = this.host.currentDocument;\n    if (!doc || doc.suspensed) {\n      return null;\n    }\n    const { selection } = doc;\n    return this.dragging ? selection.getTopNodes() : selection.getNodes();\n  }\n\n  componentDidUpdate() {\n    // this.hoveringCapture.setBoundary(this.outline);\n    // this.willBind();\n  }\n\n  render() {\n    const { selecting } = this;\n    if (!selecting || selecting.length < 1) {\n      // DIRTY FIX, recore has a bug!\n      return <Fragment />;\n    }\n\n    // const componentMeta = selecting[0].componentMeta;\n    // const metadata = componentMeta.getMetadata();\n\n    return (\n      <Fragment>\n        {selecting.map((node) => (\n          <BoxResizingForNode key={node.id} node={node} host={this.props.host} />\n        ))}\n      </Fragment>\n    );\n  }\n}\n\n@observer\nexport class BoxResizingForNode extends Component<{ host: BuiltinSimulatorHost; node: Node }> {\n  static contextType = SimulatorContext;\n\n  get host(): BuiltinSimulatorHost {\n    return this.props.host;\n  }\n\n  get dragging(): boolean {\n    return this.host.designer.dragon.dragging;\n  }\n\n  @computed get instances() {\n    return this.host.getComponentInstances(this.props.node);\n  }\n\n  render() {\n    const { instances } = this;\n    const { node } = this.props;\n    const { designer } = this.host;\n\n    if (!instances || instances.length < 1 || this.dragging) {\n      return null;\n    }\n    return (\n      <Fragment key={node.id}>\n        {instances.map((instance: any) => {\n          const observed = designer.createOffsetObserver({\n            node,\n            instance,\n          });\n          if (!observed) {\n            return null;\n          }\n          return (\n            <BoxResizingInstance key={observed.id} dragging={this.dragging} designer={designer} observed={observed} />\n          );\n        })}\n      </Fragment>\n    );\n  }\n}\n\n@observer\nexport class BoxResizingInstance extends Component<{\n  observed: OffsetObserver;\n  highlight?: boolean;\n  dragging?: boolean;\n  designer?: Designer;\n}> {\n  // private outline: any;\n  private willUnbind: () => any;\n\n  // outline of eight direction\n  private outlineN: any;\n  private outlineE: any;\n  private outlineS: any;\n  private outlineW: any;\n  private outlineNE: any;\n  private outlineNW: any;\n  private outlineSE: any;\n  private outlineSW: any;\n\n  private dragEngine: DragResizeEngine;\n\n  constructor(props: any) {\n    super(props);\n    this.dragEngine = new DragResizeEngine(props.designer);\n  }\n\n  componentWillUnmount() {\n    if (this.willUnbind) {\n      this.willUnbind();\n    }\n    this.props.observed.purge();\n  }\n\n  componentDidMount() {\n    // this.hoveringCapture.setBoundary(this.outline);\n    this.willBind();\n\n    const resize = (e: MouseEvent, direction: string, node: any, moveX: number, moveY: number) => {\n      const { advanced } = node.componentMeta;\n      if (\n        advanced.callbacks &&\n        typeof advanced.callbacks.onResize === 'function'\n      ) {\n        (e as any).trigger = direction;\n        (e as any).deltaX = moveX;\n        (e as any).deltaY = moveY;\n        const cbNode = node?.isNode ? node.internalToShellNode() : node;\n        advanced.callbacks.onResize(e, cbNode);\n      }\n    };\n\n    const resizeStart = (e: MouseEvent, direction: string, node: any) => {\n      const { advanced } = node.componentMeta;\n      if (\n        advanced.callbacks &&\n        typeof advanced.callbacks.onResizeStart === 'function'\n      ) {\n        (e as any).trigger = direction;\n        const cbNode = node?.isNode ? node.internalToShellNode() : node;\n        advanced.callbacks.onResizeStart(e, cbNode);\n      }\n    };\n\n    const resizeEnd = (e: MouseEvent, direction: string, node: any) => {\n      const { advanced } = node.componentMeta;\n      if (\n        advanced.callbacks &&\n        typeof advanced.callbacks.onResizeEnd === 'function'\n      ) {\n        (e as any).trigger = direction;\n        const cbNode = node?.isNode ? node.internalToShellNode() : node;\n        advanced.callbacks.onResizeEnd(e, cbNode);\n      }\n\n      const workspace = globalContext.get('workspace');\n      const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n      const npm = node?.componentMeta?.npm;\n      const selected =\n        [npm?.package, npm?.componentName].filter((item) => !!item).join('-') ||\n        node?.componentMeta?.componentName ||\n        '';\n      editor?.eventBus.emit('designer.border.resize', {\n        selected,\n        layout: node?.parent?.getPropValue('layout') || '',\n      });\n    };\n\n    this.dragEngine.onResize(resize);\n    this.dragEngine.onResizeStart(resizeStart);\n    this.dragEngine.onResizeEnd(resizeEnd);\n  }\n\n  willBind() {\n    if (this.willUnbind) {\n      this.willUnbind();\n    }\n\n    if (\n      !this.outlineN &&\n      !this.outlineE &&\n      !this.outlineS &&\n      !this.outlineW &&\n      !this.outlineNE &&\n      !this.outlineNW &&\n      !this.outlineSE &&\n      !this.outlineSW\n    ) {\n      return;\n    }\n\n    const unBind: any[] = [];\n    const { node } = this.props.observed;\n\n    unBind.push(\n      ...[\n        this.dragEngine.from(this.outlineN, 'n', () => node),\n        this.dragEngine.from(this.outlineE, 'e', () => node),\n        this.dragEngine.from(this.outlineS, 's', () => node),\n        this.dragEngine.from(this.outlineW, 'w', () => node),\n        this.dragEngine.from(this.outlineNE, 'ne', () => node),\n        this.dragEngine.from(this.outlineNW, 'nw', () => node),\n        this.dragEngine.from(this.outlineSE, 'se', () => node),\n        this.dragEngine.from(this.outlineSW, 'sw', () => node),\n      ],\n    );\n\n    this.willUnbind = () => {\n      if (unBind && unBind.length > 0) {\n        unBind.forEach((item) => {\n          item();\n        });\n      }\n      this.willUnbind = () => {};\n    };\n  }\n\n  render() {\n    const { observed } = this.props;\n    if (!observed.hasOffset) {\n      return null;\n    }\n\n    const { node, offsetWidth, offsetHeight, offsetTop, offsetLeft } = observed;\n    let triggerVisible: any = [];\n    const { advanced } = node.componentMeta;\n    if (advanced.getResizingHandlers) {\n      triggerVisible = advanced.getResizingHandlers(node.internalToShellNode());\n    }\n\n    triggerVisible = normalizeTriggers(triggerVisible);\n\n    const baseSideClass = 'lc-borders lc-resize-side';\n    const baseCornerClass = 'lc-borders lc-resize-corner';\n\n    return (\n      <div>\n        {triggerVisible.includes('N') && (\n          <div\n            ref={(ref) => { this.outlineN = ref; }}\n            className={classNames(baseSideClass, 'n')}\n            style={{\n              height: 20,\n              transform: `translate(${offsetLeft}px, ${offsetTop - 10}px)`,\n              width: offsetWidth,\n            }}\n          />\n        )}\n        {triggerVisible.includes('NE') && (\n          <div\n            ref={(ref) => { this.outlineNE = ref; }}\n            className={classNames(baseCornerClass, 'ne')}\n            style={{\n              transform: `translate(${offsetLeft + offsetWidth - 5}px, ${offsetTop - 3}px)`,\n              cursor: 'nesw-resize',\n            }}\n          />\n        )}\n        {triggerVisible.includes('E') && (\n          <div\n            className={classNames(baseSideClass, 'e')}\n            ref={(ref) => { this.outlineE = ref; }}\n            style={{\n              height: offsetHeight,\n              transform: `translate(${offsetLeft + offsetWidth - 10}px, ${offsetTop}px)`,\n              width: 20,\n            }}\n          />\n        )}\n        {triggerVisible.includes('SE') && (\n          <div\n            ref={(ref) => { this.outlineSE = ref; }}\n            className={classNames(baseCornerClass, 'se')}\n            style={{\n              transform: `translate(${offsetLeft + offsetWidth - 5}px, ${offsetTop + offsetHeight - 5}px)`,\n              cursor: 'nwse-resize',\n            }}\n          />\n        )}\n        {triggerVisible.includes('S') && (\n          <div\n            ref={(ref) => { this.outlineS = ref; }}\n            className={classNames(baseSideClass, 's')}\n            style={{\n              height: 20,\n              transform: `translate(${offsetLeft}px, ${offsetTop + offsetHeight - 10}px)`,\n              width: offsetWidth,\n            }}\n          />\n        )}\n        {triggerVisible.includes('SW') && (\n          <div\n            ref={(ref) => { this.outlineSW = ref; }}\n            className={classNames(baseCornerClass, 'sw')}\n            style={{\n              transform: `translate(${offsetLeft - 3}px, ${offsetTop + offsetHeight - 5}px)`,\n              cursor: 'nesw-resize',\n            }}\n          />\n        )}\n        {triggerVisible.includes('W') && (\n          <div\n            ref={(ref) => { this.outlineW = ref; }}\n            className={classNames(baseSideClass, 'w')}\n            style={{\n              height: offsetHeight,\n              transform: `translate(${offsetLeft - 10}px, ${offsetTop}px)`,\n              width: 20,\n            }}\n          />\n        )}\n        {triggerVisible.includes('NW') && (\n          <div\n            ref={(ref) => { this.outlineNW = ref; }}\n            className={classNames(baseCornerClass, 'nw')}\n            style={{\n              transform: `translate(${offsetLeft - 3}px, ${offsetTop - 3}px)`,\n              cursor: 'nwse-resize',\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { BuiltinSimulatorHost } from '../host';\nimport {\n  DropLocation,\n  isVertical,\n} from '../../designer';\nimport { ISimulatorHost } from '../../simulator';\nimport { INode } from '../../document';\nimport './insertion.less';\nimport { IPublicTypeNodeData, IPublicTypeNodeSchema, IPublicTypeLocationChildrenDetail, IPublicTypeRect } from '@alilc/lowcode-types';\nimport { isLocationChildrenDetail } from '@alilc/lowcode-utils';\n\ninterface InsertionData {\n  edge?: DOMRect;\n  insertType?: string;\n  vertical?: boolean;\n  nearRect?: IPublicTypeRect;\n  coverRect?: DOMRect;\n  nearNode?: IPublicTypeNodeData;\n}\n\n/**\n * 处理拖拽子节点(INode)情况\n */\nfunction processChildrenDetail(sim: ISimulatorHost, container: INode, detail: IPublicTypeLocationChildrenDetail): InsertionData {\n  let edge = detail.edge || null;\n\n  if (!edge) {\n    edge = sim.computeRect(container);\n    if (!edge) {\n      return {};\n    }\n  }\n\n  const ret: any = {\n    edge,\n    insertType: 'before',\n  };\n\n  if (detail.near) {\n    const { node, pos, rect, align } = detail.near;\n    ret.nearRect = rect || sim.computeRect(node);\n    ret.nearNode = node;\n    if (pos === 'replace') {\n      // FIXME: ret.nearRect mybe null\n      ret.coverRect = ret.nearRect;\n      ret.insertType = 'cover';\n    } else if (!ret.nearRect || (ret.nearRect.width === 0 && ret.nearRect.height === 0)) {\n      ret.nearRect = ret.edge;\n      ret.insertType = 'after';\n      ret.vertical = isVertical(ret.nearRect);\n    } else {\n      ret.insertType = pos;\n      ret.vertical = align ? align === 'V' : isVertical(ret.nearRect);\n    }\n    return ret;\n  }\n\n  // from outline-tree: has index, but no near\n  // TODO: think of shadowNode & ConditionFlow\n  const { index } = detail;\n  if (index == null) {\n    ret.coverRect = ret.edge;\n    ret.insertType = 'cover';\n    return ret;\n  }\n  let nearNode = container.children.get(index);\n  if (!nearNode) {\n    // index = 0, eg. nochild,\n    nearNode = container.children.get(index > 0 ? index - 1 : 0);\n    if (!nearNode) {\n      ret.insertType = 'cover';\n      ret.coverRect = edge;\n      return ret;\n    }\n    ret.insertType = 'after';\n  }\n  if (nearNode) {\n    ret.nearRect = sim.computeRect(nearNode);\n    if (!ret.nearRect || (ret.nearRect.width === 0 && ret.nearRect.height === 0)) {\n      ret.nearRect = ret.edge;\n      ret.insertType = 'after';\n    }\n    ret.vertical = isVertical(ret.nearRect);\n    ret.nearNode = nearNode;\n  } else {\n    ret.insertType = 'cover';\n    ret.coverRect = edge;\n  }\n  return ret;\n}\n\n/**\n * 将 detail 信息转换为页面\"坐标\"信息\n */\nfunction processDetail({ target, detail, document }: DropLocation): InsertionData {\n  const sim = document.simulator;\n  if (!sim) {\n    return {};\n  }\n  if (isLocationChildrenDetail(detail)) {\n    return processChildrenDetail(sim, target, detail);\n  } else {\n    // TODO: others...\n    const instances = sim.getComponentInstances(target);\n    if (!instances) {\n      return {};\n    }\n    const edge = sim.computeComponentInstanceRect(instances[0], target.componentMeta.rootSelector);\n    return edge ? { edge, insertType: 'cover', coverRect: edge } : {};\n  }\n}\n\n@observer\nexport class InsertionView extends Component<{ host: BuiltinSimulatorHost }> {\n  render() {\n    const { host } = this.props;\n    const loc = host.currentDocument?.dropLocation;\n    if (!loc) {\n      return null;\n    }\n    // 如果是个绝对定位容器，不需要渲染插入标记\n    if (loc.target?.componentMeta?.advanced.isAbsoluteLayoutContainer) {\n      return null;\n    }\n\n    const { scale, scrollX, scrollY } = host.viewport;\n    const { edge, insertType, coverRect, nearRect, vertical, nearNode } = processDetail(loc);\n\n    if (!edge) {\n      return null;\n    }\n\n    let className = 'lc-insertion';\n    if ((loc.detail as any)?.valid === false) {\n      className += ' invalid';\n    }\n    const style: any = {};\n    let x: number;\n    let y: number;\n    if (insertType === 'cover') {\n      className += ' cover';\n      x = (coverRect!.left + scrollX) * scale;\n      y = (coverRect!.top + scrollY) * scale;\n      style.width = coverRect!.width * scale;\n      style.height = coverRect!.height * scale;\n    } else {\n      if (!nearRect) {\n        return null;\n      }\n      if (vertical) {\n        className += ' vertical';\n        x = ((insertType === 'before' ? nearRect.left : nearRect.right) + scrollX) * scale;\n        y = (nearRect.top + scrollY) * scale;\n        style.height = nearRect!.height * scale;\n      } else {\n        x = (nearRect.left + scrollX) * scale;\n        y = ((insertType === 'before' ? nearRect.top : nearRect.bottom) + scrollY) * scale;\n        style.width = nearRect.width * scale;\n      }\n      if (y === 0 && (nearNode as IPublicTypeNodeSchema)?.componentMeta?.isTopFixed) {\n        return null;\n      }\n    }\n    style.transform = `translate3d(${x}px, ${y}px, 0)`;\n    // style.transition = 'all 0.2s ease-in-out';\n\n    return <div className={className} style={style} />;\n  }\n}\n","import React, { Component } from 'react';\nimport { observer, engineConfig } from '@alilc/lowcode-editor-core';\nimport { BorderDetecting } from './border-detecting';\nimport { BorderContainer } from './border-container';\nimport { BuiltinSimulatorHost } from '../host';\nimport { BorderSelecting } from './border-selecting';\nimport BorderResizing from './border-resizing';\nimport { InsertionView } from './insertion';\nimport './bem-tools.less';\nimport './borders.less';\n\n@observer\nexport class BemTools extends Component<{ host: BuiltinSimulatorHost }> {\n  render() {\n    const { host } = this.props;\n    const { designMode } = host;\n    const { scrollX, scrollY, scale } = host.viewport;\n    if (designMode === 'live') {\n      return null;\n    }\n    return (\n      <div className=\"lc-bem-tools\" style={{ transform: `translate(${-scrollX * scale}px,${-scrollY * scale}px)` }}>\n        { !engineConfig.get('disableDetecting') && <BorderDetecting key=\"hovering\" host={host} /> }\n        <BorderSelecting key=\"selecting\" host={host} />\n        { engineConfig.get('enableReactiveContainer') && <BorderContainer key=\"reactive-container-border\" host={host} /> }\n        <InsertionView key=\"insertion\" host={host} />\n        <BorderResizing key=\"resizing\" host={host} />\n        {\n          host.designer.bemToolsManager.getAllBemTools().map(tools => {\n            const ToolsCls = tools.item;\n            return <ToolsCls key={tools.name} host={host} />;\n          })\n        }\n      </div>\n    );\n  }\n}","import React, { Component } from 'react';\nimport { observer, globalContext } from '@alilc/lowcode-editor-core';\nimport { BuiltinSimulatorHost, BuiltinSimulatorProps } from './host';\nimport { BemTools } from './bem-tools';\nimport { Project } from '../project';\nimport './host.less';\n\n/*\n  Simulator 模拟器，可替换部件，有协议约束，包含画布的容器，使用场景：当 Canvas 大小变化时，用来居中处理 或 定位 Canvas\n  Canvas(DeviceShell) 设备壳层，通过背景图片来模拟，通过设备预设样式改变宽度、高度及定位 CanvasViewport\n  CanvasViewport 页面编排场景中宽高不可溢出 Canvas 区\n  Content(Shell) 内容外层，宽高紧贴 CanvasViewport，禁用边框，禁用 margin\n  BemTools 辅助显示层，初始相对 Content 位置 0,0，紧贴 Canvas, 根据 Content 滚动位置，改变相对位置\n*/\n\ntype SimulatorHostProps = BuiltinSimulatorProps & {\n  project: Project;\n  onMount?: (host: BuiltinSimulatorHost) => void;\n};\n\nexport class BuiltinSimulatorHostView extends Component<SimulatorHostProps> {\n  readonly host: BuiltinSimulatorHost;\n\n  constructor(props: any) {\n    super(props);\n    const { project, onMount, designer } = this.props;\n    this.host = (project.simulator as BuiltinSimulatorHost) || new BuiltinSimulatorHost(project, designer);\n    this.host.setProps(this.props);\n    onMount?.(this.host);\n  }\n\n  shouldComponentUpdate(nextProps: BuiltinSimulatorProps) {\n    this.host.setProps(nextProps);\n    return false;\n  }\n\n  render() {\n    return (\n      <div className=\"lc-simulator\">\n        {/* progressing.visible ? <PreLoaderView /> : null */}\n        <Canvas host={this.host} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Canvas extends Component<{ host: BuiltinSimulatorHost }> {\n  render() {\n    const sim = this.props.host;\n    let className = 'lc-simulator-canvas';\n    const { canvas = {}, viewport = {} } = sim.deviceStyle || {};\n    if (sim.deviceClassName) {\n      className += ` ${sim.deviceClassName}`;\n    } else if (sim.device) {\n      className += ` lc-simulator-device-${sim.device}`;\n    }\n\n    return (\n      <div className={className} style={canvas}>\n        <div ref={(elmt) => sim.mountViewport(elmt)} className=\"lc-simulator-canvas-viewport\" style={viewport}>\n          <BemTools host={sim} />\n          <Content host={sim} />\n        </div>\n      </div>\n    );\n  }\n}\n\n@observer\nclass Content extends Component<{ host: BuiltinSimulatorHost }> {\n  state = {\n    disabledEvents: false,\n  };\n\n  private dispose?: () => void;\n\n  componentDidMount() {\n    const workspace = globalContext.get('workspace');\n    const editor = workspace.isActive ? workspace.window.editor : globalContext.get('editor');\n    const onEnableEvents = (type: boolean) => {\n      this.setState({\n        disabledEvents: type,\n      });\n    };\n\n    editor.eventBus.on('designer.builtinSimulator.disabledEvents', onEnableEvents);\n\n    this.dispose = () => {\n      editor.removeListener('designer.builtinSimulator.disabledEvents', onEnableEvents);\n    };\n  }\n\n  componentWillUnmount() {\n    this.dispose?.();\n  }\n\n  render() {\n    const sim = this.props.host;\n    const { disabledEvents } = this.state;\n    const { viewport, designer } = sim;\n    const frameStyle: any = {\n      transform: `scale(${viewport.scale})`,\n      height: viewport.contentHeight,\n      width: viewport.contentWidth,\n    };\n    if (disabledEvents) {\n      frameStyle.pointerEvents = 'none';\n    }\n\n    const { viewName } = designer;\n\n    return (\n      <div className=\"lc-simulator-content\">\n        <iframe\n          name={`${viewName}-SimulatorRenderer`}\n          className=\"lc-simulator-content-frame\"\n          style={frameStyle}\n          ref={(frame) => sim.mountContentFrame(frame)}\n        />\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { observer, engineConfig } from '@alilc/lowcode-editor-core';\nimport { Designer } from '../designer';\nimport { BuiltinSimulatorHostView } from '../builtin-simulator';\nimport './project.less';\n\nexport class BuiltinLoading extends Component {\n  render() {\n    return (\n      <div id=\"engine-loading-wrapper\">\n        <img width=\"154\" height=\"100\" src=\"https://img.alicdn.com/tfs/TB1CmVgayERMeJjy0FcXXc7opXa-308-200.gif\" />\n      </div>\n    );\n  }\n}\n\n@observer\nexport class ProjectView extends Component<{ designer: Designer }> {\n  componentDidMount() {\n    const { designer } = this.props;\n    const { project } = designer;\n\n    project.onRendererReady(() => {\n      this.forceUpdate();\n    });\n  }\n  render() {\n    const { designer } = this.props;\n    const { project, projectSimulatorProps: simulatorProps } = designer;\n    const Simulator = designer.simulatorComponent || BuiltinSimulatorHostView;\n    const Loading = engineConfig.get('loadingComponent', BuiltinLoading);\n\n    return (\n      <div className=\"lc-project\">\n        <div className=\"lc-simulator-shell\">\n          {!project?.simulator?.renderer && <Loading />}\n          <Simulator {...simulatorProps} />\n        </div>\n      </div>\n    );\n  }\n}\n","import { isElement } from '@alilc/lowcode-utils';\nimport { IPublicModelScrollTarget, IPublicTypeScrollable, IPublicModelScroller } from '@alilc/lowcode-types';\n\nexport interface IScrollTarget extends IPublicModelScrollTarget {\n}\n\nexport class ScrollTarget implements IScrollTarget {\n  get left() {\n    return 'scrollX' in this.target ? this.target.scrollX : this.target.scrollLeft;\n  }\n\n  get top() {\n    return 'scrollY' in this.target ? this.target.scrollY : this.target.scrollTop;\n  }\n\n  private doc?: HTMLElement;\n\n  constructor(private target: Window | Element) {\n    if (isWindow(target)) {\n      this.doc = target.document.documentElement;\n    }\n  }\n\n  scrollTo(options: { left?: number; top?: number }) {\n    this.target.scrollTo(options);\n  }\n\n  scrollToXY(x: number, y: number) {\n    this.target.scrollTo(x, y);\n  }\n\n  get scrollHeight(): number {\n    return ((this.doc || this.target) as any).scrollHeight;\n  }\n\n  get scrollWidth(): number {\n    return ((this.doc || this.target) as any).scrollWidth;\n  }\n}\n\nfunction isWindow(obj: any): obj is Window {\n  return obj && obj.document;\n}\n\nfunction easing(n: number) {\n  return Math.sin((n * Math.PI) / 2);\n}\n\nconst SCROLL_ACCURCY = 30;\n\nexport interface IScroller extends IPublicModelScroller {\n\n}\nexport class Scroller implements IScroller {\n  private pid: number | undefined;\n  scrollable: IPublicTypeScrollable;\n\n  constructor(scrollable: IPublicTypeScrollable) {\n    this.scrollable = scrollable;\n  }\n\n  get scrollTarget(): IScrollTarget | null {\n    let target = this.scrollable.scrollTarget;\n    if (!target) {\n      return null;\n    }\n    if (isElement(target)) {\n      target = new ScrollTarget(target);\n      this.scrollable.scrollTarget = target;\n    }\n    return target;\n  }\n\n  scrollTo(options: { left?: number; top?: number }) {\n    this.cancel();\n\n    const { scrollTarget } = this;\n    if (!scrollTarget) {\n      return;\n    }\n\n    let pid: number;\n    const { left } = scrollTarget;\n    const { top } = scrollTarget;\n    const end = () => {\n      this.cancel();\n    };\n\n    if ((left === options.left || options.left == null) && top === options.top) {\n      end();\n      return;\n    }\n\n    const duration = 200;\n    const start = +new Date();\n\n    const animate = () => {\n      if (pid !== this.pid) {\n        return;\n      }\n\n      const now = +new Date();\n      const time = Math.min(1, (now - start) / duration);\n      const eased = easing(time);\n      const opt: any = {};\n      if (options.left != null) {\n        opt.left = eased * (options.left - left) + left;\n      }\n      if (options.top != null) {\n        opt.top = eased * (options.top - top) + top;\n      }\n\n      scrollTarget.scrollTo(opt);\n\n      if (time < 1) {\n        this.pid = requestAnimationFrame(animate);\n        pid = this.pid;\n      } else {\n        end();\n      }\n    };\n\n    this.pid = requestAnimationFrame(animate);\n    pid = this.pid;\n  }\n\n  scrolling(point: { globalX: number; globalY: number }) {\n    this.cancel();\n\n    const { bounds, scale = 1 } = this.scrollable;\n    const { scrollTarget } = this;\n    if (!scrollTarget || !bounds) {\n      return;\n    }\n\n    const x = point.globalX;\n    const y = point.globalY;\n\n    const maxScrollHeight = scrollTarget.scrollHeight - bounds.height / scale;\n    const maxScrollWidth = scrollTarget.scrollWidth - bounds.width / scale;\n    let sx = scrollTarget.left;\n    let sy = scrollTarget.top;\n    let ax = 0;\n    let ay = 0;\n    if (y < bounds.top + SCROLL_ACCURCY) {\n      ay = -Math.min(Math.max(bounds.top + SCROLL_ACCURCY - y, 10), 50) / scale;\n    } else if (y > bounds.bottom - SCROLL_ACCURCY) {\n      ay = Math.min(Math.max(y + SCROLL_ACCURCY - bounds.bottom, 10), 50) / scale;\n    }\n    if (x < bounds.left + SCROLL_ACCURCY) {\n      ax = -Math.min(Math.max(bounds.top + SCROLL_ACCURCY - y, 10), 50) / scale;\n    } else if (x > bounds.right - SCROLL_ACCURCY) {\n      ax = Math.min(Math.max(x + SCROLL_ACCURCY - bounds.right, 10), 50) / scale;\n    }\n\n    if (!ax && !ay) {\n      return;\n    }\n\n    const animate = () => {\n      let scroll = false;\n      if ((ay > 0 && sy < maxScrollHeight) || (ay < 0 && sy > 0)) {\n        sy += ay;\n        sy = Math.min(Math.max(sy, 0), maxScrollHeight);\n        scroll = true;\n      }\n      if ((ax > 0 && sx < maxScrollWidth) || (ax < 0 && sx > 0)) {\n        sx += ax;\n        sx = Math.min(Math.max(sx, 0), maxScrollWidth);\n        scroll = true;\n      }\n      if (!scroll) {\n        return;\n      }\n\n      scrollTarget.scrollTo({ left: sx, top: sy });\n      this.pid = requestAnimationFrame(animate);\n    };\n\n    animate();\n  }\n\n  cancel() {\n    if (this.pid) {\n      cancelAnimationFrame(this.pid);\n    }\n    this.pid = undefined;\n  }\n}\n","import { obx, makeObservable, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicTypeDragNodeObject,\n  IPublicTypeDragAnyObject,\n  IPublicEnumDragObjectType,\n  IPublicTypeDragNodeDataObject,\n  IPublicModelDragObject,\n  IPublicModelNode,\n  IPublicModelDragon,\n  IPublicModelLocateEvent,\n  IPublicModelSensor,\n} from '@alilc/lowcode-types';\nimport { setNativeSelection, cursor } from '@alilc/lowcode-utils';\nimport { Node } from '../document';\nimport { ISimulatorHost, isSimulatorHost } from '../simulator';\nimport { Designer } from './designer';\nimport { makeEventsHandler } from '../utils/misc';\n\nexport interface ILocateEvent extends IPublicModelLocateEvent {\n  readonly type: 'LocateEvent';\n\n  /**\n   * 激活的感应器\n   */\n  sensor?: IPublicModelSensor;\n\n}\n\n/**\n * @deprecated use same function in @alilc/lowcode-utils\n */\nexport function isDragNodeObject(obj: any): obj is IPublicTypeDragNodeObject {\n  return obj && obj.type === IPublicEnumDragObjectType.Node;\n}\n\n/**\n * @deprecated use same function in @alilc/lowcode-utils\n */\nexport function isDragNodeDataObject(obj: any): obj is IPublicTypeDragNodeDataObject {\n  return obj && obj.type === IPublicEnumDragObjectType.NodeData;\n}\n\n/**\n * @deprecated use same function in @alilc/lowcode-utils\n */\nexport function isDragAnyObject(obj: any): obj is IPublicTypeDragAnyObject {\n  return obj && obj.type !== IPublicEnumDragObjectType.NodeData && obj.type !== IPublicEnumDragObjectType.Node;\n}\n\nexport function isLocateEvent(e: any): e is ILocateEvent {\n  return e && e.type === 'LocateEvent';\n}\n\nconst SHAKE_DISTANCE = 4;\n\n/**\n * mouse shake check\n */\nexport function isShaken(e1: MouseEvent | DragEvent, e2: MouseEvent | DragEvent): boolean {\n  if ((e1 as any).shaken) {\n    return true;\n  }\n  if (e1.target !== e2.target) {\n    return true;\n  }\n  return (\n    Math.pow(e1.clientY - e2.clientY, 2) + Math.pow(e1.clientX - e2.clientX, 2) > SHAKE_DISTANCE\n  );\n}\n\nexport function isInvalidPoint(e: any, last: any): boolean {\n  return (\n    e.clientX === 0 &&\n    e.clientY === 0 &&\n    last &&\n    (Math.abs(last.clientX - e.clientX) > 5 || Math.abs(last.clientY - e.clientY) > 5)\n  );\n}\n\nexport function isSameAs(e1: MouseEvent | DragEvent, e2: MouseEvent | DragEvent): boolean {\n  return e1.clientY === e2.clientY && e1.clientX === e2.clientX;\n}\n\nexport function setShaken(e: any) {\n  e.shaken = true;\n}\n\nfunction getSourceSensor(dragObject: IPublicModelDragObject): ISimulatorHost | null {\n  if (!isDragNodeObject(dragObject)) {\n    return null;\n  }\n  return dragObject.nodes[0]?.document.simulator || null;\n}\n\nfunction isDragEvent(e: any): e is DragEvent {\n  return e?.type?.startsWith('drag');\n}\n\nexport interface IDragon extends IPublicModelDragon {\n\n}\n\n/**\n * Drag-on 拖拽引擎\n */\nexport class Dragon implements IDragon {\n  private sensors: IPublicModelSensor[] = [];\n\n  key = Math.random();\n\n  /**\n   * current active sensor, 可用于感应区高亮\n   */\n  @obx.ref private _activeSensor: IPublicModelSensor | undefined;\n\n  get activeSensor(): IPublicModelSensor | undefined {\n    return this._activeSensor;\n  }\n\n  @obx.ref private _dragging = false;\n\n  @obx.ref private _canDrop = false;\n\n  get dragging(): boolean {\n    return this._dragging;\n  }\n\n  viewName: string | undefined;\n\n  private emitter: IEventBus = createModuleEventBus('Dragon');\n\n  constructor(readonly designer: Designer) {\n    makeObservable(this);\n    this.viewName = designer.viewName;\n  }\n\n  /**\n   * Quick listen a shell(container element) drag behavior\n   * @param shell container element\n   * @param boost boost got a drag object\n   */\n  from(shell: Element, boost: (e: MouseEvent) => IPublicModelDragObject | null) {\n    const mousedown = (e: MouseEvent) => {\n      // ESC or RightClick\n      if (e.which === 3 || e.button === 2) {\n        return;\n      }\n\n      // Get a new node to be dragged\n      const dragObject = boost(e);\n      if (!dragObject) {\n        return;\n      }\n\n      this.boost(dragObject, e);\n    };\n    shell.addEventListener('mousedown', mousedown as any);\n    return () => {\n      shell.removeEventListener('mousedown', mousedown as any);\n    };\n  }\n\n  /**\n   * boost your dragObject for dragging(flying) 发射拖拽对象\n   *\n   * @param dragObject 拖拽对象\n   * @param boostEvent 拖拽初始时事件\n   */\n  boost(dragObject: IPublicModelDragObject, boostEvent: MouseEvent | DragEvent, fromRglNode?: Node | IPublicModelNode) {\n    const { designer } = this;\n    const masterSensors = this.getMasterSensors();\n    const handleEvents = makeEventsHandler(boostEvent, masterSensors);\n    const newBie = !isDragNodeObject(dragObject);\n    const forceCopyState =\n      isDragNodeObject(dragObject) && dragObject.nodes.some((node: Node | IPublicModelNode) => (typeof node.isSlot === 'function' ? node.isSlot() : node.isSlot));\n    const isBoostFromDragAPI = isDragEvent(boostEvent);\n    let lastSensor: IPublicModelSensor | undefined;\n\n    this._dragging = false;\n\n    const getRGL = (e: MouseEvent | DragEvent) => {\n      const locateEvent = createLocateEvent(e);\n      const sensor = chooseSensor(locateEvent);\n      if (!sensor || !sensor.getNodeInstanceFromElement) return {};\n      const nodeInst = sensor.getNodeInstanceFromElement(e.target as Element);\n      return nodeInst?.node?.getRGL() || {};\n    };\n\n    const checkesc = (e: KeyboardEvent) => {\n      if (e.keyCode === 27) {\n        designer.clearLocation();\n        over();\n      }\n    };\n\n    let copy = false;\n    const checkcopy = (e: MouseEvent | DragEvent | KeyboardEvent) => {\n      /* istanbul ignore next */\n      if (isDragEvent(e) && e.dataTransfer) {\n        if (newBie || forceCopyState) {\n          e.dataTransfer.dropEffect = 'copy';\n        }\n        return;\n      }\n      if (newBie) {\n        return;\n      }\n\n      if (e.altKey || e.ctrlKey) {\n        copy = true;\n        this.setCopyState(true);\n        /* istanbul ignore next */\n        if (isDragEvent(e) && e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'copy';\n        }\n      } else {\n        copy = false;\n        if (!forceCopyState) {\n          this.setCopyState(false);\n          /* istanbul ignore next */\n          if (isDragEvent(e) && e.dataTransfer) {\n            e.dataTransfer.dropEffect = 'move';\n          }\n        }\n      }\n    };\n\n    let lastArrive: any;\n    const drag = (e: MouseEvent | DragEvent) => {\n      // FIXME: donot setcopy when: newbie & no location\n      checkcopy(e);\n\n      if (isInvalidPoint(e, lastArrive)) return;\n\n      if (lastArrive && isSameAs(e, lastArrive)) {\n        lastArrive = e;\n        return;\n      }\n      lastArrive = e;\n\n      const { isRGL, rglNode } = getRGL(e);\n      const locateEvent = createLocateEvent(e);\n      const sensor = chooseSensor(locateEvent);\n\n      /* istanbul ignore next */\n      if (isRGL) {\n        // 禁止被拖拽元素的阻断\n        const nodeInst = dragObject.nodes[0].getDOMNode();\n        if (nodeInst && nodeInst.style) {\n          this.nodeInstPointerEvents = true;\n          nodeInst.style.pointerEvents = 'none';\n        }\n        // 原生拖拽\n        this.emitter.emit('rgl.sleeping', false);\n        if (fromRglNode && fromRglNode.id === rglNode.id) {\n          designer.clearLocation();\n          this.clearState();\n          this.emitter.emit('drag', locateEvent);\n          return;\n        }\n        this._canDrop = !!sensor?.locate(locateEvent);\n        if (this._canDrop) {\n          this.emitter.emit('rgl.add.placeholder', {\n            rglNode,\n            fromRglNode,\n            node: locateEvent.dragObject.nodes[0],\n            event: e,\n          });\n          designer.clearLocation();\n          this.clearState();\n          this.emitter.emit('drag', locateEvent);\n          return;\n        }\n      } else {\n        this._canDrop = false;\n        this.emitter.emit('rgl.remove.placeholder');\n        this.emitter.emit('rgl.sleeping', true);\n      }\n      if (sensor) {\n        sensor.fixEvent(locateEvent);\n        sensor.locate(locateEvent);\n      } else {\n        designer.clearLocation();\n      }\n      this.emitter.emit('drag', locateEvent);\n    };\n\n    const dragstart = () => {\n      this._dragging = true;\n      setShaken(boostEvent);\n      const locateEvent = createLocateEvent(boostEvent);\n      if (newBie || forceCopyState) {\n        this.setCopyState(true);\n      } else {\n        chooseSensor(locateEvent);\n      }\n      this.setDraggingState(true);\n      // ESC cancel drag\n      if (!isBoostFromDragAPI) {\n        handleEvents((doc) => {\n          doc.addEventListener('keydown', checkesc, false);\n        });\n      }\n\n      this.emitter.emit('dragstart', locateEvent);\n    };\n\n    // route: drag-move\n    const move = (e: MouseEvent | DragEvent) => {\n      /* istanbul ignore next */\n      if (isBoostFromDragAPI) {\n        e.preventDefault();\n      }\n      if (this._dragging) {\n        // process dragging\n        drag(e);\n        return;\n      }\n\n      // first move check is shaken\n      if (isShaken(boostEvent, e)) {\n        // is shaken dragstart\n        dragstart();\n        drag(e);\n      }\n    };\n\n    let didDrop = true;\n    /* istanbul ignore next */\n    const drop = (e: DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      didDrop = true;\n    };\n\n    // end-tail drag process\n    const over = (e?: any) => {\n      // 禁止被拖拽元素的阻断\n      if (this.nodeInstPointerEvents) {\n        const nodeInst = dragObject.nodes[0].getDOMNode();\n        if (nodeInst && nodeInst.style) {\n          nodeInst.style.pointerEvents = '';\n        }\n        this.nodeInstPointerEvents = false;\n      }\n\n      // 发送drop事件\n      if (e) {\n        const { isRGL, rglNode } = getRGL(e);\n        /* istanbul ignore next */\n        if (isRGL && this._canDrop && this._dragging) {\n          const tarNode = dragObject.nodes[0];\n          if (rglNode.id !== tarNode.id) {\n            // 避免死循环\n            this.emitter.emit('rgl.drop', {\n              rglNode,\n              node: tarNode,\n            });\n            const { selection } = designer.project.currentDocument;\n            selection.select(tarNode.id);\n          }\n        }\n      }\n\n      // 移除磁帖占位消息\n      this.emitter.emit('rgl.remove.placeholder');\n\n      /* istanbul ignore next */\n      if (e && isDragEvent(e)) {\n        e.preventDefault();\n      }\n      if (lastSensor) {\n        lastSensor.deactiveSensor();\n      }\n      /* istanbul ignore next */\n      if (isBoostFromDragAPI) {\n        if (!didDrop) {\n          designer.clearLocation();\n        }\n      } else {\n        this.setNativeSelection(true);\n      }\n      this.clearState();\n\n      let exception;\n      if (this._dragging) {\n        this._dragging = false;\n        try {\n          this.emitter.emit('dragend', { dragObject, copy });\n        } catch (ex) /* istanbul ignore next */ {\n          exception = ex;\n        }\n      }\n      designer.clearLocation();\n\n      handleEvents((doc) => {\n        /* istanbul ignore next */\n        if (isBoostFromDragAPI) {\n          doc.removeEventListener('dragover', move, true);\n          doc.removeEventListener('dragend', over, true);\n          doc.removeEventListener('drop', drop, true);\n        } else {\n          doc.removeEventListener('mousemove', move, true);\n          doc.removeEventListener('mouseup', over, true);\n        }\n        doc.removeEventListener('mousedown', over, true);\n        doc.removeEventListener('keydown', checkesc, false);\n        doc.removeEventListener('keydown', checkcopy, false);\n        doc.removeEventListener('keyup', checkcopy, false);\n      });\n      /* istanbul ignore next */\n      if (exception) {\n        throw exception;\n      }\n    };\n\n    // create drag locate event\n    const createLocateEvent = (e: MouseEvent | DragEvent): ILocateEvent => {\n      const evt: any = {\n        type: 'LocateEvent',\n        dragObject,\n        target: e.target,\n        originalEvent: e,\n      };\n\n      const sourceDocument = e.view?.document;\n\n      // event from current document\n      if (!sourceDocument || sourceDocument === document) {\n        evt.globalX = e.clientX;\n        evt.globalY = e.clientY;\n      } else /* istanbul ignore next */ {\n        // event from simulator sandbox\n        let srcSim: ISimulatorHost | undefined;\n        const lastSim = lastSensor && isSimulatorHost(lastSensor) ? lastSensor : null;\n        // check source simulator\n        if (lastSim && lastSim.contentDocument === sourceDocument) {\n          srcSim = lastSim;\n        } else {\n          srcSim = masterSensors.find((sim) => sim.contentDocument === sourceDocument);\n          if (!srcSim && lastSim) {\n            srcSim = lastSim;\n          }\n        }\n        if (srcSim) {\n          // transform point by simulator\n          const g = srcSim.viewport.toGlobalPoint(e);\n          evt.globalX = g.clientX;\n          evt.globalY = g.clientY;\n          evt.canvasX = e.clientX;\n          evt.canvasY = e.clientY;\n          evt.sensor = srcSim;\n        } else {\n          // this condition will not happen, just make sure ts ok\n          evt.globalX = e.clientX;\n          evt.globalY = e.clientY;\n        }\n      }\n      return evt;\n    };\n\n    const sourceSensor = getSourceSensor(dragObject);\n    /* istanbul ignore next */\n    const chooseSensor = (e: ILocateEvent) => {\n      // this.sensors will change on dragstart\n      const sensors: IPublicModelSensor[] = this.sensors.concat(masterSensors as IPublicModelSensor[]);\n      let sensor =\n        e.sensor && e.sensor.isEnter(e)\n          ? e.sensor\n          : sensors.find((s) => s.sensorAvailable && s.isEnter(e));\n      if (!sensor) {\n        // TODO: enter some area like componentspanel cancel\n        if (lastSensor) {\n          sensor = lastSensor;\n        } else if (e.sensor) {\n          sensor = e.sensor;\n        } else if (sourceSensor) {\n          sensor = sourceSensor;\n        }\n      }\n      if (sensor !== lastSensor) {\n        if (lastSensor) {\n          lastSensor.deactiveSensor();\n        }\n        lastSensor = sensor;\n      }\n      if (sensor) {\n        e.sensor = sensor;\n        sensor.fixEvent(e);\n      }\n      this._activeSensor = sensor;\n      return sensor;\n    };\n\n    /* istanbul ignore next */\n    if (isDragEvent(boostEvent)) {\n      const { dataTransfer } = boostEvent;\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'all';\n\n        try {\n          dataTransfer.setData('application/json', '{}');\n        } catch (ex) {\n          // ignore\n        }\n      }\n\n      dragstart();\n    } else {\n      this.setNativeSelection(false);\n    }\n\n    handleEvents((doc) => {\n      /* istanbul ignore next */\n      if (isBoostFromDragAPI) {\n        doc.addEventListener('dragover', move, true);\n        // dragexit\n        didDrop = false;\n        doc.addEventListener('drop', drop, true);\n        doc.addEventListener('dragend', over, true);\n      } else {\n        doc.addEventListener('mousemove', move, true);\n        doc.addEventListener('mouseup', over, true);\n      }\n      doc.addEventListener('mousedown', over, true);\n    });\n\n    // future think: drag things from browser-out or a iframe-pane\n\n    if (!newBie && !isBoostFromDragAPI) {\n      handleEvents((doc) => {\n        doc.addEventListener('keydown', checkcopy, false);\n        doc.addEventListener('keyup', checkcopy, false);\n      });\n    }\n  }\n\n  /* istanbul ignore next */\n  private getMasterSensors(): ISimulatorHost[] {\n    return Array.from(\n      new Set(\n        this.designer.project.documents\n          .map((doc) => {\n            if (doc.active && doc.simulator?.sensorAvailable) {\n              return doc.simulator;\n            }\n            return null;\n          })\n          .filter(Boolean) as any,\n      ),\n    );\n  }\n\n  private getSimulators() {\n    return new Set(this.designer.project.documents.map((doc) => doc.simulator));\n  }\n\n  // #region ======== drag and drop helpers ============\n  private setNativeSelection(enableFlag: boolean) {\n    setNativeSelection(enableFlag);\n    this.getSimulators().forEach((sim) => {\n      sim?.setNativeSelection(enableFlag);\n    });\n  }\n\n  /**\n   * 设置拖拽态\n   */\n  private setDraggingState(state: boolean) {\n    cursor.setDragging(state);\n    this.getSimulators().forEach((sim) => {\n      sim?.setDraggingState(state);\n    });\n  }\n\n  /**\n   * 设置拷贝态\n   */\n  private setCopyState(state: boolean) {\n    cursor.setCopy(state);\n    this.getSimulators().forEach((sim) => {\n      sim?.setCopyState(state);\n    });\n  }\n\n  /**\n   * 清除所有态：拖拽态、拷贝态\n   */\n  private clearState() {\n    cursor.release();\n    this.getSimulators().forEach((sim) => {\n      sim?.clearState();\n    });\n  }\n  // #endregion\n\n  /**\n   * 添加投放感应区\n   */\n  addSensor(sensor: any) {\n    this.sensors.push(sensor);\n  }\n\n  /**\n   * 移除投放感应\n   */\n  removeSensor(sensor: any) {\n    const i = this.sensors.indexOf(sensor);\n    if (i > -1) {\n      this.sensors.splice(i, 1);\n    }\n  }\n\n  onDragstart(func: (e: ILocateEvent) => any) {\n    this.emitter.on('dragstart', func);\n    return () => {\n      this.emitter.removeListener('dragstart', func);\n    };\n  }\n\n  onDrag(func: (e: ILocateEvent) => any) {\n    this.emitter.on('drag', func);\n    return () => {\n      this.emitter.removeListener('drag', func);\n    };\n  }\n\n  onDragend(func: (x: { dragObject: IPublicModelDragObject; copy: boolean }) => any) {\n    this.emitter.on('dragend', func);\n    return () => {\n      this.emitter.removeListener('dragend', func);\n    };\n  }\n}\n","import { INode } from '../document/node/node';\nimport { obx, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicTypeActiveTarget,\n  IPublicModelActiveTracker,\n} from '@alilc/lowcode-types';\nimport { isNode } from '@alilc/lowcode-utils';\n\nexport interface IActiveTracker extends Omit< IPublicModelActiveTracker, 'track' | 'onChange' > {\n  track(originalTarget: ActiveTarget | INode): void;\n\n  onChange(fn: (target: ActiveTarget) => void): () => void;\n}\n\nexport interface ActiveTarget extends Omit< IPublicTypeActiveTarget, 'node' > {\n  node: INode;\n}\n\nexport class ActiveTracker implements IActiveTracker {\n  private emitter: IEventBus = createModuleEventBus('ActiveTracker');\n\n  @obx.ref private _target?: ActiveTarget | INode;\n\n  track(originalTarget: ActiveTarget | INode) {\n    let target = originalTarget;\n    if (isNode(originalTarget)) {\n      target = { node: originalTarget as INode };\n    }\n    this._target = target;\n    this.emitter.emit('change', target);\n  }\n\n  get currentNode() {\n    return (this._target as ActiveTarget)?.node;\n  }\n\n  get detail() {\n    return (this._target as ActiveTarget)?.detail;\n  }\n\n  /**\n   * @deprecated\n   */\n  /* istanbul ignore next */\n  get intance() {\n    return this.instance;\n  }\n\n  get instance() {\n    return (this._target as ActiveTarget)?.instance;\n  }\n\n  onChange(fn: (target: ActiveTarget) => void): () => void {\n    this.emitter.addListener('change', fn);\n    return () => {\n      this.emitter.removeListener('change', fn);\n    };\n  }\n}\n","import { makeObservable, obx, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport { IPublicModelDetecting } from '@alilc/lowcode-types';\nimport { IDocumentModel } from '../document/document-model';\nimport { INode } from '../document/node/node';\n\nconst DETECTING_CHANGE_EVENT = 'detectingChange';\nexport interface IDetecting extends Omit< IPublicModelDetecting, 'capture' | 'release' | 'leave' > {\n\n  capture(node: INode | null): void;\n\n  release(node: INode | null): void;\n\n  leave(document: IDocumentModel | undefined): void;\n\n  get current(): INode | null;\n}\n\nexport class Detecting implements IDetecting {\n  @obx.ref private _enable = true;\n\n  /**\n   * 控制大纲树 hover 时是否出现悬停效果\n   * TODO: 将该逻辑从设计器中抽离出来\n   */\n  get enable() {\n    return this._enable;\n  }\n\n  set enable(flag: boolean) {\n    this._enable = flag;\n    if (!flag) {\n      this._current = null;\n    }\n  }\n\n  @obx.ref xRayMode = false;\n\n  @obx.ref private _current: INode | null = null;\n\n  private emitter: IEventBus = createModuleEventBus('Detecting');\n\n  constructor() {\n    makeObservable(this);\n  }\n\n  get current() {\n    return this._current;\n  }\n\n  capture(node: INode | null) {\n    if (this._current !== node) {\n      this._current = node;\n      this.emitter.emit(DETECTING_CHANGE_EVENT, this.current);\n    }\n  }\n\n  release(node: INode | null) {\n    if (this._current === node) {\n      this._current = null;\n      this.emitter.emit(DETECTING_CHANGE_EVENT, this.current);\n    }\n  }\n\n  leave(document: IDocumentModel | undefined) {\n    if (this.current && this.current.document === document) {\n      this._current = null;\n    }\n  }\n\n  onDetectingChange(fn: (node: INode) => void) {\n    this.emitter.on(DETECTING_CHANGE_EVENT, fn);\n    return () => {\n      this.emitter.off(DETECTING_CHANGE_EVENT, fn);\n    };\n  }\n}\n","import { INode } from '../document';\nimport { ILocateEvent } from './dragon';\nimport {\n  IPublicModelDocumentModel,\n  IPublicModelDropLocation,\n  IPublicTypeLocationDetailType,\n  IPublicTypeRect,\n  IPublicTypeLocationDetail,\n  IPublicTypeLocationData,\n  IPublicModelLocateEvent,\n} from '@alilc/lowcode-types';\n\nexport interface Point {\n  clientX: number;\n  clientY: number;\n}\n\nexport interface CanvasPoint {\n  canvasX: number;\n  canvasY: number;\n}\n\nexport type Rects = DOMRect[] & {\n  elements: Array<Element | Text>;\n};\n\n/**\n * @deprecated use same function in @alilc/lowcode-utils\n */\nexport function isLocationData(obj: any): boolean {\n  return obj && obj.target && obj.detail;\n}\n\n/**\n * @deprecated use same function in @alilc/lowcode-utils\n */\nexport function isLocationChildrenDetail(obj: any): boolean {\n  return obj && obj.type === IPublicTypeLocationDetailType.Children;\n}\n\nexport function isRowContainer(container: Element | Text, win?: Window) {\n  if (isText(container)) {\n    return true;\n  }\n  const style = (win || getWindow(container)).getComputedStyle(container);\n  const display = style.getPropertyValue('display');\n  if (/flex$/.test(display)) {\n    const direction = style.getPropertyValue('flex-direction') || 'row';\n    if (direction === 'row' || direction === 'row-reverse') {\n      return true;\n    }\n  }\n  if (/grid$/.test(display)) {\n    return true;\n  }\n  return false;\n}\n\nexport function isChildInline(child: Element | Text, win?: Window) {\n  if (isText(child)) {\n    return true;\n  }\n  const style = (win || getWindow(child)).getComputedStyle(child);\n  return /^inline/.test(style.getPropertyValue('display')) || /^(left|right)$/.test(style.getPropertyValue('float'));\n}\n\nexport function getRectTarget(rect: IPublicTypeRect | null) {\n  if (!rect || rect.computed) {\n    return null;\n  }\n  const els = rect.elements;\n  return els && els.length > 0 ? els[0]! : null;\n}\n\nexport function isVerticalContainer(rect: IPublicTypeRect | null) {\n  const el = getRectTarget(rect);\n  if (!el) {\n    return false;\n  }\n  return isRowContainer(el);\n}\n\nexport function isVertical(rect: IPublicTypeRect | null) {\n  const el = getRectTarget(rect);\n  if (!el) {\n    return false;\n  }\n  return isChildInline(el) || (el.parentElement ? isRowContainer(el.parentElement) : false);\n}\n\nfunction isText(elem: any): elem is Text {\n  return elem.nodeType === Node.TEXT_NODE;\n}\n\nfunction isDocument(elem: any): elem is Document {\n  return elem.nodeType === Node.DOCUMENT_NODE;\n}\n\nexport function getWindow(elem: Element | Document): Window {\n  return (isDocument(elem) ? elem : elem.ownerDocument!).defaultView!;\n}\nexport interface IDropLocation extends Omit< IPublicModelDropLocation, 'target' | 'clone' > {\n\n  readonly source: string;\n\n  get target(): INode;\n\n  get document(): IPublicModelDocumentModel;\n\n  clone(event: IPublicModelLocateEvent): IDropLocation;\n}\n\nexport class DropLocation implements IDropLocation {\n  readonly target: INode;\n\n  readonly detail: IPublicTypeLocationDetail;\n\n  readonly event: ILocateEvent;\n\n  readonly source: string;\n\n  get document(): IPublicModelDocumentModel {\n    return this.target.document;\n  }\n\n  constructor({ target, detail, source, event }: IPublicTypeLocationData) {\n    this.target = target;\n    this.detail = detail;\n    this.source = source;\n    this.event = event;\n  }\n\n  clone(event: ILocateEvent): IDropLocation {\n    return new DropLocation({\n      target: this.target,\n      detail: this.detail,\n      source: this.source,\n      event,\n    });\n  }\n\n  /**\n   * @deprecated\n   * 兼容 vision\n   */\n  getContainer() {\n    return this.target;\n  }\n\n  /**\n   * @deprecated\n   * 兼容 vision\n   */\n  getInsertion() {\n    if (!this.detail) {\n      return null;\n    }\n    if (this.detail.type === 'Children') {\n      if (this.detail.index <= 0) {\n        return null;\n      }\n      return this.target.children.get(this.detail.index - 1);\n    }\n    return (this.detail as any)?.near?.node;\n  }\n}\n","import requestIdleCallback, { cancelIdleCallback } from 'ric-shim';\nimport { obx, computed, makeObservable } from '@alilc/lowcode-editor-core';\nimport { uniqueId } from '@alilc/lowcode-utils';\nimport { INodeSelector, IViewport } from '../simulator';\nimport { Node } from '../document';\n\nexport class OffsetObserver {\n  readonly id = uniqueId('oobx');\n\n  private lastOffsetLeft?: number;\n\n  private lastOffsetTop?: number;\n\n  private lastOffsetHeight?: number;\n\n  private lastOffsetWidth?: number;\n\n  @obx private _height = 0;\n\n  @obx private _width = 0;\n\n  @obx private _left = 0;\n\n  @obx private _top = 0;\n\n  @obx private _right = 0;\n\n  @obx private _bottom = 0;\n\n  @computed get height() {\n    return this.isRoot ? this.viewport.height : this._height * this.scale;\n  }\n\n  @computed get width() {\n    return this.isRoot ? this.viewport.width : this._width * this.scale;\n  }\n\n  @computed get top() {\n    return this.isRoot ? 0 : this._top * this.scale;\n  }\n\n  @computed get left() {\n    return this.isRoot ? 0 : this._left * this.scale;\n  }\n\n  @computed get bottom() {\n    return this.isRoot ? this.viewport.height : this._bottom * this.scale;\n  }\n\n  @computed get right() {\n    return this.isRoot ? this.viewport.width : this._right * this.scale;\n  }\n\n  @obx hasOffset = false;\n\n  @computed get offsetLeft() {\n    if (this.isRoot) {\n      return this.viewport.scrollX * this.scale;\n    }\n    if (!this.viewport.scrolling || this.lastOffsetLeft == null) {\n      this.lastOffsetLeft = this.left + this.viewport.scrollX * this.scale;\n    }\n    return this.lastOffsetLeft;\n  }\n\n  @computed get offsetTop() {\n    if (this.isRoot) {\n      return this.viewport.scrollY * this.scale;\n    }\n    if (!this.viewport.scrolling || this.lastOffsetTop == null) {\n      this.lastOffsetTop = this.top + this.viewport.scrollY * this.scale;\n    }\n    return this.lastOffsetTop;\n  }\n\n  @computed get offsetHeight() {\n    if (!this.viewport.scrolling || this.lastOffsetHeight == null) {\n      this.lastOffsetHeight = this.isRoot ? this.viewport.height : this.height;\n    }\n    return this.lastOffsetHeight;\n  }\n\n  @computed get offsetWidth() {\n    if (!this.viewport.scrolling || this.lastOffsetWidth == null) {\n      this.lastOffsetWidth = this.isRoot ? this.viewport.width : this.width;\n    }\n    return this.lastOffsetWidth;\n  }\n\n  @computed get scale() {\n    return this.viewport.scale;\n  }\n\n  private pid: number | undefined;\n\n  readonly viewport: IViewport;\n\n  private isRoot: boolean;\n\n  readonly node: Node;\n\n  readonly compute: () => void;\n\n  constructor(readonly nodeInstance: INodeSelector) {\n    const { node, instance } = nodeInstance;\n    this.node = node;\n    const doc = node.document;\n    const host = doc.simulator!;\n    const focusNode = doc.focusNode;\n    this.isRoot = node.contains(focusNode!);\n    this.viewport = host.viewport;\n    makeObservable(this);\n    if (this.isRoot) {\n      this.hasOffset = true;\n      return;\n    }\n    if (!instance) {\n      return;\n    }\n\n    let pid: number;\n    const compute = () => {\n      if (pid !== this.pid) {\n        return;\n      }\n\n      const rect = host.computeComponentInstanceRect(instance!, node.componentMeta.rootSelector);\n\n      if (!rect) {\n        this.hasOffset = false;\n      } else if (!this.viewport.scrolling || !this.hasOffset) {\n        this._height = rect.height;\n        this._width = rect.width;\n        this._left = rect.left;\n        this._top = rect.top;\n        this._right = rect.right;\n        this._bottom = rect.bottom;\n        this.hasOffset = true;\n      }\n      this.pid = requestIdleCallback(compute);\n      pid = this.pid;\n    };\n\n    this.compute = compute;\n\n    // try first\n    compute();\n    // try second, ensure the dom mounted\n    this.pid = requestIdleCallback(compute);\n    pid = this.pid;\n  }\n\n  purge() {\n    if (this.pid) {\n      cancelIdleCallback(this.pid);\n    }\n    this.pid = undefined;\n  }\n\n  isPurged() {\n    return this.pid == null;\n  }\n}\n\nexport function createOffsetObserver(nodeInstance: INodeSelector): OffsetObserver | null {\n  if (!nodeInstance.instance) {\n    return null;\n  }\n  return new OffsetObserver(nodeInstance);\n}\n","// all this file for polyfill vision logic\nimport { isValidElement } from 'react';\nimport { IPublicTypeFieldConfig, IPublicTypeSetterConfig } from '@alilc/lowcode-types';\nimport { isSetterConfig, isDynamicSetter } from '@alilc/lowcode-utils';\nimport { SettingField } from './setting-field';\n\nfunction getHotterFromSetter(setter) {\n  return setter && (setter.Hotter || (setter.type && setter.type.Hotter)) || []; // eslint-disable-line\n}\n\nfunction getTransducerFromSetter(setter) {\n  return (\n    (setter &&\n      (setter.transducer ||\n        setter.Transducer ||\n        (setter.type && (setter.type.transducer || setter.type.Transducer)))) ||\n    null\n  ); // eslint-disable-line\n}\n\nfunction combineTransducer(transducer, arr, context) {\n  if (!transducer && Array.isArray(arr)) {\n    const [toHot, toNative] = arr;\n    transducer = { toHot, toNative };\n  }\n\n  return {\n    toHot: (transducer && transducer.toHot || (x => x)).bind(context), // eslint-disable-line\n    toNative: (transducer && transducer.toNative || (x => x)).bind(context), // eslint-disable-line\n  };\n}\n\nexport class Transducer {\n  setterTransducer: any;\n\n  context: any;\n\n  constructor(context: SettingField, config: { setter: IPublicTypeFieldConfig['setter'] }) {\n    let { setter } = config;\n\n    // 1. validElement\n    // 2. IPublicTypeSetterConfig\n    // 3. IPublicTypeSetterConfig[]\n    if (Array.isArray(setter)) {\n      setter = setter[0];\n    } else if (isValidElement(setter) && setter.type.displayName === 'MixedSetter') {\n      setter = setter.props?.setters?.[0];\n    } else if (typeof setter === 'object' && setter.componentName === 'MixedSetter') {\n      setter = Array.isArray(setter?.props?.setters) && setter.props.setters[0];\n    }\n\n    /**\n     * 两种方式标识是 FC 而不是动态 setter\n     * 1. 物料描述里面 setter 的配置，显式设置为 false\n     * 2. registerSetter 注册 setter 时显式设置为 false\n     */\n\n    let isDynamic = true;\n\n    if (isSetterConfig(setter)) {\n      const { componentName, isDynamic: dynamicFlag } = setter as IPublicTypeSetterConfig;\n      setter = componentName;\n      isDynamic = dynamicFlag !== false;\n    }\n    if (typeof setter === 'string') {\n      const { component, isDynamic: dynamicFlag } = context.setters.getSetter(setter) || {};\n      setter = component;\n      // 如果在物料配置中声明了，在 registerSetter 没有声明，取物料配置中的声明\n      isDynamic = dynamicFlag === undefined ? isDynamic : dynamicFlag !== false;\n    }\n    if (isDynamicSetter(setter) && isDynamic) {\n      try {\n        setter = setter.call(context, context);\n      } catch (e) { console.error(e); }\n    }\n\n    this.setterTransducer = combineTransducer(getTransducerFromSetter(setter), getHotterFromSetter(setter), context);\n    this.context = context;\n  }\n\n  toHot(data) {\n    return this.setterTransducer.toHot(data);\n  }\n\n  toNative(data) {\n    return this.setterTransducer.toNative(data);\n  }\n}\n","import { obx, computed, makeObservable, runInAction, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport { GlobalEvent, IPublicModelEditor, IPublicTypeSetValueOptions } from '@alilc/lowcode-types';\nimport { uniqueId, isJSExpression, isSettingField } from '@alilc/lowcode-utils';\nimport { SettingEntry } from './setting-entry';\nimport { INode } from '../../document';\nimport { IComponentMeta } from '../../component-meta';\nimport { Designer } from '../designer';\nimport { Setters } from '@alilc/lowcode-shell';\n\nexport class SettingPropEntry implements SettingEntry {\n  // === static properties ===\n  readonly editor: IPublicModelEditor;\n\n  readonly isSameComponent: boolean;\n\n  readonly isMultiple: boolean;\n\n  readonly isSingle: boolean;\n\n  readonly setters: Setters;\n\n  readonly nodes: INode[];\n\n  readonly componentMeta: IComponentMeta | null;\n\n  readonly designer: Designer;\n\n  readonly top: SettingEntry;\n\n  readonly isGroup: boolean;\n\n  readonly type: 'field' | 'group';\n\n  readonly id = uniqueId('entry');\n\n  readonly emitter: IEventBus = createModuleEventBus('SettingPropEntry');\n\n  // ==== dynamic properties ====\n  @obx.ref private _name: string | number;\n\n  get name() {\n    return this._name;\n  }\n\n  @computed get path() {\n    const path = this.parent.path.slice();\n    if (this.type === 'field') {\n      path.push(this.name);\n    }\n    return path;\n  }\n\n  extraProps: any = {};\n\n  constructor(readonly parent: SettingEntry, name: string | number, type?: 'field' | 'group') {\n    makeObservable(this);\n    if (type == null) {\n      const c = typeof name === 'string' ? name.slice(0, 1) : '';\n      if (c === '#') {\n        this.type = 'group';\n      } else {\n        this.type = 'field';\n      }\n    } else {\n      this.type = type;\n    }\n    // initial self properties\n    this._name = name;\n    this.isGroup = this.type === 'group';\n\n    // copy parent static properties\n    this.editor = parent.editor;\n    this.nodes = parent.nodes;\n    this.setters = parent.setters;\n    this.componentMeta = parent.componentMeta;\n    this.isSameComponent = parent.isSameComponent;\n    this.isMultiple = parent.isMultiple;\n    this.isSingle = parent.isSingle;\n    this.designer = parent.designer;\n    this.top = parent.top;\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  setKey(key: string | number) {\n    if (this.type !== 'field') {\n      return;\n    }\n    const propName = this.path.join('.');\n    let l = this.nodes.length;\n    while (l-- > 0) {\n      this.nodes[l].getProp(propName, true)!.key = key;\n    }\n    this._name = key;\n  }\n\n  getKey() {\n    return this._name;\n  }\n\n  remove() {\n    if (this.type !== 'field') {\n      return;\n    }\n    const propName = this.path.join('.');\n    let l = this.nodes.length;\n    while (l-- > 0) {\n      this.nodes[l].getProp(propName)?.remove();\n    }\n  }\n\n  // ====== 当前属性读写 =====\n\n  /**\n   * 判断当前属性值是否一致\n   * -1 多种值\n   * 0 无值\n   * 1 类似值，比如数组长度一样\n   * 2 单一植\n   */\n  /* istanbul ignore next */\n  @computed get valueState(): number {\n    return runInAction(() => {\n      if (this.type !== 'field') {\n        const { getValue } = this.extraProps;\n        return getValue\n          ? getValue(this.internalToShellPropEntry(), undefined) === undefined\n            ? 0\n            : 1\n          : 0;\n      }\n      if (this.nodes.length === 1) {\n        return 2;\n      }\n      const propName = this.path.join('.');\n      const first = this.nodes[0].getProp(propName)!;\n      let l = this.nodes.length;\n      let state = 2;\n      while (--l > 0) {\n        const next = this.nodes[l].getProp(propName, false);\n        const s = first.compare(next);\n        if (s > 1) {\n          return -1;\n        }\n        if (s === 1) {\n          state = 1;\n        }\n      }\n      if (state === 2 && first.isUnset()) {\n        return 0;\n      }\n      return state;\n    });\n  }\n\n  /**\n   * 获取当前属性值\n   */\n  getValue(): any {\n    let val: any;\n    if (this.type === 'field') {\n      val = this.parent.getPropValue(this.name);\n    }\n    const { getValue } = this.extraProps;\n    try {\n      return getValue ? getValue(this.internalToShellPropEntry(), val) : val;\n    } catch (e) {\n      console.warn(e);\n      return val;\n    }\n  }\n\n  /**\n   * 设置当前属性值\n   */\n  setValue(val: any, isHotValue?: boolean, force?: boolean, extraOptions?: IPublicTypeSetValueOptions) {\n    const oldValue = this.getValue();\n    if (this.type === 'field') {\n      this.parent.setPropValue(this.name, val);\n    }\n\n    const { setValue } = this.extraProps;\n    if (setValue && !extraOptions?.disableMutator) {\n      try {\n        setValue(this.internalToShellPropEntry(), val);\n      } catch (e) {\n        /* istanbul ignore next */\n        console.warn(e);\n      }\n    }\n    this.notifyValueChange(oldValue, val);\n    // 如果 fromSetHotValue，那么在 setHotValue 中已经调用过 valueChange 了\n    if (!extraOptions?.fromSetHotValue) {\n      this.valueChange(extraOptions);\n    }\n  }\n\n  /**\n   * 清除已设置的值\n   */\n  clearValue() {\n    if (this.type === 'field') {\n      this.parent.clearPropValue(this.name);\n    }\n    const { setValue } = this.extraProps;\n    if (setValue) {\n      try {\n        setValue(this.internalToShellPropEntry(), undefined);\n      } catch (e) {\n        /* istanbul ignore next */\n        console.warn(e);\n      }\n    }\n  }\n\n  /**\n   * 获取子项\n   */\n  get(propName: string | number) {\n    const path = this.path.concat(propName).join('.');\n    return this.top.get(path);\n  }\n\n  /**\n   * 设置子级属性值\n   */\n  setPropValue(propName: string | number, value: any) {\n    const path = this.path.concat(propName).join('.');\n    this.top.setPropValue(path, value);\n  }\n\n  /**\n   * 清除已设置值\n   */\n  clearPropValue(propName: string | number) {\n    const path = this.path.concat(propName).join('.');\n    this.top.clearPropValue(path);\n  }\n\n  /**\n   * 获取子级属性值\n   */\n  getPropValue(propName: string | number): any {\n    return this.top.getPropValue(this.path.concat(propName).join('.'));\n  }\n\n  /**\n   * 获取顶层附属属性值\n   */\n  getExtraPropValue(propName: string) {\n    return this.top.getExtraPropValue(propName);\n  }\n\n  /**\n   * 设置顶层附属属性值\n   */\n  setExtraPropValue(propName: string, value: any) {\n    this.top.setExtraPropValue(propName, value);\n  }\n\n  // ======= compatibles for vision ======\n  getNode() {\n    return this.nodes[0];\n  }\n\n  getName(): string {\n    return this.path.join('.');\n  }\n\n  getProps() {\n    return this.top;\n  }\n\n  // add settingfield props\n  get props() {\n    return this.top;\n  }\n\n  onValueChange(func: () => any) {\n    this.emitter.on('valuechange', func);\n\n    return () => {\n      this.emitter.removeListener('valuechange', func);\n    };\n  }\n\n  /**\n   * @deprecated\n   */\n  valueChange(options: IPublicTypeSetValueOptions = {}) {\n    this.emitter.emit('valuechange', options);\n\n    if (this.parent && isSettingField(this.parent)) {\n      this.parent.valueChange(options);\n    }\n  }\n\n  notifyValueChange(oldValue: any, newValue: any) {\n    this.editor.eventBus.emit(GlobalEvent.Node.Prop.Change, {\n      node: this.getNode(),\n      prop: this,\n      oldValue,\n      newValue,\n    });\n  }\n\n  getDefaultValue() {\n    return this.extraProps.defaultValue;\n  }\n\n  isIgnore() {\n    return false;\n  }\n\n  getVariableValue() {\n    const v = this.getValue();\n    if (isJSExpression(v)) {\n      return v.value;\n    }\n    return '';\n  }\n\n  setVariableValue(value: string) {\n    const v = this.getValue();\n    this.setValue({\n      type: 'JSExpression',\n      value,\n      mock: isJSExpression(v) ? v.mock : v,\n    });\n  }\n\n  setUseVariable(flag: boolean) {\n    if (this.isUseVariable() === flag) {\n      return;\n    }\n    const v = this.getValue();\n    if (this.isUseVariable()) {\n      this.setValue(v.mock);\n    } else {\n      this.setValue({\n        type: 'JSExpression',\n        value: '',\n        mock: v,\n      });\n    }\n  }\n\n  isUseVariable() {\n    return isJSExpression(this.getValue());\n  }\n\n  get useVariable() {\n    return this.isUseVariable();\n  }\n\n  getMockOrValue() {\n    const v = this.getValue();\n    if (isJSExpression(v)) {\n      return v.mock;\n    }\n    return v;\n  }\n\n  internalToShellPropEntry() {\n    return this.designer.shellModelFactory.createSettingPropEntry(this);\n  }\n}\n","import {\n  IPublicTypeTitleContent,\n  IPublicTypeSetterType,\n  IPublicTypeDynamicSetter,\n  IPublicTypeFieldExtraProps,\n  IPublicTypeFieldConfig,\n  IPublicTypeCustomView,\n  IPublicTypeSetValueOptions,\n} from '@alilc/lowcode-types';\nimport { Transducer } from './utils';\nimport { SettingPropEntry } from './setting-prop-entry';\nimport { SettingEntry } from './setting-entry';\nimport { computed, obx, makeObservable, action, untracked, intl } from '@alilc/lowcode-editor-core';\nimport { cloneDeep, isCustomView, isDynamicSetter } from '@alilc/lowcode-utils';\n\nfunction getSettingFieldCollectorKey(parent: SettingEntry, config: IPublicTypeFieldConfig) {\n  let cur = parent;\n  const path = [config.name];\n  while (cur !== parent.top) {\n    if (cur instanceof SettingField && cur.type !== 'group') {\n      path.unshift(cur.name);\n    }\n    cur = cur.parent;\n  }\n  return path.join('.');\n}\n\nexport class SettingField extends SettingPropEntry implements SettingEntry {\n  readonly isSettingField = true;\n\n  readonly isRequired: boolean;\n\n  readonly transducer: Transducer;\n\n  private _config: IPublicTypeFieldConfig;\n\n  private hotValue: any;\n\n  parent: SettingEntry;\n\n  extraProps: IPublicTypeFieldExtraProps;\n\n  // ==== dynamic properties ====\n  private _title?: IPublicTypeTitleContent;\n\n  get title() {\n    return (\n      this._title || (typeof this.name === 'number' ? `${intl('Item')} ${this.name}` : this.name)\n    );\n  }\n\n  private _setter?: IPublicTypeSetterType | IPublicTypeDynamicSetter;\n\n  @obx.ref private _expanded = true;\n\n  private _items: Array<SettingField | IPublicTypeCustomView> = [];\n\n  constructor(\n    parent: SettingEntry,\n    config: IPublicTypeFieldConfig,\n    settingFieldCollector?: (name: string | number, field: SettingField) => void,\n  ) {\n    super(parent, config.name, config.type);\n    makeObservable(this);\n    const { title, items, setter, extraProps, ...rest } = config;\n    this.parent = parent;\n    this._config = config;\n    this._title = title;\n    this._setter = setter;\n    this.extraProps = {\n      ...rest,\n      ...extraProps,\n    };\n    this.isRequired = config.isRequired || (setter as any)?.isRequired;\n    this._expanded = !extraProps?.defaultCollapsed;\n\n    // initial items\n    if (items && items.length > 0) {\n      this.initItems(items, settingFieldCollector);\n    }\n    if (this.type !== 'group' && settingFieldCollector && config.name) {\n      settingFieldCollector(getSettingFieldCollectorKey(parent, config), this);\n    }\n\n    // compatiable old config\n    this.transducer = new Transducer(this, { setter });\n  }\n\n  @computed get setter(): IPublicTypeSetterType | null {\n    if (!this._setter) {\n      return null;\n    }\n    if (isDynamicSetter(this._setter)) {\n      return untracked(() => {\n        const shellThis = this.internalToShellPropEntry();\n        return this._setter.call(shellThis, shellThis);\n      });\n    }\n    return this._setter;\n  }\n\n  get expanded(): boolean {\n    return this._expanded;\n  }\n\n  setExpanded(value: boolean) {\n    this._expanded = value;\n  }\n\n  get items(): Array<SettingField | IPublicTypeCustomView> {\n    return this._items;\n  }\n\n  get config(): IPublicTypeFieldConfig {\n    return this._config;\n  }\n\n  private initItems(\n    items: Array<IPublicTypeFieldConfig | IPublicTypeCustomView>,\n    settingFieldCollector?: {\n      (name: string | number, field: SettingField): void;\n      (name: string, field: SettingField): void;\n    },\n  ) {\n    this._items = items.map((item) => {\n      if (isCustomView(item)) {\n        return item;\n      }\n      return new SettingField(this, item, settingFieldCollector);\n    });\n  }\n\n  private disposeItems() {\n    this._items.forEach((item) => isSettingField(item) && item.purge());\n    this._items = [];\n  }\n\n  // 创建子配置项，通常用于 object/array 类型数据\n  createField(config: IPublicTypeFieldConfig): SettingField {\n    return new SettingField(this, config);\n  }\n\n  purge() {\n    this.disposeItems();\n  }\n\n  // ======= compatibles for vision ======\n\n  getConfig<K extends keyof IPublicTypeFieldConfig>(\n    configName?: K,\n  ): IPublicTypeFieldConfig[K] | IPublicTypeFieldConfig {\n    if (configName) {\n      return this.config[configName];\n    }\n    return this._config;\n  }\n\n  getItems(\n    filter?: (item: SettingField | IPublicTypeCustomView) => boolean,\n  ): Array<SettingField | IPublicTypeCustomView> {\n    return this._items.filter((item) => {\n      if (filter) {\n        return filter(item);\n      }\n      return true;\n    });\n  }\n\n  @action\n  setValue(\n    val: any,\n    isHotValue?: boolean,\n    force?: boolean,\n    extraOptions?: IPublicTypeSetValueOptions,\n  ) {\n    if (isHotValue) {\n      this.setHotValue(val, extraOptions);\n      return;\n    }\n    super.setValue(val, false, false, extraOptions);\n  }\n\n  getHotValue(): any {\n    if (this.hotValue) {\n      return this.hotValue;\n    }\n    // avoid View modify\n    let v = cloneDeep(this.getMockOrValue());\n    if (v == null) {\n      v = this.extraProps.defaultValue;\n    }\n    return this.transducer.toHot(v);\n  }\n\n  /* istanbul ignore next */\n  @action\n  setMiniAppDataSourceValue(data: any, options?: any) {\n    this.hotValue = data;\n    const v = this.transducer.toNative(data);\n    this.setValue(v, false, false, options);\n    // dirty fix list setter\n    if (Array.isArray(data) && data[0] && data[0].__sid__) {\n      return;\n    }\n\n    this.valueChange();\n  }\n\n  @action\n  setHotValue(data: any, options?: IPublicTypeSetValueOptions) {\n    this.hotValue = data;\n    const value = this.transducer.toNative(data);\n    if (options) {\n      options.fromSetHotValue = true;\n    } else {\n      options = { fromSetHotValue: true };\n    }\n    if (this.isUseVariable()) {\n      const oldValue = this.getValue();\n      this.setValue(\n        {\n          type: 'JSExpression',\n          value: oldValue.value,\n          mock: value,\n        },\n        false,\n        false,\n        options,\n      );\n    } else {\n      this.setValue(value, false, false, options);\n    }\n\n    // dirty fix list setter\n    if (Array.isArray(data) && data[0] && data[0].__sid__) {\n      return;\n    }\n\n    this.valueChange(options);\n  }\n\n  onEffect(action: () => void): () => void {\n    return this.designer.autorun(action, true);\n  }\n}\n\n/**\n * @deprecated use same function from '@alilc/lowcode-utils' instead\n */\nexport function isSettingField(obj: any): obj is SettingField {\n  return obj && obj.isSettingField;\n}\n","import { IPublicTypeCustomView, IPublicModelEditor } from '@alilc/lowcode-types';\nimport { isCustomView } from '@alilc/lowcode-utils';\nimport { computed, IEventBus, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport { SettingEntry } from './setting-entry';\nimport { SettingField } from './setting-field';\nimport { SettingPropEntry } from './setting-prop-entry';\nimport { Node } from '../../document';\nimport { ComponentMeta } from '../../component-meta';\nimport { Designer } from '../designer';\nimport { Setters } from '@alilc/lowcode-shell';\n\nfunction generateSessionId(nodes: Node[]) {\n  return nodes\n    .map((node) => node.id)\n    .sort()\n    .join(',');\n}\n\nexport class SettingTopEntry implements SettingEntry {\n  private emitter: IEventBus = createModuleEventBus('SettingTopEntry');\n\n  private _items: Array<SettingField | IPublicTypeCustomView> = [];\n\n  private _componentMeta: ComponentMeta | null = null;\n\n  private _isSame = true;\n\n  private _settingFieldMap: { [prop: string]: SettingField } = {};\n\n  readonly path = [];\n\n  readonly top = this;\n\n  readonly parent = this;\n\n  get componentMeta() {\n    return this._componentMeta;\n  }\n\n  get items() {\n    return this._items;\n  }\n\n  /**\n   * 同样的\n   */\n  get isSameComponent(): boolean {\n    return this._isSame;\n  }\n\n  /**\n   * 一个\n   */\n  get isSingle(): boolean {\n    return this.nodes.length === 1;\n  }\n\n  get isLocked(): boolean {\n    return this.first.isLocked;\n  }\n\n  /**\n   * 多个\n   */\n  get isMultiple(): boolean {\n    return this.nodes.length > 1;\n  }\n\n  readonly id: string;\n\n  readonly first: Node;\n\n  readonly designer: Designer;\n\n  readonly setters: Setters;\n\n  disposeFunctions: any[] = [];\n\n  constructor(readonly editor: IPublicModelEditor, readonly nodes: Node[]) {\n    if (!Array.isArray(nodes) || nodes.length < 1) {\n      throw new ReferenceError('nodes should not be empty');\n    }\n    this.id = generateSessionId(nodes);\n    this.first = nodes[0];\n    this.designer = this.first.document.designer;\n    this.setters = editor.get('setters') as Setters;\n\n    // setups\n    this.setupComponentMeta();\n\n    // clear fields\n    this.setupItems();\n\n    this.disposeFunctions.push(this.setupEvents());\n  }\n\n  private setupComponentMeta() {\n    // todo: enhance compile a temp configure.compiled\n    const { first } = this;\n    const meta = first.componentMeta;\n    const l = this.nodes.length;\n    let theSame = true;\n    for (let i = 1; i < l; i++) {\n      const other = this.nodes[i];\n      if (other.componentMeta !== meta) {\n        theSame = false;\n        break;\n      }\n    }\n    if (theSame) {\n      this._isSame = true;\n      this._componentMeta = meta;\n    } else {\n      this._isSame = false;\n      this._componentMeta = null;\n    }\n  }\n\n  private setupItems() {\n    if (this.componentMeta) {\n      const settingFieldMap: { [prop: string]: SettingField } = {};\n      const settingFieldCollector = (name: string | number, field: SettingField) => {\n        settingFieldMap[name] = field;\n      };\n      this._items = this.componentMeta.configure.map((item) => {\n        if (isCustomView(item)) {\n          return item;\n        }\n        return new SettingField(this, item as any, settingFieldCollector);\n      });\n      this._settingFieldMap = settingFieldMap;\n    }\n  }\n\n  private setupEvents() {\n    return this.componentMeta?.onMetadataChange(() => {\n      this.setupItems();\n    });\n  }\n\n  /**\n   * 获取当前属性值\n   */\n  @computed getValue(): any {\n    return this.first?.propsData;\n  }\n\n  /**\n   * 设置当前属性值\n   */\n  setValue(val: any) {\n    this.setProps(val);\n    // TODO: emit value change\n  }\n\n  /**\n   * 获取子项\n   */\n  get(propName: string | number): SettingPropEntry | null {\n    if (!propName) return null;\n    return this._settingFieldMap[propName] || (new SettingPropEntry(this, propName));\n  }\n\n  /**\n   * 设置子级属性值\n   */\n  setPropValue(propName: string, value: any) {\n    this.nodes.forEach((node) => {\n      node.setPropValue(propName, value);\n    });\n  }\n\n  /**\n   * 清除已设置值\n   */\n  clearPropValue(propName: string) {\n    this.nodes.forEach((node) => {\n      node.clearPropValue(propName);\n    });\n  }\n\n  /**\n   * 获取子级属性值\n   */\n  getPropValue(propName: string): any {\n    return this.first.getProp(propName, true)?.getValue();\n  }\n\n  /**\n   * 获取顶层附属属性值\n   */\n  getExtraPropValue(propName: string) {\n    return this.first.getExtraProp(propName, false)?.getValue();\n  }\n\n  /**\n   * 设置顶层附属属性值\n   */\n  setExtraPropValue(propName: string, value: any) {\n    this.nodes.forEach((node) => {\n      node.getExtraProp(propName, true)?.setValue(value);\n    });\n  }\n\n  // 设置多个属性值，替换原有值\n  setProps(data: object) {\n    this.nodes.forEach((node) => {\n      node.setProps(data as any);\n    });\n  }\n\n  // 设置多个属性值，和原有值合并\n  mergeProps(data: object) {\n    this.nodes.forEach((node) => {\n      node.mergeProps(data as any);\n    });\n  }\n\n  private disposeItems() {\n    this._items.forEach((item) => isPurgeable(item) && item.purge());\n    this._items = [];\n  }\n\n  purge() {\n    this.disposeItems();\n    this._settingFieldMap = {};\n    this.emitter.removeAllListeners();\n    this.disposeFunctions.forEach(f => f());\n    this.disposeFunctions = [];\n  }\n\n\n  getProp(propName: string | number) {\n    return this.get(propName);\n  }\n\n  // ==== copy some Node api =====\n  getStatus() {\n\n  }\n\n  setStatus() {\n\n  }\n\n  getChildren() {\n    // this.nodes.map()\n  }\n\n  getDOMNode() {\n\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  getPage() {\n    return this.first.document;\n  }\n\n  /**\n   * @deprecated\n   */\n  get node() {\n    return this.getNode();\n  }\n\n  getNode() {\n    return this.nodes[0];\n  }\n}\n\ninterface Purgeable {\n  purge(): void;\n}\nfunction isPurgeable(obj: any): obj is Purgeable {\n  return obj && obj.purge;\n}\n","export function invariant(check: any, message: string, thing?: any) {\n  if (!check) {\n    throw new Error(`[designer] Invariant failed: ${message}${thing ? ` in '${thing}'` : ''}`);\n  }\n}\n","import { ComponentType } from 'react';\nimport { Designer } from '../../designer';\nimport { invariant } from '../../utils';\nimport { BuiltinSimulatorHost } from '../../builtin-simulator/host';\n\nexport type BemToolsData = {\n  name: string;\n  item: ComponentType<{ host: BuiltinSimulatorHost }>;\n};\n\nexport class BemToolsManager {\n  private designer: Designer;\n\n  private toolsContainer: BemToolsData[] = [];\n\n  constructor(designer: Designer) {\n    this.designer = designer;\n  }\n\n  addBemTools(toolsData: BemToolsData) {\n    const found = this.toolsContainer.find(item => item.name === toolsData.name);\n    invariant(!found, `${toolsData.name} already exists`);\n\n    this.toolsContainer.push(toolsData);\n  }\n\n  removeBemTools(name: string) {\n    const index = this.toolsContainer.findIndex(item => item.name === name);\n    if (index !== -1) {\n      this.toolsContainer.splice(index, 1);\n    }\n  }\n\n  getAllBemTools() {\n    return this.toolsContainer;\n  }\n}","import { IPublicTypeTransformedComponentMetadata as Metadata } from '@alilc/lowcode-types';\n\nexport function legacyIssues(metadata: Metadata): Metadata {\n  const { devMode } = metadata;\n  return {\n    ...metadata,\n    devMode: devMode?.replace(/(low|pro)code/, '$1Code') as Metadata['devMode'],\n  };\n}\n\nexport function componentDefaults(metadata: Metadata): Metadata {\n  const { configure, componentName } = metadata;\n  const { component = {} } = configure;\n  if (!component.nestingRule) {\n    let m;\n    // uri match xx.Group set subcontrolling: true, childWhiteList\n    // eslint-disable-next-line no-cond-assign\n    if ((m = /^(.+)\\.Group$/.exec(componentName))) {\n      // component.subControlling = true;\n      component.nestingRule = {\n        childWhitelist: [`${m[1]}`],\n      };\n      // eslint-disable-next-line no-cond-assign\n    } else if ((m = /^(.+)\\.Node$/.exec(componentName))) {\n      // uri match xx.Node set selfControlled: false, parentWhiteList\n      // component.selfControlled = false;\n      component.nestingRule = {\n        parentWhitelist: [`${m[1]}`, componentName],\n      };\n      // eslint-disable-next-line no-cond-assign\n    } else if ((m = /^(.+)\\.(Item|Node|Option)$/.exec(componentName))) {\n      // uri match .Item .Node .Option set parentWhiteList\n      component.nestingRule = {\n        parentWhitelist: [`${m[1]}`],\n      };\n    }\n  }\n  // if (component.isModal == null && /Dialog/.test(componentName)) {\n  //   component.isModal = true;\n  // }\n  return {\n    ...metadata,\n    configure: {\n      ...configure,\n      component,\n    },\n  };\n}\n","import { IPublicTypeComponentAction, IPublicTypeMetadataTransducer } from '@alilc/lowcode-types';\nimport { engineConfig } from '@alilc/lowcode-editor-core';\nimport { intlNode } from './locale';\nimport {\n  IconLock,\n  IconUnlock,\n  IconRemove,\n  IconClone,\n  IconHidden,\n} from './icons';\nimport { Node } from './document';\nimport { componentDefaults, legacyIssues } from './transducers';\n\nexport class ComponentActions {\n  actions: IPublicTypeComponentAction[] = [\n    {\n      name: 'remove',\n      content: {\n        icon: IconRemove,\n        title: intlNode('remove'),\n        /* istanbul ignore next */\n        action(node: Node) {\n          node.remove();\n        },\n      },\n      important: true,\n    },\n    {\n      name: 'hide',\n      content: {\n        icon: IconHidden,\n        title: intlNode('hide'),\n        /* istanbul ignore next */\n        action(node: Node) {\n          node.setVisible(false);\n        },\n      },\n      /* istanbul ignore next */\n      condition: (node: Node) => {\n        return node.componentMeta.isModal;\n      },\n      important: true,\n    },\n    {\n      name: 'copy',\n      content: {\n        icon: IconClone,\n        title: intlNode('copy'),\n        /* istanbul ignore next */\n        action(node: Node) {\n          // node.remove();\n          const { document: doc, parent, index } = node;\n          if (parent) {\n            const newNode = doc.insertNode(parent, node, index + 1, true);\n            newNode.select();\n            const { isRGL, rglNode } = node.getRGL();\n            if (isRGL) {\n              // 复制 layout 信息\n              let layout = rglNode.getPropValue('layout') || [];\n              let curLayout = layout.filter((item) => item.i === node.getPropValue('fieldId'));\n              if (curLayout && curLayout[0]) {\n                layout.push({\n                  ...curLayout[0],\n                  i: newNode.getPropValue('fieldId'),\n                });\n                rglNode.setPropValue('layout', layout);\n                // 如果是磁贴块复制，则需要滚动到影响位置\n                setTimeout(() => newNode.document.simulator?.scrollToNode(newNode), 10);\n              }\n            }\n          }\n        },\n      },\n      important: true,\n    },\n    {\n      name: 'lock',\n      content: {\n        icon: IconLock, // 锁定 icon\n        title: intlNode('lock'),\n        /* istanbul ignore next */\n        action(node: Node) {\n          node.lock();\n        },\n      },\n      /* istanbul ignore next */\n      condition: (node: Node) => {\n        return engineConfig.get('enableCanvasLock', false) && node.isContainer() && !node.isLocked;\n      },\n      important: true,\n    },\n    {\n      name: 'unlock',\n      content: {\n        icon: IconUnlock, // 解锁 icon\n        title: intlNode('unlock'),\n        /* istanbul ignore next */\n        action(node: Node) {\n          node.lock(false);\n        },\n      },\n      /* istanbul ignore next */\n      condition: (node: Node) => {\n        return engineConfig.get('enableCanvasLock', false) && node.isContainer() && node.isLocked;\n      },\n      important: true,\n    },\n  ];\n\n  constructor() {\n    this.registerMetadataTransducer(legacyIssues, 2, 'legacy-issues'); // should use a high level priority, eg: 2\n    this.registerMetadataTransducer(componentDefaults, 100, 'component-defaults');\n  }\n\n  removeBuiltinComponentAction(name: string) {\n    const i = this.actions.findIndex((action) => action.name === name);\n    if (i > -1) {\n      this.actions.splice(i, 1);\n    }\n  }\n  addBuiltinComponentAction(action: IPublicTypeComponentAction) {\n    this.actions.push(action);\n  }\n\n  modifyBuiltinComponentAction(\n    actionName: string,\n    handle: (action: IPublicTypeComponentAction) => void,\n  ) {\n    const builtinAction = this.actions.find((action) => action.name === actionName);\n    if (builtinAction) {\n      handle(builtinAction);\n    }\n  }\n\n  private metadataTransducers: IPublicTypeMetadataTransducer[] = [];\n\n  registerMetadataTransducer(\n    transducer: IPublicTypeMetadataTransducer,\n    level = 100,\n    id?: string,\n  ) {\n    transducer.level = level;\n    transducer.id = id;\n    const i = this.metadataTransducers.findIndex((item) => item.level != null && item.level > level);\n    if (i < 0) {\n      this.metadataTransducers.push(transducer);\n    } else {\n      this.metadataTransducers.splice(i, 0, transducer);\n    }\n  }\n\n  getRegisteredMetadataTransducers(): IPublicTypeMetadataTransducer[] {\n    return this.metadataTransducers;\n  }\n}","import { ComponentType } from 'react';\nimport { obx, computed, autorun, makeObservable, IReactionPublic, IReactionOptions, IReactionDisposer } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicTypeProjectSchema,\n  IPublicTypeComponentMetadata,\n  IPublicTypeComponentAction,\n  IPublicTypeNpmInfo,\n  IPublicModelEditor,\n  IPublicTypeCompositeObject,\n  IPublicTypePropsList,\n  IPublicTypeNodeSchema,\n  IPublicTypePropsTransducer,\n  IShellModelFactory,\n  IPublicModelDragObject,\n  IPublicTypeScrollable,\n  IPublicModelScroller,\n  IPublicTypeLocationData,\n  IPublicEnumTransformStage,\n  IPublicModelDragon,\n  IPublicModelDropLocation,\n} from '@alilc/lowcode-types';\nimport { megreAssets, IPublicTypeAssetsJson, isNodeSchema, isDragNodeObject, isDragNodeDataObject, isLocationChildrenDetail, Logger } from '@alilc/lowcode-utils';\nimport { Project } from '../project';\nimport { Node, DocumentModel, insertChildren, INode } from '../document';\nimport { ComponentMeta, IComponentMeta } from '../component-meta';\nimport { INodeSelector, Component } from '../simulator';\nimport { Scroller } from './scroller';\nimport { Dragon, IDragon, ILocateEvent } from './dragon';\nimport { ActiveTracker, IActiveTracker } from './active-tracker';\nimport { Detecting } from './detecting';\nimport { DropLocation } from './location';\nimport { OffsetObserver, createOffsetObserver } from './offset-observer';\nimport { SettingTopEntry } from './setting';\nimport { BemToolsManager } from '../builtin-simulator/bem-tools/manager';\nimport { ComponentActions } from '../component-actions';\n\nconst logger = new Logger({ level: 'warn', bizName: 'designer' });\n\nexport interface DesignerProps {\n  [key: string]: any;\n  editor: IPublicModelEditor;\n  shellModelFactory: IShellModelFactory;\n  className?: string;\n  style?: object;\n  defaultSchema?: IPublicTypeProjectSchema;\n  hotkeys?: object;\n  viewName?: string;\n  simulatorProps?: object | ((document: DocumentModel) => object);\n  simulatorComponent?: ComponentType<any>;\n  dragGhostComponent?: ComponentType<any>;\n  suspensed?: boolean;\n  componentMetadatas?: IPublicTypeComponentMetadata[];\n  globalComponentActions?: IPublicTypeComponentAction[];\n  onMount?: (designer: Designer) => void;\n  onDragstart?: (e: ILocateEvent) => void;\n  onDrag?: (e: ILocateEvent) => void;\n  onDragend?: (\n      e: { dragObject: IPublicModelDragObject; copy: boolean },\n      loc?: DropLocation,\n    ) => void;\n}\n\nexport interface IDesigner {\n\n  get dragon(): IPublicModelDragon;\n\n  get activeTracker(): IActiveTracker;\n\n  get componentActions(): ComponentActions;\n\n  get editor(): IPublicModelEditor;\n\n  createScroller(scrollable: IPublicTypeScrollable): IPublicModelScroller;\n\n  /**\n   * 创建插入位置，考虑放到 dragon 中\n   */\n  createLocation(locationData: IPublicTypeLocationData): IPublicModelDropLocation;\n\n  get componentsMap(): { [key: string]: IPublicTypeNpmInfo | Component };\n\n  loadIncrementalAssets(incrementalAssets: IPublicTypeAssetsJson): Promise<void>;\n\n  getComponentMeta(\n    componentName: string,\n    generateMetadata?: () => IPublicTypeComponentMetadata | null,\n  ): IComponentMeta;\n\n  createComponentMeta(data: IPublicTypeComponentMetadata): IComponentMeta | null;\n\n  getComponentMetasMap(): Map<string, IComponentMeta>;\n\n  addPropsReducer(reducer: IPublicTypePropsTransducer, stage: IPublicEnumTransformStage): void;\n}\n\nexport class Designer implements IDesigner {\n  dragon: IDragon;\n\n  viewName: string | undefined;\n\n  readonly componentActions = new ComponentActions();\n\n  readonly activeTracker = new ActiveTracker();\n\n  readonly detecting = new Detecting();\n\n  readonly project: Project;\n\n  readonly editor: IPublicModelEditor;\n\n  readonly bemToolsManager = new BemToolsManager(this);\n\n  readonly shellModelFactory: IShellModelFactory;\n\n  private _dropLocation?: DropLocation;\n\n  private propsReducers = new Map<IPublicEnumTransformStage, IPublicTypePropsTransducer[]>();\n\n  private _lostComponentMetasMap = new Map<string, ComponentMeta>();\n\n  private props?: DesignerProps;\n\n  private oobxList: OffsetObserver[] = [];\n\n  @obx.ref private _componentMetasMap = new Map<string, IComponentMeta>();\n\n  @obx.ref private _simulatorComponent?: ComponentType<any>;\n\n  @obx.ref private _simulatorProps?: object | ((project: Project) => object);\n\n  @obx.ref private _suspensed = false;\n\n  get currentDocument() {\n    return this.project.currentDocument;\n  }\n\n  get currentHistory() {\n    return this.currentDocument?.history;\n  }\n\n  get currentSelection() {\n    return this.currentDocument?.selection;\n  }\n\n  constructor(props: DesignerProps) {\n    makeObservable(this);\n    const { editor, viewName, shellModelFactory } = props;\n    this.editor = editor;\n    this.viewName = viewName;\n    this.shellModelFactory = shellModelFactory;\n    this.setProps(props);\n\n    this.project = new Project(this, props.defaultSchema, viewName);\n\n    this.dragon = new Dragon(this);\n    this.dragon.onDragstart((e) => {\n      this.detecting.enable = false;\n      const { dragObject } = e;\n      if (isDragNodeObject(dragObject)) {\n        if (dragObject.nodes.length === 1) {\n          if (dragObject.nodes[0].parent) {\n            // ensure current selecting\n            dragObject.nodes[0].select();\n          } else {\n            this.currentSelection?.clear();\n          }\n        }\n      } else {\n        this.currentSelection?.clear();\n      }\n      if (this.props?.onDragstart) {\n        this.props.onDragstart(e);\n      }\n      this.postEvent('dragstart', e);\n    });\n\n    this.dragon.onDrag((e) => {\n      if (this.props?.onDrag) {\n        this.props.onDrag(e);\n      }\n      this.postEvent('drag', e);\n    });\n\n    this.dragon.onDragend((e) => {\n      const { dragObject, copy } = e;\n      logger.debug('onDragend: dragObject ', dragObject, ' copy ', copy);\n      const loc = this._dropLocation;\n      if (loc) {\n        if (isLocationChildrenDetail(loc.detail) && loc.detail.valid !== false) {\n          let nodes: Node[] | undefined;\n          if (isDragNodeObject(dragObject)) {\n            nodes = insertChildren(loc.target, [...dragObject.nodes], loc.detail.index, copy);\n          } else if (isDragNodeDataObject(dragObject)) {\n            // process nodeData\n            const nodeData = Array.isArray(dragObject.data) ? dragObject.data : [dragObject.data];\n            const isNotNodeSchema = nodeData.find((item) => !isNodeSchema(item));\n            if (isNotNodeSchema) {\n              return;\n            }\n            nodes = insertChildren(loc.target, nodeData, loc.detail.index);\n          }\n          if (nodes) {\n            loc.document.selection.selectAll(nodes.map((o) => o.id));\n            setTimeout(() => this.activeTracker.track(nodes![0]), 10);\n          }\n        }\n      }\n      if (this.props?.onDragend) {\n        this.props.onDragend(e, loc);\n      }\n      this.postEvent('dragend', e, loc);\n      this.detecting.enable = true;\n    });\n\n    this.activeTracker.onChange(({ node, detail }) => {\n      node.document.simulator?.scrollToNode(node, detail);\n    });\n\n    let historyDispose: undefined | (() => void);\n    const setupHistory = () => {\n      if (historyDispose) {\n        historyDispose();\n        historyDispose = undefined;\n      }\n      this.postEvent('history.change', this.currentHistory);\n      if (this.currentHistory) {\n        const { currentHistory } = this;\n        historyDispose = currentHistory.onStateChange(() => {\n          this.postEvent('history.change', currentHistory);\n        });\n      }\n    };\n    this.project.onCurrentDocumentChange(() => {\n      this.postEvent('current-document.change', this.currentDocument);\n      this.postEvent('selection.change', this.currentSelection);\n      this.postEvent('history.change', this.currentHistory);\n      this.setupSelection();\n      setupHistory();\n    });\n    this.postEvent('init', this);\n    this.setupSelection();\n    setupHistory();\n  }\n\n  setupSelection = () => {\n    let selectionDispose: undefined | (() => void);\n    if (selectionDispose) {\n      selectionDispose();\n      selectionDispose = undefined;\n    }\n    const { currentSelection } = this;\n    // TODO: 避免选中 Page 组件，默认选中第一个子节点；新增规则 或 判断 Live 模式\n    if (\n      currentSelection &&\n      currentSelection.selected.length === 0 &&\n      this.simulatorProps?.designMode === 'live'\n    ) {\n      const rootNodeChildrens = this.currentDocument.getRoot().getChildren().children;\n      if (rootNodeChildrens.length > 0) {\n        currentSelection.select(rootNodeChildrens[0].id);\n      }\n    }\n    this.postEvent('selection.change', currentSelection);\n    if (currentSelection) {\n      selectionDispose = currentSelection.onSelectionChange(() => {\n        this.postEvent('selection.change', currentSelection);\n      });\n    }\n  };\n\n  postEvent(event: string, ...args: any[]) {\n    this.editor.eventBus.emit(`designer.${event}`, ...args);\n  }\n\n  get dropLocation() {\n    return this._dropLocation;\n  }\n\n  /**\n   * 创建插入位置，考虑放到 dragon 中\n   */\n  createLocation(locationData: IPublicTypeLocationData): DropLocation {\n    const loc = new DropLocation(locationData);\n    if (this._dropLocation && this._dropLocation.document !== loc.document) {\n      this._dropLocation.document.dropLocation = null;\n    }\n    this._dropLocation = loc;\n    this.postEvent('dropLocation.change', loc);\n    loc.document.dropLocation = loc;\n    this.activeTracker.track({ node: loc.target, detail: loc.detail });\n    return loc;\n  }\n\n  /**\n   * 清除插入位置\n   */\n  clearLocation() {\n    if (this._dropLocation) {\n      this._dropLocation.document.dropLocation = null;\n    }\n    this.postEvent('dropLocation.change', undefined);\n    this._dropLocation = undefined;\n  }\n\n  createScroller(scrollable: IPublicTypeScrollable): IPublicModelScroller {\n    return new Scroller(scrollable);\n  }\n\n  createOffsetObserver(nodeInstance: INodeSelector): OffsetObserver | null {\n    const oobx = createOffsetObserver(nodeInstance);\n    this.clearOobxList();\n    if (oobx) {\n      this.oobxList.push(oobx);\n    }\n    return oobx;\n  }\n\n  private clearOobxList(force?: boolean) {\n    let l = this.oobxList.length;\n    if (l > 20 || force) {\n      while (l-- > 0) {\n        if (this.oobxList[l].isPurged()) {\n          this.oobxList.splice(l, 1);\n        }\n      }\n    }\n  }\n\n  touchOffsetObserver() {\n    this.clearOobxList(true);\n    this.oobxList.forEach((item) => item.compute());\n  }\n\n  createSettingEntry(nodes: Node[]) {\n    return new SettingTopEntry(this.editor, nodes);\n  }\n\n  /**\n   * 获得合适的插入位置\n   * @deprecated\n   */\n  getSuitableInsertion(\n    insertNode?: INode | IPublicTypeNodeSchema | IPublicTypeNodeSchema[],\n  ): { target: INode; index?: number } | null {\n    const activeDoc = this.project.currentDocument;\n    if (!activeDoc) {\n      return null;\n    }\n    if (\n      Array.isArray(insertNode) &&\n      isNodeSchema(insertNode[0]) &&\n      this.getComponentMeta(insertNode[0].componentName).isModal\n    ) {\n      return {\n        target: activeDoc.rootNode as INode,\n      };\n    }\n    const focusNode = activeDoc.focusNode!;\n    const nodes = activeDoc.selection.getNodes();\n    const refNode = nodes.find((item) => focusNode.contains(item));\n    let target;\n    let index: number | undefined;\n    if (!refNode || refNode === focusNode) {\n      target = focusNode;\n    } else if (refNode.componentMeta.isContainer) {\n      target = refNode;\n    } else {\n      // FIXME!!, parent maybe null\n      target = refNode.parent!;\n      index = refNode.index + 1;\n    }\n\n    if (target && insertNode && !target.componentMeta.checkNestingDown(target, insertNode)) {\n      return null;\n    }\n\n    return { target, index };\n  }\n\n  setProps(nextProps: DesignerProps) {\n    const props = this.props ? { ...this.props, ...nextProps } : nextProps;\n    if (this.props) {\n      // check hotkeys\n      // TODO:\n      // check simulatorConfig\n      if (props.simulatorComponent !== this.props.simulatorComponent) {\n        this._simulatorComponent = props.simulatorComponent;\n      }\n      if (props.simulatorProps !== this.props.simulatorProps) {\n        this._simulatorProps = props.simulatorProps;\n        // 重新 setupSelection\n        if (props.simulatorProps?.designMode !== this.props.simulatorProps?.designMode) {\n          this.setupSelection();\n        }\n      }\n      if (props.suspensed !== this.props.suspensed && props.suspensed != null) {\n        this.suspensed = props.suspensed;\n      }\n      if (\n        props.componentMetadatas !== this.props.componentMetadatas &&\n        props.componentMetadatas != null\n      ) {\n        this.buildComponentMetasMap(props.componentMetadatas);\n      }\n    } else {\n      // init hotkeys\n      // todo:\n      // init simulatorConfig\n      if (props.simulatorComponent) {\n        this._simulatorComponent = props.simulatorComponent;\n      }\n      if (props.simulatorProps) {\n        this._simulatorProps = props.simulatorProps;\n      }\n      // init suspensed\n      if (props.suspensed != null) {\n        this.suspensed = props.suspensed;\n      }\n      if (props.componentMetadatas != null) {\n        this.buildComponentMetasMap(props.componentMetadatas);\n      }\n    }\n    this.props = props;\n  }\n\n  async loadIncrementalAssets(incrementalAssets: IPublicTypeAssetsJson): Promise<void> {\n    const { components, packages } = incrementalAssets;\n    components && this.buildComponentMetasMap(components);\n    if (packages) {\n      await this.project.simulator?.setupComponents(packages);\n    }\n\n    if (components) {\n      // 合并 assets\n      let assets = this.editor.get('assets') || {};\n      let newAssets = megreAssets(assets, incrementalAssets);\n      // 对于 assets 存在需要二次网络下载的过程，必须 await 等待结束之后，再进行事件触发\n      await this.editor.set('assets', newAssets);\n    }\n    // TODO: 因为涉及修改 prototype.view，之后在 renderer 里修改了 vc 的 view 获取逻辑后，可删除\n    this.refreshComponentMetasMap();\n    // 完成加载增量资源后发送事件，方便插件监听并处理相关逻辑\n    this.editor.eventBus.emit('designer.incrementalAssetsReady');\n  }\n\n  /**\n   * 刷新 componentMetasMap，可间接触发模拟器里的 buildComponents\n   */\n  refreshComponentMetasMap() {\n    this._componentMetasMap = new Map(this._componentMetasMap);\n  }\n\n  get(key: string): any {\n    return this.props?.[key];\n  }\n\n  @computed get simulatorComponent(): ComponentType<any> | undefined {\n    return this._simulatorComponent;\n  }\n\n  @computed get simulatorProps(): object {\n    if (typeof this._simulatorProps === 'function') {\n      return this._simulatorProps(this.project);\n    }\n    return this._simulatorProps || {};\n  }\n\n  /**\n   * 提供给模拟器的参数\n   */\n  @computed get projectSimulatorProps(): any {\n    return {\n      ...this.simulatorProps,\n      project: this.project,\n      designer: this,\n      onMount: (simulator: any) => {\n        this.project.mountSimulator(simulator);\n        this.editor.set('simulator', simulator);\n      },\n    };\n  }\n\n  get suspensed(): boolean {\n    return this._suspensed;\n  }\n\n  set suspensed(flag: boolean) {\n    this._suspensed = flag;\n    // Todo afterwards...\n    if (flag) {\n      // this.project.suspensed = true?\n    }\n  }\n\n  get schema(): IPublicTypeProjectSchema {\n    return this.project.getSchema();\n  }\n\n  setSchema(schema?: IPublicTypeProjectSchema) {\n    this.project.load(schema);\n  }\n\n  buildComponentMetasMap(metas: IPublicTypeComponentMetadata[]) {\n    metas.forEach((data) => this.createComponentMeta(data));\n  }\n\n  createComponentMeta(data: IPublicTypeComponentMetadata): IComponentMeta | null {\n    const key = data.componentName;\n    if (!key) {\n      return null;\n    }\n    let meta = this._componentMetasMap.get(key);\n    if (meta) {\n      meta.setMetadata(data);\n\n      this._componentMetasMap.set(key, meta);\n    } else {\n      meta = this._lostComponentMetasMap.get(key);\n\n      if (meta) {\n        meta.setMetadata(data);\n        this._lostComponentMetasMap.delete(key);\n      } else {\n        meta = new ComponentMeta(this, data);\n      }\n\n      this._componentMetasMap.set(key, meta);\n    }\n    return meta;\n  }\n\n  getGlobalComponentActions(): IPublicTypeComponentAction[] | null {\n    return this.props?.globalComponentActions || null;\n  }\n\n  getComponentMeta(\n    componentName: string,\n    generateMetadata?: () => IPublicTypeComponentMetadata | null,\n  ): IComponentMeta {\n    if (this._componentMetasMap.has(componentName)) {\n      return this._componentMetasMap.get(componentName)!;\n    }\n\n    if (this._lostComponentMetasMap.has(componentName)) {\n      return this._lostComponentMetasMap.get(componentName)!;\n    }\n\n    const meta = new ComponentMeta(this, {\n      componentName,\n      ...(generateMetadata ? generateMetadata() : null),\n    });\n\n    this._lostComponentMetasMap.set(componentName, meta);\n\n    return meta;\n  }\n\n  getComponentMetasMap() {\n    return this._componentMetasMap;\n  }\n\n  @computed get componentsMap(): { [key: string]: IPublicTypeNpmInfo | Component } {\n    const maps: any = {};\n    const designer = this;\n    designer._componentMetasMap.forEach((config, key) => {\n      const metaData = config.getMetadata();\n      if (metaData.devMode === 'lowCode') {\n        maps[key] = metaData.schema;\n      } else {\n        const { view } = config.advanced;\n        if (view) {\n          maps[key] = view;\n        } else {\n          maps[key] = config.npm;\n        }\n      }\n    });\n    return maps;\n  }\n\n  transformProps(props: IPublicTypeCompositeObject | IPublicTypePropsList, node: Node, stage: IPublicEnumTransformStage) {\n    if (Array.isArray(props)) {\n      // current not support, make this future\n      return props;\n    }\n\n    const reducers = this.propsReducers.get(stage);\n    if (!reducers) {\n      return props;\n    }\n\n    return reducers.reduce((xprops, reducer) => {\n      try {\n        return reducer(xprops, node.internalToShellNode() as any, { stage });\n      } catch (e) {\n        // todo: add log\n        console.warn(e);\n        return xprops;\n      }\n    }, props);\n  }\n\n  addPropsReducer(reducer: IPublicTypePropsTransducer, stage: IPublicEnumTransformStage) {\n    if (!reducer) {\n      logger.error('reducer is not available');\n      return;\n    }\n    const reducers = this.propsReducers.get(stage);\n    if (reducers) {\n      reducers.push(reducer);\n    } else {\n      this.propsReducers.set(stage, [reducer]);\n    }\n  }\n\n  autorun(effect: (reaction: IReactionPublic) => void, options?: IReactionOptions): IReactionDisposer {\n    return autorun(effect, options);\n  }\n\n  purge() {\n    // TODO:\n  }\n}\n","import { Component, ReactElement } from 'react';\nimport { observer, obx, Title, makeObservable } from '@alilc/lowcode-editor-core';\nimport { Designer } from '../designer';\nimport { isDragNodeObject } from '../dragon';\nimport { isSimulatorHost } from '../../simulator';\nimport './ghost.less';\nimport { IPublicTypeI18nData, IPublicTypeNodeSchema, IPublicModelDragObject } from '@alilc/lowcode-types';\n\ntype offBinding = () => any;\n\n@observer\nexport default class DragGhost extends Component<{ designer: Designer }> {\n  private dispose: offBinding[] = [];\n\n  @obx.ref private titles: (string | IPublicTypeI18nData | ReactElement)[] | null = null;\n\n  @obx.ref private x = 0;\n\n  @obx.ref private y = 0;\n\n  @obx private isAbsoluteLayoutContainer = false;\n\n  private dragon = this.props.designer.dragon;\n\n  constructor(props: any) {\n    super(props);\n    makeObservable(this);\n    this.dispose = [\n      this.dragon.onDragstart(e => {\n        if (e.originalEvent.type.slice(0, 4) === 'drag') {\n          return;\n        }\n        this.titles = this.getTitles(e.dragObject);\n        this.x = e.globalX;\n        this.y = e.globalY;\n      }),\n      this.dragon.onDrag(e => {\n        this.x = e.globalX;\n        this.y = e.globalY;\n        if (isSimulatorHost(e.sensor)) {\n          const container = e.sensor.getDropContainer(e);\n          if (container?.container.componentMeta.advanced.isAbsoluteLayoutContainer) {\n            this.isAbsoluteLayoutContainer = true;\n            return;\n          }\n        }\n        this.isAbsoluteLayoutContainer = false;\n      }),\n      this.dragon.onDragend(() => {\n        this.titles = null;\n        this.x = 0;\n        this.y = 0;\n      }),\n    ];\n  }\n\n  getTitles(dragObject: IPublicModelDragObject) {\n    if (isDragNodeObject(dragObject)) {\n      return dragObject.nodes.map((node) => node.title);\n    }\n\n    const dataList = Array.isArray(dragObject.data) ? dragObject.data : [dragObject.data];\n\n    return dataList.map((item: IPublicTypeNodeSchema, i) => (this.props.designer.getComponentMeta(item.componentName).title));\n  }\n\n  componentWillUnmount() {\n    if (this.dispose) {\n      this.dispose.forEach(off => off());\n    }\n  }\n\n  renderGhostGroup() {\n    return this.titles?.map((title, i) => {\n      const ghost = (\n        <div className=\"lc-ghost\" key={i}>\n          <Title title={title} />\n        </div>\n      );\n      return ghost;\n    });\n  }\n\n  render() {\n    if (!this.titles || !this.titles.length) {\n      return null;\n    }\n\n    if (this.isAbsoluteLayoutContainer) {\n      return null;\n    }\n\n    return (\n      <div\n        className=\"lc-ghost-group\"\n        style={{\n          left: this.x,\n          top: this.y,\n        }}\n      >\n        {this.renderGhostGroup()}\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport classNames from 'classnames';\nimport BuiltinDragGhostComponent from './drag-ghost';\nimport { Designer, DesignerProps } from './designer';\nimport { ProjectView } from '../project';\nimport './designer.less';\nimport { clipboard } from './clipboard';\n\ntype IProps = DesignerProps & {\n  designer?: Designer;\n};\n\nexport class DesignerView extends Component<IProps> {\n  readonly designer: Designer;\n  readonly viewName: string | undefined;\n\n  constructor(props: IProps) {\n    super(props);\n    const { designer, ...designerProps } = props;\n    this.viewName = designer?.viewName;\n    if (designer) {\n      this.designer = designer;\n      designer.setProps(designerProps);\n    } else {\n      this.designer = new Designer(designerProps);\n    }\n  }\n\n  shouldComponentUpdate(nextProps: DesignerProps) {\n    this.designer.setProps(nextProps);\n    const { props } = this;\n    if (\n      nextProps.className !== props.className ||\n      nextProps.style !== props.style ||\n      nextProps.dragGhostComponent !== props.dragGhostComponent\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  componentDidMount() {\n    const { onMount } = this.props;\n    if (onMount) {\n      onMount(this.designer);\n    }\n    clipboard.injectCopyPaster(document);\n    this.designer.postEvent('mount', this.designer);\n  }\n\n  UNSAFE_componentWillMount() {\n    this.designer.purge();\n  }\n\n  render() {\n    const { className, style, dragGhostComponent } = this.props;\n    const DragGhost = dragGhostComponent || BuiltinDragGhostComponent;\n\n    return (\n      <div className={classNames('lc-designer', className)} style={style}>\n        <DragGhost designer={this.designer} />\n        <ProjectView designer={this.designer} />\n      </div>\n    );\n  }\n}\n","import { isPlainObject } from 'lodash';\nimport { IPublicTypePluginRegisterOptions, IPublicTypePluginDeclaration } from '@alilc/lowcode-types';\n\nexport function isValidPreferenceKey(\n  key: string,\n  preferenceDeclaration: IPublicTypePluginDeclaration,\n): boolean {\n  if (!preferenceDeclaration || !Array.isArray(preferenceDeclaration.properties)) {\n    return false;\n  }\n  return preferenceDeclaration.properties.some((prop) => {\n    return prop.key === key;\n  });\n}\n\nexport function isLowCodeRegisterOptions(opts: any): opts is IPublicTypePluginRegisterOptions {\n  return opts && ('autoInit' in opts || 'override' in opts);\n}\n\nexport function filterValidOptions(\n    opts: any,\n    preferenceDeclaration: IPublicTypePluginDeclaration,\n  ) {\n  if (!opts || !isPlainObject(opts)) return opts;\n  const filteredOpts = {} as any;\n  Object.keys(opts).forEach((key) => {\n    if (isValidPreferenceKey(key, preferenceDeclaration)) {\n      const v = opts[key];\n      if (v !== undefined && v !== null) {\n        filteredOpts[key] = v;\n      }\n    }\n  });\n  return filteredOpts;\n}","/* eslint-disable no-multi-assign */\nimport { engineConfig, createModuleEventBus } from '@alilc/lowcode-editor-core';\nimport {\n  IPublicApiHotkey,\n  IPublicApiProject,\n  IPublicApiSkeleton,\n  IPublicApiSetters,\n  IPublicApiMaterial,\n  IPublicApiEvent,\n  IPublicApiCommon,\n  IPublicModelPluginContext,\n  IPluginPreferenceMananger,\n  IPublicTypePreferenceValueType,\n  IPublicModelEngineConfig,\n  IPublicApiLogger,\n  IPublicApiPlugins,\n  IPublicTypePluginDeclaration,\n  IPublicApiCanvas,\n} from '@alilc/lowcode-types';\nimport {\n  IPluginContextOptions,\n  ILowCodePluginContextApiAssembler,\n  ILowCodePluginContextPrivate,\n} from './plugin-types';\nimport { isValidPreferenceKey } from './plugin-utils';\n\n\nexport default class PluginContext implements IPublicModelPluginContext, ILowCodePluginContextPrivate {\n  hotkey: IPublicApiHotkey;\n  project: IPublicApiProject;\n  skeleton: IPublicApiSkeleton;\n  setters: IPublicApiSetters;\n  material: IPublicApiMaterial;\n  event: IPublicApiEvent;\n  config: IPublicModelEngineConfig;\n  common: IPublicApiCommon;\n  logger: IPublicApiLogger;\n  plugins: IPublicApiPlugins;\n  preference: IPluginPreferenceMananger;\n  pluginEvent: IPublicApiEvent;\n  canvas: IPublicApiCanvas;\n\n  constructor(\n      options: IPluginContextOptions,\n      contextApiAssembler: ILowCodePluginContextApiAssembler,\n    ) {\n    const { pluginName = 'anonymous', meta = {} } = options;\n    contextApiAssembler.assembleApis(this, pluginName, meta);\n    this.pluginEvent = createModuleEventBus(pluginName, 200);\n    const enhancePluginContextHook = engineConfig.get('enhancePluginContextHook');\n    if (enhancePluginContextHook) {\n      enhancePluginContextHook(this);\n    }\n  }\n\n  setPreference(\n    pluginName: string,\n    preferenceDeclaration: IPublicTypePluginDeclaration,\n  ): void {\n    const getPreferenceValue = (\n      key: string,\n      defaultValue?: IPublicTypePreferenceValueType,\n      ): IPublicTypePreferenceValueType | undefined => {\n      if (!isValidPreferenceKey(key, preferenceDeclaration)) {\n        return undefined;\n      }\n      const pluginPreference = this.plugins.getPluginPreference(pluginName) || {};\n      if (pluginPreference[key] === undefined || pluginPreference[key] === null) {\n        return defaultValue;\n      }\n      return pluginPreference[key];\n    };\n\n    this.preference = {\n      getPreferenceValue,\n    };\n  }\n}\n","import { getLogger, Logger } from '@alilc/lowcode-utils';\nimport {\n  ILowCodePluginRuntime,\n  ILowCodePluginManager,\n} from './plugin-types';\nimport {\n  IPublicTypePluginConfig,\n  IPublicTypePluginMeta,\n} from '@alilc/lowcode-types';\nimport { invariant } from '../utils';\n\nexport class LowCodePluginRuntime implements ILowCodePluginRuntime {\n  config: IPublicTypePluginConfig;\n\n  logger: Logger;\n\n  private manager: ILowCodePluginManager;\n\n  private _inited: boolean;\n\n  private pluginName: string;\n\n  meta: IPublicTypePluginMeta;\n\n  /**\n   * 标识插件状态，是否被 disabled\n   */\n  private _disabled: boolean;\n\n  constructor(\n    pluginName: string,\n    manager: ILowCodePluginManager,\n    config: IPublicTypePluginConfig,\n    meta: IPublicTypePluginMeta,\n  ) {\n    this.manager = manager;\n    this.config = config;\n    this.pluginName = pluginName;\n    this.meta = meta;\n    this.logger = getLogger({ level: 'warn', bizName: `plugin:${pluginName}` });\n  }\n\n  get name() {\n    return this.pluginName;\n  }\n\n  get dep() {\n    if (typeof this.meta.dependencies === 'string') {\n      return [this.meta.dependencies];\n    }\n    // compat legacy way to declare dependencies\n    const legacyDepValue = (this.config as any).dep;\n    if (typeof legacyDepValue === 'string') {\n      return [legacyDepValue];\n    }\n    return this.meta.dependencies || legacyDepValue || [];\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  isInited() {\n    return this._inited;\n  }\n\n  async init(forceInit?: boolean) {\n    if (this._inited && !forceInit) return;\n    this.logger.log('method init called');\n    await this.config.init?.call(undefined);\n    this._inited = true;\n  }\n\n  async destroy() {\n    if (!this._inited) return;\n    this.logger.log('method destroy called');\n    await this.config?.destroy?.call(undefined);\n    this._inited = false;\n  }\n\n  setDisabled(flag = true) {\n    this._disabled = flag;\n  }\n\n  toProxy() {\n    invariant(this._inited, 'Could not call toProxy before init');\n    const exports = this.config.exports?.();\n    return new Proxy(this, {\n      get(target, prop, receiver) {\n        if ({}.hasOwnProperty.call(exports, prop)) {\n          return exports?.[prop as string];\n        }\n        return Reflect.get(target, prop, receiver);\n      },\n    });\n  }\n\n  async dispose() {\n    await this.manager.delete(this.name);\n  }\n}\n","function sequence(tasks, names, results, missing, recursive, nest) {\n  names.forEach((name) => {\n    if (results.indexOf(name) !== -1) {\n      return; // de-dup results\n    }\n    const node = tasks[name];\n    if (!node) {\n      missing.push(name);\n    } else if (nest.indexOf(name) > -1) {\n      nest.push(name);\n      recursive.push(nest.slice(0));\n      nest.pop(name);\n    } else if (node.dep.length) {\n      nest.push(name);\n      sequence(tasks, node.dep, results, missing, recursive, nest); // recurse\n      nest.pop(name);\n    }\n    results.push(name);\n  });\n}\n\n// tasks: object with keys as task names\n// names: array of task names\nexport default function (tasks, names) {\n  let results = []; // the final sequence\n  const missing = []; // missing tasks\n  const recursive = []; // recursive task dependencies\n\n  sequence(tasks, names, results, missing, recursive, []);\n\n  if (missing.length || recursive.length) {\n    results = []; // results are incomplete at best, completely wrong at worst, remove them to avoid confusion\n  }\n\n  return {\n    sequence: results,\n    missingTasks: missing,\n    recursiveDependencies: recursive,\n  };\n}\n","import { engineConfig } from '@alilc/lowcode-editor-core';\nimport { getLogger } from '@alilc/lowcode-utils';\nimport {\n  ILowCodePluginRuntime,\n  ILowCodePluginManager,\n  IPluginContextOptions,\n  PluginPreference,\n  ILowCodePluginContextApiAssembler,\n} from './plugin-types';\nimport { filterValidOptions, isLowCodeRegisterOptions } from './plugin-utils';\nimport { LowCodePluginRuntime } from './plugin';\n// eslint-disable-next-line import/no-named-as-default\nimport LowCodePluginContext from './plugin-context';\nimport { invariant } from '../utils';\nimport sequencify from './sequencify';\nimport semverSatisfies from 'semver/functions/satisfies';\nimport {\n  IPublicTypePluginRegisterOptions,\n  IPublicTypePreferenceValueType,\n  IPublicTypePlugin,\n} from '@alilc/lowcode-types';\n\nconst logger = getLogger({ level: 'warn', bizName: 'designer:pluginManager' });\n\n// 保留的事件前缀\nconst RESERVED_EVENT_PREFIX = ['designer', 'editor', 'skeleton', 'renderer', 'render', 'utils', 'plugin', 'engine', 'editor-core', 'engine-core', 'plugins', 'event', 'events', 'log', 'logger', 'ctx', 'context'];\n\nexport class LowCodePluginManager implements ILowCodePluginManager {\n  private plugins: ILowCodePluginRuntime[] = [];\n\n  pluginsMap: Map<string, ILowCodePluginRuntime> = new Map();\n  pluginContextMap: Map<string, LowCodePluginContext> = new Map();\n\n  private pluginPreference?: PluginPreference = new Map();\n\n  contextApiAssembler: ILowCodePluginContextApiAssembler;\n\n  constructor(contextApiAssembler: ILowCodePluginContextApiAssembler, readonly viewName = 'global') {\n    this.contextApiAssembler = contextApiAssembler;\n  }\n\n  _getLowCodePluginContext = (options: IPluginContextOptions) => {\n    const { pluginName } = options;\n    let context = this.pluginContextMap.get(pluginName);\n    if (!context) {\n      context = new LowCodePluginContext(options, this.contextApiAssembler);\n      this.pluginContextMap.set(pluginName, context);\n    }\n    return context;\n  };\n\n  isEngineVersionMatched(versionExp: string): boolean {\n    const engineVersion = engineConfig.get('ENGINE_VERSION');\n    // ref: https://github.com/npm/node-semver#functions\n    // 1.0.1-beta should match '^1.0.0'\n    return semverSatisfies(engineVersion, versionExp, { includePrerelease: true });\n  }\n\n  /**\n   * register a plugin\n   * @param pluginConfigCreator - a creator function which returns the plugin config\n   * @param options - the plugin options\n   * @param registerOptions - the plugin register options\n   */\n  async register(\n    pluginModel: IPublicTypePlugin,\n    options?: any,\n    registerOptions?: IPublicTypePluginRegisterOptions,\n  ): Promise<void> {\n    // registerOptions maybe in the second place\n    if (isLowCodeRegisterOptions(options)) {\n      registerOptions = options;\n      options = {};\n    }\n    let { pluginName, meta = {} } = pluginModel;\n    const { preferenceDeclaration, engines } = meta;\n    // filter invalid eventPrefix\n    const { eventPrefix } = meta;\n    const isReservedPrefix = RESERVED_EVENT_PREFIX.find((item) => item === eventPrefix);\n    if (isReservedPrefix) {\n      meta.eventPrefix = undefined;\n      logger.warn(`plugin ${pluginName} is trying to use ${eventPrefix} as event prefix, which is a reserved event prefix, please use another one`);\n    }\n    const ctx = this._getLowCodePluginContext({ pluginName, meta });\n    const customFilterValidOptions = engineConfig.get('customPluginFilterOptions', filterValidOptions);\n    const config = pluginModel(ctx, customFilterValidOptions(options, preferenceDeclaration!));\n    // compat the legacy way to declare pluginName\n    // @ts-ignore\n    pluginName = pluginName || config.name;\n    invariant(\n      pluginName,\n      'pluginConfigCreator.pluginName required',\n      config,\n    );\n\n    ctx.setPreference(pluginName, preferenceDeclaration);\n\n    const allowOverride = registerOptions?.override === true;\n\n    if (this.pluginsMap.has(pluginName)) {\n      if (!allowOverride) {\n        throw new Error(`Plugin with name ${pluginName} exists`);\n      } else {\n        // clear existing plugin\n        const originalPlugin = this.pluginsMap.get(pluginName);\n        logger.log(\n          'plugin override, originalPlugin with name ',\n          pluginName,\n          ' will be destroyed, config:',\n          originalPlugin?.config,\n        );\n        originalPlugin?.destroy();\n        this.pluginsMap.delete(pluginName);\n      }\n    }\n\n    const engineVersionExp = engines && engines.lowcodeEngine;\n    if (engineVersionExp && !this.isEngineVersionMatched(engineVersionExp)) {\n      throw new Error(`plugin ${pluginName} skipped, engine check failed, current engine version is ${engineConfig.get('ENGINE_VERSION')}, meta.engines.lowcodeEngine is ${engineVersionExp}`);\n    }\n\n    const plugin = new LowCodePluginRuntime(pluginName, this, config, meta);\n    // support initialization of those plugins which registered\n    // after normal initialization by plugin-manager\n    if (registerOptions?.autoInit) {\n      await plugin.init();\n    }\n    this.plugins.push(plugin);\n    this.pluginsMap.set(pluginName, plugin);\n    logger.log(`plugin registered with pluginName: ${pluginName}, config: `, config, 'meta:', meta);\n  }\n\n  get(pluginName: string): ILowCodePluginRuntime | undefined {\n    return this.pluginsMap.get(pluginName);\n  }\n\n  getAll(): ILowCodePluginRuntime[] {\n    return this.plugins;\n  }\n\n  has(pluginName: string): boolean {\n    return this.pluginsMap.has(pluginName);\n  }\n\n  async delete(pluginName: string): Promise<boolean> {\n    const idx = this.plugins.findIndex((plugin) => plugin.name === pluginName);\n    if (idx === -1) return false;\n    const plugin = this.plugins[idx];\n    await plugin.destroy();\n\n    this.plugins.splice(idx, 1);\n    return this.pluginsMap.delete(pluginName);\n  }\n\n  async init(pluginPreference?: PluginPreference) {\n    const pluginNames: string[] = [];\n    const pluginObj: { [name: string]: ILowCodePluginRuntime } = {};\n    this.pluginPreference = pluginPreference;\n    this.plugins.forEach((plugin) => {\n      pluginNames.push(plugin.name);\n      pluginObj[plugin.name] = plugin;\n    });\n    const { missingTasks, sequence } = sequencify(pluginObj, pluginNames);\n    invariant(!missingTasks.length, 'plugin dependency missing', missingTasks);\n    logger.log('load plugin sequence:', sequence);\n\n    for (const pluginName of sequence) {\n      try {\n        await this.pluginsMap.get(pluginName)!.init();\n      } catch (e) /* istanbul ignore next */ {\n        logger.error(\n          `Failed to init plugin:${pluginName}, it maybe affect those plugins which depend on this.`,\n        );\n        logger.error(e);\n      }\n    }\n  }\n\n  async destroy() {\n    for (const plugin of this.plugins) {\n      await plugin.destroy();\n    }\n  }\n\n  get size() {\n    return this.pluginsMap.size;\n  }\n\n  getPluginPreference(pluginName: string): Record<string, IPublicTypePreferenceValueType> | null | undefined {\n    if (!this.pluginPreference) {\n      return null;\n    }\n    return this.pluginPreference.get(pluginName);\n  }\n\n  toProxy() {\n    return new Proxy(this, {\n      get(target, prop, receiver) {\n        if (target.pluginsMap.has(prop as string)) {\n          // 禁用态的插件，直接返回 undefined\n          if (target.pluginsMap.get(prop as string)!.disabled) {\n            return undefined;\n          }\n          return target.pluginsMap.get(prop as string)?.toProxy();\n        }\n        return Reflect.get(target, prop, receiver);\n      },\n    });\n  }\n\n  /* istanbul ignore next */\n  setDisabled(pluginName: string, flag = true) {\n    logger.warn(`plugin:${pluginName} has been set disable:${flag}`);\n    this.pluginsMap.get(pluginName)?.setDisabled(flag);\n  }\n\n  async dispose() {\n    await this.destroy();\n    this.plugins = [];\n    this.pluginsMap.clear();\n  }\n}\n","import {\n  Editor,\n  engineConfig, Setters as InnerSetters,\n  Hotkey as InnerHotkey,\n  commonEvent,\n} from '@alilc/lowcode-editor-core';\nimport {\n  Designer,\n  ILowCodePluginContextApiAssembler,\n  LowCodePluginManager,\n  ILowCodePluginContextPrivate,\n  Project as InnerProject,\n} from '@alilc/lowcode-designer';\nimport {\n  Skeleton as InnerSkeleton,\n} from '@alilc/lowcode-editor-skeleton';\nimport {\n  Hotkey,\n  Plugins,\n  Project,\n  Skeleton,\n  Setters,\n  Material,\n  Event,\n  Common,\n  Logger,\n  Workspace,\n  Canvas,\n} from '@alilc/lowcode-shell';\nimport {\n  IPluginPreferenceMananger,\n  IPublicApiEvent,\n  IPublicModelPluginContext,\n  IPublicTypePluginMeta,\n} from '@alilc/lowcode-types';\nimport { getLogger } from '@alilc/lowcode-utils';\nimport { Workspace as InnerWorkspace } from '../workspace';\nimport { EditorWindow } from '../window';\n\nexport class BasicContext implements IPublicModelPluginContext {\n  skeleton: Skeleton;\n  plugins: Plugins;\n  project: Project;\n  setters: Setters;\n  material: Material;\n  common: Common;\n  config;\n  event;\n  logger;\n  hotkey: Hotkey;\n  innerProject: InnerProject;\n  editor: Editor;\n  designer: Designer;\n  registerInnerPlugins: () => Promise<void>;\n  innerSetters: InnerSetters;\n  innerSkeleton: InnerSkeleton;\n  innerHotkey: InnerHotkey;\n  innerPlugins: LowCodePluginManager;\n  canvas: Canvas;\n  pluginEvent: IPublicApiEvent;\n  preference: IPluginPreferenceMananger;\n\n  constructor(innerWorkspace: InnerWorkspace, viewName: string, public editorWindow?: EditorWindow) {\n    const editor = new Editor(viewName, true);\n\n    const innerSkeleton = new InnerSkeleton(editor, viewName);\n    editor.set('skeleton' as any, innerSkeleton);\n\n    const designer: Designer = new Designer({\n      editor,\n      viewName,\n      shellModelFactory: innerWorkspace?.shellModelFactory,\n    });\n    editor.set('designer' as any, designer);\n\n    const { project: innerProject } = designer;\n    const workspace = new Workspace(innerWorkspace);\n    const innerHotkey = new InnerHotkey(viewName);\n    const hotkey = new Hotkey(innerHotkey, true);\n    const innerSetters = new InnerSetters(viewName);\n    const setters = new Setters(innerSetters, true);\n    const material = new Material(editor, true);\n    const project = new Project(innerProject, true);\n    const config = engineConfig;\n    const event = new Event(commonEvent, { prefix: 'common' });\n    const logger = getLogger({ level: 'warn', bizName: 'common' });\n    const skeleton = new Skeleton(innerSkeleton, 'any', true);\n    const canvas = new Canvas(editor, true);\n    editor.set('setters', setters);\n    editor.set('project', project);\n    editor.set('material', material);\n    editor.set('hotkey', hotkey);\n    editor.set('innerHotkey', innerHotkey);\n    this.innerSetters = innerSetters;\n    this.innerSkeleton = innerSkeleton;\n    this.skeleton = skeleton;\n    this.innerProject = innerProject;\n    this.project = project;\n    this.setters = setters;\n    this.material = material;\n    this.config = config;\n    this.event = event;\n    this.logger = logger;\n    this.hotkey = hotkey;\n    this.innerHotkey = innerHotkey;\n    this.editor = editor;\n    this.designer = designer;\n    this.canvas = canvas;\n    const common = new Common(editor, innerSkeleton);\n    this.common = common;\n    let plugins: any;\n\n    const pluginContextApiAssembler: ILowCodePluginContextApiAssembler = {\n      assembleApis: (context: ILowCodePluginContextPrivate, pluginName: string, meta: IPublicTypePluginMeta) => {\n        context.workspace = workspace;\n        context.hotkey = hotkey;\n        context.project = project;\n        context.skeleton = new Skeleton(innerSkeleton, pluginName, true);\n        context.setters = setters;\n        context.material = material;\n        const eventPrefix = meta?.eventPrefix || 'common';\n        context.event = new Event(commonEvent, { prefix: eventPrefix });\n        context.config = config;\n        context.common = common;\n        context.plugins = plugins;\n        context.logger = new Logger({ level: 'warn', bizName: `plugin:${pluginName}` });\n        context.canvas = canvas;\n      },\n    };\n\n    const innerPlugins = new LowCodePluginManager(pluginContextApiAssembler, viewName);\n    this.innerPlugins = innerPlugins;\n    plugins = new Plugins(innerPlugins, true).toProxy();\n    editor.set('plugins' as any, plugins);\n    editor.set('innerPlugins' as any, innerPlugins);\n    this.plugins = plugins;\n\n    // 注册一批内置插件\n    this.registerInnerPlugins = async function registerPlugins() {\n      await innerWorkspace?.registryInnerPlugin(designer, editor, plugins);\n    };\n  }\n}","import { IPublicModelPluginContext } from '@alilc/lowcode-types';\n\nexport function DesignerView(props: {\n  url: string;\n  viewName: string;\n}) {\n  return (\n    <div className=\"lc-designer lowcode-plugin-designer\">\n      <div className=\"lc-project\">\n        <div className=\"lc-simulator-shell\">\n          <iframe\n            name={`webview-view-${props.viewName}`}\n            className=\"lc-simulator-content-frame\"\n            style={{\n              height: '100%',\n              width: '100%',\n            }}\n            src={props.url}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function getWebviewPlugin(url: string, viewName: string) {\n  function webviewPlugin(ctx: IPublicModelPluginContext) {\n    const { skeleton } = ctx;\n    return {\n      init() {\n        skeleton.add({\n          area: 'mainArea',\n          name: 'designer',\n          type: 'Widget',\n          content: DesignerView,\n          contentProps: {\n            ctx,\n            url,\n            viewName,\n          },\n        });\n      },\n    };\n  }\n\n  webviewPlugin.pluginName = '___webview_plugin___';\n\n  return webviewPlugin;\n}\n","import { computed, makeObservable, obx } from '@alilc/lowcode-editor-core';\nimport { IPublicEditorViewConfig, IPublicTypeEditorView } from '@alilc/lowcode-types';\nimport { flow } from 'mobx';\nimport { Workspace as InnerWorkspace } from '../workspace';\nimport { BasicContext } from './base-context';\nimport { EditorWindow } from '../window';\nimport { getWebviewPlugin } from '../inner-plugins/webview';\n\nexport class Context extends BasicContext {\n  viewName = 'editor-view';\n\n  instance: IPublicEditorViewConfig;\n\n  viewType: 'editor' | 'webview';\n\n  @obx _activate = false;\n\n  @obx isInit: boolean = false;\n\n  @computed get active() {\n    return this._activate;\n  }\n\n  init = flow(function* (this: any) {\n    if (this.viewType === 'webview') {\n      const url = yield this.instance?.url?.();\n      yield this.plugins.register(getWebviewPlugin(url, this.viewName));\n    } else {\n      yield this.registerInnerPlugins();\n    }\n    yield this.instance?.init?.();\n    yield this.innerPlugins.init();\n    this.isInit = true;\n  });\n\n  constructor(public workspace: InnerWorkspace, public editorWindow: EditorWindow, public editorView: IPublicTypeEditorView, options: Object | undefined) {\n    super(workspace, editorView.viewName, editorWindow);\n    this.viewType = editorView.viewType || 'editor';\n    this.viewName = editorView.viewName;\n    this.instance = editorView(this.innerPlugins._getLowCodePluginContext({\n      pluginName: 'any',\n    }), options);\n    makeObservable(this);\n  }\n\n  setActivate = (_activate: boolean) => {\n    this._activate = _activate;\n    this.innerHotkey.activate(this._activate);\n  };\n\n  async save() {\n    return await this.instance?.save?.();\n  }\n}","import { uniqueId } from '@alilc/lowcode-utils';\nimport { createModuleEventBus, IEventBus, makeObservable, obx } from '@alilc/lowcode-editor-core';\nimport { Context } from './context/view-context';\nimport { Workspace } from './workspace';\nimport { Resource } from './resource';\nimport { IPublicTypeDisposable } from '../../types/es/shell/type/disposable';\n\ninterface IWindowCOnfig {\n  title: string | undefined;\n  options?: Object;\n  viewType?: string | undefined;\n}\n\nexport class EditorWindow {\n  id: string = uniqueId('window');\n  icon: React.ReactElement | undefined;\n\n  private emitter: IEventBus = createModuleEventBus('Project');\n\n  title: string | undefined;\n\n  url: string | undefined;\n\n  @obx.ref editorView: Context;\n\n  @obx editorViews: Map<string, Context> = new Map<string, Context>();\n\n  @obx initReady = false;\n\n  constructor(readonly resource: Resource, readonly workspace: Workspace, private config: IWindowCOnfig) {\n    makeObservable(this);\n    this.init();\n    this.title = config.title;\n    this.icon = resource.icon;\n  }\n\n  async importSchema(schema: any) {\n    const newSchema = await this.resource.import(schema);\n\n    if (!newSchema) {\n      return;\n    }\n\n    Object.keys(newSchema).forEach(key => {\n      const view = this.editorViews.get(key);\n      view?.project.importSchema(newSchema[key]);\n    });\n  }\n\n  async save() {\n    const value: any = {};\n    const editorViews = this.resource.editorViews;\n    for (let i = 0; i < editorViews.length; i++) {\n      const name = editorViews[i].viewName;\n      const saveResult = await this.editorViews.get(name)?.save();\n      value[name] = saveResult;\n    }\n    return await this.resource.save(value);\n  }\n\n  async init() {\n    await this.initViewTypes();\n    await this.execViewTypesInit();\n    this.url = await this.resource.url();\n    this.setDefaultViewType();\n    this.initReady = true;\n  }\n\n  initViewTypes = async () => {\n    const editorViews = this.resource.editorViews;\n    if (!editorViews) {\n      return;\n    }\n    for (let i = 0; i < editorViews.length; i++) {\n      const name = editorViews[i].viewName;\n      await this.initViewType(name);\n      if (!this.editorView) {\n        this.changeViewType(name);\n      }\n    }\n  };\n\n  onChangeViewType(fn: (viewName: string) => void): IPublicTypeDisposable {\n    this.emitter.on('window.change.view.type', fn);\n\n    return () => {\n      this.emitter.off('window.change.view.type', fn);\n    };\n  }\n\n  execViewTypesInit = async () => {\n    const editorViews = this.resource.editorViews;\n    if (!editorViews) {\n      return;\n    }\n    for (let i = 0; i < editorViews.length; i++) {\n      const name = editorViews[i].viewName;\n      this.changeViewType(name);\n      await this.editorViews.get(name)?.init();\n    }\n  };\n\n  setDefaultViewType = () => {\n    this.changeViewType(this.config.viewType ?? this.resource.defaultViewType);\n  };\n\n  get resourceType() {\n    return this.resource.resourceType.type;\n  }\n\n  initViewType = async (name: string) => {\n    const viewInfo = this.resource.getEditorView(name);\n    if (this.editorViews.get(name)) {\n      return;\n    }\n    const editorView = new Context(this.workspace, this, viewInfo as any, this.config.options);\n    this.editorViews.set(name, editorView);\n  };\n\n  changeViewType = (name: string, ignoreEmit: boolean = true) => {\n    this.editorView?.setActivate(false);\n    this.editorView = this.editorViews.get(name)!;\n\n    if (!this.editorView) {\n      return;\n    }\n\n    if (!ignoreEmit) {\n      this.emitter.emit('window.change.view.type', name);\n    }\n    this.editorView.setActivate(true);\n  };\n\n  get project() {\n    return this.editorView?.project;\n  }\n\n  get innerProject() {\n    return this.editorView?.innerProject;\n  }\n\n  get innerSkeleton() {\n    return this.editorView?.innerSkeleton;\n  }\n\n  get innerSetters() {\n    return this.editorView?.innerSetters;\n  }\n\n  get innerHotkey() {\n    return this.editorView?.innerHotkey;\n  }\n\n  get editor() {\n    return this.editorView?.editor;\n  }\n\n  get designer() {\n    return this.editorView?.designer;\n  }\n\n  get innerPlugins() {\n    return this.editorView?.innerPlugins;\n  }\n}","import { IPublicTypeEditorView, IPublicModelResource, IPublicResourceData, IPublicResourceTypeConfig } from '@alilc/lowcode-types';\nimport { Logger } from '@alilc/lowcode-utils';\nimport { BasicContext } from './context/base-context';\nimport { ResourceType } from './resource-type';\nimport { Workspace as InnerWorkSpace } from './workspace';\n\nconst logger = new Logger({ level: 'warn', bizName: 'workspace:resource' });\n\nexport class Resource implements IPublicModelResource {\n  private context: BasicContext;\n\n  resourceTypeInstance: IPublicResourceTypeConfig;\n\n  editorViewMap: Map<string, IPublicTypeEditorView> = new Map<string, IPublicTypeEditorView>();\n\n  get name() {\n    return this.resourceType.name;\n  }\n\n  get viewType() {\n    return this.resourceData.viewType;\n  }\n\n  get description() {\n    return this.resourceTypeInstance?.description;\n  }\n\n  get icon() {\n    return this.resourceData.icon || this.resourceTypeInstance?.icon;\n  }\n\n  get type() {\n    return this.resourceType.type;\n  }\n\n  get title(): string | undefined {\n    return this.resourceData.title || this.resourceTypeInstance.defaultTitle;\n  }\n\n  get options() {\n    return this.resourceData.options;\n  }\n\n  get category() {\n    return this.resourceData?.category;\n  }\n\n  get skeleton() {\n    return this.context.innerSkeleton;\n  }\n\n  get children(): Resource[] {\n    return this.resourceData?.children?.map(d => new Resource(d, this.resourceType, this.workspace)) || [];\n  }\n\n  constructor(readonly resourceData: IPublicResourceData, readonly resourceType: ResourceType, readonly workspace: InnerWorkSpace) {\n    this.context = new BasicContext(workspace, `resource-${resourceData.resourceName || resourceType.name}`);\n    this.resourceTypeInstance = resourceType.resourceTypeModel(this.context, this.options);\n    this.init();\n    if (this.resourceTypeInstance.editorViews) {\n      this.resourceTypeInstance.editorViews.forEach((d: any) => {\n        this.editorViewMap.set(d.viewName, d);\n      });\n    }\n    if (!resourceType) {\n      logger.error(`resourceType[${resourceType}] is unValid.`);\n    }\n  }\n\n  async init() {\n    await this.resourceTypeInstance.init?.();\n    await this.context.innerPlugins.init();\n  }\n\n  async import(schema: any) {\n    return await this.resourceTypeInstance.import?.(schema);\n  }\n\n  async url() {\n    return await this.resourceTypeInstance.url?.();\n  }\n\n  async save(value: any) {\n    return await this.resourceTypeInstance.save?.(value);\n  }\n\n  get editorViews() {\n    return this.resourceTypeInstance.editorViews;\n  }\n\n  get defaultViewType() {\n    return this.resourceTypeInstance.defaultViewType;\n  }\n\n  getEditorView(name: string) {\n    return this.editorViewMap.get(name);\n  }\n}","import { IPublicTypeResourceType } from '@alilc/lowcode-types';\n\nexport class ResourceType {\n  constructor(readonly resourceTypeModel: IPublicTypeResourceType) {\n  }\n\n  get name() {\n    return this.resourceTypeModel.resourceName;\n  }\n\n  get type() {\n    return this.resourceTypeModel.resourceType;\n  }\n}","import { Designer } from '@alilc/lowcode-designer';\nimport { createModuleEventBus, Editor, IEventBus, makeObservable, obx } from '@alilc/lowcode-editor-core';\nimport { Plugins } from '@alilc/lowcode-shell';\nimport { IPublicApiWorkspace, IPublicResourceList, IPublicTypeResourceType } from '@alilc/lowcode-types';\nimport { BasicContext } from './context/base-context';\nimport { EditorWindow } from './window';\nimport { Resource } from './resource';\nimport { ResourceType } from './resource-type';\n\nenum event {\n  ChangeWindow = 'change_window',\n\n  ChangeActiveWindow = 'change_active_window',\n}\n\nconst CHANGE_EVENT = 'resource.list.change';\n\nexport class Workspace implements IPublicApiWorkspace {\n  context: BasicContext;\n\n  private emitter: IEventBus = createModuleEventBus('workspace');\n\n  private _isActive = false;\n\n  private resourceTypeMap: Map<string, ResourceType> = new Map();\n\n  private resourceList: Resource[] = [];\n\n  get skeleton() {\n    return this.context.innerSkeleton;\n  }\n\n  get plugins() {\n    return this.context.innerPlugins;\n  }\n\n  get isActive() {\n    return this._isActive;\n  }\n\n  get defaultResourceType(): ResourceType | null {\n    if (this.resourceTypeMap.size >= 1) {\n      return Array.from(this.resourceTypeMap.values())[0];\n    }\n\n    return null;\n  }\n\n  @obx.ref windows: EditorWindow[] = [];\n\n  editorWindowMap: Map<string, EditorWindow> = new Map<string, EditorWindow>();\n\n  @obx.ref window: EditorWindow;\n\n  constructor(\n    readonly registryInnerPlugin: (designer: Designer, editor: Editor, plugins: Plugins) => Promise<void>,\n    readonly shellModelFactory: any,\n  ) {\n    this.init();\n    makeObservable(this);\n  }\n\n  init() {\n    this.initWindow();\n    this.context = new BasicContext(this, '');\n  }\n\n  initWindow() {\n    if (!this.defaultResourceType) {\n      return;\n    }\n    const title = this.defaultResourceType.name;\n    const resource = new Resource({}, this.defaultResourceType, this);\n    this.window = new EditorWindow(resource, this, {\n      title,\n    });\n    this.editorWindowMap.set(this.window.id, this.window);\n    this.windows.push(this.window);\n    this.emitChangeWindow();\n    this.emitChangeActiveWindow();\n  }\n\n  setActive(value: boolean) {\n    this._isActive = value;\n  }\n\n  async registerResourceType(resourceTypeModel: IPublicTypeResourceType): Promise<void> {\n    const resourceType = new ResourceType(resourceTypeModel);\n    this.resourceTypeMap.set(resourceTypeModel.resourceName, resourceType);\n\n    if (!this.window && this.defaultResourceType) {\n      this.initWindow();\n    }\n  }\n\n  getResourceList() {\n    return this.resourceList;\n  }\n\n  setResourceList(resourceList: IPublicResourceList) {\n    this.resourceList = resourceList.map(d => new Resource(d, this.getResourceType(d.resourceName), this));\n    this.emitter.emit(CHANGE_EVENT, resourceList);\n  }\n\n  onResourceListChange(fn: (resourceList: IPublicResourceList) => void): () => void {\n    this.emitter.on(CHANGE_EVENT, fn);\n    return () => {\n      this.emitter.off(CHANGE_EVENT, fn);\n    };\n  }\n\n  getResourceType(resourceName: string): ResourceType {\n    return this.resourceTypeMap.get(resourceName)!;\n  }\n\n  removeResourceType(resourceName: string) {\n    if (this.resourceTypeMap.has(resourceName)) {\n      this.resourceTypeMap.delete(resourceName);\n    }\n  }\n\n  removeEditorWindowById(id: string) {\n    const index = this.windows.findIndex(d => (d.id === id));\n    this.remove(index);\n  }\n\n  private remove(index: number) {\n    const window = this.windows[index];\n    this.windows.splice(index, 1);\n    if (this.window === window) {\n      this.window = this.windows[index] || this.windows[index + 1] || this.windows[index - 1];\n      this.emitChangeActiveWindow();\n    }\n    this.emitChangeWindow();\n  }\n\n  removeEditorWindow(resourceName: string, title: string) {\n    const index = this.windows.findIndex(d => (d.resource.name === resourceName && d.title));\n    this.remove(index);\n  }\n\n  openEditorWindowById(id: string) {\n    const window = this.editorWindowMap.get(id);\n    if (window) {\n      this.window = window;\n      this.emitChangeActiveWindow();\n    }\n  }\n\n  openEditorWindow(name: string, title: string, options: Object, viewType?: string) {\n    const resourceType = this.resourceTypeMap.get(name);\n    if (!resourceType) {\n      console.error(`${name} resourceType is not available`);\n      return;\n    }\n    const filterWindows = this.windows.filter(d => (d.resource.name === name && d.resource.title == title));\n    if (filterWindows && filterWindows.length) {\n      this.window = filterWindows[0];\n      this.emitChangeActiveWindow();\n      return;\n    }\n    const resource = new Resource({\n      resourceName: name,\n      title,\n      options,\n    }, resourceType, this);\n    this.window = new EditorWindow(resource, this, {\n      title,\n      options,\n      viewType,\n    });\n    this.windows = [...this.windows, this.window];\n    this.editorWindowMap.set(this.window.id, this.window);\n    this.emitChangeWindow();\n    this.emitChangeActiveWindow();\n  }\n\n  onChangeWindows(fn: () => void) {\n    this.emitter.on(event.ChangeWindow, fn);\n    return () => {\n      this.emitter.removeListener(event.ChangeWindow, fn);\n    };\n  }\n\n  emitChangeWindow() {\n    this.emitter.emit(event.ChangeWindow);\n  }\n\n  emitChangeActiveWindow() {\n    this.emitter.emit(event.ChangeActiveWindow);\n  }\n\n  onChangeActiveWindow(fn: () => void) {\n    this.emitter.on(event.ChangeActiveWindow, fn);\n    return () => {\n      this.emitter.removeListener(event.ChangeActiveWindow, fn);\n    };\n  }\n}\n","import { BuiltinLoading } from '@alilc/lowcode-designer';\nimport { engineConfig, observer } from '@alilc/lowcode-editor-core';\nimport {\n  Workbench,\n} from '@alilc/lowcode-editor-skeleton';\nimport { PureComponent } from 'react';\nimport { Context } from '../context/view-context';\n\nexport * from '../context/base-context';\n\n@observer\nexport class EditorView extends PureComponent<{\n  editorView: Context;\n  active: boolean;\n}, any> {\n  render() {\n    const { active } = this.props;\n    const editorView = this.props.editorView;\n    const skeleton = editorView.innerSkeleton;\n    if (!editorView.isInit) {\n      const Loading = engineConfig.get('loadingComponent', BuiltinLoading);\n      return <Loading />;\n    }\n\n    return (\n      <Workbench\n        skeleton={skeleton}\n        className={active ? 'active engine-editor-view' : 'engine-editor-view'}\n        topAreaItemClassName=\"engine-actionitem\"\n      />\n    );\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '@alilc/lowcode-editor-skeleton';\n\n@observer\nexport default class TopArea extends Component<{ area: Area; itemClassName?: string }> {\n  render() {\n    const { area, itemClassName } = this.props;\n\n    if (area.isEmpty()) {\n      return null;\n    }\n\n    return (\n      <div className={classNames('lc-top-area engine-actionpane', {\n        'lc-area-visible': area.visible,\n      })}\n      >\n        <Contents area={area} itemClassName={itemClassName} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area; itemClassName?: string }> {\n  render() {\n    const { area, itemClassName } = this.props;\n    const left: any[] = [];\n    const center: any[] = [];\n    const right: any[] = [];\n    area.container.items.slice().sort((a, b) => {\n      const index1 = a.config?.index || 0;\n      const index2 = b.config?.index || 0;\n      return index1 === index2 ? 0 : (index1 > index2 ? 1 : -1);\n    }).forEach(item => {\n      const content = (\n        <div className={itemClassName || ''} key={`top-area-${item.name}`}>\n          {item.content}\n        </div>\n      );\n      if (item.align === 'center') {\n        center.push(content);\n      } else if (item.align === 'left') {\n        left.push(content);\n      } else {\n        right.push(content);\n      }\n    });\n\n    return (\n      <Fragment>\n        <div className=\"lc-top-area-left\">{left}</div>\n        <div className=\"lc-top-area-center\">{center}</div>\n        <div className=\"lc-top-area-right\">{right}</div>\n      </Fragment>\n    );\n  }\n}\n","import { PureComponent } from 'react';\nimport { EditorView } from './editor-view';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport TopArea from '../layouts/top-area';\nimport { Resource } from '../resource';\nimport { EditorWindow } from '../window';\nimport './resource-view.less';\n\n@observer\nexport class ResourceView extends PureComponent<{\n  window: EditorWindow;\n  resource: Resource;\n}, any> {\n  render() {\n    const { skeleton } = this.props.resource;\n    const { editorViews } = this.props.window;\n    return (\n      <div className=\"workspace-resource-view\">\n        <TopArea area={skeleton.topArea} itemClassName=\"engine-actionitem\" />\n        <div className=\"workspace-editor-body\">\n          {\n            Array.from(editorViews.values()).map((editorView: any) => {\n              return (\n                <EditorView\n                  key={editorView.name}\n                  active={editorView.active}\n                  editorView={editorView}\n                />\n              );\n            })\n          }\n        </div>\n      </div>\n    );\n  }\n}","import { PureComponent } from 'react';\nimport { ResourceView } from './resource-view';\nimport { engineConfig, observer } from '@alilc/lowcode-editor-core';\nimport { EditorWindow } from '../window';\nimport { BuiltinLoading } from '@alilc/lowcode-designer';\nimport { DesignerView } from '../inner-plugins/webview';\n\n@observer\nexport class WindowView extends PureComponent<{\n  window: EditorWindow;\n  active: boolean;\n}, any> {\n  render() {\n    const { active } = this.props;\n    const { resource, initReady, url } = this.props.window;\n\n    if (!initReady) {\n      const Loading = engineConfig.get('loadingComponent', BuiltinLoading);\n      return (\n        <div className={`workspace-engine-main ${active ? 'active' : ''}`}>\n          <Loading />\n        </div>\n      );\n    }\n\n    if (resource.type === 'webview' && url) {\n      return <DesignerView url={url} viewName={resource.name} />;\n    }\n\n    return (\n      <div className={`workspace-engine-main ${active ? 'active' : ''}`}>\n        <ResourceView\n          resource={resource}\n          window={this.props.window}\n        />\n      </div>\n    );\n  }\n}","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '@alilc/lowcode-editor-skeleton';\n\n@observer\nexport default class LeftArea extends Component<{ area: Area }> {\n  render() {\n    const { area } = this.props;\n    if (area.isEmpty()) {\n      return null;\n    }\n    return (\n      <div className={classNames('lc-left-area', {\n        'lc-area-visible': area.visible,\n      })}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n\n@observer\nclass Contents extends Component<{ area: Area }> {\n  render() {\n    const { area } = this.props;\n    const top: any[] = [];\n    const bottom: any[] = [];\n    area.container.items.slice().sort((a, b) => {\n      const index1 = a.config?.index || 0;\n      const index2 = b.config?.index || 0;\n      return index1 === index2 ? 0 : (index1 > index2 ? 1 : -1);\n    }).forEach((item) => {\n      const content = <div key={`left-area-${item.name}`}>{item.content}</div>;\n      if (item.align === 'bottom') {\n        bottom.push(content);\n      } else {\n        top.push(content);\n      }\n    });\n    return (\n      <Fragment>\n        <div className=\"lc-left-area-top\">{top}</div>\n        <div className=\"lc-left-area-bottom\">{bottom}</div>\n      </Fragment>\n    );\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area, Panel, PanelConfig } from '@alilc/lowcode-editor-skeleton';\n\n@observer\nexport default class LeftFixedPane extends Component<{ area: Area<PanelConfig, Panel> }> {\n  componentDidUpdate() {\n    // FIXME: dirty fix, need deep think\n    this.props.area.skeleton.editor.get('designer')?.touchOffsetObserver();\n  }\n\n\n  render() {\n    const { area } = this.props;\n    const width = area.current?.config.props?.width;\n    const style = width\n      ? {\n        width,\n      }\n      : undefined;\n\n    return (\n      <div\n        className={classNames('lc-left-fixed-pane', {\n          'lc-area-visible': area.visible,\n        })}\n        style={style}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area<PanelConfig, Panel> }> {\n  render() {\n    const { area } = this.props;\n    return <Fragment>{area.container.items.map((panel) => panel.content)}</Fragment>;\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer, Focusable, focusTracker } from '@alilc/lowcode-editor-core';\nimport { Area, Panel } from '@alilc/lowcode-editor-skeleton';\n\n@observer\nexport default class LeftFloatPane extends Component<{ area: Area<any, Panel> }> {\n  private dispose?: () => void;\n\n  private focusing?: Focusable;\n\n  private shell: HTMLElement | null = null;\n\n  componentDidMount() {\n    const { area } = this.props;\n    const triggerClose = (e: any) => {\n      if (!area.visible) return;\n      // 当 MouseEvent 的 target 为「插入占位符」时，不关闭当前 panel\n      if (e.originalEvent?.target?.classList.contains('insertion')) return;\n      // 假如当前操作 target 祖先节点中有属性 data-keep-visible-while-dragging=\"true\" 代表该 target 所属 panel\n      // 不希望 target 在 panel 范围内拖拽时关闭 panel\n      const panelElem = e.originalEvent?.target.closest('div[data-keep-visible-while-dragging=\"true\"]');\n      if (panelElem) return;\n      area.setVisible(false);\n    };\n    area.skeleton.editor.eventBus.on('designer.drag', triggerClose);\n\n    this.dispose = () => {\n      area.skeleton.editor.removeListener('designer.drag', triggerClose);\n    };\n\n    this.focusing = focusTracker.create({\n      range: (e) => {\n        const target = e.target as HTMLElement;\n        if (!target) {\n          return false;\n        }\n        if (this.shell?.contains(target)) {\n          return true;\n        }\n        // 点击了 iframe 内容，算失焦\n        if ((document.querySelector('.lc-simulator-content-frame') as HTMLIFrameElement)?.contentWindow?.document.documentElement.contains(target)) {\n          return false;\n        }\n        // 点击设置区\n        if (document.querySelector('.lc-right-area')?.contains(target)) {\n          return false;\n        }\n        // 点击非编辑区域的popup/dialog,插件栏左侧等不触发失焦\n        if (!document.querySelector('.lc-workbench')?.contains(target)) {\n          return true;\n        }\n        // 排除设置区，iframe 之后，都不算失焦\n        if (document.querySelector('.lc-workbench-body')?.contains(target)) {\n          return true;\n        }\n        const docks = area.current?.getAssocDocks();\n        if (docks && docks?.length) {\n          return docks.some(dock => dock.getDOMNode()?.contains(target));\n        }\n        return false;\n      },\n      onEsc: () => {\n        this.props.area.setVisible(false);\n      },\n      onBlur: () => {\n        this.props.area.setVisible(false);\n      },\n    });\n\n    this.onEffect();\n  }\n\n  onEffect() {\n    const { area } = this.props;\n    if (area.visible) {\n      this.focusing?.active();\n      // 关闭当前fixed区域的面板\n      // TODO: 看看有没有更合适的地方\n      const fixedContainer = area?.skeleton?.leftFixedArea?.container;\n      const currentFixed = fixedContainer?.current;\n      if (currentFixed) {\n        fixedContainer.unactive(currentFixed);\n      }\n    } else {\n      this.focusing?.suspense();\n    }\n  }\n\n  componentDidUpdate() {\n    this.onEffect();\n  }\n\n  componentWillUnmount() {\n    this.focusing?.purge();\n    this.dispose?.();\n  }\n\n  render() {\n    const { area } = this.props;\n    const width = area.current?.config.props?.width;\n\n    const style = width ? {\n      width,\n    } : undefined;\n    return (\n      <div\n        ref={(ref) => { this.shell = ref; }}\n        className={classNames('lc-left-float-pane', {\n          'lc-area-visible': area.visible,\n        })}\n        style={style}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area<any, Panel> }> {\n  render() {\n    const { area } = this.props;\n    return (\n      <Fragment>\n        {area.container.items.map((panel) => panel.content)}\n      </Fragment>\n    );\n  }\n}\n","import { Component } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area, Panel, Widget } from '@alilc/lowcode-editor-skeleton';\n\n@observer\nexport default class MainArea extends Component<{ area: Area<any, Panel | Widget> }> {\n  render() {\n    const { area } = this.props;\n    return (\n      <div className={classNames('lc-main-area engine-workspacepane')}>\n        {area.container.items.map((item) => item.content)}\n      </div>\n    );\n  }\n}\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area, Panel } from '@alilc/lowcode-editor-skeleton';\n\n@observer\nexport default class BottomArea extends Component<{ area: Area<any, Panel> }> {\n  render() {\n    const { area } = this.props;\n    if (area.isEmpty()) {\n      return null;\n    }\n    return (\n      <div className={classNames('lc-bottom-area', {\n        'lc-area-visible': area.visible,\n      })}\n      >\n        <Contents area={area} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area<any, Panel> }> {\n  render() {\n    const { area } = this.props;\n    return (\n      <Fragment>\n        {area.container.items.map((item) => item.content)}\n      </Fragment>\n    );\n  }\n}\n","import { createContext } from 'react';\n\nexport const SkeletonContext = createContext<any>({} as any);\n","import { Component, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@alilc/lowcode-editor-core';\nimport { Area } from '@alilc/lowcode-editor-skeleton';\n\n@observer\nexport default class SubTopArea extends Component<{ area: Area; itemClassName?: string }> {\n  render() {\n    const { area, itemClassName } = this.props;\n\n    if (area.isEmpty()) {\n      return null;\n    }\n\n    return (\n      <div className={classNames('lc-sub-top-area engine-actionpane', {\n        'lc-area-visible': area.visible,\n      })}\n      >\n        <Contents area={area} itemClassName={itemClassName} />\n      </div>\n    );\n  }\n}\n\n@observer\nclass Contents extends Component<{ area: Area; itemClassName?: string }> {\n  render() {\n    const { area, itemClassName } = this.props;\n    const left: any[] = [];\n    const center: any[] = [];\n    const right: any[] = [];\n    area.container.items.slice().sort((a, b) => {\n      const index1 = a.config?.index || 0;\n      const index2 = b.config?.index || 0;\n      return index1 === index2 ? 0 : (index1 > index2 ? 1 : -1);\n    }).forEach(item => {\n      const content = (\n        <div className={itemClassName || ''} key={`top-area-${item.name}`}>\n          {item.content}\n        </div>\n      );\n      if (item.align === 'center') {\n        center.push(content);\n      } else if (item.align === 'left') {\n        left.push(content);\n      } else {\n        right.push(content);\n      }\n    });\n    let children = [];\n    if (left && left.length) {\n      children.push(<div className=\"lc-sub-top-area-left\">{left}</div>);\n    }\n    if (center && center.length) {\n      children.push(<div className=\"lc-sub-top-area-center\">{center}</div>);\n    }\n    if (right && right.length) {\n      children.push(<div className=\"lc-sub-top-area-right\">{right}</div>);\n    }\n    return (\n      <Fragment>\n        {children}\n      </Fragment>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { TipContainer, observer } from '@alilc/lowcode-editor-core';\nimport { WindowView } from '../view/window-view';\nimport classNames from 'classnames';\nimport TopArea from './top-area';\nimport LeftArea from './left-area';\nimport LeftFixedPane from './left-fixed-pane';\nimport LeftFloatPane from './left-float-pane';\nimport MainArea from './main-area';\nimport BottomArea from './bottom-area';\nimport './workbench.less';\nimport { SkeletonContext } from '../skeleton-context';\nimport { EditorConfig, PluginClassSet } from '@alilc/lowcode-types';\nimport { Workspace } from '../workspace';\nimport SubTopArea from './sub-top-area';\n\n@observer\nexport class Workbench extends Component<{\n  workspace: Workspace;\n  config?: EditorConfig;\n  components?: PluginClassSet;\n  className?: string;\n  topAreaItemClassName?: string;\n}> {\n  constructor(props: any) {\n    super(props);\n    const { config, components, workspace } = this.props;\n    const { skeleton } = workspace;\n    skeleton.buildFromConfig(config, components);\n  }\n\n  render() {\n    const { workspace, className, topAreaItemClassName } = this.props;\n    const { skeleton } = workspace;\n    return (\n      <div className={classNames('lc-workspace-workbench', className)}>\n        <SkeletonContext.Provider value={skeleton}>\n          <TopArea area={skeleton.topArea} itemClassName={topAreaItemClassName} />\n          <div className=\"lc-workspace-workbench-body\">\n            <LeftArea area={skeleton.leftArea} />\n            <LeftFloatPane area={skeleton.leftFloatArea} />\n            <LeftFixedPane area={skeleton.leftFixedArea} />\n            <div className=\"lc-workspace-workbench-center\">\n              <div className=\"lc-workspace-workbench-center-content\">\n                <SubTopArea area={skeleton.subTopArea} itemClassName={topAreaItemClassName} />\n                <div className=\"lc-workspace-workbench-window\">\n                  {\n                    workspace.windows.map(d => (\n                      <WindowView\n                        active={d.id === workspace.window.id}\n                        window={d}\n                        key={d.id}\n                      />\n                    ))\n                  }\n                </div>\n              </div>\n              <MainArea area={skeleton.mainArea} />\n              <BottomArea area={skeleton.bottomArea} />\n            </div>\n            {/* <RightArea area={skeleton.rightArea} /> */}\n          </div>\n          <TipContainer />\n        </SkeletonContext.Provider>\n      </div>\n    );\n  }\n}\n","import { EditingTarget, Node as DocNode, SaveHandler, LiveEditing } from '@alilc/lowcode-designer';\nimport { isJSExpression } from '@alilc/lowcode-utils';\n\nfunction getText(node: DocNode, prop: string) {\n  const p = node.getProp(prop, false);\n  if (!p || p.isUnset()) {\n    return null;\n  }\n  let v = p.getValue();\n  if (isJSExpression(v)) {\n    v = v.mock;\n  }\n  if (v == null) {\n    return null;\n  }\n  if (p.type === 'literal') {\n    return v;\n  }\n  return Symbol.for('not-literal');\n}\n\nexport function liveEditingRule(target: EditingTarget) {\n  // for vision components specific\n  const { node, event } = target;\n\n  const targetElement = event.target as HTMLElement;\n\n  if (!Array.from(targetElement.childNodes).every((item) => item.nodeType === Node.TEXT_NODE)) {\n    return null;\n  }\n\n  const { innerText } = targetElement;\n  const propTarget = ['title', 'label', 'text', 'content', 'children'].find((prop) => {\n    return equalText(getText(node, prop), innerText);\n  });\n\n  if (propTarget) {\n    return {\n      propElement: targetElement,\n      propTarget,\n    };\n  }\n  return null;\n}\n\nfunction equalText(v: any, innerText: string) {\n  // TODO: enhance compare text logic\n  if (typeof v !== 'string') {\n    return false;\n  }\n  return v.trim() === innerText;\n}\n\nexport const liveEditingSaveHander: SaveHandler = {\n  condition: (prop) => {\n    return prop.type === 'expression';\n  },\n  onSaveContent: (content, prop) => {\n    const v = prop.getValue();\n    let data = v;\n    if (isJSExpression(v)) {\n      data = v.mock;\n    }\n    data = content;\n    if (isJSExpression(v)) {\n      prop.setValue({\n        type: 'JSExpression',\n        value: v.value,\n        mock: data,\n      });\n    } else {\n      prop.setValue(data);\n    }\n  },\n};\n// TODO:\n// 非文本编辑\n//  国际化数据，改变当前\n//  JSExpression, 改变 mock 或 弹出绑定变量\n\nLiveEditing.addLiveEditingSpecificRule(liveEditingRule);\nLiveEditing.addLiveEditingSaveHandler(liveEditingSaveHander);\n","import {\n  Project,\n  Skeleton,\n  DocumentModel,\n  Node,\n  NodeChildren,\n  History,\n  SettingPropEntry,\n  SettingTopEntry,\n  Selection,\n  Prop,\n  SimulatorHost,\n} from '@alilc/lowcode-shell';\nimport { Node as InnerNode } from '@alilc/lowcode-designer';\n\nexport default {\n  Project,\n  Skeleton,\n  DocumentModel,\n  Node,\n  NodeChildren,\n  History,\n  SettingPropEntry,\n  SettingTopEntry,\n  InnerNode,\n  Selection,\n  Prop,\n  SimulatorHost,\n};\n","import {\n  projectSymbol,\n  documentSymbol,\n  nodeSymbol,\n  nodeChildrenSymbol,\n  designerSymbol,\n  skeletonSymbol,\n  editorSymbol,\n  settingPropEntrySymbol,\n  settingTopEntrySymbol,\n  designerCabinSymbol,\n  propSymbol,\n  simulatorHostSymbol,\n} from '@alilc/lowcode-shell';\n\nexport default {\n  projectSymbol,\n  documentSymbol,\n  nodeSymbol,\n  nodeChildrenSymbol,\n  skeletonSymbol,\n  editorSymbol,\n  designerSymbol,\n  settingPropEntrySymbol,\n  settingTopEntrySymbol,\n  designerCabinSymbol,\n  propSymbol,\n  simulatorHostSymbol,\n};\n","import { IPublicModelPluginContext } from '@alilc/lowcode-types';\n\nexport const componentMetaParser = (designer: any) => {\n  const fun = (ctx: IPublicModelPluginContext) => {\n    return {\n      init() {\n        const { material } = ctx;\n        material.onChangeAssets(() => {\n          const assets = material.getAssets();\n          const { components = [] } = assets;\n          designer.buildComponentMetasMap(components);\n        });\n      },\n    };\n  };\n\n  fun.pluginName = '___component_meta_parser___';\n\n  return fun;\n};\n","import { IPublicModelPluginContext } from '@alilc/lowcode-types';\n\n// 注册默认的 setters\nexport const setterRegistry = (ctx: IPublicModelPluginContext) => {\n  return {\n    init() {\n      const { config } = ctx;\n      if (config.get('disableDefaultSetters')) return;\n      const builtinSetters = require('@alilc/lowcode-engine-ext')?.setters;\n      if (builtinSetters) {\n        ctx.setters.registerSetter(builtinSetters);\n      }\n    },\n  };\n};\n\nsetterRegistry.pluginName = '___setter_registry___';\n","import React, { PureComponent } from 'react';\nimport { Editor, engineConfig } from '@alilc/lowcode-editor-core';\nimport { DesignerView, Designer } from '@alilc/lowcode-designer';\nimport { Asset, getLogger } from '@alilc/lowcode-utils';\nimport './index.scss';\n\nconst logger = getLogger({ level: 'warn', bizName: 'plugin:plugin-designer' });\n\nexport interface PluginProps {\n  engineEditor: Editor;\n}\n\ninterface DesignerPluginState {\n  componentMetadatas?: any[] | null;\n  library?: any[] | null;\n  extraEnvironment?: any[] | null;\n  renderEnv?: string;\n  device?: string;\n  locale?: string;\n  designMode?: string;\n  deviceClassName?: string;\n  simulatorUrl: Asset | null;\n  // @TODO 类型定义\n  requestHandlersMap: any;\n}\n\nexport default class DesignerPlugin extends PureComponent<PluginProps, DesignerPluginState> {\n  static displayName: 'LowcodePluginDesigner';\n\n  state: DesignerPluginState = {\n    componentMetadatas: null,\n    library: null,\n    extraEnvironment: null,\n    renderEnv: 'default',\n    device: 'default',\n    locale: '',\n    designMode: 'live',\n    deviceClassName: '',\n    simulatorUrl: null,\n    requestHandlersMap: null,\n  };\n\n  private _mounted = true;\n\n  constructor(props: any) {\n    super(props);\n    this.setupAssets();\n  }\n\n  private async setupAssets() {\n    const editor = this.props.engineEditor;\n    try {\n      const assets = await editor.onceGot('assets');\n      const renderEnv = engineConfig.get('renderEnv') || editor.get('renderEnv');\n      const device = engineConfig.get('device') || editor.get('device');\n      const locale = engineConfig.get('locale') || editor.get('locale');\n      const designMode = engineConfig.get('designMode') || editor.get('designMode');\n      const deviceClassName = engineConfig.get('deviceClassName') || editor.get('deviceClassName');\n      const simulatorUrl = engineConfig.get('simulatorUrl') || editor.get('simulatorUrl');\n      // @TODO setupAssets 里设置 requestHandlersMap 不太合适\n      const requestHandlersMap = engineConfig.get('requestHandlersMap') || editor.get('requestHandlersMap');\n      if (!this._mounted) {\n        return;\n      }\n      const { components, packages, extraEnvironment, utils } = assets;\n      const state = {\n        componentMetadatas: components || [],\n        library: packages || [],\n        utilsMetadata: utils || [],\n        extraEnvironment,\n        renderEnv,\n        device,\n        designMode,\n        deviceClassName,\n        simulatorUrl,\n        requestHandlersMap,\n        locale,\n      };\n      this.setState(state);\n    } catch (e) {\n      logger.error(e);\n    }\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  private handleDesignerMount = (designer: Designer): void => {\n    const editor = this.props.engineEditor;\n    editor.set('designer', designer);\n    editor.eventBus.emit('designer.ready', designer);\n    editor.onGot('schema', (schema) => {\n      designer.project.open(schema);\n    });\n  };\n\n  render(): React.ReactNode {\n    const editor: Editor = this.props.engineEditor;\n    const {\n      componentMetadatas,\n      utilsMetadata,\n      library,\n      extraEnvironment,\n      renderEnv,\n      device,\n      designMode,\n      deviceClassName,\n      simulatorUrl,\n      requestHandlersMap,\n      locale,\n    } = this.state;\n\n    if (!library || !componentMetadatas) {\n      // TODO: use a Loading\n      return null;\n    }\n\n    return (\n      <DesignerView\n        onMount={this.handleDesignerMount}\n        className=\"lowcode-plugin-designer\"\n        editor={editor}\n        name={editor.viewName}\n        designer={editor.get('designer')}\n        componentMetadatas={componentMetadatas}\n        simulatorProps={{\n          library,\n          utilsMetadata,\n          extraEnvironment,\n          renderEnv,\n          device,\n          locale,\n          designMode,\n          deviceClassName,\n          simulatorUrl,\n          requestHandlersMap,\n        }}\n      />\n    );\n  }\n}\n","import { IPublicModelPluginContext } from '@alilc/lowcode-types';\nimport { SettingsPrimaryPane } from '@alilc/lowcode-editor-skeleton';\nimport DesignerPlugin from '@alilc/lowcode-plugin-designer';\n\n// 注册默认的面板\nexport const defaultPanelRegistry = (editor: any) => {\n  const fun = (ctx: IPublicModelPluginContext) => {\n    return {\n      init() {\n        const { skeleton, config } = ctx;\n        skeleton.add({\n          area: 'mainArea',\n          name: 'designer',\n          type: 'Widget',\n          content: <DesignerPlugin\n            engineConfig={config}\n            engineEditor={editor}\n          />,\n        });\n        if (!config.get('disableDefaultSettingPanel')) {\n          skeleton.add({\n            area: 'rightArea',\n            name: 'settingsPane',\n            type: 'Panel',\n            content: <SettingsPrimaryPane\n              engineEditor={editor}\n            />,\n            props: {\n              ignoreRoot: true,\n            },\n          });\n        }\n      },\n    };\n  };\n\n  fun.pluginName = '___default_panel___';\n\n  return fun;\n};\n\n\nexport default defaultPanelRegistry;\n","import {\n  Node as InnerNode,\n  SettingField as InnerSettingField,\n} from '@alilc/lowcode-designer';\nimport { IShellModelFactory, IPublicModelNode, IPublicModelSettingPropEntry } from '@alilc/lowcode-types';\nimport {\n  Node,\n  SettingPropEntry,\n} from '@alilc/lowcode-shell';\nclass ShellModelFactory implements IShellModelFactory {\n  createNode(node: InnerNode | null | undefined): IPublicModelNode | null {\n    return Node.create(node);\n  }\n  createSettingPropEntry(prop: InnerSettingField): IPublicModelSettingPropEntry {\n    return SettingPropEntry.create(prop);\n  }\n}\nexport const shellModelFactory = new ShellModelFactory();","/* eslint-disable max-len */\nimport { isFormEvent, isNodeSchema, isNode } from '@alilc/lowcode-utils';\nimport {\n  IPublicModelPluginContext,\n  IPublicEnumTransformStage,\n  IPublicModelNode,\n  IPublicTypeNodeSchema,\n  IPublicTypeNodeData,\n  IPublicEnumDragObjectType,\n  IPublicTypeDragNodeObject,\n} from '@alilc/lowcode-types';\n\nfunction insertChild(\n  container: IPublicModelNode,\n  originalChild: IPublicModelNode | IPublicTypeNodeData,\n  at?: number | null,\n): IPublicModelNode | null {\n  let child = originalChild;\n  if (isNode(child) && (child as IPublicModelNode).isSlotNode) {\n    child = (child as IPublicModelNode).exportSchema(IPublicEnumTransformStage.Clone);\n  }\n  let node = null;\n  if (isNode(child)) {\n    node = (child as IPublicModelNode);\n    container.children?.insert(node, at);\n  } else {\n    node = container.document?.createNode(child) || null;\n    if (node) {\n      container.children?.insert(node, at);\n    }\n  }\n\n  return (node as IPublicModelNode) || null;\n}\n\nfunction insertChildren(\n  container: IPublicModelNode,\n  nodes: IPublicModelNode[] | IPublicTypeNodeData[],\n  at?: number | null,\n): IPublicModelNode[] {\n  let index = at;\n  let node: any;\n  const results: IPublicModelNode[] = [];\n  // eslint-disable-next-line no-cond-assign\n  while ((node = nodes.pop())) {\n    node = insertChild(container, node, index);\n    results.push(node);\n    index = node.index;\n  }\n  return results;\n}\n\n/**\n * 获得合适的插入位置\n */\nfunction getSuitableInsertion(\n  pluginContext: IPublicModelPluginContext,\n  insertNode?: IPublicModelNode | IPublicTypeNodeSchema | IPublicTypeNodeSchema[],\n): { target: IPublicModelNode; index?: number } | null {\n  const { project, material } = pluginContext;\n  const activeDoc = project.currentDocument;\n  if (!activeDoc) {\n    return null;\n  }\n  if (\n    Array.isArray(insertNode) &&\n    isNodeSchema(insertNode[0]) &&\n    material.getComponentMeta(insertNode[0].componentName)?.isModal\n  ) {\n    if (!activeDoc.root) {\n      return null;\n    }\n\n    return {\n      target: activeDoc.root,\n    };\n  }\n\n  const focusNode = activeDoc.focusNode!;\n  const nodes = activeDoc.selection.getNodes();\n  const refNode = nodes.find((item) => focusNode.contains(item));\n  let target;\n  let index: number | undefined;\n  if (!refNode || refNode === focusNode) {\n    target = focusNode;\n  } else if (refNode.componentMeta?.isContainer) {\n    target = refNode;\n  } else {\n    // FIXME!!, parent maybe null\n    target = refNode.parent!;\n    index = refNode.index + 1;\n  }\n\n  if (target && insertNode && !target.componentMeta?.checkNestingDown(target, insertNode)) {\n    return null;\n  }\n\n  return { target, index };\n}\n\n/* istanbul ignore next */\nfunction getNextForSelect(next: IPublicModelNode | null, head?: any, parent?: IPublicModelNode | null): any {\n  if (next) {\n    if (!head) {\n      return next;\n    }\n\n    let ret;\n    if (next.isContainerNode) {\n      const { children } = next;\n      if (children && !children.isEmptyNode) {\n        ret = getNextForSelect(children.get(0));\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n\n    ret = getNextForSelect(next.nextSibling);\n    if (ret) {\n      return ret;\n    }\n  }\n\n  if (parent) {\n    return getNextForSelect(parent.nextSibling, false, parent?.parent);\n  }\n\n  return null;\n}\n\n/* istanbul ignore next */\nfunction getPrevForSelect(prev: IPublicModelNode | null, head?: any, parent?: IPublicModelNode | null): any {\n  if (prev) {\n    let ret;\n    if (!head && prev.isContainerNode) {\n      const { children } = prev;\n      const lastChild = children && !children.isEmptyNode ? children.get(children.size - 1) : null;\n\n      ret = getPrevForSelect(lastChild);\n      if (ret) {\n        return ret;\n      }\n    }\n\n    if (!head) {\n      return prev;\n    }\n\n    ret = getPrevForSelect(prev.prevSibling);\n    if (ret) {\n      return ret;\n    }\n  }\n\n  if (parent) {\n    return parent;\n  }\n\n  return null;\n}\n\nfunction getSuitablePlaceForNode(targetNode: IPublicModelNode, node: IPublicModelNode, ref: any): any {\n  const { document } = targetNode;\n  if (!document) {\n    return null;\n  }\n\n  const dragNodeObject: IPublicTypeDragNodeObject = {\n    type: IPublicEnumDragObjectType.Node,\n    nodes: [node],\n  };\n\n  const focusNode = document?.focusNode;\n  // 如果节点是模态框，插入到根节点下\n  if (node?.componentMeta?.isModal) {\n    return { container: focusNode, ref };\n  }\n  const canDropInFn = document.checkNesting;\n\n  if (!ref && focusNode && targetNode.contains(focusNode)) {\n    if (canDropInFn(focusNode, dragNodeObject)) {\n      return { container: focusNode };\n    }\n\n    return null;\n  }\n\n  if (targetNode.isRootNode && targetNode.children) {\n    const dropElement = targetNode.children.filter((c) => {\n      if (!c.isContainerNode) {\n        return false;\n      }\n      if (canDropInFn(c, dragNodeObject)) {\n        return true;\n      }\n      return false;\n    })[0];\n\n    if (dropElement) {\n      return { container: dropElement, ref };\n    }\n\n    if (canDropInFn(targetNode, dragNodeObject)) {\n      return { container: targetNode, ref };\n    }\n\n    return null;\n  }\n\n  if (targetNode.isContainerNode) {\n    if (canDropInFn(targetNode, dragNodeObject)) {\n      return { container: targetNode, ref };\n    }\n  }\n\n  if (targetNode.parent) {\n    return getSuitablePlaceForNode(targetNode.parent, node, { index: targetNode.index });\n  }\n\n  return null;\n}\n\n// 注册默认的 setters\nexport const builtinHotkey = (ctx: IPublicModelPluginContext) => {\n  return {\n    init() {\n      const { hotkey, project, logger, canvas } = ctx;\n      const { clipboard } = canvas;\n      // hotkey binding\n      hotkey.bind(['backspace', 'del'], (e: KeyboardEvent, action) => {\n        logger.info(`action ${action} is triggered`);\n\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        // TODO: use focus-tracker\n        const doc = project.currentDocument;\n        if (isFormEvent(e) || !doc) {\n          return;\n        }\n        e.preventDefault();\n\n        const sel = doc.selection;\n        const topItems = sel.getTopNodes();\n        // TODO: check can remove\n        topItems.forEach((node) => {\n          if (node?.canPerformAction('remove')) {\n            node && doc.removeNode(node);\n          }\n        });\n        sel.clear();\n      });\n\n      hotkey.bind('escape', (e: KeyboardEvent, action) => {\n        logger.info(`action ${action} is triggered`);\n\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const sel = project.currentDocument?.selection;\n        if (isFormEvent(e) || !sel) {\n          return;\n        }\n        e.preventDefault();\n\n        sel.clear();\n        // currentFocus.esc();\n      });\n\n      // command + c copy  command + x cut\n      hotkey.bind(['command+c', 'ctrl+c', 'command+x', 'ctrl+x'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const doc = project.currentDocument;\n        if (isFormEvent(e) || !doc) {\n          return;\n        }\n        e.preventDefault();\n\n        let selected = doc.selection.getTopNodes(true);\n        selected = selected.filter((node) => {\n          return node?.canPerformAction('copy');\n        });\n        if (!selected || selected.length < 1) {\n          return;\n        }\n\n        const componentsMap = {};\n        const componentsTree = selected.map((item) => item?.exportSchema(IPublicEnumTransformStage.Clone));\n\n        // FIXME: clear node.id\n\n        const data = { type: 'nodeSchema', componentsMap, componentsTree };\n\n        clipboard.setData(data);\n\n        const cutMode = action && action.indexOf('x') > 0;\n        if (cutMode) {\n          selected.forEach((node) => {\n            const parentNode = node?.parent;\n            parentNode?.select();\n            node?.remove();\n          });\n        }\n      });\n\n      // command + v paste\n      hotkey.bind(['command+v', 'ctrl+v'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        // TODO\n        const doc = project?.currentDocument;\n        if (isFormEvent(e) || !doc) {\n          return;\n        }\n        /* istanbul ignore next */\n        clipboard.waitPasteData(e, ({ componentsTree }) => {\n          if (componentsTree) {\n            const { target, index } = getSuitableInsertion(ctx, componentsTree) || {};\n            if (!target) {\n              return;\n            }\n            let canAddComponentsTree = componentsTree.filter((node: IPublicModelNode) => {\n              const dragNodeObject: IPublicTypeDragNodeObject = {\n                type: IPublicEnumDragObjectType.Node,\n                nodes: [node],\n              };\n              return doc.checkNesting(target, dragNodeObject);\n            });\n            if (canAddComponentsTree.length === 0) {\n              return;\n            }\n            const nodes = insertChildren(target, canAddComponentsTree, index);\n            if (nodes) {\n              doc.selection.selectAll(nodes.map((o) => o.id));\n              setTimeout(() => canvas.activeTracker?.track(nodes[0]), 10);\n            }\n          }\n        });\n      });\n\n      // command + z undo\n      hotkey.bind(['command+z', 'ctrl+z'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const history = project.currentDocument?.history;\n        if (isFormEvent(e) || !history) {\n          return;\n        }\n\n        e.preventDefault();\n        const selection = project.currentDocument?.selection;\n        const curSelected = selection?.selected && Array.from(selection?.selected);\n        history.back();\n        selection?.selectAll(curSelected);\n      });\n\n      // command + shift + z redo\n      hotkey.bind(['command+y', 'ctrl+y', 'command+shift+z'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const history = project.currentDocument?.history;\n        if (isFormEvent(e) || !history) {\n          return;\n        }\n        e.preventDefault();\n        const selection = project.currentDocument?.selection;\n        const curSelected = selection?.selected && Array.from(selection?.selected);\n        history.forward();\n        selection?.selectAll(curSelected);\n      });\n\n      // sibling selection\n      hotkey.bind(['left', 'right'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const doc = project.currentDocument;\n        if (isFormEvent(e) || !doc) {\n          return;\n        }\n        e.preventDefault();\n        const selected = doc.selection.getTopNodes(true);\n        if (!selected || selected.length < 1) {\n          return;\n        }\n        const firstNode = selected[0];\n        const silbing = action === 'left' ? firstNode?.prevSibling : firstNode?.nextSibling;\n        silbing?.select();\n      });\n\n      hotkey.bind(['up', 'down'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const doc = project.currentDocument;\n        if (isFormEvent(e) || !doc) {\n          return;\n        }\n        e.preventDefault();\n        const selected = doc.selection.getTopNodes(true);\n        if (!selected || selected.length < 1) {\n          return;\n        }\n        const firstNode = selected[0];\n\n        if (action === 'down') {\n          const next = getNextForSelect(firstNode, true, firstNode?.parent);\n          next?.select();\n        } else if (action === 'up') {\n          const prev = getPrevForSelect(firstNode, true, firstNode?.parent);\n          prev?.select();\n        }\n      });\n\n      hotkey.bind(['option+left', 'option+right'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const doc = project.currentDocument;\n        if (isFormEvent(e) || !doc) {\n          return;\n        }\n        e.preventDefault();\n        const selected = doc.selection.getTopNodes(true);\n        if (!selected || selected.length < 1) {\n          return;\n        }\n        // TODO: 此处需要增加判断当前节点是否可被操作移动，原ve里是用 node.canOperating()来判断\n        // TODO: 移动逻辑也需要重新梳理，对于移动目标位置的选择，是否可以移入，需要增加判断\n\n        const firstNode = selected[0];\n        const parent = firstNode?.parent;\n        if (!parent) return;\n\n        const isPrev = action && /(left)$/.test(action);\n\n        const silbing = isPrev ? firstNode.prevSibling : firstNode.nextSibling;\n        if (silbing) {\n          if (isPrev) {\n            parent.insertBefore(firstNode, silbing, true);\n          } else {\n            parent.insertAfter(firstNode, silbing, true);\n          }\n          firstNode?.select();\n        }\n      });\n\n      hotkey.bind(['option+up'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const doc = project.currentDocument;\n        if (isFormEvent(e) || !doc) {\n          return;\n        }\n        e.preventDefault();\n        const selected = doc.selection.getTopNodes(true);\n        if (!selected || selected.length < 1) {\n          return;\n        }\n        // TODO: 此处需要增加判断当前节点是否可被操作移动，原ve里是用 node.canOperating()来判断\n        // TODO: 移动逻辑也需要重新梳理，对于移动目标位置的选择，是否可以移入，需要增加判断\n\n        const firstNode = selected[0];\n        const parent = firstNode?.parent;\n        if (!parent) {\n          return;\n        }\n\n        const silbing = firstNode.prevSibling;\n        if (silbing) {\n          if (silbing.isContainerNode) {\n            const place = getSuitablePlaceForNode(silbing, firstNode, null);\n            silbing.insertAfter(firstNode, place.ref, true);\n          } else {\n            parent.insertBefore(firstNode, silbing, true);\n          }\n          firstNode?.select();\n        } else {\n          const place = getSuitablePlaceForNode(parent, firstNode, null); // upwards\n          if (place) {\n            const container = place.container.internalToShellNode();\n            container.insertBefore(firstNode, place.ref);\n            firstNode?.select();\n          }\n        }\n      });\n\n      hotkey.bind(['option+down'], (e, action) => {\n        logger.info(`action ${action} is triggered`);\n        if (canvas.isInLiveEditing) {\n          return;\n        }\n        const doc = project.getCurrentDocument();\n        if (isFormEvent(e) || !doc) {\n          return;\n        }\n        e.preventDefault();\n        const selected = doc.selection.getTopNodes(true);\n        if (!selected || selected.length < 1) {\n          return;\n        }\n        // TODO: 此处需要增加判断当前节点是否可被操作移动，原 ve 里是用 node.canOperating() 来判断\n        // TODO: 移动逻辑也需要重新梳理，对于移动目标位置的选择，是否可以移入，需要增加判断\n\n        const firstNode = selected[0];\n        const parent = firstNode?.parent;\n        if (!parent) {\n          return;\n        }\n\n        const silbing = firstNode.nextSibling;\n        if (silbing) {\n          if (silbing.isContainerNode) {\n            silbing.insertBefore(firstNode, undefined);\n          } else {\n            parent.insertAfter(firstNode, silbing, true);\n          }\n          firstNode?.select();\n        } else {\n          const place = getSuitablePlaceForNode(parent, firstNode, null); // upwards\n          if (place) {\n            const container = place.container.internalToShellNode();\n            container.insertAfter(firstNode, place.ref, true);\n            firstNode?.select();\n          }\n        }\n      });\n    },\n  };\n};\n\nbuiltinHotkey.pluginName = '___builtin_hotkey___';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconLock(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53c-12.1-8.7-20-22.9-20-39 0-26.5 21.5-48 48-48s48 21.5 48 48c0 16.1-7.9 30.3-20 39z m152-237H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224z\" />\n    </SVGIcon>\n  );\n}\n\nIconLock.displayName = 'IconLock';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconUnlock(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32z m-40 376H232V536h560v304z\" />\n      <path d=\"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53c12.1-8.7 20-22.9 20-39 0-26.5-21.5-48-48-48s-48 21.5-48 48c0 16.1 7.9 30.3 20 39z\" />\n    </SVGIcon>\n  );\n}\n\nIconUnlock.displayName = 'IconUnlock';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconArrowRight(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M512.002047 771.904425c-10.152221 0.518816-20.442588-2.800789-28.202319-10.598382L77.902254 315.937602c-14.548344-14.618952-14.548344-38.318724 0-52.933583 14.544251-14.614859 38.118156-14.614859 52.662407 0l381.437385 418.531212L893.432269 263.004019c14.544251-14.614859 38.125319-14.614859 52.662407 0 14.552437 14.614859 14.552437 38.314631 0 52.933583L540.205389 761.307066C532.451798 769.103636 522.158361 772.424264 512.002047 771.904425z\" />\n    </SVGIcon>\n  );\n}\n\nIconArrowRight.displayName = 'IconArrowRight';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconCond(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M479.552 276.544l296.896 2.752v75.712L960 249.024l-183.552-106.048v92.48h-271.36l-46.656-2.752-190.784 203.648 30.976 30.976 180.928-190.784z m296.896 484.928l-253.056-2.816-262.976-263.04H64v43.904h175.296l262.912 262.976 274.176 2.816v75.712L960 774.976l-183.616-105.984 0.064 92.48z\" />\n    </SVGIcon>\n  );\n}\n\nIconCond.displayName = 'IconCond';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconEyeClose(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M512.7 700.9c-102.1 0-184.9-82.8-184.9-184.9 0-28.6 6.5-55.6 18-79.7l-93.7-93.7C138.9 418.1 65.2 514 65.2 514s200.4 260.7 447.6 260.7c50.2 0 98.6-10.8 143.6-27.9l-63.9-63.9c-24.2 11.5-51.2 18-79.8 18z\" />\n      <path d=\"M960.3 514S759.9 253.3 512.7 253.3c-49.5 0-97.2 10.5-141.7 27.2L243.5 153.1l-45.3 45.3 262.3 262.2c-13.1 13.3-21.2 31.5-21.2 51.6 0 40.6 32.9 73.4 73.4 73.4 20.1 0 38.4-8.1 51.6-21.2l260.9 260.8 45.3-45.3-95.6-95.6C887.2 609.1 960.3 514 960.3 514z m-376.7-20.9c-6.8-25.2-26.6-45.1-51.9-51.9L437.5 347c23-10.3 48.5-16 75.3-16 102.1 0 184.9 82.8 184.9 184.9 0 26.8-5.7 52.2-15.9 75.2l-98.2-98z\" />\n    </SVGIcon>\n  );\n}\n\nIconEyeClose.displayName = 'IconEyeClose';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconEye(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M512 256c-163.8 0-291.4 97.6-448 256 134.8 135.4 248 256 448 256 199.8 0 346.8-152.8 448-253.2C856.4 397.2 709.6 256 512 256z m0 438.6c-98.8 0-179.2-82-179.2-182.6 0-100.8 80.4-182.6 179.2-182.6s179.2 82 179.2 182.6c0 100.8-80.4 182.6-179.2 182.6z\" />\n      <path d=\"M512 448c0-15.8 5.8-30.2 15.2-41.4-5-0.8-10-1.2-15.2-1.2-57.6 0-104.6 47.8-104.6 106.6s47 106.6 104.6 106.6 104.6-47.8 104.6-106.6c0-4.6-0.4-9.2-0.8-13.8-11 8.6-24.6 13.8-39.6 13.8-35.6 0-64.2-28.6-64.2-64z\" />\n    </SVGIcon>\n  );\n}\n\nIconEye.displayName = 'IconEye';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconFilter(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M911.457097 168.557714a35.986286 35.986286 0 0 1-8.009143 40.009143L621.73824 490.276571V914.285714c0 14.848-9.142857 28.013714-22.272 33.718857A42.349714 42.349714 0 0 1 585.166811 950.857143a34.084571 34.084571 0 0 1-25.709714-10.861714l-146.285714-146.285715A36.425143 36.425143 0 0 1 402.309669 768v-277.723429L120.599954 208.566857a35.986286 35.986286 0 0 1-8.009143-40.009143C118.295954 155.428571 131.461669 146.285714 146.309669 146.285714h731.428571c14.848 0 28.013714 9.142857 33.718857 22.272z\" fill=\"#666\" p-id=\"2025\" />\n    </SVGIcon>\n  );\n}\n\nIconFilter.displayName = 'IconFilter';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconLoop(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M60.235294 542.117647c0 132.879059 103.062588 240.941176 229.677176 240.941176l0 60.235294c-159.864471 0-289.912471-135.107765-289.912471-301.176471s130.048-301.176471 289.912471-301.176471l254.735059 0-99.147294-99.147294 42.586353-42.586353 171.911529 171.851294-171.851294 171.911529-42.646588-42.646588 99.207529-99.147294-254.795294 0c-126.614588 0-229.677176 108.062118-229.677176 240.941176zM734.087529 240.941176l0 60.235294c126.614588 0 229.677176 108.062118 229.677176 240.941176s-103.062588 240.941176-229.677176 240.941176l-254.795294 0 99.147294-99.147294-42.586353-42.586353-171.851294 171.851294 171.911529 171.911529 42.586353-42.586353-99.207529-99.207529 254.735059 0c159.924706 0 289.972706-135.107765 289.972706-301.176471s-130.048-301.176471-289.912471-301.176471z\" />\n    </SVGIcon>\n  );\n}\n\nIconLoop.displayName = 'IconLoop';\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconRadioActive(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m0-256a256 256 0 1 0 0-512 256 256 0 0 0 0 512z\" />\n    </SVGIcon>\n  );\n}\n\nIconRadioActive.displayName = 'IconRadioActive';\n\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconRadio(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m0-64A448 448 0 1 0 512 64a448 448 0 0 0 0 896z\" />\n    </SVGIcon>\n  );\n}\n\nIconRadio.displayName = 'IconRadio';\n\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconSetting(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M965.824 405.952a180.48 180.48 0 0 1-117.12-85.376 174.464 174.464 0 0 1-16-142.08 22.208 22.208 0 0 0-7.04-23.552 480.576 480.576 0 0 0-153.6-89.216 23.104 23.104 0 0 0-24.32 5.76 182.208 182.208 0 0 1-135.68 57.92 182.208 182.208 0 0 1-133.12-56.64 23.104 23.104 0 0 0-26.88-7.04 478.656 478.656 0 0 0-153.6 89.856 22.208 22.208 0 0 0-7.04 23.552 174.464 174.464 0 0 1-16 141.44A180.48 180.48 0 0 1 58.24 405.952a22.4 22.4 0 0 0-17.28 17.792 455.08 455.08 0 0 0 0 176.512 22.4 22.4 0 0 0 17.28 17.792 180.48 180.48 0 0 1 117.12 84.736c25.408 42.944 31.232 94.592 16 142.08a22.208 22.208 0 0 0 7.04 23.552A480.576 480.576 0 0 0 352 957.632h7.68a23.04 23.04 0 0 0 16.64-7.04 184.128 184.128 0 0 1 266.944 0c6.592 8.96 18.752 11.968 28.8 7.04a479.36 479.36 0 0 0 156.16-88.576 22.208 22.208 0 0 0 7.04-23.552 174.464 174.464 0 0 1 13.44-142.72 180.48 180.48 0 0 1 117.12-84.736 22.4 22.4 0 0 0 17.28-17.792 452.613 452.613 0 0 0 0-176.512 23.04 23.04 0 0 0-17.28-17.792z m-42.88 169.408a218.752 218.752 0 0 0-128 98.112 211.904 211.904 0 0 0-21.76 156.736 415.936 415.936 0 0 1-112 63.68 217.472 217.472 0 0 0-149.12-63.68 221.312 221.312 0 0 0-149.12 63.68 414.592 414.592 0 0 1-112-63.68c12.8-53.12 4.288-109.12-23.68-156.096A218.752 218.752 0 0 0 101.12 575.36a386.176 386.176 0 0 1 0-127.36 218.752 218.752 0 0 0 128-98.112c27.2-47.552 34.944-103.68 21.76-156.8a415.296 415.296 0 0 1 112-63.68A221.44 221.44 0 0 0 512 187.392a218.24 218.24 0 0 0 149.12-57.984 413.952 413.952 0 0 1 112 63.744 211.904 211.904 0 0 0 23.04 156.096 218.752 218.752 0 0 0 128 98.112 386.65 386.65 0 0 1 0 127.36l-1.28 0.64z\" />\n      <path d=\"M512 320.576c-105.984 0-192 85.568-192 191.104a191.552 191.552 0 0 0 192 191.104c106.112 0 192.064-85.568 192.064-191.104a190.72 190.72 0 0 0-56.256-135.168 192.448 192.448 0 0 0-135.744-55.936z m0 318.528c-70.656 0-128-57.088-128-127.424 0-70.4 57.344-127.36 128-127.36 70.72 0 128 56.96 128 127.36 0 33.792-13.44 66.176-37.44 90.112a128.32 128.32 0 0 1-90.496 37.312z\" />\n    </SVGIcon>\n  );\n}\n\nIconSetting.displayName = 'IconSetting';\n","/* eslint-disable max-len */\nimport { Component, KeyboardEvent, FocusEvent, Fragment } from 'react';\nimport classNames from 'classnames';\nimport { createIcon } from '@alilc/lowcode-utils';\nimport { IPublicModelPluginContext, IPublicApiEvent } from '@alilc/lowcode-types';\nimport TreeNode from '../controllers/tree-node';\nimport { IconLock, IconUnlock, IconArrowRight, IconEyeClose, IconEye, IconCond, IconLoop, IconRadioActive, IconRadio, IconSetting } from '../icons';\n\n\nfunction emitOutlineEvent(event: IPublicApiEvent, type: string, treeNode: TreeNode, rest?: Record<string, unknown>) {\n  const node = treeNode?.node;\n  const npm = node?.componentMeta?.npm;\n  const selected =\n    [npm?.package, npm?.componentName].filter((item) => !!item).join('-') || node?.componentMeta?.componentName || '';\n  event.emit(`outlinePane.${type}`, {\n    selected,\n    ...rest,\n  });\n}\n\nexport default class TreeTitle extends Component<{\n  treeNode: TreeNode;\n  isModal?: boolean;\n  expanded: boolean;\n  hidden: boolean;\n  locked: boolean;\n  expandable: boolean;\n  pluginContext: IPublicModelPluginContext;\n}> {\n  state: {\n    editing: boolean;\n    title: string;\n  } = {\n    editing: false,\n    title: '',\n  };\n\n  private enableEdit = (e) => {\n    e.preventDefault();\n    this.setState({\n      editing: true,\n    });\n  };\n\n  private cancelEdit() {\n    this.setState({\n      editing: false,\n    });\n    this.lastInput = undefined;\n  }\n\n  private saveEdit = (e: FocusEvent<HTMLInputElement> | KeyboardEvent<HTMLInputElement>) => {\n    const { treeNode } = this.props;\n    const value = (e.target as HTMLInputElement).value || '';\n    treeNode.setTitleLabel(value);\n    emitOutlineEvent(this.props.pluginContext.event, 'rename', treeNode, { value });\n    this.cancelEdit();\n  };\n\n  private handleKeyUp = (e: KeyboardEvent<HTMLInputElement>) => {\n    if (e.keyCode === 13) {\n      this.saveEdit(e);\n    }\n    if (e.keyCode === 27) {\n      this.cancelEdit();\n    }\n  };\n\n  private lastInput?: HTMLInputElement;\n\n  private setCaret = (input: HTMLInputElement | null) => {\n    if (!input || this.lastInput === input) {\n      return;\n    }\n    input.focus();\n    input.select();\n    // 光标定位最后一个\n    // input.selectionStart = input.selectionEnd;\n  };\n\n  componentDidMount() {\n    const { treeNode } = this.props;\n    this.setState({\n      editing: false,\n      title: treeNode.titleLabel,\n    });\n    treeNode.onTitleLabelChanged = () => {\n      this.setState({\n        title: treeNode.titleLabel,\n      });\n    };\n  }\n\n  render() {\n    const { treeNode, isModal, pluginContext } = this.props;\n    const { editing } = this.state;\n    const isCNode = !treeNode.isRoot();\n    const { node } = treeNode;\n    const isNodeParent = node.isParentalNode;\n    const isContainer = node.isContainerNode;\n    let style: any;\n    if (isCNode) {\n      const { depth } = treeNode;\n      const indent = depth * 12;\n      style = {\n        paddingLeft: indent + (isModal ? 12 : 0),\n        marginLeft: -indent,\n      };\n    }\n    const { filterWorking, matchSelf, keywords } = treeNode.filterReult;\n    const Extra = pluginContext.extraTitle;\n    const { intlNode, common, config } = pluginContext;\n    const Tip = common.editorCabin.Tip;\n    const Title = common.editorCabin.Title;\n    const shouldShowHideBtn = isCNode && isNodeParent && !isModal;\n    const shouldShowLockBtn = config.get('enableCanvasLock', false) && isContainer && isCNode && isNodeParent;\n    const shouldEditBtn = isCNode && isNodeParent;\n    return (\n      <div\n        className={classNames('tree-node-title', { editing })}\n        style={style}\n        data-id={treeNode.id}\n        onClick={() => {\n          if (isModal) {\n            if (node.visible) {\n              node.document?.modalNodesManager?.setInvisible(node);\n            } else {\n              node.document?.modalNodesManager?.setVisible(node);\n            }\n            return;\n          }\n          if (node.conditionGroup) {\n            node.setConditionalVisible();\n          }\n        }}\n      >\n        {isModal && node.visible && (\n          <div onClick={() => {\n            node.document?.modalNodesManager?.setInvisible(node);\n          }}\n          >\n            <IconRadioActive className=\"tree-node-modal-radio-active\" />\n          </div>\n        )}\n        {isModal && !node.visible && (\n          <div onClick={() => {\n            node.document?.modalNodesManager?.setVisible(node);\n          }}\n          >\n            <IconRadio className=\"tree-node-modal-radio\" />\n          </div>\n        )}\n        {isCNode && <ExpandBtn expandable={this.props.expandable} expanded={this.props.expanded} treeNode={treeNode} pluginContext={this.props.pluginContext} />}\n        <div className=\"tree-node-icon\">{createIcon(treeNode.icon)}</div>\n        <div className=\"tree-node-title-label\">\n          {editing ? (\n            <input\n              className=\"tree-node-title-input\"\n              defaultValue={this.state.title}\n              onBlur={this.saveEdit}\n              ref={this.setCaret}\n              onKeyUp={this.handleKeyUp}\n            />\n          ) : (\n            <Fragment>\n              <Title\n                title={this.state.title}\n                match={filterWorking && matchSelf}\n                keywords={keywords}\n              />\n              {Extra && <Extra node={treeNode?.node} />}\n              {node.slotFor && (\n                <a className=\"tree-node-tag slot\">\n                  {/* todo: click redirect to prop */}\n                  <Tip>{intlNode('Slot for {prop}', { prop: node.slotFor.key })}</Tip>\n                </a>\n              )}\n              {node.hasLoop() && (\n                <a className=\"tree-node-tag loop\">\n                  {/* todo: click todo something */}\n                  <IconLoop />\n                  <Tip>{intlNode('Loop')}</Tip>\n                </a>\n              )}\n              {node.hasCondition() && !node.conditionGroup && (\n                <a className=\"tree-node-tag cond\">\n                  {/* todo: click todo something */}\n                  <IconCond />\n                  <Tip>{intlNode('Conditional')}</Tip>\n                </a>\n              )}\n            </Fragment>\n          )}\n        </div>\n        {shouldShowHideBtn && <HideBtn hidden={this.props.hidden} treeNode={treeNode} pluginContext={this.props.pluginContext} />}\n        {shouldShowLockBtn && <LockBtn locked={this.props.locked} treeNode={treeNode} pluginContext={this.props.pluginContext} />}\n        {shouldEditBtn && <RenameBtn treeNode={treeNode} pluginContext={this.props.pluginContext} onClick={this.enableEdit} /> }\n\n      </div>\n    );\n  }\n}\n\nclass RenameBtn extends Component<{\n  treeNode: TreeNode;\n  pluginContext: IPublicModelPluginContext;\n  onClick: (e: any) => void;\n}> {\n  render() {\n    const { intl, common } = this.props.pluginContext;\n    const Tip = common.editorCabin.Tip;\n    return (\n      <div\n        className=\"tree-node-rename-btn\"\n        onClick={this.props.onClick}\n      >\n        <IconSetting />\n        <Tip>{intl('Rename')}</Tip>\n      </div>\n    );\n  }\n}\n\n\nclass LockBtn extends Component<{\n  treeNode: TreeNode;\n  pluginContext: IPublicModelPluginContext;\n  locked: boolean;\n}> {\n  render() {\n    const { treeNode, locked } = this.props;\n    const { intl, common } = this.props.pluginContext;\n    const Tip = common.editorCabin.Tip;\n    return (\n      <div\n        className=\"tree-node-lock-btn\"\n        onClick={(e) => {\n          e.stopPropagation();\n          treeNode.setLocked(!locked);\n        }}\n      >\n        {locked ? <IconUnlock /> : <IconLock /> }\n        <Tip>{locked ? intl('Unlock') : intl('Lock')}</Tip>\n      </div>\n    );\n  }\n}\n\nclass HideBtn extends Component<{\n  treeNode: TreeNode;\n  hidden: boolean;\n  pluginContext: IPublicModelPluginContext;\n}, {\n  hidden: boolean;\n}> {\n  render() {\n    const { treeNode, hidden } = this.props;\n    const { intl, common } = this.props.pluginContext;\n    const Tip = common.editorCabin.Tip;\n    return (\n      <div\n        className=\"tree-node-hide-btn\"\n        onClick={(e) => {\n          e.stopPropagation();\n          emitOutlineEvent(this.props.pluginContext.event, hidden ? 'show' : 'hide', treeNode);\n          treeNode.setHidden(!hidden);\n        }}\n      >\n        {hidden ? <IconEye /> : <IconEyeClose />}\n        <Tip>{hidden ? intl('Show') : intl('Hide')}</Tip>\n      </div>\n    );\n  }\n}\n\n\nclass ExpandBtn extends Component<{\n  treeNode: TreeNode;\n  pluginContext: IPublicModelPluginContext;\n  expanded: boolean;\n  expandable: boolean;\n}> {\n\n  render() {\n    const { treeNode, expanded, expandable } = this.props;\n    if (!expandable) {\n      return <i className=\"tree-node-expand-placeholder\" />;\n    }\n    return (\n      <div\n        className=\"tree-node-expand-btn\"\n        onClick={(e) => {\n          if (expanded) {\n            e.stopPropagation();\n          }\n          emitOutlineEvent(this.props.pluginContext.event, expanded ? 'collapse' : 'expand', treeNode);\n          treeNode.setExpanded(!expanded);\n        }}\n      >\n        <IconArrowRight size=\"small\" />\n      </div>\n    );\n  }\n}","import { Component } from 'react';\nimport classNames from 'classnames';\nimport TreeNode from '../controllers/tree-node';\nimport TreeNodeView from './tree-node';\nimport { IPublicModelPluginContext, IPublicModelExclusiveGroup } from '@alilc/lowcode-types';\n\nexport default class TreeBranches extends Component<{\n  treeNode: TreeNode;\n  isModal?: boolean;\n  pluginContext: IPublicModelPluginContext;\n  expanded: boolean;\n}> {\n  state = {\n    filterWorking: false,\n    matchChild: false,\n  };\n  private offExpandedChanged: (() => void) | null;\n  constructor(props: any) {\n    super(props);\n\n    const { treeNode } = this.props;\n    const { filterWorking, matchChild } = treeNode.filterReult;\n    this.setState({ filterWorking, matchChild });\n  }\n\n  componentDidMount() {\n    const { treeNode } = this.props;\n    treeNode.onFilterResultChanged = () => {\n      const { filterWorking: newFilterWorking, matchChild: newMatchChild } = treeNode.filterReult;\n      this.setState({ filterWorking: newFilterWorking, matchChild: newMatchChild });\n    };\n  }\n\n  componentWillUnmount(): void {\n    if (this.offExpandedChanged) {\n      this.offExpandedChanged();\n    }\n  }\n\n  render() {\n    const { treeNode, isModal, expanded } = this.props;\n    const { filterWorking, matchChild } = this.state;\n    // 条件过滤生效时，如果命中了子节点，需要将该节点展开\n    const expandInFilterResult = filterWorking && matchChild;\n\n    if (!expandInFilterResult && !expanded) {\n      return null;\n    }\n\n    return (\n      <div className=\"tree-node-branches\">\n        {\n          !isModal && <TreeNodeSlots treeNode={treeNode} pluginContext={this.props.pluginContext} />\n        }\n        <TreeNodeChildren\n          treeNode={treeNode}\n          isModal={isModal || false}\n          pluginContext={this.props.pluginContext}\n        />\n      </div>\n    );\n  }\n}\n\nclass TreeNodeChildren extends Component<{\n    treeNode: TreeNode;\n    isModal?: boolean;\n    pluginContext: IPublicModelPluginContext;\n  }> {\n  state = {\n    filterWorking: false,\n    matchSelf: false,\n    keywords: null,\n    dropDetail: null,\n  };\n  offLocationChanged: () => void;\n  componentDidMount() {\n    const { treeNode, pluginContext } = this.props;\n    const { project } = pluginContext;\n    const { filterWorking, matchSelf, keywords } = treeNode.filterReult;\n    const { dropDetail } = treeNode;\n    this.setState({\n      filterWorking,\n      matchSelf,\n      keywords,\n      dropDetail,\n    });\n    treeNode.onFilterResultChanged = () => {\n      const {\n        filterWorking: newFilterWorking,\n        matchSelf: newMatchChild,\n        keywords: newKeywords,\n       } = treeNode.filterReult;\n      this.setState({\n        filterWorking: newFilterWorking,\n        matchSelf: newMatchChild,\n        keywords: newKeywords,\n      });\n    };\n    this.offLocationChanged = project.currentDocument?.onDropLocationChanged(\n        () => {\n          this.setState({ dropDetail: treeNode.dropDetail });\n        },\n      );\n  }\n  componentWillUnmount(): void {\n    this.offLocationChanged && this.offLocationChanged();\n  }\n\n  render() {\n    const { treeNode, isModal } = this.props;\n    const children: any = [];\n    let groupContents: any[] = [];\n    let currentGrp: IPublicModelExclusiveGroup;\n    const { filterWorking, matchSelf, keywords } = this.state;\n    const Title = this.props.pluginContext.common.editorCabin.Title;\n\n    const endGroup = () => {\n      if (groupContents.length > 0) {\n        children.push(\n          <div key={currentGrp.id} className=\"condition-group-container\" data-id={currentGrp.firstNode.id}>\n            <div className=\"condition-group-title\">\n              <Title\n                title={currentGrp.title}\n                match={filterWorking && matchSelf}\n                keywords={keywords}\n              />\n            </div>\n            {groupContents}\n          </div>,\n        );\n        groupContents = [];\n      }\n    };\n\n    const { dropDetail } = this.state;\n    const dropIndex = dropDetail?.index;\n    const insertion = (\n      <div\n        key=\"insertion\"\n        className={classNames('insertion', {\n          invalid: dropDetail?.valid === false,\n        })}\n      />\n    );\n    treeNode.children?.forEach((child, index) => {\n      const childIsModal = child.node.componentMeta.isModal || false;\n      if (isModal != childIsModal) {\n        return;\n      }\n      const { conditionGroup } = child.node;\n      if (conditionGroup !== currentGrp) {\n        endGroup();\n      }\n\n      if (conditionGroup) {\n        currentGrp = conditionGroup;\n        if (index === dropIndex) {\n          if (groupContents.length > 0) {\n            groupContents.push(insertion);\n          } else {\n            children.push(insertion);\n          }\n        }\n        groupContents.push(<TreeNodeView key={child.id} treeNode={child} isModal={isModal} pluginContext={this.props.pluginContext} />);\n      } else {\n        if (index === dropIndex) {\n          children.push(insertion);\n        }\n        children.push(<TreeNodeView key={child.id} treeNode={child} isModal={isModal} pluginContext={this.props.pluginContext} />);\n      }\n    });\n    endGroup();\n    const length = treeNode.children?.length || 0;\n    if (dropIndex != null && dropIndex >= length) {\n      children.push(insertion);\n    }\n\n    return <div className=\"tree-node-children\">{children}</div>;\n  }\n}\n\nclass TreeNodeSlots extends Component<{\n    treeNode: TreeNode;\n    pluginContext: IPublicModelPluginContext;\n  }> {\n  render() {\n    const { treeNode } = this.props;\n    if (!treeNode.hasSlots()) {\n      return null;\n    }\n    const Title = this.props.pluginContext.common.editorCabin.Title;\n    return (\n      <div\n        className={classNames('tree-node-slots', {\n          'insertion-at-slots': treeNode.dropDetail?.focus?.type === 'slots',\n        })}\n        data-id={treeNode.id}\n      >\n        <div className=\"tree-node-slots-title\">\n          <Title title={{ type: 'i18n', intl: this.props.pluginContext.intlNode('Slots') }} />\n        </div>\n        {treeNode.slots.map(tnode => (\n          <TreeNodeView key={tnode.id} treeNode={tnode} pluginContext={this.props.pluginContext} />\n        ))}\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport classNames from 'classnames';\nimport TreeNode from '../controllers/tree-node';\nimport TreeTitle from './tree-title';\nimport TreeBranches from './tree-branches';\nimport { IconEyeClose } from '../icons/eye-close';\nimport { IPublicModelPluginContext, IPublicModelModalNodesManager, IPublicModelDocumentModel } from '@alilc/lowcode-types';\n\nclass ModalTreeNodeView extends Component<{\n  treeNode: TreeNode;\n  pluginContext: IPublicModelPluginContext;\n}> {\n  private modalNodesManager: IPublicModelModalNodesManager | undefined | null;\n  readonly pluginContext: IPublicModelPluginContext;\n\n  constructor(props: any) {\n    super(props);\n\n    // 模态管理对象\n    this.pluginContext = props.pluginContext;\n    const { project } = this.pluginContext;\n    this.modalNodesManager = project.currentDocument?.modalNodesManager;\n  }\n\n  hideAllNodes() {\n    this.modalNodesManager?.hideModalNodes();\n  }\n\n  render() {\n    const { treeNode } = this.props;\n    // 当指定了新的根节点时，要从原始的根节点去获取模态节点\n    const { project } = this.pluginContext;\n    const rootNode = project.currentDocument?.root;\n    const rootTreeNode = treeNode.tree.getTreeNode(rootNode!);\n    const { expanded } = rootTreeNode;\n\n    const hasVisibleModalNode = !!this.modalNodesManager?.getVisibleModalNode();\n    return (\n      <div className=\"tree-node-modal\">\n        <div className=\"tree-node-modal-title\">\n          <span>{this.pluginContext.intlNode('Modal View')}</span>\n          <div\n            className=\"tree-node-modal-title-visible-icon\"\n            onClick={this.hideAllNodes.bind(this)}\n          >\n            {hasVisibleModalNode ? <IconEyeClose /> : null}\n          </div>\n        </div>\n        <div className=\"tree-pane-modal-content\">\n          <TreeBranches\n            treeNode={rootTreeNode}\n            expanded={expanded}\n            isModal\n            pluginContext={this.pluginContext}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default class TreeNodeView extends Component<{\n  treeNode: TreeNode;\n  isModal?: boolean;\n  pluginContext: IPublicModelPluginContext;\n  isRootNode: boolean;\n}> {\n  state = {\n    expanded: false,\n    selected: false,\n    hidden: false,\n    locked: false,\n    detecting: false,\n    isRoot: false,\n    highlight: false,\n    dropping: false,\n    conditionFlow: false,\n    expandable: false,\n  };\n\n  eventOffCallbacks: Array<() => void> = [];\n  constructor(props: any) {\n    super(props);\n\n    const { treeNode, isRootNode } = this.props;\n    this.state = {\n      expanded: isRootNode ? true : treeNode.expanded,\n      selected: treeNode.selected,\n      hidden: treeNode.hidden,\n      locked: treeNode.locked,\n      detecting: treeNode.detecting,\n      isRoot: treeNode.isRoot(),\n      // 是否投放响应\n      dropping: treeNode.dropDetail?.index != null,\n      conditionFlow: treeNode.node.conditionGroup != null,\n      highlight: treeNode.isFocusingNode(),\n      expandable: treeNode.expandable,\n    };\n  }\n\n  componentDidMount() {\n    const { treeNode, pluginContext } = this.props;\n    const { project } = pluginContext;\n\n    const doc = project.currentDocument;\n\n    treeNode.onExpandedChanged = ((expanded: boolean) => {\n      this.setState({ expanded });\n    });\n    treeNode.onHiddenChanged = (hidden: boolean) => {\n      this.setState({ hidden });\n    };\n    treeNode.onLockedChanged = (locked: boolean) => {\n      this.setState({ locked });\n    };\n    treeNode.onExpandableChanged = (expandable: boolean) => {\n      this.setState({ expandable });\n    };\n\n    this.eventOffCallbacks.push(\n      doc?.onDropLocationChanged((document: IPublicModelDocumentModel) => {\n        this.setState({\n          dropping: treeNode.dropDetail?.index != null,\n        });\n      }),\n    );\n\n    const offSelectionChange = doc?.selection?.onSelectionChange(() => {\n      this.setState({ selected: treeNode.selected });\n    });\n    this.eventOffCallbacks.push(offSelectionChange!);\n    const offDetectingChange = doc?.detecting?.onDetectingChange(() => {\n      this.setState({ detecting: treeNode.detecting });\n    });\n    this.eventOffCallbacks.push(offDetectingChange!);\n  }\n  componentWillUnmount(): void {\n    this.eventOffCallbacks?.forEach((offFun: () => void) => {\n      offFun();\n    });\n  }\n\n  shouldShowModalTreeNode(): boolean {\n    const { treeNode, isRootNode, pluginContext } = this.props;\n    if (!isRootNode) {\n      // 只在 当前树 的根节点展示模态节点\n      return false;\n    }\n\n    // 当指定了新的根节点时，要从原始的根节点去获取模态节点\n    const { project } = pluginContext;\n    const rootNode = project.currentDocument?.root;\n    const rootTreeNode = treeNode.tree.getTreeNode(rootNode!);\n    const modalNodes = rootTreeNode.children?.filter((item) => {\n      return item.node.componentMeta?.isModal;\n    });\n    return !!(modalNodes && modalNodes.length > 0);\n  }\n\n  render() {\n    const { treeNode, isModal, isRootNode } = this.props;\n    const className = classNames('tree-node', {\n      // 是否展开\n      expanded: this.state.expanded,\n      // 是否选中的\n      selected: this.state.selected,\n      // 是否隐藏的\n      hidden: this.state.hidden,\n      // 是否锁定的\n      locked: this.state.locked,\n      // 是否悬停中\n      detecting: this.state.detecting,\n      // 是否投放响应\n      dropping: this.state.dropping,\n      'is-root': this.state.isRoot,\n      'condition-flow': this.state.conditionFlow,\n      highlight: this.state.highlight,\n    });\n    let shouldShowModalTreeNode: boolean = this.shouldShowModalTreeNode();\n\n    // filter 处理\n    const { filterWorking, matchChild, matchSelf } = treeNode.filterReult;\n    if (!isRootNode && filterWorking && !matchChild && !matchSelf) {\n      // 条件过滤生效时，如果未命中本节点或子节点，则不展示该节点\n      // 根节点始终展示\n      return null;\n    }\n    return (\n      <div\n        className={className}\n        data-id={treeNode.id}\n      >\n        <TreeTitle\n          treeNode={treeNode}\n          isModal={isModal}\n          expanded={this.state.expanded}\n          hidden={this.state.hidden}\n          locked={this.state.locked}\n          expandable={this.state.expandable}\n          pluginContext={this.props.pluginContext}\n        />\n        {shouldShowModalTreeNode &&\n          <ModalTreeNodeView\n            treeNode={treeNode}\n            pluginContext={this.props.pluginContext}\n          />\n        }\n        <TreeBranches\n          treeNode={treeNode}\n          isModal={false}\n          expanded={this.state.expanded}\n          pluginContext={this.props.pluginContext}\n        />\n      </div>\n    );\n  }\n}\n","import { Component, MouseEvent as ReactMouseEvent } from 'react';\nimport { isFormEvent, canClickNode, isShaken } from '@alilc/lowcode-utils';\nimport { Tree } from '../controllers/tree';\nimport TreeNodeView from './tree-node';\nimport { IPublicEnumDragObjectType, IPublicModelPluginContext, IPublicModelNode } from '@alilc/lowcode-types';\n\nfunction getTreeNodeIdByEvent(e: ReactMouseEvent, stop: Element): null | string {\n  let target: Element | null = e.target as Element;\n  if (!target || !stop.contains(target)) {\n    return null;\n  }\n  target = target.closest('[data-id]');\n  if (!target || !stop.contains(target)) {\n    return null;\n  }\n\n  return (target as HTMLDivElement).dataset.id || null;\n}\n\nexport default class TreeView extends Component<{\n  tree: Tree;\n  pluginContext: IPublicModelPluginContext;\n}> {\n  private shell: HTMLDivElement | null = null;\n\n  private hover(e: ReactMouseEvent) {\n    const { project } = this.props.pluginContext;\n    const detecting = project.currentDocument?.detecting;\n    if (detecting?.enable) {\n      return;\n    }\n    const node = this.getTreeNodeFromEvent(e)?.node;\n    detecting?.capture(node as any);\n  }\n\n  private onClick = (e: ReactMouseEvent) => {\n    if (this.ignoreUpSelected) {\n      this.boostEvent = undefined;\n      return;\n    }\n    if (this.boostEvent && isShaken(this.boostEvent, e.nativeEvent)) {\n      this.boostEvent = undefined;\n      return;\n    }\n    this.boostEvent = undefined;\n    const treeNode = this.getTreeNodeFromEvent(e);\n    if (!treeNode) {\n      return;\n    }\n    const { node } = treeNode;\n\n    if (!canClickNode(node, e)) {\n      return;\n    }\n\n    const { project, event, canvas } = this.props.pluginContext;\n    const doc = project.currentDocument;\n    const selection = doc?.selection;\n    const focusNode = doc?.focusNode;\n    const { id } = node;\n    const isMulti = e.metaKey || e.ctrlKey || e.shiftKey;\n    canvas.activeTracker?.track(node);\n    if (isMulti && !node.contains(focusNode) && selection.has(id)) {\n      if (!isFormEvent(e.nativeEvent)) {\n        selection.remove(id);\n      }\n    } else {\n      selection.select(id);\n      const selectedNode = selection?.getNodes()?.[0];\n      const npm = selectedNode?.componentMeta?.npm;\n      const selected =\n        [npm?.package, npm?.componentName].filter((item) => !!item).join('-') ||\n        selectedNode?.componentMeta?.componentName ||\n        '';\n      event.emit('outlinePane.select', {\n        selected,\n      });\n    }\n  };\n\n  private onDoubleClick = (e: ReactMouseEvent) => {\n    e.preventDefault();\n    const treeNode = this.getTreeNodeFromEvent(e);\n    if (treeNode?.id === this.state.root?.id) {\n      return;\n    }\n    if (!treeNode?.expanded) {\n      this.props.tree.expandAllDecendants(treeNode);\n    } else {\n      this.props.tree.collapseAllDecendants(treeNode);\n    }\n  };\n\n  private onMouseOver = (e: ReactMouseEvent) => {\n    this.hover(e);\n  };\n\n  private getTreeNodeFromEvent(e: ReactMouseEvent) {\n    if (!this.shell) {\n      return;\n    }\n    const id = getTreeNodeIdByEvent(e, this.shell);\n    if (!id) {\n      return;\n    }\n\n    const { tree } = this.props;\n    return tree.getTreeNodeById(id);\n  }\n\n  private ignoreUpSelected = false;\n\n  private boostEvent?: MouseEvent;\n\n  private onMouseDown = (e: ReactMouseEvent) => {\n    if (isFormEvent(e.nativeEvent)) {\n      return;\n    }\n    const treeNode = this.getTreeNodeFromEvent(e);\n    if (!treeNode) {\n      return;\n    }\n\n    const { node } = treeNode;\n\n    if (!canClickNode(node, e)) {\n      return;\n    }\n    const { project, canvas } = this.props.pluginContext;\n    const selection = project.currentDocument?.selection;\n    const focusNode = project.currentDocument?.focusNode;\n\n    // TODO: shift selection\n    const isMulti = e.metaKey || e.ctrlKey || e.shiftKey;\n    const isLeftButton = e.button === 0;\n\n    if (isLeftButton && !node.contains(focusNode)) {\n      let nodes: IPublicModelNode[] = [node];\n      this.ignoreUpSelected = false;\n      if (isMulti) {\n        // multi select mode, directily add\n        if (!selection.has(node.id)) {\n          canvas.activeTracker?.track(node);\n          selection.add(node.id);\n          this.ignoreUpSelected = true;\n        }\n        // todo: remove rootNodes id\n        selection.remove(focusNode.id);\n        // 获得顶层 nodes\n        nodes = selection.getTopNodes();\n      } else if (selection.has(node.id)) {\n        nodes = selection.getTopNodes();\n      }\n      this.boostEvent = e.nativeEvent;\n      canvas.dragon?.boost(\n        {\n          type: IPublicEnumDragObjectType.Node,\n          nodes,\n        },\n        this.boostEvent,\n      );\n    }\n  };\n\n  private onMouseLeave = () => {\n    const { pluginContext } = this.props;\n    const { project } = pluginContext;\n    const doc = project.currentDocument;\n    doc?.detecting.leave();\n  };\n\n  state = {\n    root: null,\n  };\n\n  componentDidMount() {\n    const { tree, pluginContext } = this.props;\n    const { root } = tree;\n    const { project } = pluginContext;\n    this.setState({ root });\n    const doc = project.currentDocument;\n    doc?.onFocusNodeChanged(() => {\n      this.setState({\n        root: tree.root,\n      });\n    });\n  }\n\n  render() {\n    if (!this.state.root) {\n      return null;\n    }\n    return (\n      <div\n        className=\"lc-outline-tree\"\n        ref={(shell) => { this.shell = shell; }}\n        onMouseDownCapture={this.onMouseDown}\n        onMouseOver={this.onMouseOver}\n        onClick={this.onClick}\n        onDoubleClick={this.onDoubleClick}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <TreeNodeView\n          key={this.state.root?.id}\n          treeNode={this.state.root}\n          pluginContext={this.props.pluginContext}\n          isRootNode\n        />\n      </div>\n    );\n  }\n}\n","import TreeNode from '../controllers/tree-node';\n\nexport const FilterType = {\n  CONDITION: 'CONDITION',\n  LOOP: 'LOOP',\n  LOCKED: 'LOCKED',\n  HIDDEN: 'HIDDEN',\n};\n\nexport const FILTER_OPTIONS = [{\n  value: FilterType.CONDITION,\n  label: 'Conditional rendering',\n}, {\n  value: FilterType.LOOP,\n  label: 'Loop rendering',\n}, {\n  value: FilterType.LOCKED,\n  label: 'Locked',\n}, {\n  value: FilterType.HIDDEN,\n  label: 'Hidden',\n}];\n\nexport const matchTreeNode = (\n  treeNode: TreeNode,\n  keywords: string,\n  filterOps: string[],\n): boolean => {\n  // 无效节点\n  if (!treeNode || !treeNode.node) {\n    return false;\n  }\n\n  // 过滤条件为空，重置过滤结果\n  if (!keywords && filterOps.length === 0) {\n    treeNode.setFilterReult({\n      filterWorking: false,\n      matchChild: false,\n      matchSelf: false,\n      keywords: '',\n    });\n\n    (treeNode.children || []).concat(treeNode.slots || []).forEach((childNode) => {\n      matchTreeNode(childNode, keywords, filterOps);\n    });\n\n    return false;\n  }\n\n  const { node } = treeNode;\n\n  // 命中过滤选项\n  const matchFilterOps = filterOps.length === 0 || !!filterOps.find((op: string) => {\n    switch (op) {\n      case FilterType.CONDITION:\n        return node.hasCondition();\n      case FilterType.LOOP:\n        return node.hasLoop();\n      case FilterType.LOCKED:\n        return treeNode.locked;\n      case FilterType.HIDDEN:\n        return treeNode.hidden;\n      default:\n        return false;\n    }\n  });\n\n  // 命中节点名\n  const matchKeywords = typeof treeNode.titleLabel === 'string' && treeNode.titleLabel.indexOf(keywords) > -1;\n\n  // 同时命中才展示（根结点永远命中）\n  const matchSelf = treeNode.isRoot() || (matchFilterOps && matchKeywords);\n\n  // 命中子节点\n  const matchChild = !!(treeNode.children || []).concat(treeNode.slots || [])\n    .map((childNode: TreeNode) => {\n      return matchTreeNode(childNode, keywords, filterOps);\n    }).find(Boolean);\n\n  treeNode.setFilterReult({\n    filterWorking: true,\n    matchChild,\n    matchSelf,\n    keywords,\n  });\n\n  return matchSelf || matchChild;\n};\n","import React, { Component } from 'react';\nimport './style.less';\nimport { IconFilter } from '../icons/filter';\nimport { Search, Checkbox, Balloon, Divider } from '@alifd/next';\nimport TreeNode from '../controllers/tree-node';\nimport { Tree } from '../controllers/tree';\nimport { matchTreeNode, FILTER_OPTIONS } from './filter-tree';\nimport { IPublicModelPluginContext } from '@alilc/lowcode-types';\n\nexport default class Filter extends Component<{\n  tree: Tree;\n  pluginContext: IPublicModelPluginContext;\n}, {\n  keywords: string;\n  filterOps: string[];\n}> {\n  state = {\n    keywords: '',\n    filterOps: [],\n  };\n\n  handleSearchChange = (val: string) => {\n    this.setState({\n      keywords: val.trim(),\n    }, this.filterTree);\n  };\n\n  handleOptionChange = (val: string[]) => {\n    this.setState({\n      filterOps: val,\n    }, this.filterTree);\n  };\n\n  handleCheckAll = () => {\n    const { filterOps } = this.state;\n    const final = filterOps.length === FILTER_OPTIONS.length\n      ? [] : FILTER_OPTIONS.map((op) => op.value);\n\n    this.handleOptionChange(final);\n  };\n\n  filterTree() {\n    const { tree } = this.props;\n    const { keywords, filterOps } = this.state;\n\n    matchTreeNode(tree.root as TreeNode, keywords, filterOps);\n  }\n\n  render() {\n    const { keywords, filterOps } = this.state;\n    const indeterminate = filterOps.length > 0 && filterOps.length < FILTER_OPTIONS.length;\n    const checkAll = filterOps.length === FILTER_OPTIONS.length;\n\n    return (\n      <div className=\"lc-outline-filter\">\n        <Search\n          hasClear\n          shape=\"simple\"\n          placeholder={this.props.pluginContext.intl('Filter Node')}\n          className=\"lc-outline-filter-search-input\"\n          value={keywords}\n          onChange={this.handleSearchChange}\n        />\n        <Balloon\n          v2\n          align=\"br\"\n          closable={false}\n          triggerType=\"hover\"\n          trigger={(\n            <div className=\"lc-outline-filter-icon\">\n              <IconFilter />\n            </div>\n          )}\n        >\n          <Checkbox\n            checked={checkAll}\n            indeterminate={indeterminate}\n            onChange={this.handleCheckAll}\n          >\n            {this.props.pluginContext.intlNode('Check All')}\n          </Checkbox>\n          <Divider />\n          <Checkbox.Group\n            value={filterOps}\n            direction=\"ver\"\n            onChange={this.handleOptionChange}\n          >\n            {FILTER_OPTIONS.map((op) => (\n              <Checkbox\n                id={op.value}\n                value={op.value}\n                key={op.value}\n              >\n                {this.props.pluginContext.intlNode(op.label)}\n              </Checkbox>\n            ))}\n          </Checkbox.Group>\n        </Balloon>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { PaneController } from '../controllers/pane-controller';\nimport TreeView from './tree';\nimport './style.less';\nimport { IPublicModelPluginContext } from '@alilc/lowcode-types';\nimport Filter from './filter';\nimport { TreeMaster } from '../controllers/tree-master';\n\nexport class Pane extends Component<{\n  config: any;\n  pluginContext: IPublicModelPluginContext;\n  treeMaster: TreeMaster;\n  controller: PaneController;\n}> {\n  private controller;\n  private treeMaster: TreeMaster;\n\n  constructor(props: any) {\n    super(props);\n    const { controller, treeMaster } = props;\n    this.treeMaster = treeMaster;\n    this.controller = controller;\n  }\n\n  componentWillUnmount() {\n    this.controller.purge();\n  }\n\n  render() {\n    const tree = this.treeMaster.currentTree;\n\n    if (!tree) {\n      return (\n        <div className=\"lc-outline-pane\">\n          <p className=\"lc-outline-notice\">{this.props.pluginContext.intl('Initializing')}</p>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"lc-outline-pane\">\n        <Filter tree={tree} pluginContext={this.props.pluginContext} />\n        <div ref={(shell) => this.controller.mount(shell)} className=\"lc-outline-tree-container\">\n          <TreeView key={tree.id} tree={tree} pluginContext={this.props.pluginContext} />\n        </div>\n      </div>\n    );\n  }\n}\n","import { SVGIcon, IconProps } from '@alilc/lowcode-utils';\n\nexport function IconOutline(props: IconProps) {\n  return (\n    <SVGIcon viewBox=\"0 0 1024 1024\" {...props}>\n      <path d=\"M128 96h512a64 64 0 0 1 64 64v64a64 64 0 0 1-64 64H128a64 64 0 0 1-64-64V160a64 64 0 0 1 64-64z m32 64a32 32 0 1 0 0 64h448a32 32 0 0 0 0-64H160z m224 576h512a64 64 0 0 1 64 64v64a64 64 0 0 1-64 64H384a64 64 0 0 1-64-64v-64a64 64 0 0 1 64-64z m32 64a32 32 0 0 0 0 64h448a32 32 0 0 0 0-64H416z m-32-384h512a64 64 0 0 1 64 64v64a64 64 0 0 1-64 64H384a64 64 0 0 1-64-64v-64a64 64 0 0 1 64-64z m32 64a32 32 0 0 0 0 64h448a32 32 0 0 0 0-64H416z\" />\n    </SVGIcon>\n  );\n}\n\nIconOutline.displayName = 'IconOutline';\n\n","export const BackupPaneName = 'outline-backup-pane';\nexport const MasterPaneName = 'outline-master-pane';","import {\n  IPublicTypeTitleContent,\n  IPublicTypeLocationChildrenDetail,\n  IPublicModelNode,\n  IPublicModelPluginContext,\n} from '@alilc/lowcode-types';\nimport { isI18nData, isLocationChildrenDetail } from '@alilc/lowcode-utils';\nimport { Tree } from './tree';\n\n/**\n * 大纲树过滤结果\n */\nexport interface FilterResult {\n  // 过滤条件是否生效\n  filterWorking: boolean;\n  // 命中子节点\n  matchChild: boolean;\n  // 命中本节点\n  matchSelf: boolean;\n  // 关键字\n  keywords: string;\n}\n\nexport default class TreeNode {\n  readonly pluginContext: IPublicModelPluginContext;\n  onFilterResultChanged: () => void;\n  onExpandedChanged: (expanded: boolean) => void;\n  onHiddenChanged: (hidden: boolean) => void;\n  onLockedChanged: (locked: boolean) => void;\n  onTitleLabelChanged: (treeNode: TreeNode) => void;\n  onExpandableChanged: (expandable: boolean) => void;\n\n  get id(): string {\n    return this.node.id;\n  }\n\n  /**\n   * 是否可以展开\n   */\n  get expandable(): boolean {\n    if (this.locked) return false;\n    return this.hasChildren() || this.hasSlots() || this.dropDetail?.index != null;\n  }\n\n  /**\n   * 触发 onExpandableChanged 回调\n   */\n  notifyExpandableChanged(): void {\n    this.onExpandableChanged && this.onExpandableChanged(this.expandable);\n  }\n\n  /**\n   * 插入\"线\"位置信息\n   */\n  get dropDetail(): IPublicTypeLocationChildrenDetail | undefined | null {\n    const loc = this.pluginContext.project.getCurrentDocument()?.dropLocation;\n    return loc && this.isResponseDropping() && isLocationChildrenDetail(loc.detail) ? loc.detail : null;\n  }\n\n  get depth(): number {\n    return this.node.zLevel;\n  }\n\n  isRoot(includeOriginalRoot = false) {\n    const rootNode = this.pluginContext.project.getCurrentDocument()?.root;\n    return this.tree.root === this || (includeOriginalRoot && rootNode === this.node);\n  }\n\n  /**\n   * 是否是响应投放区\n   */\n  isResponseDropping(): boolean {\n    const loc = this.pluginContext.project.getCurrentDocument()?.dropLocation;\n    if (!loc) {\n      return false;\n    }\n    return loc.target?.id === this.id;\n  }\n\n  isFocusingNode(): boolean {\n    const loc = this.pluginContext.project.getCurrentDocument()?.dropLocation;\n    if (!loc) {\n      return false;\n    }\n    return (\n      isLocationChildrenDetail(loc.detail) && loc.detail.focus?.type === 'node' && loc.detail?.focus?.node.id === this.id\n    );\n  }\n\n  /**\n   * 默认为折叠状态\n   * 在初始化根节点时，设置为展开状态\n   */\n  private _expanded = false;\n\n  get expanded(): boolean {\n    return this.isRoot(true) || (this.expandable && this._expanded);\n  }\n\n  setExpanded(value: boolean) {\n    this._expanded = value;\n    this.onExpandedChanged && this.onExpandedChanged(value);\n  }\n\n  get detecting() {\n    const doc = this.pluginContext.project.currentDocument;\n    return !!(doc?.isDetectingNode(this.node));\n  }\n\n  get hidden(): boolean {\n    const cv = this.node.isConditionalVisible();\n    if (cv == null) {\n      return !this.node.visible;\n    }\n    return !cv;\n  }\n\n  setHidden(flag: boolean) {\n    if (this.node.conditionGroup) {\n      return;\n    }\n    this.node.visible = !flag;\n    this.onHiddenChanged && this.onHiddenChanged(flag);\n  }\n\n  get locked(): boolean {\n    return this.node.isLocked;\n  }\n\n  setLocked(flag: boolean) {\n    this.node.lock(flag);\n    this.onLockedChanged && this.onLockedChanged(flag);\n  }\n\n  get selected(): boolean {\n    // TODO: check is dragging\n    const selection = this.pluginContext.project.getCurrentDocument()?.selection;\n    if (!selection) {\n      return false;\n    }\n    return selection?.has(this.node.id);\n  }\n\n  get title(): IPublicTypeTitleContent {\n    return this.node.title;\n  }\n\n  get titleLabel() {\n    let { title } = this;\n    if (!title) {\n      return '';\n    }\n    if ((title as any).label) {\n      title = (title as any).label;\n    }\n    if (typeof title === 'string') {\n      return title;\n    }\n    if (isI18nData(title)) {\n      const currentLocale = this.pluginContext.getLocale();\n      const currentTitle = title[currentLocale];\n      return currentTitle;\n    }\n    return this.node.componentName;\n  }\n\n  setTitleLabel(label: string) {\n    const origLabel = this.titleLabel;\n    if (label === origLabel) {\n      return;\n    }\n    if (label === '') {\n      this.node.getExtraProp('title', false)?.remove();\n    } else {\n      this.node.getExtraProp('title', true)?.setValue(label);\n    }\n    this.onTitleLabelChanged && this.onTitleLabelChanged(this);\n  }\n\n  get icon() {\n    return this.node.componentMeta.icon;\n  }\n\n  get parent(): TreeNode | null {\n    const { parent } = this.node;\n    if (parent) {\n      return this.tree.getTreeNode(parent);\n    }\n    return null;\n  }\n\n  get slots(): TreeNode[] {\n    // todo: shallowEqual\n    return this.node.slots.map((node) => this.tree.getTreeNode(node));\n  }\n\n  get children(): TreeNode[] | null {\n    return this.node.children?.map((node) => this.tree.getTreeNode(node)) || null;\n  }\n\n  /**\n   * 是否是容器，允许子节点拖入\n   */\n  isContainer(): boolean {\n    return this.node.isContainerNode;\n  }\n\n  /**\n   * 判断是否有\"插槽\"\n   */\n  hasSlots(): boolean {\n    return this.node.hasSlots();\n  }\n\n  hasChildren(): boolean {\n    return !!(this.isContainer() && this.node.children?.notEmptyNode);\n  }\n\n  select(isMulti: boolean) {\n    const { node } = this;\n\n    const selection = this.pluginContext.project.getCurrentDocument()?.selection;\n    if (isMulti) {\n      selection?.add(node.id);\n    } else {\n      selection?.select(node.id);\n    }\n  }\n\n  /**\n   * 展开节点，支持依次展开父节点\n   */\n  expand(tryExpandParents = false) {\n    // 这边不能直接使用 expanded，需要额外判断是否可以展开\n    // 如果只使用 expanded，会漏掉不可以展开的情况，即在不可以展开的情况下，会触发展开\n    if (this.expandable && !this._expanded) {\n      this.setExpanded(true);\n    }\n    if (tryExpandParents) {\n      this.expandParents();\n    }\n  }\n\n  expandParents() {\n    let p = this.node.parent;\n    while (p) {\n      this.tree.getTreeNode(p).setExpanded(true);\n      p = p.parent;\n    }\n  }\n\n  private _node: IPublicModelNode;\n\n  get node(): IPublicModelNode {\n    return this._node;\n  }\n\n  readonly tree: Tree;\n\n  constructor(tree: Tree, node: IPublicModelNode, pluginContext: IPublicModelPluginContext) {\n    this.tree = tree;\n    this.pluginContext = pluginContext;\n    this._node = node;\n  }\n\n  setNode(node: IPublicModelNode) {\n    if (this._node !== node) {\n      this._node = node;\n    }\n  }\n\n  private _filterResult: FilterResult = {\n    filterWorking: false,\n    matchChild: false,\n    matchSelf: false,\n    keywords: '',\n  };\n\n  get filterReult(): FilterResult {\n    return this._filterResult;\n  }\n\n  setFilterReult(val: FilterResult) {\n    this._filterResult = val;\n    if (this.onFilterResultChanged) {\n      this.onFilterResultChanged();\n    }\n  }\n}\n","import TreeNode from './tree-node';\nimport { IPublicModelNode, IPublicModelPluginContext } from '@alilc/lowcode-types';\n\nexport class Tree {\n  private treeNodesMap = new Map<string, TreeNode>();\n\n  readonly id: string | undefined;\n\n  readonly pluginContext: IPublicModelPluginContext;\n\n  get root(): TreeNode | null {\n    if (this.pluginContext.project.currentDocument?.focusNode) {\n      return this.getTreeNode(this.pluginContext.project.currentDocument.focusNode!);\n    }\n    return null;\n  }\n\n  constructor(pluginContext: IPublicModelPluginContext) {\n    this.pluginContext = pluginContext;\n    const doc = this.pluginContext.project.currentDocument;\n    this.id = doc?.id;\n\n    doc?.onMountNode((payload: {node: IPublicModelNode }) => {\n      const { node } = payload;\n      const parentNode = node.parent;\n      if (!parentNode) {\n        return;\n      }\n      const parentTreeNode = this.getTreeNodeById(parentNode.id);\n      parentTreeNode?.notifyExpandableChanged();\n    });\n\n    doc?.onRemoveNode((node: IPublicModelNode) => {\n      const parentNode = node.parent;\n      if (!parentNode) {\n        return;\n      }\n      const parentTreeNode = this.getTreeNodeById(parentNode.id);\n      parentTreeNode?.notifyExpandableChanged();\n    });\n  }\n\n  setNodeSelected(nodeId: string): void {\n    // 目标节点选中，其他节点展开\n    const treeNode = this.treeNodesMap.get(nodeId);\n    if (!treeNode) {\n      return;\n    }\n    this.expandAllAncestors(treeNode);\n  }\n\n  getTreeNode(node: IPublicModelNode): TreeNode {\n    if (this.treeNodesMap.has(node.id)) {\n      const tnode = this.treeNodesMap.get(node.id)!;\n      tnode.setNode(node);\n      return tnode;\n    }\n\n    const treeNode = new TreeNode(this, node, this.pluginContext);\n    this.treeNodesMap.set(node.id, treeNode);\n    return treeNode;\n  }\n\n  getTreeNodeById(id: string) {\n    return this.treeNodesMap.get(id);\n  }\n\n  expandAllAncestors(treeNode: TreeNode | undefined | null) {\n    if (!treeNode) {\n      return;\n    }\n    if (treeNode.isRoot()) {\n      return;\n    }\n    const ancestors = [];\n    let currentNode: TreeNode | null | undefined = treeNode;\n    while (!treeNode.isRoot()) {\n      currentNode = currentNode?.parent;\n      if (currentNode) {\n        ancestors.unshift(currentNode);\n      } else {\n        break;\n      }\n    }\n    ancestors.forEach((ancestor) => {\n      ancestor.setExpanded(true);\n    });\n  }\n\n  expandAllDecendants(treeNode: TreeNode | undefined | null) {\n    if (!treeNode) {\n      return;\n    }\n    treeNode.setExpanded(true);\n    const children = treeNode && treeNode.children;\n    if (children) {\n      children.forEach((child) => {\n        this.expandAllDecendants(child);\n      });\n    }\n  }\n\n  collapseAllDecendants(treeNode: TreeNode | undefined | null): void {\n    if (!treeNode) {\n      return;\n    }\n    treeNode.setExpanded(false);\n    const children = treeNode && treeNode.children;\n    if (children) {\n      children.forEach((child) => {\n        this.collapseAllDecendants(child);\n      });\n    }\n  }\n}\n","import { isLocationChildrenDetail } from '@alilc/lowcode-utils';\nimport { IPublicModelPluginContext, IPublicTypeActiveTarget, IPublicModelNode } from '@alilc/lowcode-types';\nimport TreeNode from './tree-node';\nimport { Tree } from './tree';\n\nexport interface ITreeBoard {\n  readonly at: string | symbol;\n  scrollToNode(treeNode: TreeNode, detail?: any): void;\n}\n\nexport class TreeMaster {\n  readonly pluginContext: IPublicModelPluginContext;\n\n  private boards = new Set<ITreeBoard>();\n\n  private treeMap = new Map<string, Tree>();\n\n  constructor(pluginContext: IPublicModelPluginContext) {\n    this.pluginContext = pluginContext;\n    let startTime: any;\n    const { event, project, canvas } = this.pluginContext;\n    canvas.dragon?.onDragstart(() => {\n      startTime = Date.now() / 1000;\n      // needs?\n      this.toVision();\n    });\n    canvas.activeTracker?.onChange((target: IPublicTypeActiveTarget) => {\n      const { node, detail } = target;\n      const tree = this.currentTree;\n      if (!tree/* || node.document !== tree.document */) {\n        return;\n      }\n      const treeNode = tree.getTreeNode(node);\n      if (detail && isLocationChildrenDetail(detail)) {\n        treeNode.expand(true);\n      } else {\n        treeNode.expandParents();\n      }\n      this.boards.forEach((board) => {\n        board.scrollToNode(treeNode, detail);\n      });\n    });\n    canvas.dragon?.onDragend(() => {\n      const endTime: any = Date.now() / 1000;\n      const nodes = project.currentDocument?.selection?.getNodes();\n      event.emit('outlinePane.dragend', {\n        selected: nodes\n          ?.map((n) => {\n            if (!n) {\n              return;\n            }\n            const npm = n?.componentMeta?.npm;\n            return (\n              [npm?.package, npm?.componentName].filter((item) => !!item).join('-') || n?.componentMeta?.componentName\n            );\n          })\n          .join('&'),\n        time: (endTime - startTime).toFixed(2),\n      });\n    });\n    project.onRemoveDocument((data: {id: string}) => {\n      const { id } = data;\n      this.treeMap.delete(id);\n    });\n  }\n\n  private toVision() {\n    const tree = this.currentTree;\n    if (tree) {\n      const selection = this.pluginContext.project.getCurrentDocument()?.selection;\n      selection?.getTopNodes().forEach((node: IPublicModelNode) => {\n        tree.getTreeNode(node).setExpanded(false);\n      });\n    }\n  }\n\n  addBoard(board: ITreeBoard) {\n    this.boards.add(board);\n  }\n\n  removeBoard(board: ITreeBoard) {\n    this.boards.delete(board);\n  }\n\n  purge() {\n    // todo others purge\n  }\n\n  get currentTree(): Tree | null {\n    const doc = this.pluginContext.project.getCurrentDocument();\n    if (doc) {\n      const { id } = doc;\n      if (this.treeMap.has(id)) {\n        return this.treeMap.get(id)!;\n      }\n      const tree = new Tree(this.pluginContext);\n      this.treeMap.set(id, tree);\n      return tree;\n    }\n    return null;\n  }\n}\n","import { isLocationChildrenDetail } from '@alilc/lowcode-utils';\nimport { IPublicModelDropLocation, IPublicModelNode } from '@alilc/lowcode-types';\n\n\nconst IndentSensitive = 15;\nexport class IndentTrack {\n  private indentStart: number | null = null;\n\n  reset() {\n    this.indentStart = null;\n  }\n\n  // eslint-disable-next-line max-len\n  getIndentParent(lastLoc: IPublicModelDropLocation, loc: IPublicModelDropLocation): [IPublicModelNode, number | undefined] | null {\n    if (\n      lastLoc.target !== loc.target ||\n      !isLocationChildrenDetail(lastLoc.detail) ||\n      !isLocationChildrenDetail(loc.detail) ||\n      lastLoc.source !== loc.source ||\n      lastLoc.detail.index !== loc.detail.index ||\n      loc.detail.index == null\n    ) {\n      this.indentStart = null;\n      return null;\n    }\n    if (this.indentStart == null) {\n      this.indentStart = lastLoc.event.globalX;\n    }\n    const delta = loc.event.globalX - this.indentStart;\n    const indent = Math.floor(Math.abs(delta) / IndentSensitive);\n    if (indent < 1) {\n      return null;\n    }\n    this.indentStart = loc.event.globalX;\n    const direction = delta < 0 ? 'left' : 'right';\n\n    let parent: IPublicModelNode = loc.target;\n    const { index } = loc.detail;\n\n    if (direction === 'left') {\n      if (!parent.parent || index < (parent.children?.size || 0) || parent.isSlotNode) {\n        return null;\n      }\n      return [(parent as any).parent, parent.index + 1];\n    } else {\n      if (index === 0) {\n        return null;\n      }\n      parent = parent.children?.get(index - 1) as any;\n      if (parent && parent.isContainerNode) {\n        return [parent, parent.children?.size];\n      }\n    }\n\n    return null;\n  }\n}\n","import { isLocationChildrenDetail } from '@alilc/lowcode-utils';\nimport { IPublicModelNode, IPublicModelDropLocation, IPublicModelLocateEvent } from '@alilc/lowcode-types';\n\n\n/**\n * 停留检查计时器\n */\nexport default class DwellTimer {\n  private timer: number | undefined;\n\n  private previous?: IPublicModelNode;\n\n  private event?: IPublicModelLocateEvent;\n\n  private decide: (node: IPublicModelNode, event: IPublicModelLocateEvent) => void;\n\n  private timeout = 500;\n\n  constructor(decide: (node: IPublicModelNode, event: IPublicModelLocateEvent) => void, timeout = 500) {\n    this.decide = decide;\n    this.timeout = timeout;\n  }\n\n  focus(node: IPublicModelNode, event: IPublicModelLocateEvent) {\n    this.event = event;\n    if (this.previous === node) {\n      return;\n    }\n    this.reset();\n    this.previous = node;\n    this.timer = setTimeout(() => {\n      this.previous && this.decide(this.previous, this.event!);\n      this.reset();\n    }, this.timeout) as any;\n  }\n\n  tryFocus(loc?: IPublicModelDropLocation | null) {\n    if (!loc || !isLocationChildrenDetail(loc.detail)) {\n      this.reset();\n      return;\n    }\n    if (loc.detail.focus?.type === 'node') {\n      this.focus(loc.detail.focus.node, loc.event);\n    } else {\n      this.reset();\n    }\n  }\n\n  reset() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = undefined;\n    }\n\n    this.previous = undefined;\n  }\n}\n","/* eslint-disable max-len */\nimport requestIdleCallback, { cancelIdleCallback } from 'ric-shim';\nimport {\n  uniqueId,\n  isDragNodeObject,\n  isDragAnyObject,\n  isLocationChildrenDetail,\n} from '@alilc/lowcode-utils';\nimport {\n  IPublicModelDragObject,\n  IPublicTypeScrollable,\n  IPublicModelSensor,\n  IPublicTypeLocationChildrenDetail,\n  IPublicTypeLocationDetailType,\n  IPublicModelNode,\n  IPublicModelDropLocation,\n  IPublicModelScroller,\n  IPublicModelScrollTarget,\n  IPublicModelPluginContext,\n  IPublicModelLocateEvent,\n} from '@alilc/lowcode-types';\nimport TreeNode from './tree-node';\nimport { IndentTrack } from '../helper/indent-track';\nimport DwellTimer from '../helper/dwell-timer';\nimport { ITreeBoard, TreeMaster } from './tree-master';\n\nexport class PaneController implements IPublicModelSensor, ITreeBoard, IPublicTypeScrollable {\n  private pluginContext: IPublicModelPluginContext;\n\n  private treeMaster?: TreeMaster;\n\n  readonly id = uniqueId('outline');\n\n  private indentTrack = new IndentTrack();\n\n  private _sensorAvailable = false;\n\n  /**\n   * @see IPublicModelSensor\n   */\n  get sensorAvailable() {\n    return this._sensorAvailable;\n  }\n\n  private dwell = new DwellTimer((target, event) => {\n    const { canvas, project } = this.pluginContext;\n    const document = project.getCurrentDocument();\n    let index: any;\n    let focus: any;\n    let valid = true;\n    if (target.hasSlots()) {\n      index = null;\n      focus = { type: 'slots' };\n    } else {\n      index = 0;\n      valid = !!document?.checkNesting(target, event.dragObject as any);\n    }\n    canvas.createLocation({\n      target,\n      source: this.id,\n      event,\n      detail: {\n        type: IPublicTypeLocationDetailType.Children,\n        index,\n        focus,\n        valid,\n      },\n    });\n  });\n\n  /**\n   * @see ITreeBoard\n   */\n  readonly at: string | symbol;\n\n  private tryScrollAgain: number | null = null;\n\n  private sensing = false;\n\n  /**\n   * @see IScrollable\n   */\n  get bounds(): DOMRect | null {\n    if (!this._shell) {\n      return null;\n    }\n    return this._shell.getBoundingClientRect();\n  }\n\n  private _scrollTarget?: IPublicModelScrollTarget;\n\n  /**\n   * @see IScrollable\n   */\n  get scrollTarget() {\n    return this._scrollTarget;\n  }\n\n  private scroller?: IPublicModelScroller;\n\n  private _shell: HTMLDivElement | null = null;\n\n  constructor(at: string | symbol, pluginContext: IPublicModelPluginContext, treeMaster: TreeMaster) {\n    this.pluginContext = pluginContext;\n    this.treeMaster = treeMaster;\n    this.at = at;\n    let inited = false;\n    const setup = () => {\n      if (inited) {\n        return false;\n      }\n      inited = true;\n      this.treeMaster?.addBoard(this);\n      const { canvas } = this.pluginContext;\n      canvas.dragon?.addSensor(this);\n      this.scroller = canvas.createScroller(this);\n    };\n\n    setup();\n  }\n\n  /** -------------------- IPublicModelSensor begin -------------------- */\n\n  /**\n   * @see IPublicModelSensor\n   */\n  fixEvent(e: IPublicModelLocateEvent): IPublicModelLocateEvent {\n    if (e.fixed) {\n      return e;\n    }\n\n    const notMyEvent = e.originalEvent.view?.document !== document;\n\n    if (!e.target || notMyEvent) {\n      e.target = document.elementFromPoint(e.canvasX!, e.canvasY!);\n    }\n\n    // documentModel : 目标文档\n    e.documentModel = this.pluginContext.project.getCurrentDocument();\n\n    // 事件已订正\n    e.fixed = true;\n    return e;\n  }\n\n  /**\n   * @see IPublicModelSensor\n   */\n  locate(e: IPublicModelLocateEvent): IPublicModelDropLocation | undefined | null {\n    this.sensing = true;\n    this.scroller?.scrolling(e);\n    const { globalY, dragObject } = e;\n    const nodes = dragObject?.nodes;\n\n    const tree = this.treeMaster?.currentTree;\n    if (!tree || !tree.root || !this._shell) {\n      return null;\n    }\n\n    const operationalNodes = nodes?.filter((node: any) => {\n      const onMoveHook = node.componentMeta?.advanced.callbacks?.onMoveHook;\n      const canMove = onMoveHook && typeof onMoveHook === 'function' ? onMoveHook(node) : true;\n\n      return canMove;\n    });\n\n    // 如果拖拽的是 Node 才需要后面的判断，拖拽 data 不需要\n    if (isDragNodeObject(dragObject) && (!operationalNodes || operationalNodes.length === 0)) {\n      return;\n    }\n\n    const { project, canvas } = this.pluginContext;\n    const document = project.getCurrentDocument();\n    const pos = getPosFromEvent(e, this._shell);\n    const irect = this.getInsertionRect();\n    const originLoc = document?.dropLocation;\n\n    const componentMeta = e.dragObject?.nodes ? e.dragObject.nodes[0].componentMeta : null;\n    if (e.dragObject?.type === 'node' && componentMeta && componentMeta.isModal && document?.focusNode) {\n      return canvas.createLocation({\n        target: document?.focusNode,\n        detail: {\n          type: IPublicTypeLocationDetailType.Children,\n          index: 0,\n          valid: true,\n        },\n        source: this.id,\n        event: e,\n      });\n    }\n\n    if (originLoc\n      && ((pos && pos === 'unchanged') || (irect && globalY >= irect.top && globalY <= irect.bottom))\n      && dragObject) {\n      const loc = originLoc.clone(e);\n      const indented = this.indentTrack.getIndentParent(originLoc, loc);\n      if (indented) {\n        const [parent, index] = indented;\n        if (checkRecursion(parent, dragObject)) {\n          if (tree.getTreeNode(parent).expanded) {\n            this.dwell.reset();\n            return canvas.createLocation({\n              target: parent,\n              source: this.id,\n              event: e,\n              detail: {\n                type: IPublicTypeLocationDetailType.Children,\n                index,\n                valid: document?.checkNesting(parent, e.dragObject as any),\n              },\n            });\n          }\n\n          (originLoc.detail as IPublicTypeLocationChildrenDetail).focus = {\n            type: 'node',\n            node: parent,\n          };\n          // focus try expand go on\n          this.dwell.focus(parent, e);\n        } else {\n          this.dwell.reset();\n        }\n      // FIXME: recreate new location\n      } else if ((originLoc.detail as IPublicTypeLocationChildrenDetail).near) {\n        (originLoc.detail as IPublicTypeLocationChildrenDetail).near = undefined;\n        this.dwell.reset();\n      }\n      return;\n    }\n\n    this.indentTrack.reset();\n\n    if (pos && pos !== 'unchanged') {\n      let treeNode = tree.getTreeNodeById(pos.nodeId);\n      if (treeNode) {\n        let { focusSlots } = pos;\n        let { node } = treeNode;\n        if (isDragNodeObject(dragObject)) {\n          const newNodes = operationalNodes;\n          let i = newNodes.length;\n          let p: any = node;\n          while (i-- > 0) {\n            if (newNodes[i].contains(p)) {\n              p = newNodes[i].parent;\n            }\n          }\n          if (p !== node) {\n            node = p || document?.focusNode;\n            treeNode = tree.getTreeNode(node);\n            focusSlots = false;\n          }\n        }\n\n        if (focusSlots) {\n          this.dwell.reset();\n          return canvas.createLocation({\n            target: node as IPublicModelNode,\n            source: this.id,\n            event: e,\n            detail: {\n              type: IPublicTypeLocationDetailType.Children,\n              index: null,\n              valid: false,\n              focus: { type: 'slots' },\n            },\n          });\n        }\n\n        if (!treeNode.isRoot()) {\n          const loc = this.getNear(treeNode, e);\n          this.dwell.tryFocus(loc);\n          return loc;\n        }\n      }\n    }\n\n    const loc = this.drillLocate(tree.root, e);\n    this.dwell.tryFocus(loc);\n    return loc;\n  }\n\n  /**\n   * @see IPublicModelSensor\n   */\n  isEnter(e: IPublicModelLocateEvent): boolean {\n    if (!this._shell) {\n      return false;\n    }\n    const rect = this._shell.getBoundingClientRect();\n    return e.globalY >= rect.top && e.globalY <= rect.bottom && e.globalX >= rect.left && e.globalX <= rect.right;\n  }\n\n  /**\n   * @see IPublicModelSensor\n   */\n  deactiveSensor() {\n    this.sensing = false;\n    this.scroller?.cancel();\n    this.dwell.reset();\n    this.indentTrack.reset();\n  }\n\n  /** -------------------- IPublicModelSensor end -------------------- */\n\n  /** -------------------- ITreeBoard begin -------------------- */\n\n  /**\n   * @see ITreeBoard\n   */\n  scrollToNode(treeNode: TreeNode, detail?: any, tryTimes = 0) {\n    if (tryTimes < 1 && this.tryScrollAgain) {\n      cancelIdleCallback(this.tryScrollAgain);\n      this.tryScrollAgain = null;\n    }\n    if (!this.bounds || !this.scroller || !this.scrollTarget) {\n      // is a active sensor\n      return;\n    }\n\n    let rect: ClientRect | undefined;\n    if (detail && isLocationChildrenDetail(detail)) {\n      rect = this.getInsertionRect();\n    } else {\n      rect = this.getTreeNodeRect(treeNode);\n    }\n\n    if (!rect) {\n      if (tryTimes < 3) {\n        this.tryScrollAgain = requestIdleCallback(() => this.scrollToNode(treeNode, detail, tryTimes + 1));\n      }\n      return;\n    }\n    const { scrollHeight, top: scrollTop } = this.scrollTarget;\n    const { height, top, bottom } = this.bounds;\n    if (rect.top < top || rect.bottom > bottom) {\n      const opt: any = {};\n      opt.top = Math.min(rect.top + rect.height / 2 + scrollTop - top - height / 2, scrollHeight - height);\n      if (rect.height >= height) {\n        opt.top = Math.min(scrollTop + rect.top - top, opt.top);\n      }\n      this.scroller.scrollTo(opt);\n    }\n    // make tail scroll be sure\n    if (tryTimes < 4) {\n      this.tryScrollAgain = requestIdleCallback(() => this.scrollToNode(treeNode, detail, 4));\n    }\n  }\n\n  /** -------------------- ITreeBoard end -------------------- */\n\n  private getNear(treeNode: TreeNode, e: IPublicModelLocateEvent, originalIndex?: number, originalRect?: DOMRect) {\n    const { canvas, project } = this.pluginContext;\n    const document = project.getCurrentDocument();\n    const { globalY, dragObject } = e;\n    if (!dragObject) {\n      return null;\n    }\n    // TODO: check dragObject is anyData\n    const { node, expanded } = treeNode;\n    let rect = originalRect;\n    if (!rect) {\n      rect = this.getTreeNodeRect(treeNode);\n      if (!rect) {\n        return null;\n      }\n    }\n    let index = originalIndex;\n    if (index == null) {\n      index = node.index;\n    }\n\n    if (node.isSlotNode) {\n      // 是个插槽根节点\n      if (!treeNode.isContainer() && !treeNode.hasSlots()) {\n        return canvas.createLocation({\n          target: node.parent!,\n          source: this.id,\n          event: e,\n          detail: {\n            type: IPublicTypeLocationDetailType.Children,\n            index: null,\n            near: { node, pos: 'replace' },\n            valid: true, // TODO: future validation the slot limit\n          },\n        });\n      }\n      const loc1 = this.drillLocate(treeNode, e);\n      if (loc1) {\n        return loc1;\n      }\n\n      return canvas.createLocation({\n        target: node.parent!,\n        source: this.id,\n        event: e,\n        detail: {\n          type: IPublicTypeLocationDetailType.Children,\n          index: null,\n          valid: false,\n          focus: { type: 'slots' },\n        },\n      });\n    }\n\n    let focusNode: IPublicModelNode | undefined;\n    // focus\n    if (!expanded && (treeNode.isContainer() || treeNode.hasSlots())) {\n      focusNode = node;\n    }\n\n    // before\n    const titleRect = this.getTreeTitleRect(treeNode) || rect;\n    if (globalY < titleRect.top + titleRect.height / 2) {\n      return canvas.createLocation({\n        target: node.parent!,\n        source: this.id,\n        event: e,\n        detail: {\n          type: IPublicTypeLocationDetailType.Children,\n          index,\n          valid: document?.checkNesting(node.parent!, dragObject as any),\n          near: { node, pos: 'before' },\n          focus: checkRecursion(focusNode, dragObject) ? { type: 'node', node: focusNode } : undefined,\n        },\n      });\n    }\n\n    if (globalY > titleRect.bottom) {\n      focusNode = undefined;\n    }\n\n    if (expanded) {\n      // drill\n      const loc = this.drillLocate(treeNode, e);\n      if (loc) {\n        return loc;\n      }\n    }\n\n    // after\n    return canvas.createLocation({\n      target: node.parent!,\n      source: this.id,\n      event: e,\n      detail: {\n        type: IPublicTypeLocationDetailType.Children,\n        index: index + 1,\n        valid: document?.checkNesting(node.parent!, dragObject as any),\n        near: { node, pos: 'after' },\n        focus: checkRecursion(focusNode, dragObject) ? { type: 'node', node: focusNode } : undefined,\n      },\n    });\n  }\n\n  private drillLocate(treeNode: TreeNode, e: IPublicModelLocateEvent): IPublicModelDropLocation | null {\n    const { canvas, project } = this.pluginContext;\n    const document = project.getCurrentDocument();\n    const { dragObject, globalY } = e;\n    if (!dragObject) {\n      return null;\n    }\n\n    if (!checkRecursion(treeNode.node, dragObject)) {\n      return null;\n    }\n\n    if (isDragAnyObject(dragObject)) {\n      // TODO: future\n      return null;\n    }\n\n    const container = treeNode.node as IPublicModelNode;\n    const detail: IPublicTypeLocationChildrenDetail = {\n      type: IPublicTypeLocationDetailType.Children,\n    };\n    const locationData: any = {\n      target: container,\n      detail,\n      source: this.id,\n      event: e,\n    };\n    const isSlotContainer = treeNode.hasSlots();\n    const isContainer = treeNode.isContainer();\n\n    if (container.isSlot && !treeNode.expanded) {\n      // 未展开，直接定位到内部第一个节点\n      if (isSlotContainer) {\n        detail.index = null;\n        detail.focus = { type: 'slots' };\n        detail.valid = false;\n      } else {\n        detail.index = 0;\n        detail.valid = document?.checkNesting(container, dragObject);\n      }\n    }\n\n    let items: TreeNode[] | null = null;\n    let slotsRect: DOMRect | undefined;\n    let focusSlots = false;\n    // isSlotContainer\n    if (isSlotContainer) {\n      slotsRect = this.getTreeSlotsRect(treeNode);\n      if (slotsRect) {\n        if (globalY <= slotsRect.bottom) {\n          focusSlots = true;\n          items = treeNode.slots;\n        } else if (!isContainer) {\n          // 不在 slots 范围，又不是 container 的情况，高亮 slots 区\n          detail.index = null;\n          detail.focus = { type: 'slots' };\n          detail.valid = false;\n          return canvas.createLocation(locationData);\n        }\n      }\n    }\n\n    if (!items && isContainer) {\n      items = treeNode.children;\n    }\n\n    if (!items) {\n      return null;\n    }\n\n    const l = items.length;\n    let index = 0;\n    let before = l < 1;\n    let current: TreeNode | undefined;\n    let currentIndex = index;\n    for (; index < l; index++) {\n      current = items[index];\n      currentIndex = index;\n      const rect = this.getTreeNodeRect(current);\n      if (!rect) {\n        continue;\n      }\n\n      // rect\n      if (globalY < rect.top) {\n        before = true;\n        break;\n      }\n\n      if (globalY > rect.bottom) {\n        continue;\n      }\n\n      const loc = this.getNear(current, e, index, rect);\n      if (loc) {\n        return loc;\n      }\n    }\n\n    if (focusSlots) {\n      detail.focus = { type: 'slots' };\n      detail.valid = false;\n      detail.index = null;\n    } else {\n      if (current) {\n        detail.index = before ? currentIndex : currentIndex + 1;\n        detail.near = { node: current.node, pos: before ? 'before' : 'after' };\n      } else {\n        detail.index = l;\n      }\n      detail.valid = document?.checkNesting(container, dragObject);\n    }\n\n    return canvas.createLocation(locationData);\n  }\n\n  purge() {\n    const { canvas } = this.pluginContext;\n    canvas.dragon?.removeSensor(this);\n    this.treeMaster?.removeBoard(this);\n  }\n\n  mount(shell: HTMLDivElement | null) {\n    if (this._shell === shell) {\n      return;\n    }\n    this._shell = shell;\n    const { canvas, project } = this.pluginContext;\n    if (shell) {\n      this._scrollTarget = canvas.createScrollTarget(shell);\n      this._sensorAvailable = true;\n\n      // check if there is current selection and scroll to it\n      const selection = project.currentDocument?.selection;\n      const topNodes = selection?.getTopNodes(true);\n      const tree = this.treeMaster?.currentTree;\n      if (topNodes && topNodes[0] && tree) {\n        const treeNode = tree.getTreeNodeById(topNodes[0].id);\n        if (treeNode) {\n          // at this moment, it is possible that pane is not ready yet, so\n          // put ui related operations to the next loop\n          setTimeout(() => {\n            tree.setNodeSelected(treeNode.id);\n            this.scrollToNode(treeNode, null, 4);\n          }, 0);\n        }\n      }\n    } else {\n      this._scrollTarget = undefined;\n      this._sensorAvailable = false;\n    }\n  }\n\n  private getInsertionRect(): DOMRect | undefined {\n    if (!this._shell) {\n      return undefined;\n    }\n    return this._shell.querySelector('.insertion')?.getBoundingClientRect();\n  }\n\n  private getTreeNodeRect(treeNode: TreeNode): DOMRect | undefined {\n    if (!this._shell) {\n      return undefined;\n    }\n    return this._shell.querySelector(`.tree-node[data-id=\"${treeNode.id}\"]`)?.getBoundingClientRect();\n  }\n\n  private getTreeTitleRect(treeNode: TreeNode): DOMRect | undefined {\n    if (!this._shell) {\n      return undefined;\n    }\n    return this._shell.querySelector(`.tree-node-title[data-id=\"${treeNode.id}\"]`)?.getBoundingClientRect();\n  }\n\n  private getTreeSlotsRect(treeNode: TreeNode): DOMRect | undefined {\n    if (!this._shell) {\n      return undefined;\n    }\n    return this._shell.querySelector(`.tree-node-slots[data-id=\"${treeNode.id}\"]`)?.getBoundingClientRect();\n  }\n}\n\nfunction checkRecursion(parent: IPublicModelNode | undefined | null, dragObject: IPublicModelDragObject): boolean {\n  if (!parent) {\n    return false;\n  }\n  if (isDragNodeObject(dragObject)) {\n    const { nodes } = dragObject;\n    if (nodes.some((node: IPublicModelNode) => node.contains(parent))) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getPosFromEvent(\n  { target }: IPublicModelLocateEvent,\n  stop: Element,\n): null | 'unchanged' | { nodeId: string; focusSlots: boolean } {\n  if (!target || !stop.contains(target)) {\n    return null;\n  }\n  if (target.matches('.insertion')) {\n    return 'unchanged';\n  }\n  const closest = target.closest('[data-id]');\n  if (!closest || !stop.contains(closest)) {\n    return null;\n  }\n\n  const nodeId = (closest as HTMLDivElement).dataset.id!;\n  return {\n    focusSlots: closest.matches('.tree-node-slots'),\n    nodeId,\n  };\n}\n","import { Pane } from './views/pane';\nimport { IconOutline } from './icons/outline';\nimport { IPublicModelPluginContext, IPublicModelDocumentModel } from '@alilc/lowcode-types';\nimport { enUS, zhCN } from './locale';\nimport { MasterPaneName, BackupPaneName } from './helper/consts';\nimport { TreeMaster } from './controllers/tree-master';\nimport { PaneController } from './controllers/pane-controller';\n\nexport const OutlinePlugin = (ctx: IPublicModelPluginContext, options: any) => {\n  const { skeleton, config, common, event, canvas, project } = ctx;\n  const { intl, intlNode, getLocale } = common.utils.createIntl({\n    'en-US': enUS,\n    'zh-CN': zhCN,\n  });\n  ctx.intl = intl;\n  ctx.intlNode = intlNode;\n  ctx.getLocale = getLocale;\n  ctx.extraTitle = options && options['extraTitle'];\n\n  let isInFloatArea = true;\n  const hasPreferenceForOutline = config.getPreference().contains('outline-pane-pinned-status-isFloat', 'skeleton');\n  if (hasPreferenceForOutline) {\n    isInFloatArea = config.getPreference().get('outline-pane-pinned-status-isFloat', 'skeleton');\n  }\n  const showingPanes = {\n    masterPane: false,\n    backupPane: false,\n  };\n  const treeMaster = new TreeMaster(ctx);\n  let masterPaneController: PaneController | null = null;\n  let backupPaneController: PaneController | null = null;\n  return {\n    async init() {\n      skeleton.add({\n        area: 'leftArea',\n        name: 'outlinePane',\n        type: 'PanelDock',\n        index: -1,\n        content: {\n          name: MasterPaneName,\n          props: {\n            icon: IconOutline,\n            description: intlNode('Outline Tree'),\n          },\n          content: (props: any) => {\n            masterPaneController = new PaneController(MasterPaneName, ctx, treeMaster);\n            return (\n              <Pane\n                config={config}\n                pluginContext={ctx}\n                treeMaster={treeMaster}\n                controller={masterPaneController}\n                {...props}\n              />\n            );\n          },\n        },\n        panelProps: {\n          area: isInFloatArea ? 'leftFloatArea' : 'leftFixedArea',\n          keepVisibleWhileDragging: true,\n          ...config.get('defaultOutlinePaneProps'),\n        },\n        contentProps: {\n          treeTitleExtra: config.get('treeTitleExtra'),\n        },\n      });\n\n      skeleton.add({\n        area: 'rightArea',\n        name: BackupPaneName,\n        type: 'Panel',\n        props: {\n          hiddenWhenInit: true,\n        },\n        content: (props: any) => {\n          backupPaneController = new PaneController(BackupPaneName, ctx, treeMaster);\n          return (\n            <Pane\n              pluginContext={ctx}\n              treeMaster={treeMaster}\n              controller={backupPaneController}\n              {...props}\n            />\n          );\n        },\n      });\n\n      // 处理 master pane 和 backup pane 切换\n      const switchPanes = () => {\n        const isDragging = canvas.dragon?.dragging;\n        const hasVisibleTreeBoard = showingPanes.backupPane || showingPanes.masterPane;\n        const shouldShowBackupPane = isDragging && !hasVisibleTreeBoard;\n\n        if (shouldShowBackupPane) {\n          skeleton.showPanel(BackupPaneName);\n        } else {\n          skeleton.hidePanel(BackupPaneName);\n        }\n      };\n      canvas.dragon?.onDragstart(() => {\n        switchPanes();\n      });\n      canvas.dragon?.onDragend(() => {\n        switchPanes();\n      });\n      skeleton.onShowPanel((key: string) => {\n        if (key === MasterPaneName) {\n          showingPanes.masterPane = true;\n        }\n        if (key === BackupPaneName) {\n          showingPanes.backupPane = true;\n        }\n      });\n      skeleton.onHidePanel((key: string) => {\n        if (key === MasterPaneName) {\n          showingPanes.masterPane = false;\n          switchPanes();\n        }\n        if (key === BackupPaneName) {\n          showingPanes.backupPane = false;\n        }\n      });\n      project.onChangeDocument((document: IPublicModelDocumentModel) => {\n        if (!document) {\n          return;\n        }\n\n        const { selection } = document;\n\n        selection?.onSelectionChange(() => {\n          const selectedNodes = selection?.getNodes();\n          if (!selectedNodes || selectedNodes.length === 0) {\n            return;\n          }\n          const tree = treeMaster.currentTree;\n          selectedNodes.forEach((node) => {\n            const treeNode = tree?.getTreeNodeById(node.id);\n            tree?.expandAllAncestors(treeNode);\n          });\n        });\n      });\n    },\n  };\n};\nOutlinePlugin.meta = {\n  eventPrefix: 'OutlinePlugin',\n  preferenceDeclaration: {\n    title: '大纲树插件配置',\n    properties: [\n      {\n        key: 'extraTitle',\n        type: 'object',\n        description: '副标题',\n      },\n    ],\n  },\n};\nOutlinePlugin.pluginName = 'OutlinePlugin';","/* eslint-disable max-len */\n/* eslint-disable no-param-reassign */\nimport { createElement } from 'react';\nimport { render, unmountComponentAtNode } from 'react-dom';\nimport {\n  globalContext,\n  Editor,\n  commonEvent,\n  engineConfig,\n  Setters as InnerSetters,\n  Hotkey as InnerHotkey,\n} from '@alilc/lowcode-editor-core';\nimport {\n  IPublicTypeEngineOptions,\n  IPublicModelDocumentModel,\n  IPublicTypePluginMeta,\n} from '@alilc/lowcode-types';\nimport {\n  Designer,\n  LowCodePluginManager,\n  ILowCodePluginContextPrivate,\n  ILowCodePluginContextApiAssembler,\n  PluginPreference,\n} from '@alilc/lowcode-designer';\nimport {\n  Skeleton as InnerSkeleton,\n  registerDefaults,\n} from '@alilc/lowcode-editor-skeleton';\nimport {\n  Workspace as InnerWorkspace,\n  Workbench as WorkSpaceWorkbench,\n} from '@alilc/lowcode-workspace';\n\nimport {\n  Hotkey,\n  Project,\n  Skeleton,\n  Setters,\n  Material,\n  Event,\n  Plugins,\n  Common,\n  Logger,\n  Canvas,\n  Workspace,\n} from '@alilc/lowcode-shell';\nimport { isPlainObject } from '@alilc/lowcode-utils';\nimport './modules/live-editing';\nimport classes from './modules/classes';\nimport symbols from './modules/symbols';\nimport { componentMetaParser } from './inner-plugins/component-meta-parser';\nimport { setterRegistry } from './inner-plugins/setter-registry';\nimport { defaultPanelRegistry } from './inner-plugins/default-panel-registry';\nimport { shellModelFactory } from './modules/shell-model-factory';\nimport { builtinHotkey } from './inner-plugins/builtin-hotkey';\nimport { OutlinePlugin } from '@alilc/lowcode-plugin-outline-pane';\n\nexport * from './modules/skeleton-types';\nexport * from './modules/designer-types';\nexport * from './modules/lowcode-types';\n\nasync function registryInnerPlugin(designer: Designer, editor: Editor, plugins: Plugins) {\n  // 注册一批内置插件\n  await plugins.register(OutlinePlugin, {}, { autoInit: true });\n  await plugins.register(componentMetaParser(designer));\n  await plugins.register(setterRegistry, {});\n  await plugins.register(defaultPanelRegistry(editor));\n  await plugins.register(builtinHotkey);\n  await plugins.register(registerDefaults, {}, { autoInit: true });\n}\n\nconst innerWorkspace = new InnerWorkspace(registryInnerPlugin, shellModelFactory);\nconst workspace = new Workspace(innerWorkspace);\nconst editor = new Editor();\nglobalContext.register(editor, Editor);\nglobalContext.register(editor, 'editor');\nglobalContext.register(innerWorkspace, 'workspace');\n\nconst innerSkeleton = new InnerSkeleton(editor);\neditor.set('skeleton' as any, innerSkeleton);\n\nconst designer = new Designer({ editor, shellModelFactory });\neditor.set('designer' as any, designer);\n\nconst { project: innerProject } = designer;\n\nconst innerHotkey = new InnerHotkey();\nconst hotkey = new Hotkey(innerHotkey);\nconst project = new Project(innerProject);\nconst skeleton = new Skeleton(innerSkeleton, 'any', false);\nconst innerSetters = new InnerSetters();\nconst setters = new Setters(innerSetters);\n\nconst material = new Material(editor);\neditor.set('project', project);\neditor.set('setters' as any, setters);\neditor.set('material', material);\neditor.set('innerHotkey', innerHotkey);\nconst config = engineConfig;\nconst event = new Event(commonEvent, { prefix: 'common' });\nconst logger = new Logger({ level: 'warn', bizName: 'common' });\nconst common = new Common(editor, innerSkeleton);\nconst canvas = new Canvas(editor);\nlet plugins: Plugins;\n\nconst pluginContextApiAssembler: ILowCodePluginContextApiAssembler = {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  assembleApis: (context: ILowCodePluginContextPrivate, pluginName: string, meta: IPublicTypePluginMeta) => {\n    context.hotkey = hotkey;\n    context.project = project;\n    context.skeleton = new Skeleton(innerSkeleton, pluginName, false);\n    context.setters = setters;\n    context.material = material;\n    const eventPrefix = meta?.eventPrefix || 'common';\n    context.event = new Event(commonEvent, { prefix: eventPrefix });\n    context.config = config;\n    context.common = common;\n    context.canvas = canvas;\n    context.plugins = plugins;\n    context.logger = new Logger({ level: 'warn', bizName: `plugin:${pluginName}` });\n  },\n};\n\nconst innerPlugins = new LowCodePluginManager(pluginContextApiAssembler);\nplugins = new Plugins(innerPlugins).toProxy();\neditor.set('innerPlugins' as any, innerPlugins);\neditor.set('plugins' as any, plugins);\n\nexport {\n  skeleton,\n  plugins,\n  project,\n  setters,\n  material,\n  config,\n  event,\n  logger,\n  hotkey,\n  common,\n  // 兼容原 editor 的事件功能\n  event as editor,\n  workspace,\n  canvas,\n};\n// declare this is open-source version\nexport const isOpenSource = true;\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n  symbols,\n  classes,\n};\nengineConfig.set('isOpenSource', isOpenSource);\n\n// container which will host LowCodeEngine DOM\nlet engineContainer: HTMLElement;\n// @ts-ignore webpack Define variable\nexport const version = VERSION_PLACEHOLDER;\nengineConfig.set('ENGINE_VERSION', version);\n\nregistryInnerPlugin(designer, editor, plugins);\n\nexport async function init(\n  container?: HTMLElement,\n  options?: IPublicTypeEngineOptions,\n  pluginPreference?: PluginPreference,\n  ) {\n  await destroy();\n  let engineOptions = null;\n  if (isPlainObject(container)) {\n    engineOptions = container;\n    engineContainer = document.createElement('div');\n    engineContainer.id = 'engine';\n    document.body.appendChild(engineContainer);\n  } else {\n    engineOptions = options;\n    engineContainer = container;\n    if (!container) {\n      engineContainer = document.createElement('div');\n      engineContainer.id = 'engine';\n      document.body.appendChild(engineContainer);\n    }\n  }\n  engineConfig.setEngineOptions(engineOptions as any);\n\n  await plugins.init(pluginPreference as any);\n\n  const { Workbench } = common.skeletonCabin;\n  if (options && options.enableWorkspaceMode) {\n    render(\n      createElement(WorkSpaceWorkbench, {\n        workspace: innerWorkspace,\n        // skeleton: workspace.skeleton,\n        className: 'engine-main',\n        topAreaItemClassName: 'engine-actionitem',\n      }),\n      engineContainer,\n    );\n    innerWorkspace.setActive(true);\n    innerHotkey.activate(false);\n    await innerWorkspace.plugins.init(pluginPreference);\n    return;\n  }\n\n  render(\n    createElement(Workbench, {\n      skeleton: innerSkeleton,\n      className: 'engine-main',\n      topAreaItemClassName: 'engine-actionitem',\n    }),\n    engineContainer,\n  );\n}\n\nexport async function destroy() {\n  // remove all documents\n  const { documents } = project;\n  if (Array.isArray(documents) && documents.length > 0) {\n    documents.forEach(((doc: IPublicModelDocumentModel) => project.removeDocument(doc)));\n  }\n\n  // TODO: delete plugins except for core plugins\n\n  // unmount DOM container, this will trigger React componentWillUnmount lifeCycle,\n  // so necessary cleanups will be done.\n  engineContainer && unmountComponentAtNode(engineContainer);\n}\n","import { version } from './engine-core';\n\nexport * from './engine-core';\nconsole.log(\n  `%c AliLowCodeEngine %c v${version} `,\n  'padding: 2px 1px; border-radius: 3px 0 0 3px; color: #fff; background: #606060; font-weight: bold;',\n  'padding: 2px 1px; border-radius: 0 3px 3px 0; color: #fff; background: #42c02e; font-weight: bold;',\n);\n"],"sourceRoot":""}